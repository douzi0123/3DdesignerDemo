(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const d of a.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();/**
* @vue/shared v3.4.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Bg(t,e){const n=new Set(t.split(","));return e?i=>n.has(i.toLowerCase()):i=>n.has(i)}const vn={},Ya=[],Ht=()=>{},wA=()=>!1,Kf=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Ug=t=>t.startsWith("onUpdate:"),kn=Object.assign,Vg=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},CA=Object.prototype.hasOwnProperty,Mt=(t,e)=>CA.call(t,e),Ze=Array.isArray,qa=t=>Cu(t)==="[object Map]",Yf=t=>Cu(t)==="[object Set]",qo=t=>Cu(t)==="[object Date]",lt=t=>typeof t=="function",ct=t=>typeof t=="string",Zs=t=>typeof t=="symbol",_t=t=>t!==null&&typeof t=="object",Vc=t=>(_t(t)||lt(t))&&lt(t.then)&&lt(t.catch),gC=Object.prototype.toString,Cu=t=>gC.call(t),Vd=t=>Cu(t).slice(8,-1),vC=t=>Cu(t)==="[object Object]",Hg=t=>ct(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,wc=Bg(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),qf=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},xA=/-(\w)/g,Xi=qf(t=>t.replace(xA,(e,n)=>n?n.toUpperCase():"")),TA=/\B([A-Z])/g,so=qf(t=>t.replace(TA,"-$1").toLowerCase()),xu=qf(t=>t.charAt(0).toUpperCase()+t.slice(1)),Hd=qf(t=>t?`on${xu(t)}`:""),Js=(t,e)=>!Object.is(t,e),zd=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},bf=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},am=t=>{const e=parseFloat(t);return isNaN(e)?t:e},EA=t=>{const e=ct(t)?Number(t):NaN;return isNaN(e)?t:e};let Z0;const yC=()=>Z0||(Z0=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function nt(t){if(Ze(t)){const e={};for(let n=0;n<t.length;n++){const i=t[n],r=ct(i)?RA(i):nt(i);if(r)for(const a in r)e[a]=r[a]}return e}else if(ct(t)||_t(t))return t}const MA=/;(?![^(]*\))/g,AA=/:([^]+)/,kA=/\/\*[^]*?\*\//g;function RA(t){const e={};return t.replace(kA,"").split(MA).forEach(n=>{if(n){const i=n.split(AA);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function B(t){let e="";if(ct(t))e=t;else if(Ze(t))for(let n=0;n<t.length;n++){const i=B(t[n]);i&&(e+=i+" ")}else if(_t(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function dr(t){if(!t)return null;let{class:e,style:n}=t;return e&&!ct(e)&&(t.class=B(e)),n&&(t.style=nt(n)),t}const PA="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",OA=Bg(PA);function bC(t){return!!t||t===""}function LA(t,e){if(t.length!==e.length)return!1;let n=!0;for(let i=0;n&&i<t.length;i++)n=ul(t[i],e[i]);return n}function ul(t,e){if(t===e)return!0;let n=qo(t),i=qo(e);if(n||i)return n&&i?t.getTime()===e.getTime():!1;if(n=Zs(t),i=Zs(e),n||i)return t===e;if(n=Ze(t),i=Ze(e),n||i)return n&&i?LA(t,e):!1;if(n=_t(t),i=_t(e),n||i){if(!n||!i)return!1;const r=Object.keys(t).length,a=Object.keys(e).length;if(r!==a)return!1;for(const d in t){const s=t.hasOwnProperty(d),o=e.hasOwnProperty(d);if(s&&!o||!s&&o||!ul(t[d],e[d]))return!1}}return String(t)===String(e)}function _C(t,e){return t.findIndex(n=>ul(n,e))}const $e=t=>ct(t)?t:t==null?"":Ze(t)||_t(t)&&(t.toString===gC||!lt(t.toString))?JSON.stringify(t,SC,2):String(t),SC=(t,e)=>e&&e.__v_isRef?SC(t,e.value):qa(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[i,r],a)=>(n[Wh(i,a)+" =>"]=r,n),{})}:Yf(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Wh(n))}:Zs(e)?Wh(e):_t(e)&&!Ze(e)&&!vC(e)?String(e):e,Wh=(t,e="")=>{var n;return Zs(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.4.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Oi;class wC{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Oi,!e&&Oi&&(this.index=(Oi.scopes||(Oi.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=Oi;try{return Oi=this,e()}finally{Oi=n}}}on(){Oi=this}off(){Oi=this.parent}stop(e){if(this._active){let n,i;for(n=0,i=this.effects.length;n<i;n++)this.effects[n].stop();for(n=0,i=this.cleanups.length;n<i;n++)this.cleanups[n]();if(this.scopes)for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0,this._active=!1}}}function IA(t){return new wC(t)}function DA(t,e=Oi){e&&e.active&&e.effects.push(t)}function CC(){return Oi}function xC(t){Oi&&Oi.cleanups.push(t)}let zo;class zg{constructor(e,n,i,r){this.fn=e,this.trigger=n,this.scheduler=i,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,DA(this,r)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,oa();for(let e=0;e<this._depsLength;e++){const n=this.deps[e];if(n.computed&&(NA(n.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),aa()}return this._dirtyLevel>=4}set dirty(e){this._dirtyLevel=e?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=Xs,n=zo;try{return Xs=!0,zo=this,this._runnings++,J0(this),this.fn()}finally{Q0(this),this._runnings--,zo=n,Xs=e}}stop(){var e;this.active&&(J0(this),Q0(this),(e=this.onStop)==null||e.call(this),this.active=!1)}}function NA(t){return t.value}function J0(t){t._trackId++,t._depsLength=0}function Q0(t){if(t.deps.length>t._depsLength){for(let e=t._depsLength;e<t.deps.length;e++)TC(t.deps[e],t);t.deps.length=t._depsLength}}function TC(t,e){const n=t.get(e);n!==void 0&&e._trackId!==n&&(t.delete(e),t.size===0&&t.cleanup())}let Xs=!0,lm=0;const EC=[];function oa(){EC.push(Xs),Xs=!1}function aa(){const t=EC.pop();Xs=t===void 0?!0:t}function $g(){lm++}function Wg(){for(lm--;!lm&&cm.length;)cm.shift()()}function MC(t,e,n){if(e.get(t)!==t._trackId){e.set(t,t._trackId);const i=t.deps[t._depsLength];i!==e?(i&&TC(i,t),t.deps[t._depsLength++]=e):t._depsLength++}}const cm=[];function AC(t,e,n){$g();for(const i of t.keys()){let r;i._dirtyLevel<e&&(r??(r=t.get(i)===i._trackId))&&(i._shouldSchedule||(i._shouldSchedule=i._dirtyLevel===0),i._dirtyLevel=e),i._shouldSchedule&&(r??(r=t.get(i)===i._trackId))&&(i.trigger(),(!i._runnings||i.allowRecurse)&&i._dirtyLevel!==2&&(i._shouldSchedule=!1,i.scheduler&&cm.push(i.scheduler)))}Wg()}const kC=(t,e)=>{const n=new Map;return n.cleanup=t,n.computed=e,n},_f=new WeakMap,$o=Symbol(""),um=Symbol("");function Ei(t,e,n){if(Xs&&zo){let i=_f.get(t);i||_f.set(t,i=new Map);let r=i.get(n);r||i.set(n,r=kC(()=>i.delete(n))),MC(zo,r)}}function ss(t,e,n,i,r,a){const d=_f.get(t);if(!d)return;let s=[];if(e==="clear")s=[...d.values()];else if(n==="length"&&Ze(t)){const o=Number(i);d.forEach((c,h)=>{(h==="length"||!Zs(h)&&h>=o)&&s.push(c)})}else switch(n!==void 0&&s.push(d.get(n)),e){case"add":Ze(t)?Hg(n)&&s.push(d.get("length")):(s.push(d.get($o)),qa(t)&&s.push(d.get(um)));break;case"delete":Ze(t)||(s.push(d.get($o)),qa(t)&&s.push(d.get(um)));break;case"set":qa(t)&&s.push(d.get($o));break}$g();for(const o of s)o&&AC(o,4);Wg()}function FA(t,e){var n;return(n=_f.get(t))==null?void 0:n.get(e)}const BA=Bg("__proto__,__v_isRef,__isVue"),RC=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Zs)),ey=UA();function UA(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const i=Bt(this);for(let a=0,d=this.length;a<d;a++)Ei(i,"get",a+"");const r=i[e](...n);return r===-1||r===!1?i[e](...n.map(Bt)):r}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){oa(),$g();const i=Bt(this)[e].apply(this,n);return Wg(),aa(),i}}),t}function VA(t){const e=Bt(this);return Ei(e,"has",t),e.hasOwnProperty(t)}class PC{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,i){const r=this._isReadonly,a=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return a;if(n==="__v_raw")return i===(r?a?QA:DC:a?IC:LC).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(i)?e:void 0;const d=Ze(e);if(!r){if(d&&Mt(ey,n))return Reflect.get(ey,n,i);if(n==="hasOwnProperty")return VA}const s=Reflect.get(e,n,i);return(Zs(n)?RC.has(n):BA(n))||(r||Ei(e,"get",n),a)?s:en(s)?d&&Hg(n)?s:s.value:_t(s)?r?Ul(s):Ft(s):s}}class OC extends PC{constructor(e=!1){super(!1,e)}set(e,n,i,r){let a=e[n];if(!this._isShallow){const o=dl(a);if(!Sf(i)&&!dl(i)&&(a=Bt(a),i=Bt(i)),!Ze(e)&&en(a)&&!en(i))return o?!1:(a.value=i,!0)}const d=Ze(e)&&Hg(n)?Number(n)<e.length:Mt(e,n),s=Reflect.set(e,n,i,r);return e===Bt(r)&&(d?Js(i,a)&&ss(e,"set",n,i):ss(e,"add",n,i)),s}deleteProperty(e,n){const i=Mt(e,n);e[n];const r=Reflect.deleteProperty(e,n);return r&&i&&ss(e,"delete",n,void 0),r}has(e,n){const i=Reflect.has(e,n);return(!Zs(n)||!RC.has(n))&&Ei(e,"has",n),i}ownKeys(e){return Ei(e,"iterate",Ze(e)?"length":$o),Reflect.ownKeys(e)}}class HA extends PC{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const zA=new OC,$A=new HA,WA=new OC(!0),Gg=t=>t,Zf=t=>Reflect.getPrototypeOf(t);function Wu(t,e,n=!1,i=!1){t=t.__v_raw;const r=Bt(t),a=Bt(e);n||(Js(e,a)&&Ei(r,"get",e),Ei(r,"get",a));const{has:d}=Zf(r),s=i?Gg:n?Kg:Hc;if(d.call(r,e))return s(t.get(e));if(d.call(r,a))return s(t.get(a));t!==r&&t.get(e)}function Gu(t,e=!1){const n=this.__v_raw,i=Bt(n),r=Bt(t);return e||(Js(t,r)&&Ei(i,"has",t),Ei(i,"has",r)),t===r?n.has(t):n.has(t)||n.has(r)}function ju(t,e=!1){return t=t.__v_raw,!e&&Ei(Bt(t),"iterate",$o),Reflect.get(t,"size",t)}function ty(t){t=Bt(t);const e=Bt(this);return Zf(e).has.call(e,t)||(e.add(t),ss(e,"add",t,t)),this}function ny(t,e){e=Bt(e);const n=Bt(this),{has:i,get:r}=Zf(n);let a=i.call(n,t);a||(t=Bt(t),a=i.call(n,t));const d=r.call(n,t);return n.set(t,e),a?Js(e,d)&&ss(n,"set",t,e):ss(n,"add",t,e),this}function iy(t){const e=Bt(this),{has:n,get:i}=Zf(e);let r=n.call(e,t);r||(t=Bt(t),r=n.call(e,t)),i&&i.call(e,t);const a=e.delete(t);return r&&ss(e,"delete",t,void 0),a}function ry(){const t=Bt(this),e=t.size!==0,n=t.clear();return e&&ss(t,"clear",void 0,void 0),n}function Xu(t,e){return function(i,r){const a=this,d=a.__v_raw,s=Bt(d),o=e?Gg:t?Kg:Hc;return!t&&Ei(s,"iterate",$o),d.forEach((c,h)=>i.call(r,o(c),o(h),a))}}function Ku(t,e,n){return function(...i){const r=this.__v_raw,a=Bt(r),d=qa(a),s=t==="entries"||t===Symbol.iterator&&d,o=t==="keys"&&d,c=r[t](...i),h=n?Gg:e?Kg:Hc;return!e&&Ei(a,"iterate",o?um:$o),{next(){const{value:l,done:u}=c.next();return u?{value:l,done:u}:{value:s?[h(l[0]),h(l[1])]:h(l),done:u}},[Symbol.iterator](){return this}}}}function xs(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function GA(){const t={get(a){return Wu(this,a)},get size(){return ju(this)},has:Gu,add:ty,set:ny,delete:iy,clear:ry,forEach:Xu(!1,!1)},e={get(a){return Wu(this,a,!1,!0)},get size(){return ju(this)},has:Gu,add:ty,set:ny,delete:iy,clear:ry,forEach:Xu(!1,!0)},n={get(a){return Wu(this,a,!0)},get size(){return ju(this,!0)},has(a){return Gu.call(this,a,!0)},add:xs("add"),set:xs("set"),delete:xs("delete"),clear:xs("clear"),forEach:Xu(!0,!1)},i={get(a){return Wu(this,a,!0,!0)},get size(){return ju(this,!0)},has(a){return Gu.call(this,a,!0)},add:xs("add"),set:xs("set"),delete:xs("delete"),clear:xs("clear"),forEach:Xu(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(a=>{t[a]=Ku(a,!1,!1),n[a]=Ku(a,!0,!1),e[a]=Ku(a,!1,!0),i[a]=Ku(a,!0,!0)}),[t,n,e,i]}const[jA,XA,KA,YA]=GA();function jg(t,e){const n=e?t?YA:KA:t?XA:jA;return(i,r,a)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?i:Reflect.get(Mt(n,r)&&r in i?n:i,r,a)}const qA={get:jg(!1,!1)},ZA={get:jg(!1,!0)},JA={get:jg(!0,!1)},LC=new WeakMap,IC=new WeakMap,DC=new WeakMap,QA=new WeakMap;function ek(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function tk(t){return t.__v_skip||!Object.isExtensible(t)?0:ek(Vd(t))}function Ft(t){return dl(t)?t:Xg(t,!1,zA,qA,LC)}function NC(t){return Xg(t,!1,WA,ZA,IC)}function Ul(t){return Xg(t,!0,$A,JA,DC)}function Xg(t,e,n,i,r){if(!_t(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const a=r.get(t);if(a)return a;const d=tk(t);if(d===0)return t;const s=new Proxy(t,d===2?i:n);return r.set(t,s),s}function Za(t){return dl(t)?Za(t.__v_raw):!!(t&&t.__v_isReactive)}function dl(t){return!!(t&&t.__v_isReadonly)}function Sf(t){return!!(t&&t.__v_isShallow)}function FC(t){return Za(t)||dl(t)}function Bt(t){const e=t&&t.__v_raw;return e?Bt(e):t}function Wo(t){return Object.isExtensible(t)&&bf(t,"__v_skip",!0),t}const Hc=t=>_t(t)?Ft(t):t,Kg=t=>_t(t)?Ul(t):t;class BC{constructor(e,n,i,r){this.getter=e,this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new zg(()=>e(this._value),()=>Cc(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!r,this.__v_isReadonly=i}get value(){const e=Bt(this);return(!e._cacheable||e.effect.dirty)&&Js(e._value,e._value=e.effect.run())&&Cc(e,4),VC(e),e.effect._dirtyLevel>=2&&Cc(e,2),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function UC(t,e,n=!1){let i,r;const a=lt(t);return a?(i=t,r=Ht):(i=t.get,r=t.set),new BC(i,r,a||!r,n)}function VC(t){var e;Xs&&zo&&(t=Bt(t),MC(zo,(e=t.dep)!=null?e:t.dep=kC(()=>t.dep=void 0,t instanceof BC?t:void 0)))}function Cc(t,e=4,n){t=Bt(t);const i=t.dep;i&&AC(i,e)}function en(t){return!!(t&&t.__v_isRef===!0)}function q(t){return HC(t,!1)}function Jt(t){return HC(t,!0)}function HC(t,e){return en(t)?t:new nk(t,e)}class nk{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:Bt(e),this._value=n?e:Hc(e)}get value(){return VC(this),this._value}set value(e){const n=this.__v_isShallow||Sf(e)||dl(e);e=n?e:Bt(e),Js(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:Hc(e),Cc(this,4))}}function Jl(t){Cc(t,4)}function y(t){return en(t)?t.value:t}const ik={get:(t,e,n)=>y(Reflect.get(t,e,n)),set:(t,e,n,i)=>{const r=t[e];return en(r)&&!en(n)?(r.value=n,!0):Reflect.set(t,e,n,i)}};function zC(t){return Za(t)?t:new Proxy(t,ik)}function Rn(t){const e=Ze(t)?new Array(t.length):{};for(const n in t)e[n]=$C(t,n);return e}class rk{constructor(e,n,i){this._object=e,this._key=n,this._defaultValue=i,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return FA(Bt(this._object),this._key)}}class sk{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function ln(t,e,n){return en(t)?t:lt(t)?new sk(t):_t(t)&&arguments.length>1?$C(t,e,n):q(t)}function $C(t,e,n){const i=t[e];return en(i)?i:new rk(t,e,n)}/**
* @vue/runtime-core v3.4.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ks(t,e,n,i){try{return i?t(...i):t()}catch(r){Jf(r,e,n)}}function Gi(t,e,n,i){if(lt(t)){const a=Ks(t,e,n,i);return a&&Vc(a)&&a.catch(d=>{Jf(d,e,n)}),a}const r=[];for(let a=0;a<t.length;a++)r.push(Gi(t[a],e,n,i));return r}function Jf(t,e,n,i=!0){const r=e?e.vnode:null;if(e){let a=e.parent;const d=e.proxy,s=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const c=a.ec;if(c){for(let h=0;h<c.length;h++)if(c[h](t,d,s)===!1)return}a=a.parent}const o=e.appContext.config.errorHandler;if(o){Ks(o,null,10,[t,d,s]);return}}ok(t,n,r,i)}function ok(t,e,n,i=!0){console.error(t)}let zc=!1,dm=!1;const Zn=[];let Er=0;const Ja=[];let Fs=null,Ao=0;const WC=Promise.resolve();let Yg=null;function et(t){const e=Yg||WC;return t?e.then(this?t.bind(this):t):e}function ak(t){let e=Er+1,n=Zn.length;for(;e<n;){const i=e+n>>>1,r=Zn[i],a=$c(r);a<t||a===t&&r.pre?e=i+1:n=i}return e}function qg(t){(!Zn.length||!Zn.includes(t,zc&&t.allowRecurse?Er+1:Er))&&(t.id==null?Zn.push(t):Zn.splice(ak(t.id),0,t),GC())}function GC(){!zc&&!dm&&(dm=!0,Yg=WC.then(XC))}function lk(t){const e=Zn.indexOf(t);e>Er&&Zn.splice(e,1)}function ck(t){Ze(t)?Ja.push(...t):(!Fs||!Fs.includes(t,t.allowRecurse?Ao+1:Ao))&&Ja.push(t),GC()}function sy(t,e,n=zc?Er+1:0){for(;n<Zn.length;n++){const i=Zn[n];if(i&&i.pre){if(t&&i.id!==t.uid)continue;Zn.splice(n,1),n--,i()}}}function jC(t){if(Ja.length){const e=[...new Set(Ja)].sort((n,i)=>$c(n)-$c(i));if(Ja.length=0,Fs){Fs.push(...e);return}for(Fs=e,Ao=0;Ao<Fs.length;Ao++)Fs[Ao]();Fs=null,Ao=0}}const $c=t=>t.id==null?1/0:t.id,uk=(t,e)=>{const n=$c(t)-$c(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function XC(t){dm=!1,zc=!0,Zn.sort(uk);try{for(Er=0;Er<Zn.length;Er++){const e=Zn[Er];e&&e.active!==!1&&Ks(e,null,14)}}finally{Er=0,Zn.length=0,jC(),zc=!1,Yg=null,(Zn.length||Ja.length)&&XC()}}function dk(t,e,...n){if(t.isUnmounted)return;const i=t.vnode.props||vn;let r=n;const a=e.startsWith("update:"),d=a&&e.slice(7);if(d&&d in i){const h=`${d==="modelValue"?"model":d}Modifiers`,{number:l,trim:u}=i[h]||vn;u&&(r=n.map(f=>ct(f)?f.trim():f)),l&&(r=n.map(am))}let s,o=i[s=Hd(e)]||i[s=Hd(Xi(e))];!o&&a&&(o=i[s=Hd(so(e))]),o&&Gi(o,t,6,r);const c=i[s+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[s])return;t.emitted[s]=!0,Gi(c,t,6,r)}}function KC(t,e,n=!1){const i=e.emitsCache,r=i.get(t);if(r!==void 0)return r;const a=t.emits;let d={},s=!1;if(!lt(t)){const o=c=>{const h=KC(c,e,!0);h&&(s=!0,kn(d,h))};!n&&e.mixins.length&&e.mixins.forEach(o),t.extends&&o(t.extends),t.mixins&&t.mixins.forEach(o)}return!a&&!s?(_t(t)&&i.set(t,null),null):(Ze(a)?a.forEach(o=>d[o]=null):kn(d,a),_t(t)&&i.set(t,d),d)}function Qf(t,e){return!t||!Kf(e)?!1:(e=e.slice(2).replace(/Once$/,""),Mt(t,e[0].toLowerCase()+e.slice(1))||Mt(t,so(e))||Mt(t,e))}let Pn=null,eh=null;function wf(t){const e=Pn;return Pn=t,eh=t&&t.type.__scopeId||null,e}function fk(t){eh=t}function hk(){eh=null}function ve(t,e=Pn,n){if(!e||t._n)return t;const i=(...r)=>{i._d&&by(-1);const a=wf(e);let d;try{d=t(...r)}finally{wf(a),i._d&&by(1)}return d};return i._n=!0,i._c=!0,i._d=!0,i}function Gh(t){const{type:e,vnode:n,proxy:i,withProxy:r,props:a,propsOptions:[d],slots:s,attrs:o,emit:c,render:h,renderCache:l,data:u,setupState:f,ctx:m,inheritAttrs:g}=t;let p,v;const b=wf(t);try{if(n.shapeFlag&4){const S=r||i,w=S;p=xr(h.call(w,S,l,a,f,u,m)),v=o}else{const S=e;p=xr(S.length>1?S(a,{attrs:o,slots:s,emit:c}):S(a,null)),v=e.props?o:pk(o)}}catch(S){Ac.length=0,Jf(S,t,1),p=ue(li)}let _=p;if(v&&g!==!1){const S=Object.keys(v),{shapeFlag:w}=_;S.length&&w&7&&(d&&S.some(Ug)&&(v=mk(v,d)),_=fs(_,v))}return n.dirs&&(_=fs(_),_.dirs=_.dirs?_.dirs.concat(n.dirs):n.dirs),n.transition&&(_.transition=n.transition),p=_,wf(b),p}const pk=t=>{let e;for(const n in t)(n==="class"||n==="style"||Kf(n))&&((e||(e={}))[n]=t[n]);return e},mk=(t,e)=>{const n={};for(const i in t)(!Ug(i)||!(i.slice(9)in e))&&(n[i]=t[i]);return n};function gk(t,e,n){const{props:i,children:r,component:a}=t,{props:d,children:s,patchFlag:o}=e,c=a.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&o>=0){if(o&1024)return!0;if(o&16)return i?oy(i,d,c):!!d;if(o&8){const h=e.dynamicProps;for(let l=0;l<h.length;l++){const u=h[l];if(d[u]!==i[u]&&!Qf(c,u))return!0}}}else return(r||s)&&(!s||!s.$stable)?!0:i===d?!1:i?d?oy(i,d,c):!0:!!d;return!1}function oy(t,e,n){const i=Object.keys(e);if(i.length!==Object.keys(t).length)return!0;for(let r=0;r<i.length;r++){const a=i[r];if(e[a]!==t[a]&&!Qf(n,a))return!0}return!1}function vk({vnode:t,parent:e},n){for(;e;){const i=e.subTree;if(i.suspense&&i.suspense.activeBranch===t&&(i.el=t.el),i===t)(t=e.vnode).el=n,e=e.parent;else break}}const Zg="components",yk="directives";function ft(t,e){return Jg(Zg,t,!0,e)||t}const YC=Symbol.for("v-ndc");function Ct(t){return ct(t)?Jg(Zg,t,!1)||t:t||YC}function Wc(t){return Jg(yk,t)}function Jg(t,e,n=!0,i=!1){const r=Pn||zn;if(r){const a=r.type;if(t===Zg){const s=aR(a,!1);if(s&&(s===e||s===Xi(e)||s===xu(Xi(e))))return a}const d=ay(r[t]||a[t],e)||ay(r.appContext[t],e);return!d&&i?a:d}}function ay(t,e){return t&&(t[e]||t[Xi(e)]||t[xu(Xi(e))])}const bk=t=>t.__isSuspense;function _k(t,e){e&&e.pendingBranch?Ze(t)?e.effects.push(...t):e.effects.push(t):ck(t)}const Sk=Symbol.for("v-scx"),wk=()=>Je(Sk);function Di(t,e){return Qg(t,null,e)}const Yu={};function Be(t,e,n){return Qg(t,e,n)}function Qg(t,e,{immediate:n,deep:i,flush:r,once:a,onTrack:d,onTrigger:s}=vn){if(e&&a){const C=e;e=(...x)=>{C(...x),w()}}const o=zn,c=C=>i===!0?C:Lo(C,i===!1?1:void 0);let h,l=!1,u=!1;if(en(t)?(h=()=>t.value,l=Sf(t)):Za(t)?(h=()=>c(t),l=!0):Ze(t)?(u=!0,l=t.some(C=>Za(C)||Sf(C)),h=()=>t.map(C=>{if(en(C))return C.value;if(Za(C))return c(C);if(lt(C))return Ks(C,o,2)})):lt(t)?e?h=()=>Ks(t,o,2):h=()=>(f&&f(),Gi(t,o,3,[m])):h=Ht,e&&i){const C=h;h=()=>Lo(C())}let f,m=C=>{f=_.onStop=()=>{Ks(C,o,4),f=_.onStop=void 0}},g;if(oh)if(m=Ht,e?n&&Gi(e,o,3,[h(),u?[]:void 0,m]):h(),r==="sync"){const C=wk();g=C.__watcherHandles||(C.__watcherHandles=[])}else return Ht;let p=u?new Array(t.length).fill(Yu):Yu;const v=()=>{if(!(!_.active||!_.dirty))if(e){const C=_.run();(i||l||(u?C.some((x,M)=>Js(x,p[M])):Js(C,p)))&&(f&&f(),Gi(e,o,3,[C,p===Yu?void 0:u&&p[0]===Yu?[]:p,m]),p=C)}else _.run()};v.allowRecurse=!!e;let b;r==="sync"?b=v:r==="post"?b=()=>bi(v,o&&o.suspense):(v.pre=!0,o&&(v.id=o.uid),b=()=>qg(v));const _=new zg(h,Ht,b),S=CC(),w=()=>{_.stop(),S&&Vg(S.effects,_)};return e?n?v():p=_.run():r==="post"?bi(_.run.bind(_),o&&o.suspense):_.run(),g&&g.push(w),w}function Ck(t,e,n){const i=this.proxy,r=ct(t)?t.includes(".")?qC(i,t):()=>i[t]:t.bind(i,i);let a;lt(e)?a=e:(a=e.handler,n=e);const d=Eu(this),s=Qg(r,a.bind(i),n);return d(),s}function qC(t,e){const n=e.split(".");return()=>{let i=t;for(let r=0;r<n.length&&i;r++)i=i[n[r]];return i}}function Lo(t,e,n=0,i){if(!_t(t)||t.__v_skip)return t;if(e&&e>0){if(n>=e)return t;n++}if(i=i||new Set,i.has(t))return t;if(i.add(t),en(t))Lo(t.value,e,n,i);else if(Ze(t))for(let r=0;r<t.length;r++)Lo(t[r],e,n,i);else if(Yf(t)||qa(t))t.forEach(r=>{Lo(r,e,n,i)});else if(vC(t))for(const r in t)Lo(t[r],e,n,i);return t}function pt(t,e){if(Pn===null)return t;const n=ah(Pn)||Pn.proxy,i=t.dirs||(t.dirs=[]);for(let r=0;r<e.length;r++){let[a,d,s,o=vn]=e[r];a&&(lt(a)&&(a={mounted:a,updated:a}),a.deep&&Lo(d),i.push({dir:a,instance:n,value:d,oldValue:void 0,arg:s,modifiers:o}))}return t}function vo(t,e,n,i){const r=t.dirs,a=e&&e.dirs;for(let d=0;d<r.length;d++){const s=r[d];a&&(s.oldValue=a[d].value);let o=s.dir[i];o&&(oa(),Gi(o,n,8,[t.el,s,t,e]),aa())}}const Bs=Symbol("_leaveCb"),qu=Symbol("_enterCb");function ZC(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return mt(()=>{t.isMounted=!0}),rn(()=>{t.isUnmounting=!0}),t}const Fi=[Function,Array],JC={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Fi,onEnter:Fi,onAfterEnter:Fi,onEnterCancelled:Fi,onBeforeLeave:Fi,onLeave:Fi,onAfterLeave:Fi,onLeaveCancelled:Fi,onBeforeAppear:Fi,onAppear:Fi,onAfterAppear:Fi,onAppearCancelled:Fi},xk={name:"BaseTransition",props:JC,setup(t,{slots:e}){const n=vt(),i=ZC();return()=>{const r=e.default&&ev(e.default(),!0);if(!r||!r.length)return;let a=r[0];if(r.length>1){for(const u of r)if(u.type!==li){a=u;break}}const d=Bt(t),{mode:s}=d;if(i.isLeaving)return jh(a);const o=ly(a);if(!o)return jh(a);const c=Gc(o,d,i,n);jc(o,c);const h=n.subTree,l=h&&ly(h);if(l&&l.type!==li&&!ko(o,l)){const u=Gc(l,d,i,n);if(jc(l,u),s==="out-in")return i.isLeaving=!0,u.afterLeave=()=>{i.isLeaving=!1,n.update.active!==!1&&(n.effect.dirty=!0,n.update())},jh(a);s==="in-out"&&o.type!==li&&(u.delayLeave=(f,m,g)=>{const p=QC(i,l);p[String(l.key)]=l,f[Bs]=()=>{m(),f[Bs]=void 0,delete c.delayedLeave},c.delayedLeave=g})}return a}}},Tk=xk;function QC(t,e){const{leavingVNodes:n}=t;let i=n.get(e.type);return i||(i=Object.create(null),n.set(e.type,i)),i}function Gc(t,e,n,i){const{appear:r,mode:a,persisted:d=!1,onBeforeEnter:s,onEnter:o,onAfterEnter:c,onEnterCancelled:h,onBeforeLeave:l,onLeave:u,onAfterLeave:f,onLeaveCancelled:m,onBeforeAppear:g,onAppear:p,onAfterAppear:v,onAppearCancelled:b}=e,_=String(t.key),S=QC(n,t),w=(M,E)=>{M&&Gi(M,i,9,E)},C=(M,E)=>{const A=E[1];w(M,E),Ze(M)?M.every(O=>O.length<=1)&&A():M.length<=1&&A()},x={mode:a,persisted:d,beforeEnter(M){let E=s;if(!n.isMounted)if(r)E=g||s;else return;M[Bs]&&M[Bs](!0);const A=S[_];A&&ko(t,A)&&A.el[Bs]&&A.el[Bs](),w(E,[M])},enter(M){let E=o,A=c,O=h;if(!n.isMounted)if(r)E=p||o,A=v||c,O=b||h;else return;let D=!1;const L=M[qu]=U=>{D||(D=!0,U?w(O,[M]):w(A,[M]),x.delayedLeave&&x.delayedLeave(),M[qu]=void 0)};E?C(E,[M,L]):L()},leave(M,E){const A=String(t.key);if(M[qu]&&M[qu](!0),n.isUnmounting)return E();w(l,[M]);let O=!1;const D=M[Bs]=L=>{O||(O=!0,E(),L?w(m,[M]):w(f,[M]),M[Bs]=void 0,S[A]===t&&delete S[A])};S[A]=t,u?C(u,[M,D]):D()},clone(M){return Gc(M,e,n,i)}};return x}function jh(t){if(th(t))return t=fs(t),t.children=null,t}function ly(t){return th(t)?t.children?t.children[0]:void 0:t}function jc(t,e){t.shapeFlag&6&&t.component?jc(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function ev(t,e=!1,n){let i=[],r=0;for(let a=0;a<t.length;a++){let d=t[a];const s=n==null?d.key:String(n)+String(d.key!=null?d.key:a);d.type===Qe?(d.patchFlag&128&&r++,i=i.concat(ev(d.children,e,s))):(e||d.type!==li)&&i.push(s!=null?fs(d,{key:s}):d)}if(r>1)for(let a=0;a<i.length;a++)i[a].patchFlag=-2;return i}/*! #__NO_SIDE_EFFECTS__ */function de(t,e){return lt(t)?kn({name:t.name},e,{setup:t}):t}const xc=t=>!!t.type.__asyncLoader,th=t=>t.type.__isKeepAlive;function Ek(t,e){t1(t,"a",e)}function e1(t,e){t1(t,"da",e)}function t1(t,e,n=zn){const i=t.__wdc||(t.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(nh(e,i,n),n){let r=n.parent;for(;r&&r.parent;)th(r.parent.vnode)&&Mk(i,e,n,r),r=r.parent}}function Mk(t,e,n,i){const r=nh(e,t,i,!0);oo(()=>{Vg(i[e],r)},n)}function nh(t,e,n=zn,i=!1){if(n){const r=n[t]||(n[t]=[]),a=e.__weh||(e.__weh=(...d)=>{if(n.isUnmounted)return;oa();const s=Eu(n),o=Gi(e,n,t,d);return s(),aa(),o});return i?r.unshift(a):r.push(a),a}}const gs=t=>(e,n=zn)=>(!oh||t==="sp")&&nh(t,(...i)=>e(...i),n),ih=gs("bm"),mt=gs("m"),n1=gs("bu"),vs=gs("u"),rn=gs("bum"),oo=gs("um"),Ak=gs("sp"),kk=gs("rtg"),Rk=gs("rtc");function Pk(t,e=zn){nh("ec",t,e)}function wt(t,e,n,i){let r;const a=n&&n[i];if(Ze(t)||ct(t)){r=new Array(t.length);for(let d=0,s=t.length;d<s;d++)r[d]=e(t[d],d,void 0,a&&a[d])}else if(typeof t=="number"){r=new Array(t);for(let d=0;d<t;d++)r[d]=e(d+1,d,void 0,a&&a[d])}else if(_t(t))if(t[Symbol.iterator])r=Array.from(t,(d,s)=>e(d,s,void 0,a&&a[s]));else{const d=Object.keys(t);r=new Array(d.length);for(let s=0,o=d.length;s<o;s++){const c=d[s];r[s]=e(t[c],c,s,a&&a[s])}}else r=[];return n&&(n[i]=r),r}function ds(t,e){for(let n=0;n<e.length;n++){const i=e[n];if(Ze(i))for(let r=0;r<i.length;r++)t[i[r].name]=i[r].fn;else i&&(t[i.name]=i.key?(...r)=>{const a=i.fn(...r);return a&&(a.key=i.key),a}:i.fn)}return t}function Le(t,e,n={},i,r){if(Pn.isCE||Pn.parent&&xc(Pn.parent)&&Pn.parent.isCE)return e!=="default"&&(n.name=e),ue("slot",n,i&&i());let a=t[e];a&&a._c&&(a._d=!1),I();const d=a&&i1(a(n)),s=ke(Qe,{key:n.key||d&&d.key||`_${e}`},d||(i?i():[]),d&&t._===1?64:-2);return!r&&s.scopeId&&(s.slotScopeIds=[s.scopeId+"-s"]),a&&a._c&&(a._d=!0),s}function i1(t){return t.some(e=>un(e)?!(e.type===li||e.type===Qe&&!i1(e.children)):!0)?t:null}function Ok(t,e){const n={};for(const i in t)n[e&&/[A-Z]/.test(i)?`on:${i}`:Hd(i)]=t[i];return n}const fm=t=>t?g1(t)?ah(t)||t.proxy:fm(t.parent):null,Tc=kn(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>fm(t.parent),$root:t=>fm(t.root),$emit:t=>t.emit,$options:t=>tv(t),$forceUpdate:t=>t.f||(t.f=()=>{t.effect.dirty=!0,qg(t.update)}),$nextTick:t=>t.n||(t.n=et.bind(t.proxy)),$watch:t=>Ck.bind(t)}),Xh=(t,e)=>t!==vn&&!t.__isScriptSetup&&Mt(t,e),Lk={get({_:t},e){const{ctx:n,setupState:i,data:r,props:a,accessCache:d,type:s,appContext:o}=t;let c;if(e[0]!=="$"){const f=d[e];if(f!==void 0)switch(f){case 1:return i[e];case 2:return r[e];case 4:return n[e];case 3:return a[e]}else{if(Xh(i,e))return d[e]=1,i[e];if(r!==vn&&Mt(r,e))return d[e]=2,r[e];if((c=t.propsOptions[0])&&Mt(c,e))return d[e]=3,a[e];if(n!==vn&&Mt(n,e))return d[e]=4,n[e];hm&&(d[e]=0)}}const h=Tc[e];let l,u;if(h)return e==="$attrs"&&Ei(t,"get",e),h(t);if((l=s.__cssModules)&&(l=l[e]))return l;if(n!==vn&&Mt(n,e))return d[e]=4,n[e];if(u=o.config.globalProperties,Mt(u,e))return u[e]},set({_:t},e,n){const{data:i,setupState:r,ctx:a}=t;return Xh(r,e)?(r[e]=n,!0):i!==vn&&Mt(i,e)?(i[e]=n,!0):Mt(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(a[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:i,appContext:r,propsOptions:a}},d){let s;return!!n[d]||t!==vn&&Mt(t,d)||Xh(e,d)||(s=a[0])&&Mt(s,d)||Mt(i,d)||Mt(Tc,d)||Mt(r.config.globalProperties,d)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Mt(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Vn(){return r1().slots}function Vl(){return r1().attrs}function r1(){const t=vt();return t.setupContext||(t.setupContext=y1(t))}function cy(t){return Ze(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let hm=!0;function Ik(t){const e=tv(t),n=t.proxy,i=t.ctx;hm=!1,e.beforeCreate&&uy(e.beforeCreate,t,"bc");const{data:r,computed:a,methods:d,watch:s,provide:o,inject:c,created:h,beforeMount:l,mounted:u,beforeUpdate:f,updated:m,activated:g,deactivated:p,beforeDestroy:v,beforeUnmount:b,destroyed:_,unmounted:S,render:w,renderTracked:C,renderTriggered:x,errorCaptured:M,serverPrefetch:E,expose:A,inheritAttrs:O,components:D,directives:L,filters:U}=e;if(c&&Dk(c,i,null),d)for(const k in d){const F=d[k];lt(F)&&(i[k]=F.bind(n))}if(r){const k=r.call(n,n);_t(k)&&(t.data=Ft(k))}if(hm=!0,a)for(const k in a){const F=a[k],T=lt(F)?F.bind(n,n):lt(F.get)?F.get.bind(n,n):Ht,P=!lt(F)&&lt(F.set)?F.set.bind(n):Ht,H=R({get:T,set:P});Object.defineProperty(i,k,{enumerable:!0,configurable:!0,get:()=>H.value,set:N=>H.value=N})}if(s)for(const k in s)s1(s[k],i,n,k);if(o){const k=lt(o)?o.call(n):o;Reflect.ownKeys(k).forEach(F=>{xt(F,k[F])})}h&&uy(h,t,"c");function V(k,F){Ze(F)?F.forEach(T=>k(T.bind(n))):F&&k(F.bind(n))}if(V(ih,l),V(mt,u),V(n1,f),V(vs,m),V(Ek,g),V(e1,p),V(Pk,M),V(Rk,C),V(kk,x),V(rn,b),V(oo,S),V(Ak,E),Ze(A))if(A.length){const k=t.exposed||(t.exposed={});A.forEach(F=>{Object.defineProperty(k,F,{get:()=>n[F],set:T=>n[F]=T})})}else t.exposed||(t.exposed={});w&&t.render===Ht&&(t.render=w),O!=null&&(t.inheritAttrs=O),D&&(t.components=D),L&&(t.directives=L)}function Dk(t,e,n=Ht){Ze(t)&&(t=pm(t));for(const i in t){const r=t[i];let a;_t(r)?"default"in r?a=Je(r.from||i,r.default,!0):a=Je(r.from||i):a=Je(r),en(a)?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>a.value,set:d=>a.value=d}):e[i]=a}}function uy(t,e,n){Gi(Ze(t)?t.map(i=>i.bind(e.proxy)):t.bind(e.proxy),e,n)}function s1(t,e,n,i){const r=i.includes(".")?qC(n,i):()=>n[i];if(ct(t)){const a=e[t];lt(a)&&Be(r,a)}else if(lt(t))Be(r,t.bind(n));else if(_t(t))if(Ze(t))t.forEach(a=>s1(a,e,n,i));else{const a=lt(t.handler)?t.handler.bind(n):e[t.handler];lt(a)&&Be(r,a,t)}}function tv(t){const e=t.type,{mixins:n,extends:i}=e,{mixins:r,optionsCache:a,config:{optionMergeStrategies:d}}=t.appContext,s=a.get(e);let o;return s?o=s:!r.length&&!n&&!i?o=e:(o={},r.length&&r.forEach(c=>Cf(o,c,d,!0)),Cf(o,e,d)),_t(e)&&a.set(e,o),o}function Cf(t,e,n,i=!1){const{mixins:r,extends:a}=e;a&&Cf(t,a,n,!0),r&&r.forEach(d=>Cf(t,d,n,!0));for(const d in e)if(!(i&&d==="expose")){const s=Nk[d]||n&&n[d];t[d]=s?s(t[d],e[d]):e[d]}return t}const Nk={data:dy,props:fy,emits:fy,methods:yc,computed:yc,beforeCreate:si,created:si,beforeMount:si,mounted:si,beforeUpdate:si,updated:si,beforeDestroy:si,beforeUnmount:si,destroyed:si,unmounted:si,activated:si,deactivated:si,errorCaptured:si,serverPrefetch:si,components:yc,directives:yc,watch:Bk,provide:dy,inject:Fk};function dy(t,e){return e?t?function(){return kn(lt(t)?t.call(this,this):t,lt(e)?e.call(this,this):e)}:e:t}function Fk(t,e){return yc(pm(t),pm(e))}function pm(t){if(Ze(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function si(t,e){return t?[...new Set([].concat(t,e))]:e}function yc(t,e){return t?kn(Object.create(null),t,e):e}function fy(t,e){return t?Ze(t)&&Ze(e)?[...new Set([...t,...e])]:kn(Object.create(null),cy(t),cy(e??{})):e}function Bk(t,e){if(!t)return e;if(!e)return t;const n=kn(Object.create(null),t);for(const i in e)n[i]=si(t[i],e[i]);return n}function o1(){return{app:null,config:{isNativeTag:wA,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Uk=0;function Vk(t,e){return function(i,r=null){lt(i)||(i=kn({},i)),r!=null&&!_t(r)&&(r=null);const a=o1(),d=new WeakSet;let s=!1;const o=a.app={_uid:Uk++,_component:i,_props:r,_container:null,_context:a,_instance:null,version:cR,get config(){return a.config},set config(c){},use(c,...h){return d.has(c)||(c&&lt(c.install)?(d.add(c),c.install(o,...h)):lt(c)&&(d.add(c),c(o,...h))),o},mixin(c){return a.mixins.includes(c)||a.mixins.push(c),o},component(c,h){return h?(a.components[c]=h,o):a.components[c]},directive(c,h){return h?(a.directives[c]=h,o):a.directives[c]},mount(c,h,l){if(!s){const u=ue(i,r);return u.appContext=a,l===!0?l="svg":l===!1&&(l=void 0),h&&e?e(u,c):t(u,c,l),s=!0,o._container=c,c.__vue_app__=o,ah(u.component)||u.component.proxy}},unmount(){s&&(t(null,o._container),delete o._container.__vue_app__)},provide(c,h){return a.provides[c]=h,o},runWithContext(c){const h=Ec;Ec=o;try{return c()}finally{Ec=h}}};return o}}let Ec=null;function xt(t,e){if(zn){let n=zn.provides;const i=zn.parent&&zn.parent.provides;i===n&&(n=zn.provides=Object.create(i)),n[t]=e}}function Je(t,e,n=!1){const i=zn||Pn;if(i||Ec){const r=i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:Ec._context.provides;if(r&&t in r)return r[t];if(arguments.length>1)return n&&lt(e)?e.call(i&&i.proxy):e}}function Hk(t,e,n,i=!1){const r={},a={};bf(a,rh,1),t.propsDefaults=Object.create(null),a1(t,e,r,a);for(const d in t.propsOptions[0])d in r||(r[d]=void 0);n?t.props=i?r:NC(r):t.type.props?t.props=r:t.props=a,t.attrs=a}function zk(t,e,n,i){const{props:r,attrs:a,vnode:{patchFlag:d}}=t,s=Bt(r),[o]=t.propsOptions;let c=!1;if((i||d>0)&&!(d&16)){if(d&8){const h=t.vnode.dynamicProps;for(let l=0;l<h.length;l++){let u=h[l];if(Qf(t.emitsOptions,u))continue;const f=e[u];if(o)if(Mt(a,u))f!==a[u]&&(a[u]=f,c=!0);else{const m=Xi(u);r[m]=mm(o,s,m,f,t,!1)}else f!==a[u]&&(a[u]=f,c=!0)}}}else{a1(t,e,r,a)&&(c=!0);let h;for(const l in s)(!e||!Mt(e,l)&&((h=so(l))===l||!Mt(e,h)))&&(o?n&&(n[l]!==void 0||n[h]!==void 0)&&(r[l]=mm(o,s,l,void 0,t,!0)):delete r[l]);if(a!==s)for(const l in a)(!e||!Mt(e,l))&&(delete a[l],c=!0)}c&&ss(t,"set","$attrs")}function a1(t,e,n,i){const[r,a]=t.propsOptions;let d=!1,s;if(e)for(let o in e){if(wc(o))continue;const c=e[o];let h;r&&Mt(r,h=Xi(o))?!a||!a.includes(h)?n[h]=c:(s||(s={}))[h]=c:Qf(t.emitsOptions,o)||(!(o in i)||c!==i[o])&&(i[o]=c,d=!0)}if(a){const o=Bt(n),c=s||vn;for(let h=0;h<a.length;h++){const l=a[h];n[l]=mm(r,o,l,c[l],t,!Mt(c,l))}}return d}function mm(t,e,n,i,r,a){const d=t[n];if(d!=null){const s=Mt(d,"default");if(s&&i===void 0){const o=d.default;if(d.type!==Function&&!d.skipFactory&&lt(o)){const{propsDefaults:c}=r;if(n in c)i=c[n];else{const h=Eu(r);i=c[n]=o.call(null,e),h()}}else i=o}d[0]&&(a&&!s?i=!1:d[1]&&(i===""||i===so(n))&&(i=!0))}return i}function l1(t,e,n=!1){const i=e.propsCache,r=i.get(t);if(r)return r;const a=t.props,d={},s=[];let o=!1;if(!lt(t)){const h=l=>{o=!0;const[u,f]=l1(l,e,!0);kn(d,u),f&&s.push(...f)};!n&&e.mixins.length&&e.mixins.forEach(h),t.extends&&h(t.extends),t.mixins&&t.mixins.forEach(h)}if(!a&&!o)return _t(t)&&i.set(t,Ya),Ya;if(Ze(a))for(let h=0;h<a.length;h++){const l=Xi(a[h]);hy(l)&&(d[l]=vn)}else if(a)for(const h in a){const l=Xi(h);if(hy(l)){const u=a[h],f=d[l]=Ze(u)||lt(u)?{type:u}:kn({},u);if(f){const m=gy(Boolean,f.type),g=gy(String,f.type);f[0]=m>-1,f[1]=g<0||m<g,(m>-1||Mt(f,"default"))&&s.push(l)}}}const c=[d,s];return _t(t)&&i.set(t,c),c}function hy(t){return t[0]!=="$"&&!wc(t)}function py(t){return t===null?"null":typeof t=="function"?t.name||"":typeof t=="object"&&t.constructor&&t.constructor.name||""}function my(t,e){return py(t)===py(e)}function gy(t,e){return Ze(e)?e.findIndex(n=>my(n,t)):lt(e)&&my(e,t)?0:-1}const c1=t=>t[0]==="_"||t==="$stable",nv=t=>Ze(t)?t.map(xr):[xr(t)],$k=(t,e,n)=>{if(e._n)return e;const i=ve((...r)=>nv(e(...r)),n);return i._c=!1,i},u1=(t,e,n)=>{const i=t._ctx;for(const r in t){if(c1(r))continue;const a=t[r];if(lt(a))e[r]=$k(r,a,i);else if(a!=null){const d=nv(a);e[r]=()=>d}}},d1=(t,e)=>{const n=nv(e);t.slots.default=()=>n},Wk=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=Bt(e),bf(e,"_",n)):u1(e,t.slots={})}else t.slots={},e&&d1(t,e);bf(t.slots,rh,1)},Gk=(t,e,n)=>{const{vnode:i,slots:r}=t;let a=!0,d=vn;if(i.shapeFlag&32){const s=e._;s?n&&s===1?a=!1:(kn(r,e),!n&&s===1&&delete r._):(a=!e.$stable,u1(e,r)),d=e}else e&&(d1(t,e),d={default:1});if(a)for(const s in r)!c1(s)&&d[s]==null&&delete r[s]};function gm(t,e,n,i,r=!1){if(Ze(t)){t.forEach((u,f)=>gm(u,e&&(Ze(e)?e[f]:e),n,i,r));return}if(xc(i)&&!r)return;const a=i.shapeFlag&4?ah(i.component)||i.component.proxy:i.el,d=r?null:a,{i:s,r:o}=t,c=e&&e.r,h=s.refs===vn?s.refs={}:s.refs,l=s.setupState;if(c!=null&&c!==o&&(ct(c)?(h[c]=null,Mt(l,c)&&(l[c]=null)):en(c)&&(c.value=null)),lt(o))Ks(o,s,12,[d,h]);else{const u=ct(o),f=en(o);if(u||f){const m=()=>{if(t.f){const g=u?Mt(l,o)?l[o]:h[o]:o.value;r?Ze(g)&&Vg(g,a):Ze(g)?g.includes(a)||g.push(a):u?(h[o]=[a],Mt(l,o)&&(l[o]=h[o])):(o.value=[a],t.k&&(h[t.k]=o.value))}else u?(h[o]=d,Mt(l,o)&&(l[o]=d)):f&&(o.value=d,t.k&&(h[t.k]=d))};d?(m.id=-1,bi(m,n)):m()}}}const bi=_k;function jk(t){return Xk(t)}function Xk(t,e){const n=yC();n.__VUE__=!0;const{insert:i,remove:r,patchProp:a,createElement:d,createText:s,createComment:o,setText:c,setElementText:h,parentNode:l,nextSibling:u,setScopeId:f=Ht,insertStaticContent:m}=t,g=(K,Q,fe,ge=null,se=null,me=null,be=void 0,Me=null,Ee=!!Q.dynamicChildren)=>{if(K===Q)return;K&&!ko(K,Q)&&(ge=W(K),N(K,se,me,!0),K=null),Q.patchFlag===-2&&(Ee=!1,Q.dynamicChildren=null);const{type:X,ref:Y,shapeFlag:le}=Q;switch(X){case Hl:p(K,Q,fe,ge);break;case li:v(K,Q,fe,ge);break;case Yh:K==null&&b(Q,fe,ge,be);break;case Qe:D(K,Q,fe,ge,se,me,be,Me,Ee);break;default:le&1?w(K,Q,fe,ge,se,me,be,Me,Ee):le&6?L(K,Q,fe,ge,se,me,be,Me,Ee):(le&64||le&128)&&X.process(K,Q,fe,ge,se,me,be,Me,Ee,re)}Y!=null&&se&&gm(Y,K&&K.ref,me,Q||K,!Q)},p=(K,Q,fe,ge)=>{if(K==null)i(Q.el=s(Q.children),fe,ge);else{const se=Q.el=K.el;Q.children!==K.children&&c(se,Q.children)}},v=(K,Q,fe,ge)=>{K==null?i(Q.el=o(Q.children||""),fe,ge):Q.el=K.el},b=(K,Q,fe,ge)=>{[K.el,K.anchor]=m(K.children,Q,fe,ge,K.el,K.anchor)},_=({el:K,anchor:Q},fe,ge)=>{let se;for(;K&&K!==Q;)se=u(K),i(K,fe,ge),K=se;i(Q,fe,ge)},S=({el:K,anchor:Q})=>{let fe;for(;K&&K!==Q;)fe=u(K),r(K),K=fe;r(Q)},w=(K,Q,fe,ge,se,me,be,Me,Ee)=>{Q.type==="svg"?be="svg":Q.type==="math"&&(be="mathml"),K==null?C(Q,fe,ge,se,me,be,Me,Ee):E(K,Q,se,me,be,Me,Ee)},C=(K,Q,fe,ge,se,me,be,Me)=>{let Ee,X;const{props:Y,shapeFlag:le,transition:Ce,dirs:Re}=K;if(Ee=K.el=d(K.type,me,Y&&Y.is,Y),le&8?h(Ee,K.children):le&16&&M(K.children,Ee,null,ge,se,Kh(K,me),be,Me),Re&&vo(K,null,ge,"created"),x(Ee,K,K.scopeId,be,ge),Y){for(const he in Y)he!=="value"&&!wc(he)&&a(Ee,he,null,Y[he],me,K.children,ge,se,Z);"value"in Y&&a(Ee,"value",null,Y.value,me),(X=Y.onVnodeBeforeMount)&&wr(X,ge,K)}Re&&vo(K,null,ge,"beforeMount");const Ne=Kk(se,Ce);Ne&&Ce.beforeEnter(Ee),i(Ee,Q,fe),((X=Y&&Y.onVnodeMounted)||Ne||Re)&&bi(()=>{X&&wr(X,ge,K),Ne&&Ce.enter(Ee),Re&&vo(K,null,ge,"mounted")},se)},x=(K,Q,fe,ge,se)=>{if(fe&&f(K,fe),ge)for(let me=0;me<ge.length;me++)f(K,ge[me]);if(se){let me=se.subTree;if(Q===me){const be=se.vnode;x(K,be,be.scopeId,be.slotScopeIds,se.parent)}}},M=(K,Q,fe,ge,se,me,be,Me,Ee=0)=>{for(let X=Ee;X<K.length;X++){const Y=K[X]=Me?Us(K[X]):xr(K[X]);g(null,Y,Q,fe,ge,se,me,be,Me)}},E=(K,Q,fe,ge,se,me,be)=>{const Me=Q.el=K.el;let{patchFlag:Ee,dynamicChildren:X,dirs:Y}=Q;Ee|=K.patchFlag&16;const le=K.props||vn,Ce=Q.props||vn;let Re;if(fe&&yo(fe,!1),(Re=Ce.onVnodeBeforeUpdate)&&wr(Re,fe,Q,K),Y&&vo(Q,K,fe,"beforeUpdate"),fe&&yo(fe,!0),X?A(K.dynamicChildren,X,Me,fe,ge,Kh(Q,se),me):be||F(K,Q,Me,null,fe,ge,Kh(Q,se),me,!1),Ee>0){if(Ee&16)O(Me,Q,le,Ce,fe,ge,se);else if(Ee&2&&le.class!==Ce.class&&a(Me,"class",null,Ce.class,se),Ee&4&&a(Me,"style",le.style,Ce.style,se),Ee&8){const Ne=Q.dynamicProps;for(let he=0;he<Ne.length;he++){const pe=Ne[he],ee=le[pe],oe=Ce[pe];(oe!==ee||pe==="value")&&a(Me,pe,ee,oe,se,K.children,fe,ge,Z)}}Ee&1&&K.children!==Q.children&&h(Me,Q.children)}else!be&&X==null&&O(Me,Q,le,Ce,fe,ge,se);((Re=Ce.onVnodeUpdated)||Y)&&bi(()=>{Re&&wr(Re,fe,Q,K),Y&&vo(Q,K,fe,"updated")},ge)},A=(K,Q,fe,ge,se,me,be)=>{for(let Me=0;Me<Q.length;Me++){const Ee=K[Me],X=Q[Me],Y=Ee.el&&(Ee.type===Qe||!ko(Ee,X)||Ee.shapeFlag&70)?l(Ee.el):fe;g(Ee,X,Y,null,ge,se,me,be,!0)}},O=(K,Q,fe,ge,se,me,be)=>{if(fe!==ge){if(fe!==vn)for(const Me in fe)!wc(Me)&&!(Me in ge)&&a(K,Me,fe[Me],null,be,Q.children,se,me,Z);for(const Me in ge){if(wc(Me))continue;const Ee=ge[Me],X=fe[Me];Ee!==X&&Me!=="value"&&a(K,Me,X,Ee,be,Q.children,se,me,Z)}"value"in ge&&a(K,"value",fe.value,ge.value,be)}},D=(K,Q,fe,ge,se,me,be,Me,Ee)=>{const X=Q.el=K?K.el:s(""),Y=Q.anchor=K?K.anchor:s("");let{patchFlag:le,dynamicChildren:Ce,slotScopeIds:Re}=Q;Re&&(Me=Me?Me.concat(Re):Re),K==null?(i(X,fe,ge),i(Y,fe,ge),M(Q.children||[],fe,Y,se,me,be,Me,Ee)):le>0&&le&64&&Ce&&K.dynamicChildren?(A(K.dynamicChildren,Ce,fe,se,me,be,Me),(Q.key!=null||se&&Q===se.subTree)&&iv(K,Q,!0)):F(K,Q,fe,Y,se,me,be,Me,Ee)},L=(K,Q,fe,ge,se,me,be,Me,Ee)=>{Q.slotScopeIds=Me,K==null?Q.shapeFlag&512?se.ctx.activate(Q,fe,ge,be,Ee):U(Q,fe,ge,se,me,be,Ee):j(K,Q,Ee)},U=(K,Q,fe,ge,se,me,be)=>{const Me=K.component=iR(K,ge,se);if(th(K)&&(Me.ctx.renderer=re),rR(Me),Me.asyncDep){if(se&&se.registerDep(Me,V),!K.el){const Ee=Me.subTree=ue(li);v(null,Ee,Q,fe)}}else V(Me,K,Q,fe,se,me,be)},j=(K,Q,fe)=>{const ge=Q.component=K.component;if(gk(K,Q,fe))if(ge.asyncDep&&!ge.asyncResolved){k(ge,Q,fe);return}else ge.next=Q,lk(ge.update),ge.effect.dirty=!0,ge.update();else Q.el=K.el,ge.vnode=Q},V=(K,Q,fe,ge,se,me,be)=>{const Me=()=>{if(K.isMounted){let{next:Y,bu:le,u:Ce,parent:Re,vnode:Ne}=K;{const J=f1(K);if(J){Y&&(Y.el=Ne.el,k(K,Y,be)),J.asyncDep.then(()=>{K.isUnmounted||Me()});return}}let he=Y,pe;yo(K,!1),Y?(Y.el=Ne.el,k(K,Y,be)):Y=Ne,le&&zd(le),(pe=Y.props&&Y.props.onVnodeBeforeUpdate)&&wr(pe,Re,Y,Ne),yo(K,!0);const ee=Gh(K),oe=K.subTree;K.subTree=ee,g(oe,ee,l(oe.el),W(oe),K,se,me),Y.el=ee.el,he===null&&vk(K,ee.el),Ce&&bi(Ce,se),(pe=Y.props&&Y.props.onVnodeUpdated)&&bi(()=>wr(pe,Re,Y,Ne),se)}else{let Y;const{el:le,props:Ce}=Q,{bm:Re,m:Ne,parent:he}=K,pe=xc(Q);if(yo(K,!1),Re&&zd(Re),!pe&&(Y=Ce&&Ce.onVnodeBeforeMount)&&wr(Y,he,Q),yo(K,!0),le&&Pe){const ee=()=>{K.subTree=Gh(K),Pe(le,K.subTree,K,se,null)};pe?Q.type.__asyncLoader().then(()=>!K.isUnmounted&&ee()):ee()}else{const ee=K.subTree=Gh(K);g(null,ee,fe,ge,K,se,me),Q.el=ee.el}if(Ne&&bi(Ne,se),!pe&&(Y=Ce&&Ce.onVnodeMounted)){const ee=Q;bi(()=>wr(Y,he,ee),se)}(Q.shapeFlag&256||he&&xc(he.vnode)&&he.vnode.shapeFlag&256)&&K.a&&bi(K.a,se),K.isMounted=!0,Q=fe=ge=null}},Ee=K.effect=new zg(Me,Ht,()=>qg(X),K.scope),X=K.update=()=>{Ee.dirty&&Ee.run()};X.id=K.uid,yo(K,!0),X()},k=(K,Q,fe)=>{Q.component=K;const ge=K.vnode.props;K.vnode=Q,K.next=null,zk(K,Q.props,ge,fe),Gk(K,Q.children,fe),oa(),sy(K),aa()},F=(K,Q,fe,ge,se,me,be,Me,Ee=!1)=>{const X=K&&K.children,Y=K?K.shapeFlag:0,le=Q.children,{patchFlag:Ce,shapeFlag:Re}=Q;if(Ce>0){if(Ce&128){P(X,le,fe,ge,se,me,be,Me,Ee);return}else if(Ce&256){T(X,le,fe,ge,se,me,be,Me,Ee);return}}Re&8?(Y&16&&Z(X,se,me),le!==X&&h(fe,le)):Y&16?Re&16?P(X,le,fe,ge,se,me,be,Me,Ee):Z(X,se,me,!0):(Y&8&&h(fe,""),Re&16&&M(le,fe,ge,se,me,be,Me,Ee))},T=(K,Q,fe,ge,se,me,be,Me,Ee)=>{K=K||Ya,Q=Q||Ya;const X=K.length,Y=Q.length,le=Math.min(X,Y);let Ce;for(Ce=0;Ce<le;Ce++){const Re=Q[Ce]=Ee?Us(Q[Ce]):xr(Q[Ce]);g(K[Ce],Re,fe,null,se,me,be,Me,Ee)}X>Y?Z(K,se,me,!0,!1,le):M(Q,fe,ge,se,me,be,Me,Ee,le)},P=(K,Q,fe,ge,se,me,be,Me,Ee)=>{let X=0;const Y=Q.length;let le=K.length-1,Ce=Y-1;for(;X<=le&&X<=Ce;){const Re=K[X],Ne=Q[X]=Ee?Us(Q[X]):xr(Q[X]);if(ko(Re,Ne))g(Re,Ne,fe,null,se,me,be,Me,Ee);else break;X++}for(;X<=le&&X<=Ce;){const Re=K[le],Ne=Q[Ce]=Ee?Us(Q[Ce]):xr(Q[Ce]);if(ko(Re,Ne))g(Re,Ne,fe,null,se,me,be,Me,Ee);else break;le--,Ce--}if(X>le){if(X<=Ce){const Re=Ce+1,Ne=Re<Y?Q[Re].el:ge;for(;X<=Ce;)g(null,Q[X]=Ee?Us(Q[X]):xr(Q[X]),fe,Ne,se,me,be,Me,Ee),X++}}else if(X>Ce)for(;X<=le;)N(K[X],se,me,!0),X++;else{const Re=X,Ne=X,he=new Map;for(X=Ne;X<=Ce;X++){const ze=Q[X]=Ee?Us(Q[X]):xr(Q[X]);ze.key!=null&&he.set(ze.key,X)}let pe,ee=0;const oe=Ce-Ne+1;let J=!1,ce=0;const ye=new Array(oe);for(X=0;X<oe;X++)ye[X]=0;for(X=Re;X<=le;X++){const ze=K[X];if(ee>=oe){N(ze,se,me,!0);continue}let xe;if(ze.key!=null)xe=he.get(ze.key);else for(pe=Ne;pe<=Ce;pe++)if(ye[pe-Ne]===0&&ko(ze,Q[pe])){xe=pe;break}xe===void 0?N(ze,se,me,!0):(ye[xe-Ne]=X+1,xe>=ce?ce=xe:J=!0,g(ze,Q[xe],fe,null,se,me,be,Me,Ee),ee++)}const Oe=J?Yk(ye):Ya;for(pe=Oe.length-1,X=oe-1;X>=0;X--){const ze=Ne+X,xe=Q[ze],Ve=ze+1<Y?Q[ze+1].el:ge;ye[X]===0?g(null,xe,fe,Ve,se,me,be,Me,Ee):J&&(pe<0||X!==Oe[pe]?H(xe,fe,Ve,2):pe--)}}},H=(K,Q,fe,ge,se=null)=>{const{el:me,type:be,transition:Me,children:Ee,shapeFlag:X}=K;if(X&6){H(K.component.subTree,Q,fe,ge);return}if(X&128){K.suspense.move(Q,fe,ge);return}if(X&64){be.move(K,Q,fe,re);return}if(be===Qe){i(me,Q,fe);for(let le=0;le<Ee.length;le++)H(Ee[le],Q,fe,ge);i(K.anchor,Q,fe);return}if(be===Yh){_(K,Q,fe);return}if(ge!==2&&X&1&&Me)if(ge===0)Me.beforeEnter(me),i(me,Q,fe),bi(()=>Me.enter(me),se);else{const{leave:le,delayLeave:Ce,afterLeave:Re}=Me,Ne=()=>i(me,Q,fe),he=()=>{le(me,()=>{Ne(),Re&&Re()})};Ce?Ce(me,Ne,he):he()}else i(me,Q,fe)},N=(K,Q,fe,ge=!1,se=!1)=>{const{type:me,props:be,ref:Me,children:Ee,dynamicChildren:X,shapeFlag:Y,patchFlag:le,dirs:Ce}=K;if(Me!=null&&gm(Me,null,fe,K,!0),Y&256){Q.ctx.deactivate(K);return}const Re=Y&1&&Ce,Ne=!xc(K);let he;if(Ne&&(he=be&&be.onVnodeBeforeUnmount)&&wr(he,Q,K),Y&6)z(K.component,fe,ge);else{if(Y&128){K.suspense.unmount(fe,ge);return}Re&&vo(K,null,Q,"beforeUnmount"),Y&64?K.type.remove(K,Q,fe,se,re,ge):X&&(me!==Qe||le>0&&le&64)?Z(X,Q,fe,!1,!0):(me===Qe&&le&384||!se&&Y&16)&&Z(Ee,Q,fe),ge&&G(K)}(Ne&&(he=be&&be.onVnodeUnmounted)||Re)&&bi(()=>{he&&wr(he,Q,K),Re&&vo(K,null,Q,"unmounted")},fe)},G=K=>{const{type:Q,el:fe,anchor:ge,transition:se}=K;if(Q===Qe){$(fe,ge);return}if(Q===Yh){S(K);return}const me=()=>{r(fe),se&&!se.persisted&&se.afterLeave&&se.afterLeave()};if(K.shapeFlag&1&&se&&!se.persisted){const{leave:be,delayLeave:Me}=se,Ee=()=>be(fe,me);Me?Me(K.el,me,Ee):Ee()}else me()},$=(K,Q)=>{let fe;for(;K!==Q;)fe=u(K),r(K),K=fe;r(Q)},z=(K,Q,fe)=>{const{bum:ge,scope:se,update:me,subTree:be,um:Me}=K;ge&&zd(ge),se.stop(),me&&(me.active=!1,N(be,K,Q,fe)),Me&&bi(Me,Q),bi(()=>{K.isUnmounted=!0},Q),Q&&Q.pendingBranch&&!Q.isUnmounted&&K.asyncDep&&!K.asyncResolved&&K.suspenseId===Q.pendingId&&(Q.deps--,Q.deps===0&&Q.resolve())},Z=(K,Q,fe,ge=!1,se=!1,me=0)=>{for(let be=me;be<K.length;be++)N(K[be],Q,fe,ge,se)},W=K=>K.shapeFlag&6?W(K.component.subTree):K.shapeFlag&128?K.suspense.next():u(K.anchor||K.el);let te=!1;const ie=(K,Q,fe)=>{K==null?Q._vnode&&N(Q._vnode,null,null,!0):g(Q._vnode||null,K,Q,null,null,null,fe),te||(te=!0,sy(),jC(),te=!1),Q._vnode=K},re={p:g,um:N,m:H,r:G,mt:U,mc:M,pc:F,pbc:A,n:W,o:t};let _e,Pe;return e&&([_e,Pe]=e(re)),{render:ie,hydrate:_e,createApp:Vk(ie,_e)}}function Kh({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function yo({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function Kk(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function iv(t,e,n=!1){const i=t.children,r=e.children;if(Ze(i)&&Ze(r))for(let a=0;a<i.length;a++){const d=i[a];let s=r[a];s.shapeFlag&1&&!s.dynamicChildren&&((s.patchFlag<=0||s.patchFlag===32)&&(s=r[a]=Us(r[a]),s.el=d.el),n||iv(d,s)),s.type===Hl&&(s.el=d.el)}}function Yk(t){const e=t.slice(),n=[0];let i,r,a,d,s;const o=t.length;for(i=0;i<o;i++){const c=t[i];if(c!==0){if(r=n[n.length-1],t[r]<c){e[i]=r,n.push(i);continue}for(a=0,d=n.length-1;a<d;)s=a+d>>1,t[n[s]]<c?a=s+1:d=s;c<t[n[a]]&&(a>0&&(e[i]=n[a-1]),n[a]=i)}}for(a=n.length,d=n[a-1];a-- >0;)n[a]=d,d=e[d];return n}function f1(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:f1(e)}const qk=t=>t.__isTeleport,Mc=t=>t&&(t.disabled||t.disabled===""),vy=t=>typeof SVGElement<"u"&&t instanceof SVGElement,yy=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,vm=(t,e)=>{const n=t&&t.to;return ct(n)?e?e(n):null:n},Zk={name:"Teleport",__isTeleport:!0,process(t,e,n,i,r,a,d,s,o,c){const{mc:h,pc:l,pbc:u,o:{insert:f,querySelector:m,createText:g,createComment:p}}=c,v=Mc(e.props);let{shapeFlag:b,children:_,dynamicChildren:S}=e;if(t==null){const w=e.el=g(""),C=e.anchor=g("");f(w,n,i),f(C,n,i);const x=e.target=vm(e.props,m),M=e.targetAnchor=g("");x&&(f(M,x),d==="svg"||vy(x)?d="svg":(d==="mathml"||yy(x))&&(d="mathml"));const E=(A,O)=>{b&16&&h(_,A,O,r,a,d,s,o)};v?E(n,C):x&&E(x,M)}else{e.el=t.el;const w=e.anchor=t.anchor,C=e.target=t.target,x=e.targetAnchor=t.targetAnchor,M=Mc(t.props),E=M?n:C,A=M?w:x;if(d==="svg"||vy(C)?d="svg":(d==="mathml"||yy(C))&&(d="mathml"),S?(u(t.dynamicChildren,S,E,r,a,d,s),iv(t,e,!0)):o||l(t,e,E,A,r,a,d,s,!1),v)M?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):Zu(e,n,w,c,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const O=e.target=vm(e.props,m);O&&Zu(e,O,null,c,0)}else M&&Zu(e,C,x,c,1)}h1(e)},remove(t,e,n,i,{um:r,o:{remove:a}},d){const{shapeFlag:s,children:o,anchor:c,targetAnchor:h,target:l,props:u}=t;if(l&&a(h),d&&a(c),s&16){const f=d||!Mc(u);for(let m=0;m<o.length;m++){const g=o[m];r(g,e,n,f,!!g.dynamicChildren)}}},move:Zu,hydrate:Jk};function Zu(t,e,n,{o:{insert:i},m:r},a=2){a===0&&i(t.targetAnchor,e,n);const{el:d,anchor:s,shapeFlag:o,children:c,props:h}=t,l=a===2;if(l&&i(d,e,n),(!l||Mc(h))&&o&16)for(let u=0;u<c.length;u++)r(c[u],e,n,2);l&&i(s,e,n)}function Jk(t,e,n,i,r,a,{o:{nextSibling:d,parentNode:s,querySelector:o}},c){const h=e.target=vm(e.props,o);if(h){const l=h._lpa||h.firstChild;if(e.shapeFlag&16)if(Mc(e.props))e.anchor=c(d(t),e,s(t),n,i,r,a),e.targetAnchor=l;else{e.anchor=d(t);let u=l;for(;u;)if(u=d(u),u&&u.nodeType===8&&u.data==="teleport anchor"){e.targetAnchor=u,h._lpa=e.targetAnchor&&d(e.targetAnchor);break}c(l,e,h,n,i,r,a)}h1(e)}return e.anchor&&d(e.anchor)}const Tu=Zk;function h1(t){const e=t.ctx;if(e&&e.ut){let n=t.children[0].el;for(;n&&n!==t.targetAnchor;)n.nodeType===1&&n.setAttribute("data-v-owner",e.uid),n=n.nextSibling;e.ut()}}const Qe=Symbol.for("v-fgt"),Hl=Symbol.for("v-txt"),li=Symbol.for("v-cmt"),Yh=Symbol.for("v-stc"),Ac=[];let fr=null;function I(t=!1){Ac.push(fr=t?null:[])}function Qk(){Ac.pop(),fr=Ac[Ac.length-1]||null}let Xc=1;function by(t){Xc+=t}function p1(t){return t.dynamicChildren=Xc>0?fr||Ya:null,Qk(),Xc>0&&fr&&fr.push(t),t}function ne(t,e,n,i,r,a){return p1(ae(t,e,n,i,r,a,!0))}function ke(t,e,n,i,r){return p1(ue(t,e,n,i,r,!0))}function un(t){return t?t.__v_isVNode===!0:!1}function ko(t,e){return t.type===e.type&&t.key===e.key}const rh="__vInternal",m1=({key:t})=>t??null,$d=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?ct(t)||en(t)||lt(t)?{i:Pn,r:t,k:e,f:!!n}:t:null);function ae(t,e=null,n=null,i=0,r=null,a=t===Qe?0:1,d=!1,s=!1){const o={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&m1(e),ref:e&&$d(e),scopeId:eh,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:i,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Pn};return s?(rv(o,n),a&128&&t.normalize(o)):n&&(o.shapeFlag|=ct(n)?8:16),Xc>0&&!d&&fr&&(o.patchFlag>0||a&6)&&o.patchFlag!==32&&fr.push(o),o}const ue=eR;function eR(t,e=null,n=null,i=0,r=null,a=!1){if((!t||t===YC)&&(t=li),un(t)){const s=fs(t,e,!0);return n&&rv(s,n),Xc>0&&!a&&fr&&(s.shapeFlag&6?fr[fr.indexOf(t)]=s:fr.push(s)),s.patchFlag|=-2,s}if(lR(t)&&(t=t.__vccOpts),e){e=sh(e);let{class:s,style:o}=e;s&&!ct(s)&&(e.class=B(s)),_t(o)&&(FC(o)&&!Ze(o)&&(o=kn({},o)),e.style=nt(o))}const d=ct(t)?1:bk(t)?128:qk(t)?64:_t(t)?4:lt(t)?2:0;return ae(t,e,n,i,r,d,a,!0)}function sh(t){return t?FC(t)||rh in t?kn({},t):t:null}function fs(t,e,n=!1){const{props:i,ref:r,patchFlag:a,children:d}=t,s=e?St(i||{},e):i;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:s,key:s&&m1(s),ref:e&&e.ref?n&&r?Ze(r)?r.concat($d(e)):[r,$d(e)]:$d(e):r,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:d,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Qe?a===-1?16:a|16:a,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&fs(t.ssContent),ssFallback:t.ssFallback&&fs(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function Tt(t=" ",e=0){return ue(Hl,null,t,e)}function Te(t="",e=!1){return e?(I(),ke(li,null,t)):ue(li,null,t)}function xr(t){return t==null||typeof t=="boolean"?ue(li):Ze(t)?ue(Qe,null,t.slice()):typeof t=="object"?Us(t):ue(Hl,null,String(t))}function Us(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:fs(t)}function rv(t,e){let n=0;const{shapeFlag:i}=t;if(e==null)e=null;else if(Ze(e))n=16;else if(typeof e=="object")if(i&65){const r=e.default;r&&(r._c&&(r._d=!1),rv(t,r()),r._c&&(r._d=!0));return}else{n=32;const r=e._;!r&&!(rh in e)?e._ctx=Pn:r===3&&Pn&&(Pn.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else lt(e)?(e={default:e,_ctx:Pn},n=32):(e=String(e),i&64?(n=16,e=[Tt(e)]):n=8);t.children=e,t.shapeFlag|=n}function St(...t){const e={};for(let n=0;n<t.length;n++){const i=t[n];for(const r in i)if(r==="class")e.class!==i.class&&(e.class=B([e.class,i.class]));else if(r==="style")e.style=nt([e.style,i.style]);else if(Kf(r)){const a=e[r],d=i[r];d&&a!==d&&!(Ze(a)&&a.includes(d))&&(e[r]=a?[].concat(a,d):d)}else r!==""&&(e[r]=i[r])}return e}function wr(t,e,n,i=null){Gi(t,e,7,[n,i])}const tR=o1();let nR=0;function iR(t,e,n){const i=t.type,r=(e?e.appContext:t.appContext)||tR,a={uid:nR++,vnode:t,type:i,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,scope:new wC(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:l1(i,r),emitsOptions:KC(i,r),emit:null,emitted:null,propsDefaults:vn,inheritAttrs:i.inheritAttrs,ctx:vn,data:vn,props:vn,attrs:vn,slots:vn,refs:vn,setupState:vn,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=e?e.root:a,a.emit=dk.bind(null,a),t.ce&&t.ce(a),a}let zn=null;const vt=()=>zn||Pn;let xf,ym;{const t=yC(),e=(n,i)=>{let r;return(r=t[n])||(r=t[n]=[]),r.push(i),a=>{r.length>1?r.forEach(d=>d(a)):r[0](a)}};xf=e("__VUE_INSTANCE_SETTERS__",n=>zn=n),ym=e("__VUE_SSR_SETTERS__",n=>oh=n)}const Eu=t=>{const e=zn;return xf(t),t.scope.on(),()=>{t.scope.off(),xf(e)}},_y=()=>{zn&&zn.scope.off(),xf(null)};function g1(t){return t.vnode.shapeFlag&4}let oh=!1;function rR(t,e=!1){e&&ym(e);const{props:n,children:i}=t.vnode,r=g1(t);Hk(t,n,r,e),Wk(t,i);const a=r?sR(t,e):void 0;return e&&ym(!1),a}function sR(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=Wo(new Proxy(t.ctx,Lk));const{setup:i}=n;if(i){const r=t.setupContext=i.length>1?y1(t):null,a=Eu(t);oa();const d=Ks(i,t,0,[t.props,r]);if(aa(),a(),Vc(d)){if(d.then(_y,_y),e)return d.then(s=>{Sy(t,s,e)}).catch(s=>{Jf(s,t,0)});t.asyncDep=d}else Sy(t,d,e)}else v1(t,e)}function Sy(t,e,n){lt(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:_t(e)&&(t.setupState=zC(e)),v1(t,n)}let wy;function v1(t,e,n){const i=t.type;if(!t.render){if(!e&&wy&&!i.render){const r=i.template||tv(t).template;if(r){const{isCustomElement:a,compilerOptions:d}=t.appContext.config,{delimiters:s,compilerOptions:o}=i,c=kn(kn({isCustomElement:a,delimiters:s},d),o);i.render=wy(r,c)}}t.render=i.render||Ht}{const r=Eu(t);oa();try{Ik(t)}finally{aa(),r()}}}function oR(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,n){return Ei(t,"get","$attrs"),e[n]}}))}function y1(t){const e=n=>{t.exposed=n||{}};return{get attrs(){return oR(t)},slots:t.slots,emit:t.emit,expose:e}}function ah(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(zC(Wo(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Tc)return Tc[n](t)},has(e,n){return n in e||n in Tc}}))}function aR(t,e=!0){return lt(t)?t.displayName||t.name:t.name||e&&t.__name}function lR(t){return lt(t)&&"__vccOpts"in t}const R=(t,e)=>UC(t,e,oh);function st(t,e,n){const i=arguments.length;return i===2?_t(e)&&!Ze(e)?un(e)?ue(t,null,[e]):ue(t,e):ue(t,null,e):(i>3?n=Array.prototype.slice.call(arguments,2):i===3&&un(n)&&(n=[n]),ue(t,e,n))}const cR="3.4.20",uR=Ht;/**
* @vue/runtime-dom v3.4.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const dR="http://www.w3.org/2000/svg",fR="http://www.w3.org/1998/Math/MathML",Vs=typeof document<"u"?document:null,Cy=Vs&&Vs.createElement("template"),hR={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,i)=>{const r=e==="svg"?Vs.createElementNS(dR,t):e==="mathml"?Vs.createElementNS(fR,t):Vs.createElement(t,n?{is:n}:void 0);return t==="select"&&i&&i.multiple!=null&&r.setAttribute("multiple",i.multiple),r},createText:t=>Vs.createTextNode(t),createComment:t=>Vs.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Vs.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,i,r,a){const d=n?n.previousSibling:e.lastChild;if(r&&(r===a||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),n),!(r===a||!(r=r.nextSibling)););else{Cy.innerHTML=i==="svg"?`<svg>${t}</svg>`:i==="mathml"?`<math>${t}</math>`:t;const s=Cy.content;if(i==="svg"||i==="mathml"){const o=s.firstChild;for(;o.firstChild;)s.appendChild(o.firstChild);s.removeChild(o)}e.insertBefore(s,n)}return[d?d.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},Ts="transition",Ql="animation",fl=Symbol("_vtc"),wn=(t,{slots:e})=>st(Tk,_1(t),e);wn.displayName="Transition";const b1={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},pR=wn.props=kn({},JC,b1),bo=(t,e=[])=>{Ze(t)?t.forEach(n=>n(...e)):t&&t(...e)},xy=t=>t?Ze(t)?t.some(e=>e.length>1):t.length>1:!1;function _1(t){const e={};for(const D in t)D in b1||(e[D]=t[D]);if(t.css===!1)return e;const{name:n="v",type:i,duration:r,enterFromClass:a=`${n}-enter-from`,enterActiveClass:d=`${n}-enter-active`,enterToClass:s=`${n}-enter-to`,appearFromClass:o=a,appearActiveClass:c=d,appearToClass:h=s,leaveFromClass:l=`${n}-leave-from`,leaveActiveClass:u=`${n}-leave-active`,leaveToClass:f=`${n}-leave-to`}=t,m=mR(r),g=m&&m[0],p=m&&m[1],{onBeforeEnter:v,onEnter:b,onEnterCancelled:_,onLeave:S,onLeaveCancelled:w,onBeforeAppear:C=v,onAppear:x=b,onAppearCancelled:M=_}=e,E=(D,L,U)=>{Ls(D,L?h:s),Ls(D,L?c:d),U&&U()},A=(D,L)=>{D._isLeaving=!1,Ls(D,l),Ls(D,f),Ls(D,u),L&&L()},O=D=>(L,U)=>{const j=D?x:b,V=()=>E(L,D,U);bo(j,[L,V]),Ty(()=>{Ls(L,D?o:a),Zr(L,D?h:s),xy(j)||Ey(L,i,g,V)})};return kn(e,{onBeforeEnter(D){bo(v,[D]),Zr(D,a),Zr(D,d)},onBeforeAppear(D){bo(C,[D]),Zr(D,o),Zr(D,c)},onEnter:O(!1),onAppear:O(!0),onLeave(D,L){D._isLeaving=!0;const U=()=>A(D,L);Zr(D,l),w1(),Zr(D,u),Ty(()=>{D._isLeaving&&(Ls(D,l),Zr(D,f),xy(S)||Ey(D,i,p,U))}),bo(S,[D,U])},onEnterCancelled(D){E(D,!1),bo(_,[D])},onAppearCancelled(D){E(D,!0),bo(M,[D])},onLeaveCancelled(D){A(D),bo(w,[D])}})}function mR(t){if(t==null)return null;if(_t(t))return[qh(t.enter),qh(t.leave)];{const e=qh(t);return[e,e]}}function qh(t){return EA(t)}function Zr(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[fl]||(t[fl]=new Set)).add(e)}function Ls(t,e){e.split(/\s+/).forEach(i=>i&&t.classList.remove(i));const n=t[fl];n&&(n.delete(e),n.size||(t[fl]=void 0))}function Ty(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let gR=0;function Ey(t,e,n,i){const r=t._endId=++gR,a=()=>{r===t._endId&&i()};if(n)return setTimeout(a,n);const{type:d,timeout:s,propCount:o}=S1(t,e);if(!d)return i();const c=d+"end";let h=0;const l=()=>{t.removeEventListener(c,u),a()},u=f=>{f.target===t&&++h>=o&&l()};setTimeout(()=>{h<o&&l()},s+1),t.addEventListener(c,u)}function S1(t,e){const n=window.getComputedStyle(t),i=m=>(n[m]||"").split(", "),r=i(`${Ts}Delay`),a=i(`${Ts}Duration`),d=My(r,a),s=i(`${Ql}Delay`),o=i(`${Ql}Duration`),c=My(s,o);let h=null,l=0,u=0;e===Ts?d>0&&(h=Ts,l=d,u=a.length):e===Ql?c>0&&(h=Ql,l=c,u=o.length):(l=Math.max(d,c),h=l>0?d>c?Ts:Ql:null,u=h?h===Ts?a.length:o.length:0);const f=h===Ts&&/\b(transform|all)(,|$)/.test(i(`${Ts}Property`).toString());return{type:h,timeout:l,propCount:u,hasTransform:f}}function My(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,i)=>Ay(n)+Ay(t[i])))}function Ay(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function w1(){return document.body.offsetHeight}function vR(t,e,n){const i=t[fl];i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Tf=Symbol("_vod"),C1=Symbol("_vsh"),Dt={beforeMount(t,{value:e},{transition:n}){t[Tf]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):ec(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:i}){!e!=!n&&(i?e?(i.beforeEnter(t),ec(t,!0),i.enter(t)):i.leave(t,()=>{ec(t,!1)}):ec(t,e))},beforeUnmount(t,{value:e}){ec(t,e)}};function ec(t,e){t.style.display=e?t[Tf]:"none",t[C1]=!e}const yR=Symbol(""),bR=/(^|;)\s*display\s*:/;function _R(t,e,n){const i=t.style,r=ct(n);let a=!1;if(n&&!r){if(e)if(ct(e))for(const d of e.split(";")){const s=d.slice(0,d.indexOf(":")).trim();n[s]==null&&Wd(i,s,"")}else for(const d in e)n[d]==null&&Wd(i,d,"");for(const d in n)d==="display"&&(a=!0),Wd(i,d,n[d])}else if(r){if(e!==n){const d=i[yR];d&&(n+=";"+d),i.cssText=n,a=bR.test(n)}}else e&&t.removeAttribute("style");Tf in t&&(t[Tf]=a?i.display:"",t[C1]&&(i.display="none"))}const ky=/\s*!important$/;function Wd(t,e,n){if(Ze(n))n.forEach(i=>Wd(t,e,i));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const i=SR(t,e);ky.test(n)?t.setProperty(so(i),n.replace(ky,""),"important"):t[i]=n}}const Ry=["Webkit","Moz","ms"],Zh={};function SR(t,e){const n=Zh[e];if(n)return n;let i=Xi(e);if(i!=="filter"&&i in t)return Zh[e]=i;i=xu(i);for(let r=0;r<Ry.length;r++){const a=Ry[r]+i;if(a in t)return Zh[e]=a}return e}const Py="http://www.w3.org/1999/xlink";function wR(t,e,n,i,r){if(i&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(Py,e.slice(6,e.length)):t.setAttributeNS(Py,e,n);else{const a=OA(e);n==null||a&&!bC(n)?t.removeAttribute(e):t.setAttribute(e,a?"":n)}}function CR(t,e,n,i,r,a,d){if(e==="innerHTML"||e==="textContent"){i&&d(i,r,a),t[e]=n??"";return}const s=t.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){t._value=n;const c=s==="OPTION"?t.getAttribute("value")||"":t.value,h=n??"";c!==h&&(t.value=h),n==null&&t.removeAttribute(e);return}let o=!1;if(n===""||n==null){const c=typeof t[e];c==="boolean"?n=bC(n):n==null&&c==="string"?(n="",o=!0):c==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(e)}function zs(t,e,n,i){t.addEventListener(e,n,i)}function xR(t,e,n,i){t.removeEventListener(e,n,i)}const Oy=Symbol("_vei");function TR(t,e,n,i,r=null){const a=t[Oy]||(t[Oy]={}),d=a[e];if(i&&d)d.value=i;else{const[s,o]=ER(e);if(i){const c=a[e]=kR(i,r);zs(t,s,c,o)}else d&&(xR(t,s,d,o),a[e]=void 0)}}const Ly=/(?:Once|Passive|Capture)$/;function ER(t){let e;if(Ly.test(t)){e={};let i;for(;i=t.match(Ly);)t=t.slice(0,t.length-i[0].length),e[i[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):so(t.slice(2)),e]}let Jh=0;const MR=Promise.resolve(),AR=()=>Jh||(MR.then(()=>Jh=0),Jh=Date.now());function kR(t,e){const n=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=n.attached)return;Gi(RR(i,n.value),e,5,[i])};return n.value=t,n.attached=AR(),n}function RR(t,e){if(Ze(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(i=>r=>!r._stopped&&i&&i(r))}else return e}const Iy=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,PR=(t,e,n,i,r,a,d,s,o)=>{const c=r==="svg";e==="class"?vR(t,i,c):e==="style"?_R(t,n,i):Kf(e)?Ug(e)||TR(t,e,n,i,d):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):OR(t,e,i,c))?CR(t,e,i,a,d,s,o):(e==="true-value"?t._trueValue=i:e==="false-value"&&(t._falseValue=i),wR(t,e,i,c))};function OR(t,e,n,i){if(i)return!!(e==="innerHTML"||e==="textContent"||e in t&&Iy(e)&&lt(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=t.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return Iy(e)&&ct(n)?!1:e in t}const x1=new WeakMap,T1=new WeakMap,Ef=Symbol("_moveCb"),Dy=Symbol("_enterCb"),E1={name:"TransitionGroup",props:kn({},pR,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=vt(),i=ZC();let r,a;return vs(()=>{if(!r.length)return;const d=t.moveClass||`${t.name||"v"}-move`;if(!FR(r[0].el,n.vnode.el,d))return;r.forEach(IR),r.forEach(DR);const s=r.filter(NR);w1(),s.forEach(o=>{const c=o.el,h=c.style;Zr(c,d),h.transform=h.webkitTransform=h.transitionDuration="";const l=c[Ef]=u=>{u&&u.target!==c||(!u||/transform$/.test(u.propertyName))&&(c.removeEventListener("transitionend",l),c[Ef]=null,Ls(c,d))};c.addEventListener("transitionend",l)})}),()=>{const d=Bt(t),s=_1(d);let o=d.tag||Qe;r=a,a=e.default?ev(e.default()):[];for(let c=0;c<a.length;c++){const h=a[c];h.key!=null&&jc(h,Gc(h,s,i,n))}if(r)for(let c=0;c<r.length;c++){const h=r[c];jc(h,Gc(h,s,i,n)),x1.set(h,h.el.getBoundingClientRect())}return ue(o,null,a)}}},LR=t=>delete t.mode;E1.props;const M1=E1;function IR(t){const e=t.el;e[Ef]&&e[Ef](),e[Dy]&&e[Dy]()}function DR(t){T1.set(t,t.el.getBoundingClientRect())}function NR(t){const e=x1.get(t),n=T1.get(t),i=e.left-n.left,r=e.top-n.top;if(i||r){const a=t.el.style;return a.transform=a.webkitTransform=`translate(${i}px,${r}px)`,a.transitionDuration="0s",t}}function FR(t,e,n){const i=t.cloneNode(),r=t[fl];r&&r.forEach(s=>{s.split(/\s+/).forEach(o=>o&&i.classList.remove(o))}),n.split(/\s+/).forEach(s=>s&&i.classList.add(s)),i.style.display="none";const a=e.nodeType===1?e:e.parentNode;a.appendChild(i);const{hasTransform:d}=S1(i);return a.removeChild(i),d}const hl=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Ze(e)?n=>zd(e,n):e};function BR(t){t.target.composing=!0}function Ny(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const os=Symbol("_assign"),sv={created(t,{modifiers:{lazy:e,trim:n,number:i}},r){t[os]=hl(r);const a=i||r.props&&r.props.type==="number";zs(t,e?"change":"input",d=>{if(d.target.composing)return;let s=t.value;n&&(s=s.trim()),a&&(s=am(s)),t[os](s)}),n&&zs(t,"change",()=>{t.value=t.value.trim()}),e||(zs(t,"compositionstart",BR),zs(t,"compositionend",Ny),zs(t,"change",Ny))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:i,number:r}},a){if(t[os]=hl(a),t.composing)return;const d=r||t.type==="number"?am(t.value):t.value,s=e??"";d!==s&&(document.activeElement===t&&t.type!=="range"&&(n||i&&t.value.trim()===s)||(t.value=s))}},Mf={deep:!0,created(t,e,n){t[os]=hl(n),zs(t,"change",()=>{const i=t._modelValue,r=k1(t),a=t.checked,d=t[os];if(Ze(i)){const s=_C(i,r),o=s!==-1;if(a&&!o)d(i.concat(r));else if(!a&&o){const c=[...i];c.splice(s,1),d(c)}}else if(Yf(i)){const s=new Set(i);a?s.add(r):s.delete(r),d(s)}else d(R1(t,a))})},mounted:Fy,beforeUpdate(t,e,n){t[os]=hl(n),Fy(t,e,n)}};function Fy(t,{value:e,oldValue:n},i){t._modelValue=e,Ze(e)?t.checked=_C(e,i.props.value)>-1:Yf(e)?t.checked=e.has(i.props.value):e!==n&&(t.checked=ul(e,R1(t,!0)))}const A1={created(t,{value:e},n){t.checked=ul(e,n.props.value),t[os]=hl(n),zs(t,"change",()=>{t[os](k1(t))})},beforeUpdate(t,{value:e,oldValue:n},i){t[os]=hl(i),e!==n&&(t.checked=ul(e,i.props.value))}};function k1(t){return"_value"in t?t._value:t.value}function R1(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const UR=["ctrl","shift","alt","meta"],VR={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>UR.some(n=>t[`${n}Key`]&&!e.includes(n))},ot=(t,e)=>{const n=t._withMods||(t._withMods={}),i=e.join(".");return n[i]||(n[i]=(r,...a)=>{for(let d=0;d<e.length;d++){const s=VR[e[d]];if(s&&s(r,e))return}return t(r,...a)})},HR={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Rt=(t,e)=>{const n=t._withKeys||(t._withKeys={}),i=e.join(".");return n[i]||(n[i]=r=>{if(!("key"in r))return;const a=so(r.key);if(e.some(d=>d===a||HR[d]===a))return t(r)})},zR=kn({patchProp:PR},hR);let By;function P1(){return By||(By=jk(zR))}const pl=(...t)=>{P1().render(...t)},O1=(...t)=>{const e=P1().createApp(...t),{mount:n}=e;return e.mount=i=>{const r=WR(i);if(!r)return;const a=e._component;!lt(a)&&!a.render&&!a.template&&(a.template=r.innerHTML),r.innerHTML="";const d=n(r,!1,$R(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),d},e};function $R(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function WR(t){return ct(t)?document.querySelector(t):t}/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const ov="152",ma={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},ga={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},GR=0,Uy=1,jR=2,L1=1,XR=2,Jr=3,hs=0,Si=1,ur=2,Ys=0,Qa=1,Vy=2,Hy=3,zy=4,KR=5,Ua=100,YR=101,qR=102,$y=103,Wy=104,ZR=200,JR=201,QR=202,eP=203,I1=204,D1=205,tP=206,nP=207,iP=208,rP=209,sP=210,oP=0,aP=1,lP=2,bm=3,cP=4,uP=5,dP=6,fP=7,av=0,hP=1,pP=2,as=0,mP=1,gP=2,vP=3,yP=4,bP=5,N1=300,ml=301,gl=302,_m=303,Sm=304,lh=306,vl=1e3,Hi=1001,yl=1002,Bn=1003,wm=1004,Gd=1005,qn=1006,F1=1007,Zo=1008,Jo=1009,_P=1010,SP=1011,B1=1012,wP=1013,Io=1014,$s=1015,Kc=1016,CP=1017,xP=1018,el=1020,TP=1021,zi=1023,EP=1024,MP=1025,Go=1026,bl=1027,AP=1028,kP=1029,RP=1030,PP=1031,OP=1033,Qh=33776,ep=33777,tp=33778,np=33779,Gy=35840,jy=35841,Xy=35842,Ky=35843,LP=36196,Yy=37492,qy=37496,Zy=37808,Jy=37809,Qy=37810,eb=37811,tb=37812,nb=37813,ib=37814,rb=37815,sb=37816,ob=37817,ab=37818,lb=37819,cb=37820,ub=37821,ip=36492,IP=36283,db=36284,fb=36285,hb=36286,Yc=2300,_l=2301,rp=2302,pb=2400,mb=2401,gb=2402,DP=2500,NP=0,U1=1,Cm=2,V1=3e3,ls=3001,FP=3200,BP=3201,lv=0,UP=1,jo="",Ot="srgb",Pr="srgb-linear",H1="display-p3",sp=7680,VP=519,xm=35044,vb="300 es",Tm=1035;class la{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(n)===-1&&i[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const a=r.indexOf(n);a!==-1&&r.splice(a,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let a=0,d=r.length;a<d;a++)r[a].call(this,e);e.target=null}}}const Kn=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let yb=1234567;const kc=Math.PI/180,Sl=180/Math.PI;function pr(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Kn[t&255]+Kn[t>>8&255]+Kn[t>>16&255]+Kn[t>>24&255]+"-"+Kn[e&255]+Kn[e>>8&255]+"-"+Kn[e>>16&15|64]+Kn[e>>24&255]+"-"+Kn[n&63|128]+Kn[n>>8&255]+"-"+Kn[n>>16&255]+Kn[n>>24&255]+Kn[i&255]+Kn[i>>8&255]+Kn[i>>16&255]+Kn[i>>24&255]).toLowerCase()}function Hn(t,e,n){return Math.max(e,Math.min(n,t))}function cv(t,e){return(t%e+e)%e}function HP(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)}function zP(t,e,n){return t!==e?(n-t)/(e-t):0}function Rc(t,e,n){return(1-n)*t+n*e}function $P(t,e,n,i){return Rc(t,e,1-Math.exp(-n*i))}function WP(t,e=1){return e-Math.abs(cv(t,e*2)-e)}function GP(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function jP(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))}function XP(t,e){return t+Math.floor(Math.random()*(e-t+1))}function KP(t,e){return t+Math.random()*(e-t)}function YP(t){return t*(.5-Math.random())}function qP(t){t!==void 0&&(yb=t);let e=yb+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function ZP(t){return t*kc}function JP(t){return t*Sl}function Em(t){return(t&t-1)===0&&t!==0}function z1(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function $1(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function QP(t,e,n,i,r){const a=Math.cos,d=Math.sin,s=a(n/2),o=d(n/2),c=a((e+i)/2),h=d((e+i)/2),l=a((e-i)/2),u=d((e-i)/2),f=a((i-e)/2),m=d((i-e)/2);switch(r){case"XYX":t.set(s*h,o*l,o*u,s*c);break;case"YZY":t.set(o*u,s*h,o*l,s*c);break;case"ZXZ":t.set(o*l,o*u,s*h,s*c);break;case"XZX":t.set(s*h,o*m,o*f,s*c);break;case"YXY":t.set(o*f,s*h,o*m,s*c);break;case"ZYZ":t.set(o*m,o*f,s*h,s*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function is(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function dn(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}const eO={DEG2RAD:kc,RAD2DEG:Sl,generateUUID:pr,clamp:Hn,euclideanModulo:cv,mapLinear:HP,inverseLerp:zP,lerp:Rc,damp:$P,pingpong:WP,smoothstep:GP,smootherstep:jP,randInt:XP,randFloat:KP,randFloatSpread:YP,seededRandom:qP,degToRad:ZP,radToDeg:JP,isPowerOfTwo:Em,ceilPowerOfTwo:z1,floorPowerOfTwo:$1,setQuaternionFromProperEuler:QP,normalize:dn,denormalize:is};class It{constructor(e=0,n=0){It.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,i=this.y,r=e.elements;return this.x=r[0]*n+r[3]*i+r[6],this.y=r[1]*n+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const i=this.dot(e)/n;return Math.acos(Hn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,i=this.y-e.y;return n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const i=Math.cos(n),r=Math.sin(n),a=this.x-e.x,d=this.y-e.y;return this.x=a*i-d*r+e.x,this.y=a*r+d*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Kt{constructor(){Kt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,n,i,r,a,d,s,o,c){const h=this.elements;return h[0]=e,h[1]=r,h[2]=s,h[3]=n,h[4]=a,h[5]=o,h[6]=i,h[7]=d,h[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,i=e.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],this}extractBasis(e,n,i){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const i=e.elements,r=n.elements,a=this.elements,d=i[0],s=i[3],o=i[6],c=i[1],h=i[4],l=i[7],u=i[2],f=i[5],m=i[8],g=r[0],p=r[3],v=r[6],b=r[1],_=r[4],S=r[7],w=r[2],C=r[5],x=r[8];return a[0]=d*g+s*b+o*w,a[3]=d*p+s*_+o*C,a[6]=d*v+s*S+o*x,a[1]=c*g+h*b+l*w,a[4]=c*p+h*_+l*C,a[7]=c*v+h*S+l*x,a[2]=u*g+f*b+m*w,a[5]=u*p+f*_+m*C,a[8]=u*v+f*S+m*x,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],i=e[1],r=e[2],a=e[3],d=e[4],s=e[5],o=e[6],c=e[7],h=e[8];return n*d*h-n*s*c-i*a*h+i*s*o+r*a*c-r*d*o}invert(){const e=this.elements,n=e[0],i=e[1],r=e[2],a=e[3],d=e[4],s=e[5],o=e[6],c=e[7],h=e[8],l=h*d-s*c,u=s*o-h*a,f=c*a-d*o,m=n*l+i*u+r*f;if(m===0)return this.set(0,0,0,0,0,0,0,0,0);const g=1/m;return e[0]=l*g,e[1]=(r*c-h*i)*g,e[2]=(s*i-r*d)*g,e[3]=u*g,e[4]=(h*n-r*o)*g,e[5]=(r*a-s*n)*g,e[6]=f*g,e[7]=(i*o-c*n)*g,e[8]=(d*n-i*a)*g,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,i,r,a,d,s){const o=Math.cos(a),c=Math.sin(a);return this.set(i*o,i*c,-i*(o*d+c*s)+d+e,-r*c,r*o,-r*(-c*d+o*s)+s+n,0,0,1),this}scale(e,n){return this.premultiply(op.makeScale(e,n)),this}rotate(e){return this.premultiply(op.makeRotation(-e)),this}translate(e,n){return this.premultiply(op.makeTranslation(e,n)),this}makeTranslation(e,n){return this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,-i,0,i,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,i=e.elements;for(let r=0;r<9;r++)if(n[r]!==i[r])return!1;return!0}fromArray(e,n=0){for(let i=0;i<9;i++)this.elements[i]=e[i+n];return this}toArray(e=[],n=0){const i=this.elements;return e[n]=i[0],e[n+1]=i[1],e[n+2]=i[2],e[n+3]=i[3],e[n+4]=i[4],e[n+5]=i[5],e[n+6]=i[6],e[n+7]=i[7],e[n+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const op=new Kt;function W1(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}function qc(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}const bb={};function Pc(t){t in bb||(bb[t]=!0,console.warn(t))}function tl(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function ap(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}const tO=new Kt().fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),nO=new Kt().fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]);function iO(t){return t.convertSRGBToLinear().applyMatrix3(nO)}function rO(t){return t.applyMatrix3(tO).convertLinearToSRGB()}const sO={[Pr]:t=>t,[Ot]:t=>t.convertSRGBToLinear(),[H1]:iO},oO={[Pr]:t=>t,[Ot]:t=>t.convertLinearToSRGB(),[H1]:rO},nr={enabled:!0,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(t){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!t},get workingColorSpace(){return Pr},set workingColorSpace(t){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(t,e,n){if(this.enabled===!1||e===n||!e||!n)return t;const i=sO[e],r=oO[n];if(i===void 0||r===void 0)throw new Error(`Unsupported color space conversion, "${e}" to "${n}".`);return r(i(t))},fromWorkingColorSpace:function(t,e){return this.convert(t,this.workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this.workingColorSpace)}};let va;class G1{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{va===void 0&&(va=qc("canvas")),va.width=e.width,va.height=e.height;const i=va.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),n=va}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=qc("canvas");n.width=e.width,n.height=e.height;const i=n.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),a=r.data;for(let d=0;d<a.length;d++)a[d]=tl(a[d]/255)*255;return i.putImageData(r,0,0),n}else if(e.data){const n=e.data.slice(0);for(let i=0;i<n.length;i++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[i]=Math.floor(tl(n[i]/255)*255):n[i]=tl(n[i]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class j1{constructor(e=null){this.isSource=!0,this.uuid=pr(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let a;if(Array.isArray(r)){a=[];for(let d=0,s=r.length;d<s;d++)r[d].isDataTexture?a.push(lp(r[d].image)):a.push(lp(r[d]))}else a=lp(r);i.url=a}return n||(e.images[this.uuid]=i),i}}function lp(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?G1.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let aO=0;class Wn extends la{constructor(e=Wn.DEFAULT_IMAGE,n=Wn.DEFAULT_MAPPING,i=Hi,r=Hi,a=qn,d=Zo,s=zi,o=Jo,c=Wn.DEFAULT_ANISOTROPY,h=jo){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:aO++}),this.uuid=pr(),this.name="",this.source=new j1(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=a,this.minFilter=d,this.anisotropy=c,this.format=s,this.internalFormat=null,this.type=o,this.offset=new It(0,0),this.repeat=new It(1,1),this.center=new It(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Kt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof h=="string"?this.colorSpace=h:(Pc("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=h===ls?Ot:jo),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),n||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==N1)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case vl:e.x=e.x-Math.floor(e.x);break;case Hi:e.x=e.x<0?0:1;break;case yl:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case vl:e.y=e.y-Math.floor(e.y);break;case Hi:e.y=e.y<0?0:1;break;case yl:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return Pc("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===Ot?ls:V1}set encoding(e){Pc("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===ls?Ot:jo}}Wn.DEFAULT_IMAGE=null;Wn.DEFAULT_MAPPING=N1;Wn.DEFAULT_ANISOTROPY=1;class fn{constructor(e=0,n=0,i=0,r=1){fn.prototype.isVector4=!0,this.x=e,this.y=n,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,i,r){return this.x=e,this.y=n,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,i=this.y,r=this.z,a=this.w,d=e.elements;return this.x=d[0]*n+d[4]*i+d[8]*r+d[12]*a,this.y=d[1]*n+d[5]*i+d[9]*r+d[13]*a,this.z=d[2]*n+d[6]*i+d[10]*r+d[14]*a,this.w=d[3]*n+d[7]*i+d[11]*r+d[15]*a,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,i,r,a;const o=e.elements,c=o[0],h=o[4],l=o[8],u=o[1],f=o[5],m=o[9],g=o[2],p=o[6],v=o[10];if(Math.abs(h-u)<.01&&Math.abs(l-g)<.01&&Math.abs(m-p)<.01){if(Math.abs(h+u)<.1&&Math.abs(l+g)<.1&&Math.abs(m+p)<.1&&Math.abs(c+f+v-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const _=(c+1)/2,S=(f+1)/2,w=(v+1)/2,C=(h+u)/4,x=(l+g)/4,M=(m+p)/4;return _>S&&_>w?_<.01?(i=0,r=.707106781,a=.707106781):(i=Math.sqrt(_),r=C/i,a=x/i):S>w?S<.01?(i=.707106781,r=0,a=.707106781):(r=Math.sqrt(S),i=C/r,a=M/r):w<.01?(i=.707106781,r=.707106781,a=0):(a=Math.sqrt(w),i=x/a,r=M/a),this.set(i,r,a,n),this}let b=Math.sqrt((p-m)*(p-m)+(l-g)*(l-g)+(u-h)*(u-h));return Math.abs(b)<.001&&(b=1),this.x=(p-m)/b,this.y=(l-g)/b,this.z=(u-h)/b,this.w=Math.acos((c+f+v-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this.w=Math.max(e.w,Math.min(n.w,this.w)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this.w=Math.max(e,Math.min(n,this.w)),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this.z=e.z+(n.z-e.z)*i,this.w=e.w+(n.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Qo extends la{constructor(e=1,n=1,i={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new fn(0,0,e,n),this.scissorTest=!1,this.viewport=new fn(0,0,e,n);const r={width:e,height:n,depth:1};i.encoding!==void 0&&(Pc("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),i.colorSpace=i.encoding===ls?Ot:jo),this.texture=new Wn(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.internalFormat=i.internalFormat!==void 0?i.internalFormat:null,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:qn,this.depthBuffer=i.depthBuffer!==void 0?i.depthBuffer:!0,this.stencilBuffer=i.stencilBuffer!==void 0?i.stencilBuffer:!1,this.depthTexture=i.depthTexture!==void 0?i.depthTexture:null,this.samples=i.samples!==void 0?i.samples:0}setSize(e,n,i=1){(this.width!==e||this.height!==n||this.depth!==i)&&(this.width=e,this.height=n,this.depth=i,this.texture.image.width=e,this.texture.image.height=n,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const n=Object.assign({},e.texture.image);return this.texture.source=new j1(n),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class X1 extends Wn{constructor(e=null,n=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:i,depth:r},this.magFilter=Bn,this.minFilter=Bn,this.wrapR=Hi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class lO extends Wn{constructor(e=null,n=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:i,depth:r},this.magFilter=Bn,this.minFilter=Bn,this.wrapR=Hi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Or{constructor(e=0,n=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=i,this._w=r}static slerpFlat(e,n,i,r,a,d,s){let o=i[r+0],c=i[r+1],h=i[r+2],l=i[r+3];const u=a[d+0],f=a[d+1],m=a[d+2],g=a[d+3];if(s===0){e[n+0]=o,e[n+1]=c,e[n+2]=h,e[n+3]=l;return}if(s===1){e[n+0]=u,e[n+1]=f,e[n+2]=m,e[n+3]=g;return}if(l!==g||o!==u||c!==f||h!==m){let p=1-s;const v=o*u+c*f+h*m+l*g,b=v>=0?1:-1,_=1-v*v;if(_>Number.EPSILON){const w=Math.sqrt(_),C=Math.atan2(w,v*b);p=Math.sin(p*C)/w,s=Math.sin(s*C)/w}const S=s*b;if(o=o*p+u*S,c=c*p+f*S,h=h*p+m*S,l=l*p+g*S,p===1-s){const w=1/Math.sqrt(o*o+c*c+h*h+l*l);o*=w,c*=w,h*=w,l*=w}}e[n]=o,e[n+1]=c,e[n+2]=h,e[n+3]=l}static multiplyQuaternionsFlat(e,n,i,r,a,d){const s=i[r],o=i[r+1],c=i[r+2],h=i[r+3],l=a[d],u=a[d+1],f=a[d+2],m=a[d+3];return e[n]=s*m+h*l+o*f-c*u,e[n+1]=o*m+h*u+c*l-s*f,e[n+2]=c*m+h*f+s*u-o*l,e[n+3]=h*m-s*l-o*u-c*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,i,r){return this._x=e,this._y=n,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n){const i=e._x,r=e._y,a=e._z,d=e._order,s=Math.cos,o=Math.sin,c=s(i/2),h=s(r/2),l=s(a/2),u=o(i/2),f=o(r/2),m=o(a/2);switch(d){case"XYZ":this._x=u*h*l+c*f*m,this._y=c*f*l-u*h*m,this._z=c*h*m+u*f*l,this._w=c*h*l-u*f*m;break;case"YXZ":this._x=u*h*l+c*f*m,this._y=c*f*l-u*h*m,this._z=c*h*m-u*f*l,this._w=c*h*l+u*f*m;break;case"ZXY":this._x=u*h*l-c*f*m,this._y=c*f*l+u*h*m,this._z=c*h*m+u*f*l,this._w=c*h*l-u*f*m;break;case"ZYX":this._x=u*h*l-c*f*m,this._y=c*f*l+u*h*m,this._z=c*h*m-u*f*l,this._w=c*h*l+u*f*m;break;case"YZX":this._x=u*h*l+c*f*m,this._y=c*f*l+u*h*m,this._z=c*h*m-u*f*l,this._w=c*h*l-u*f*m;break;case"XZY":this._x=u*h*l-c*f*m,this._y=c*f*l-u*h*m,this._z=c*h*m+u*f*l,this._w=c*h*l+u*f*m;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+d)}return n!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const i=n/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,i=n[0],r=n[4],a=n[8],d=n[1],s=n[5],o=n[9],c=n[2],h=n[6],l=n[10],u=i+s+l;if(u>0){const f=.5/Math.sqrt(u+1);this._w=.25/f,this._x=(h-o)*f,this._y=(a-c)*f,this._z=(d-r)*f}else if(i>s&&i>l){const f=2*Math.sqrt(1+i-s-l);this._w=(h-o)/f,this._x=.25*f,this._y=(r+d)/f,this._z=(a+c)/f}else if(s>l){const f=2*Math.sqrt(1+s-i-l);this._w=(a-c)/f,this._x=(r+d)/f,this._y=.25*f,this._z=(o+h)/f}else{const f=2*Math.sqrt(1+l-i-s);this._w=(d-r)/f,this._x=(a+c)/f,this._y=(o+h)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let i=e.dot(n)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Hn(this.dot(e),-1,1)))}rotateTowards(e,n){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,n/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const i=e._x,r=e._y,a=e._z,d=e._w,s=n._x,o=n._y,c=n._z,h=n._w;return this._x=i*h+d*s+r*c-a*o,this._y=r*h+d*o+a*s-i*c,this._z=a*h+d*c+i*o-r*s,this._w=d*h-i*s-r*o-a*c,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const i=this._x,r=this._y,a=this._z,d=this._w;let s=d*e._w+i*e._x+r*e._y+a*e._z;if(s<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),s>=1)return this._w=d,this._x=i,this._y=r,this._z=a,this;const o=1-s*s;if(o<=Number.EPSILON){const f=1-n;return this._w=f*d+n*this._w,this._x=f*i+n*this._x,this._y=f*r+n*this._y,this._z=f*a+n*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(o),h=Math.atan2(c,s),l=Math.sin((1-n)*h)/c,u=Math.sin(n*h)/c;return this._w=d*l+this._w*u,this._x=i*l+this._x*u,this._y=r*l+this._y*u,this._z=a*l+this._z*u,this._onChangeCallback(),this}slerpQuaternions(e,n,i){return this.copy(e).slerp(n,i)}random(){const e=Math.random(),n=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),a=2*Math.PI*Math.random();return this.set(n*Math.cos(r),i*Math.sin(a),i*Math.cos(a),n*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Fe{constructor(e=0,n=0,i=0){Fe.prototype.isVector3=!0,this.x=e,this.y=n,this.z=i}set(e,n,i){return i===void 0&&(i=this.z),this.x=e,this.y=n,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(_b.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(_b.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,i=this.y,r=this.z,a=e.elements;return this.x=a[0]*n+a[3]*i+a[6]*r,this.y=a[1]*n+a[4]*i+a[7]*r,this.z=a[2]*n+a[5]*i+a[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,i=this.y,r=this.z,a=e.elements,d=1/(a[3]*n+a[7]*i+a[11]*r+a[15]);return this.x=(a[0]*n+a[4]*i+a[8]*r+a[12])*d,this.y=(a[1]*n+a[5]*i+a[9]*r+a[13])*d,this.z=(a[2]*n+a[6]*i+a[10]*r+a[14])*d,this}applyQuaternion(e){const n=this.x,i=this.y,r=this.z,a=e.x,d=e.y,s=e.z,o=e.w,c=o*n+d*r-s*i,h=o*i+s*n-a*r,l=o*r+a*i-d*n,u=-a*n-d*i-s*r;return this.x=c*o+u*-a+h*-s-l*-d,this.y=h*o+u*-d+l*-a-c*-s,this.z=l*o+u*-s+c*-d-h*-a,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,i=this.y,r=this.z,a=e.elements;return this.x=a[0]*n+a[4]*i+a[8]*r,this.y=a[1]*n+a[5]*i+a[9]*r,this.z=a[2]*n+a[6]*i+a[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this.z=e.z+(n.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const i=e.x,r=e.y,a=e.z,d=n.x,s=n.y,o=n.z;return this.x=r*o-a*s,this.y=a*d-i*o,this.z=i*s-r*d,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const i=e.dot(this)/n;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return cp.copy(this).projectOnVector(e),this.sub(cp)}reflect(e){return this.sub(cp.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const i=this.dot(e)/n;return Math.acos(Hn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return n*n+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,i){const r=Math.sin(n)*e;return this.x=r*Math.sin(i),this.y=Math.cos(n)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,i){return this.x=e*Math.sin(n),this.y=i,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=i,this.z=r,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,n=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(n),this.y=i*Math.sin(n),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const cp=new Fe,_b=new Or;class ys{constructor(e=new Fe(1/0,1/0,1/0),n=new Fe(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n+=3)this.expandByPoint(Wr.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,i=e.count;n<i;n++)this.expandByPoint(Wr.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const i=Wr.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){if(e.updateWorldMatrix(!1,!1),e.boundingBox!==void 0)e.boundingBox===null&&e.computeBoundingBox(),ya.copy(e.boundingBox),ya.applyMatrix4(e.matrixWorld),this.union(ya);else{const r=e.geometry;if(r!==void 0)if(n&&r.attributes!==void 0&&r.attributes.position!==void 0){const a=r.attributes.position;for(let d=0,s=a.count;d<s;d++)Wr.fromBufferAttribute(a,d).applyMatrix4(e.matrixWorld),this.expandByPoint(Wr)}else r.boundingBox===null&&r.computeBoundingBox(),ya.copy(r.boundingBox),ya.applyMatrix4(e.matrixWorld),this.union(ya)}const i=e.children;for(let r=0,a=i.length;r<a;r++)this.expandByObject(i[r],n);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Wr),Wr.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,i;return e.normal.x>0?(n=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),n<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(tc),Ju.subVectors(this.max,tc),ba.subVectors(e.a,tc),_a.subVectors(e.b,tc),Sa.subVectors(e.c,tc),Es.subVectors(_a,ba),Ms.subVectors(Sa,_a),_o.subVectors(ba,Sa);let n=[0,-Es.z,Es.y,0,-Ms.z,Ms.y,0,-_o.z,_o.y,Es.z,0,-Es.x,Ms.z,0,-Ms.x,_o.z,0,-_o.x,-Es.y,Es.x,0,-Ms.y,Ms.x,0,-_o.y,_o.x,0];return!up(n,ba,_a,Sa,Ju)||(n=[1,0,0,0,1,0,0,0,1],!up(n,ba,_a,Sa,Ju))?!1:(Qu.crossVectors(Es,Ms),n=[Qu.x,Qu.y,Qu.z],up(n,ba,_a,Sa,Ju))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Wr).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Wr).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:($r[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),$r[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),$r[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),$r[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),$r[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),$r[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),$r[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),$r[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints($r),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const $r=[new Fe,new Fe,new Fe,new Fe,new Fe,new Fe,new Fe,new Fe],Wr=new Fe,ya=new ys,ba=new Fe,_a=new Fe,Sa=new Fe,Es=new Fe,Ms=new Fe,_o=new Fe,tc=new Fe,Ju=new Fe,Qu=new Fe,So=new Fe;function up(t,e,n,i,r){for(let a=0,d=t.length-3;a<=d;a+=3){So.fromArray(t,a);const s=r.x*Math.abs(So.x)+r.y*Math.abs(So.y)+r.z*Math.abs(So.z),o=e.dot(So),c=n.dot(So),h=i.dot(So);if(Math.max(-Math.max(o,c,h),Math.min(o,c,h))>s)return!1}return!0}const cO=new ys,nc=new Fe,dp=new Fe;class bs{constructor(e=new Fe,n=-1){this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const i=this.center;n!==void 0?i.copy(n):cO.setFromPoints(e).getCenter(i);let r=0;for(let a=0,d=e.length;a<d;a++)r=Math.max(r,i.distanceToSquared(e[a]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const i=this.center.distanceToSquared(e);return n.copy(e),i>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;nc.subVectors(e,this.center);const n=nc.lengthSq();if(n>this.radius*this.radius){const i=Math.sqrt(n),r=(i-this.radius)*.5;this.center.addScaledVector(nc,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(dp.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(nc.copy(e.center).add(dp)),this.expandByPoint(nc.copy(e.center).sub(dp))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Gr=new Fe,fp=new Fe,ed=new Fe,As=new Fe,hp=new Fe,td=new Fe,pp=new Fe;class uv{constructor(e=new Fe,n=new Fe(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Gr)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const i=n.dot(this.direction);return i<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=Gr.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(Gr.copy(this.origin).addScaledVector(this.direction,n),Gr.distanceToSquared(e))}distanceSqToSegment(e,n,i,r){fp.copy(e).add(n).multiplyScalar(.5),ed.copy(n).sub(e).normalize(),As.copy(this.origin).sub(fp);const a=e.distanceTo(n)*.5,d=-this.direction.dot(ed),s=As.dot(this.direction),o=-As.dot(ed),c=As.lengthSq(),h=Math.abs(1-d*d);let l,u,f,m;if(h>0)if(l=d*o-s,u=d*s-o,m=a*h,l>=0)if(u>=-m)if(u<=m){const g=1/h;l*=g,u*=g,f=l*(l+d*u+2*s)+u*(d*l+u+2*o)+c}else u=a,l=Math.max(0,-(d*u+s)),f=-l*l+u*(u+2*o)+c;else u=-a,l=Math.max(0,-(d*u+s)),f=-l*l+u*(u+2*o)+c;else u<=-m?(l=Math.max(0,-(-d*a+s)),u=l>0?-a:Math.min(Math.max(-a,-o),a),f=-l*l+u*(u+2*o)+c):u<=m?(l=0,u=Math.min(Math.max(-a,-o),a),f=u*(u+2*o)+c):(l=Math.max(0,-(d*a+s)),u=l>0?a:Math.min(Math.max(-a,-o),a),f=-l*l+u*(u+2*o)+c);else u=d>0?-a:a,l=Math.max(0,-(d*u+s)),f=-l*l+u*(u+2*o)+c;return i&&i.copy(this.origin).addScaledVector(this.direction,l),r&&r.copy(fp).addScaledVector(ed,u),f}intersectSphere(e,n){Gr.subVectors(e.center,this.origin);const i=Gr.dot(this.direction),r=Gr.dot(Gr)-i*i,a=e.radius*e.radius;if(r>a)return null;const d=Math.sqrt(a-r),s=i-d,o=i+d;return o<0?null:s<0?this.at(o,n):this.at(s,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/n;return i>=0?i:null}intersectPlane(e,n){const i=this.distanceToPlane(e);return i===null?null:this.at(i,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let i,r,a,d,s,o;const c=1/this.direction.x,h=1/this.direction.y,l=1/this.direction.z,u=this.origin;return c>=0?(i=(e.min.x-u.x)*c,r=(e.max.x-u.x)*c):(i=(e.max.x-u.x)*c,r=(e.min.x-u.x)*c),h>=0?(a=(e.min.y-u.y)*h,d=(e.max.y-u.y)*h):(a=(e.max.y-u.y)*h,d=(e.min.y-u.y)*h),i>d||a>r||((a>i||isNaN(i))&&(i=a),(d<r||isNaN(r))&&(r=d),l>=0?(s=(e.min.z-u.z)*l,o=(e.max.z-u.z)*l):(s=(e.max.z-u.z)*l,o=(e.min.z-u.z)*l),i>o||s>r)||((s>i||i!==i)&&(i=s),(o<r||r!==r)&&(r=o),r<0)?null:this.at(i>=0?i:r,n)}intersectsBox(e){return this.intersectBox(e,Gr)!==null}intersectTriangle(e,n,i,r,a){hp.subVectors(n,e),td.subVectors(i,e),pp.crossVectors(hp,td);let d=this.direction.dot(pp),s;if(d>0){if(r)return null;s=1}else if(d<0)s=-1,d=-d;else return null;As.subVectors(this.origin,e);const o=s*this.direction.dot(td.crossVectors(As,td));if(o<0)return null;const c=s*this.direction.dot(hp.cross(As));if(c<0||o+c>d)return null;const h=-s*As.dot(pp);return h<0?null:this.at(h/d,a)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Gt{constructor(){Gt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,n,i,r,a,d,s,o,c,h,l,u,f,m,g,p){const v=this.elements;return v[0]=e,v[4]=n,v[8]=i,v[12]=r,v[1]=a,v[5]=d,v[9]=s,v[13]=o,v[2]=c,v[6]=h,v[10]=l,v[14]=u,v[3]=f,v[7]=m,v[11]=g,v[15]=p,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Gt().fromArray(this.elements)}copy(e){const n=this.elements,i=e.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],n[9]=i[9],n[10]=i[10],n[11]=i[11],n[12]=i[12],n[13]=i[13],n[14]=i[14],n[15]=i[15],this}copyPosition(e){const n=this.elements,i=e.elements;return n[12]=i[12],n[13]=i[13],n[14]=i[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,i){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,n,i){return this.set(e.x,n.x,i.x,0,e.y,n.y,i.y,0,e.z,n.z,i.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,i=e.elements,r=1/wa.setFromMatrixColumn(e,0).length(),a=1/wa.setFromMatrixColumn(e,1).length(),d=1/wa.setFromMatrixColumn(e,2).length();return n[0]=i[0]*r,n[1]=i[1]*r,n[2]=i[2]*r,n[3]=0,n[4]=i[4]*a,n[5]=i[5]*a,n[6]=i[6]*a,n[7]=0,n[8]=i[8]*d,n[9]=i[9]*d,n[10]=i[10]*d,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,i=e.x,r=e.y,a=e.z,d=Math.cos(i),s=Math.sin(i),o=Math.cos(r),c=Math.sin(r),h=Math.cos(a),l=Math.sin(a);if(e.order==="XYZ"){const u=d*h,f=d*l,m=s*h,g=s*l;n[0]=o*h,n[4]=-o*l,n[8]=c,n[1]=f+m*c,n[5]=u-g*c,n[9]=-s*o,n[2]=g-u*c,n[6]=m+f*c,n[10]=d*o}else if(e.order==="YXZ"){const u=o*h,f=o*l,m=c*h,g=c*l;n[0]=u+g*s,n[4]=m*s-f,n[8]=d*c,n[1]=d*l,n[5]=d*h,n[9]=-s,n[2]=f*s-m,n[6]=g+u*s,n[10]=d*o}else if(e.order==="ZXY"){const u=o*h,f=o*l,m=c*h,g=c*l;n[0]=u-g*s,n[4]=-d*l,n[8]=m+f*s,n[1]=f+m*s,n[5]=d*h,n[9]=g-u*s,n[2]=-d*c,n[6]=s,n[10]=d*o}else if(e.order==="ZYX"){const u=d*h,f=d*l,m=s*h,g=s*l;n[0]=o*h,n[4]=m*c-f,n[8]=u*c+g,n[1]=o*l,n[5]=g*c+u,n[9]=f*c-m,n[2]=-c,n[6]=s*o,n[10]=d*o}else if(e.order==="YZX"){const u=d*o,f=d*c,m=s*o,g=s*c;n[0]=o*h,n[4]=g-u*l,n[8]=m*l+f,n[1]=l,n[5]=d*h,n[9]=-s*h,n[2]=-c*h,n[6]=f*l+m,n[10]=u-g*l}else if(e.order==="XZY"){const u=d*o,f=d*c,m=s*o,g=s*c;n[0]=o*h,n[4]=-l,n[8]=c*h,n[1]=u*l+g,n[5]=d*h,n[9]=f*l-m,n[2]=m*l-f,n[6]=s*h,n[10]=g*l+u}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(uO,e,dO)}lookAt(e,n,i){const r=this.elements;return ki.subVectors(e,n),ki.lengthSq()===0&&(ki.z=1),ki.normalize(),ks.crossVectors(i,ki),ks.lengthSq()===0&&(Math.abs(i.z)===1?ki.x+=1e-4:ki.z+=1e-4,ki.normalize(),ks.crossVectors(i,ki)),ks.normalize(),nd.crossVectors(ki,ks),r[0]=ks.x,r[4]=nd.x,r[8]=ki.x,r[1]=ks.y,r[5]=nd.y,r[9]=ki.y,r[2]=ks.z,r[6]=nd.z,r[10]=ki.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const i=e.elements,r=n.elements,a=this.elements,d=i[0],s=i[4],o=i[8],c=i[12],h=i[1],l=i[5],u=i[9],f=i[13],m=i[2],g=i[6],p=i[10],v=i[14],b=i[3],_=i[7],S=i[11],w=i[15],C=r[0],x=r[4],M=r[8],E=r[12],A=r[1],O=r[5],D=r[9],L=r[13],U=r[2],j=r[6],V=r[10],k=r[14],F=r[3],T=r[7],P=r[11],H=r[15];return a[0]=d*C+s*A+o*U+c*F,a[4]=d*x+s*O+o*j+c*T,a[8]=d*M+s*D+o*V+c*P,a[12]=d*E+s*L+o*k+c*H,a[1]=h*C+l*A+u*U+f*F,a[5]=h*x+l*O+u*j+f*T,a[9]=h*M+l*D+u*V+f*P,a[13]=h*E+l*L+u*k+f*H,a[2]=m*C+g*A+p*U+v*F,a[6]=m*x+g*O+p*j+v*T,a[10]=m*M+g*D+p*V+v*P,a[14]=m*E+g*L+p*k+v*H,a[3]=b*C+_*A+S*U+w*F,a[7]=b*x+_*O+S*j+w*T,a[11]=b*M+_*D+S*V+w*P,a[15]=b*E+_*L+S*k+w*H,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],i=e[4],r=e[8],a=e[12],d=e[1],s=e[5],o=e[9],c=e[13],h=e[2],l=e[6],u=e[10],f=e[14],m=e[3],g=e[7],p=e[11],v=e[15];return m*(+a*o*l-r*c*l-a*s*u+i*c*u+r*s*f-i*o*f)+g*(+n*o*f-n*c*u+a*d*u-r*d*f+r*c*h-a*o*h)+p*(+n*c*l-n*s*f-a*d*l+i*d*f+a*s*h-i*c*h)+v*(-r*s*h-n*o*l+n*s*u+r*d*l-i*d*u+i*o*h)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=n,r[14]=i),this}invert(){const e=this.elements,n=e[0],i=e[1],r=e[2],a=e[3],d=e[4],s=e[5],o=e[6],c=e[7],h=e[8],l=e[9],u=e[10],f=e[11],m=e[12],g=e[13],p=e[14],v=e[15],b=l*p*c-g*u*c+g*o*f-s*p*f-l*o*v+s*u*v,_=m*u*c-h*p*c-m*o*f+d*p*f+h*o*v-d*u*v,S=h*g*c-m*l*c+m*s*f-d*g*f-h*s*v+d*l*v,w=m*l*o-h*g*o-m*s*u+d*g*u+h*s*p-d*l*p,C=n*b+i*_+r*S+a*w;if(C===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const x=1/C;return e[0]=b*x,e[1]=(g*u*a-l*p*a-g*r*f+i*p*f+l*r*v-i*u*v)*x,e[2]=(s*p*a-g*o*a+g*r*c-i*p*c-s*r*v+i*o*v)*x,e[3]=(l*o*a-s*u*a-l*r*c+i*u*c+s*r*f-i*o*f)*x,e[4]=_*x,e[5]=(h*p*a-m*u*a+m*r*f-n*p*f-h*r*v+n*u*v)*x,e[6]=(m*o*a-d*p*a-m*r*c+n*p*c+d*r*v-n*o*v)*x,e[7]=(d*u*a-h*o*a+h*r*c-n*u*c-d*r*f+n*o*f)*x,e[8]=S*x,e[9]=(m*l*a-h*g*a-m*i*f+n*g*f+h*i*v-n*l*v)*x,e[10]=(d*g*a-m*s*a+m*i*c-n*g*c-d*i*v+n*s*v)*x,e[11]=(h*s*a-d*l*a-h*i*c+n*l*c+d*i*f-n*s*f)*x,e[12]=w*x,e[13]=(h*g*r-m*l*r+m*i*u-n*g*u-h*i*p+n*l*p)*x,e[14]=(m*s*r-d*g*r-m*i*o+n*g*o+d*i*p-n*s*p)*x,e[15]=(d*l*r-h*s*r+h*i*o-n*l*o-d*i*u+n*s*u)*x,this}scale(e){const n=this.elements,i=e.x,r=e.y,a=e.z;return n[0]*=i,n[4]*=r,n[8]*=a,n[1]*=i,n[5]*=r,n[9]*=a,n[2]*=i,n[6]*=r,n[10]*=a,n[3]*=i,n[7]*=r,n[11]*=a,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,i,r))}makeTranslation(e,n,i){return this.set(1,0,0,e,0,1,0,n,0,0,1,i,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,n,-i,0,0,i,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,0,i,0,0,1,0,0,-i,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,-i,0,0,i,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const i=Math.cos(n),r=Math.sin(n),a=1-i,d=e.x,s=e.y,o=e.z,c=a*d,h=a*s;return this.set(c*d+i,c*s-r*o,c*o+r*s,0,c*s+r*o,h*s+i,h*o-r*d,0,c*o-r*s,h*o+r*d,a*o*o+i,0,0,0,0,1),this}makeScale(e,n,i){return this.set(e,0,0,0,0,n,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,n,i,r,a,d){return this.set(1,i,a,0,e,1,d,0,n,r,1,0,0,0,0,1),this}compose(e,n,i){const r=this.elements,a=n._x,d=n._y,s=n._z,o=n._w,c=a+a,h=d+d,l=s+s,u=a*c,f=a*h,m=a*l,g=d*h,p=d*l,v=s*l,b=o*c,_=o*h,S=o*l,w=i.x,C=i.y,x=i.z;return r[0]=(1-(g+v))*w,r[1]=(f+S)*w,r[2]=(m-_)*w,r[3]=0,r[4]=(f-S)*C,r[5]=(1-(u+v))*C,r[6]=(p+b)*C,r[7]=0,r[8]=(m+_)*x,r[9]=(p-b)*x,r[10]=(1-(u+g))*x,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,n,i){const r=this.elements;let a=wa.set(r[0],r[1],r[2]).length();const d=wa.set(r[4],r[5],r[6]).length(),s=wa.set(r[8],r[9],r[10]).length();this.determinant()<0&&(a=-a),e.x=r[12],e.y=r[13],e.z=r[14],ir.copy(this);const c=1/a,h=1/d,l=1/s;return ir.elements[0]*=c,ir.elements[1]*=c,ir.elements[2]*=c,ir.elements[4]*=h,ir.elements[5]*=h,ir.elements[6]*=h,ir.elements[8]*=l,ir.elements[9]*=l,ir.elements[10]*=l,n.setFromRotationMatrix(ir),i.x=a,i.y=d,i.z=s,this}makePerspective(e,n,i,r,a,d){const s=this.elements,o=2*a/(n-e),c=2*a/(i-r),h=(n+e)/(n-e),l=(i+r)/(i-r),u=-(d+a)/(d-a),f=-2*d*a/(d-a);return s[0]=o,s[4]=0,s[8]=h,s[12]=0,s[1]=0,s[5]=c,s[9]=l,s[13]=0,s[2]=0,s[6]=0,s[10]=u,s[14]=f,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this}makeOrthographic(e,n,i,r,a,d){const s=this.elements,o=1/(n-e),c=1/(i-r),h=1/(d-a),l=(n+e)*o,u=(i+r)*c,f=(d+a)*h;return s[0]=2*o,s[4]=0,s[8]=0,s[12]=-l,s[1]=0,s[5]=2*c,s[9]=0,s[13]=-u,s[2]=0,s[6]=0,s[10]=-2*h,s[14]=-f,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this}equals(e){const n=this.elements,i=e.elements;for(let r=0;r<16;r++)if(n[r]!==i[r])return!1;return!0}fromArray(e,n=0){for(let i=0;i<16;i++)this.elements[i]=e[i+n];return this}toArray(e=[],n=0){const i=this.elements;return e[n]=i[0],e[n+1]=i[1],e[n+2]=i[2],e[n+3]=i[3],e[n+4]=i[4],e[n+5]=i[5],e[n+6]=i[6],e[n+7]=i[7],e[n+8]=i[8],e[n+9]=i[9],e[n+10]=i[10],e[n+11]=i[11],e[n+12]=i[12],e[n+13]=i[13],e[n+14]=i[14],e[n+15]=i[15],e}}const wa=new Fe,ir=new Gt,uO=new Fe(0,0,0),dO=new Fe(1,1,1),ks=new Fe,nd=new Fe,ki=new Fe,Sb=new Gt,wb=new Or;class ch{constructor(e=0,n=0,i=0,r=ch.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,i,r=this._order){return this._x=e,this._y=n,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,i=!0){const r=e.elements,a=r[0],d=r[4],s=r[8],o=r[1],c=r[5],h=r[9],l=r[2],u=r[6],f=r[10];switch(n){case"XYZ":this._y=Math.asin(Hn(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-h,f),this._z=Math.atan2(-d,a)):(this._x=Math.atan2(u,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Hn(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(s,f),this._z=Math.atan2(o,c)):(this._y=Math.atan2(-l,a),this._z=0);break;case"ZXY":this._x=Math.asin(Hn(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(-l,f),this._z=Math.atan2(-d,c)):(this._y=0,this._z=Math.atan2(o,a));break;case"ZYX":this._y=Math.asin(-Hn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(u,f),this._z=Math.atan2(o,a)):(this._x=0,this._z=Math.atan2(-d,c));break;case"YZX":this._z=Math.asin(Hn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-h,c),this._y=Math.atan2(-l,a)):(this._x=0,this._y=Math.atan2(s,f));break;case"XZY":this._z=Math.asin(-Hn(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(u,c),this._y=Math.atan2(s,a)):(this._x=Math.atan2(-h,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,i){return Sb.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Sb,n,i)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return wb.setFromEuler(this),this.setFromQuaternion(wb,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}ch.DEFAULT_ORDER="XYZ";class K1{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let fO=0;const Cb=new Fe,Ca=new Or,jr=new Gt,id=new Fe,ic=new Fe,hO=new Fe,pO=new Or,xb=new Fe(1,0,0),Tb=new Fe(0,1,0),Eb=new Fe(0,0,1),mO={type:"added"},Mb={type:"removed"};class yn extends la{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:fO++}),this.uuid=pr(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=yn.DEFAULT_UP.clone();const e=new Fe,n=new ch,i=new Or,r=new Fe(1,1,1);function a(){i.setFromEuler(n,!1)}function d(){n.setFromQuaternion(i,void 0,!1)}n._onChange(a),i._onChange(d),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Gt},normalMatrix:{value:new Kt}}),this.matrix=new Gt,this.matrixWorld=new Gt,this.matrixAutoUpdate=yn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=yn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new K1,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return Ca.setFromAxisAngle(e,n),this.quaternion.multiply(Ca),this}rotateOnWorldAxis(e,n){return Ca.setFromAxisAngle(e,n),this.quaternion.premultiply(Ca),this}rotateX(e){return this.rotateOnAxis(xb,e)}rotateY(e){return this.rotateOnAxis(Tb,e)}rotateZ(e){return this.rotateOnAxis(Eb,e)}translateOnAxis(e,n){return Cb.copy(e).applyQuaternion(this.quaternion),this.position.add(Cb.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(xb,e)}translateY(e){return this.translateOnAxis(Tb,e)}translateZ(e){return this.translateOnAxis(Eb,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(jr.copy(this.matrixWorld).invert())}lookAt(e,n,i){e.isVector3?id.copy(e):id.set(e,n,i);const r=this.parent;this.updateWorldMatrix(!0,!1),ic.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?jr.lookAt(ic,id,this.up):jr.lookAt(id,ic,this.up),this.quaternion.setFromRotationMatrix(jr),r&&(jr.extractRotation(r.matrixWorld),Ca.setFromRotationMatrix(jr),this.quaternion.premultiply(Ca.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(mO)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(Mb)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const n=this.children[e];n.parent=null,n.dispatchEvent(Mb)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),jr.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),jr.multiply(e.parent.matrixWorld)),e.applyMatrix4(jr),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let i=0,r=this.children.length;i<r;i++){const d=this.children[i].getObjectByProperty(e,n);if(d!==void 0)return d}}getObjectsByProperty(e,n){let i=[];this[e]===n&&i.push(this);for(let r=0,a=this.children.length;r<a;r++){const d=this.children[r].getObjectsByProperty(e,n);d.length>0&&(i=i.concat(d))}return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ic,e,hO),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ic,pO,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let i=0,r=n.length;i<r;i++)n[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let i=0,r=n.length;i<r;i++)n[i].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let i=0,r=n.length;i<r;i++){const a=n[i];(a.matrixWorldAutoUpdate===!0||e===!0)&&a.updateMatrixWorld(e)}}updateWorldMatrix(e,n){const i=this.parent;if(e===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),n===!0){const r=this.children;for(let a=0,d=r.length;a<d;a++){const s=r[a];s.matrixWorldAutoUpdate===!0&&s.updateWorldMatrix(!1,!0)}}}toJSON(e){const n=e===void 0||typeof e=="string",i={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON()));function a(s,o){return s[o.uuid]===void 0&&(s[o.uuid]=o.toJSON(e)),o.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=a(e.geometries,this.geometry);const s=this.geometry.parameters;if(s!==void 0&&s.shapes!==void 0){const o=s.shapes;if(Array.isArray(o))for(let c=0,h=o.length;c<h;c++){const l=o[c];a(e.shapes,l)}else a(e.shapes,o)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(a(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const s=[];for(let o=0,c=this.material.length;o<c;o++)s.push(a(e.materials,this.material[o]));r.material=s}else r.material=a(e.materials,this.material);if(this.children.length>0){r.children=[];for(let s=0;s<this.children.length;s++)r.children.push(this.children[s].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let s=0;s<this.animations.length;s++){const o=this.animations[s];r.animations.push(a(e.animations,o))}}if(n){const s=d(e.geometries),o=d(e.materials),c=d(e.textures),h=d(e.images),l=d(e.shapes),u=d(e.skeletons),f=d(e.animations),m=d(e.nodes);s.length>0&&(i.geometries=s),o.length>0&&(i.materials=o),c.length>0&&(i.textures=c),h.length>0&&(i.images=h),l.length>0&&(i.shapes=l),u.length>0&&(i.skeletons=u),f.length>0&&(i.animations=f),m.length>0&&(i.nodes=m)}return i.object=r,i;function d(s){const o=[];for(const c in s){const h=s[c];delete h.metadata,o.push(h)}return o}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations,this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}yn.DEFAULT_UP=new Fe(0,1,0);yn.DEFAULT_MATRIX_AUTO_UPDATE=!0;yn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const rr=new Fe,Xr=new Fe,mp=new Fe,Kr=new Fe,xa=new Fe,Ta=new Fe,Ab=new Fe,gp=new Fe,vp=new Fe,yp=new Fe;let rd=!1;class lr{constructor(e=new Fe,n=new Fe,i=new Fe){this.a=e,this.b=n,this.c=i}static getNormal(e,n,i,r){r.subVectors(i,n),rr.subVectors(e,n),r.cross(rr);const a=r.lengthSq();return a>0?r.multiplyScalar(1/Math.sqrt(a)):r.set(0,0,0)}static getBarycoord(e,n,i,r,a){rr.subVectors(r,n),Xr.subVectors(i,n),mp.subVectors(e,n);const d=rr.dot(rr),s=rr.dot(Xr),o=rr.dot(mp),c=Xr.dot(Xr),h=Xr.dot(mp),l=d*c-s*s;if(l===0)return a.set(-2,-1,-1);const u=1/l,f=(c*o-s*h)*u,m=(d*h-s*o)*u;return a.set(1-f-m,m,f)}static containsPoint(e,n,i,r){return this.getBarycoord(e,n,i,r,Kr),Kr.x>=0&&Kr.y>=0&&Kr.x+Kr.y<=1}static getUV(e,n,i,r,a,d,s,o){return rd===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),rd=!0),this.getInterpolation(e,n,i,r,a,d,s,o)}static getInterpolation(e,n,i,r,a,d,s,o){return this.getBarycoord(e,n,i,r,Kr),o.setScalar(0),o.addScaledVector(a,Kr.x),o.addScaledVector(d,Kr.y),o.addScaledVector(s,Kr.z),o}static isFrontFacing(e,n,i,r){return rr.subVectors(i,n),Xr.subVectors(e,n),rr.cross(Xr).dot(r)<0}set(e,n,i){return this.a.copy(e),this.b.copy(n),this.c.copy(i),this}setFromPointsAndIndices(e,n,i,r){return this.a.copy(e[n]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,n,i,r){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return rr.subVectors(this.c,this.b),Xr.subVectors(this.a,this.b),rr.cross(Xr).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return lr.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return lr.getBarycoord(e,this.a,this.b,this.c,n)}getUV(e,n,i,r,a){return rd===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),rd=!0),lr.getInterpolation(e,this.a,this.b,this.c,n,i,r,a)}getInterpolation(e,n,i,r,a){return lr.getInterpolation(e,this.a,this.b,this.c,n,i,r,a)}containsPoint(e){return lr.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return lr.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const i=this.a,r=this.b,a=this.c;let d,s;xa.subVectors(r,i),Ta.subVectors(a,i),gp.subVectors(e,i);const o=xa.dot(gp),c=Ta.dot(gp);if(o<=0&&c<=0)return n.copy(i);vp.subVectors(e,r);const h=xa.dot(vp),l=Ta.dot(vp);if(h>=0&&l<=h)return n.copy(r);const u=o*l-h*c;if(u<=0&&o>=0&&h<=0)return d=o/(o-h),n.copy(i).addScaledVector(xa,d);yp.subVectors(e,a);const f=xa.dot(yp),m=Ta.dot(yp);if(m>=0&&f<=m)return n.copy(a);const g=f*c-o*m;if(g<=0&&c>=0&&m<=0)return s=c/(c-m),n.copy(i).addScaledVector(Ta,s);const p=h*m-f*l;if(p<=0&&l-h>=0&&f-m>=0)return Ab.subVectors(a,r),s=(l-h)/(l-h+(f-m)),n.copy(r).addScaledVector(Ab,s);const v=1/(p+g+u);return d=g*v,s=u*v,n.copy(i).addScaledVector(xa,d).addScaledVector(Ta,s)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let gO=0;class mr extends la{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:gO++}),this.uuid=pr(),this.name="",this.type="Material",this.blending=Qa,this.side=hs,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=I1,this.blendDst=D1,this.blendEquation=Ua,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=bm,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=VP,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=sp,this.stencilZFail=sp,this.stencilZPass=sp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const i=e[n];if(i===void 0){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const r=this[n];if(r===void 0){console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[n]=i}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Qa&&(i.blending=this.blending),this.side!==hs&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(i.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(i.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=this.flatShading),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(a){const d=[];for(const s in a){const o=a[s];delete o.metadata,d.push(o)}return d}if(n){const a=r(e.textures),d=r(e.images);a.length>0&&(i.textures=a),d.length>0&&(i.images=d)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let i=null;if(n!==null){const r=n.length;i=new Array(r);for(let a=0;a!==r;++a)i[a]=n[a].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}const Y1={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},sr={h:0,s:0,l:0},sd={h:0,s:0,l:0};function bp(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}let Nt=class{constructor(e,n,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,n===void 0&&i===void 0?this.set(e):this.setRGB(e,n,i)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=Ot){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,nr.toWorkingColorSpace(this,n),this}setRGB(e,n,i,r=nr.workingColorSpace){return this.r=e,this.g=n,this.b=i,nr.toWorkingColorSpace(this,r),this}setHSL(e,n,i,r=nr.workingColorSpace){if(e=cv(e,1),n=Hn(n,0,1),i=Hn(i,0,1),n===0)this.r=this.g=this.b=i;else{const a=i<=.5?i*(1+n):i+n-i*n,d=2*i-a;this.r=bp(d,a,e+1/3),this.g=bp(d,a,e),this.b=bp(d,a,e-1/3)}return nr.toWorkingColorSpace(this,r),this}setStyle(e,n=Ot){function i(a){a!==void 0&&parseFloat(a)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let a;const d=r[1],s=r[2];switch(d){case"rgb":case"rgba":if(a=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return i(a[4]),this.setRGB(Math.min(255,parseInt(a[1],10))/255,Math.min(255,parseInt(a[2],10))/255,Math.min(255,parseInt(a[3],10))/255,n);if(a=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return i(a[4]),this.setRGB(Math.min(100,parseInt(a[1],10))/100,Math.min(100,parseInt(a[2],10))/100,Math.min(100,parseInt(a[3],10))/100,n);break;case"hsl":case"hsla":if(a=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return i(a[4]),this.setHSL(parseFloat(a[1])/360,parseFloat(a[2])/100,parseFloat(a[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const a=r[1],d=a.length;if(d===3)return this.setRGB(parseInt(a.charAt(0),16)/15,parseInt(a.charAt(1),16)/15,parseInt(a.charAt(2),16)/15,n);if(d===6)return this.setHex(parseInt(a,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=Ot){const i=Y1[e.toLowerCase()];return i!==void 0?this.setHex(i,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=tl(e.r),this.g=tl(e.g),this.b=tl(e.b),this}copyLinearToSRGB(e){return this.r=ap(e.r),this.g=ap(e.g),this.b=ap(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Ot){return nr.fromWorkingColorSpace(Yn.copy(this),e),Math.round(Hn(Yn.r*255,0,255))*65536+Math.round(Hn(Yn.g*255,0,255))*256+Math.round(Hn(Yn.b*255,0,255))}getHexString(e=Ot){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=nr.workingColorSpace){nr.fromWorkingColorSpace(Yn.copy(this),n);const i=Yn.r,r=Yn.g,a=Yn.b,d=Math.max(i,r,a),s=Math.min(i,r,a);let o,c;const h=(s+d)/2;if(s===d)o=0,c=0;else{const l=d-s;switch(c=h<=.5?l/(d+s):l/(2-d-s),d){case i:o=(r-a)/l+(r<a?6:0);break;case r:o=(a-i)/l+2;break;case a:o=(i-r)/l+4;break}o/=6}return e.h=o,e.s=c,e.l=h,e}getRGB(e,n=nr.workingColorSpace){return nr.fromWorkingColorSpace(Yn.copy(this),n),e.r=Yn.r,e.g=Yn.g,e.b=Yn.b,e}getStyle(e=Ot){nr.fromWorkingColorSpace(Yn.copy(this),e);const n=Yn.r,i=Yn.g,r=Yn.b;return e!==Ot?`color(${e} ${n.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,n,i){return this.getHSL(sr),sr.h+=e,sr.s+=n,sr.l+=i,this.setHSL(sr.h,sr.s,sr.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,i){return this.r=e.r+(n.r-e.r)*i,this.g=e.g+(n.g-e.g)*i,this.b=e.b+(n.b-e.b)*i,this}lerpHSL(e,n){this.getHSL(sr),e.getHSL(sd);const i=Rc(sr.h,sd.h,n),r=Rc(sr.s,sd.s,n),a=Rc(sr.l,sd.l,n);return this.setHSL(i,r,a),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,i=this.g,r=this.b,a=e.elements;return this.r=a[0]*n+a[3]*i+a[6]*r,this.g=a[1]*n+a[4]*i+a[7]*r,this.b=a[2]*n+a[5]*i+a[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const Yn=new Nt;Nt.NAMES=Y1;class Do extends mr{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Nt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=av,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const An=new Fe,od=new It;class ci{constructor(e,n,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=i,this.usage=xm,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,n,i){e*=this.itemSize,i*=n.itemSize;for(let r=0,a=this.itemSize;r<a;r++)this.array[e+r]=n.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,i=this.count;n<i;n++)od.fromBufferAttribute(this,n),od.applyMatrix3(e),this.setXY(n,od.x,od.y);else if(this.itemSize===3)for(let n=0,i=this.count;n<i;n++)An.fromBufferAttribute(this,n),An.applyMatrix3(e),this.setXYZ(n,An.x,An.y,An.z);return this}applyMatrix4(e){for(let n=0,i=this.count;n<i;n++)An.fromBufferAttribute(this,n),An.applyMatrix4(e),this.setXYZ(n,An.x,An.y,An.z);return this}applyNormalMatrix(e){for(let n=0,i=this.count;n<i;n++)An.fromBufferAttribute(this,n),An.applyNormalMatrix(e),this.setXYZ(n,An.x,An.y,An.z);return this}transformDirection(e){for(let n=0,i=this.count;n<i;n++)An.fromBufferAttribute(this,n),An.transformDirection(e),this.setXYZ(n,An.x,An.y,An.z);return this}set(e,n=0){return this.array.set(e,n),this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=is(n,this.array)),n}setX(e,n){return this.normalized&&(n=dn(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=is(n,this.array)),n}setY(e,n){return this.normalized&&(n=dn(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=is(n,this.array)),n}setZ(e,n){return this.normalized&&(n=dn(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=is(n,this.array)),n}setW(e,n){return this.normalized&&(n=dn(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,i){return e*=this.itemSize,this.normalized&&(n=dn(n,this.array),i=dn(i,this.array)),this.array[e+0]=n,this.array[e+1]=i,this}setXYZ(e,n,i,r){return e*=this.itemSize,this.normalized&&(n=dn(n,this.array),i=dn(i,this.array),r=dn(r,this.array)),this.array[e+0]=n,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,n,i,r,a){return e*=this.itemSize,this.normalized&&(n=dn(n,this.array),i=dn(i,this.array),r=dn(r,this.array),a=dn(a,this.array)),this.array[e+0]=n,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=a,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==xm&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class q1 extends ci{constructor(e,n,i){super(new Uint16Array(e),n,i)}}class Z1 extends ci{constructor(e,n,i){super(new Uint32Array(e),n,i)}}class cs extends ci{constructor(e,n,i){super(new Float32Array(e),n,i)}}let vO=0;const Bi=new Gt,_p=new yn,Ea=new Fe,Ri=new ys,rc=new ys,Nn=new Fe;class Br extends la{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:vO++}),this.uuid=pr(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(W1(e)?Z1:q1)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,i=0){this.groups.push({start:e,count:n,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const a=new Kt().getNormalMatrix(e);i.applyNormalMatrix(a),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Bi.makeRotationFromQuaternion(e),this.applyMatrix4(Bi),this}rotateX(e){return Bi.makeRotationX(e),this.applyMatrix4(Bi),this}rotateY(e){return Bi.makeRotationY(e),this.applyMatrix4(Bi),this}rotateZ(e){return Bi.makeRotationZ(e),this.applyMatrix4(Bi),this}translate(e,n,i){return Bi.makeTranslation(e,n,i),this.applyMatrix4(Bi),this}scale(e,n,i){return Bi.makeScale(e,n,i),this.applyMatrix4(Bi),this}lookAt(e){return _p.lookAt(e),_p.updateMatrix(),this.applyMatrix4(_p.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ea).negate(),this.translate(Ea.x,Ea.y,Ea.z),this}setFromPoints(e){const n=[];for(let i=0,r=e.length;i<r;i++){const a=e[i];n.push(a.x,a.y,a.z||0)}return this.setAttribute("position",new cs(n,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ys);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new Fe(-1/0,-1/0,-1/0),new Fe(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let i=0,r=n.length;i<r;i++){const a=n[i];Ri.setFromBufferAttribute(a),this.morphTargetsRelative?(Nn.addVectors(this.boundingBox.min,Ri.min),this.boundingBox.expandByPoint(Nn),Nn.addVectors(this.boundingBox.max,Ri.max),this.boundingBox.expandByPoint(Nn)):(this.boundingBox.expandByPoint(Ri.min),this.boundingBox.expandByPoint(Ri.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new bs);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new Fe,1/0);return}if(e){const i=this.boundingSphere.center;if(Ri.setFromBufferAttribute(e),n)for(let a=0,d=n.length;a<d;a++){const s=n[a];rc.setFromBufferAttribute(s),this.morphTargetsRelative?(Nn.addVectors(Ri.min,rc.min),Ri.expandByPoint(Nn),Nn.addVectors(Ri.max,rc.max),Ri.expandByPoint(Nn)):(Ri.expandByPoint(rc.min),Ri.expandByPoint(rc.max))}Ri.getCenter(i);let r=0;for(let a=0,d=e.count;a<d;a++)Nn.fromBufferAttribute(e,a),r=Math.max(r,i.distanceToSquared(Nn));if(n)for(let a=0,d=n.length;a<d;a++){const s=n[a],o=this.morphTargetsRelative;for(let c=0,h=s.count;c<h;c++)Nn.fromBufferAttribute(s,c),o&&(Ea.fromBufferAttribute(e,c),Nn.add(Ea)),r=Math.max(r,i.distanceToSquared(Nn))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=e.array,r=n.position.array,a=n.normal.array,d=n.uv.array,s=r.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new ci(new Float32Array(4*s),4));const o=this.getAttribute("tangent").array,c=[],h=[];for(let A=0;A<s;A++)c[A]=new Fe,h[A]=new Fe;const l=new Fe,u=new Fe,f=new Fe,m=new It,g=new It,p=new It,v=new Fe,b=new Fe;function _(A,O,D){l.fromArray(r,A*3),u.fromArray(r,O*3),f.fromArray(r,D*3),m.fromArray(d,A*2),g.fromArray(d,O*2),p.fromArray(d,D*2),u.sub(l),f.sub(l),g.sub(m),p.sub(m);const L=1/(g.x*p.y-p.x*g.y);isFinite(L)&&(v.copy(u).multiplyScalar(p.y).addScaledVector(f,-g.y).multiplyScalar(L),b.copy(f).multiplyScalar(g.x).addScaledVector(u,-p.x).multiplyScalar(L),c[A].add(v),c[O].add(v),c[D].add(v),h[A].add(b),h[O].add(b),h[D].add(b))}let S=this.groups;S.length===0&&(S=[{start:0,count:i.length}]);for(let A=0,O=S.length;A<O;++A){const D=S[A],L=D.start,U=D.count;for(let j=L,V=L+U;j<V;j+=3)_(i[j+0],i[j+1],i[j+2])}const w=new Fe,C=new Fe,x=new Fe,M=new Fe;function E(A){x.fromArray(a,A*3),M.copy(x);const O=c[A];w.copy(O),w.sub(x.multiplyScalar(x.dot(O))).normalize(),C.crossVectors(M,O);const L=C.dot(h[A])<0?-1:1;o[A*4]=w.x,o[A*4+1]=w.y,o[A*4+2]=w.z,o[A*4+3]=L}for(let A=0,O=S.length;A<O;++A){const D=S[A],L=D.start,U=D.count;for(let j=L,V=L+U;j<V;j+=3)E(i[j+0]),E(i[j+1]),E(i[j+2])}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new ci(new Float32Array(n.count*3),3),this.setAttribute("normal",i);else for(let u=0,f=i.count;u<f;u++)i.setXYZ(u,0,0,0);const r=new Fe,a=new Fe,d=new Fe,s=new Fe,o=new Fe,c=new Fe,h=new Fe,l=new Fe;if(e)for(let u=0,f=e.count;u<f;u+=3){const m=e.getX(u+0),g=e.getX(u+1),p=e.getX(u+2);r.fromBufferAttribute(n,m),a.fromBufferAttribute(n,g),d.fromBufferAttribute(n,p),h.subVectors(d,a),l.subVectors(r,a),h.cross(l),s.fromBufferAttribute(i,m),o.fromBufferAttribute(i,g),c.fromBufferAttribute(i,p),s.add(h),o.add(h),c.add(h),i.setXYZ(m,s.x,s.y,s.z),i.setXYZ(g,o.x,o.y,o.z),i.setXYZ(p,c.x,c.y,c.z)}else for(let u=0,f=n.count;u<f;u+=3)r.fromBufferAttribute(n,u+0),a.fromBufferAttribute(n,u+1),d.fromBufferAttribute(n,u+2),h.subVectors(d,a),l.subVectors(r,a),h.cross(l),i.setXYZ(u+0,h.x,h.y,h.z),i.setXYZ(u+1,h.x,h.y,h.z),i.setXYZ(u+2,h.x,h.y,h.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let n=0,i=e.count;n<i;n++)Nn.fromBufferAttribute(e,n),Nn.normalize(),e.setXYZ(n,Nn.x,Nn.y,Nn.z)}toNonIndexed(){function e(s,o){const c=s.array,h=s.itemSize,l=s.normalized,u=new c.constructor(o.length*h);let f=0,m=0;for(let g=0,p=o.length;g<p;g++){s.isInterleavedBufferAttribute?f=o[g]*s.data.stride+s.offset:f=o[g]*h;for(let v=0;v<h;v++)u[m++]=c[f++]}return new ci(u,h,l)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new Br,i=this.index.array,r=this.attributes;for(const s in r){const o=r[s],c=e(o,i);n.setAttribute(s,c)}const a=this.morphAttributes;for(const s in a){const o=[],c=a[s];for(let h=0,l=c.length;h<l;h++){const u=c[h],f=e(u,i);o.push(f)}n.morphAttributes[s]=o}n.morphTargetsRelative=this.morphTargetsRelative;const d=this.groups;for(let s=0,o=d.length;s<o;s++){const c=d[s];n.addGroup(c.start,c.count,c.materialIndex)}return n}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const o=this.parameters;for(const c in o)o[c]!==void 0&&(e[c]=o[c]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const i=this.attributes;for(const o in i){const c=i[o];e.data.attributes[o]=c.toJSON(e.data)}const r={};let a=!1;for(const o in this.morphAttributes){const c=this.morphAttributes[o],h=[];for(let l=0,u=c.length;l<u;l++){const f=c[l];h.push(f.toJSON(e.data))}h.length>0&&(r[o]=h,a=!0)}a&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const d=this.groups;d.length>0&&(e.data.groups=JSON.parse(JSON.stringify(d)));const s=this.boundingSphere;return s!==null&&(e.data.boundingSphere={center:s.center.toArray(),radius:s.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(n));const r=e.attributes;for(const c in r){const h=r[c];this.setAttribute(c,h.clone(n))}const a=e.morphAttributes;for(const c in a){const h=[],l=a[c];for(let u=0,f=l.length;u<f;u++)h.push(l[u].clone(n));this.morphAttributes[c]=h}this.morphTargetsRelative=e.morphTargetsRelative;const d=e.groups;for(let c=0,h=d.length;c<h;c++){const l=d[c];this.addGroup(l.start,l.count,l.materialIndex)}const s=e.boundingBox;s!==null&&(this.boundingBox=s.clone());const o=e.boundingSphere;return o!==null&&(this.boundingSphere=o.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const kb=new Gt,Cr=new uv,ad=new bs,Rb=new Fe,Ma=new Fe,Aa=new Fe,ka=new Fe,Sp=new Fe,ld=new Fe,cd=new It,ud=new It,dd=new It,Pb=new Fe,Ob=new Fe,Lb=new Fe,fd=new Fe,hd=new Fe;class _i extends yn{constructor(e=new Br,n=new Do){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const r=n[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,d=r.length;a<d;a++){const s=r[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=a}}}}getVertexPosition(e,n){const i=this.geometry,r=i.attributes.position,a=i.morphAttributes.position,d=i.morphTargetsRelative;n.fromBufferAttribute(r,e);const s=this.morphTargetInfluences;if(a&&s){ld.set(0,0,0);for(let o=0,c=a.length;o<c;o++){const h=s[o],l=a[o];h!==0&&(Sp.fromBufferAttribute(l,e),d?ld.addScaledVector(Sp,h):ld.addScaledVector(Sp.sub(n),h))}n.add(ld)}return n}raycast(e,n){const i=this.geometry,r=this.material,a=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),ad.copy(i.boundingSphere),ad.applyMatrix4(a),Cr.copy(e.ray).recast(e.near),!(ad.containsPoint(Cr.origin)===!1&&(Cr.intersectSphere(ad,Rb)===null||Cr.origin.distanceToSquared(Rb)>(e.far-e.near)**2))&&(kb.copy(a).invert(),Cr.copy(e.ray).applyMatrix4(kb),!(i.boundingBox!==null&&Cr.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,n)))}_computeIntersections(e,n){let i;const r=this.geometry,a=this.material,d=r.index,s=r.attributes.position,o=r.attributes.uv,c=r.attributes.uv1,h=r.attributes.normal,l=r.groups,u=r.drawRange;if(d!==null)if(Array.isArray(a))for(let f=0,m=l.length;f<m;f++){const g=l[f],p=a[g.materialIndex],v=Math.max(g.start,u.start),b=Math.min(d.count,Math.min(g.start+g.count,u.start+u.count));for(let _=v,S=b;_<S;_+=3){const w=d.getX(_),C=d.getX(_+1),x=d.getX(_+2);i=pd(this,p,e,Cr,o,c,h,w,C,x),i&&(i.faceIndex=Math.floor(_/3),i.face.materialIndex=g.materialIndex,n.push(i))}}else{const f=Math.max(0,u.start),m=Math.min(d.count,u.start+u.count);for(let g=f,p=m;g<p;g+=3){const v=d.getX(g),b=d.getX(g+1),_=d.getX(g+2);i=pd(this,a,e,Cr,o,c,h,v,b,_),i&&(i.faceIndex=Math.floor(g/3),n.push(i))}}else if(s!==void 0)if(Array.isArray(a))for(let f=0,m=l.length;f<m;f++){const g=l[f],p=a[g.materialIndex],v=Math.max(g.start,u.start),b=Math.min(s.count,Math.min(g.start+g.count,u.start+u.count));for(let _=v,S=b;_<S;_+=3){const w=_,C=_+1,x=_+2;i=pd(this,p,e,Cr,o,c,h,w,C,x),i&&(i.faceIndex=Math.floor(_/3),i.face.materialIndex=g.materialIndex,n.push(i))}}else{const f=Math.max(0,u.start),m=Math.min(s.count,u.start+u.count);for(let g=f,p=m;g<p;g+=3){const v=g,b=g+1,_=g+2;i=pd(this,a,e,Cr,o,c,h,v,b,_),i&&(i.faceIndex=Math.floor(g/3),n.push(i))}}}}function yO(t,e,n,i,r,a,d,s){let o;if(e.side===Si?o=i.intersectTriangle(d,a,r,!0,s):o=i.intersectTriangle(r,a,d,e.side===hs,s),o===null)return null;hd.copy(s),hd.applyMatrix4(t.matrixWorld);const c=n.ray.origin.distanceTo(hd);return c<n.near||c>n.far?null:{distance:c,point:hd.clone(),object:t}}function pd(t,e,n,i,r,a,d,s,o,c){t.getVertexPosition(s,Ma),t.getVertexPosition(o,Aa),t.getVertexPosition(c,ka);const h=yO(t,e,n,i,Ma,Aa,ka,fd);if(h){r&&(cd.fromBufferAttribute(r,s),ud.fromBufferAttribute(r,o),dd.fromBufferAttribute(r,c),h.uv=lr.getInterpolation(fd,Ma,Aa,ka,cd,ud,dd,new It)),a&&(cd.fromBufferAttribute(a,s),ud.fromBufferAttribute(a,o),dd.fromBufferAttribute(a,c),h.uv1=lr.getInterpolation(fd,Ma,Aa,ka,cd,ud,dd,new It),h.uv2=h.uv1),d&&(Pb.fromBufferAttribute(d,s),Ob.fromBufferAttribute(d,o),Lb.fromBufferAttribute(d,c),h.normal=lr.getInterpolation(fd,Ma,Aa,ka,Pb,Ob,Lb,new Fe),h.normal.dot(i.direction)>0&&h.normal.multiplyScalar(-1));const l={a:s,b:o,c,normal:new Fe,materialIndex:0};lr.getNormal(Ma,Aa,ka,l.normal),h.face=l}return h}class Mu extends Br{constructor(e=1,n=1,i=1,r=1,a=1,d=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:i,widthSegments:r,heightSegments:a,depthSegments:d};const s=this;r=Math.floor(r),a=Math.floor(a),d=Math.floor(d);const o=[],c=[],h=[],l=[];let u=0,f=0;m("z","y","x",-1,-1,i,n,e,d,a,0),m("z","y","x",1,-1,i,n,-e,d,a,1),m("x","z","y",1,1,e,i,n,r,d,2),m("x","z","y",1,-1,e,i,-n,r,d,3),m("x","y","z",1,-1,e,n,i,r,a,4),m("x","y","z",-1,-1,e,n,-i,r,a,5),this.setIndex(o),this.setAttribute("position",new cs(c,3)),this.setAttribute("normal",new cs(h,3)),this.setAttribute("uv",new cs(l,2));function m(g,p,v,b,_,S,w,C,x,M,E){const A=S/x,O=w/M,D=S/2,L=w/2,U=C/2,j=x+1,V=M+1;let k=0,F=0;const T=new Fe;for(let P=0;P<V;P++){const H=P*O-L;for(let N=0;N<j;N++){const G=N*A-D;T[g]=G*b,T[p]=H*_,T[v]=U,c.push(T.x,T.y,T.z),T[g]=0,T[p]=0,T[v]=C>0?1:-1,h.push(T.x,T.y,T.z),l.push(N/x),l.push(1-P/M),k+=1}}for(let P=0;P<M;P++)for(let H=0;H<x;H++){const N=u+H+j*P,G=u+H+j*(P+1),$=u+(H+1)+j*(P+1),z=u+(H+1)+j*P;o.push(N,G,z),o.push(G,$,z),F+=6}s.addGroup(f,F,E),f+=F,u+=k}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Mu(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function wl(t){const e={};for(const n in t){e[n]={};for(const i in t[n]){const r=t[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][i]=null):e[n][i]=r.clone():Array.isArray(r)?e[n][i]=r.slice():e[n][i]=r}}return e}function oi(t){const e={};for(let n=0;n<t.length;n++){const i=wl(t[n]);for(const r in i)e[r]=i[r]}return e}function bO(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function J1(t){return t.getRenderTarget()===null?t.outputColorSpace:Pr}const _O={clone:wl,merge:oi};var SO=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,wO=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ea extends mr{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=SO,this.fragmentShader=wO,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=wl(e.uniforms),this.uniformsGroups=bO(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const r in this.uniforms){const d=this.uniforms[r].value;d&&d.isTexture?n.uniforms[r]={type:"t",value:d.toJSON(e).uuid}:d&&d.isColor?n.uniforms[r]={type:"c",value:d.getHex()}:d&&d.isVector2?n.uniforms[r]={type:"v2",value:d.toArray()}:d&&d.isVector3?n.uniforms[r]={type:"v3",value:d.toArray()}:d&&d.isVector4?n.uniforms[r]={type:"v4",value:d.toArray()}:d&&d.isMatrix3?n.uniforms[r]={type:"m3",value:d.toArray()}:d&&d.isMatrix4?n.uniforms[r]={type:"m4",value:d.toArray()}:n.uniforms[r]={value:d}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(n.extensions=i),n}}class Q1 extends yn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Gt,this.projectionMatrix=new Gt,this.projectionMatrixInverse=new Gt}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(-n[8],-n[9],-n[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class ai extends Q1{constructor(e=50,n=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=Sl*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(kc*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Sl*2*Math.atan(Math.tan(kc*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,n,i,r,a,d){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=i,this.view.offsetY=r,this.view.width=a,this.view.height=d,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(kc*.5*this.fov)/this.zoom,i=2*n,r=this.aspect*i,a=-.5*r;const d=this.view;if(this.view!==null&&this.view.enabled){const o=d.fullWidth,c=d.fullHeight;a+=d.offsetX*r/o,n-=d.offsetY*i/c,r*=d.width/o,i*=d.height/c}const s=this.filmOffset;s!==0&&(a+=e*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+r,n,n-i,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const Ra=-90,Pa=1;class CO extends yn{constructor(e,n,i){super(),this.type="CubeCamera",this.renderTarget=i;const r=new ai(Ra,Pa,e,n);r.layers=this.layers,r.up.set(0,1,0),r.lookAt(1,0,0),this.add(r);const a=new ai(Ra,Pa,e,n);a.layers=this.layers,a.up.set(0,1,0),a.lookAt(-1,0,0),this.add(a);const d=new ai(Ra,Pa,e,n);d.layers=this.layers,d.up.set(0,0,-1),d.lookAt(0,1,0),this.add(d);const s=new ai(Ra,Pa,e,n);s.layers=this.layers,s.up.set(0,0,1),s.lookAt(0,-1,0),this.add(s);const o=new ai(Ra,Pa,e,n);o.layers=this.layers,o.up.set(0,1,0),o.lookAt(0,0,1),this.add(o);const c=new ai(Ra,Pa,e,n);c.layers=this.layers,c.up.set(0,1,0),c.lookAt(0,0,-1),this.add(c)}update(e,n){this.parent===null&&this.updateMatrixWorld();const i=this.renderTarget,[r,a,d,s,o,c]=this.children,h=e.getRenderTarget(),l=e.toneMapping,u=e.xr.enabled;e.toneMapping=as,e.xr.enabled=!1;const f=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(n,r),e.setRenderTarget(i,1),e.render(n,a),e.setRenderTarget(i,2),e.render(n,d),e.setRenderTarget(i,3),e.render(n,s),e.setRenderTarget(i,4),e.render(n,o),i.texture.generateMipmaps=f,e.setRenderTarget(i,5),e.render(n,c),e.setRenderTarget(h),e.toneMapping=l,e.xr.enabled=u,i.texture.needsPMREMUpdate=!0}}class dv extends Wn{constructor(e,n,i,r,a,d,s,o,c,h){e=e!==void 0?e:[],n=n!==void 0?n:ml,super(e,n,i,r,a,d,s,o,c,h),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class xO extends Qo{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];n.encoding!==void 0&&(Pc("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===ls?Ot:jo),this.texture=new dv(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:qn}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Mu(5,5,5),a=new ea({name:"CubemapFromEquirect",uniforms:wl(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Si,blending:Ys});a.uniforms.tEquirect.value=n;const d=new _i(r,a),s=n.minFilter;return n.minFilter===Zo&&(n.minFilter=qn),new CO(1,10,this).update(e,d),n.minFilter=s,d.geometry.dispose(),d.material.dispose(),this}clear(e,n,i,r){const a=e.getRenderTarget();for(let d=0;d<6;d++)e.setRenderTarget(this,d),e.clear(n,i,r);e.setRenderTarget(a)}}const wp=new Fe,TO=new Fe,EO=new Kt;class To{constructor(e=new Fe(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,i,r){return this.normal.set(e,n,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,i){const r=wp.subVectors(i,n).cross(TO.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const i=e.delta(wp),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const a=-(e.start.dot(this.normal)+this.constant)/r;return a<0||a>1?null:n.copy(e.start).addScaledVector(i,a)}intersectsLine(e){const n=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return n<0&&i>0||i<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const i=n||EO.getNormalMatrix(e),r=this.coplanarPoint(wp).applyMatrix4(e),a=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(a),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const wo=new bs,md=new Fe;class fv{constructor(e=new To,n=new To,i=new To,r=new To,a=new To,d=new To){this.planes=[e,n,i,r,a,d]}set(e,n,i,r,a,d){const s=this.planes;return s[0].copy(e),s[1].copy(n),s[2].copy(i),s[3].copy(r),s[4].copy(a),s[5].copy(d),this}copy(e){const n=this.planes;for(let i=0;i<6;i++)n[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){const n=this.planes,i=e.elements,r=i[0],a=i[1],d=i[2],s=i[3],o=i[4],c=i[5],h=i[6],l=i[7],u=i[8],f=i[9],m=i[10],g=i[11],p=i[12],v=i[13],b=i[14],_=i[15];return n[0].setComponents(s-r,l-o,g-u,_-p).normalize(),n[1].setComponents(s+r,l+o,g+u,_+p).normalize(),n[2].setComponents(s+a,l+c,g+f,_+v).normalize(),n[3].setComponents(s-a,l-c,g-f,_-v).normalize(),n[4].setComponents(s-d,l-h,g-m,_-b).normalize(),n[5].setComponents(s+d,l+h,g+m,_+b).normalize(),this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),wo.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),wo.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(wo)}intersectsSprite(e){return wo.center.set(0,0,0),wo.radius=.7071067811865476,wo.applyMatrix4(e.matrixWorld),this.intersectsSphere(wo)}intersectsSphere(e){const n=this.planes,i=e.center,r=-e.radius;for(let a=0;a<6;a++)if(n[a].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const n=this.planes;for(let i=0;i<6;i++){const r=n[i];if(md.x=r.normal.x>0?e.max.x:e.min.x,md.y=r.normal.y>0?e.max.y:e.min.y,md.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(md)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let i=0;i<6;i++)if(n[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function ex(){let t=null,e=!1,n=null,i=null;function r(a,d){n(a,d),i=t.requestAnimationFrame(r)}return{start:function(){e!==!0&&n!==null&&(i=t.requestAnimationFrame(r),e=!0)},stop:function(){t.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(a){n=a},setContext:function(a){t=a}}}function MO(t,e){const n=e.isWebGL2,i=new WeakMap;function r(c,h){const l=c.array,u=c.usage,f=t.createBuffer();t.bindBuffer(h,f),t.bufferData(h,l,u),c.onUploadCallback();let m;if(l instanceof Float32Array)m=t.FLOAT;else if(l instanceof Uint16Array)if(c.isFloat16BufferAttribute)if(n)m=t.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else m=t.UNSIGNED_SHORT;else if(l instanceof Int16Array)m=t.SHORT;else if(l instanceof Uint32Array)m=t.UNSIGNED_INT;else if(l instanceof Int32Array)m=t.INT;else if(l instanceof Int8Array)m=t.BYTE;else if(l instanceof Uint8Array)m=t.UNSIGNED_BYTE;else if(l instanceof Uint8ClampedArray)m=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+l);return{buffer:f,type:m,bytesPerElement:l.BYTES_PER_ELEMENT,version:c.version}}function a(c,h,l){const u=h.array,f=h.updateRange;t.bindBuffer(l,c),f.count===-1?t.bufferSubData(l,0,u):(n?t.bufferSubData(l,f.offset*u.BYTES_PER_ELEMENT,u,f.offset,f.count):t.bufferSubData(l,f.offset*u.BYTES_PER_ELEMENT,u.subarray(f.offset,f.offset+f.count)),f.count=-1),h.onUploadCallback()}function d(c){return c.isInterleavedBufferAttribute&&(c=c.data),i.get(c)}function s(c){c.isInterleavedBufferAttribute&&(c=c.data);const h=i.get(c);h&&(t.deleteBuffer(h.buffer),i.delete(c))}function o(c,h){if(c.isGLBufferAttribute){const u=i.get(c);(!u||u.version<c.version)&&i.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);const l=i.get(c);l===void 0?i.set(c,r(c,h)):l.version<c.version&&(a(l.buffer,c,h),l.version=c.version)}return{get:d,remove:s,update:o}}class hv extends Br{constructor(e=1,n=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:i,heightSegments:r};const a=e/2,d=n/2,s=Math.floor(i),o=Math.floor(r),c=s+1,h=o+1,l=e/s,u=n/o,f=[],m=[],g=[],p=[];for(let v=0;v<h;v++){const b=v*u-d;for(let _=0;_<c;_++){const S=_*l-a;m.push(S,-b,0),g.push(0,0,1),p.push(_/s),p.push(1-v/o)}}for(let v=0;v<o;v++)for(let b=0;b<s;b++){const _=b+c*v,S=b+c*(v+1),w=b+1+c*(v+1),C=b+1+c*v;f.push(_,S,C),f.push(S,w,C)}this.setIndex(f),this.setAttribute("position",new cs(m,3)),this.setAttribute("normal",new cs(g,3)),this.setAttribute("uv",new cs(p,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new hv(e.width,e.height,e.widthSegments,e.heightSegments)}}var AO=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,kO=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,RO=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,PO=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,OO=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,LO=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,IO="vec3 transformed = vec3( position );",DO=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,NO=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,FO=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,BO=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,UO=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,VO=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,HO=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,zO=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,$O=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,WO=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,GO=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,jO=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,XO=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,KO=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,YO=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,qO=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,ZO=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,JO=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,QO=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,eL="gl_FragColor = linearToOutputTexel( gl_FragColor );",tL=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,nL=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,iL=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,rL=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,sL=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,oL=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,aL=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,lL=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,cL=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,uL=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,dL=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,fL=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,hL=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,pL=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,mL=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,gL=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,vL=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,yL=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,bL=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,_L=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,SL=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,wL=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif`,CL=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,xL=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,TL=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,EL=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,ML=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,AL=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,kL=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,RL=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,PL=`#ifdef USE_MAP
	diffuseColor *= texture2D( map, vMapUv );
#endif`,OL=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,LL=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,IL=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,DL=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,NL=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,FL=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,BL=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,UL=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,VL=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,HL=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#ifdef USE_NORMALMAP_TANGENTSPACE
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal, vNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 geometryNormal = normal;`,zL=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,$L=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,WL=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,GL=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,jL=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,XL=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,KL=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,YL=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,qL=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,ZL=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,JL=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,QL=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,eI=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,tI=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,nI=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,iI=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,rI=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,sI=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,oI=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,aI=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,lI=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,cI=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,uI=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,dI=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,fI=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,hI=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,pI=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,mI=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,gI=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,vI=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,yI=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,bI=`#ifdef USE_UV
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,_I=`#ifdef USE_UV
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,SI=`#ifdef USE_UV
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,wI=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const CI=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,xI=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,TI=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,EI=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,MI=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,AI=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,kI=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,RI=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,PI=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,OI=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,LI=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,II=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,DI=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,NI=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,FI=`#include <common>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,BI=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,UI=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,VI=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,HI=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,zI=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,$I=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,WI=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,GI=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,jI=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,XI=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,KI=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,YI=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,qI=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ZI=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,JI=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,QI=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,eD=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,tD=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,nD=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Vt={alphamap_fragment:AO,alphamap_pars_fragment:kO,alphatest_fragment:RO,alphatest_pars_fragment:PO,aomap_fragment:OO,aomap_pars_fragment:LO,begin_vertex:IO,beginnormal_vertex:DO,bsdfs:NO,iridescence_fragment:FO,bumpmap_pars_fragment:BO,clipping_planes_fragment:UO,clipping_planes_pars_fragment:VO,clipping_planes_pars_vertex:HO,clipping_planes_vertex:zO,color_fragment:$O,color_pars_fragment:WO,color_pars_vertex:GO,color_vertex:jO,common:XO,cube_uv_reflection_fragment:KO,defaultnormal_vertex:YO,displacementmap_pars_vertex:qO,displacementmap_vertex:ZO,emissivemap_fragment:JO,emissivemap_pars_fragment:QO,encodings_fragment:eL,encodings_pars_fragment:tL,envmap_fragment:nL,envmap_common_pars_fragment:iL,envmap_pars_fragment:rL,envmap_pars_vertex:sL,envmap_physical_pars_fragment:vL,envmap_vertex:oL,fog_vertex:aL,fog_pars_vertex:lL,fog_fragment:cL,fog_pars_fragment:uL,gradientmap_pars_fragment:dL,lightmap_fragment:fL,lightmap_pars_fragment:hL,lights_lambert_fragment:pL,lights_lambert_pars_fragment:mL,lights_pars_begin:gL,lights_toon_fragment:yL,lights_toon_pars_fragment:bL,lights_phong_fragment:_L,lights_phong_pars_fragment:SL,lights_physical_fragment:wL,lights_physical_pars_fragment:CL,lights_fragment_begin:xL,lights_fragment_maps:TL,lights_fragment_end:EL,logdepthbuf_fragment:ML,logdepthbuf_pars_fragment:AL,logdepthbuf_pars_vertex:kL,logdepthbuf_vertex:RL,map_fragment:PL,map_pars_fragment:OL,map_particle_fragment:LL,map_particle_pars_fragment:IL,metalnessmap_fragment:DL,metalnessmap_pars_fragment:NL,morphcolor_vertex:FL,morphnormal_vertex:BL,morphtarget_pars_vertex:UL,morphtarget_vertex:VL,normal_fragment_begin:HL,normal_fragment_maps:zL,normal_pars_fragment:$L,normal_pars_vertex:WL,normal_vertex:GL,normalmap_pars_fragment:jL,clearcoat_normal_fragment_begin:XL,clearcoat_normal_fragment_maps:KL,clearcoat_pars_fragment:YL,iridescence_pars_fragment:qL,output_fragment:ZL,packing:JL,premultiplied_alpha_fragment:QL,project_vertex:eI,dithering_fragment:tI,dithering_pars_fragment:nI,roughnessmap_fragment:iI,roughnessmap_pars_fragment:rI,shadowmap_pars_fragment:sI,shadowmap_pars_vertex:oI,shadowmap_vertex:aI,shadowmask_pars_fragment:lI,skinbase_vertex:cI,skinning_pars_vertex:uI,skinning_vertex:dI,skinnormal_vertex:fI,specularmap_fragment:hI,specularmap_pars_fragment:pI,tonemapping_fragment:mI,tonemapping_pars_fragment:gI,transmission_fragment:vI,transmission_pars_fragment:yI,uv_pars_fragment:bI,uv_pars_vertex:_I,uv_vertex:SI,worldpos_vertex:wI,background_vert:CI,background_frag:xI,backgroundCube_vert:TI,backgroundCube_frag:EI,cube_vert:MI,cube_frag:AI,depth_vert:kI,depth_frag:RI,distanceRGBA_vert:PI,distanceRGBA_frag:OI,equirect_vert:LI,equirect_frag:II,linedashed_vert:DI,linedashed_frag:NI,meshbasic_vert:FI,meshbasic_frag:BI,meshlambert_vert:UI,meshlambert_frag:VI,meshmatcap_vert:HI,meshmatcap_frag:zI,meshnormal_vert:$I,meshnormal_frag:WI,meshphong_vert:GI,meshphong_frag:jI,meshphysical_vert:XI,meshphysical_frag:KI,meshtoon_vert:YI,meshtoon_frag:qI,points_vert:ZI,points_frag:JI,shadow_vert:QI,shadow_frag:eD,sprite_vert:tD,sprite_frag:nD},ut={common:{diffuse:{value:new Nt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Kt},alphaMap:{value:null},alphaMapTransform:{value:new Kt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Kt}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Kt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Kt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Kt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Kt},normalScale:{value:new It(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Kt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Kt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Kt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Kt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Nt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Nt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Kt}},sprite:{diffuse:{value:new Nt(16777215)},opacity:{value:1},center:{value:new It(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Kt},alphaMap:{value:null},alphaTest:{value:0}}},Tr={basic:{uniforms:oi([ut.common,ut.specularmap,ut.envmap,ut.aomap,ut.lightmap,ut.fog]),vertexShader:Vt.meshbasic_vert,fragmentShader:Vt.meshbasic_frag},lambert:{uniforms:oi([ut.common,ut.specularmap,ut.envmap,ut.aomap,ut.lightmap,ut.emissivemap,ut.bumpmap,ut.normalmap,ut.displacementmap,ut.fog,ut.lights,{emissive:{value:new Nt(0)}}]),vertexShader:Vt.meshlambert_vert,fragmentShader:Vt.meshlambert_frag},phong:{uniforms:oi([ut.common,ut.specularmap,ut.envmap,ut.aomap,ut.lightmap,ut.emissivemap,ut.bumpmap,ut.normalmap,ut.displacementmap,ut.fog,ut.lights,{emissive:{value:new Nt(0)},specular:{value:new Nt(1118481)},shininess:{value:30}}]),vertexShader:Vt.meshphong_vert,fragmentShader:Vt.meshphong_frag},standard:{uniforms:oi([ut.common,ut.envmap,ut.aomap,ut.lightmap,ut.emissivemap,ut.bumpmap,ut.normalmap,ut.displacementmap,ut.roughnessmap,ut.metalnessmap,ut.fog,ut.lights,{emissive:{value:new Nt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Vt.meshphysical_vert,fragmentShader:Vt.meshphysical_frag},toon:{uniforms:oi([ut.common,ut.aomap,ut.lightmap,ut.emissivemap,ut.bumpmap,ut.normalmap,ut.displacementmap,ut.gradientmap,ut.fog,ut.lights,{emissive:{value:new Nt(0)}}]),vertexShader:Vt.meshtoon_vert,fragmentShader:Vt.meshtoon_frag},matcap:{uniforms:oi([ut.common,ut.bumpmap,ut.normalmap,ut.displacementmap,ut.fog,{matcap:{value:null}}]),vertexShader:Vt.meshmatcap_vert,fragmentShader:Vt.meshmatcap_frag},points:{uniforms:oi([ut.points,ut.fog]),vertexShader:Vt.points_vert,fragmentShader:Vt.points_frag},dashed:{uniforms:oi([ut.common,ut.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Vt.linedashed_vert,fragmentShader:Vt.linedashed_frag},depth:{uniforms:oi([ut.common,ut.displacementmap]),vertexShader:Vt.depth_vert,fragmentShader:Vt.depth_frag},normal:{uniforms:oi([ut.common,ut.bumpmap,ut.normalmap,ut.displacementmap,{opacity:{value:1}}]),vertexShader:Vt.meshnormal_vert,fragmentShader:Vt.meshnormal_frag},sprite:{uniforms:oi([ut.sprite,ut.fog]),vertexShader:Vt.sprite_vert,fragmentShader:Vt.sprite_frag},background:{uniforms:{uvTransform:{value:new Kt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Vt.background_vert,fragmentShader:Vt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Vt.backgroundCube_vert,fragmentShader:Vt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Vt.cube_vert,fragmentShader:Vt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Vt.equirect_vert,fragmentShader:Vt.equirect_frag},distanceRGBA:{uniforms:oi([ut.common,ut.displacementmap,{referencePosition:{value:new Fe},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Vt.distanceRGBA_vert,fragmentShader:Vt.distanceRGBA_frag},shadow:{uniforms:oi([ut.lights,ut.fog,{color:{value:new Nt(0)},opacity:{value:1}}]),vertexShader:Vt.shadow_vert,fragmentShader:Vt.shadow_frag}};Tr.physical={uniforms:oi([Tr.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Kt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Kt},clearcoatNormalScale:{value:new It(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Kt},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Kt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Kt},sheen:{value:0},sheenColor:{value:new Nt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Kt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Kt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Kt},transmissionSamplerSize:{value:new It},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Kt},attenuationDistance:{value:0},attenuationColor:{value:new Nt(0)},specularColor:{value:new Nt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Kt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Kt}}]),vertexShader:Vt.meshphysical_vert,fragmentShader:Vt.meshphysical_frag};const gd={r:0,b:0,g:0};function iD(t,e,n,i,r,a,d){const s=new Nt(0);let o=a===!0?0:1,c,h,l=null,u=0,f=null;function m(p,v){let b=!1,_=v.isScene===!0?v.background:null;switch(_&&_.isTexture&&(_=(v.backgroundBlurriness>0?n:e).get(_)),_===null?g(s,o):_&&_.isColor&&(g(_,1),b=!0),t.xr.getEnvironmentBlendMode()){case"opaque":b=!0;break;case"additive":i.buffers.color.setClear(0,0,0,1,d),b=!0;break;case"alpha-blend":i.buffers.color.setClear(0,0,0,0,d),b=!0;break}(t.autoClear||b)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),_&&(_.isCubeTexture||_.mapping===lh)?(h===void 0&&(h=new _i(new Mu(1,1,1),new ea({name:"BackgroundCubeMaterial",uniforms:wl(Tr.backgroundCube.uniforms),vertexShader:Tr.backgroundCube.vertexShader,fragmentShader:Tr.backgroundCube.fragmentShader,side:Si,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(C,x,M){this.matrixWorld.copyPosition(M.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(h)),h.material.uniforms.envMap.value=_,h.material.uniforms.flipEnvMap.value=_.isCubeTexture&&_.isRenderTargetTexture===!1?-1:1,h.material.uniforms.backgroundBlurriness.value=v.backgroundBlurriness,h.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,h.material.toneMapped=_.colorSpace!==Ot,(l!==_||u!==_.version||f!==t.toneMapping)&&(h.material.needsUpdate=!0,l=_,u=_.version,f=t.toneMapping),h.layers.enableAll(),p.unshift(h,h.geometry,h.material,0,0,null)):_&&_.isTexture&&(c===void 0&&(c=new _i(new hv(2,2),new ea({name:"BackgroundMaterial",uniforms:wl(Tr.background.uniforms),vertexShader:Tr.background.vertexShader,fragmentShader:Tr.background.fragmentShader,side:hs,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=_,c.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,c.material.toneMapped=_.colorSpace!==Ot,_.matrixAutoUpdate===!0&&_.updateMatrix(),c.material.uniforms.uvTransform.value.copy(_.matrix),(l!==_||u!==_.version||f!==t.toneMapping)&&(c.material.needsUpdate=!0,l=_,u=_.version,f=t.toneMapping),c.layers.enableAll(),p.unshift(c,c.geometry,c.material,0,0,null))}function g(p,v){p.getRGB(gd,J1(t)),i.buffers.color.setClear(gd.r,gd.g,gd.b,v,d)}return{getClearColor:function(){return s},setClearColor:function(p,v=1){s.set(p),o=v,g(s,o)},getClearAlpha:function(){return o},setClearAlpha:function(p){o=p,g(s,o)},render:m}}function rD(t,e,n,i){const r=t.getParameter(t.MAX_VERTEX_ATTRIBS),a=i.isWebGL2?null:e.get("OES_vertex_array_object"),d=i.isWebGL2||a!==null,s={},o=p(null);let c=o,h=!1;function l(U,j,V,k,F){let T=!1;if(d){const P=g(k,V,j);c!==P&&(c=P,f(c.object)),T=v(U,k,V,F),T&&b(U,k,V,F)}else{const P=j.wireframe===!0;(c.geometry!==k.id||c.program!==V.id||c.wireframe!==P)&&(c.geometry=k.id,c.program=V.id,c.wireframe=P,T=!0)}F!==null&&n.update(F,t.ELEMENT_ARRAY_BUFFER),(T||h)&&(h=!1,M(U,j,V,k),F!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n.get(F).buffer))}function u(){return i.isWebGL2?t.createVertexArray():a.createVertexArrayOES()}function f(U){return i.isWebGL2?t.bindVertexArray(U):a.bindVertexArrayOES(U)}function m(U){return i.isWebGL2?t.deleteVertexArray(U):a.deleteVertexArrayOES(U)}function g(U,j,V){const k=V.wireframe===!0;let F=s[U.id];F===void 0&&(F={},s[U.id]=F);let T=F[j.id];T===void 0&&(T={},F[j.id]=T);let P=T[k];return P===void 0&&(P=p(u()),T[k]=P),P}function p(U){const j=[],V=[],k=[];for(let F=0;F<r;F++)j[F]=0,V[F]=0,k[F]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:j,enabledAttributes:V,attributeDivisors:k,object:U,attributes:{},index:null}}function v(U,j,V,k){const F=c.attributes,T=j.attributes;let P=0;const H=V.getAttributes();for(const N in H)if(H[N].location>=0){const $=F[N];let z=T[N];if(z===void 0&&(N==="instanceMatrix"&&U.instanceMatrix&&(z=U.instanceMatrix),N==="instanceColor"&&U.instanceColor&&(z=U.instanceColor)),$===void 0||$.attribute!==z||z&&$.data!==z.data)return!0;P++}return c.attributesNum!==P||c.index!==k}function b(U,j,V,k){const F={},T=j.attributes;let P=0;const H=V.getAttributes();for(const N in H)if(H[N].location>=0){let $=T[N];$===void 0&&(N==="instanceMatrix"&&U.instanceMatrix&&($=U.instanceMatrix),N==="instanceColor"&&U.instanceColor&&($=U.instanceColor));const z={};z.attribute=$,$&&$.data&&(z.data=$.data),F[N]=z,P++}c.attributes=F,c.attributesNum=P,c.index=k}function _(){const U=c.newAttributes;for(let j=0,V=U.length;j<V;j++)U[j]=0}function S(U){w(U,0)}function w(U,j){const V=c.newAttributes,k=c.enabledAttributes,F=c.attributeDivisors;V[U]=1,k[U]===0&&(t.enableVertexAttribArray(U),k[U]=1),F[U]!==j&&((i.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](U,j),F[U]=j)}function C(){const U=c.newAttributes,j=c.enabledAttributes;for(let V=0,k=j.length;V<k;V++)j[V]!==U[V]&&(t.disableVertexAttribArray(V),j[V]=0)}function x(U,j,V,k,F,T){i.isWebGL2===!0&&(V===t.INT||V===t.UNSIGNED_INT)?t.vertexAttribIPointer(U,j,V,F,T):t.vertexAttribPointer(U,j,V,k,F,T)}function M(U,j,V,k){if(i.isWebGL2===!1&&(U.isInstancedMesh||k.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;_();const F=k.attributes,T=V.getAttributes(),P=j.defaultAttributeValues;for(const H in T){const N=T[H];if(N.location>=0){let G=F[H];if(G===void 0&&(H==="instanceMatrix"&&U.instanceMatrix&&(G=U.instanceMatrix),H==="instanceColor"&&U.instanceColor&&(G=U.instanceColor)),G!==void 0){const $=G.normalized,z=G.itemSize,Z=n.get(G);if(Z===void 0)continue;const W=Z.buffer,te=Z.type,ie=Z.bytesPerElement;if(G.isInterleavedBufferAttribute){const re=G.data,_e=re.stride,Pe=G.offset;if(re.isInstancedInterleavedBuffer){for(let K=0;K<N.locationSize;K++)w(N.location+K,re.meshPerAttribute);U.isInstancedMesh!==!0&&k._maxInstanceCount===void 0&&(k._maxInstanceCount=re.meshPerAttribute*re.count)}else for(let K=0;K<N.locationSize;K++)S(N.location+K);t.bindBuffer(t.ARRAY_BUFFER,W);for(let K=0;K<N.locationSize;K++)x(N.location+K,z/N.locationSize,te,$,_e*ie,(Pe+z/N.locationSize*K)*ie)}else{if(G.isInstancedBufferAttribute){for(let re=0;re<N.locationSize;re++)w(N.location+re,G.meshPerAttribute);U.isInstancedMesh!==!0&&k._maxInstanceCount===void 0&&(k._maxInstanceCount=G.meshPerAttribute*G.count)}else for(let re=0;re<N.locationSize;re++)S(N.location+re);t.bindBuffer(t.ARRAY_BUFFER,W);for(let re=0;re<N.locationSize;re++)x(N.location+re,z/N.locationSize,te,$,z*ie,z/N.locationSize*re*ie)}}else if(P!==void 0){const $=P[H];if($!==void 0)switch($.length){case 2:t.vertexAttrib2fv(N.location,$);break;case 3:t.vertexAttrib3fv(N.location,$);break;case 4:t.vertexAttrib4fv(N.location,$);break;default:t.vertexAttrib1fv(N.location,$)}}}}C()}function E(){D();for(const U in s){const j=s[U];for(const V in j){const k=j[V];for(const F in k)m(k[F].object),delete k[F];delete j[V]}delete s[U]}}function A(U){if(s[U.id]===void 0)return;const j=s[U.id];for(const V in j){const k=j[V];for(const F in k)m(k[F].object),delete k[F];delete j[V]}delete s[U.id]}function O(U){for(const j in s){const V=s[j];if(V[U.id]===void 0)continue;const k=V[U.id];for(const F in k)m(k[F].object),delete k[F];delete V[U.id]}}function D(){L(),h=!0,c!==o&&(c=o,f(c.object))}function L(){o.geometry=null,o.program=null,o.wireframe=!1}return{setup:l,reset:D,resetDefaultState:L,dispose:E,releaseStatesOfGeometry:A,releaseStatesOfProgram:O,initAttributes:_,enableAttribute:S,disableUnusedAttributes:C}}function sD(t,e,n,i){const r=i.isWebGL2;let a;function d(c){a=c}function s(c,h){t.drawArrays(a,c,h),n.update(h,a,1)}function o(c,h,l){if(l===0)return;let u,f;if(r)u=t,f="drawArraysInstanced";else if(u=e.get("ANGLE_instanced_arrays"),f="drawArraysInstancedANGLE",u===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}u[f](a,c,h,l),n.update(h,a,l)}this.setMode=d,this.render=s,this.renderInstances=o}function oD(t,e,n){let i;function r(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const x=e.get("EXT_texture_filter_anisotropic");i=t.getParameter(x.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function a(x){if(x==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";x="mediump"}return x==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const d=typeof WebGL2RenderingContext<"u"&&t.constructor.name==="WebGL2RenderingContext";let s=n.precision!==void 0?n.precision:"highp";const o=a(s);o!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",o,"instead."),s=o);const c=d||e.has("WEBGL_draw_buffers"),h=n.logarithmicDepthBuffer===!0,l=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),u=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),f=t.getParameter(t.MAX_TEXTURE_SIZE),m=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),g=t.getParameter(t.MAX_VERTEX_ATTRIBS),p=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),v=t.getParameter(t.MAX_VARYING_VECTORS),b=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),_=u>0,S=d||e.has("OES_texture_float"),w=_&&S,C=d?t.getParameter(t.MAX_SAMPLES):0;return{isWebGL2:d,drawBuffers:c,getMaxAnisotropy:r,getMaxPrecision:a,precision:s,logarithmicDepthBuffer:h,maxTextures:l,maxVertexTextures:u,maxTextureSize:f,maxCubemapSize:m,maxAttributes:g,maxVertexUniforms:p,maxVaryings:v,maxFragmentUniforms:b,vertexTextures:_,floatFragmentTextures:S,floatVertexTextures:w,maxSamples:C}}function aD(t){const e=this;let n=null,i=0,r=!1,a=!1;const d=new To,s=new Kt,o={value:null,needsUpdate:!1};this.uniform=o,this.numPlanes=0,this.numIntersection=0,this.init=function(l,u){const f=l.length!==0||u||i!==0||r;return r=u,i=l.length,f},this.beginShadows=function(){a=!0,h(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(l,u){n=h(l,u,0)},this.setState=function(l,u,f){const m=l.clippingPlanes,g=l.clipIntersection,p=l.clipShadows,v=t.get(l);if(!r||m===null||m.length===0||a&&!p)a?h(null):c();else{const b=a?0:i,_=b*4;let S=v.clippingState||null;o.value=S,S=h(m,u,_,f);for(let w=0;w!==_;++w)S[w]=n[w];v.clippingState=S,this.numIntersection=g?this.numPlanes:0,this.numPlanes+=b}};function c(){o.value!==n&&(o.value=n,o.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function h(l,u,f,m){const g=l!==null?l.length:0;let p=null;if(g!==0){if(p=o.value,m!==!0||p===null){const v=f+g*4,b=u.matrixWorldInverse;s.getNormalMatrix(b),(p===null||p.length<v)&&(p=new Float32Array(v));for(let _=0,S=f;_!==g;++_,S+=4)d.copy(l[_]).applyMatrix4(b,s),d.normal.toArray(p,S),p[S+3]=d.constant}o.value=p,o.needsUpdate=!0}return e.numPlanes=g,e.numIntersection=0,p}}function lD(t){let e=new WeakMap;function n(d,s){return s===_m?d.mapping=ml:s===Sm&&(d.mapping=gl),d}function i(d){if(d&&d.isTexture&&d.isRenderTargetTexture===!1){const s=d.mapping;if(s===_m||s===Sm)if(e.has(d)){const o=e.get(d).texture;return n(o,d.mapping)}else{const o=d.image;if(o&&o.height>0){const c=new xO(o.height/2);return c.fromEquirectangularTexture(t,d),e.set(d,c),d.addEventListener("dispose",r),n(c.texture,d.mapping)}else return null}}return d}function r(d){const s=d.target;s.removeEventListener("dispose",r);const o=e.get(s);o!==void 0&&(e.delete(s),o.dispose())}function a(){e=new WeakMap}return{get:i,dispose:a}}class pv extends Q1{constructor(e=-1,n=1,i=1,r=-1,a=.1,d=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=i,this.bottom=r,this.near=a,this.far=d,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,i,r,a,d){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=i,this.view.offsetY=r,this.view.width=a,this.view.height=d,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let a=i-e,d=i+e,s=r+n,o=r-n;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,h=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a+=c*this.view.offsetX,d=a+c*this.view.width,s-=h*this.view.offsetY,o=s-h*this.view.height}this.projectionMatrix.makeOrthographic(a,d,s,o,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}const Wa=4,Ib=[.125,.215,.35,.446,.526,.582],Ro=20,Cp=new pv,Db=new Nt;let xp=null;const Eo=(1+Math.sqrt(5))/2,Oa=1/Eo,Nb=[new Fe(1,1,1),new Fe(-1,1,1),new Fe(1,1,-1),new Fe(-1,1,-1),new Fe(0,Eo,Oa),new Fe(0,Eo,-Oa),new Fe(Oa,0,Eo),new Fe(-Oa,0,Eo),new Fe(Eo,Oa,0),new Fe(-Eo,Oa,0)];class Fb{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,i=.1,r=100){xp=this._renderer.getRenderTarget(),this._setSize(256);const a=this._allocateTargets();return a.depthBuffer=!0,this._sceneToCubeUV(e,i,r,a),n>0&&this._blur(a,0,0,n),this._applyPMREM(a),this._cleanup(a),a}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=Vb(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=Ub(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(xp),e.scissorTest=!1,vd(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===ml||e.mapping===gl?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),xp=this._renderer.getRenderTarget();const i=n||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,i={magFilter:qn,minFilter:qn,generateMipmaps:!1,type:Kc,format:zi,colorSpace:Pr,depthBuffer:!1},r=Bb(e,n,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=Bb(e,n,i);const{_lodMax:a}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=cD(a)),this._blurMaterial=uD(a,e,n)}return r}_compileMaterial(e){const n=new _i(this._lodPlanes[0],e);this._renderer.compile(n,Cp)}_sceneToCubeUV(e,n,i,r){const s=new ai(90,1,n,i),o=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],h=this._renderer,l=h.autoClear,u=h.toneMapping;h.getClearColor(Db),h.toneMapping=as,h.autoClear=!1;const f=new Do({name:"PMREM.Background",side:Si,depthWrite:!1,depthTest:!1}),m=new _i(new Mu,f);let g=!1;const p=e.background;p?p.isColor&&(f.color.copy(p),e.background=null,g=!0):(f.color.copy(Db),g=!0);for(let v=0;v<6;v++){const b=v%3;b===0?(s.up.set(0,o[v],0),s.lookAt(c[v],0,0)):b===1?(s.up.set(0,0,o[v]),s.lookAt(0,c[v],0)):(s.up.set(0,o[v],0),s.lookAt(0,0,c[v]));const _=this._cubeSize;vd(r,b*_,v>2?_:0,_,_),h.setRenderTarget(r),g&&h.render(m,s),h.render(e,s)}m.geometry.dispose(),m.material.dispose(),h.toneMapping=u,h.autoClear=l,e.background=p}_textureToCubeUV(e,n){const i=this._renderer,r=e.mapping===ml||e.mapping===gl;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=Vb()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=Ub());const a=r?this._cubemapMaterial:this._equirectMaterial,d=new _i(this._lodPlanes[0],a),s=a.uniforms;s.envMap.value=e;const o=this._cubeSize;vd(n,0,0,3*o,2*o),i.setRenderTarget(n),i.render(d,Cp)}_applyPMREM(e){const n=this._renderer,i=n.autoClear;n.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const a=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),d=Nb[(r-1)%Nb.length];this._blur(e,r-1,r,a,d)}n.autoClear=i}_blur(e,n,i,r,a){const d=this._pingPongRenderTarget;this._halfBlur(e,d,n,i,r,"latitudinal",a),this._halfBlur(d,e,i,i,r,"longitudinal",a)}_halfBlur(e,n,i,r,a,d,s){const o=this._renderer,c=this._blurMaterial;d!=="latitudinal"&&d!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const h=3,l=new _i(this._lodPlanes[r],c),u=c.uniforms,f=this._sizeLods[i]-1,m=isFinite(a)?Math.PI/(2*f):2*Math.PI/(2*Ro-1),g=a/m,p=isFinite(a)?1+Math.floor(h*g):Ro;p>Ro&&console.warn(`sigmaRadians, ${a}, is too large and will clip, as it requested ${p} samples when the maximum is set to ${Ro}`);const v=[];let b=0;for(let x=0;x<Ro;++x){const M=x/g,E=Math.exp(-M*M/2);v.push(E),x===0?b+=E:x<p&&(b+=2*E)}for(let x=0;x<v.length;x++)v[x]=v[x]/b;u.envMap.value=e.texture,u.samples.value=p,u.weights.value=v,u.latitudinal.value=d==="latitudinal",s&&(u.poleAxis.value=s);const{_lodMax:_}=this;u.dTheta.value=m,u.mipInt.value=_-i;const S=this._sizeLods[r],w=3*S*(r>_-Wa?r-_+Wa:0),C=4*(this._cubeSize-S);vd(n,w,C,3*S,2*S),o.setRenderTarget(n),o.render(l,Cp)}}function cD(t){const e=[],n=[],i=[];let r=t;const a=t-Wa+1+Ib.length;for(let d=0;d<a;d++){const s=Math.pow(2,r);n.push(s);let o=1/s;d>t-Wa?o=Ib[d-t+Wa-1]:d===0&&(o=0),i.push(o);const c=1/(s-2),h=-c,l=1+c,u=[h,h,l,h,l,l,h,h,l,l,h,l],f=6,m=6,g=3,p=2,v=1,b=new Float32Array(g*m*f),_=new Float32Array(p*m*f),S=new Float32Array(v*m*f);for(let C=0;C<f;C++){const x=C%3*2/3-1,M=C>2?0:-1,E=[x,M,0,x+2/3,M,0,x+2/3,M+1,0,x,M,0,x+2/3,M+1,0,x,M+1,0];b.set(E,g*m*C),_.set(u,p*m*C);const A=[C,C,C,C,C,C];S.set(A,v*m*C)}const w=new Br;w.setAttribute("position",new ci(b,g)),w.setAttribute("uv",new ci(_,p)),w.setAttribute("faceIndex",new ci(S,v)),e.push(w),r>Wa&&r--}return{lodPlanes:e,sizeLods:n,sigmas:i}}function Bb(t,e,n){const i=new Qo(t,e,n);return i.texture.mapping=lh,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function vd(t,e,n,i,r){t.viewport.set(e,n,i,r),t.scissor.set(e,n,i,r)}function uD(t,e,n){const i=new Float32Array(Ro),r=new Fe(0,1,0);return new ea({name:"SphericalGaussianBlur",defines:{n:Ro,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:mv(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Ys,depthTest:!1,depthWrite:!1})}function Ub(){return new ea({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:mv(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Ys,depthTest:!1,depthWrite:!1})}function Vb(){return new ea({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:mv(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Ys,depthTest:!1,depthWrite:!1})}function mv(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function dD(t){let e=new WeakMap,n=null;function i(s){if(s&&s.isTexture){const o=s.mapping,c=o===_m||o===Sm,h=o===ml||o===gl;if(c||h)if(s.isRenderTargetTexture&&s.needsPMREMUpdate===!0){s.needsPMREMUpdate=!1;let l=e.get(s);return n===null&&(n=new Fb(t)),l=c?n.fromEquirectangular(s,l):n.fromCubemap(s,l),e.set(s,l),l.texture}else{if(e.has(s))return e.get(s).texture;{const l=s.image;if(c&&l&&l.height>0||h&&l&&r(l)){n===null&&(n=new Fb(t));const u=c?n.fromEquirectangular(s):n.fromCubemap(s);return e.set(s,u),s.addEventListener("dispose",a),u.texture}else return null}}}return s}function r(s){let o=0;const c=6;for(let h=0;h<c;h++)s[h]!==void 0&&o++;return o===c}function a(s){const o=s.target;o.removeEventListener("dispose",a);const c=e.get(o);c!==void 0&&(e.delete(o),c.dispose())}function d(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:i,dispose:d}}function fD(t){const e={};function n(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=t.getExtension(i)}return e[i]=r,r}return{has:function(i){return n(i)!==null},init:function(i){i.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(i){const r=n(i);return r===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function hD(t,e,n,i){const r={},a=new WeakMap;function d(l){const u=l.target;u.index!==null&&e.remove(u.index);for(const m in u.attributes)e.remove(u.attributes[m]);u.removeEventListener("dispose",d),delete r[u.id];const f=a.get(u);f&&(e.remove(f),a.delete(u)),i.releaseStatesOfGeometry(u),u.isInstancedBufferGeometry===!0&&delete u._maxInstanceCount,n.memory.geometries--}function s(l,u){return r[u.id]===!0||(u.addEventListener("dispose",d),r[u.id]=!0,n.memory.geometries++),u}function o(l){const u=l.attributes;for(const m in u)e.update(u[m],t.ARRAY_BUFFER);const f=l.morphAttributes;for(const m in f){const g=f[m];for(let p=0,v=g.length;p<v;p++)e.update(g[p],t.ARRAY_BUFFER)}}function c(l){const u=[],f=l.index,m=l.attributes.position;let g=0;if(f!==null){const b=f.array;g=f.version;for(let _=0,S=b.length;_<S;_+=3){const w=b[_+0],C=b[_+1],x=b[_+2];u.push(w,C,C,x,x,w)}}else{const b=m.array;g=m.version;for(let _=0,S=b.length/3-1;_<S;_+=3){const w=_+0,C=_+1,x=_+2;u.push(w,C,C,x,x,w)}}const p=new(W1(u)?Z1:q1)(u,1);p.version=g;const v=a.get(l);v&&e.remove(v),a.set(l,p)}function h(l){const u=a.get(l);if(u){const f=l.index;f!==null&&u.version<f.version&&c(l)}else c(l);return a.get(l)}return{get:s,update:o,getWireframeAttribute:h}}function pD(t,e,n,i){const r=i.isWebGL2;let a;function d(u){a=u}let s,o;function c(u){s=u.type,o=u.bytesPerElement}function h(u,f){t.drawElements(a,f,s,u*o),n.update(f,a,1)}function l(u,f,m){if(m===0)return;let g,p;if(r)g=t,p="drawElementsInstanced";else if(g=e.get("ANGLE_instanced_arrays"),p="drawElementsInstancedANGLE",g===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}g[p](a,f,s,u*o,m),n.update(f,a,m)}this.setMode=d,this.setIndex=c,this.render=h,this.renderInstances=l}function mD(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function i(a,d,s){switch(n.calls++,d){case t.TRIANGLES:n.triangles+=s*(a/3);break;case t.LINES:n.lines+=s*(a/2);break;case t.LINE_STRIP:n.lines+=s*(a-1);break;case t.LINE_LOOP:n.lines+=s*a;break;case t.POINTS:n.points+=s*a;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",d);break}}function r(){n.frame++,n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:r,update:i}}function gD(t,e){return t[0]-e[0]}function vD(t,e){return Math.abs(e[1])-Math.abs(t[1])}function yD(t,e,n){const i={},r=new Float32Array(8),a=new WeakMap,d=new fn,s=[];for(let c=0;c<8;c++)s[c]=[c,0];function o(c,h,l){const u=c.morphTargetInfluences;if(e.isWebGL2===!0){const f=h.morphAttributes.position||h.morphAttributes.normal||h.morphAttributes.color,m=f!==void 0?f.length:0;let g=a.get(h);if(g===void 0||g.count!==m){let U=function(){D.dispose(),a.delete(h),h.removeEventListener("dispose",U)};g!==void 0&&g.texture.dispose();const b=h.morphAttributes.position!==void 0,_=h.morphAttributes.normal!==void 0,S=h.morphAttributes.color!==void 0,w=h.morphAttributes.position||[],C=h.morphAttributes.normal||[],x=h.morphAttributes.color||[];let M=0;b===!0&&(M=1),_===!0&&(M=2),S===!0&&(M=3);let E=h.attributes.position.count*M,A=1;E>e.maxTextureSize&&(A=Math.ceil(E/e.maxTextureSize),E=e.maxTextureSize);const O=new Float32Array(E*A*4*m),D=new X1(O,E,A,m);D.type=$s,D.needsUpdate=!0;const L=M*4;for(let j=0;j<m;j++){const V=w[j],k=C[j],F=x[j],T=E*A*4*j;for(let P=0;P<V.count;P++){const H=P*L;b===!0&&(d.fromBufferAttribute(V,P),O[T+H+0]=d.x,O[T+H+1]=d.y,O[T+H+2]=d.z,O[T+H+3]=0),_===!0&&(d.fromBufferAttribute(k,P),O[T+H+4]=d.x,O[T+H+5]=d.y,O[T+H+6]=d.z,O[T+H+7]=0),S===!0&&(d.fromBufferAttribute(F,P),O[T+H+8]=d.x,O[T+H+9]=d.y,O[T+H+10]=d.z,O[T+H+11]=F.itemSize===4?d.w:1)}}g={count:m,texture:D,size:new It(E,A)},a.set(h,g),h.addEventListener("dispose",U)}let p=0;for(let b=0;b<u.length;b++)p+=u[b];const v=h.morphTargetsRelative?1:1-p;l.getUniforms().setValue(t,"morphTargetBaseInfluence",v),l.getUniforms().setValue(t,"morphTargetInfluences",u),l.getUniforms().setValue(t,"morphTargetsTexture",g.texture,n),l.getUniforms().setValue(t,"morphTargetsTextureSize",g.size)}else{const f=u===void 0?0:u.length;let m=i[h.id];if(m===void 0||m.length!==f){m=[];for(let _=0;_<f;_++)m[_]=[_,0];i[h.id]=m}for(let _=0;_<f;_++){const S=m[_];S[0]=_,S[1]=u[_]}m.sort(vD);for(let _=0;_<8;_++)_<f&&m[_][1]?(s[_][0]=m[_][0],s[_][1]=m[_][1]):(s[_][0]=Number.MAX_SAFE_INTEGER,s[_][1]=0);s.sort(gD);const g=h.morphAttributes.position,p=h.morphAttributes.normal;let v=0;for(let _=0;_<8;_++){const S=s[_],w=S[0],C=S[1];w!==Number.MAX_SAFE_INTEGER&&C?(g&&h.getAttribute("morphTarget"+_)!==g[w]&&h.setAttribute("morphTarget"+_,g[w]),p&&h.getAttribute("morphNormal"+_)!==p[w]&&h.setAttribute("morphNormal"+_,p[w]),r[_]=C,v+=C):(g&&h.hasAttribute("morphTarget"+_)===!0&&h.deleteAttribute("morphTarget"+_),p&&h.hasAttribute("morphNormal"+_)===!0&&h.deleteAttribute("morphNormal"+_),r[_]=0)}const b=h.morphTargetsRelative?1:1-v;l.getUniforms().setValue(t,"morphTargetBaseInfluence",b),l.getUniforms().setValue(t,"morphTargetInfluences",r)}}return{update:o}}function bD(t,e,n,i){let r=new WeakMap;function a(o){const c=i.render.frame,h=o.geometry,l=e.get(o,h);return r.get(l)!==c&&(e.update(l),r.set(l,c)),o.isInstancedMesh&&(o.hasEventListener("dispose",s)===!1&&o.addEventListener("dispose",s),n.update(o.instanceMatrix,t.ARRAY_BUFFER),o.instanceColor!==null&&n.update(o.instanceColor,t.ARRAY_BUFFER)),l}function d(){r=new WeakMap}function s(o){const c=o.target;c.removeEventListener("dispose",s),n.remove(c.instanceMatrix),c.instanceColor!==null&&n.remove(c.instanceColor)}return{update:a,dispose:d}}const tx=new Wn,nx=new X1,ix=new lO,rx=new dv,Hb=[],zb=[],$b=new Float32Array(16),Wb=new Float32Array(9),Gb=new Float32Array(4);function zl(t,e,n){const i=t[0];if(i<=0||i>0)return t;const r=e*n;let a=Hb[r];if(a===void 0&&(a=new Float32Array(r),Hb[r]=a),e!==0){i.toArray(a,0);for(let d=1,s=0;d!==e;++d)s+=n,t[d].toArray(a,s)}return a}function On(t,e){if(t.length!==e.length)return!1;for(let n=0,i=t.length;n<i;n++)if(t[n]!==e[n])return!1;return!0}function Ln(t,e){for(let n=0,i=e.length;n<i;n++)t[n]=e[n]}function uh(t,e){let n=zb[e];n===void 0&&(n=new Int32Array(e),zb[e]=n);for(let i=0;i!==e;++i)n[i]=t.allocateTextureUnit();return n}function _D(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function SD(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(On(n,e))return;t.uniform2fv(this.addr,e),Ln(n,e)}}function wD(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(On(n,e))return;t.uniform3fv(this.addr,e),Ln(n,e)}}function CD(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(On(n,e))return;t.uniform4fv(this.addr,e),Ln(n,e)}}function xD(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(On(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Ln(n,e)}else{if(On(n,i))return;Gb.set(i),t.uniformMatrix2fv(this.addr,!1,Gb),Ln(n,i)}}function TD(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(On(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Ln(n,e)}else{if(On(n,i))return;Wb.set(i),t.uniformMatrix3fv(this.addr,!1,Wb),Ln(n,i)}}function ED(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(On(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Ln(n,e)}else{if(On(n,i))return;$b.set(i),t.uniformMatrix4fv(this.addr,!1,$b),Ln(n,i)}}function MD(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function AD(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(On(n,e))return;t.uniform2iv(this.addr,e),Ln(n,e)}}function kD(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(On(n,e))return;t.uniform3iv(this.addr,e),Ln(n,e)}}function RD(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(On(n,e))return;t.uniform4iv(this.addr,e),Ln(n,e)}}function PD(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function OD(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(On(n,e))return;t.uniform2uiv(this.addr,e),Ln(n,e)}}function LD(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(On(n,e))return;t.uniform3uiv(this.addr,e),Ln(n,e)}}function ID(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(On(n,e))return;t.uniform4uiv(this.addr,e),Ln(n,e)}}function DD(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2D(e||tx,r)}function ND(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(e||ix,r)}function FD(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTextureCube(e||rx,r)}function BD(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(e||nx,r)}function UD(t){switch(t){case 5126:return _D;case 35664:return SD;case 35665:return wD;case 35666:return CD;case 35674:return xD;case 35675:return TD;case 35676:return ED;case 5124:case 35670:return MD;case 35667:case 35671:return AD;case 35668:case 35672:return kD;case 35669:case 35673:return RD;case 5125:return PD;case 36294:return OD;case 36295:return LD;case 36296:return ID;case 35678:case 36198:case 36298:case 36306:case 35682:return DD;case 35679:case 36299:case 36307:return ND;case 35680:case 36300:case 36308:case 36293:return FD;case 36289:case 36303:case 36311:case 36292:return BD}}function VD(t,e){t.uniform1fv(this.addr,e)}function HD(t,e){const n=zl(e,this.size,2);t.uniform2fv(this.addr,n)}function zD(t,e){const n=zl(e,this.size,3);t.uniform3fv(this.addr,n)}function $D(t,e){const n=zl(e,this.size,4);t.uniform4fv(this.addr,n)}function WD(t,e){const n=zl(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function GD(t,e){const n=zl(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function jD(t,e){const n=zl(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function XD(t,e){t.uniform1iv(this.addr,e)}function KD(t,e){t.uniform2iv(this.addr,e)}function YD(t,e){t.uniform3iv(this.addr,e)}function qD(t,e){t.uniform4iv(this.addr,e)}function ZD(t,e){t.uniform1uiv(this.addr,e)}function JD(t,e){t.uniform2uiv(this.addr,e)}function QD(t,e){t.uniform3uiv(this.addr,e)}function eN(t,e){t.uniform4uiv(this.addr,e)}function tN(t,e,n){const i=this.cache,r=e.length,a=uh(n,r);On(i,a)||(t.uniform1iv(this.addr,a),Ln(i,a));for(let d=0;d!==r;++d)n.setTexture2D(e[d]||tx,a[d])}function nN(t,e,n){const i=this.cache,r=e.length,a=uh(n,r);On(i,a)||(t.uniform1iv(this.addr,a),Ln(i,a));for(let d=0;d!==r;++d)n.setTexture3D(e[d]||ix,a[d])}function iN(t,e,n){const i=this.cache,r=e.length,a=uh(n,r);On(i,a)||(t.uniform1iv(this.addr,a),Ln(i,a));for(let d=0;d!==r;++d)n.setTextureCube(e[d]||rx,a[d])}function rN(t,e,n){const i=this.cache,r=e.length,a=uh(n,r);On(i,a)||(t.uniform1iv(this.addr,a),Ln(i,a));for(let d=0;d!==r;++d)n.setTexture2DArray(e[d]||nx,a[d])}function sN(t){switch(t){case 5126:return VD;case 35664:return HD;case 35665:return zD;case 35666:return $D;case 35674:return WD;case 35675:return GD;case 35676:return jD;case 5124:case 35670:return XD;case 35667:case 35671:return KD;case 35668:case 35672:return YD;case 35669:case 35673:return qD;case 5125:return ZD;case 36294:return JD;case 36295:return QD;case 36296:return eN;case 35678:case 36198:case 36298:case 36306:case 35682:return tN;case 35679:case 36299:case 36307:return nN;case 35680:case 36300:case 36308:case 36293:return iN;case 36289:case 36303:case 36311:case 36292:return rN}}class oN{constructor(e,n,i){this.id=e,this.addr=i,this.cache=[],this.setValue=UD(n.type)}}class aN{constructor(e,n,i){this.id=e,this.addr=i,this.cache=[],this.size=n.size,this.setValue=sN(n.type)}}class lN{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,i){const r=this.seq;for(let a=0,d=r.length;a!==d;++a){const s=r[a];s.setValue(e,n[s.id],i)}}}const Tp=/(\w+)(\])?(\[|\.)?/g;function jb(t,e){t.seq.push(e),t.map[e.id]=e}function cN(t,e,n){const i=t.name,r=i.length;for(Tp.lastIndex=0;;){const a=Tp.exec(i),d=Tp.lastIndex;let s=a[1];const o=a[2]==="]",c=a[3];if(o&&(s=s|0),c===void 0||c==="["&&d+2===r){jb(n,c===void 0?new oN(s,t,e):new aN(s,t,e));break}else{let l=n.map[s];l===void 0&&(l=new lN(s),jb(n,l)),n=l}}}class jd{constructor(e,n){this.seq=[],this.map={};const i=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const a=e.getActiveUniform(n,r),d=e.getUniformLocation(n,a.name);cN(a,d,this)}}setValue(e,n,i,r){const a=this.map[n];a!==void 0&&a.setValue(e,i,r)}setOptional(e,n,i){const r=n[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,n,i,r){for(let a=0,d=n.length;a!==d;++a){const s=n[a],o=i[s.id];o.needsUpdate!==!1&&s.setValue(e,o.value,r)}}static seqWithValue(e,n){const i=[];for(let r=0,a=e.length;r!==a;++r){const d=e[r];d.id in n&&i.push(d)}return i}}function Xb(t,e,n){const i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),i}let uN=0;function dN(t,e){const n=t.split(`
`),i=[],r=Math.max(e-6,0),a=Math.min(e+6,n.length);for(let d=r;d<a;d++){const s=d+1;i.push(`${s===e?">":" "} ${s}: ${n[d]}`)}return i.join(`
`)}function fN(t){switch(t){case Pr:return["Linear","( value )"];case Ot:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",t),["Linear","( value )"]}}function Kb(t,e,n){const i=t.getShaderParameter(e,t.COMPILE_STATUS),r=t.getShaderInfoLog(e).trim();if(i&&r==="")return"";const a=/ERROR: 0:(\d+)/.exec(r);if(a){const d=parseInt(a[1]);return n.toUpperCase()+`

`+r+`

`+dN(t.getShaderSource(e),d)}else return r}function hN(t,e){const n=fN(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function pN(t,e){let n;switch(e){case mP:n="Linear";break;case gP:n="Reinhard";break;case vP:n="OptimizedCineon";break;case yP:n="ACESFilmic";break;case bP:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function mN(t){return[t.extensionDerivatives||t.envMapCubeUVHeight||t.bumpMap||t.normalMapTangentSpace||t.clearcoatNormalMap||t.flatShading||t.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(bc).join(`
`)}function gN(t){const e=[];for(const n in t){const i=t[n];i!==!1&&e.push("#define "+n+" "+i)}return e.join(`
`)}function vN(t,e){const n={},i=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const a=t.getActiveAttrib(e,r),d=a.name;let s=1;a.type===t.FLOAT_MAT2&&(s=2),a.type===t.FLOAT_MAT3&&(s=3),a.type===t.FLOAT_MAT4&&(s=4),n[d]={type:a.type,location:t.getAttribLocation(e,d),locationSize:s}}return n}function bc(t){return t!==""}function Yb(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function qb(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const yN=/^[ \t]*#include +<([\w\d./]+)>/gm;function Mm(t){return t.replace(yN,bN)}function bN(t,e){const n=Vt[e];if(n===void 0)throw new Error("Can not resolve #include <"+e+">");return Mm(n)}const _N=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Zb(t){return t.replace(_N,SN)}function SN(t,e,n,i){let r="";for(let a=parseInt(e);a<parseInt(n);a++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return r}function Jb(t){let e="precision "+t.precision+` float;
precision `+t.precision+" int;";return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function wN(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===L1?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===XR?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===Jr&&(e="SHADOWMAP_TYPE_VSM"),e}function CN(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case ml:case gl:e="ENVMAP_TYPE_CUBE";break;case lh:e="ENVMAP_TYPE_CUBE_UV";break}return e}function xN(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case gl:e="ENVMAP_MODE_REFRACTION";break}return e}function TN(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case av:e="ENVMAP_BLENDING_MULTIPLY";break;case hP:e="ENVMAP_BLENDING_MIX";break;case pP:e="ENVMAP_BLENDING_ADD";break}return e}function EN(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:i,maxMip:n}}function MN(t,e,n,i){const r=t.getContext(),a=n.defines;let d=n.vertexShader,s=n.fragmentShader;const o=wN(n),c=CN(n),h=xN(n),l=TN(n),u=EN(n),f=n.isWebGL2?"":mN(n),m=gN(a),g=r.createProgram();let p,v,b=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(p=[m].filter(bc).join(`
`),p.length>0&&(p+=`
`),v=[f,m].filter(bc).join(`
`),v.length>0&&(v+=`
`)):(p=[Jb(n),"#define SHADER_NAME "+n.shaderName,m,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+o:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(bc).join(`
`),v=[f,Jb(n),"#define SHADER_NAME "+n.shaderName,m,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+h:"",n.envMap?"#define "+l:"",u?"#define CUBEUV_TEXEL_WIDTH "+u.texelWidth:"",u?"#define CUBEUV_TEXEL_HEIGHT "+u.texelHeight:"",u?"#define CUBEUV_MAX_MIP "+u.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+o:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==as?"#define TONE_MAPPING":"",n.toneMapping!==as?Vt.tonemapping_pars_fragment:"",n.toneMapping!==as?pN("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Vt.encodings_pars_fragment,hN("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(bc).join(`
`)),d=Mm(d),d=Yb(d,n),d=qb(d,n),s=Mm(s),s=Yb(s,n),s=qb(s,n),d=Zb(d),s=Zb(s),n.isWebGL2&&n.isRawShaderMaterial!==!0&&(b=`#version 300 es
`,p=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+p,v=["#define varying in",n.glslVersion===vb?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===vb?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+v);const _=b+p+d,S=b+v+s,w=Xb(r,r.VERTEX_SHADER,_),C=Xb(r,r.FRAGMENT_SHADER,S);if(r.attachShader(g,w),r.attachShader(g,C),n.index0AttributeName!==void 0?r.bindAttribLocation(g,0,n.index0AttributeName):n.morphTargets===!0&&r.bindAttribLocation(g,0,"position"),r.linkProgram(g),t.debug.checkShaderErrors){const E=r.getProgramInfoLog(g).trim(),A=r.getShaderInfoLog(w).trim(),O=r.getShaderInfoLog(C).trim();let D=!0,L=!0;if(r.getProgramParameter(g,r.LINK_STATUS)===!1)if(D=!1,typeof t.debug.onShaderError=="function")t.debug.onShaderError(r,g,w,C);else{const U=Kb(r,w,"vertex"),j=Kb(r,C,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(g,r.VALIDATE_STATUS)+`

Program Info Log: `+E+`
`+U+`
`+j)}else E!==""?console.warn("THREE.WebGLProgram: Program Info Log:",E):(A===""||O==="")&&(L=!1);L&&(this.diagnostics={runnable:D,programLog:E,vertexShader:{log:A,prefix:p},fragmentShader:{log:O,prefix:v}})}r.deleteShader(w),r.deleteShader(C);let x;this.getUniforms=function(){return x===void 0&&(x=new jd(r,g)),x};let M;return this.getAttributes=function(){return M===void 0&&(M=vN(r,g)),M},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(g),this.program=void 0},this.name=n.shaderName,this.id=uN++,this.cacheKey=e,this.usedTimes=1,this.program=g,this.vertexShader=w,this.fragmentShader=C,this}let AN=0;class kN{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(n),a=this._getShaderStage(i),d=this._getShaderCacheForMaterial(e);return d.has(r)===!1&&(d.add(r),r.usedTimes++),d.has(a)===!1&&(d.add(a),a.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const i of n)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let i=n.get(e);return i===void 0&&(i=new Set,n.set(e,i)),i}_getShaderStage(e){const n=this.shaderCache;let i=n.get(e);return i===void 0&&(i=new RN(e),n.set(e,i)),i}}class RN{constructor(e){this.id=AN++,this.code=e,this.usedTimes=0}}function PN(t,e,n,i,r,a,d){const s=new K1,o=new kN,c=[],h=r.isWebGL2,l=r.logarithmicDepthBuffer,u=r.vertexTextures;let f=r.precision;const m={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function g(E){return E===1?"uv1":E===2?"uv2":E===3?"uv3":"uv"}function p(E,A,O,D,L){const U=D.fog,j=L.geometry,V=E.isMeshStandardMaterial?D.environment:null,k=(E.isMeshStandardMaterial?n:e).get(E.envMap||V),F=k&&k.mapping===lh?k.image.height:null,T=m[E.type];E.precision!==null&&(f=r.getMaxPrecision(E.precision),f!==E.precision&&console.warn("THREE.WebGLProgram.getParameters:",E.precision,"not supported, using",f,"instead."));const P=j.morphAttributes.position||j.morphAttributes.normal||j.morphAttributes.color,H=P!==void 0?P.length:0;let N=0;j.morphAttributes.position!==void 0&&(N=1),j.morphAttributes.normal!==void 0&&(N=2),j.morphAttributes.color!==void 0&&(N=3);let G,$,z,Z;if(T){const De=Tr[T];G=De.vertexShader,$=De.fragmentShader}else G=E.vertexShader,$=E.fragmentShader,o.update(E),z=o.getVertexShaderID(E),Z=o.getFragmentShaderID(E);const W=t.getRenderTarget(),te=L.isInstancedMesh===!0,ie=!!E.map,re=!!E.matcap,_e=!!k,Pe=!!E.aoMap,K=!!E.lightMap,Q=!!E.bumpMap,fe=!!E.normalMap,ge=!!E.displacementMap,se=!!E.emissiveMap,me=!!E.metalnessMap,be=!!E.roughnessMap,Me=E.clearcoat>0,Ee=E.iridescence>0,X=E.sheen>0,Y=E.transmission>0,le=Me&&!!E.clearcoatMap,Ce=Me&&!!E.clearcoatNormalMap,Re=Me&&!!E.clearcoatRoughnessMap,Ne=Ee&&!!E.iridescenceMap,he=Ee&&!!E.iridescenceThicknessMap,pe=X&&!!E.sheenColorMap,ee=X&&!!E.sheenRoughnessMap,oe=!!E.specularMap,J=!!E.specularColorMap,ce=!!E.specularIntensityMap,ye=Y&&!!E.transmissionMap,Oe=Y&&!!E.thicknessMap,ze=!!E.gradientMap,xe=!!E.alphaMap,Ve=E.alphaTest>0,we=!!E.extensions,Ie=!!j.attributes.uv1,Ge=!!j.attributes.uv2,it=!!j.attributes.uv3;return{isWebGL2:h,shaderID:T,shaderName:E.type,vertexShader:G,fragmentShader:$,defines:E.defines,customVertexShaderID:z,customFragmentShaderID:Z,isRawShaderMaterial:E.isRawShaderMaterial===!0,glslVersion:E.glslVersion,precision:f,instancing:te,instancingColor:te&&L.instanceColor!==null,supportsVertexTextures:u,outputColorSpace:W===null?t.outputColorSpace:W.isXRRenderTarget===!0?W.texture.colorSpace:Pr,map:ie,matcap:re,envMap:_e,envMapMode:_e&&k.mapping,envMapCubeUVHeight:F,aoMap:Pe,lightMap:K,bumpMap:Q,normalMap:fe,displacementMap:u&&ge,emissiveMap:se,normalMapObjectSpace:fe&&E.normalMapType===UP,normalMapTangentSpace:fe&&E.normalMapType===lv,metalnessMap:me,roughnessMap:be,clearcoat:Me,clearcoatMap:le,clearcoatNormalMap:Ce,clearcoatRoughnessMap:Re,iridescence:Ee,iridescenceMap:Ne,iridescenceThicknessMap:he,sheen:X,sheenColorMap:pe,sheenRoughnessMap:ee,specularMap:oe,specularColorMap:J,specularIntensityMap:ce,transmission:Y,transmissionMap:ye,thicknessMap:Oe,gradientMap:ze,opaque:E.transparent===!1&&E.blending===Qa,alphaMap:xe,alphaTest:Ve,combine:E.combine,mapUv:ie&&g(E.map.channel),aoMapUv:Pe&&g(E.aoMap.channel),lightMapUv:K&&g(E.lightMap.channel),bumpMapUv:Q&&g(E.bumpMap.channel),normalMapUv:fe&&g(E.normalMap.channel),displacementMapUv:ge&&g(E.displacementMap.channel),emissiveMapUv:se&&g(E.emissiveMap.channel),metalnessMapUv:me&&g(E.metalnessMap.channel),roughnessMapUv:be&&g(E.roughnessMap.channel),clearcoatMapUv:le&&g(E.clearcoatMap.channel),clearcoatNormalMapUv:Ce&&g(E.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Re&&g(E.clearcoatRoughnessMap.channel),iridescenceMapUv:Ne&&g(E.iridescenceMap.channel),iridescenceThicknessMapUv:he&&g(E.iridescenceThicknessMap.channel),sheenColorMapUv:pe&&g(E.sheenColorMap.channel),sheenRoughnessMapUv:ee&&g(E.sheenRoughnessMap.channel),specularMapUv:oe&&g(E.specularMap.channel),specularColorMapUv:J&&g(E.specularColorMap.channel),specularIntensityMapUv:ce&&g(E.specularIntensityMap.channel),transmissionMapUv:ye&&g(E.transmissionMap.channel),thicknessMapUv:Oe&&g(E.thicknessMap.channel),alphaMapUv:xe&&g(E.alphaMap.channel),vertexTangents:fe&&!!j.attributes.tangent,vertexColors:E.vertexColors,vertexAlphas:E.vertexColors===!0&&!!j.attributes.color&&j.attributes.color.itemSize===4,vertexUv1s:Ie,vertexUv2s:Ge,vertexUv3s:it,pointsUvs:L.isPoints===!0&&!!j.attributes.uv&&(ie||xe),fog:!!U,useFog:E.fog===!0,fogExp2:U&&U.isFogExp2,flatShading:E.flatShading===!0,sizeAttenuation:E.sizeAttenuation===!0,logarithmicDepthBuffer:l,skinning:L.isSkinnedMesh===!0,morphTargets:j.morphAttributes.position!==void 0,morphNormals:j.morphAttributes.normal!==void 0,morphColors:j.morphAttributes.color!==void 0,morphTargetsCount:H,morphTextureStride:N,numDirLights:A.directional.length,numPointLights:A.point.length,numSpotLights:A.spot.length,numSpotLightMaps:A.spotLightMap.length,numRectAreaLights:A.rectArea.length,numHemiLights:A.hemi.length,numDirLightShadows:A.directionalShadowMap.length,numPointLightShadows:A.pointShadowMap.length,numSpotLightShadows:A.spotShadowMap.length,numSpotLightShadowsWithMaps:A.numSpotLightShadowsWithMaps,numClippingPlanes:d.numPlanes,numClipIntersection:d.numIntersection,dithering:E.dithering,shadowMapEnabled:t.shadowMap.enabled&&O.length>0,shadowMapType:t.shadowMap.type,toneMapping:E.toneMapped?t.toneMapping:as,useLegacyLights:t.useLegacyLights,premultipliedAlpha:E.premultipliedAlpha,doubleSided:E.side===ur,flipSided:E.side===Si,useDepthPacking:E.depthPacking>=0,depthPacking:E.depthPacking||0,index0AttributeName:E.index0AttributeName,extensionDerivatives:we&&E.extensions.derivatives===!0,extensionFragDepth:we&&E.extensions.fragDepth===!0,extensionDrawBuffers:we&&E.extensions.drawBuffers===!0,extensionShaderTextureLOD:we&&E.extensions.shaderTextureLOD===!0,rendererExtensionFragDepth:h||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:h||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:h||i.has("EXT_shader_texture_lod"),customProgramCacheKey:E.customProgramCacheKey()}}function v(E){const A=[];if(E.shaderID?A.push(E.shaderID):(A.push(E.customVertexShaderID),A.push(E.customFragmentShaderID)),E.defines!==void 0)for(const O in E.defines)A.push(O),A.push(E.defines[O]);return E.isRawShaderMaterial===!1&&(b(A,E),_(A,E),A.push(t.outputColorSpace)),A.push(E.customProgramCacheKey),A.join()}function b(E,A){E.push(A.precision),E.push(A.outputColorSpace),E.push(A.envMapMode),E.push(A.envMapCubeUVHeight),E.push(A.mapUv),E.push(A.alphaMapUv),E.push(A.lightMapUv),E.push(A.aoMapUv),E.push(A.bumpMapUv),E.push(A.normalMapUv),E.push(A.displacementMapUv),E.push(A.emissiveMapUv),E.push(A.metalnessMapUv),E.push(A.roughnessMapUv),E.push(A.clearcoatMapUv),E.push(A.clearcoatNormalMapUv),E.push(A.clearcoatRoughnessMapUv),E.push(A.iridescenceMapUv),E.push(A.iridescenceThicknessMapUv),E.push(A.sheenColorMapUv),E.push(A.sheenRoughnessMapUv),E.push(A.specularMapUv),E.push(A.specularColorMapUv),E.push(A.specularIntensityMapUv),E.push(A.transmissionMapUv),E.push(A.thicknessMapUv),E.push(A.combine),E.push(A.fogExp2),E.push(A.sizeAttenuation),E.push(A.morphTargetsCount),E.push(A.morphAttributeCount),E.push(A.numDirLights),E.push(A.numPointLights),E.push(A.numSpotLights),E.push(A.numSpotLightMaps),E.push(A.numHemiLights),E.push(A.numRectAreaLights),E.push(A.numDirLightShadows),E.push(A.numPointLightShadows),E.push(A.numSpotLightShadows),E.push(A.numSpotLightShadowsWithMaps),E.push(A.shadowMapType),E.push(A.toneMapping),E.push(A.numClippingPlanes),E.push(A.numClipIntersection),E.push(A.depthPacking)}function _(E,A){s.disableAll(),A.isWebGL2&&s.enable(0),A.supportsVertexTextures&&s.enable(1),A.instancing&&s.enable(2),A.instancingColor&&s.enable(3),A.matcap&&s.enable(4),A.envMap&&s.enable(5),A.normalMapObjectSpace&&s.enable(6),A.normalMapTangentSpace&&s.enable(7),A.clearcoat&&s.enable(8),A.iridescence&&s.enable(9),A.alphaTest&&s.enable(10),A.vertexColors&&s.enable(11),A.vertexAlphas&&s.enable(12),A.vertexUv1s&&s.enable(13),A.vertexUv2s&&s.enable(14),A.vertexUv3s&&s.enable(15),A.vertexTangents&&s.enable(16),E.push(s.mask),s.disableAll(),A.fog&&s.enable(0),A.useFog&&s.enable(1),A.flatShading&&s.enable(2),A.logarithmicDepthBuffer&&s.enable(3),A.skinning&&s.enable(4),A.morphTargets&&s.enable(5),A.morphNormals&&s.enable(6),A.morphColors&&s.enable(7),A.premultipliedAlpha&&s.enable(8),A.shadowMapEnabled&&s.enable(9),A.useLegacyLights&&s.enable(10),A.doubleSided&&s.enable(11),A.flipSided&&s.enable(12),A.useDepthPacking&&s.enable(13),A.dithering&&s.enable(14),A.transmission&&s.enable(15),A.sheen&&s.enable(16),A.opaque&&s.enable(17),A.pointsUvs&&s.enable(18),E.push(s.mask)}function S(E){const A=m[E.type];let O;if(A){const D=Tr[A];O=_O.clone(D.uniforms)}else O=E.uniforms;return O}function w(E,A){let O;for(let D=0,L=c.length;D<L;D++){const U=c[D];if(U.cacheKey===A){O=U,++O.usedTimes;break}}return O===void 0&&(O=new MN(t,A,E,a),c.push(O)),O}function C(E){if(--E.usedTimes===0){const A=c.indexOf(E);c[A]=c[c.length-1],c.pop(),E.destroy()}}function x(E){o.remove(E)}function M(){o.dispose()}return{getParameters:p,getProgramCacheKey:v,getUniforms:S,acquireProgram:w,releaseProgram:C,releaseShaderCache:x,programs:c,dispose:M}}function ON(){let t=new WeakMap;function e(a){let d=t.get(a);return d===void 0&&(d={},t.set(a,d)),d}function n(a){t.delete(a)}function i(a,d,s){t.get(a)[d]=s}function r(){t=new WeakMap}return{get:e,remove:n,update:i,dispose:r}}function LN(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function Qb(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function e_(){const t=[];let e=0;const n=[],i=[],r=[];function a(){e=0,n.length=0,i.length=0,r.length=0}function d(l,u,f,m,g,p){let v=t[e];return v===void 0?(v={id:l.id,object:l,geometry:u,material:f,groupOrder:m,renderOrder:l.renderOrder,z:g,group:p},t[e]=v):(v.id=l.id,v.object=l,v.geometry=u,v.material=f,v.groupOrder=m,v.renderOrder=l.renderOrder,v.z=g,v.group=p),e++,v}function s(l,u,f,m,g,p){const v=d(l,u,f,m,g,p);f.transmission>0?i.push(v):f.transparent===!0?r.push(v):n.push(v)}function o(l,u,f,m,g,p){const v=d(l,u,f,m,g,p);f.transmission>0?i.unshift(v):f.transparent===!0?r.unshift(v):n.unshift(v)}function c(l,u){n.length>1&&n.sort(l||LN),i.length>1&&i.sort(u||Qb),r.length>1&&r.sort(u||Qb)}function h(){for(let l=e,u=t.length;l<u;l++){const f=t[l];if(f.id===null)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}}return{opaque:n,transmissive:i,transparent:r,init:a,push:s,unshift:o,finish:h,sort:c}}function IN(){let t=new WeakMap;function e(i,r){const a=t.get(i);let d;return a===void 0?(d=new e_,t.set(i,[d])):r>=a.length?(d=new e_,a.push(d)):d=a[r],d}function n(){t=new WeakMap}return{get:e,dispose:n}}function DN(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new Fe,color:new Nt};break;case"SpotLight":n={position:new Fe,direction:new Fe,color:new Nt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Fe,color:new Nt,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Fe,skyColor:new Nt,groundColor:new Nt};break;case"RectAreaLight":n={color:new Nt,position:new Fe,halfWidth:new Fe,halfHeight:new Fe};break}return t[e.id]=n,n}}}function NN(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new It};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new It};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new It,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let FN=0;function BN(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function UN(t,e){const n=new DN,i=NN(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let h=0;h<9;h++)r.probe.push(new Fe);const a=new Fe,d=new Gt,s=new Gt;function o(h,l){let u=0,f=0,m=0;for(let O=0;O<9;O++)r.probe[O].set(0,0,0);let g=0,p=0,v=0,b=0,_=0,S=0,w=0,C=0,x=0,M=0;h.sort(BN);const E=l===!0?Math.PI:1;for(let O=0,D=h.length;O<D;O++){const L=h[O],U=L.color,j=L.intensity,V=L.distance,k=L.shadow&&L.shadow.map?L.shadow.map.texture:null;if(L.isAmbientLight)u+=U.r*j*E,f+=U.g*j*E,m+=U.b*j*E;else if(L.isLightProbe)for(let F=0;F<9;F++)r.probe[F].addScaledVector(L.sh.coefficients[F],j);else if(L.isDirectionalLight){const F=n.get(L);if(F.color.copy(L.color).multiplyScalar(L.intensity*E),L.castShadow){const T=L.shadow,P=i.get(L);P.shadowBias=T.bias,P.shadowNormalBias=T.normalBias,P.shadowRadius=T.radius,P.shadowMapSize=T.mapSize,r.directionalShadow[g]=P,r.directionalShadowMap[g]=k,r.directionalShadowMatrix[g]=L.shadow.matrix,S++}r.directional[g]=F,g++}else if(L.isSpotLight){const F=n.get(L);F.position.setFromMatrixPosition(L.matrixWorld),F.color.copy(U).multiplyScalar(j*E),F.distance=V,F.coneCos=Math.cos(L.angle),F.penumbraCos=Math.cos(L.angle*(1-L.penumbra)),F.decay=L.decay,r.spot[v]=F;const T=L.shadow;if(L.map&&(r.spotLightMap[x]=L.map,x++,T.updateMatrices(L),L.castShadow&&M++),r.spotLightMatrix[v]=T.matrix,L.castShadow){const P=i.get(L);P.shadowBias=T.bias,P.shadowNormalBias=T.normalBias,P.shadowRadius=T.radius,P.shadowMapSize=T.mapSize,r.spotShadow[v]=P,r.spotShadowMap[v]=k,C++}v++}else if(L.isRectAreaLight){const F=n.get(L);F.color.copy(U).multiplyScalar(j),F.halfWidth.set(L.width*.5,0,0),F.halfHeight.set(0,L.height*.5,0),r.rectArea[b]=F,b++}else if(L.isPointLight){const F=n.get(L);if(F.color.copy(L.color).multiplyScalar(L.intensity*E),F.distance=L.distance,F.decay=L.decay,L.castShadow){const T=L.shadow,P=i.get(L);P.shadowBias=T.bias,P.shadowNormalBias=T.normalBias,P.shadowRadius=T.radius,P.shadowMapSize=T.mapSize,P.shadowCameraNear=T.camera.near,P.shadowCameraFar=T.camera.far,r.pointShadow[p]=P,r.pointShadowMap[p]=k,r.pointShadowMatrix[p]=L.shadow.matrix,w++}r.point[p]=F,p++}else if(L.isHemisphereLight){const F=n.get(L);F.skyColor.copy(L.color).multiplyScalar(j*E),F.groundColor.copy(L.groundColor).multiplyScalar(j*E),r.hemi[_]=F,_++}}b>0&&(e.isWebGL2||t.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=ut.LTC_FLOAT_1,r.rectAreaLTC2=ut.LTC_FLOAT_2):t.has("OES_texture_half_float_linear")===!0?(r.rectAreaLTC1=ut.LTC_HALF_1,r.rectAreaLTC2=ut.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=u,r.ambient[1]=f,r.ambient[2]=m;const A=r.hash;(A.directionalLength!==g||A.pointLength!==p||A.spotLength!==v||A.rectAreaLength!==b||A.hemiLength!==_||A.numDirectionalShadows!==S||A.numPointShadows!==w||A.numSpotShadows!==C||A.numSpotMaps!==x)&&(r.directional.length=g,r.spot.length=v,r.rectArea.length=b,r.point.length=p,r.hemi.length=_,r.directionalShadow.length=S,r.directionalShadowMap.length=S,r.pointShadow.length=w,r.pointShadowMap.length=w,r.spotShadow.length=C,r.spotShadowMap.length=C,r.directionalShadowMatrix.length=S,r.pointShadowMatrix.length=w,r.spotLightMatrix.length=C+x-M,r.spotLightMap.length=x,r.numSpotLightShadowsWithMaps=M,A.directionalLength=g,A.pointLength=p,A.spotLength=v,A.rectAreaLength=b,A.hemiLength=_,A.numDirectionalShadows=S,A.numPointShadows=w,A.numSpotShadows=C,A.numSpotMaps=x,r.version=FN++)}function c(h,l){let u=0,f=0,m=0,g=0,p=0;const v=l.matrixWorldInverse;for(let b=0,_=h.length;b<_;b++){const S=h[b];if(S.isDirectionalLight){const w=r.directional[u];w.direction.setFromMatrixPosition(S.matrixWorld),a.setFromMatrixPosition(S.target.matrixWorld),w.direction.sub(a),w.direction.transformDirection(v),u++}else if(S.isSpotLight){const w=r.spot[m];w.position.setFromMatrixPosition(S.matrixWorld),w.position.applyMatrix4(v),w.direction.setFromMatrixPosition(S.matrixWorld),a.setFromMatrixPosition(S.target.matrixWorld),w.direction.sub(a),w.direction.transformDirection(v),m++}else if(S.isRectAreaLight){const w=r.rectArea[g];w.position.setFromMatrixPosition(S.matrixWorld),w.position.applyMatrix4(v),s.identity(),d.copy(S.matrixWorld),d.premultiply(v),s.extractRotation(d),w.halfWidth.set(S.width*.5,0,0),w.halfHeight.set(0,S.height*.5,0),w.halfWidth.applyMatrix4(s),w.halfHeight.applyMatrix4(s),g++}else if(S.isPointLight){const w=r.point[f];w.position.setFromMatrixPosition(S.matrixWorld),w.position.applyMatrix4(v),f++}else if(S.isHemisphereLight){const w=r.hemi[p];w.direction.setFromMatrixPosition(S.matrixWorld),w.direction.transformDirection(v),p++}}}return{setup:o,setupView:c,state:r}}function t_(t,e){const n=new UN(t,e),i=[],r=[];function a(){i.length=0,r.length=0}function d(l){i.push(l)}function s(l){r.push(l)}function o(l){n.setup(i,l)}function c(l){n.setupView(i,l)}return{init:a,state:{lightsArray:i,shadowsArray:r,lights:n},setupLights:o,setupLightsView:c,pushLight:d,pushShadow:s}}function VN(t,e){let n=new WeakMap;function i(a,d=0){const s=n.get(a);let o;return s===void 0?(o=new t_(t,e),n.set(a,[o])):d>=s.length?(o=new t_(t,e),s.push(o)):o=s[d],o}function r(){n=new WeakMap}return{get:i,dispose:r}}class HN extends mr{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=FP,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class zN extends mr{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const $N=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,WN=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function GN(t,e,n){let i=new fv;const r=new It,a=new It,d=new fn,s=new HN({depthPacking:BP}),o=new zN,c={},h=n.maxTextureSize,l={[hs]:Si,[Si]:hs,[ur]:ur},u=new ea({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new It},radius:{value:4}},vertexShader:$N,fragmentShader:WN}),f=u.clone();f.defines.HORIZONTAL_PASS=1;const m=new Br;m.setAttribute("position",new ci(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const g=new _i(m,u),p=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=L1;let v=this.type;this.render=function(w,C,x){if(p.enabled===!1||p.autoUpdate===!1&&p.needsUpdate===!1||w.length===0)return;const M=t.getRenderTarget(),E=t.getActiveCubeFace(),A=t.getActiveMipmapLevel(),O=t.state;O.setBlending(Ys),O.buffers.color.setClear(1,1,1,1),O.buffers.depth.setTest(!0),O.setScissorTest(!1);const D=v!==Jr&&this.type===Jr,L=v===Jr&&this.type!==Jr;for(let U=0,j=w.length;U<j;U++){const V=w[U],k=V.shadow;if(k===void 0){console.warn("THREE.WebGLShadowMap:",V,"has no shadow.");continue}if(k.autoUpdate===!1&&k.needsUpdate===!1)continue;r.copy(k.mapSize);const F=k.getFrameExtents();if(r.multiply(F),a.copy(k.mapSize),(r.x>h||r.y>h)&&(r.x>h&&(a.x=Math.floor(h/F.x),r.x=a.x*F.x,k.mapSize.x=a.x),r.y>h&&(a.y=Math.floor(h/F.y),r.y=a.y*F.y,k.mapSize.y=a.y)),k.map===null||D===!0||L===!0){const P=this.type!==Jr?{minFilter:Bn,magFilter:Bn}:{};k.map!==null&&k.map.dispose(),k.map=new Qo(r.x,r.y,P),k.map.texture.name=V.name+".shadowMap",k.camera.updateProjectionMatrix()}t.setRenderTarget(k.map),t.clear();const T=k.getViewportCount();for(let P=0;P<T;P++){const H=k.getViewport(P);d.set(a.x*H.x,a.y*H.y,a.x*H.z,a.y*H.w),O.viewport(d),k.updateMatrices(V,P),i=k.getFrustum(),S(C,x,k.camera,V,this.type)}k.isPointLightShadow!==!0&&this.type===Jr&&b(k,x),k.needsUpdate=!1}v=this.type,p.needsUpdate=!1,t.setRenderTarget(M,E,A)};function b(w,C){const x=e.update(g);u.defines.VSM_SAMPLES!==w.blurSamples&&(u.defines.VSM_SAMPLES=w.blurSamples,f.defines.VSM_SAMPLES=w.blurSamples,u.needsUpdate=!0,f.needsUpdate=!0),w.mapPass===null&&(w.mapPass=new Qo(r.x,r.y)),u.uniforms.shadow_pass.value=w.map.texture,u.uniforms.resolution.value=w.mapSize,u.uniforms.radius.value=w.radius,t.setRenderTarget(w.mapPass),t.clear(),t.renderBufferDirect(C,null,x,u,g,null),f.uniforms.shadow_pass.value=w.mapPass.texture,f.uniforms.resolution.value=w.mapSize,f.uniforms.radius.value=w.radius,t.setRenderTarget(w.map),t.clear(),t.renderBufferDirect(C,null,x,f,g,null)}function _(w,C,x,M){let E=null;const A=x.isPointLight===!0?w.customDistanceMaterial:w.customDepthMaterial;if(A!==void 0)E=A;else if(E=x.isPointLight===!0?o:s,t.localClippingEnabled&&C.clipShadows===!0&&Array.isArray(C.clippingPlanes)&&C.clippingPlanes.length!==0||C.displacementMap&&C.displacementScale!==0||C.alphaMap&&C.alphaTest>0||C.map&&C.alphaTest>0){const O=E.uuid,D=C.uuid;let L=c[O];L===void 0&&(L={},c[O]=L);let U=L[D];U===void 0&&(U=E.clone(),L[D]=U),E=U}if(E.visible=C.visible,E.wireframe=C.wireframe,M===Jr?E.side=C.shadowSide!==null?C.shadowSide:C.side:E.side=C.shadowSide!==null?C.shadowSide:l[C.side],E.alphaMap=C.alphaMap,E.alphaTest=C.alphaTest,E.map=C.map,E.clipShadows=C.clipShadows,E.clippingPlanes=C.clippingPlanes,E.clipIntersection=C.clipIntersection,E.displacementMap=C.displacementMap,E.displacementScale=C.displacementScale,E.displacementBias=C.displacementBias,E.wireframeLinewidth=C.wireframeLinewidth,E.linewidth=C.linewidth,x.isPointLight===!0&&E.isMeshDistanceMaterial===!0){const O=t.properties.get(E);O.light=x}return E}function S(w,C,x,M,E){if(w.visible===!1)return;if(w.layers.test(C.layers)&&(w.isMesh||w.isLine||w.isPoints)&&(w.castShadow||w.receiveShadow&&E===Jr)&&(!w.frustumCulled||i.intersectsObject(w))){w.modelViewMatrix.multiplyMatrices(x.matrixWorldInverse,w.matrixWorld);const D=e.update(w),L=w.material;if(Array.isArray(L)){const U=D.groups;for(let j=0,V=U.length;j<V;j++){const k=U[j],F=L[k.materialIndex];if(F&&F.visible){const T=_(w,F,M,E);t.renderBufferDirect(x,null,D,T,w,k)}}}else if(L.visible){const U=_(w,L,M,E);t.renderBufferDirect(x,null,D,U,w,null)}}const O=w.children;for(let D=0,L=O.length;D<L;D++)S(O[D],C,x,M,E)}}function jN(t,e,n){const i=n.isWebGL2;function r(){let we=!1;const Ie=new fn;let Ge=null;const it=new fn(0,0,0,0);return{setMask:function(dt){Ge!==dt&&!we&&(t.colorMask(dt,dt,dt,dt),Ge=dt)},setLocked:function(dt){we=dt},setClear:function(dt,De,Ke,ht,zt){zt===!0&&(dt*=ht,De*=ht,Ke*=ht),Ie.set(dt,De,Ke,ht),it.equals(Ie)===!1&&(t.clearColor(dt,De,Ke,ht),it.copy(Ie))},reset:function(){we=!1,Ge=null,it.set(-1,0,0,0)}}}function a(){let we=!1,Ie=null,Ge=null,it=null;return{setTest:function(dt){dt?W(t.DEPTH_TEST):te(t.DEPTH_TEST)},setMask:function(dt){Ie!==dt&&!we&&(t.depthMask(dt),Ie=dt)},setFunc:function(dt){if(Ge!==dt){switch(dt){case oP:t.depthFunc(t.NEVER);break;case aP:t.depthFunc(t.ALWAYS);break;case lP:t.depthFunc(t.LESS);break;case bm:t.depthFunc(t.LEQUAL);break;case cP:t.depthFunc(t.EQUAL);break;case uP:t.depthFunc(t.GEQUAL);break;case dP:t.depthFunc(t.GREATER);break;case fP:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}Ge=dt}},setLocked:function(dt){we=dt},setClear:function(dt){it!==dt&&(t.clearDepth(dt),it=dt)},reset:function(){we=!1,Ie=null,Ge=null,it=null}}}function d(){let we=!1,Ie=null,Ge=null,it=null,dt=null,De=null,Ke=null,ht=null,zt=null;return{setTest:function(Zt){we||(Zt?W(t.STENCIL_TEST):te(t.STENCIL_TEST))},setMask:function(Zt){Ie!==Zt&&!we&&(t.stencilMask(Zt),Ie=Zt)},setFunc:function(Zt,_n,ei){(Ge!==Zt||it!==_n||dt!==ei)&&(t.stencilFunc(Zt,_n,ei),Ge=Zt,it=_n,dt=ei)},setOp:function(Zt,_n,ei){(De!==Zt||Ke!==_n||ht!==ei)&&(t.stencilOp(Zt,_n,ei),De=Zt,Ke=_n,ht=ei)},setLocked:function(Zt){we=Zt},setClear:function(Zt){zt!==Zt&&(t.clearStencil(Zt),zt=Zt)},reset:function(){we=!1,Ie=null,Ge=null,it=null,dt=null,De=null,Ke=null,ht=null,zt=null}}}const s=new r,o=new a,c=new d,h=new WeakMap,l=new WeakMap;let u={},f={},m=new WeakMap,g=[],p=null,v=!1,b=null,_=null,S=null,w=null,C=null,x=null,M=null,E=!1,A=null,O=null,D=null,L=null,U=null;const j=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let V=!1,k=0;const F=t.getParameter(t.VERSION);F.indexOf("WebGL")!==-1?(k=parseFloat(/^WebGL (\d)/.exec(F)[1]),V=k>=1):F.indexOf("OpenGL ES")!==-1&&(k=parseFloat(/^OpenGL ES (\d)/.exec(F)[1]),V=k>=2);let T=null,P={};const H=t.getParameter(t.SCISSOR_BOX),N=t.getParameter(t.VIEWPORT),G=new fn().fromArray(H),$=new fn().fromArray(N);function z(we,Ie,Ge,it){const dt=new Uint8Array(4),De=t.createTexture();t.bindTexture(we,De),t.texParameteri(we,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(we,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let Ke=0;Ke<Ge;Ke++)i&&(we===t.TEXTURE_3D||we===t.TEXTURE_2D_ARRAY)?t.texImage3D(Ie,0,t.RGBA,1,1,it,0,t.RGBA,t.UNSIGNED_BYTE,dt):t.texImage2D(Ie+Ke,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,dt);return De}const Z={};Z[t.TEXTURE_2D]=z(t.TEXTURE_2D,t.TEXTURE_2D,1),Z[t.TEXTURE_CUBE_MAP]=z(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),i&&(Z[t.TEXTURE_2D_ARRAY]=z(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),Z[t.TEXTURE_3D]=z(t.TEXTURE_3D,t.TEXTURE_3D,1,1)),s.setClear(0,0,0,1),o.setClear(1),c.setClear(0),W(t.DEPTH_TEST),o.setFunc(bm),ge(!1),se(Uy),W(t.CULL_FACE),Q(Ys);function W(we){u[we]!==!0&&(t.enable(we),u[we]=!0)}function te(we){u[we]!==!1&&(t.disable(we),u[we]=!1)}function ie(we,Ie){return f[we]!==Ie?(t.bindFramebuffer(we,Ie),f[we]=Ie,i&&(we===t.DRAW_FRAMEBUFFER&&(f[t.FRAMEBUFFER]=Ie),we===t.FRAMEBUFFER&&(f[t.DRAW_FRAMEBUFFER]=Ie)),!0):!1}function re(we,Ie){let Ge=g,it=!1;if(we)if(Ge=m.get(Ie),Ge===void 0&&(Ge=[],m.set(Ie,Ge)),we.isWebGLMultipleRenderTargets){const dt=we.texture;if(Ge.length!==dt.length||Ge[0]!==t.COLOR_ATTACHMENT0){for(let De=0,Ke=dt.length;De<Ke;De++)Ge[De]=t.COLOR_ATTACHMENT0+De;Ge.length=dt.length,it=!0}}else Ge[0]!==t.COLOR_ATTACHMENT0&&(Ge[0]=t.COLOR_ATTACHMENT0,it=!0);else Ge[0]!==t.BACK&&(Ge[0]=t.BACK,it=!0);it&&(n.isWebGL2?t.drawBuffers(Ge):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Ge))}function _e(we){return p!==we?(t.useProgram(we),p=we,!0):!1}const Pe={[Ua]:t.FUNC_ADD,[YR]:t.FUNC_SUBTRACT,[qR]:t.FUNC_REVERSE_SUBTRACT};if(i)Pe[$y]=t.MIN,Pe[Wy]=t.MAX;else{const we=e.get("EXT_blend_minmax");we!==null&&(Pe[$y]=we.MIN_EXT,Pe[Wy]=we.MAX_EXT)}const K={[ZR]:t.ZERO,[JR]:t.ONE,[QR]:t.SRC_COLOR,[I1]:t.SRC_ALPHA,[sP]:t.SRC_ALPHA_SATURATE,[iP]:t.DST_COLOR,[tP]:t.DST_ALPHA,[eP]:t.ONE_MINUS_SRC_COLOR,[D1]:t.ONE_MINUS_SRC_ALPHA,[rP]:t.ONE_MINUS_DST_COLOR,[nP]:t.ONE_MINUS_DST_ALPHA};function Q(we,Ie,Ge,it,dt,De,Ke,ht){if(we===Ys){v===!0&&(te(t.BLEND),v=!1);return}if(v===!1&&(W(t.BLEND),v=!0),we!==KR){if(we!==b||ht!==E){if((_!==Ua||C!==Ua)&&(t.blendEquation(t.FUNC_ADD),_=Ua,C=Ua),ht)switch(we){case Qa:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case Vy:t.blendFunc(t.ONE,t.ONE);break;case Hy:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case zy:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",we);break}else switch(we){case Qa:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case Vy:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case Hy:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case zy:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",we);break}S=null,w=null,x=null,M=null,b=we,E=ht}return}dt=dt||Ie,De=De||Ge,Ke=Ke||it,(Ie!==_||dt!==C)&&(t.blendEquationSeparate(Pe[Ie],Pe[dt]),_=Ie,C=dt),(Ge!==S||it!==w||De!==x||Ke!==M)&&(t.blendFuncSeparate(K[Ge],K[it],K[De],K[Ke]),S=Ge,w=it,x=De,M=Ke),b=we,E=!1}function fe(we,Ie){we.side===ur?te(t.CULL_FACE):W(t.CULL_FACE);let Ge=we.side===Si;Ie&&(Ge=!Ge),ge(Ge),we.blending===Qa&&we.transparent===!1?Q(Ys):Q(we.blending,we.blendEquation,we.blendSrc,we.blendDst,we.blendEquationAlpha,we.blendSrcAlpha,we.blendDstAlpha,we.premultipliedAlpha),o.setFunc(we.depthFunc),o.setTest(we.depthTest),o.setMask(we.depthWrite),s.setMask(we.colorWrite);const it=we.stencilWrite;c.setTest(it),it&&(c.setMask(we.stencilWriteMask),c.setFunc(we.stencilFunc,we.stencilRef,we.stencilFuncMask),c.setOp(we.stencilFail,we.stencilZFail,we.stencilZPass)),be(we.polygonOffset,we.polygonOffsetFactor,we.polygonOffsetUnits),we.alphaToCoverage===!0?W(t.SAMPLE_ALPHA_TO_COVERAGE):te(t.SAMPLE_ALPHA_TO_COVERAGE)}function ge(we){A!==we&&(we?t.frontFace(t.CW):t.frontFace(t.CCW),A=we)}function se(we){we!==GR?(W(t.CULL_FACE),we!==O&&(we===Uy?t.cullFace(t.BACK):we===jR?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):te(t.CULL_FACE),O=we}function me(we){we!==D&&(V&&t.lineWidth(we),D=we)}function be(we,Ie,Ge){we?(W(t.POLYGON_OFFSET_FILL),(L!==Ie||U!==Ge)&&(t.polygonOffset(Ie,Ge),L=Ie,U=Ge)):te(t.POLYGON_OFFSET_FILL)}function Me(we){we?W(t.SCISSOR_TEST):te(t.SCISSOR_TEST)}function Ee(we){we===void 0&&(we=t.TEXTURE0+j-1),T!==we&&(t.activeTexture(we),T=we)}function X(we,Ie,Ge){Ge===void 0&&(T===null?Ge=t.TEXTURE0+j-1:Ge=T);let it=P[Ge];it===void 0&&(it={type:void 0,texture:void 0},P[Ge]=it),(it.type!==we||it.texture!==Ie)&&(T!==Ge&&(t.activeTexture(Ge),T=Ge),t.bindTexture(we,Ie||Z[we]),it.type=we,it.texture=Ie)}function Y(){const we=P[T];we!==void 0&&we.type!==void 0&&(t.bindTexture(we.type,null),we.type=void 0,we.texture=void 0)}function le(){try{t.compressedTexImage2D.apply(t,arguments)}catch(we){console.error("THREE.WebGLState:",we)}}function Ce(){try{t.compressedTexImage3D.apply(t,arguments)}catch(we){console.error("THREE.WebGLState:",we)}}function Re(){try{t.texSubImage2D.apply(t,arguments)}catch(we){console.error("THREE.WebGLState:",we)}}function Ne(){try{t.texSubImage3D.apply(t,arguments)}catch(we){console.error("THREE.WebGLState:",we)}}function he(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(we){console.error("THREE.WebGLState:",we)}}function pe(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(we){console.error("THREE.WebGLState:",we)}}function ee(){try{t.texStorage2D.apply(t,arguments)}catch(we){console.error("THREE.WebGLState:",we)}}function oe(){try{t.texStorage3D.apply(t,arguments)}catch(we){console.error("THREE.WebGLState:",we)}}function J(){try{t.texImage2D.apply(t,arguments)}catch(we){console.error("THREE.WebGLState:",we)}}function ce(){try{t.texImage3D.apply(t,arguments)}catch(we){console.error("THREE.WebGLState:",we)}}function ye(we){G.equals(we)===!1&&(t.scissor(we.x,we.y,we.z,we.w),G.copy(we))}function Oe(we){$.equals(we)===!1&&(t.viewport(we.x,we.y,we.z,we.w),$.copy(we))}function ze(we,Ie){let Ge=l.get(Ie);Ge===void 0&&(Ge=new WeakMap,l.set(Ie,Ge));let it=Ge.get(we);it===void 0&&(it=t.getUniformBlockIndex(Ie,we.name),Ge.set(we,it))}function xe(we,Ie){const it=l.get(Ie).get(we);h.get(Ie)!==it&&(t.uniformBlockBinding(Ie,it,we.__bindingPointIndex),h.set(Ie,it))}function Ve(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),i===!0&&(t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),u={},T=null,P={},f={},m=new WeakMap,g=[],p=null,v=!1,b=null,_=null,S=null,w=null,C=null,x=null,M=null,E=!1,A=null,O=null,D=null,L=null,U=null,G.set(0,0,t.canvas.width,t.canvas.height),$.set(0,0,t.canvas.width,t.canvas.height),s.reset(),o.reset(),c.reset()}return{buffers:{color:s,depth:o,stencil:c},enable:W,disable:te,bindFramebuffer:ie,drawBuffers:re,useProgram:_e,setBlending:Q,setMaterial:fe,setFlipSided:ge,setCullFace:se,setLineWidth:me,setPolygonOffset:be,setScissorTest:Me,activeTexture:Ee,bindTexture:X,unbindTexture:Y,compressedTexImage2D:le,compressedTexImage3D:Ce,texImage2D:J,texImage3D:ce,updateUBOMapping:ze,uniformBlockBinding:xe,texStorage2D:ee,texStorage3D:oe,texSubImage2D:Re,texSubImage3D:Ne,compressedTexSubImage2D:he,compressedTexSubImage3D:pe,scissor:ye,viewport:Oe,reset:Ve}}function XN(t,e,n,i,r,a,d){const s=r.isWebGL2,o=r.maxTextures,c=r.maxCubemapSize,h=r.maxTextureSize,l=r.maxSamples,u=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,f=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),m=new WeakMap;let g;const p=new WeakMap;let v=!1;try{v=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function b(X,Y){return v?new OffscreenCanvas(X,Y):qc("canvas")}function _(X,Y,le,Ce){let Re=1;if((X.width>Ce||X.height>Ce)&&(Re=Ce/Math.max(X.width,X.height)),Re<1||Y===!0)if(typeof HTMLImageElement<"u"&&X instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&X instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&X instanceof ImageBitmap){const Ne=Y?$1:Math.floor,he=Ne(Re*X.width),pe=Ne(Re*X.height);g===void 0&&(g=b(he,pe));const ee=le?b(he,pe):g;return ee.width=he,ee.height=pe,ee.getContext("2d").drawImage(X,0,0,he,pe),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+X.width+"x"+X.height+") to ("+he+"x"+pe+")."),ee}else return"data"in X&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+X.width+"x"+X.height+")."),X;return X}function S(X){return Em(X.width)&&Em(X.height)}function w(X){return s?!1:X.wrapS!==Hi||X.wrapT!==Hi||X.minFilter!==Bn&&X.minFilter!==qn}function C(X,Y){return X.generateMipmaps&&Y&&X.minFilter!==Bn&&X.minFilter!==qn}function x(X){t.generateMipmap(X)}function M(X,Y,le,Ce,Re=!1){if(s===!1)return Y;if(X!==null){if(t[X]!==void 0)return t[X];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+X+"'")}let Ne=Y;return Y===t.RED&&(le===t.FLOAT&&(Ne=t.R32F),le===t.HALF_FLOAT&&(Ne=t.R16F),le===t.UNSIGNED_BYTE&&(Ne=t.R8)),Y===t.RG&&(le===t.FLOAT&&(Ne=t.RG32F),le===t.HALF_FLOAT&&(Ne=t.RG16F),le===t.UNSIGNED_BYTE&&(Ne=t.RG8)),Y===t.RGBA&&(le===t.FLOAT&&(Ne=t.RGBA32F),le===t.HALF_FLOAT&&(Ne=t.RGBA16F),le===t.UNSIGNED_BYTE&&(Ne=Ce===Ot&&Re===!1?t.SRGB8_ALPHA8:t.RGBA8),le===t.UNSIGNED_SHORT_4_4_4_4&&(Ne=t.RGBA4),le===t.UNSIGNED_SHORT_5_5_5_1&&(Ne=t.RGB5_A1)),(Ne===t.R16F||Ne===t.R32F||Ne===t.RG16F||Ne===t.RG32F||Ne===t.RGBA16F||Ne===t.RGBA32F)&&e.get("EXT_color_buffer_float"),Ne}function E(X,Y,le){return C(X,le)===!0||X.isFramebufferTexture&&X.minFilter!==Bn&&X.minFilter!==qn?Math.log2(Math.max(Y.width,Y.height))+1:X.mipmaps!==void 0&&X.mipmaps.length>0?X.mipmaps.length:X.isCompressedTexture&&Array.isArray(X.image)?Y.mipmaps.length:1}function A(X){return X===Bn||X===wm||X===Gd?t.NEAREST:t.LINEAR}function O(X){const Y=X.target;Y.removeEventListener("dispose",O),L(Y),Y.isVideoTexture&&m.delete(Y)}function D(X){const Y=X.target;Y.removeEventListener("dispose",D),j(Y)}function L(X){const Y=i.get(X);if(Y.__webglInit===void 0)return;const le=X.source,Ce=p.get(le);if(Ce){const Re=Ce[Y.__cacheKey];Re.usedTimes--,Re.usedTimes===0&&U(X),Object.keys(Ce).length===0&&p.delete(le)}i.remove(X)}function U(X){const Y=i.get(X);t.deleteTexture(Y.__webglTexture);const le=X.source,Ce=p.get(le);delete Ce[Y.__cacheKey],d.memory.textures--}function j(X){const Y=X.texture,le=i.get(X),Ce=i.get(Y);if(Ce.__webglTexture!==void 0&&(t.deleteTexture(Ce.__webglTexture),d.memory.textures--),X.depthTexture&&X.depthTexture.dispose(),X.isWebGLCubeRenderTarget)for(let Re=0;Re<6;Re++)t.deleteFramebuffer(le.__webglFramebuffer[Re]),le.__webglDepthbuffer&&t.deleteRenderbuffer(le.__webglDepthbuffer[Re]);else{if(t.deleteFramebuffer(le.__webglFramebuffer),le.__webglDepthbuffer&&t.deleteRenderbuffer(le.__webglDepthbuffer),le.__webglMultisampledFramebuffer&&t.deleteFramebuffer(le.__webglMultisampledFramebuffer),le.__webglColorRenderbuffer)for(let Re=0;Re<le.__webglColorRenderbuffer.length;Re++)le.__webglColorRenderbuffer[Re]&&t.deleteRenderbuffer(le.__webglColorRenderbuffer[Re]);le.__webglDepthRenderbuffer&&t.deleteRenderbuffer(le.__webglDepthRenderbuffer)}if(X.isWebGLMultipleRenderTargets)for(let Re=0,Ne=Y.length;Re<Ne;Re++){const he=i.get(Y[Re]);he.__webglTexture&&(t.deleteTexture(he.__webglTexture),d.memory.textures--),i.remove(Y[Re])}i.remove(Y),i.remove(X)}let V=0;function k(){V=0}function F(){const X=V;return X>=o&&console.warn("THREE.WebGLTextures: Trying to use "+X+" texture units while this GPU supports only "+o),V+=1,X}function T(X){const Y=[];return Y.push(X.wrapS),Y.push(X.wrapT),Y.push(X.wrapR||0),Y.push(X.magFilter),Y.push(X.minFilter),Y.push(X.anisotropy),Y.push(X.internalFormat),Y.push(X.format),Y.push(X.type),Y.push(X.generateMipmaps),Y.push(X.premultiplyAlpha),Y.push(X.flipY),Y.push(X.unpackAlignment),Y.push(X.colorSpace),Y.join()}function P(X,Y){const le=i.get(X);if(X.isVideoTexture&&Me(X),X.isRenderTargetTexture===!1&&X.version>0&&le.__version!==X.version){const Ce=X.image;if(Ce===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Ce.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{te(le,X,Y);return}}n.bindTexture(t.TEXTURE_2D,le.__webglTexture,t.TEXTURE0+Y)}function H(X,Y){const le=i.get(X);if(X.version>0&&le.__version!==X.version){te(le,X,Y);return}n.bindTexture(t.TEXTURE_2D_ARRAY,le.__webglTexture,t.TEXTURE0+Y)}function N(X,Y){const le=i.get(X);if(X.version>0&&le.__version!==X.version){te(le,X,Y);return}n.bindTexture(t.TEXTURE_3D,le.__webglTexture,t.TEXTURE0+Y)}function G(X,Y){const le=i.get(X);if(X.version>0&&le.__version!==X.version){ie(le,X,Y);return}n.bindTexture(t.TEXTURE_CUBE_MAP,le.__webglTexture,t.TEXTURE0+Y)}const $={[vl]:t.REPEAT,[Hi]:t.CLAMP_TO_EDGE,[yl]:t.MIRRORED_REPEAT},z={[Bn]:t.NEAREST,[wm]:t.NEAREST_MIPMAP_NEAREST,[Gd]:t.NEAREST_MIPMAP_LINEAR,[qn]:t.LINEAR,[F1]:t.LINEAR_MIPMAP_NEAREST,[Zo]:t.LINEAR_MIPMAP_LINEAR};function Z(X,Y,le){if(le?(t.texParameteri(X,t.TEXTURE_WRAP_S,$[Y.wrapS]),t.texParameteri(X,t.TEXTURE_WRAP_T,$[Y.wrapT]),(X===t.TEXTURE_3D||X===t.TEXTURE_2D_ARRAY)&&t.texParameteri(X,t.TEXTURE_WRAP_R,$[Y.wrapR]),t.texParameteri(X,t.TEXTURE_MAG_FILTER,z[Y.magFilter]),t.texParameteri(X,t.TEXTURE_MIN_FILTER,z[Y.minFilter])):(t.texParameteri(X,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(X,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),(X===t.TEXTURE_3D||X===t.TEXTURE_2D_ARRAY)&&t.texParameteri(X,t.TEXTURE_WRAP_R,t.CLAMP_TO_EDGE),(Y.wrapS!==Hi||Y.wrapT!==Hi)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(X,t.TEXTURE_MAG_FILTER,A(Y.magFilter)),t.texParameteri(X,t.TEXTURE_MIN_FILTER,A(Y.minFilter)),Y.minFilter!==Bn&&Y.minFilter!==qn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const Ce=e.get("EXT_texture_filter_anisotropic");if(Y.magFilter===Bn||Y.minFilter!==Gd&&Y.minFilter!==Zo||Y.type===$s&&e.has("OES_texture_float_linear")===!1||s===!1&&Y.type===Kc&&e.has("OES_texture_half_float_linear")===!1)return;(Y.anisotropy>1||i.get(Y).__currentAnisotropy)&&(t.texParameterf(X,Ce.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Y.anisotropy,r.getMaxAnisotropy())),i.get(Y).__currentAnisotropy=Y.anisotropy)}}function W(X,Y){let le=!1;X.__webglInit===void 0&&(X.__webglInit=!0,Y.addEventListener("dispose",O));const Ce=Y.source;let Re=p.get(Ce);Re===void 0&&(Re={},p.set(Ce,Re));const Ne=T(Y);if(Ne!==X.__cacheKey){Re[Ne]===void 0&&(Re[Ne]={texture:t.createTexture(),usedTimes:0},d.memory.textures++,le=!0),Re[Ne].usedTimes++;const he=Re[X.__cacheKey];he!==void 0&&(Re[X.__cacheKey].usedTimes--,he.usedTimes===0&&U(Y)),X.__cacheKey=Ne,X.__webglTexture=Re[Ne].texture}return le}function te(X,Y,le){let Ce=t.TEXTURE_2D;(Y.isDataArrayTexture||Y.isCompressedArrayTexture)&&(Ce=t.TEXTURE_2D_ARRAY),Y.isData3DTexture&&(Ce=t.TEXTURE_3D);const Re=W(X,Y),Ne=Y.source;n.bindTexture(Ce,X.__webglTexture,t.TEXTURE0+le);const he=i.get(Ne);if(Ne.version!==he.__version||Re===!0){n.activeTexture(t.TEXTURE0+le),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,Y.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Y.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,Y.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE);const pe=w(Y)&&S(Y.image)===!1;let ee=_(Y.image,pe,!1,h);ee=Ee(Y,ee);const oe=S(ee)||s,J=a.convert(Y.format,Y.colorSpace);let ce=a.convert(Y.type),ye=M(Y.internalFormat,J,ce,Y.colorSpace);Z(Ce,Y,oe);let Oe;const ze=Y.mipmaps,xe=s&&Y.isVideoTexture!==!0,Ve=he.__version===void 0||Re===!0,we=E(Y,ee,oe);if(Y.isDepthTexture)ye=t.DEPTH_COMPONENT,s?Y.type===$s?ye=t.DEPTH_COMPONENT32F:Y.type===Io?ye=t.DEPTH_COMPONENT24:Y.type===el?ye=t.DEPTH24_STENCIL8:ye=t.DEPTH_COMPONENT16:Y.type===$s&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),Y.format===Go&&ye===t.DEPTH_COMPONENT&&Y.type!==B1&&Y.type!==Io&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),Y.type=Io,ce=a.convert(Y.type)),Y.format===bl&&ye===t.DEPTH_COMPONENT&&(ye=t.DEPTH_STENCIL,Y.type!==el&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),Y.type=el,ce=a.convert(Y.type))),Ve&&(xe?n.texStorage2D(t.TEXTURE_2D,1,ye,ee.width,ee.height):n.texImage2D(t.TEXTURE_2D,0,ye,ee.width,ee.height,0,J,ce,null));else if(Y.isDataTexture)if(ze.length>0&&oe){xe&&Ve&&n.texStorage2D(t.TEXTURE_2D,we,ye,ze[0].width,ze[0].height);for(let Ie=0,Ge=ze.length;Ie<Ge;Ie++)Oe=ze[Ie],xe?n.texSubImage2D(t.TEXTURE_2D,Ie,0,0,Oe.width,Oe.height,J,ce,Oe.data):n.texImage2D(t.TEXTURE_2D,Ie,ye,Oe.width,Oe.height,0,J,ce,Oe.data);Y.generateMipmaps=!1}else xe?(Ve&&n.texStorage2D(t.TEXTURE_2D,we,ye,ee.width,ee.height),n.texSubImage2D(t.TEXTURE_2D,0,0,0,ee.width,ee.height,J,ce,ee.data)):n.texImage2D(t.TEXTURE_2D,0,ye,ee.width,ee.height,0,J,ce,ee.data);else if(Y.isCompressedTexture)if(Y.isCompressedArrayTexture){xe&&Ve&&n.texStorage3D(t.TEXTURE_2D_ARRAY,we,ye,ze[0].width,ze[0].height,ee.depth);for(let Ie=0,Ge=ze.length;Ie<Ge;Ie++)Oe=ze[Ie],Y.format!==zi?J!==null?xe?n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,Ie,0,0,0,Oe.width,Oe.height,ee.depth,J,Oe.data,0,0):n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,Ie,ye,Oe.width,Oe.height,ee.depth,0,Oe.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):xe?n.texSubImage3D(t.TEXTURE_2D_ARRAY,Ie,0,0,0,Oe.width,Oe.height,ee.depth,J,ce,Oe.data):n.texImage3D(t.TEXTURE_2D_ARRAY,Ie,ye,Oe.width,Oe.height,ee.depth,0,J,ce,Oe.data)}else{xe&&Ve&&n.texStorage2D(t.TEXTURE_2D,we,ye,ze[0].width,ze[0].height);for(let Ie=0,Ge=ze.length;Ie<Ge;Ie++)Oe=ze[Ie],Y.format!==zi?J!==null?xe?n.compressedTexSubImage2D(t.TEXTURE_2D,Ie,0,0,Oe.width,Oe.height,J,Oe.data):n.compressedTexImage2D(t.TEXTURE_2D,Ie,ye,Oe.width,Oe.height,0,Oe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):xe?n.texSubImage2D(t.TEXTURE_2D,Ie,0,0,Oe.width,Oe.height,J,ce,Oe.data):n.texImage2D(t.TEXTURE_2D,Ie,ye,Oe.width,Oe.height,0,J,ce,Oe.data)}else if(Y.isDataArrayTexture)xe?(Ve&&n.texStorage3D(t.TEXTURE_2D_ARRAY,we,ye,ee.width,ee.height,ee.depth),n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,ee.width,ee.height,ee.depth,J,ce,ee.data)):n.texImage3D(t.TEXTURE_2D_ARRAY,0,ye,ee.width,ee.height,ee.depth,0,J,ce,ee.data);else if(Y.isData3DTexture)xe?(Ve&&n.texStorage3D(t.TEXTURE_3D,we,ye,ee.width,ee.height,ee.depth),n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,ee.width,ee.height,ee.depth,J,ce,ee.data)):n.texImage3D(t.TEXTURE_3D,0,ye,ee.width,ee.height,ee.depth,0,J,ce,ee.data);else if(Y.isFramebufferTexture){if(Ve)if(xe)n.texStorage2D(t.TEXTURE_2D,we,ye,ee.width,ee.height);else{let Ie=ee.width,Ge=ee.height;for(let it=0;it<we;it++)n.texImage2D(t.TEXTURE_2D,it,ye,Ie,Ge,0,J,ce,null),Ie>>=1,Ge>>=1}}else if(ze.length>0&&oe){xe&&Ve&&n.texStorage2D(t.TEXTURE_2D,we,ye,ze[0].width,ze[0].height);for(let Ie=0,Ge=ze.length;Ie<Ge;Ie++)Oe=ze[Ie],xe?n.texSubImage2D(t.TEXTURE_2D,Ie,0,0,J,ce,Oe):n.texImage2D(t.TEXTURE_2D,Ie,ye,J,ce,Oe);Y.generateMipmaps=!1}else xe?(Ve&&n.texStorage2D(t.TEXTURE_2D,we,ye,ee.width,ee.height),n.texSubImage2D(t.TEXTURE_2D,0,0,0,J,ce,ee)):n.texImage2D(t.TEXTURE_2D,0,ye,J,ce,ee);C(Y,oe)&&x(Ce),he.__version=Ne.version,Y.onUpdate&&Y.onUpdate(Y)}X.__version=Y.version}function ie(X,Y,le){if(Y.image.length!==6)return;const Ce=W(X,Y),Re=Y.source;n.bindTexture(t.TEXTURE_CUBE_MAP,X.__webglTexture,t.TEXTURE0+le);const Ne=i.get(Re);if(Re.version!==Ne.__version||Ce===!0){n.activeTexture(t.TEXTURE0+le),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,Y.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Y.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,Y.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE);const he=Y.isCompressedTexture||Y.image[0].isCompressedTexture,pe=Y.image[0]&&Y.image[0].isDataTexture,ee=[];for(let Ie=0;Ie<6;Ie++)!he&&!pe?ee[Ie]=_(Y.image[Ie],!1,!0,c):ee[Ie]=pe?Y.image[Ie].image:Y.image[Ie],ee[Ie]=Ee(Y,ee[Ie]);const oe=ee[0],J=S(oe)||s,ce=a.convert(Y.format,Y.colorSpace),ye=a.convert(Y.type),Oe=M(Y.internalFormat,ce,ye,Y.colorSpace),ze=s&&Y.isVideoTexture!==!0,xe=Ne.__version===void 0||Ce===!0;let Ve=E(Y,oe,J);Z(t.TEXTURE_CUBE_MAP,Y,J);let we;if(he){ze&&xe&&n.texStorage2D(t.TEXTURE_CUBE_MAP,Ve,Oe,oe.width,oe.height);for(let Ie=0;Ie<6;Ie++){we=ee[Ie].mipmaps;for(let Ge=0;Ge<we.length;Ge++){const it=we[Ge];Y.format!==zi?ce!==null?ze?n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,Ge,0,0,it.width,it.height,ce,it.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,Ge,Oe,it.width,it.height,0,it.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):ze?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,Ge,0,0,it.width,it.height,ce,ye,it.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,Ge,Oe,it.width,it.height,0,ce,ye,it.data)}}}else{we=Y.mipmaps,ze&&xe&&(we.length>0&&Ve++,n.texStorage2D(t.TEXTURE_CUBE_MAP,Ve,Oe,ee[0].width,ee[0].height));for(let Ie=0;Ie<6;Ie++)if(pe){ze?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,0,0,0,ee[Ie].width,ee[Ie].height,ce,ye,ee[Ie].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,0,Oe,ee[Ie].width,ee[Ie].height,0,ce,ye,ee[Ie].data);for(let Ge=0;Ge<we.length;Ge++){const dt=we[Ge].image[Ie].image;ze?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,Ge+1,0,0,dt.width,dt.height,ce,ye,dt.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,Ge+1,Oe,dt.width,dt.height,0,ce,ye,dt.data)}}else{ze?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,0,0,0,ce,ye,ee[Ie]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,0,Oe,ce,ye,ee[Ie]);for(let Ge=0;Ge<we.length;Ge++){const it=we[Ge];ze?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,Ge+1,0,0,ce,ye,it.image[Ie]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,Ge+1,Oe,ce,ye,it.image[Ie])}}}C(Y,J)&&x(t.TEXTURE_CUBE_MAP),Ne.__version=Re.version,Y.onUpdate&&Y.onUpdate(Y)}X.__version=Y.version}function re(X,Y,le,Ce,Re){const Ne=a.convert(le.format,le.colorSpace),he=a.convert(le.type),pe=M(le.internalFormat,Ne,he,le.colorSpace);i.get(Y).__hasExternalTextures||(Re===t.TEXTURE_3D||Re===t.TEXTURE_2D_ARRAY?n.texImage3D(Re,0,pe,Y.width,Y.height,Y.depth,0,Ne,he,null):n.texImage2D(Re,0,pe,Y.width,Y.height,0,Ne,he,null)),n.bindFramebuffer(t.FRAMEBUFFER,X),be(Y)?u.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,Ce,Re,i.get(le).__webglTexture,0,me(Y)):(Re===t.TEXTURE_2D||Re>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&Re<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,Ce,Re,i.get(le).__webglTexture,0),n.bindFramebuffer(t.FRAMEBUFFER,null)}function _e(X,Y,le){if(t.bindRenderbuffer(t.RENDERBUFFER,X),Y.depthBuffer&&!Y.stencilBuffer){let Ce=t.DEPTH_COMPONENT16;if(le||be(Y)){const Re=Y.depthTexture;Re&&Re.isDepthTexture&&(Re.type===$s?Ce=t.DEPTH_COMPONENT32F:Re.type===Io&&(Ce=t.DEPTH_COMPONENT24));const Ne=me(Y);be(Y)?u.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Ne,Ce,Y.width,Y.height):t.renderbufferStorageMultisample(t.RENDERBUFFER,Ne,Ce,Y.width,Y.height)}else t.renderbufferStorage(t.RENDERBUFFER,Ce,Y.width,Y.height);t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,X)}else if(Y.depthBuffer&&Y.stencilBuffer){const Ce=me(Y);le&&be(Y)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,Ce,t.DEPTH24_STENCIL8,Y.width,Y.height):be(Y)?u.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Ce,t.DEPTH24_STENCIL8,Y.width,Y.height):t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,Y.width,Y.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,X)}else{const Ce=Y.isWebGLMultipleRenderTargets===!0?Y.texture:[Y.texture];for(let Re=0;Re<Ce.length;Re++){const Ne=Ce[Re],he=a.convert(Ne.format,Ne.colorSpace),pe=a.convert(Ne.type),ee=M(Ne.internalFormat,he,pe,Ne.colorSpace),oe=me(Y);le&&be(Y)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,oe,ee,Y.width,Y.height):be(Y)?u.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,oe,ee,Y.width,Y.height):t.renderbufferStorage(t.RENDERBUFFER,ee,Y.width,Y.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function Pe(X,Y){if(Y&&Y.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,X),!(Y.depthTexture&&Y.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(Y.depthTexture).__webglTexture||Y.depthTexture.image.width!==Y.width||Y.depthTexture.image.height!==Y.height)&&(Y.depthTexture.image.width=Y.width,Y.depthTexture.image.height=Y.height,Y.depthTexture.needsUpdate=!0),P(Y.depthTexture,0);const Ce=i.get(Y.depthTexture).__webglTexture,Re=me(Y);if(Y.depthTexture.format===Go)be(Y)?u.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,Ce,0,Re):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,Ce,0);else if(Y.depthTexture.format===bl)be(Y)?u.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,Ce,0,Re):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,Ce,0);else throw new Error("Unknown depthTexture format")}function K(X){const Y=i.get(X),le=X.isWebGLCubeRenderTarget===!0;if(X.depthTexture&&!Y.__autoAllocateDepthBuffer){if(le)throw new Error("target.depthTexture not supported in Cube render targets");Pe(Y.__webglFramebuffer,X)}else if(le){Y.__webglDepthbuffer=[];for(let Ce=0;Ce<6;Ce++)n.bindFramebuffer(t.FRAMEBUFFER,Y.__webglFramebuffer[Ce]),Y.__webglDepthbuffer[Ce]=t.createRenderbuffer(),_e(Y.__webglDepthbuffer[Ce],X,!1)}else n.bindFramebuffer(t.FRAMEBUFFER,Y.__webglFramebuffer),Y.__webglDepthbuffer=t.createRenderbuffer(),_e(Y.__webglDepthbuffer,X,!1);n.bindFramebuffer(t.FRAMEBUFFER,null)}function Q(X,Y,le){const Ce=i.get(X);Y!==void 0&&re(Ce.__webglFramebuffer,X,X.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D),le!==void 0&&K(X)}function fe(X){const Y=X.texture,le=i.get(X),Ce=i.get(Y);X.addEventListener("dispose",D),X.isWebGLMultipleRenderTargets!==!0&&(Ce.__webglTexture===void 0&&(Ce.__webglTexture=t.createTexture()),Ce.__version=Y.version,d.memory.textures++);const Re=X.isWebGLCubeRenderTarget===!0,Ne=X.isWebGLMultipleRenderTargets===!0,he=S(X)||s;if(Re){le.__webglFramebuffer=[];for(let pe=0;pe<6;pe++)le.__webglFramebuffer[pe]=t.createFramebuffer()}else{if(le.__webglFramebuffer=t.createFramebuffer(),Ne)if(r.drawBuffers){const pe=X.texture;for(let ee=0,oe=pe.length;ee<oe;ee++){const J=i.get(pe[ee]);J.__webglTexture===void 0&&(J.__webglTexture=t.createTexture(),d.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(s&&X.samples>0&&be(X)===!1){const pe=Ne?Y:[Y];le.__webglMultisampledFramebuffer=t.createFramebuffer(),le.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,le.__webglMultisampledFramebuffer);for(let ee=0;ee<pe.length;ee++){const oe=pe[ee];le.__webglColorRenderbuffer[ee]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,le.__webglColorRenderbuffer[ee]);const J=a.convert(oe.format,oe.colorSpace),ce=a.convert(oe.type),ye=M(oe.internalFormat,J,ce,oe.colorSpace,X.isXRRenderTarget===!0),Oe=me(X);t.renderbufferStorageMultisample(t.RENDERBUFFER,Oe,ye,X.width,X.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+ee,t.RENDERBUFFER,le.__webglColorRenderbuffer[ee])}t.bindRenderbuffer(t.RENDERBUFFER,null),X.depthBuffer&&(le.__webglDepthRenderbuffer=t.createRenderbuffer(),_e(le.__webglDepthRenderbuffer,X,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(Re){n.bindTexture(t.TEXTURE_CUBE_MAP,Ce.__webglTexture),Z(t.TEXTURE_CUBE_MAP,Y,he);for(let pe=0;pe<6;pe++)re(le.__webglFramebuffer[pe],X,Y,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+pe);C(Y,he)&&x(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(Ne){const pe=X.texture;for(let ee=0,oe=pe.length;ee<oe;ee++){const J=pe[ee],ce=i.get(J);n.bindTexture(t.TEXTURE_2D,ce.__webglTexture),Z(t.TEXTURE_2D,J,he),re(le.__webglFramebuffer,X,J,t.COLOR_ATTACHMENT0+ee,t.TEXTURE_2D),C(J,he)&&x(t.TEXTURE_2D)}n.unbindTexture()}else{let pe=t.TEXTURE_2D;(X.isWebGL3DRenderTarget||X.isWebGLArrayRenderTarget)&&(s?pe=X.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(pe,Ce.__webglTexture),Z(pe,Y,he),re(le.__webglFramebuffer,X,Y,t.COLOR_ATTACHMENT0,pe),C(Y,he)&&x(pe),n.unbindTexture()}X.depthBuffer&&K(X)}function ge(X){const Y=S(X)||s,le=X.isWebGLMultipleRenderTargets===!0?X.texture:[X.texture];for(let Ce=0,Re=le.length;Ce<Re;Ce++){const Ne=le[Ce];if(C(Ne,Y)){const he=X.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,pe=i.get(Ne).__webglTexture;n.bindTexture(he,pe),x(he),n.unbindTexture()}}}function se(X){if(s&&X.samples>0&&be(X)===!1){const Y=X.isWebGLMultipleRenderTargets?X.texture:[X.texture],le=X.width,Ce=X.height;let Re=t.COLOR_BUFFER_BIT;const Ne=[],he=X.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,pe=i.get(X),ee=X.isWebGLMultipleRenderTargets===!0;if(ee)for(let oe=0;oe<Y.length;oe++)n.bindFramebuffer(t.FRAMEBUFFER,pe.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+oe,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,pe.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+oe,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,pe.__webglMultisampledFramebuffer),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,pe.__webglFramebuffer);for(let oe=0;oe<Y.length;oe++){Ne.push(t.COLOR_ATTACHMENT0+oe),X.depthBuffer&&Ne.push(he);const J=pe.__ignoreDepthValues!==void 0?pe.__ignoreDepthValues:!1;if(J===!1&&(X.depthBuffer&&(Re|=t.DEPTH_BUFFER_BIT),X.stencilBuffer&&(Re|=t.STENCIL_BUFFER_BIT)),ee&&t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,pe.__webglColorRenderbuffer[oe]),J===!0&&(t.invalidateFramebuffer(t.READ_FRAMEBUFFER,[he]),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[he])),ee){const ce=i.get(Y[oe]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,ce,0)}t.blitFramebuffer(0,0,le,Ce,0,0,le,Ce,Re,t.NEAREST),f&&t.invalidateFramebuffer(t.READ_FRAMEBUFFER,Ne)}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),ee)for(let oe=0;oe<Y.length;oe++){n.bindFramebuffer(t.FRAMEBUFFER,pe.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+oe,t.RENDERBUFFER,pe.__webglColorRenderbuffer[oe]);const J=i.get(Y[oe]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,pe.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+oe,t.TEXTURE_2D,J,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,pe.__webglMultisampledFramebuffer)}}function me(X){return Math.min(l,X.samples)}function be(X){const Y=i.get(X);return s&&X.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&Y.__useRenderToTexture!==!1}function Me(X){const Y=d.render.frame;m.get(X)!==Y&&(m.set(X,Y),X.update())}function Ee(X,Y){const le=X.colorSpace,Ce=X.format,Re=X.type;return X.isCompressedTexture===!0||X.format===Tm||le!==Pr&&le!==jo&&(le===Ot?s===!1?e.has("EXT_sRGB")===!0&&Ce===zi?(X.format=Tm,X.minFilter=qn,X.generateMipmaps=!1):Y=G1.sRGBToLinear(Y):(Ce!==zi||Re!==Jo)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",le)),Y}this.allocateTextureUnit=F,this.resetTextureUnits=k,this.setTexture2D=P,this.setTexture2DArray=H,this.setTexture3D=N,this.setTextureCube=G,this.rebindTextures=Q,this.setupRenderTarget=fe,this.updateRenderTargetMipmap=ge,this.updateMultisampleRenderTarget=se,this.setupDepthRenderbuffer=K,this.setupFrameBufferTexture=re,this.useMultisampledRTT=be}function KN(t,e,n){const i=n.isWebGL2;function r(a,d=jo){let s;if(a===Jo)return t.UNSIGNED_BYTE;if(a===CP)return t.UNSIGNED_SHORT_4_4_4_4;if(a===xP)return t.UNSIGNED_SHORT_5_5_5_1;if(a===_P)return t.BYTE;if(a===SP)return t.SHORT;if(a===B1)return t.UNSIGNED_SHORT;if(a===wP)return t.INT;if(a===Io)return t.UNSIGNED_INT;if(a===$s)return t.FLOAT;if(a===Kc)return i?t.HALF_FLOAT:(s=e.get("OES_texture_half_float"),s!==null?s.HALF_FLOAT_OES:null);if(a===TP)return t.ALPHA;if(a===zi)return t.RGBA;if(a===EP)return t.LUMINANCE;if(a===MP)return t.LUMINANCE_ALPHA;if(a===Go)return t.DEPTH_COMPONENT;if(a===bl)return t.DEPTH_STENCIL;if(a===Tm)return s=e.get("EXT_sRGB"),s!==null?s.SRGB_ALPHA_EXT:null;if(a===AP)return t.RED;if(a===kP)return t.RED_INTEGER;if(a===RP)return t.RG;if(a===PP)return t.RG_INTEGER;if(a===OP)return t.RGBA_INTEGER;if(a===Qh||a===ep||a===tp||a===np)if(d===Ot)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(a===Qh)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(a===ep)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(a===tp)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(a===np)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(a===Qh)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(a===ep)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(a===tp)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(a===np)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(a===Gy||a===jy||a===Xy||a===Ky)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(a===Gy)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(a===jy)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(a===Xy)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(a===Ky)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(a===LP)return s=e.get("WEBGL_compressed_texture_etc1"),s!==null?s.COMPRESSED_RGB_ETC1_WEBGL:null;if(a===Yy||a===qy)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(a===Yy)return d===Ot?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(a===qy)return d===Ot?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(a===Zy||a===Jy||a===Qy||a===eb||a===tb||a===nb||a===ib||a===rb||a===sb||a===ob||a===ab||a===lb||a===cb||a===ub)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(a===Zy)return d===Ot?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(a===Jy)return d===Ot?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(a===Qy)return d===Ot?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(a===eb)return d===Ot?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(a===tb)return d===Ot?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(a===nb)return d===Ot?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(a===ib)return d===Ot?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(a===rb)return d===Ot?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(a===sb)return d===Ot?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(a===ob)return d===Ot?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(a===ab)return d===Ot?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(a===lb)return d===Ot?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(a===cb)return d===Ot?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(a===ub)return d===Ot?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(a===ip)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(a===ip)return d===Ot?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(a===IP||a===db||a===fb||a===hb)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(a===ip)return s.COMPRESSED_RED_RGTC1_EXT;if(a===db)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(a===fb)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(a===hb)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return a===el?i?t.UNSIGNED_INT_24_8:(s=e.get("WEBGL_depth_texture"),s!==null?s.UNSIGNED_INT_24_8_WEBGL:null):t[a]!==void 0?t[a]:null}return{convert:r}}class YN extends ai{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Ws extends yn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const qN={type:"move"};class Ep{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Ws,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Ws,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Fe,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Fe),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Ws,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Fe,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Fe),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const i of e.hand.values())this._getHandJoint(n,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,i){let r=null,a=null,d=null;const s=this._targetRay,o=this._grip,c=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(c&&e.hand){d=!0;for(const g of e.hand.values()){const p=n.getJointPose(g,i),v=this._getHandJoint(c,g);p!==null&&(v.matrix.fromArray(p.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.matrixWorldNeedsUpdate=!0,v.jointRadius=p.radius),v.visible=p!==null}const h=c.joints["index-finger-tip"],l=c.joints["thumb-tip"],u=h.position.distanceTo(l.position),f=.02,m=.005;c.inputState.pinching&&u>f+m?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&u<=f-m&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else o!==null&&e.gripSpace&&(a=n.getPose(e.gripSpace,i),a!==null&&(o.matrix.fromArray(a.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,a.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(a.linearVelocity)):o.hasLinearVelocity=!1,a.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(a.angularVelocity)):o.hasAngularVelocity=!1));s!==null&&(r=n.getPose(e.targetRaySpace,i),r===null&&a!==null&&(r=a),r!==null&&(s.matrix.fromArray(r.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),s.matrixWorldNeedsUpdate=!0,r.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(r.linearVelocity)):s.hasLinearVelocity=!1,r.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(r.angularVelocity)):s.hasAngularVelocity=!1,this.dispatchEvent(qN)))}return s!==null&&(s.visible=r!==null),o!==null&&(o.visible=a!==null),c!==null&&(c.visible=d!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const i=new Ws;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[n.jointName]=i,e.add(i)}return e.joints[n.jointName]}}class ZN extends Wn{constructor(e,n,i,r,a,d,s,o,c,h){if(h=h!==void 0?h:Go,h!==Go&&h!==bl)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&h===Go&&(i=Io),i===void 0&&h===bl&&(i=el),super(null,r,a,d,s,o,h,i,c),this.isDepthTexture=!0,this.image={width:e,height:n},this.magFilter=s!==void 0?s:Bn,this.minFilter=o!==void 0?o:Bn,this.flipY=!1,this.generateMipmaps=!1}}class JN extends la{constructor(e,n){super();const i=this;let r=null,a=1,d=null,s="local-floor",o=1,c=null,h=null,l=null,u=null,f=null,m=null;const g=n.getContextAttributes();let p=null,v=null;const b=[],_=[],S=new Set,w=new Map,C=new ai;C.layers.enable(1),C.viewport=new fn;const x=new ai;x.layers.enable(2),x.viewport=new fn;const M=[C,x],E=new YN;E.layers.enable(1),E.layers.enable(2);let A=null,O=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(G){let $=b[G];return $===void 0&&($=new Ep,b[G]=$),$.getTargetRaySpace()},this.getControllerGrip=function(G){let $=b[G];return $===void 0&&($=new Ep,b[G]=$),$.getGripSpace()},this.getHand=function(G){let $=b[G];return $===void 0&&($=new Ep,b[G]=$),$.getHandSpace()};function D(G){const $=_.indexOf(G.inputSource);if($===-1)return;const z=b[$];z!==void 0&&(z.update(G.inputSource,G.frame,c||d),z.dispatchEvent({type:G.type,data:G.inputSource}))}function L(){r.removeEventListener("select",D),r.removeEventListener("selectstart",D),r.removeEventListener("selectend",D),r.removeEventListener("squeeze",D),r.removeEventListener("squeezestart",D),r.removeEventListener("squeezeend",D),r.removeEventListener("end",L),r.removeEventListener("inputsourceschange",U);for(let G=0;G<b.length;G++){const $=_[G];$!==null&&(_[G]=null,b[G].disconnect($))}A=null,O=null,e.setRenderTarget(p),f=null,u=null,l=null,r=null,v=null,N.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(G){a=G,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(G){s=G,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||d},this.setReferenceSpace=function(G){c=G},this.getBaseLayer=function(){return u!==null?u:f},this.getBinding=function(){return l},this.getFrame=function(){return m},this.getSession=function(){return r},this.setSession=async function(G){if(r=G,r!==null){if(p=e.getRenderTarget(),r.addEventListener("select",D),r.addEventListener("selectstart",D),r.addEventListener("selectend",D),r.addEventListener("squeeze",D),r.addEventListener("squeezestart",D),r.addEventListener("squeezeend",D),r.addEventListener("end",L),r.addEventListener("inputsourceschange",U),g.xrCompatible!==!0&&await n.makeXRCompatible(),r.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const $={antialias:r.renderState.layers===void 0?g.antialias:!0,alpha:!0,depth:g.depth,stencil:g.stencil,framebufferScaleFactor:a};f=new XRWebGLLayer(r,n,$),r.updateRenderState({baseLayer:f}),v=new Qo(f.framebufferWidth,f.framebufferHeight,{format:zi,type:Jo,colorSpace:e.outputColorSpace,stencilBuffer:g.stencil})}else{let $=null,z=null,Z=null;g.depth&&(Z=g.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,$=g.stencil?bl:Go,z=g.stencil?el:Io);const W={colorFormat:n.RGBA8,depthFormat:Z,scaleFactor:a};l=new XRWebGLBinding(r,n),u=l.createProjectionLayer(W),r.updateRenderState({layers:[u]}),v=new Qo(u.textureWidth,u.textureHeight,{format:zi,type:Jo,depthTexture:new ZN(u.textureWidth,u.textureHeight,z,void 0,void 0,void 0,void 0,void 0,void 0,$),stencilBuffer:g.stencil,colorSpace:e.outputColorSpace,samples:g.antialias?4:0});const te=e.properties.get(v);te.__ignoreDepthValues=u.ignoreDepthValues}v.isXRRenderTarget=!0,this.setFoveation(o),c=null,d=await r.requestReferenceSpace(s),N.setContext(r),N.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode};function U(G){for(let $=0;$<G.removed.length;$++){const z=G.removed[$],Z=_.indexOf(z);Z>=0&&(_[Z]=null,b[Z].disconnect(z))}for(let $=0;$<G.added.length;$++){const z=G.added[$];let Z=_.indexOf(z);if(Z===-1){for(let te=0;te<b.length;te++)if(te>=_.length){_.push(z),Z=te;break}else if(_[te]===null){_[te]=z,Z=te;break}if(Z===-1)break}const W=b[Z];W&&W.connect(z)}}const j=new Fe,V=new Fe;function k(G,$,z){j.setFromMatrixPosition($.matrixWorld),V.setFromMatrixPosition(z.matrixWorld);const Z=j.distanceTo(V),W=$.projectionMatrix.elements,te=z.projectionMatrix.elements,ie=W[14]/(W[10]-1),re=W[14]/(W[10]+1),_e=(W[9]+1)/W[5],Pe=(W[9]-1)/W[5],K=(W[8]-1)/W[0],Q=(te[8]+1)/te[0],fe=ie*K,ge=ie*Q,se=Z/(-K+Q),me=se*-K;$.matrixWorld.decompose(G.position,G.quaternion,G.scale),G.translateX(me),G.translateZ(se),G.matrixWorld.compose(G.position,G.quaternion,G.scale),G.matrixWorldInverse.copy(G.matrixWorld).invert();const be=ie+se,Me=re+se,Ee=fe-me,X=ge+(Z-me),Y=_e*re/Me*be,le=Pe*re/Me*be;G.projectionMatrix.makePerspective(Ee,X,Y,le,be,Me),G.projectionMatrixInverse.copy(G.projectionMatrix).invert()}function F(G,$){$===null?G.matrixWorld.copy(G.matrix):G.matrixWorld.multiplyMatrices($.matrixWorld,G.matrix),G.matrixWorldInverse.copy(G.matrixWorld).invert()}this.updateCamera=function(G){if(r===null)return;E.near=x.near=C.near=G.near,E.far=x.far=C.far=G.far,(A!==E.near||O!==E.far)&&(r.updateRenderState({depthNear:E.near,depthFar:E.far}),A=E.near,O=E.far);const $=G.parent,z=E.cameras;F(E,$);for(let Z=0;Z<z.length;Z++)F(z[Z],$);z.length===2?k(E,C,x):E.projectionMatrix.copy(C.projectionMatrix),T(G,E,$)};function T(G,$,z){z===null?G.matrix.copy($.matrixWorld):(G.matrix.copy(z.matrixWorld),G.matrix.invert(),G.matrix.multiply($.matrixWorld)),G.matrix.decompose(G.position,G.quaternion,G.scale),G.updateMatrixWorld(!0);const Z=G.children;for(let W=0,te=Z.length;W<te;W++)Z[W].updateMatrixWorld(!0);G.projectionMatrix.copy($.projectionMatrix),G.projectionMatrixInverse.copy($.projectionMatrixInverse),G.isPerspectiveCamera&&(G.fov=Sl*2*Math.atan(1/G.projectionMatrix.elements[5]),G.zoom=1)}this.getCamera=function(){return E},this.getFoveation=function(){if(!(u===null&&f===null))return o},this.setFoveation=function(G){o=G,u!==null&&(u.fixedFoveation=G),f!==null&&f.fixedFoveation!==void 0&&(f.fixedFoveation=G)},this.getPlanes=function(){return S};let P=null;function H(G,$){if(h=$.getViewerPose(c||d),m=$,h!==null){const z=h.views;f!==null&&(e.setRenderTargetFramebuffer(v,f.framebuffer),e.setRenderTarget(v));let Z=!1;z.length!==E.cameras.length&&(E.cameras.length=0,Z=!0);for(let W=0;W<z.length;W++){const te=z[W];let ie=null;if(f!==null)ie=f.getViewport(te);else{const _e=l.getViewSubImage(u,te);ie=_e.viewport,W===0&&(e.setRenderTargetTextures(v,_e.colorTexture,u.ignoreDepthValues?void 0:_e.depthStencilTexture),e.setRenderTarget(v))}let re=M[W];re===void 0&&(re=new ai,re.layers.enable(W),re.viewport=new fn,M[W]=re),re.matrix.fromArray(te.transform.matrix),re.matrix.decompose(re.position,re.quaternion,re.scale),re.projectionMatrix.fromArray(te.projectionMatrix),re.projectionMatrixInverse.copy(re.projectionMatrix).invert(),re.viewport.set(ie.x,ie.y,ie.width,ie.height),W===0&&(E.matrix.copy(re.matrix),E.matrix.decompose(E.position,E.quaternion,E.scale)),Z===!0&&E.cameras.push(re)}}for(let z=0;z<b.length;z++){const Z=_[z],W=b[z];Z!==null&&W!==void 0&&W.update(Z,$,c||d)}if(P&&P(G,$),$.detectedPlanes){i.dispatchEvent({type:"planesdetected",data:$.detectedPlanes});let z=null;for(const Z of S)$.detectedPlanes.has(Z)||(z===null&&(z=[]),z.push(Z));if(z!==null)for(const Z of z)S.delete(Z),w.delete(Z),i.dispatchEvent({type:"planeremoved",data:Z});for(const Z of $.detectedPlanes)if(!S.has(Z))S.add(Z),w.set(Z,$.lastChangedTime),i.dispatchEvent({type:"planeadded",data:Z});else{const W=w.get(Z);Z.lastChangedTime>W&&(w.set(Z,Z.lastChangedTime),i.dispatchEvent({type:"planechanged",data:Z}))}}m=null}const N=new ex;N.setAnimationLoop(H),this.setAnimationLoop=function(G){P=G},this.dispose=function(){}}}function QN(t,e){function n(p,v){p.matrixAutoUpdate===!0&&p.updateMatrix(),v.value.copy(p.matrix)}function i(p,v){v.color.getRGB(p.fogColor.value,J1(t)),v.isFog?(p.fogNear.value=v.near,p.fogFar.value=v.far):v.isFogExp2&&(p.fogDensity.value=v.density)}function r(p,v,b,_,S){v.isMeshBasicMaterial||v.isMeshLambertMaterial?a(p,v):v.isMeshToonMaterial?(a(p,v),l(p,v)):v.isMeshPhongMaterial?(a(p,v),h(p,v)):v.isMeshStandardMaterial?(a(p,v),u(p,v),v.isMeshPhysicalMaterial&&f(p,v,S)):v.isMeshMatcapMaterial?(a(p,v),m(p,v)):v.isMeshDepthMaterial?a(p,v):v.isMeshDistanceMaterial?(a(p,v),g(p,v)):v.isMeshNormalMaterial?a(p,v):v.isLineBasicMaterial?(d(p,v),v.isLineDashedMaterial&&s(p,v)):v.isPointsMaterial?o(p,v,b,_):v.isSpriteMaterial?c(p,v):v.isShadowMaterial?(p.color.value.copy(v.color),p.opacity.value=v.opacity):v.isShaderMaterial&&(v.uniformsNeedUpdate=!1)}function a(p,v){p.opacity.value=v.opacity,v.color&&p.diffuse.value.copy(v.color),v.emissive&&p.emissive.value.copy(v.emissive).multiplyScalar(v.emissiveIntensity),v.map&&(p.map.value=v.map,n(v.map,p.mapTransform)),v.alphaMap&&(p.alphaMap.value=v.alphaMap,n(v.alphaMap,p.alphaMapTransform)),v.bumpMap&&(p.bumpMap.value=v.bumpMap,n(v.bumpMap,p.bumpMapTransform),p.bumpScale.value=v.bumpScale,v.side===Si&&(p.bumpScale.value*=-1)),v.normalMap&&(p.normalMap.value=v.normalMap,n(v.normalMap,p.normalMapTransform),p.normalScale.value.copy(v.normalScale),v.side===Si&&p.normalScale.value.negate()),v.displacementMap&&(p.displacementMap.value=v.displacementMap,n(v.displacementMap,p.displacementMapTransform),p.displacementScale.value=v.displacementScale,p.displacementBias.value=v.displacementBias),v.emissiveMap&&(p.emissiveMap.value=v.emissiveMap,n(v.emissiveMap,p.emissiveMapTransform)),v.specularMap&&(p.specularMap.value=v.specularMap,n(v.specularMap,p.specularMapTransform)),v.alphaTest>0&&(p.alphaTest.value=v.alphaTest);const b=e.get(v).envMap;if(b&&(p.envMap.value=b,p.flipEnvMap.value=b.isCubeTexture&&b.isRenderTargetTexture===!1?-1:1,p.reflectivity.value=v.reflectivity,p.ior.value=v.ior,p.refractionRatio.value=v.refractionRatio),v.lightMap){p.lightMap.value=v.lightMap;const _=t.useLegacyLights===!0?Math.PI:1;p.lightMapIntensity.value=v.lightMapIntensity*_,n(v.lightMap,p.lightMapTransform)}v.aoMap&&(p.aoMap.value=v.aoMap,p.aoMapIntensity.value=v.aoMapIntensity,n(v.aoMap,p.aoMapTransform))}function d(p,v){p.diffuse.value.copy(v.color),p.opacity.value=v.opacity,v.map&&(p.map.value=v.map,n(v.map,p.mapTransform))}function s(p,v){p.dashSize.value=v.dashSize,p.totalSize.value=v.dashSize+v.gapSize,p.scale.value=v.scale}function o(p,v,b,_){p.diffuse.value.copy(v.color),p.opacity.value=v.opacity,p.size.value=v.size*b,p.scale.value=_*.5,v.map&&(p.map.value=v.map,n(v.map,p.uvTransform)),v.alphaMap&&(p.alphaMap.value=v.alphaMap),v.alphaTest>0&&(p.alphaTest.value=v.alphaTest)}function c(p,v){p.diffuse.value.copy(v.color),p.opacity.value=v.opacity,p.rotation.value=v.rotation,v.map&&(p.map.value=v.map,n(v.map,p.mapTransform)),v.alphaMap&&(p.alphaMap.value=v.alphaMap),v.alphaTest>0&&(p.alphaTest.value=v.alphaTest)}function h(p,v){p.specular.value.copy(v.specular),p.shininess.value=Math.max(v.shininess,1e-4)}function l(p,v){v.gradientMap&&(p.gradientMap.value=v.gradientMap)}function u(p,v){p.metalness.value=v.metalness,v.metalnessMap&&(p.metalnessMap.value=v.metalnessMap,n(v.metalnessMap,p.metalnessMapTransform)),p.roughness.value=v.roughness,v.roughnessMap&&(p.roughnessMap.value=v.roughnessMap,n(v.roughnessMap,p.roughnessMapTransform)),e.get(v).envMap&&(p.envMapIntensity.value=v.envMapIntensity)}function f(p,v,b){p.ior.value=v.ior,v.sheen>0&&(p.sheenColor.value.copy(v.sheenColor).multiplyScalar(v.sheen),p.sheenRoughness.value=v.sheenRoughness,v.sheenColorMap&&(p.sheenColorMap.value=v.sheenColorMap,n(v.sheenColorMap,p.sheenColorMapTransform)),v.sheenRoughnessMap&&(p.sheenRoughnessMap.value=v.sheenRoughnessMap,n(v.sheenRoughnessMap,p.sheenRoughnessMapTransform))),v.clearcoat>0&&(p.clearcoat.value=v.clearcoat,p.clearcoatRoughness.value=v.clearcoatRoughness,v.clearcoatMap&&(p.clearcoatMap.value=v.clearcoatMap,n(v.clearcoatMap,p.clearcoatMapTransform)),v.clearcoatRoughnessMap&&(p.clearcoatRoughnessMap.value=v.clearcoatRoughnessMap,n(v.clearcoatRoughnessMap,p.clearcoatRoughnessMapTransform)),v.clearcoatNormalMap&&(p.clearcoatNormalMap.value=v.clearcoatNormalMap,n(v.clearcoatNormalMap,p.clearcoatNormalMapTransform),p.clearcoatNormalScale.value.copy(v.clearcoatNormalScale),v.side===Si&&p.clearcoatNormalScale.value.negate())),v.iridescence>0&&(p.iridescence.value=v.iridescence,p.iridescenceIOR.value=v.iridescenceIOR,p.iridescenceThicknessMinimum.value=v.iridescenceThicknessRange[0],p.iridescenceThicknessMaximum.value=v.iridescenceThicknessRange[1],v.iridescenceMap&&(p.iridescenceMap.value=v.iridescenceMap,n(v.iridescenceMap,p.iridescenceMapTransform)),v.iridescenceThicknessMap&&(p.iridescenceThicknessMap.value=v.iridescenceThicknessMap,n(v.iridescenceThicknessMap,p.iridescenceThicknessMapTransform))),v.transmission>0&&(p.transmission.value=v.transmission,p.transmissionSamplerMap.value=b.texture,p.transmissionSamplerSize.value.set(b.width,b.height),v.transmissionMap&&(p.transmissionMap.value=v.transmissionMap,n(v.transmissionMap,p.transmissionMapTransform)),p.thickness.value=v.thickness,v.thicknessMap&&(p.thicknessMap.value=v.thicknessMap,n(v.thicknessMap,p.thicknessMapTransform)),p.attenuationDistance.value=v.attenuationDistance,p.attenuationColor.value.copy(v.attenuationColor)),p.specularIntensity.value=v.specularIntensity,p.specularColor.value.copy(v.specularColor),v.specularColorMap&&(p.specularColorMap.value=v.specularColorMap,n(v.specularColorMap,p.specularColorMapTransform)),v.specularIntensityMap&&(p.specularIntensityMap.value=v.specularIntensityMap,n(v.specularIntensityMap,p.specularIntensityMapTransform))}function m(p,v){v.matcap&&(p.matcap.value=v.matcap)}function g(p,v){const b=e.get(v).light;p.referencePosition.value.setFromMatrixPosition(b.matrixWorld),p.nearDistance.value=b.shadow.camera.near,p.farDistance.value=b.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function e3(t,e,n,i){let r={},a={},d=[];const s=n.isWebGL2?t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS):0;function o(b,_){const S=_.program;i.uniformBlockBinding(b,S)}function c(b,_){let S=r[b.id];S===void 0&&(m(b),S=h(b),r[b.id]=S,b.addEventListener("dispose",p));const w=_.program;i.updateUBOMapping(b,w);const C=e.render.frame;a[b.id]!==C&&(u(b),a[b.id]=C)}function h(b){const _=l();b.__bindingPointIndex=_;const S=t.createBuffer(),w=b.__size,C=b.usage;return t.bindBuffer(t.UNIFORM_BUFFER,S),t.bufferData(t.UNIFORM_BUFFER,w,C),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,_,S),S}function l(){for(let b=0;b<s;b++)if(d.indexOf(b)===-1)return d.push(b),b;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function u(b){const _=r[b.id],S=b.uniforms,w=b.__cache;t.bindBuffer(t.UNIFORM_BUFFER,_);for(let C=0,x=S.length;C<x;C++){const M=S[C];if(f(M,C,w)===!0){const E=M.__offset,A=Array.isArray(M.value)?M.value:[M.value];let O=0;for(let D=0;D<A.length;D++){const L=A[D],U=g(L);typeof L=="number"?(M.__data[0]=L,t.bufferSubData(t.UNIFORM_BUFFER,E+O,M.__data)):L.isMatrix3?(M.__data[0]=L.elements[0],M.__data[1]=L.elements[1],M.__data[2]=L.elements[2],M.__data[3]=L.elements[0],M.__data[4]=L.elements[3],M.__data[5]=L.elements[4],M.__data[6]=L.elements[5],M.__data[7]=L.elements[0],M.__data[8]=L.elements[6],M.__data[9]=L.elements[7],M.__data[10]=L.elements[8],M.__data[11]=L.elements[0]):(L.toArray(M.__data,O),O+=U.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,E,M.__data)}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function f(b,_,S){const w=b.value;if(S[_]===void 0){if(typeof w=="number")S[_]=w;else{const C=Array.isArray(w)?w:[w],x=[];for(let M=0;M<C.length;M++)x.push(C[M].clone());S[_]=x}return!0}else if(typeof w=="number"){if(S[_]!==w)return S[_]=w,!0}else{const C=Array.isArray(S[_])?S[_]:[S[_]],x=Array.isArray(w)?w:[w];for(let M=0;M<C.length;M++){const E=C[M];if(E.equals(x[M])===!1)return E.copy(x[M]),!0}}return!1}function m(b){const _=b.uniforms;let S=0;const w=16;let C=0;for(let x=0,M=_.length;x<M;x++){const E=_[x],A={boundary:0,storage:0},O=Array.isArray(E.value)?E.value:[E.value];for(let D=0,L=O.length;D<L;D++){const U=O[D],j=g(U);A.boundary+=j.boundary,A.storage+=j.storage}if(E.__data=new Float32Array(A.storage/Float32Array.BYTES_PER_ELEMENT),E.__offset=S,x>0){C=S%w;const D=w-C;C!==0&&D-A.boundary<0&&(S+=w-C,E.__offset=S)}S+=A.storage}return C=S%w,C>0&&(S+=w-C),b.__size=S,b.__cache={},this}function g(b){const _={boundary:0,storage:0};return typeof b=="number"?(_.boundary=4,_.storage=4):b.isVector2?(_.boundary=8,_.storage=8):b.isVector3||b.isColor?(_.boundary=16,_.storage=12):b.isVector4?(_.boundary=16,_.storage=16):b.isMatrix3?(_.boundary=48,_.storage=48):b.isMatrix4?(_.boundary=64,_.storage=64):b.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",b),_}function p(b){const _=b.target;_.removeEventListener("dispose",p);const S=d.indexOf(_.__bindingPointIndex);d.splice(S,1),t.deleteBuffer(r[_.id]),delete r[_.id],delete a[_.id]}function v(){for(const b in r)t.deleteBuffer(r[b]);d=[],r={},a={}}return{bind:o,update:c,dispose:v}}function t3(){const t=qc("canvas");return t.style.display="block",t}class sx{constructor(e={}){const{canvas:n=t3(),context:i=null,depth:r=!0,stencil:a=!0,alpha:d=!1,antialias:s=!1,premultipliedAlpha:o=!0,preserveDrawingBuffer:c=!1,powerPreference:h="default",failIfMajorPerformanceCaveat:l=!1}=e;this.isWebGLRenderer=!0;let u;i!==null?u=i.getContextAttributes().alpha:u=d;let f=null,m=null;const g=[],p=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputColorSpace=Ot,this.useLegacyLights=!0,this.toneMapping=as,this.toneMappingExposure=1;const v=this;let b=!1,_=0,S=0,w=null,C=-1,x=null;const M=new fn,E=new fn;let A=null,O=n.width,D=n.height,L=1,U=null,j=null;const V=new fn(0,0,O,D),k=new fn(0,0,O,D);let F=!1;const T=new fv;let P=!1,H=!1,N=null;const G=new Gt,$=new Fe,z={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Z(){return w===null?L:1}let W=i;function te(Se,We){for(let Ye=0;Ye<Se.length;Ye++){const He=Se[Ye],qe=n.getContext(He,We);if(qe!==null)return qe}return null}try{const Se={alpha:!0,depth:r,stencil:a,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:c,powerPreference:h,failIfMajorPerformanceCaveat:l};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${ov}`),n.addEventListener("webglcontextlost",Oe,!1),n.addEventListener("webglcontextrestored",ze,!1),n.addEventListener("webglcontextcreationerror",xe,!1),W===null){const We=["webgl2","webgl","experimental-webgl"];if(v.isWebGL1Renderer===!0&&We.shift(),W=te(We,Se),W===null)throw te(We)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}W.getShaderPrecisionFormat===void 0&&(W.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Se){throw console.error("THREE.WebGLRenderer: "+Se.message),Se}let ie,re,_e,Pe,K,Q,fe,ge,se,me,be,Me,Ee,X,Y,le,Ce,Re,Ne,he,pe,ee,oe,J;function ce(){ie=new fD(W),re=new oD(W,ie,e),ie.init(re),ee=new KN(W,ie,re),_e=new jN(W,ie,re),Pe=new mD(W),K=new ON,Q=new XN(W,ie,_e,K,re,ee,Pe),fe=new lD(v),ge=new dD(v),se=new MO(W,re),oe=new rD(W,ie,se,re),me=new hD(W,se,Pe,oe),be=new bD(W,me,se,Pe),Ne=new yD(W,re,Q),le=new aD(K),Me=new PN(v,fe,ge,ie,re,oe,le),Ee=new QN(v,K),X=new IN,Y=new VN(ie,re),Re=new iD(v,fe,ge,_e,be,u,o),Ce=new GN(v,be,re),J=new e3(W,Pe,re,_e),he=new sD(W,ie,Pe,re),pe=new pD(W,ie,Pe,re),Pe.programs=Me.programs,v.capabilities=re,v.extensions=ie,v.properties=K,v.renderLists=X,v.shadowMap=Ce,v.state=_e,v.info=Pe}ce();const ye=new JN(v,W);this.xr=ye,this.getContext=function(){return W},this.getContextAttributes=function(){return W.getContextAttributes()},this.forceContextLoss=function(){const Se=ie.get("WEBGL_lose_context");Se&&Se.loseContext()},this.forceContextRestore=function(){const Se=ie.get("WEBGL_lose_context");Se&&Se.restoreContext()},this.getPixelRatio=function(){return L},this.setPixelRatio=function(Se){Se!==void 0&&(L=Se,this.setSize(O,D,!1))},this.getSize=function(Se){return Se.set(O,D)},this.setSize=function(Se,We,Ye=!0){if(ye.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}O=Se,D=We,n.width=Math.floor(Se*L),n.height=Math.floor(We*L),Ye===!0&&(n.style.width=Se+"px",n.style.height=We+"px"),this.setViewport(0,0,Se,We)},this.getDrawingBufferSize=function(Se){return Se.set(O*L,D*L).floor()},this.setDrawingBufferSize=function(Se,We,Ye){O=Se,D=We,L=Ye,n.width=Math.floor(Se*Ye),n.height=Math.floor(We*Ye),this.setViewport(0,0,Se,We)},this.getCurrentViewport=function(Se){return Se.copy(M)},this.getViewport=function(Se){return Se.copy(V)},this.setViewport=function(Se,We,Ye,He){Se.isVector4?V.set(Se.x,Se.y,Se.z,Se.w):V.set(Se,We,Ye,He),_e.viewport(M.copy(V).multiplyScalar(L).floor())},this.getScissor=function(Se){return Se.copy(k)},this.setScissor=function(Se,We,Ye,He){Se.isVector4?k.set(Se.x,Se.y,Se.z,Se.w):k.set(Se,We,Ye,He),_e.scissor(E.copy(k).multiplyScalar(L).floor())},this.getScissorTest=function(){return F},this.setScissorTest=function(Se){_e.setScissorTest(F=Se)},this.setOpaqueSort=function(Se){U=Se},this.setTransparentSort=function(Se){j=Se},this.getClearColor=function(Se){return Se.copy(Re.getClearColor())},this.setClearColor=function(){Re.setClearColor.apply(Re,arguments)},this.getClearAlpha=function(){return Re.getClearAlpha()},this.setClearAlpha=function(){Re.setClearAlpha.apply(Re,arguments)},this.clear=function(Se=!0,We=!0,Ye=!0){let He=0;Se&&(He|=W.COLOR_BUFFER_BIT),We&&(He|=W.DEPTH_BUFFER_BIT),Ye&&(He|=W.STENCIL_BUFFER_BIT),W.clear(He)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",Oe,!1),n.removeEventListener("webglcontextrestored",ze,!1),n.removeEventListener("webglcontextcreationerror",xe,!1),X.dispose(),Y.dispose(),K.dispose(),fe.dispose(),ge.dispose(),be.dispose(),oe.dispose(),J.dispose(),Me.dispose(),ye.dispose(),ye.removeEventListener("sessionstart",dt),ye.removeEventListener("sessionend",De),N&&(N.dispose(),N=null),Ke.stop()};function Oe(Se){Se.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),b=!0}function ze(){console.log("THREE.WebGLRenderer: Context Restored."),b=!1;const Se=Pe.autoReset,We=Ce.enabled,Ye=Ce.autoUpdate,He=Ce.needsUpdate,qe=Ce.type;ce(),Pe.autoReset=Se,Ce.enabled=We,Ce.autoUpdate=Ye,Ce.needsUpdate=He,Ce.type=qe}function xe(Se){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Se.statusMessage)}function Ve(Se){const We=Se.target;We.removeEventListener("dispose",Ve),we(We)}function we(Se){Ie(Se),K.remove(Se)}function Ie(Se){const We=K.get(Se).programs;We!==void 0&&(We.forEach(function(Ye){Me.releaseProgram(Ye)}),Se.isShaderMaterial&&Me.releaseShaderCache(Se))}this.renderBufferDirect=function(Se,We,Ye,He,qe,Et){We===null&&(We=z);const At=qe.isMesh&&qe.matrixWorld.determinant()<0,Lt=yA(Se,We,Ye,He,qe);_e.setMaterial(He,At);let Ut=Ye.index,$t=1;He.wireframe===!0&&(Ut=me.getWireframeAttribute(Ye),$t=2);const Wt=Ye.drawRange,jt=Ye.attributes.position;let sn=Wt.start*$t,ti=(Wt.start+Wt.count)*$t;Et!==null&&(sn=Math.max(sn,Et.start*$t),ti=Math.min(ti,(Et.start+Et.count)*$t)),Ut!==null?(sn=Math.max(sn,0),ti=Math.min(ti,Ut.count)):jt!=null&&(sn=Math.max(sn,0),ti=Math.min(ti,jt.count));const tr=ti-sn;if(tr<0||tr===1/0)return;oe.setup(qe,He,Lt,Ye,Ut);let po,Mn=he;if(Ut!==null&&(po=se.get(Ut),Mn=pe,Mn.setIndex(po)),qe.isMesh)He.wireframe===!0?(_e.setLineWidth(He.wireframeLinewidth*Z()),Mn.setMode(W.LINES)):Mn.setMode(W.TRIANGLES);else if(qe.isLine){let Yt=He.linewidth;Yt===void 0&&(Yt=1),_e.setLineWidth(Yt*Z()),qe.isLineSegments?Mn.setMode(W.LINES):qe.isLineLoop?Mn.setMode(W.LINE_LOOP):Mn.setMode(W.LINE_STRIP)}else qe.isPoints?Mn.setMode(W.POINTS):qe.isSprite&&Mn.setMode(W.TRIANGLES);if(qe.isInstancedMesh)Mn.renderInstances(sn,tr,qe.count);else if(Ye.isInstancedBufferGeometry){const Yt=Ye._maxInstanceCount!==void 0?Ye._maxInstanceCount:1/0,Vh=Math.min(Ye.instanceCount,Yt);Mn.renderInstances(sn,tr,Vh)}else Mn.render(sn,tr)},this.compile=function(Se,We){function Ye(He,qe,Et){He.transparent===!0&&He.side===ur&&He.forceSinglePass===!1?(He.side=Si,He.needsUpdate=!0,$u(He,qe,Et),He.side=hs,He.needsUpdate=!0,$u(He,qe,Et),He.side=ur):$u(He,qe,Et)}m=Y.get(Se),m.init(),p.push(m),Se.traverseVisible(function(He){He.isLight&&He.layers.test(We.layers)&&(m.pushLight(He),He.castShadow&&m.pushShadow(He))}),m.setupLights(v.useLegacyLights),Se.traverse(function(He){const qe=He.material;if(qe)if(Array.isArray(qe))for(let Et=0;Et<qe.length;Et++){const At=qe[Et];Ye(At,Se,He)}else Ye(qe,Se,He)}),p.pop(),m=null};let Ge=null;function it(Se){Ge&&Ge(Se)}function dt(){Ke.stop()}function De(){Ke.start()}const Ke=new ex;Ke.setAnimationLoop(it),typeof self<"u"&&Ke.setContext(self),this.setAnimationLoop=function(Se){Ge=Se,ye.setAnimationLoop(Se),Se===null?Ke.stop():Ke.start()},ye.addEventListener("sessionstart",dt),ye.addEventListener("sessionend",De),this.render=function(Se,We){if(We!==void 0&&We.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(b===!0)return;Se.matrixWorldAutoUpdate===!0&&Se.updateMatrixWorld(),We.parent===null&&We.matrixWorldAutoUpdate===!0&&We.updateMatrixWorld(),ye.enabled===!0&&ye.isPresenting===!0&&(ye.cameraAutoUpdate===!0&&ye.updateCamera(We),We=ye.getCamera()),Se.isScene===!0&&Se.onBeforeRender(v,Se,We,w),m=Y.get(Se,p.length),m.init(),p.push(m),G.multiplyMatrices(We.projectionMatrix,We.matrixWorldInverse),T.setFromProjectionMatrix(G),H=this.localClippingEnabled,P=le.init(this.clippingPlanes,H),f=X.get(Se,g.length),f.init(),g.push(f),ht(Se,We,0,v.sortObjects),f.finish(),v.sortObjects===!0&&f.sort(U,j),P===!0&&le.beginShadows();const Ye=m.state.shadowsArray;if(Ce.render(Ye,Se,We),P===!0&&le.endShadows(),this.info.autoReset===!0&&this.info.reset(),Re.render(f,Se),m.setupLights(v.useLegacyLights),We.isArrayCamera){const He=We.cameras;for(let qe=0,Et=He.length;qe<Et;qe++){const At=He[qe];zt(f,Se,At,At.viewport)}}else zt(f,Se,We);w!==null&&(Q.updateMultisampleRenderTarget(w),Q.updateRenderTargetMipmap(w)),Se.isScene===!0&&Se.onAfterRender(v,Se,We),oe.resetDefaultState(),C=-1,x=null,p.pop(),p.length>0?m=p[p.length-1]:m=null,g.pop(),g.length>0?f=g[g.length-1]:f=null};function ht(Se,We,Ye,He){if(Se.visible===!1)return;if(Se.layers.test(We.layers)){if(Se.isGroup)Ye=Se.renderOrder;else if(Se.isLOD)Se.autoUpdate===!0&&Se.update(We);else if(Se.isLight)m.pushLight(Se),Se.castShadow&&m.pushShadow(Se);else if(Se.isSprite){if(!Se.frustumCulled||T.intersectsSprite(Se)){He&&$.setFromMatrixPosition(Se.matrixWorld).applyMatrix4(G);const At=be.update(Se),Lt=Se.material;Lt.visible&&f.push(Se,At,Lt,Ye,$.z,null)}}else if((Se.isMesh||Se.isLine||Se.isPoints)&&(!Se.frustumCulled||T.intersectsObject(Se))){Se.isSkinnedMesh&&Se.skeleton.frame!==Pe.render.frame&&(Se.skeleton.update(),Se.skeleton.frame=Pe.render.frame);const At=be.update(Se),Lt=Se.material;if(He&&(At.boundingSphere===null&&At.computeBoundingSphere(),$.copy(At.boundingSphere.center).applyMatrix4(Se.matrixWorld).applyMatrix4(G)),Array.isArray(Lt)){const Ut=At.groups;for(let $t=0,Wt=Ut.length;$t<Wt;$t++){const jt=Ut[$t],sn=Lt[jt.materialIndex];sn&&sn.visible&&f.push(Se,At,sn,Ye,$.z,jt)}}else Lt.visible&&f.push(Se,At,Lt,Ye,$.z,null)}}const Et=Se.children;for(let At=0,Lt=Et.length;At<Lt;At++)ht(Et[At],We,Ye,He)}function zt(Se,We,Ye,He){const qe=Se.opaque,Et=Se.transmissive,At=Se.transparent;m.setupLightsView(Ye),P===!0&&le.setGlobalState(v.clippingPlanes,Ye),Et.length>0&&Zt(qe,Et,We,Ye),He&&_e.viewport(M.copy(He)),qe.length>0&&_n(qe,We,Ye),Et.length>0&&_n(Et,We,Ye),At.length>0&&_n(At,We,Ye),_e.buffers.depth.setTest(!0),_e.buffers.depth.setMask(!0),_e.buffers.color.setMask(!0),_e.setPolygonOffset(!1)}function Zt(Se,We,Ye,He){if(N===null){const Lt=re.isWebGL2;N=new Qo(1024,1024,{generateMipmaps:!0,type:ie.has("EXT_color_buffer_half_float")?Kc:Jo,minFilter:Zo,samples:Lt&&s===!0?4:0})}const qe=v.getRenderTarget();v.setRenderTarget(N),v.clear();const Et=v.toneMapping;v.toneMapping=as,_n(Se,Ye,He),Q.updateMultisampleRenderTarget(N),Q.updateRenderTargetMipmap(N);let At=!1;for(let Lt=0,Ut=We.length;Lt<Ut;Lt++){const $t=We[Lt],Wt=$t.object,jt=$t.geometry,sn=$t.material,ti=$t.group;if(sn.side===ur&&Wt.layers.test(He.layers)){const tr=sn.side;sn.side=Si,sn.needsUpdate=!0,ei(Wt,Ye,He,jt,sn,ti),sn.side=tr,sn.needsUpdate=!0,At=!0}}At===!0&&(Q.updateMultisampleRenderTarget(N),Q.updateRenderTargetMipmap(N)),v.setRenderTarget(qe),v.toneMapping=Et}function _n(Se,We,Ye){const He=We.isScene===!0?We.overrideMaterial:null;for(let qe=0,Et=Se.length;qe<Et;qe++){const At=Se[qe],Lt=At.object,Ut=At.geometry,$t=He===null?At.material:He,Wt=At.group;Lt.layers.test(Ye.layers)&&ei(Lt,We,Ye,Ut,$t,Wt)}}function ei(Se,We,Ye,He,qe,Et){Se.onBeforeRender(v,We,Ye,He,qe,Et),Se.modelViewMatrix.multiplyMatrices(Ye.matrixWorldInverse,Se.matrixWorld),Se.normalMatrix.getNormalMatrix(Se.modelViewMatrix),qe.onBeforeRender(v,We,Ye,He,Se,Et),qe.transparent===!0&&qe.side===ur&&qe.forceSinglePass===!1?(qe.side=Si,qe.needsUpdate=!0,v.renderBufferDirect(Ye,We,He,qe,Se,Et),qe.side=hs,qe.needsUpdate=!0,v.renderBufferDirect(Ye,We,He,qe,Se,Et),qe.side=ur):v.renderBufferDirect(Ye,We,He,qe,Se,Et),Se.onAfterRender(v,We,Ye,He,qe,Et)}function $u(Se,We,Ye){We.isScene!==!0&&(We=z);const He=K.get(Se),qe=m.state.lights,Et=m.state.shadowsArray,At=qe.state.version,Lt=Me.getParameters(Se,qe.state,Et,We,Ye),Ut=Me.getProgramCacheKey(Lt);let $t=He.programs;He.environment=Se.isMeshStandardMaterial?We.environment:null,He.fog=We.fog,He.envMap=(Se.isMeshStandardMaterial?ge:fe).get(Se.envMap||He.environment),$t===void 0&&(Se.addEventListener("dispose",Ve),$t=new Map,He.programs=$t);let Wt=$t.get(Ut);if(Wt!==void 0){if(He.currentProgram===Wt&&He.lightsStateVersion===At)return K0(Se,Lt),Wt}else Lt.uniforms=Me.getUniforms(Se),Se.onBuild(Ye,Lt,v),Se.onBeforeCompile(Lt,v),Wt=Me.acquireProgram(Lt,Ut),$t.set(Ut,Wt),He.uniforms=Lt.uniforms;const jt=He.uniforms;(!Se.isShaderMaterial&&!Se.isRawShaderMaterial||Se.clipping===!0)&&(jt.clippingPlanes=le.uniform),K0(Se,Lt),He.needsLights=_A(Se),He.lightsStateVersion=At,He.needsLights&&(jt.ambientLightColor.value=qe.state.ambient,jt.lightProbe.value=qe.state.probe,jt.directionalLights.value=qe.state.directional,jt.directionalLightShadows.value=qe.state.directionalShadow,jt.spotLights.value=qe.state.spot,jt.spotLightShadows.value=qe.state.spotShadow,jt.rectAreaLights.value=qe.state.rectArea,jt.ltc_1.value=qe.state.rectAreaLTC1,jt.ltc_2.value=qe.state.rectAreaLTC2,jt.pointLights.value=qe.state.point,jt.pointLightShadows.value=qe.state.pointShadow,jt.hemisphereLights.value=qe.state.hemi,jt.directionalShadowMap.value=qe.state.directionalShadowMap,jt.directionalShadowMatrix.value=qe.state.directionalShadowMatrix,jt.spotShadowMap.value=qe.state.spotShadowMap,jt.spotLightMatrix.value=qe.state.spotLightMatrix,jt.spotLightMap.value=qe.state.spotLightMap,jt.pointShadowMap.value=qe.state.pointShadowMap,jt.pointShadowMatrix.value=qe.state.pointShadowMatrix);const sn=Wt.getUniforms(),ti=jd.seqWithValue(sn.seq,jt);return He.currentProgram=Wt,He.uniformsList=ti,Wt}function K0(Se,We){const Ye=K.get(Se);Ye.outputColorSpace=We.outputColorSpace,Ye.instancing=We.instancing,Ye.skinning=We.skinning,Ye.morphTargets=We.morphTargets,Ye.morphNormals=We.morphNormals,Ye.morphColors=We.morphColors,Ye.morphTargetsCount=We.morphTargetsCount,Ye.numClippingPlanes=We.numClippingPlanes,Ye.numIntersection=We.numClipIntersection,Ye.vertexAlphas=We.vertexAlphas,Ye.vertexTangents=We.vertexTangents,Ye.toneMapping=We.toneMapping}function yA(Se,We,Ye,He,qe){We.isScene!==!0&&(We=z),Q.resetTextureUnits();const Et=We.fog,At=He.isMeshStandardMaterial?We.environment:null,Lt=w===null?v.outputColorSpace:w.isXRRenderTarget===!0?w.texture.colorSpace:Pr,Ut=(He.isMeshStandardMaterial?ge:fe).get(He.envMap||At),$t=He.vertexColors===!0&&!!Ye.attributes.color&&Ye.attributes.color.itemSize===4,Wt=!!He.normalMap&&!!Ye.attributes.tangent,jt=!!Ye.morphAttributes.position,sn=!!Ye.morphAttributes.normal,ti=!!Ye.morphAttributes.color,tr=He.toneMapped?v.toneMapping:as,po=Ye.morphAttributes.position||Ye.morphAttributes.normal||Ye.morphAttributes.color,Mn=po!==void 0?po.length:0,Yt=K.get(He),Vh=m.state.lights;if(P===!0&&(H===!0||Se!==x)){const Ai=Se===x&&He.id===C;le.setState(He,Se,Ai)}let Dn=!1;He.version===Yt.__version?(Yt.needsLights&&Yt.lightsStateVersion!==Vh.state.version||Yt.outputColorSpace!==Lt||qe.isInstancedMesh&&Yt.instancing===!1||!qe.isInstancedMesh&&Yt.instancing===!0||qe.isSkinnedMesh&&Yt.skinning===!1||!qe.isSkinnedMesh&&Yt.skinning===!0||Yt.envMap!==Ut||He.fog===!0&&Yt.fog!==Et||Yt.numClippingPlanes!==void 0&&(Yt.numClippingPlanes!==le.numPlanes||Yt.numIntersection!==le.numIntersection)||Yt.vertexAlphas!==$t||Yt.vertexTangents!==Wt||Yt.morphTargets!==jt||Yt.morphNormals!==sn||Yt.morphColors!==ti||Yt.toneMapping!==tr||re.isWebGL2===!0&&Yt.morphTargetsCount!==Mn)&&(Dn=!0):(Dn=!0,Yt.__version=He.version);let mo=Yt.currentProgram;Dn===!0&&(mo=$u(He,We,qe));let Y0=!1,Zl=!1,Hh=!1;const ni=mo.getUniforms(),go=Yt.uniforms;if(_e.useProgram(mo.program)&&(Y0=!0,Zl=!0,Hh=!0),He.id!==C&&(C=He.id,Zl=!0),Y0||x!==Se){if(ni.setValue(W,"projectionMatrix",Se.projectionMatrix),re.logarithmicDepthBuffer&&ni.setValue(W,"logDepthBufFC",2/(Math.log(Se.far+1)/Math.LN2)),x!==Se&&(x=Se,Zl=!0,Hh=!0),He.isShaderMaterial||He.isMeshPhongMaterial||He.isMeshToonMaterial||He.isMeshStandardMaterial||He.envMap){const Ai=ni.map.cameraPosition;Ai!==void 0&&Ai.setValue(W,$.setFromMatrixPosition(Se.matrixWorld))}(He.isMeshPhongMaterial||He.isMeshToonMaterial||He.isMeshLambertMaterial||He.isMeshBasicMaterial||He.isMeshStandardMaterial||He.isShaderMaterial)&&ni.setValue(W,"isOrthographic",Se.isOrthographicCamera===!0),(He.isMeshPhongMaterial||He.isMeshToonMaterial||He.isMeshLambertMaterial||He.isMeshBasicMaterial||He.isMeshStandardMaterial||He.isShaderMaterial||He.isShadowMaterial||qe.isSkinnedMesh)&&ni.setValue(W,"viewMatrix",Se.matrixWorldInverse)}if(qe.isSkinnedMesh){ni.setOptional(W,qe,"bindMatrix"),ni.setOptional(W,qe,"bindMatrixInverse");const Ai=qe.skeleton;Ai&&(re.floatVertexTextures?(Ai.boneTexture===null&&Ai.computeBoneTexture(),ni.setValue(W,"boneTexture",Ai.boneTexture,Q),ni.setValue(W,"boneTextureSize",Ai.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const zh=Ye.morphAttributes;if((zh.position!==void 0||zh.normal!==void 0||zh.color!==void 0&&re.isWebGL2===!0)&&Ne.update(qe,Ye,mo),(Zl||Yt.receiveShadow!==qe.receiveShadow)&&(Yt.receiveShadow=qe.receiveShadow,ni.setValue(W,"receiveShadow",qe.receiveShadow)),He.isMeshGouraudMaterial&&He.envMap!==null&&(go.envMap.value=Ut,go.flipEnvMap.value=Ut.isCubeTexture&&Ut.isRenderTargetTexture===!1?-1:1),Zl&&(ni.setValue(W,"toneMappingExposure",v.toneMappingExposure),Yt.needsLights&&bA(go,Hh),Et&&He.fog===!0&&Ee.refreshFogUniforms(go,Et),Ee.refreshMaterialUniforms(go,He,L,D,N),jd.upload(W,Yt.uniformsList,go,Q)),He.isShaderMaterial&&He.uniformsNeedUpdate===!0&&(jd.upload(W,Yt.uniformsList,go,Q),He.uniformsNeedUpdate=!1),He.isSpriteMaterial&&ni.setValue(W,"center",qe.center),ni.setValue(W,"modelViewMatrix",qe.modelViewMatrix),ni.setValue(W,"normalMatrix",qe.normalMatrix),ni.setValue(W,"modelMatrix",qe.matrixWorld),He.isShaderMaterial||He.isRawShaderMaterial){const Ai=He.uniformsGroups;for(let $h=0,SA=Ai.length;$h<SA;$h++)if(re.isWebGL2){const q0=Ai[$h];J.update(q0,mo),J.bind(q0,mo)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return mo}function bA(Se,We){Se.ambientLightColor.needsUpdate=We,Se.lightProbe.needsUpdate=We,Se.directionalLights.needsUpdate=We,Se.directionalLightShadows.needsUpdate=We,Se.pointLights.needsUpdate=We,Se.pointLightShadows.needsUpdate=We,Se.spotLights.needsUpdate=We,Se.spotLightShadows.needsUpdate=We,Se.rectAreaLights.needsUpdate=We,Se.hemisphereLights.needsUpdate=We}function _A(Se){return Se.isMeshLambertMaterial||Se.isMeshToonMaterial||Se.isMeshPhongMaterial||Se.isMeshStandardMaterial||Se.isShadowMaterial||Se.isShaderMaterial&&Se.lights===!0}this.getActiveCubeFace=function(){return _},this.getActiveMipmapLevel=function(){return S},this.getRenderTarget=function(){return w},this.setRenderTargetTextures=function(Se,We,Ye){K.get(Se.texture).__webglTexture=We,K.get(Se.depthTexture).__webglTexture=Ye;const He=K.get(Se);He.__hasExternalTextures=!0,He.__hasExternalTextures&&(He.__autoAllocateDepthBuffer=Ye===void 0,He.__autoAllocateDepthBuffer||ie.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),He.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(Se,We){const Ye=K.get(Se);Ye.__webglFramebuffer=We,Ye.__useDefaultFramebuffer=We===void 0},this.setRenderTarget=function(Se,We=0,Ye=0){w=Se,_=We,S=Ye;let He=!0,qe=null,Et=!1,At=!1;if(Se){const Ut=K.get(Se);Ut.__useDefaultFramebuffer!==void 0?(_e.bindFramebuffer(W.FRAMEBUFFER,null),He=!1):Ut.__webglFramebuffer===void 0?Q.setupRenderTarget(Se):Ut.__hasExternalTextures&&Q.rebindTextures(Se,K.get(Se.texture).__webglTexture,K.get(Se.depthTexture).__webglTexture);const $t=Se.texture;($t.isData3DTexture||$t.isDataArrayTexture||$t.isCompressedArrayTexture)&&(At=!0);const Wt=K.get(Se).__webglFramebuffer;Se.isWebGLCubeRenderTarget?(qe=Wt[We],Et=!0):re.isWebGL2&&Se.samples>0&&Q.useMultisampledRTT(Se)===!1?qe=K.get(Se).__webglMultisampledFramebuffer:qe=Wt,M.copy(Se.viewport),E.copy(Se.scissor),A=Se.scissorTest}else M.copy(V).multiplyScalar(L).floor(),E.copy(k).multiplyScalar(L).floor(),A=F;if(_e.bindFramebuffer(W.FRAMEBUFFER,qe)&&re.drawBuffers&&He&&_e.drawBuffers(Se,qe),_e.viewport(M),_e.scissor(E),_e.setScissorTest(A),Et){const Ut=K.get(Se.texture);W.framebufferTexture2D(W.FRAMEBUFFER,W.COLOR_ATTACHMENT0,W.TEXTURE_CUBE_MAP_POSITIVE_X+We,Ut.__webglTexture,Ye)}else if(At){const Ut=K.get(Se.texture),$t=We||0;W.framebufferTextureLayer(W.FRAMEBUFFER,W.COLOR_ATTACHMENT0,Ut.__webglTexture,Ye||0,$t)}C=-1},this.readRenderTargetPixels=function(Se,We,Ye,He,qe,Et,At){if(!(Se&&Se.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Lt=K.get(Se).__webglFramebuffer;if(Se.isWebGLCubeRenderTarget&&At!==void 0&&(Lt=Lt[At]),Lt){_e.bindFramebuffer(W.FRAMEBUFFER,Lt);try{const Ut=Se.texture,$t=Ut.format,Wt=Ut.type;if($t!==zi&&ee.convert($t)!==W.getParameter(W.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const jt=Wt===Kc&&(ie.has("EXT_color_buffer_half_float")||re.isWebGL2&&ie.has("EXT_color_buffer_float"));if(Wt!==Jo&&ee.convert(Wt)!==W.getParameter(W.IMPLEMENTATION_COLOR_READ_TYPE)&&!(Wt===$s&&(re.isWebGL2||ie.has("OES_texture_float")||ie.has("WEBGL_color_buffer_float")))&&!jt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}We>=0&&We<=Se.width-He&&Ye>=0&&Ye<=Se.height-qe&&W.readPixels(We,Ye,He,qe,ee.convert($t),ee.convert(Wt),Et)}finally{const Ut=w!==null?K.get(w).__webglFramebuffer:null;_e.bindFramebuffer(W.FRAMEBUFFER,Ut)}}},this.copyFramebufferToTexture=function(Se,We,Ye=0){const He=Math.pow(2,-Ye),qe=Math.floor(We.image.width*He),Et=Math.floor(We.image.height*He);Q.setTexture2D(We,0),W.copyTexSubImage2D(W.TEXTURE_2D,Ye,0,0,Se.x,Se.y,qe,Et),_e.unbindTexture()},this.copyTextureToTexture=function(Se,We,Ye,He=0){const qe=We.image.width,Et=We.image.height,At=ee.convert(Ye.format),Lt=ee.convert(Ye.type);Q.setTexture2D(Ye,0),W.pixelStorei(W.UNPACK_FLIP_Y_WEBGL,Ye.flipY),W.pixelStorei(W.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ye.premultiplyAlpha),W.pixelStorei(W.UNPACK_ALIGNMENT,Ye.unpackAlignment),We.isDataTexture?W.texSubImage2D(W.TEXTURE_2D,He,Se.x,Se.y,qe,Et,At,Lt,We.image.data):We.isCompressedTexture?W.compressedTexSubImage2D(W.TEXTURE_2D,He,Se.x,Se.y,We.mipmaps[0].width,We.mipmaps[0].height,At,We.mipmaps[0].data):W.texSubImage2D(W.TEXTURE_2D,He,Se.x,Se.y,At,Lt,We.image),He===0&&Ye.generateMipmaps&&W.generateMipmap(W.TEXTURE_2D),_e.unbindTexture()},this.copyTextureToTexture3D=function(Se,We,Ye,He,qe=0){if(v.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Et=Se.max.x-Se.min.x+1,At=Se.max.y-Se.min.y+1,Lt=Se.max.z-Se.min.z+1,Ut=ee.convert(He.format),$t=ee.convert(He.type);let Wt;if(He.isData3DTexture)Q.setTexture3D(He,0),Wt=W.TEXTURE_3D;else if(He.isDataArrayTexture)Q.setTexture2DArray(He,0),Wt=W.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}W.pixelStorei(W.UNPACK_FLIP_Y_WEBGL,He.flipY),W.pixelStorei(W.UNPACK_PREMULTIPLY_ALPHA_WEBGL,He.premultiplyAlpha),W.pixelStorei(W.UNPACK_ALIGNMENT,He.unpackAlignment);const jt=W.getParameter(W.UNPACK_ROW_LENGTH),sn=W.getParameter(W.UNPACK_IMAGE_HEIGHT),ti=W.getParameter(W.UNPACK_SKIP_PIXELS),tr=W.getParameter(W.UNPACK_SKIP_ROWS),po=W.getParameter(W.UNPACK_SKIP_IMAGES),Mn=Ye.isCompressedTexture?Ye.mipmaps[0]:Ye.image;W.pixelStorei(W.UNPACK_ROW_LENGTH,Mn.width),W.pixelStorei(W.UNPACK_IMAGE_HEIGHT,Mn.height),W.pixelStorei(W.UNPACK_SKIP_PIXELS,Se.min.x),W.pixelStorei(W.UNPACK_SKIP_ROWS,Se.min.y),W.pixelStorei(W.UNPACK_SKIP_IMAGES,Se.min.z),Ye.isDataTexture||Ye.isData3DTexture?W.texSubImage3D(Wt,qe,We.x,We.y,We.z,Et,At,Lt,Ut,$t,Mn.data):Ye.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),W.compressedTexSubImage3D(Wt,qe,We.x,We.y,We.z,Et,At,Lt,Ut,Mn.data)):W.texSubImage3D(Wt,qe,We.x,We.y,We.z,Et,At,Lt,Ut,$t,Mn),W.pixelStorei(W.UNPACK_ROW_LENGTH,jt),W.pixelStorei(W.UNPACK_IMAGE_HEIGHT,sn),W.pixelStorei(W.UNPACK_SKIP_PIXELS,ti),W.pixelStorei(W.UNPACK_SKIP_ROWS,tr),W.pixelStorei(W.UNPACK_SKIP_IMAGES,po),qe===0&&He.generateMipmaps&&W.generateMipmap(Wt),_e.unbindTexture()},this.initTexture=function(Se){Se.isCubeTexture?Q.setTextureCube(Se,0):Se.isData3DTexture?Q.setTexture3D(Se,0):Se.isDataArrayTexture||Se.isCompressedArrayTexture?Q.setTexture2DArray(Se,0):Q.setTexture2D(Se,0),_e.unbindTexture()},this.resetState=function(){_=0,S=0,w=null,_e.reset(),oe.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===Ot?ls:V1}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===ls?Ot:Pr}}class n3 extends sx{}n3.prototype.isWebGL1Renderer=!0;class i3 extends yn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class r3{constructor(e,n){this.isInterleavedBuffer=!0,this.array=e,this.stride=n,this.count=e!==void 0?e.length/n:0,this.usage=xm,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=pr()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,n,i){e*=this.stride,i*=n.stride;for(let r=0,a=this.stride;r<a;r++)this.array[e+r]=n.array[i+r];return this}set(e,n=0){return this.array.set(e,n),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=pr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(n,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=pr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const ii=new Fe;class gv{constructor(e,n,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=n,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let n=0,i=this.data.count;n<i;n++)ii.fromBufferAttribute(this,n),ii.applyMatrix4(e),this.setXYZ(n,ii.x,ii.y,ii.z);return this}applyNormalMatrix(e){for(let n=0,i=this.count;n<i;n++)ii.fromBufferAttribute(this,n),ii.applyNormalMatrix(e),this.setXYZ(n,ii.x,ii.y,ii.z);return this}transformDirection(e){for(let n=0,i=this.count;n<i;n++)ii.fromBufferAttribute(this,n),ii.transformDirection(e),this.setXYZ(n,ii.x,ii.y,ii.z);return this}setX(e,n){return this.normalized&&(n=dn(n,this.array)),this.data.array[e*this.data.stride+this.offset]=n,this}setY(e,n){return this.normalized&&(n=dn(n,this.array)),this.data.array[e*this.data.stride+this.offset+1]=n,this}setZ(e,n){return this.normalized&&(n=dn(n,this.array)),this.data.array[e*this.data.stride+this.offset+2]=n,this}setW(e,n){return this.normalized&&(n=dn(n,this.array)),this.data.array[e*this.data.stride+this.offset+3]=n,this}getX(e){let n=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(n=is(n,this.array)),n}getY(e){let n=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(n=is(n,this.array)),n}getZ(e){let n=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(n=is(n,this.array)),n}getW(e){let n=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(n=is(n,this.array)),n}setXY(e,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(n=dn(n,this.array),i=dn(i,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=i,this}setXYZ(e,n,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(n=dn(n,this.array),i=dn(i,this.array),r=dn(r,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,n,i,r,a){return e=e*this.data.stride+this.offset,this.normalized&&(n=dn(n,this.array),i=dn(i,this.array),r=dn(r,this.array),a=dn(a,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=a,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)n.push(this.data.array[r+a])}return new ci(new this.array.constructor(n),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new gv(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)n.push(this.data.array[r+a])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const n_=new Fe,i_=new fn,r_=new fn,s3=new Fe,s_=new Gt,La=new Fe;class o3 extends _i{constructor(e,n){super(e,n),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Gt,this.bindMatrixInverse=new Gt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new ys),this.boundingBox.makeEmpty();const n=e.getAttribute("position");for(let i=0;i<n.count;i++)La.fromBufferAttribute(n,i),this.applyBoneTransform(i,La),this.boundingBox.expandByPoint(La)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new bs),this.boundingSphere.makeEmpty();const n=e.getAttribute("position");for(let i=0;i<n.count;i++)La.fromBufferAttribute(n,i),this.applyBoneTransform(i,La),this.boundingSphere.expandByPoint(La)}copy(e,n){return super.copy(e,n),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}getVertexPosition(e,n){return super.getVertexPosition(e,n),this.applyBoneTransform(e,n),n}bind(e,n){this.skeleton=e,n===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),n=this.matrixWorld),this.bindMatrix.copy(n),this.bindMatrixInverse.copy(n).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new fn,n=this.geometry.attributes.skinWeight;for(let i=0,r=n.count;i<r;i++){e.fromBufferAttribute(n,i);const a=1/e.manhattanLength();a!==1/0?e.multiplyScalar(a):e.set(1,0,0,0),n.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,n){const i=this.skeleton,r=this.geometry;i_.fromBufferAttribute(r.attributes.skinIndex,e),r_.fromBufferAttribute(r.attributes.skinWeight,e),n_.copy(n).applyMatrix4(this.bindMatrix),n.set(0,0,0);for(let a=0;a<4;a++){const d=r_.getComponent(a);if(d!==0){const s=i_.getComponent(a);s_.multiplyMatrices(i.bones[s].matrixWorld,i.boneInverses[s]),n.addScaledVector(s3.copy(n_).applyMatrix4(s_),d)}}return n.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,n){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,n)}}class ox extends yn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class a3 extends Wn{constructor(e=null,n=1,i=1,r,a,d,s,o,c=Bn,h=Bn,l,u){super(null,d,s,o,c,h,r,a,l,u),this.isDataTexture=!0,this.image={data:e,width:n,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const o_=new Gt,l3=new Gt;let c3=class ax{constructor(e=[],n=[]){this.uuid=pr(),this.bones=e.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,n=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),n.length===0)this.calculateInverses();else if(e.length!==n.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new Gt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,n=this.bones.length;e<n;e++){const i=new Gt;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,n=this.bones.length;e<n;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,n=this.bones.length;e<n;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,n=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let a=0,d=e.length;a<d;a++){const s=e[a]?e[a].matrixWorld:l3;o_.multiplyMatrices(s,n[a]),o_.toArray(i,a*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new ax(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=z1(e),e=Math.max(e,4);const n=new Float32Array(e*e*4);n.set(this.boneMatrices);const i=new a3(n,e,e,zi,$s);return i.needsUpdate=!0,this.boneMatrices=n,this.boneTexture=i,this.boneTextureSize=e,this}getBoneByName(e){for(let n=0,i=this.bones.length;n<i;n++){const r=this.bones[n];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,n){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const a=e.bones[i];let d=n[a];d===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",a),d=new ox),this.bones.push(d),this.boneInverses.push(new Gt().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const n=this.bones,i=this.boneInverses;for(let r=0,a=n.length;r<a;r++){const d=n[r];e.bones.push(d.uuid);const s=i[r];e.boneInverses.push(s.toArray())}return e}};class a_ extends ci{constructor(e,n,i,r=1){super(e,n,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Ia=new Gt,l_=new Gt,yd=[],c_=new ys,u3=new Gt,sc=new _i,oc=new bs;class d3 extends _i{constructor(e,n,i){super(e,n),this.isInstancedMesh=!0,this.instanceMatrix=new a_(new Float32Array(i*16),16),this.instanceColor=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,u3)}computeBoundingBox(){const e=this.geometry,n=this.count;this.boundingBox===null&&(this.boundingBox=new ys),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<n;i++)this.getMatrixAt(i,Ia),c_.copy(e.boundingBox).applyMatrix4(Ia),this.boundingBox.union(c_)}computeBoundingSphere(){const e=this.geometry,n=this.count;this.boundingSphere===null&&(this.boundingSphere=new bs),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<n;i++)this.getMatrixAt(i,Ia),oc.copy(e.boundingSphere).applyMatrix4(Ia),this.boundingSphere.union(oc)}copy(e,n){return super.copy(e,n),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,n){n.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,n){n.fromArray(this.instanceMatrix.array,e*16)}raycast(e,n){const i=this.matrixWorld,r=this.count;if(sc.geometry=this.geometry,sc.material=this.material,sc.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),oc.copy(this.boundingSphere),oc.applyMatrix4(i),e.ray.intersectsSphere(oc)!==!1))for(let a=0;a<r;a++){this.getMatrixAt(a,Ia),l_.multiplyMatrices(i,Ia),sc.matrixWorld=l_,sc.raycast(e,yd);for(let d=0,s=yd.length;d<s;d++){const o=yd[d];o.instanceId=a,o.object=this,n.push(o)}yd.length=0}}setColorAt(e,n){this.instanceColor===null&&(this.instanceColor=new a_(new Float32Array(this.instanceMatrix.count*3),3)),n.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,n){n.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class lx extends mr{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Nt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const u_=new Fe,d_=new Fe,f_=new Gt,Mp=new uv,bd=new bs;class vv extends yn{constructor(e=new Br,n=new lx){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,i=[0];for(let r=1,a=n.count;r<a;r++)u_.fromBufferAttribute(n,r-1),d_.fromBufferAttribute(n,r),i[r]=i[r-1],i[r]+=u_.distanceTo(d_);e.setAttribute("lineDistance",new cs(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,n){const i=this.geometry,r=this.matrixWorld,a=e.params.Line.threshold,d=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),bd.copy(i.boundingSphere),bd.applyMatrix4(r),bd.radius+=a,e.ray.intersectsSphere(bd)===!1)return;f_.copy(r).invert(),Mp.copy(e.ray).applyMatrix4(f_);const s=a/((this.scale.x+this.scale.y+this.scale.z)/3),o=s*s,c=new Fe,h=new Fe,l=new Fe,u=new Fe,f=this.isLineSegments?2:1,m=i.index,p=i.attributes.position;if(m!==null){const v=Math.max(0,d.start),b=Math.min(m.count,d.start+d.count);for(let _=v,S=b-1;_<S;_+=f){const w=m.getX(_),C=m.getX(_+1);if(c.fromBufferAttribute(p,w),h.fromBufferAttribute(p,C),Mp.distanceSqToSegment(c,h,u,l)>o)continue;u.applyMatrix4(this.matrixWorld);const M=e.ray.origin.distanceTo(u);M<e.near||M>e.far||n.push({distance:M,point:l.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}else{const v=Math.max(0,d.start),b=Math.min(p.count,d.start+d.count);for(let _=v,S=b-1;_<S;_+=f){if(c.fromBufferAttribute(p,_),h.fromBufferAttribute(p,_+1),Mp.distanceSqToSegment(c,h,u,l)>o)continue;u.applyMatrix4(this.matrixWorld);const C=e.ray.origin.distanceTo(u);C<e.near||C>e.far||n.push({distance:C,point:l.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const r=n[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,d=r.length;a<d;a++){const s=r[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=a}}}}}const h_=new Fe,p_=new Fe;class f3 extends vv{constructor(e,n){super(e,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,i=[];for(let r=0,a=n.count;r<a;r+=2)h_.fromBufferAttribute(n,r),p_.fromBufferAttribute(n,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+h_.distanceTo(p_);e.setAttribute("lineDistance",new cs(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class h3 extends vv{constructor(e,n){super(e,n),this.isLineLoop=!0,this.type="LineLoop"}}class cx extends mr{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Nt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const m_=new Gt,Am=new uv,_d=new bs,Sd=new Fe;class p3 extends yn{constructor(e=new Br,n=new cx){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=e.material,this.geometry=e.geometry,this}raycast(e,n){const i=this.geometry,r=this.matrixWorld,a=e.params.Points.threshold,d=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),_d.copy(i.boundingSphere),_d.applyMatrix4(r),_d.radius+=a,e.ray.intersectsSphere(_d)===!1)return;m_.copy(r).invert(),Am.copy(e.ray).applyMatrix4(m_);const s=a/((this.scale.x+this.scale.y+this.scale.z)/3),o=s*s,c=i.index,l=i.attributes.position;if(c!==null){const u=Math.max(0,d.start),f=Math.min(c.count,d.start+d.count);for(let m=u,g=f;m<g;m++){const p=c.getX(m);Sd.fromBufferAttribute(l,p),g_(Sd,p,o,r,e,n,this)}}else{const u=Math.max(0,d.start),f=Math.min(l.count,d.start+d.count);for(let m=u,g=f;m<g;m++)Sd.fromBufferAttribute(l,m),g_(Sd,m,o,r,e,n,this)}}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const r=n[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,d=r.length;a<d;a++){const s=r[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=a}}}}}function g_(t,e,n,i,r,a,d){const s=Am.distanceSqToPoint(t);if(s<n){const o=new Fe;Am.closestPointToPoint(t,o),o.applyMatrix4(i);const c=r.ray.origin.distanceTo(o);if(c<r.near||c>r.far)return;a.push({distance:c,distanceToRay:Math.sqrt(s),point:o,index:e,face:null,object:d})}}class yv extends mr{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Nt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Nt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=lv,this.normalScale=new It(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class ca extends yv{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new It(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Hn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Nt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Nt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Nt(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class m3 extends mr{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Nt(16777215),this.specular=new Nt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Nt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=lv,this.normalScale=new It(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=av,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}function Rs(t,e,n){return ux(t)?new t.constructor(t.subarray(e,n!==void 0?n:t.length)):t.slice(e,n)}function wd(t,e,n){return!t||!n&&t.constructor===e?t:typeof e.BYTES_PER_ELEMENT=="number"?new e(t):Array.prototype.slice.call(t)}function ux(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function g3(t){function e(r,a){return t[r]-t[a]}const n=t.length,i=new Array(n);for(let r=0;r!==n;++r)i[r]=r;return i.sort(e),i}function v_(t,e,n){const i=t.length,r=new t.constructor(i);for(let a=0,d=0;d!==i;++a){const s=n[a]*e;for(let o=0;o!==e;++o)r[d++]=t[s+o]}return r}function dx(t,e,n,i){let r=1,a=t[0];for(;a!==void 0&&a[i]===void 0;)a=t[r++];if(a===void 0)return;let d=a[i];if(d!==void 0)if(Array.isArray(d))do d=a[i],d!==void 0&&(e.push(a.time),n.push.apply(n,d)),a=t[r++];while(a!==void 0);else if(d.toArray!==void 0)do d=a[i],d!==void 0&&(e.push(a.time),d.toArray(n,n.length)),a=t[r++];while(a!==void 0);else do d=a[i],d!==void 0&&(e.push(a.time),n.push(d)),a=t[r++];while(a!==void 0)}class Au{constructor(e,n,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new n.constructor(i),this.sampleValues=n,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const n=this.parameterPositions;let i=this._cachedIndex,r=n[i],a=n[i-1];e:{t:{let d;n:{i:if(!(e<r)){for(let s=i+2;;){if(r===void 0){if(e<a)break i;return i=n.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===s)break;if(a=r,r=n[++i],e<r)break t}d=n.length;break n}if(!(e>=a)){const s=n[1];e<s&&(i=2,a=s);for(let o=i-2;;){if(a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===o)break;if(r=a,a=n[--i-1],e>=a)break t}d=i,i=0;break n}break e}for(;i<d;){const s=i+d>>>1;e<n[s]?d=s:i=s+1}if(r=n[i],a=n[i-1],a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=n.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,a,r)}return this.interpolate_(i,a,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const n=this.resultBuffer,i=this.sampleValues,r=this.valueSize,a=e*r;for(let d=0;d!==r;++d)n[d]=i[a+d];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class v3 extends Au{constructor(e,n,i,r){super(e,n,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:pb,endingEnd:pb}}intervalChanged_(e,n,i){const r=this.parameterPositions;let a=e-2,d=e+1,s=r[a],o=r[d];if(s===void 0)switch(this.getSettings_().endingStart){case mb:a=e,s=2*n-i;break;case gb:a=r.length-2,s=n+r[a]-r[a+1];break;default:a=e,s=i}if(o===void 0)switch(this.getSettings_().endingEnd){case mb:d=e,o=2*i-n;break;case gb:d=1,o=i+r[1]-r[0];break;default:d=e-1,o=n}const c=(i-n)*.5,h=this.valueSize;this._weightPrev=c/(n-s),this._weightNext=c/(o-i),this._offsetPrev=a*h,this._offsetNext=d*h}interpolate_(e,n,i,r){const a=this.resultBuffer,d=this.sampleValues,s=this.valueSize,o=e*s,c=o-s,h=this._offsetPrev,l=this._offsetNext,u=this._weightPrev,f=this._weightNext,m=(i-n)/(r-n),g=m*m,p=g*m,v=-u*p+2*u*g-u*m,b=(1+u)*p+(-1.5-2*u)*g+(-.5+u)*m+1,_=(-1-f)*p+(1.5+f)*g+.5*m,S=f*p-f*g;for(let w=0;w!==s;++w)a[w]=v*d[h+w]+b*d[c+w]+_*d[o+w]+S*d[l+w];return a}}class y3 extends Au{constructor(e,n,i,r){super(e,n,i,r)}interpolate_(e,n,i,r){const a=this.resultBuffer,d=this.sampleValues,s=this.valueSize,o=e*s,c=o-s,h=(i-n)/(r-n),l=1-h;for(let u=0;u!==s;++u)a[u]=d[c+u]*l+d[o+u]*h;return a}}class b3 extends Au{constructor(e,n,i,r){super(e,n,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Ur{constructor(e,n,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=wd(n,this.TimeBufferType),this.values=wd(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const n=e.constructor;let i;if(n.toJSON!==this.toJSON)i=n.toJSON(e);else{i={name:e.name,times:wd(e.times,Array),values:wd(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new b3(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new y3(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new v3(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let n;switch(e){case Yc:n=this.InterpolantFactoryMethodDiscrete;break;case _l:n=this.InterpolantFactoryMethodLinear;break;case rp:n=this.InterpolantFactoryMethodSmooth;break}if(n===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Yc;case this.InterpolantFactoryMethodLinear:return _l;case this.InterpolantFactoryMethodSmooth:return rp}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const n=this.times;for(let i=0,r=n.length;i!==r;++i)n[i]+=e}return this}scale(e){if(e!==1){const n=this.times;for(let i=0,r=n.length;i!==r;++i)n[i]*=e}return this}trim(e,n){const i=this.times,r=i.length;let a=0,d=r-1;for(;a!==r&&i[a]<e;)++a;for(;d!==-1&&i[d]>n;)--d;if(++d,a!==0||d!==r){a>=d&&(d=Math.max(d,1),a=d-1);const s=this.getValueSize();this.times=Rs(i,a,d),this.values=Rs(this.values,a*s,d*s)}return this}validate(){let e=!0;const n=this.getValueSize();n-Math.floor(n)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,a=i.length;a===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let d=null;for(let s=0;s!==a;s++){const o=i[s];if(typeof o=="number"&&isNaN(o)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,s,o),e=!1;break}if(d!==null&&d>o){console.error("THREE.KeyframeTrack: Out of order keys.",this,s,o,d),e=!1;break}d=o}if(r!==void 0&&ux(r))for(let s=0,o=r.length;s!==o;++s){const c=r[s];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,s,c),e=!1;break}}return e}optimize(){const e=Rs(this.times),n=Rs(this.values),i=this.getValueSize(),r=this.getInterpolation()===rp,a=e.length-1;let d=1;for(let s=1;s<a;++s){let o=!1;const c=e[s],h=e[s+1];if(c!==h&&(s!==1||c!==e[0]))if(r)o=!0;else{const l=s*i,u=l-i,f=l+i;for(let m=0;m!==i;++m){const g=n[l+m];if(g!==n[u+m]||g!==n[f+m]){o=!0;break}}}if(o){if(s!==d){e[d]=e[s];const l=s*i,u=d*i;for(let f=0;f!==i;++f)n[u+f]=n[l+f]}++d}}if(a>0){e[d]=e[a];for(let s=a*i,o=d*i,c=0;c!==i;++c)n[o+c]=n[s+c];++d}return d!==e.length?(this.times=Rs(e,0,d),this.values=Rs(n,0,d*i)):(this.times=e,this.values=n),this}clone(){const e=Rs(this.times,0),n=Rs(this.values,0),i=this.constructor,r=new i(this.name,e,n);return r.createInterpolant=this.createInterpolant,r}}Ur.prototype.TimeBufferType=Float32Array;Ur.prototype.ValueBufferType=Float32Array;Ur.prototype.DefaultInterpolation=_l;class $l extends Ur{}$l.prototype.ValueTypeName="bool";$l.prototype.ValueBufferType=Array;$l.prototype.DefaultInterpolation=Yc;$l.prototype.InterpolantFactoryMethodLinear=void 0;$l.prototype.InterpolantFactoryMethodSmooth=void 0;class fx extends Ur{}fx.prototype.ValueTypeName="color";class Zc extends Ur{}Zc.prototype.ValueTypeName="number";class _3 extends Au{constructor(e,n,i,r){super(e,n,i,r)}interpolate_(e,n,i,r){const a=this.resultBuffer,d=this.sampleValues,s=this.valueSize,o=(i-n)/(r-n);let c=e*s;for(let h=c+s;c!==h;c+=4)Or.slerpFlat(a,0,d,c-s,d,c,o);return a}}class ta extends Ur{InterpolantFactoryMethodLinear(e){return new _3(this.times,this.values,this.getValueSize(),e)}}ta.prototype.ValueTypeName="quaternion";ta.prototype.DefaultInterpolation=_l;ta.prototype.InterpolantFactoryMethodSmooth=void 0;class Wl extends Ur{}Wl.prototype.ValueTypeName="string";Wl.prototype.ValueBufferType=Array;Wl.prototype.DefaultInterpolation=Yc;Wl.prototype.InterpolantFactoryMethodLinear=void 0;Wl.prototype.InterpolantFactoryMethodSmooth=void 0;class Jc extends Ur{}Jc.prototype.ValueTypeName="vector";class S3{constructor(e,n=-1,i,r=DP){this.name=e,this.tracks=i,this.duration=n,this.blendMode=r,this.uuid=pr(),this.duration<0&&this.resetDuration()}static parse(e){const n=[],i=e.tracks,r=1/(e.fps||1);for(let d=0,s=i.length;d!==s;++d)n.push(C3(i[d]).scale(r));const a=new this(e.name,e.duration,n,e.blendMode);return a.uuid=e.uuid,a}static toJSON(e){const n=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:n,uuid:e.uuid,blendMode:e.blendMode};for(let a=0,d=i.length;a!==d;++a)n.push(Ur.toJSON(i[a]));return r}static CreateFromMorphTargetSequence(e,n,i,r){const a=n.length,d=[];for(let s=0;s<a;s++){let o=[],c=[];o.push((s+a-1)%a,s,(s+1)%a),c.push(0,1,0);const h=g3(o);o=v_(o,1,h),c=v_(c,1,h),!r&&o[0]===0&&(o.push(a),c.push(c[0])),d.push(new Zc(".morphTargetInfluences["+n[s].name+"]",o,c).scale(1/i))}return new this(e,-1,d)}static findByName(e,n){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===n)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,n,i){const r={},a=/^([\w-]*?)([\d]+)$/;for(let s=0,o=e.length;s<o;s++){const c=e[s],h=c.name.match(a);if(h&&h.length>1){const l=h[1];let u=r[l];u||(r[l]=u=[]),u.push(c)}}const d=[];for(const s in r)d.push(this.CreateFromMorphTargetSequence(s,r[s],n,i));return d}static parseAnimation(e,n){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(l,u,f,m,g){if(f.length!==0){const p=[],v=[];dx(f,p,v,m),p.length!==0&&g.push(new l(u,p,v))}},r=[],a=e.name||"default",d=e.fps||30,s=e.blendMode;let o=e.length||-1;const c=e.hierarchy||[];for(let l=0;l<c.length;l++){const u=c[l].keys;if(!(!u||u.length===0))if(u[0].morphTargets){const f={};let m;for(m=0;m<u.length;m++)if(u[m].morphTargets)for(let g=0;g<u[m].morphTargets.length;g++)f[u[m].morphTargets[g]]=-1;for(const g in f){const p=[],v=[];for(let b=0;b!==u[m].morphTargets.length;++b){const _=u[m];p.push(_.time),v.push(_.morphTarget===g?1:0)}r.push(new Zc(".morphTargetInfluence["+g+"]",p,v))}o=f.length*d}else{const f=".bones["+n[l].name+"]";i(Jc,f+".position",u,"pos",r),i(ta,f+".quaternion",u,"rot",r),i(Jc,f+".scale",u,"scl",r)}}return r.length===0?null:new this(a,o,r,s)}resetDuration(){const e=this.tracks;let n=0;for(let i=0,r=e.length;i!==r;++i){const a=this.tracks[i];n=Math.max(n,a.times[a.times.length-1])}return this.duration=n,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let n=0;n<this.tracks.length;n++)e=e&&this.tracks[n].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function w3(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Zc;case"vector":case"vector2":case"vector3":case"vector4":return Jc;case"color":return fx;case"quaternion":return ta;case"bool":case"boolean":return $l;case"string":return Wl}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function C3(t){if(t.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=w3(t.type);if(t.times===void 0){const n=[],i=[];dx(t.keys,n,i,"value"),t.times=n,t.values=i}return e.parse!==void 0?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const Cl={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class hx{constructor(e,n,i){const r=this;let a=!1,d=0,s=0,o;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=i,this.itemStart=function(h){s++,a===!1&&r.onStart!==void 0&&r.onStart(h,d,s),a=!0},this.itemEnd=function(h){d++,r.onProgress!==void 0&&r.onProgress(h,d,s),d===s&&(a=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(h){r.onError!==void 0&&r.onError(h)},this.resolveURL=function(h){return o?o(h):h},this.setURLModifier=function(h){return o=h,this},this.addHandler=function(h,l){return c.push(h,l),this},this.removeHandler=function(h){const l=c.indexOf(h);return l!==-1&&c.splice(l,2),this},this.getHandler=function(h){for(let l=0,u=c.length;l<u;l+=2){const f=c[l],m=c[l+1];if(f.global&&(f.lastIndex=0),f.test(h))return m}return null}}}const x3=new hx;class Gl{constructor(e){this.manager=e!==void 0?e:x3,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const i=this;return new Promise(function(r,a){i.load(e,r,n,a)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const Yr={};class T3 extends Error{constructor(e,n){super(e),this.response=n}}class px extends Gl{constructor(e){super(e)}load(e,n,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=Cl.get(e);if(a!==void 0)return this.manager.itemStart(e),setTimeout(()=>{n&&n(a),this.manager.itemEnd(e)},0),a;if(Yr[e]!==void 0){Yr[e].push({onLoad:n,onProgress:i,onError:r});return}Yr[e]=[],Yr[e].push({onLoad:n,onProgress:i,onError:r});const d=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),s=this.mimeType,o=this.responseType;fetch(d).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const h=Yr[e],l=c.body.getReader(),u=c.headers.get("Content-Length")||c.headers.get("X-File-Size"),f=u?parseInt(u):0,m=f!==0;let g=0;const p=new ReadableStream({start(v){b();function b(){l.read().then(({done:_,value:S})=>{if(_)v.close();else{g+=S.byteLength;const w=new ProgressEvent("progress",{lengthComputable:m,loaded:g,total:f});for(let C=0,x=h.length;C<x;C++){const M=h[C];M.onProgress&&M.onProgress(w)}v.enqueue(S),b()}})}}});return new Response(p)}else throw new T3(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(o){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(h=>new DOMParser().parseFromString(h,s));case"json":return c.json();default:if(s===void 0)return c.text();{const l=/charset="?([^;"\s]*)"?/i.exec(s),u=l&&l[1]?l[1].toLowerCase():void 0,f=new TextDecoder(u);return c.arrayBuffer().then(m=>f.decode(m))}}}).then(c=>{Cl.add(e,c);const h=Yr[e];delete Yr[e];for(let l=0,u=h.length;l<u;l++){const f=h[l];f.onLoad&&f.onLoad(c)}}).catch(c=>{const h=Yr[e];if(h===void 0)throw this.manager.itemError(e),c;delete Yr[e];for(let l=0,u=h.length;l<u;l++){const f=h[l];f.onError&&f.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class mx extends Gl{constructor(e){super(e)}load(e,n,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,d=Cl.get(e);if(d!==void 0)return a.manager.itemStart(e),setTimeout(function(){n&&n(d),a.manager.itemEnd(e)},0),d;const s=qc("img");function o(){h(),Cl.add(e,this),n&&n(this),a.manager.itemEnd(e)}function c(l){h(),r&&r(l),a.manager.itemError(e),a.manager.itemEnd(e)}function h(){s.removeEventListener("load",o,!1),s.removeEventListener("error",c,!1)}return s.addEventListener("load",o,!1),s.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(s.crossOrigin=this.crossOrigin),a.manager.itemStart(e),s.src=e,s}}class E3 extends Gl{constructor(e){super(e)}load(e,n,i,r){const a=new dv,d=new mx(this.manager);d.setCrossOrigin(this.crossOrigin),d.setPath(this.path);let s=0;function o(c){d.load(e[c],function(h){a.images[c]=h,s++,s===6&&(a.needsUpdate=!0,n&&n(a))},void 0,r)}for(let c=0;c<e.length;++c)o(c);return a}}class gx extends Gl{constructor(e){super(e)}load(e,n,i,r){const a=new Wn,d=new mx(this.manager);return d.setCrossOrigin(this.crossOrigin),d.setPath(this.path),d.load(e,function(s){a.image=s,a.needsUpdate=!0,n!==void 0&&n(a)},i,r),a}}class dh extends yn{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new Nt(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),n}}class M3 extends dh{constructor(e,n,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(yn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Nt(n)}copy(e,n){return super.copy(e,n),this.groundColor.copy(e.groundColor),this}}const Ap=new Gt,y_=new Fe,b_=new Fe;class bv{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new It(512,512),this.map=null,this.mapPass=null,this.matrix=new Gt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new fv,this._frameExtents=new It(1,1),this._viewportCount=1,this._viewports=[new fn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,i=this.matrix;y_.setFromMatrixPosition(e.matrixWorld),n.position.copy(y_),b_.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(b_),n.updateMatrixWorld(),Ap.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Ap),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(Ap)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class A3 extends bv{constructor(){super(new ai(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const n=this.camera,i=Sl*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,a=e.distance||n.far;(i!==n.fov||r!==n.aspect||a!==n.far)&&(n.fov=i,n.aspect=r,n.far=a,n.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class k3 extends dh{constructor(e,n,i=0,r=Math.PI/3,a=0,d=2){super(e,n),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(yn.DEFAULT_UP),this.updateMatrix(),this.target=new yn,this.distance=i,this.angle=r,this.penumbra=a,this.decay=d,this.map=null,this.shadow=new A3}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const __=new Gt,ac=new Fe,kp=new Fe;class R3 extends bv{constructor(){super(new ai(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new It(4,2),this._viewportCount=6,this._viewports=[new fn(2,1,1,1),new fn(0,1,1,1),new fn(3,1,1,1),new fn(1,1,1,1),new fn(3,0,1,1),new fn(1,0,1,1)],this._cubeDirections=[new Fe(1,0,0),new Fe(-1,0,0),new Fe(0,0,1),new Fe(0,0,-1),new Fe(0,1,0),new Fe(0,-1,0)],this._cubeUps=[new Fe(0,1,0),new Fe(0,1,0),new Fe(0,1,0),new Fe(0,1,0),new Fe(0,0,1),new Fe(0,0,-1)]}updateMatrices(e,n=0){const i=this.camera,r=this.matrix,a=e.distance||i.far;a!==i.far&&(i.far=a,i.updateProjectionMatrix()),ac.setFromMatrixPosition(e.matrixWorld),i.position.copy(ac),kp.copy(i.position),kp.add(this._cubeDirections[n]),i.up.copy(this._cubeUps[n]),i.lookAt(kp),i.updateMatrixWorld(),r.makeTranslation(-ac.x,-ac.y,-ac.z),__.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(__)}}class P3 extends dh{constructor(e,n,i=0,r=2){super(e,n),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new R3}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class O3 extends bv{constructor(){super(new pv(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class vx extends dh{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(yn.DEFAULT_UP),this.updateMatrix(),this.target=new yn,this.shadow=new O3}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class km{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let n="";for(let i=0,r=e.length;i<r;i++)n+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(n))}catch{return n}}static extractUrlBase(e){const n=e.lastIndexOf("/");return n===-1?"./":e.slice(0,n+1)}static resolveURL(e,n){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(n)&&/^\//.test(e)&&(n=n.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:n+e)}}class L3 extends Gl{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,n,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,d=Cl.get(e);if(d!==void 0)return a.manager.itemStart(e),setTimeout(function(){n&&n(d),a.manager.itemEnd(e)},0),d;const s={};s.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",s.headers=this.requestHeader,fetch(e,s).then(function(o){return o.blob()}).then(function(o){return createImageBitmap(o,Object.assign(a.options,{colorSpaceConversion:"none"}))}).then(function(o){Cl.add(e,o),n&&n(o),a.manager.itemEnd(e)}).catch(function(o){r&&r(o),a.manager.itemError(e),a.manager.itemEnd(e)}),a.manager.itemStart(e)}}const _v="\\[\\]\\.:\\/",I3=new RegExp("["+_v+"]","g"),Sv="[^"+_v+"]",D3="[^"+_v.replace("\\.","")+"]",N3=/((?:WC+[\/:])*)/.source.replace("WC",Sv),F3=/(WCOD+)?/.source.replace("WCOD",D3),B3=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Sv),U3=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Sv),V3=new RegExp("^"+N3+F3+B3+U3+"$"),H3=["material","materials","bones","map"];class z3{constructor(e,n,i){const r=i||nn.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,r)}getValue(e,n){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,n)}setValue(e,n){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,a=i.length;r!==a;++r)i[r].setValue(e,n)}bind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,i=e.length;n!==i;++n)e[n].bind()}unbind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,i=e.length;n!==i;++n)e[n].unbind()}}class nn{constructor(e,n,i){this.path=n,this.parsedPath=i||nn.parseTrackName(n),this.node=nn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,i){return e&&e.isAnimationObjectGroup?new nn.Composite(e,n,i):new nn(e,n,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(I3,"")}static parseTrackName(e){const n=V3.exec(e);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const a=i.nodeName.substring(r+1);H3.indexOf(a)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=a)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,n){if(n===void 0||n===""||n==="."||n===-1||n===e.name||n===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(n);if(i!==void 0)return i}if(e.children){const i=function(a){for(let d=0;d<a.length;d++){const s=a[d];if(s.name===n||s.uuid===n)return s;const o=i(s.children);if(o)return o}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)e[n++]=i[r]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)i[r]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)i[r]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)i[r]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,i=n.objectName,r=n.propertyName;let a=n.propertyIndex;if(e||(e=nn.findNode(this.rootNode,n.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(i){let c=n.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let h=0;h<e.length;h++)if(e[h].name===c){c=h;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const d=e[r];if(d===void 0){const c=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+r+" but it wasn't found.",e);return}let s=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?s=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(s=this.Versioning.MatrixWorldNeedsUpdate);let o=this.BindingType.Direct;if(a!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[a]!==void 0&&(a=e.morphTargetDictionary[a])}o=this.BindingType.ArrayElement,this.resolvedProperty=d,this.propertyIndex=a}else d.fromArray!==void 0&&d.toArray!==void 0?(o=this.BindingType.HasFromToArray,this.resolvedProperty=d):Array.isArray(d)?(o=this.BindingType.EntireArray,this.resolvedProperty=d):this.propertyName=r;this.getValue=this.GetterByBindingType[o],this.setValue=this.SetterByBindingTypeAndVersioning[o][s]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}nn.Composite=z3;nn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};nn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};nn.prototype.GetterByBindingType=[nn.prototype._getValue_direct,nn.prototype._getValue_array,nn.prototype._getValue_arrayElement,nn.prototype._getValue_toArray];nn.prototype.SetterByBindingTypeAndVersioning=[[nn.prototype._setValue_direct,nn.prototype._setValue_direct_setNeedsUpdate,nn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[nn.prototype._setValue_array,nn.prototype._setValue_array_setNeedsUpdate,nn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[nn.prototype._setValue_arrayElement,nn.prototype._setValue_arrayElement_setNeedsUpdate,nn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[nn.prototype._setValue_fromArray,nn.prototype._setValue_fromArray_setNeedsUpdate,nn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class S_{constructor(e=1,n=0,i=0){return this.radius=e,this.phi=n,this.theta=i,this}set(e,n,i){return this.radius=e,this.phi=n,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,i){return this.radius=Math.sqrt(e*e+n*n+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Hn(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:ov}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=ov);var _s=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Vr(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function $3(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var r=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,r.get?r:{enumerable:!0,get:function(){return t[i]}})}),n}var Sn={};const W3={},G3=Object.freeze(Object.defineProperty({__proto__:null,default:W3},Symbol.toStringTag,{value:"Module"})),Rp=$3(G3);(function(t){/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */var e=e||{version:"5.3.0"};if(t.fabric=e,typeof document<"u"&&typeof window<"u")document instanceof(typeof HTMLDocument<"u"?HTMLDocument:Document)?e.document=document:e.document=document.implementation.createHTMLDocument(""),e.window=window;else{var n=Rp,i=new n.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;e.document=i.document,e.jsdomImplForWrapper=Rp.implForWrapper,e.nodeCanvas=Rp.Canvas,e.window=i,DOMParser=e.window.DOMParser}e.isTouchSupported="ontouchstart"in e.window||"ontouchstart"in e.document||e.window&&e.window.navigator&&e.window.navigator.maxTouchPoints>0,e.isLikelyNode=typeof Buffer<"u"&&typeof window>"u",e.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],e.DPI=96,e.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",e.commaWsp="(?:\\s+,?\\s*|,\\s*)",e.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/ig,e.reNonWord=/[ \n\.,;!\?\-]/,e.fontPaths={},e.iMatrix=[1,0,0,1,0,0],e.svgNS="http://www.w3.org/2000/svg",e.perfLimitSizeTotal=2097152,e.maxCacheSideLimit=4096,e.minCacheSideLimit=256,e.charWidthsCache={},e.textureSize=2048,e.disableStyleCopyPaste=!1,e.enableGLFiltering=!0,e.devicePixelRatio=e.window.devicePixelRatio||e.window.webkitDevicePixelRatio||e.window.mozDevicePixelRatio||1,e.browserShadowBlurConstant=1,e.arcToSegmentsCache={},e.boundsOfCurveCache={},e.cachesBoundsOfCurve=!0,e.forceGLPutImageData=!1,e.initFilterBackend=function(){if(e.enableGLFiltering&&e.isWebglSupported&&e.isWebglSupported(e.textureSize))return console.log("max texture size: "+e.maxTextureSize),new e.WebglFilterBackend({tileSize:e.textureSize});if(e.Canvas2dFilterBackend)return new e.Canvas2dFilterBackend},typeof document<"u"&&typeof window<"u"&&(window.fabric=e),function(){function s(f,m){if(this.__eventListeners[f]){var g=this.__eventListeners[f];m?g[g.indexOf(m)]=!1:e.util.array.fill(g,!1)}}function o(f,m){if(this.__eventListeners||(this.__eventListeners={}),arguments.length===1)for(var g in f)this.on(g,f[g]);else this.__eventListeners[f]||(this.__eventListeners[f]=[]),this.__eventListeners[f].push(m);return this}function c(f,m){var g=(function(){m.apply(this,arguments),this.off(f,g)}).bind(this);this.on(f,g)}function h(f,m){if(arguments.length===1)for(var g in f)c.call(this,g,f[g]);else c.call(this,f,m);return this}function l(f,m){if(!this.__eventListeners)return this;if(arguments.length===0)for(f in this.__eventListeners)s.call(this,f);else if(arguments.length===1&&typeof arguments[0]=="object")for(var g in f)s.call(this,g,f[g]);else s.call(this,f,m);return this}function u(f,m){if(!this.__eventListeners)return this;var g=this.__eventListeners[f];if(!g)return this;for(var p=0,v=g.length;p<v;p++)g[p]&&g[p].call(this,m||{});return this.__eventListeners[f]=g.filter(function(b){return b!==!1}),this}e.Observable={fire:u,on:o,once:h,off:l}}(),e.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var s=0,o=arguments.length;s<o;s++)this._onObjectAdded(arguments[s]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(s,o,c){var h=this._objects;return c?h[o]=s:h.splice(o,0,s),this._onObjectAdded&&this._onObjectAdded(s),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var s=this._objects,o,c=!1,h=0,l=arguments.length;h<l;h++)o=s.indexOf(arguments[h]),o!==-1&&(c=!0,s.splice(o,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[h]));return this.renderOnAddRemove&&c&&this.requestRenderAll(),this},forEachObject:function(s,o){for(var c=this.getObjects(),h=0,l=c.length;h<l;h++)s.call(o,c[h],h,c);return this},getObjects:function(s){return typeof s>"u"?this._objects.concat():this._objects.filter(function(o){return o.type===s})},item:function(s){return this._objects[s]},isEmpty:function(){return this._objects.length===0},size:function(){return this._objects.length},contains:function(s,o){return this._objects.indexOf(s)>-1?!0:o?this._objects.some(function(c){return typeof c.contains=="function"&&c.contains(s,!0)}):!1},complexity:function(){return this._objects.reduce(function(s,o){return s+=o.complexity?o.complexity():0,s},0)}},e.CommonMethods={_setOptions:function(s){for(var o in s)this.set(o,s[o])},_initGradient:function(s,o){s&&s.colorStops&&!(s instanceof e.Gradient)&&this.set(o,new e.Gradient(s))},_initPattern:function(s,o,c){s&&s.source&&!(s instanceof e.Pattern)?this.set(o,new e.Pattern(s,c)):c&&c()},_setObject:function(s){for(var o in s)this._set(o,s[o])},set:function(s,o){return typeof s=="object"?this._setObject(s):this._set(s,o),this},_set:function(s,o){this[s]=o},toggle:function(s){var o=this.get(s);return typeof o=="boolean"&&this.set(s,!o),this},get:function(s){return this[s]}},function(s){var o=Math.sqrt,c=Math.atan2,h=Math.pow,l=Math.PI/180,u=Math.PI/2;e.util={cos:function(f){if(f===0)return 1;f<0&&(f=-f);var m=f/u;switch(m){case 1:case 3:return 0;case 2:return-1}return Math.cos(f)},sin:function(f){if(f===0)return 0;var m=f/u,g=1;switch(f<0&&(g=-1),m){case 1:return g;case 2:return 0;case 3:return-g}return Math.sin(f)},removeFromArray:function(f,m){var g=f.indexOf(m);return g!==-1&&f.splice(g,1),f},getRandomInt:function(f,m){return Math.floor(Math.random()*(m-f+1))+f},degreesToRadians:function(f){return f*l},radiansToDegrees:function(f){return f/l},rotatePoint:function(f,m,g){var p=new e.Point(f.x-m.x,f.y-m.y),v=e.util.rotateVector(p,g);return new e.Point(v.x,v.y).addEquals(m)},rotateVector:function(f,m){var g=e.util.sin(m),p=e.util.cos(m),v=f.x*p-f.y*g,b=f.x*g+f.y*p;return{x:v,y:b}},createVector:function(f,m){return new e.Point(m.x-f.x,m.y-f.y)},calcAngleBetweenVectors:function(f,m){return Math.acos((f.x*m.x+f.y*m.y)/(Math.hypot(f.x,f.y)*Math.hypot(m.x,m.y)))},getHatVector:function(f){return new e.Point(f.x,f.y).multiply(1/Math.hypot(f.x,f.y))},getBisector:function(f,m,g){var p=e.util.createVector(f,m),v=e.util.createVector(f,g),b=e.util.calcAngleBetweenVectors(p,v),_=e.util.calcAngleBetweenVectors(e.util.rotateVector(p,b),v),S=b*(_===0?1:-1)/2;return{vector:e.util.getHatVector(e.util.rotateVector(p,S)),angle:b}},projectStrokeOnPoints:function(f,m,g){var p=[],v=m.strokeWidth/2,b=m.strokeUniform?new e.Point(1/m.scaleX,1/m.scaleY):new e.Point(1,1),_=function(S){var w=v/Math.hypot(S.x,S.y);return new e.Point(S.x*w*b.x,S.y*w*b.y)};return f.length<=1||f.forEach(function(S,w){var C=new e.Point(S.x,S.y),x,M;w===0?(M=f[w+1],x=g?_(e.util.createVector(M,C)).addEquals(C):f[f.length-1]):w===f.length-1?(x=f[w-1],M=g?_(e.util.createVector(x,C)).addEquals(C):f[0]):(x=f[w-1],M=f[w+1]);var E=e.util.getBisector(C,x,M),A=E.vector,O=E.angle,D,L;if(m.strokeLineJoin==="miter"&&(D=-v/Math.sin(O/2),L=new e.Point(A.x*D*b.x,A.y*D*b.y),Math.hypot(L.x,L.y)/v<=m.strokeMiterLimit)){p.push(C.add(L)),p.push(C.subtract(L));return}D=-v*Math.SQRT2,L=new e.Point(A.x*D*b.x,A.y*D*b.y),p.push(C.add(L)),p.push(C.subtract(L))}),p},transformPoint:function(f,m,g){return g?new e.Point(m[0]*f.x+m[2]*f.y,m[1]*f.x+m[3]*f.y):new e.Point(m[0]*f.x+m[2]*f.y+m[4],m[1]*f.x+m[3]*f.y+m[5])},makeBoundingBoxFromPoints:function(f,m){if(m)for(var g=0;g<f.length;g++)f[g]=e.util.transformPoint(f[g],m);var p=[f[0].x,f[1].x,f[2].x,f[3].x],v=e.util.array.min(p),b=e.util.array.max(p),_=b-v,S=[f[0].y,f[1].y,f[2].y,f[3].y],w=e.util.array.min(S),C=e.util.array.max(S),x=C-w;return{left:v,top:w,width:_,height:x}},invertTransform:function(f){var m=1/(f[0]*f[3]-f[1]*f[2]),g=[m*f[3],-m*f[1],-m*f[2],m*f[0]],p=e.util.transformPoint({x:f[4],y:f[5]},g,!0);return g[4]=-p.x,g[5]=-p.y,g},toFixed:function(f,m){return parseFloat(Number(f).toFixed(m))},parseUnit:function(f,m){var g=/\D{0,2}$/.exec(f),p=parseFloat(f);switch(m||(m=e.Text.DEFAULT_SVG_FONT_SIZE),g[0]){case"mm":return p*e.DPI/25.4;case"cm":return p*e.DPI/2.54;case"in":return p*e.DPI;case"pt":return p*e.DPI/72;case"pc":return p*e.DPI/72*12;case"em":return p*m;default:return p}},falseFunction:function(){return!1},getKlass:function(f,m){return f=e.util.string.camelize(f.charAt(0).toUpperCase()+f.slice(1)),e.util.resolveNamespace(m)[f]},getSvgAttributes:function(f){var m=["instantiated_by_use","style","id","class"];switch(f){case"linearGradient":m=m.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":m=m.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":m=m.concat(["offset","stop-color","stop-opacity"]);break}return m},resolveNamespace:function(f){if(!f)return e;var m=f.split("."),g=m.length,p,v=s||e.window;for(p=0;p<g;++p)v=v[m[p]];return v},loadImage:function(f,m,g,p){if(!f){m&&m.call(g,f);return}var v=e.util.createImage(),b=function(){m&&m.call(g,v,!1),v=v.onload=v.onerror=null};v.onload=b,v.onerror=function(){e.log("Error loading "+v.src),m&&m.call(g,null,!0),v=v.onload=v.onerror=null},f.indexOf("data")!==0&&p!==void 0&&p!==null&&(v.crossOrigin=p),f.substring(0,14)==="data:image/svg"&&(v.onload=null,e.util.loadImageInDom(v,b)),v.src=f},loadImageInDom:function(f,m){var g=e.document.createElement("div");g.style.width=g.style.height="1px",g.style.left=g.style.top="-100%",g.style.position="absolute",g.appendChild(f),e.document.querySelector("body").appendChild(g),f.onload=function(){m(),g.parentNode.removeChild(g),g=null}},enlivenObjects:function(f,m,g,p){f=f||[];var v=[],b=0,_=f.length;function S(){++b===_&&m&&m(v.filter(function(w){return w}))}if(!_){m&&m(v);return}f.forEach(function(w,C){if(!w||!w.type){S();return}var x=e.util.getKlass(w.type,g);x.fromObject(w,function(M,E){E||(v[C]=M),p&&p(w,M,E),S()})})},enlivenObjectEnlivables:function(f,m,g){var p=e.Object.ENLIVEN_PROPS.filter(function(v){return!!f[v]});e.util.enlivenObjects(p.map(function(v){return f[v]}),function(v){var b={};p.forEach(function(_,S){b[_]=v[S],m&&(m[_]=v[S])}),g&&g(b)})},enlivenPatterns:function(f,m){f=f||[];function g(){++v===b&&m&&m(p)}var p=[],v=0,b=f.length;if(!b){m&&m(p);return}f.forEach(function(_,S){_&&_.source?new e.Pattern(_,function(w){p[S]=w,g()}):(p[S]=_,g())})},groupSVGElements:function(f,m,g){var p;return f&&f.length===1?(typeof g<"u"&&(f[0].sourcePath=g),f[0]):(m&&(m.width&&m.height?m.centerPoint={x:m.width/2,y:m.height/2}:(delete m.width,delete m.height)),p=new e.Group(f,m),typeof g<"u"&&(p.sourcePath=g),p)},populateWithProperties:function(f,m,g){if(g&&Array.isArray(g))for(var p=0,v=g.length;p<v;p++)g[p]in f&&(m[g[p]]=f[g[p]])},createCanvasElement:function(){return e.document.createElement("canvas")},copyCanvasElement:function(f){var m=e.util.createCanvasElement();return m.width=f.width,m.height=f.height,m.getContext("2d").drawImage(f,0,0),m},toDataURL:function(f,m,g){return f.toDataURL("image/"+m,g)},createImage:function(){return e.document.createElement("img")},multiplyTransformMatrices:function(f,m,g){return[f[0]*m[0]+f[2]*m[1],f[1]*m[0]+f[3]*m[1],f[0]*m[2]+f[2]*m[3],f[1]*m[2]+f[3]*m[3],g?0:f[0]*m[4]+f[2]*m[5]+f[4],g?0:f[1]*m[4]+f[3]*m[5]+f[5]]},qrDecompose:function(f){var m=c(f[1],f[0]),g=h(f[0],2)+h(f[1],2),p=o(g),v=(f[0]*f[3]-f[2]*f[1])/p,b=c(f[0]*f[2]+f[1]*f[3],g);return{angle:m/l,scaleX:p,scaleY:v,skewX:b/l,skewY:0,translateX:f[4],translateY:f[5]}},calcRotateMatrix:function(f){if(!f.angle)return e.iMatrix.concat();var m=e.util.degreesToRadians(f.angle),g=e.util.cos(m),p=e.util.sin(m);return[g,p,-p,g,0,0]},calcDimensionsMatrix:function(f){var m=typeof f.scaleX>"u"?1:f.scaleX,g=typeof f.scaleY>"u"?1:f.scaleY,p=[f.flipX?-m:m,0,0,f.flipY?-g:g,0,0],v=e.util.multiplyTransformMatrices,b=e.util.degreesToRadians;return f.skewX&&(p=v(p,[1,0,Math.tan(b(f.skewX)),1],!0)),f.skewY&&(p=v(p,[1,Math.tan(b(f.skewY)),0,1],!0)),p},composeMatrix:function(f){var m=[1,0,0,1,f.translateX||0,f.translateY||0],g=e.util.multiplyTransformMatrices;return f.angle&&(m=g(m,e.util.calcRotateMatrix(f))),(f.scaleX!==1||f.scaleY!==1||f.skewX||f.skewY||f.flipX||f.flipY)&&(m=g(m,e.util.calcDimensionsMatrix(f))),m},resetObjectTransform:function(f){f.scaleX=1,f.scaleY=1,f.skewX=0,f.skewY=0,f.flipX=!1,f.flipY=!1,f.rotate(0)},saveObjectTransform:function(f){return{scaleX:f.scaleX,scaleY:f.scaleY,skewX:f.skewX,skewY:f.skewY,angle:f.angle,left:f.left,flipX:f.flipX,flipY:f.flipY,top:f.top}},isTransparent:function(f,m,g,p){p>0&&(m>p?m-=p:m=0,g>p?g-=p:g=0);var v=!0,b,_,S=f.getImageData(m,g,p*2||1,p*2||1),w=S.data.length;for(b=3;b<w&&(_=S.data[b],v=_<=0,v!==!1);b+=4);return S=null,v},parsePreserveAspectRatioAttribute:function(f){var m="meet",g="Mid",p="Mid",v=f.split(" "),b;return v&&v.length&&(m=v.pop(),m!=="meet"&&m!=="slice"?(b=m,m="meet"):v.length&&(b=v.pop())),g=b!=="none"?b.slice(1,4):"none",p=b!=="none"?b.slice(5,8):"none",{meetOrSlice:m,alignX:g,alignY:p}},clearFabricFontCache:function(f){f=(f||"").toLowerCase(),f?e.charWidthsCache[f]&&delete e.charWidthsCache[f]:e.charWidthsCache={}},limitDimsByArea:function(f,m){var g=Math.sqrt(m*f),p=Math.floor(m/g);return{x:Math.floor(g),y:p}},capValue:function(f,m,g){return Math.max(f,Math.min(m,g))},findScaleToFit:function(f,m){return Math.min(m.width/f.width,m.height/f.height)},findScaleToCover:function(f,m){return Math.max(m.width/f.width,m.height/f.height)},matrixToSVG:function(f){return"matrix("+f.map(function(m){return e.util.toFixed(m,e.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(f,m){var g=e.util.invertTransform(m),p=e.util.multiplyTransformMatrices(g,f.calcOwnMatrix());e.util.applyTransformToObject(f,p)},addTransformToObject:function(f,m){e.util.applyTransformToObject(f,e.util.multiplyTransformMatrices(m,f.calcOwnMatrix()))},applyTransformToObject:function(f,m){var g=e.util.qrDecompose(m),p=new e.Point(g.translateX,g.translateY);f.flipX=!1,f.flipY=!1,f.set("scaleX",g.scaleX),f.set("scaleY",g.scaleY),f.skewX=g.skewX,f.skewY=g.skewY,f.angle=g.angle,f.setPositionByOrigin(p,"center","center")},sizeAfterTransform:function(f,m,g){var p=f/2,v=m/2,b=[{x:-p,y:-v},{x:p,y:-v},{x:-p,y:v},{x:p,y:v}],_=e.util.calcDimensionsMatrix(g),S=e.util.makeBoundingBoxFromPoints(b,_);return{x:S.width,y:S.height}},mergeClipPaths:function(f,m){var g=f,p=m;g.inverted&&!p.inverted&&(g=m,p=f),e.util.applyTransformToObject(p,e.util.multiplyTransformMatrices(e.util.invertTransform(g.calcTransformMatrix()),p.calcTransformMatrix()));var v=g.inverted&&p.inverted;return v&&(g.inverted=p.inverted=!1),new e.Group([g],{clipPath:p,inverted:v})},hasStyleChanged:function(f,m,g){return g=g||!1,f.fill!==m.fill||f.stroke!==m.stroke||f.strokeWidth!==m.strokeWidth||f.fontSize!==m.fontSize||f.fontFamily!==m.fontFamily||f.fontWeight!==m.fontWeight||f.fontStyle!==m.fontStyle||f.textBackgroundColor!==m.textBackgroundColor||f.deltaY!==m.deltaY||g&&(f.overline!==m.overline||f.underline!==m.underline||f.linethrough!==m.linethrough)},stylesToArray:function(g,m){for(var g=e.util.object.clone(g,!0),p=m.split(`
`),v=-1,b={},_=[],S=0;S<p.length;S++){if(!g[S]){v+=p[S].length;continue}for(var w=0;w<p[S].length;w++){v++;var C=g[S][w];if(C&&Object.keys(C).length>0){var x=e.util.hasStyleChanged(b,C,!0);x?_.push({start:v,end:v+1,style:C}):_[_.length-1].end++}b=C||{}}}return _},stylesFromArray:function(f,m){if(!Array.isArray(f))return f;for(var g=m.split(`
`),p=-1,v=0,b={},_=0;_<g.length;_++)for(var S=0;S<g[_].length;S++)p++,f[v]&&f[v].start<=p&&p<f[v].end&&(b[_]=b[_]||{},b[_][S]=Object.assign({},f[v].style),p===f[v].end-1&&v++);return b}}}(t),function(){var s=Array.prototype.join,o={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},c={m:"l",M:"L"};function h(T,P,H,N,G,$,z,Z,W,te,ie){var re=e.util.cos(T),_e=e.util.sin(T),Pe=e.util.cos(P),K=e.util.sin(P),Q=H*G*Pe-N*$*K+z,fe=N*G*Pe+H*$*K+Z,ge=te+W*(-H*G*_e-N*$*re),se=ie+W*(-N*G*_e+H*$*re),me=Q+W*(H*G*K+N*$*Pe),be=fe+W*(N*G*K-H*$*Pe);return["C",ge,se,me,be,Q,fe]}function l(T,P,H,N,G,$,z){var Z=Math.PI,W=z*Z/180,te=e.util.sin(W),ie=e.util.cos(W),re=0,_e=0;H=Math.abs(H),N=Math.abs(N);var Pe=-ie*T*.5-te*P*.5,K=-ie*P*.5+te*T*.5,Q=H*H,fe=N*N,ge=K*K,se=Pe*Pe,me=Q*fe-Q*ge-fe*se,be=0;if(me<0){var Me=Math.sqrt(1-me/(Q*fe));H*=Me,N*=Me}else be=(G===$?-1:1)*Math.sqrt(me/(Q*ge+fe*se));var Ee=be*H*K/N,X=-be*N*Pe/H,Y=ie*Ee-te*X+T*.5,le=te*Ee+ie*X+P*.5,Ce=u(1,0,(Pe-Ee)/H,(K-X)/N),Re=u((Pe-Ee)/H,(K-X)/N,(-Pe-Ee)/H,(-K-X)/N);$===0&&Re>0?Re-=2*Z:$===1&&Re<0&&(Re+=2*Z);for(var Ne=Math.ceil(Math.abs(Re/Z*2)),he=[],pe=Re/Ne,ee=8/3*Math.sin(pe/4)*Math.sin(pe/4)/Math.sin(pe/2),oe=Ce+pe,J=0;J<Ne;J++)he[J]=h(Ce,oe,ie,te,H,N,Y,le,ee,re,_e),re=he[J][5],_e=he[J][6],Ce=oe,oe+=pe;return he}function u(T,P,H,N){var G=Math.atan2(P,T),$=Math.atan2(N,H);return $>=G?$-G:2*Math.PI-(G-$)}function f(T,P,H,N,G,$,z,Z){var W;if(e.cachesBoundsOfCurve&&(W=s.call(arguments),e.boundsOfCurveCache[W]))return e.boundsOfCurveCache[W];var te=Math.sqrt,ie=Math.min,re=Math.max,_e=Math.abs,Pe=[],K=[[],[]],Q,fe,ge,se,me,be,Me,Ee;fe=6*T-12*H+6*G,Q=-3*T+9*H-9*G+3*z,ge=3*H-3*T;for(var X=0;X<2;++X){if(X>0&&(fe=6*P-12*N+6*$,Q=-3*P+9*N-9*$+3*Z,ge=3*N-3*P),_e(Q)<1e-12){if(_e(fe)<1e-12)continue;se=-ge/fe,0<se&&se<1&&Pe.push(se);continue}Me=fe*fe-4*ge*Q,!(Me<0)&&(Ee=te(Me),me=(-fe+Ee)/(2*Q),0<me&&me<1&&Pe.push(me),be=(-fe-Ee)/(2*Q),0<be&&be<1&&Pe.push(be))}for(var Y,le,Ce=Pe.length,Re=Ce,Ne;Ce--;)se=Pe[Ce],Ne=1-se,Y=Ne*Ne*Ne*T+3*Ne*Ne*se*H+3*Ne*se*se*G+se*se*se*z,K[0][Ce]=Y,le=Ne*Ne*Ne*P+3*Ne*Ne*se*N+3*Ne*se*se*$+se*se*se*Z,K[1][Ce]=le;K[0][Re]=T,K[1][Re]=P,K[0][Re+1]=z,K[1][Re+1]=Z;var he=[{x:ie.apply(null,K[0]),y:ie.apply(null,K[1])},{x:re.apply(null,K[0]),y:re.apply(null,K[1])}];return e.cachesBoundsOfCurve&&(e.boundsOfCurveCache[W]=he),he}function m(T,P,H){for(var N=H[1],G=H[2],$=H[3],z=H[4],Z=H[5],W=H[6],te=H[7],ie=l(W-T,te-P,N,G,z,Z,$),re=0,_e=ie.length;re<_e;re++)ie[re][1]+=T,ie[re][2]+=P,ie[re][3]+=T,ie[re][4]+=P,ie[re][5]+=T,ie[re][6]+=P;return ie}function g(T){var P=0,H=0,N=T.length,G=0,$=0,z,Z,W,te=[],ie,re,_e;for(Z=0;Z<N;++Z){switch(W=!1,z=T[Z].slice(0),z[0]){case"l":z[0]="L",z[1]+=P,z[2]+=H;case"L":P=z[1],H=z[2];break;case"h":z[1]+=P;case"H":z[0]="L",z[2]=H,P=z[1];break;case"v":z[1]+=H;case"V":z[0]="L",H=z[1],z[1]=P,z[2]=H;break;case"m":z[0]="M",z[1]+=P,z[2]+=H;case"M":P=z[1],H=z[2],G=z[1],$=z[2];break;case"c":z[0]="C",z[1]+=P,z[2]+=H,z[3]+=P,z[4]+=H,z[5]+=P,z[6]+=H;case"C":re=z[3],_e=z[4],P=z[5],H=z[6];break;case"s":z[0]="S",z[1]+=P,z[2]+=H,z[3]+=P,z[4]+=H;case"S":ie==="C"?(re=2*P-re,_e=2*H-_e):(re=P,_e=H),P=z[3],H=z[4],z[0]="C",z[5]=z[3],z[6]=z[4],z[3]=z[1],z[4]=z[2],z[1]=re,z[2]=_e,re=z[3],_e=z[4];break;case"q":z[0]="Q",z[1]+=P,z[2]+=H,z[3]+=P,z[4]+=H;case"Q":re=z[1],_e=z[2],P=z[3],H=z[4];break;case"t":z[0]="T",z[1]+=P,z[2]+=H;case"T":ie==="Q"?(re=2*P-re,_e=2*H-_e):(re=P,_e=H),z[0]="Q",P=z[1],H=z[2],z[1]=re,z[2]=_e,z[3]=P,z[4]=H;break;case"a":z[0]="A",z[6]+=P,z[7]+=H;case"A":W=!0,te=te.concat(m(P,H,z)),P=z[6],H=z[7];break;case"z":case"Z":P=G,H=$;break}W||te.push(z),ie=z[0]}return te}function p(T,P,H,N){return Math.sqrt((H-T)*(H-T)+(N-P)*(N-P))}function v(T){return T*T*T}function b(T){return 3*T*T*(1-T)}function _(T){return 3*T*(1-T)*(1-T)}function S(T){return(1-T)*(1-T)*(1-T)}function w(T,P,H,N,G,$,z,Z){return function(W){var te=v(W),ie=b(W),re=_(W),_e=S(W);return{x:z*te+G*ie+H*re+T*_e,y:Z*te+$*ie+N*re+P*_e}}}function C(T,P,H,N,G,$,z,Z){return function(W){var te=1-W,ie=3*te*te*(H-T)+6*te*W*(G-H)+3*W*W*(z-G),re=3*te*te*(N-P)+6*te*W*($-N)+3*W*W*(Z-$);return Math.atan2(re,ie)}}function x(T){return T*T}function M(T){return 2*T*(1-T)}function E(T){return(1-T)*(1-T)}function A(T,P,H,N,G,$){return function(z){var Z=x(z),W=M(z),te=E(z);return{x:G*Z+H*W+T*te,y:$*Z+N*W+P*te}}}function O(T,P,H,N,G,$){return function(z){var Z=1-z,W=2*Z*(H-T)+2*z*(G-H),te=2*Z*(N-P)+2*z*($-N);return Math.atan2(te,W)}}function D(T,P,H){var N={x:P,y:H},G,$=0,z;for(z=1;z<=100;z+=1)G=T(z/100),$+=p(N.x,N.y,G.x,G.y),N=G;return $}function L(T,P){for(var H=0,N=0,G=T.iterator,$={x:T.x,y:T.y},z,Z,W=.01,te=T.angleFinder,ie;N<P&&W>1e-4;)z=G(H),ie=H,Z=p($.x,$.y,z.x,z.y),Z+N>P?(H-=W,W/=2):($=z,H+=W,N+=Z);return z.angle=te(ie),z}function U(T){for(var P=0,H=T.length,N,G=0,$=0,z=0,Z=0,W=[],te,ie,re,_e=0;_e<H;_e++){switch(N=T[_e],ie={x:G,y:$,command:N[0]},N[0]){case"M":ie.length=0,z=G=N[1],Z=$=N[2];break;case"L":ie.length=p(G,$,N[1],N[2]),G=N[1],$=N[2];break;case"C":te=w(G,$,N[1],N[2],N[3],N[4],N[5],N[6]),re=C(G,$,N[1],N[2],N[3],N[4],N[5],N[6]),ie.iterator=te,ie.angleFinder=re,ie.length=D(te,G,$),G=N[5],$=N[6];break;case"Q":te=A(G,$,N[1],N[2],N[3],N[4]),re=O(G,$,N[1],N[2],N[3],N[4]),ie.iterator=te,ie.angleFinder=re,ie.length=D(te,G,$),G=N[3],$=N[4];break;case"Z":case"z":ie.destX=z,ie.destY=Z,ie.length=p(G,$,z,Z),G=z,$=Z;break}P+=ie.length,W.push(ie)}return W.push({length:P,x:G,y:$}),W}function j(T,P,H){H||(H=U(T));for(var N=0;P-H[N].length>0&&N<H.length-2;)P-=H[N].length,N++;var G=H[N],$=P/G.length,z=G.command,Z=T[N],W;switch(z){case"M":return{x:G.x,y:G.y,angle:0};case"Z":case"z":return W=new e.Point(G.x,G.y).lerp(new e.Point(G.destX,G.destY),$),W.angle=Math.atan2(G.destY-G.y,G.destX-G.x),W;case"L":return W=new e.Point(G.x,G.y).lerp(new e.Point(Z[1],Z[2]),$),W.angle=Math.atan2(Z[2]-G.y,Z[1]-G.x),W;case"C":return L(G,P);case"Q":return L(G,P)}}function V(T){var P=[],H=[],N,G,$=e.rePathCommand,z="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",Z="("+z+")"+e.commaWsp,W="([01])"+e.commaWsp+"?",te=Z+"?"+Z+"?"+Z+W+W+Z+"?("+z+")",ie=new RegExp(te,"g"),re,_e,Pe;if(!T||!T.match)return P;Pe=T.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);for(var K=0,Q,fe=Pe.length;K<fe;K++){N=Pe[K],_e=N.slice(1).trim(),H.length=0;var ge=N.charAt(0);if(Q=[ge],ge.toLowerCase()==="a")for(var se;se=ie.exec(_e);)for(var me=1;me<se.length;me++)H.push(se[me]);else for(;re=$.exec(_e);)H.push(re[0]);for(var me=0,be=H.length;me<be;me++)G=parseFloat(H[me]),isNaN(G)||Q.push(G);var Me=o[ge.toLowerCase()],Ee=c[ge]||ge;if(Q.length-1>Me)for(var X=1,Y=Q.length;X<Y;X+=Me)P.push([ge].concat(Q.slice(X,X+Me))),ge=Ee;else P.push(Q)}return P}function k(T,P){var H=[],N,G=new e.Point(T[0].x,T[0].y),$=new e.Point(T[1].x,T[1].y),z=T.length,Z=1,W=0,te=z>2;for(P=P||0,te&&(Z=T[2].x<$.x?-1:T[2].x===$.x?0:1,W=T[2].y<$.y?-1:T[2].y===$.y?0:1),H.push(["M",G.x-Z*P,G.y-W*P]),N=1;N<z;N++){if(!G.eq($)){var ie=G.midPointFrom($);H.push(["Q",G.x,G.y,ie.x,ie.y])}G=T[N],N+1<T.length&&($=T[N+1])}return te&&(Z=G.x>T[N-2].x?1:G.x===T[N-2].x?0:-1,W=G.y>T[N-2].y?1:G.y===T[N-2].y?0:-1),H.push(["L",G.x+Z*P,G.y+W*P]),H}function F(T,P,H){return H&&(P=e.util.multiplyTransformMatrices(P,[1,0,0,1,-H.x,-H.y])),T.map(function(N){for(var G=N.slice(0),$={},z=1;z<N.length-1;z+=2)$.x=N[z],$.y=N[z+1],$=e.util.transformPoint($,P),G[z]=$.x,G[z+1]=$.y;return G})}e.util.joinPath=function(T){return T.map(function(P){return P.join(" ")}).join(" ")},e.util.parsePath=V,e.util.makePathSimpler=g,e.util.getSmoothPathFromPoints=k,e.util.getPathSegmentsInfo=U,e.util.getBoundsOfCurve=f,e.util.getPointOnPath=j,e.util.transformPath=F}(),function(){var s=Array.prototype.slice;function o(f,m){for(var g=s.call(arguments,2),p=[],v=0,b=f.length;v<b;v++)p[v]=g.length?f[v][m].apply(f[v],g):f[v][m].call(f[v]);return p}function c(f,m){return u(f,m,function(g,p){return g>=p})}function h(f,m){return u(f,m,function(g,p){return g<p})}function l(f,m){for(var g=f.length;g--;)f[g]=m;return f}function u(f,m,g){if(!(!f||f.length===0)){var p=f.length-1,v=m?f[p][m]:f[p];if(m)for(;p--;)g(f[p][m],v)&&(v=f[p][m]);else for(;p--;)g(f[p],v)&&(v=f[p]);return v}}e.util.array={fill:l,invoke:o,min:h,max:c}}(),function(){function s(c,h,l){if(l)if(!e.isLikelyNode&&h instanceof Element)c=h;else if(h instanceof Array){c=[];for(var u=0,f=h.length;u<f;u++)c[u]=s({},h[u],l)}else if(h&&typeof h=="object")for(var m in h)m==="canvas"||m==="group"?c[m]=null:h.hasOwnProperty(m)&&(c[m]=s({},h[m],l));else c=h;else for(var m in h)c[m]=h[m];return c}function o(c,h){return s({},c,h)}e.util.object={extend:s,clone:o},e.util.object.extend(e.util,e.Observable)}(),function(){function s(u){return u.replace(/-+(.)?/g,function(f,m){return m?m.toUpperCase():""})}function o(u,f){return u.charAt(0).toUpperCase()+(f?u.slice(1):u.slice(1).toLowerCase())}function c(u){return u.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function h(u){var f=0,m,g=[];for(f=0,m;f<u.length;f++)(m=l(u,f))!==!1&&g.push(m);return g}function l(u,f){var m=u.charCodeAt(f);if(isNaN(m))return"";if(m<55296||m>57343)return u.charAt(f);if(55296<=m&&m<=56319){if(u.length<=f+1)throw"High surrogate without following low surrogate";var g=u.charCodeAt(f+1);if(56320>g||g>57343)throw"High surrogate without following low surrogate";return u.charAt(f)+u.charAt(f+1)}if(f===0)throw"Low surrogate without preceding high surrogate";var p=u.charCodeAt(f-1);if(55296>p||p>56319)throw"Low surrogate without preceding high surrogate";return!1}e.util.string={camelize:s,capitalize:o,escapeXml:c,graphemeSplit:h}}(),function(){var s=Array.prototype.slice,o=function(){},c=function(){for(var m in{toString:1})if(m==="toString")return!1;return!0}(),h=function(m,g,p){for(var v in g)v in m.prototype&&typeof m.prototype[v]=="function"&&(g[v]+"").indexOf("callSuper")>-1?m.prototype[v]=function(b){return function(){var _=this.constructor.superclass;this.constructor.superclass=p;var S=g[b].apply(this,arguments);if(this.constructor.superclass=_,b!=="initialize")return S}}(v):m.prototype[v]=g[v],c&&(g.toString!==Object.prototype.toString&&(m.prototype.toString=g.toString),g.valueOf!==Object.prototype.valueOf&&(m.prototype.valueOf=g.valueOf))};function l(){}function u(m){for(var g=null,p=this;p.constructor.superclass;){var v=p.constructor.superclass.prototype[m];if(p[m]!==v){g=v;break}p=p.constructor.superclass.prototype}return g?arguments.length>1?g.apply(this,s.call(arguments,1)):g.call(this):console.log("tried to callSuper "+m+", method not found in prototype chain",this)}function f(){var m=null,g=s.call(arguments,0);typeof g[0]=="function"&&(m=g.shift());function p(){this.initialize.apply(this,arguments)}p.superclass=m,p.subclasses=[],m&&(l.prototype=m.prototype,p.prototype=new l,m.subclasses.push(p));for(var v=0,b=g.length;v<b;v++)h(p,g[v],m);return p.prototype.initialize||(p.prototype.initialize=o),p.prototype.constructor=p,p.prototype.callSuper=u,p}e.util.createClass=f}(),function(){var s=!!e.document.createElement("div").attachEvent,o=["touchstart","touchmove","touchend"];e.util.addListener=function(h,l,u,f){h&&h.addEventListener(l,u,s?!1:f)},e.util.removeListener=function(h,l,u,f){h&&h.removeEventListener(l,u,s?!1:f)};function c(h){var l=h.changedTouches;return l&&l[0]?l[0]:h}e.util.getPointer=function(h){var l=h.target,u=e.util.getScrollLeftTop(l),f=c(h);return{x:f.clientX+u.left,y:f.clientY+u.top}},e.util.isTouchEvent=function(h){return o.indexOf(h.type)>-1||h.pointerType==="touch"}}(),function(){function s(f,m){var g=f.style;if(!g)return f;if(typeof m=="string")return f.style.cssText+=";"+m,m.indexOf("opacity")>-1?u(f,m.match(/opacity:\s*(\d?\.?\d*)/)[1]):f;for(var p in m)if(p==="opacity")u(f,m[p]);else{var v=p==="float"||p==="cssFloat"?typeof g.styleFloat>"u"?"cssFloat":"styleFloat":p;g.setProperty(v,m[p])}return f}var o=e.document.createElement("div"),c=typeof o.style.opacity=="string",h=typeof o.style.filter=="string",l=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,u=function(f){return f};c?u=function(f,m){return f.style.opacity=m,f}:h&&(u=function(f,m){var g=f.style;return f.currentStyle&&!f.currentStyle.hasLayout&&(g.zoom=1),l.test(g.filter)?(m=m>=.9999?"":"alpha(opacity="+m*100+")",g.filter=g.filter.replace(l,m)):g.filter+=" alpha(opacity="+m*100+")",f}),e.util.setStyle=s}(),function(){var s=Array.prototype.slice;function o(S){return typeof S=="string"?e.document.getElementById(S):S}var c,h=function(S){return s.call(S,0)};try{c=h(e.document.childNodes)instanceof Array}catch{}c||(h=function(S){for(var w=new Array(S.length),C=S.length;C--;)w[C]=S[C];return w});function l(S,w){var C=e.document.createElement(S);for(var x in w)x==="class"?C.className=w[x]:x==="for"?C.htmlFor=w[x]:C.setAttribute(x,w[x]);return C}function u(S,w){S&&(" "+S.className+" ").indexOf(" "+w+" ")===-1&&(S.className+=(S.className?" ":"")+w)}function f(S,w,C){return typeof w=="string"&&(w=l(w,C)),S.parentNode&&S.parentNode.replaceChild(w,S),w.appendChild(S),w}function m(S){for(var w=0,C=0,x=e.document.documentElement,M=e.document.body||{scrollLeft:0,scrollTop:0};S&&(S.parentNode||S.host)&&(S=S.parentNode||S.host,S===e.document?(w=M.scrollLeft||x.scrollLeft||0,C=M.scrollTop||x.scrollTop||0):(w+=S.scrollLeft||0,C+=S.scrollTop||0),!(S.nodeType===1&&S.style.position==="fixed")););return{left:w,top:C}}function g(S){var w,C=S&&S.ownerDocument,x={left:0,top:0},M={left:0,top:0},E,A={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!C)return M;for(var O in A)M[A[O]]+=parseInt(p(S,O),10)||0;return w=C.documentElement,typeof S.getBoundingClientRect<"u"&&(x=S.getBoundingClientRect()),E=m(S),{left:x.left+E.left-(w.clientLeft||0)+M.left,top:x.top+E.top-(w.clientTop||0)+M.top}}var p;e.document.defaultView&&e.document.defaultView.getComputedStyle?p=function(S,w){var C=e.document.defaultView.getComputedStyle(S,null);return C?C[w]:void 0}:p=function(S,w){var C=S.style[w];return!C&&S.currentStyle&&(C=S.currentStyle[w]),C},function(){var S=e.document.documentElement.style,w="userSelect"in S?"userSelect":"MozUserSelect"in S?"MozUserSelect":"WebkitUserSelect"in S?"WebkitUserSelect":"KhtmlUserSelect"in S?"KhtmlUserSelect":"";function C(M){return typeof M.onselectstart<"u"&&(M.onselectstart=e.util.falseFunction),w?M.style[w]="none":typeof M.unselectable=="string"&&(M.unselectable="on"),M}function x(M){return typeof M.onselectstart<"u"&&(M.onselectstart=null),w?M.style[w]="":typeof M.unselectable=="string"&&(M.unselectable=""),M}e.util.makeElementUnselectable=C,e.util.makeElementSelectable=x}();function v(S){var w=e.jsdomImplForWrapper(S);return w._canvas||w._image}function b(S){if(e.isLikelyNode){var w=e.jsdomImplForWrapper(S);w&&(w._image=null,w._canvas=null,w._currentSrc=null,w._attributes=null,w._classList=null)}}function _(S,w){S.imageSmoothingEnabled=S.imageSmoothingEnabled||S.webkitImageSmoothingEnabled||S.mozImageSmoothingEnabled||S.msImageSmoothingEnabled||S.oImageSmoothingEnabled,S.imageSmoothingEnabled=w}e.util.setImageSmoothing=_,e.util.getById=o,e.util.toArray=h,e.util.addClass=u,e.util.makeElement=l,e.util.wrapElement=f,e.util.getScrollLeftTop=m,e.util.getElementOffset=g,e.util.getNodeCanvas=v,e.util.cleanUpJsdomNode=b}(),function(){function s(h,l){return h+(/\?/.test(h)?"&":"?")+l}function o(){}function c(h,l){l||(l={});var u=l.method?l.method.toUpperCase():"GET",f=l.onComplete||function(){},m=new e.window.XMLHttpRequest,g=l.body||l.parameters;return m.onreadystatechange=function(){m.readyState===4&&(f(m),m.onreadystatechange=o)},u==="GET"&&(g=null,typeof l.parameters=="string"&&(h=s(h,l.parameters))),m.open(u,h,!0),(u==="POST"||u==="PUT")&&m.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),m.send(g),m}e.util.request=c}(),e.log=console.log,e.warn=console.warn,function(){var s=e.util.object.extend,o=e.util.object.clone,c=[];e.util.object.extend(c,{cancelAll:function(){var v=this.splice(0);return v.forEach(function(b){b.cancel()}),v},cancelByCanvas:function(v){if(!v)return[];var b=this.filter(function(_){return typeof _.target=="object"&&_.target.canvas===v});return b.forEach(function(_){_.cancel()}),b},cancelByTarget:function(v){var b=this.findAnimationsByTarget(v);return b.forEach(function(_){_.cancel()}),b},findAnimationIndex:function(v){return this.indexOf(this.findAnimation(v))},findAnimation:function(v){return this.find(function(b){return b.cancel===v})},findAnimationsByTarget:function(v){return v?this.filter(function(b){return b.target===v}):[]}});function h(){return!1}function l(v,b,_,S){return-_*Math.cos(v/S*(Math.PI/2))+_+b}function u(v){v||(v={});var b=!1,_,S=function(){var w=e.runningAnimations.indexOf(_);return w>-1&&e.runningAnimations.splice(w,1)[0]};return _=s(o(v),{cancel:function(){return b=!0,S()},currentValue:"startValue"in v?v.startValue:0,completionRate:0,durationRate:0}),e.runningAnimations.push(_),g(function(w){var C=w||+new Date,x=v.duration||500,M=C+x,E,A=v.onChange||h,O=v.abort||h,D=v.onComplete||h,L=v.easing||l,U="startValue"in v?v.startValue.length>0:!1,j="startValue"in v?v.startValue:0,V="endValue"in v?v.endValue:100,k=v.byValue||(U?j.map(function(F,T){return V[T]-j[T]}):V-j);v.onStart&&v.onStart(),function F(T){E=T||+new Date;var P=E>M?x:E-C,H=P/x,N=U?j.map(function($,z){return L(P,j[z],k[z],x)}):L(P,j,k,x),G=Math.abs(U?(N[0]-j[0])/k[0]:(N-j)/k);if(_.currentValue=U?N.slice():N,_.completionRate=G,_.durationRate=H,!b){if(O(N,G,H)){S();return}if(E>M){_.currentValue=U?V.slice():V,_.completionRate=1,_.durationRate=1,A(U?V.slice():V,1,1),D(V,1,1),S();return}else A(N,G,H),g(F)}}(C)}),_.cancel}var f=e.window.requestAnimationFrame||e.window.webkitRequestAnimationFrame||e.window.mozRequestAnimationFrame||e.window.oRequestAnimationFrame||e.window.msRequestAnimationFrame||function(v){return e.window.setTimeout(v,1e3/60)},m=e.window.cancelAnimationFrame||e.window.clearTimeout;function g(){return f.apply(e.window,arguments)}function p(){return m.apply(e.window,arguments)}e.util.animate=u,e.util.requestAnimFrame=g,e.util.cancelAnimFrame=p,e.runningAnimations=c}(),function(){function s(c,h,l){var u="rgba("+parseInt(c[0]+l*(h[0]-c[0]),10)+","+parseInt(c[1]+l*(h[1]-c[1]),10)+","+parseInt(c[2]+l*(h[2]-c[2]),10);return u+=","+(c&&h?parseFloat(c[3]+l*(h[3]-c[3])):1),u+=")",u}function o(c,h,l,u){var f=new e.Color(c).getSource(),m=new e.Color(h).getSource(),g=u.onComplete,p=u.onChange;return u=u||{},e.util.animate(e.util.object.extend(u,{duration:l||500,startValue:f,endValue:m,byValue:m,easing:function(v,b,_,S){var w=u.colorEasing?u.colorEasing(v,S):1-Math.cos(v/S*(Math.PI/2));return s(b,_,w)},onComplete:function(v,b,_){if(g)return g(s(m,m,0),b,_)},onChange:function(v,b,_){if(p){if(Array.isArray(v))return p(s(v,v,0),b,_);p(v,b,_)}}}))}e.util.animateColor=o}(),function(){function s(T,P,H,N){return T<Math.abs(P)?(T=P,N=H/4):P===0&&T===0?N=H/(2*Math.PI)*Math.asin(1):N=H/(2*Math.PI)*Math.asin(P/T),{a:T,c:P,p:H,s:N}}function o(T,P,H){return T.a*Math.pow(2,10*(P-=1))*Math.sin((P*H-T.s)*(2*Math.PI)/T.p)}function c(T,P,H,N){return H*((T=T/N-1)*T*T+1)+P}function h(T,P,H,N){return T/=N/2,T<1?H/2*T*T*T+P:H/2*((T-=2)*T*T+2)+P}function l(T,P,H,N){return H*(T/=N)*T*T*T+P}function u(T,P,H,N){return-H*((T=T/N-1)*T*T*T-1)+P}function f(T,P,H,N){return T/=N/2,T<1?H/2*T*T*T*T+P:-H/2*((T-=2)*T*T*T-2)+P}function m(T,P,H,N){return H*(T/=N)*T*T*T*T+P}function g(T,P,H,N){return H*((T=T/N-1)*T*T*T*T+1)+P}function p(T,P,H,N){return T/=N/2,T<1?H/2*T*T*T*T*T+P:H/2*((T-=2)*T*T*T*T+2)+P}function v(T,P,H,N){return-H*Math.cos(T/N*(Math.PI/2))+H+P}function b(T,P,H,N){return H*Math.sin(T/N*(Math.PI/2))+P}function _(T,P,H,N){return-H/2*(Math.cos(Math.PI*T/N)-1)+P}function S(T,P,H,N){return T===0?P:H*Math.pow(2,10*(T/N-1))+P}function w(T,P,H,N){return T===N?P+H:H*(-Math.pow(2,-10*T/N)+1)+P}function C(T,P,H,N){return T===0?P:T===N?P+H:(T/=N/2,T<1?H/2*Math.pow(2,10*(T-1))+P:H/2*(-Math.pow(2,-10*--T)+2)+P)}function x(T,P,H,N){return-H*(Math.sqrt(1-(T/=N)*T)-1)+P}function M(T,P,H,N){return H*Math.sqrt(1-(T=T/N-1)*T)+P}function E(T,P,H,N){return T/=N/2,T<1?-H/2*(Math.sqrt(1-T*T)-1)+P:H/2*(Math.sqrt(1-(T-=2)*T)+1)+P}function A(T,P,H,N){var G=1.70158,$=0,z=H;if(T===0)return P;if(T/=N,T===1)return P+H;$||($=N*.3);var Z=s(z,H,$,G);return-o(Z,T,N)+P}function O(T,P,H,N){var G=1.70158,$=0,z=H;if(T===0)return P;if(T/=N,T===1)return P+H;$||($=N*.3);var Z=s(z,H,$,G);return Z.a*Math.pow(2,-10*T)*Math.sin((T*N-Z.s)*(2*Math.PI)/Z.p)+Z.c+P}function D(T,P,H,N){var G=1.70158,$=0,z=H;if(T===0)return P;if(T/=N/2,T===2)return P+H;$||($=N*(.3*1.5));var Z=s(z,H,$,G);return T<1?-.5*o(Z,T,N)+P:Z.a*Math.pow(2,-10*(T-=1))*Math.sin((T*N-Z.s)*(2*Math.PI)/Z.p)*.5+Z.c+P}function L(T,P,H,N,G){return G===void 0&&(G=1.70158),H*(T/=N)*T*((G+1)*T-G)+P}function U(T,P,H,N,G){return G===void 0&&(G=1.70158),H*((T=T/N-1)*T*((G+1)*T+G)+1)+P}function j(T,P,H,N,G){return G===void 0&&(G=1.70158),T/=N/2,T<1?H/2*(T*T*(((G*=1.525)+1)*T-G))+P:H/2*((T-=2)*T*(((G*=1.525)+1)*T+G)+2)+P}function V(T,P,H,N){return H-k(N-T,0,H,N)+P}function k(T,P,H,N){return(T/=N)<1/2.75?H*(7.5625*T*T)+P:T<2/2.75?H*(7.5625*(T-=1.5/2.75)*T+.75)+P:T<2.5/2.75?H*(7.5625*(T-=2.25/2.75)*T+.9375)+P:H*(7.5625*(T-=2.625/2.75)*T+.984375)+P}function F(T,P,H,N){return T<N/2?V(T*2,0,H,N)*.5+P:k(T*2-N,0,H,N)*.5+H*.5+P}e.util.ease={easeInQuad:function(T,P,H,N){return H*(T/=N)*T+P},easeOutQuad:function(T,P,H,N){return-H*(T/=N)*(T-2)+P},easeInOutQuad:function(T,P,H,N){return T/=N/2,T<1?H/2*T*T+P:-H/2*(--T*(T-2)-1)+P},easeInCubic:function(T,P,H,N){return H*(T/=N)*T*T+P},easeOutCubic:c,easeInOutCubic:h,easeInQuart:l,easeOutQuart:u,easeInOutQuart:f,easeInQuint:m,easeOutQuint:g,easeInOutQuint:p,easeInSine:v,easeOutSine:b,easeInOutSine:_,easeInExpo:S,easeOutExpo:w,easeInOutExpo:C,easeInCirc:x,easeOutCirc:M,easeInOutCirc:E,easeInElastic:A,easeOutElastic:O,easeInOutElastic:D,easeInBack:L,easeOutBack:U,easeInOutBack:j,easeInBounce:V,easeOutBounce:k,easeInOutBounce:F}}(),function(s){var o=s.fabric||(s.fabric={}),c=o.util.object.extend,h=o.util.object.clone,l=o.util.toFixed,u=o.util.parseUnit,f=o.util.multiplyTransformMatrices,m=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],g=["symbol","image","marker","pattern","view","svg"],p=["pattern","defs","symbol","metadata","clipPath","mask","desc"],v=["symbol","g","a","svg","clipPath","defs"],b={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},_={stroke:"strokeOpacity",fill:"fillOpacity"},S="font-size",w="clip-path";o.svgValidTagNamesRegEx=M(m),o.svgViewBoxElementsRegEx=M(g),o.svgInvalidAncestorsRegEx=M(p),o.svgValidParentsRegEx=M(v),o.cssRules={},o.gradientDefs={},o.clipPaths={};function C($){return $ in b?b[$]:$}function x($,z,Z,W){var te=Array.isArray(z),ie;if(($==="fill"||$==="stroke")&&z==="none")z="";else{if($==="strokeUniform")return z==="non-scaling-stroke";if($==="strokeDashArray")z==="none"?z=null:z=z.replace(/,/g," ").split(/\s+/).map(parseFloat);else if($==="transformMatrix")Z&&Z.transformMatrix?z=f(Z.transformMatrix,o.parseTransformAttribute(z)):z=o.parseTransformAttribute(z);else if($==="visible")z=z!=="none"&&z!=="hidden",Z&&Z.visible===!1&&(z=!1);else if($==="opacity")z=parseFloat(z),Z&&typeof Z.opacity<"u"&&(z*=Z.opacity);else if($==="textAnchor")z=z==="start"?"left":z==="end"?"right":"center";else if($==="charSpacing")ie=u(z,W)/W*1e3;else if($==="paintFirst"){var re=z.indexOf("fill"),_e=z.indexOf("stroke"),z="fill";(re>-1&&_e>-1&&_e<re||re===-1&&_e>-1)&&(z="stroke")}else{if($==="href"||$==="xlink:href"||$==="font")return z;if($==="imageSmoothing")return z==="optimizeQuality";ie=te?z.map(u):u(z,W)}}return!te&&isNaN(ie)?z:ie}function M($){return new RegExp("^("+$.join("|")+")\\b","i")}function E($){for(var z in _)if(!(typeof $[_[z]]>"u"||$[z]==="")){if(typeof $[z]>"u"){if(!o.Object.prototype[z])continue;$[z]=o.Object.prototype[z]}if($[z].indexOf("url(")!==0){var Z=new o.Color($[z]);$[z]=Z.setAlpha(l(Z.getAlpha()*$[_[z]],2)).toRgba()}}return $}function A($,z){var Z,W=[],te,ie,re;for(ie=0,re=z.length;ie<re;ie++)Z=z[ie],te=$.getElementsByTagName(Z),W=W.concat(Array.prototype.slice.call(te));return W}o.parseTransformAttribute=function(){function $(X,Y){var le=o.util.cos(Y[0]),Ce=o.util.sin(Y[0]),Re=0,Ne=0;Y.length===3&&(Re=Y[1],Ne=Y[2]),X[0]=le,X[1]=Ce,X[2]=-Ce,X[3]=le,X[4]=Re-(le*Re-Ce*Ne),X[5]=Ne-(Ce*Re+le*Ne)}function z(X,Y){var le=Y[0],Ce=Y.length===2?Y[1]:Y[0];X[0]=le,X[3]=Ce}function Z(X,Y,le){X[le]=Math.tan(o.util.degreesToRadians(Y[0]))}function W(X,Y){X[4]=Y[0],Y.length===2&&(X[5]=Y[1])}var te=o.iMatrix,ie=o.reNum,re=o.commaWsp,_e="(?:(skewX)\\s*\\(\\s*("+ie+")\\s*\\))",Pe="(?:(skewY)\\s*\\(\\s*("+ie+")\\s*\\))",K="(?:(rotate)\\s*\\(\\s*("+ie+")(?:"+re+"("+ie+")"+re+"("+ie+"))?\\s*\\))",Q="(?:(scale)\\s*\\(\\s*("+ie+")(?:"+re+"("+ie+"))?\\s*\\))",fe="(?:(translate)\\s*\\(\\s*("+ie+")(?:"+re+"("+ie+"))?\\s*\\))",ge="(?:(matrix)\\s*\\(\\s*("+ie+")"+re+"("+ie+")"+re+"("+ie+")"+re+"("+ie+")"+re+"("+ie+")"+re+"("+ie+")\\s*\\))",se="(?:"+ge+"|"+fe+"|"+Q+"|"+K+"|"+_e+"|"+Pe+")",me="(?:"+se+"(?:"+re+"*"+se+")*)",be="^\\s*(?:"+me+"?)\\s*$",Me=new RegExp(be),Ee=new RegExp(se,"g");return function(X){var Y=te.concat(),le=[];if(!X||X&&!Me.test(X))return Y;X.replace(Ee,function(Re){var Ne=new RegExp(se).exec(Re).filter(function(ee){return!!ee}),he=Ne[1],pe=Ne.slice(2).map(parseFloat);switch(he){case"translate":W(Y,pe);break;case"rotate":pe[0]=o.util.degreesToRadians(pe[0]),$(Y,pe);break;case"scale":z(Y,pe);break;case"skewX":Z(Y,pe,2);break;case"skewY":Z(Y,pe,1);break;case"matrix":Y=pe;break}le.push(Y.concat()),Y=te.concat()});for(var Ce=le[0];le.length>1;)le.shift(),Ce=o.util.multiplyTransformMatrices(Ce,le[0]);return Ce}}();function O($,z){var Z,W;$.replace(/;\s*$/,"").split(";").forEach(function(te){var ie=te.split(":");Z=ie[0].trim().toLowerCase(),W=ie[1].trim(),z[Z]=W})}function D($,z){var Z,W;for(var te in $)typeof $[te]>"u"||(Z=te.toLowerCase(),W=$[te],z[Z]=W)}function L($,z){var Z={};for(var W in o.cssRules[z])if(U($,W.split(" ")))for(var te in o.cssRules[z][W])Z[te]=o.cssRules[z][W][te];return Z}function U($,z){var Z,W=!0;return Z=V($,z.pop()),Z&&z.length&&(W=j($,z)),Z&&W&&z.length===0}function j($,z){for(var Z,W=!0;$.parentNode&&$.parentNode.nodeType===1&&z.length;)W&&(Z=z.pop()),$=$.parentNode,W=V($,Z);return z.length===0}function V($,z){var Z=$.nodeName,W=$.getAttribute("class"),te=$.getAttribute("id"),ie,re;if(ie=new RegExp("^"+Z,"i"),z=z.replace(ie,""),te&&z.length&&(ie=new RegExp("#"+te+"(?![a-zA-Z\\-]+)","i"),z=z.replace(ie,"")),W&&z.length)for(W=W.split(" "),re=W.length;re--;)ie=new RegExp("\\."+W[re]+"(?![a-zA-Z\\-]+)","i"),z=z.replace(ie,"");return z.length===0}function k($,z){var Z;if($.getElementById&&(Z=$.getElementById(z)),Z)return Z;var W,te,ie,re=$.getElementsByTagName("*");for(te=0,ie=re.length;te<ie;te++)if(W=re[te],z===W.getAttribute("id"))return W}function F($){for(var z=A($,["use","svg:use"]),Z=0;z.length&&Z<z.length;){var W=z[Z],te=W.getAttribute("xlink:href")||W.getAttribute("href");if(te===null)return;var ie=te.slice(1),re=W.getAttribute("x")||0,_e=W.getAttribute("y")||0,Pe=k($,ie).cloneNode(!0),K=(Pe.getAttribute("transform")||"")+" translate("+re+", "+_e+")",Q,fe=z.length,ge,se,me,be,Me=o.svgNS;if(P(Pe),/^svg$/i.test(Pe.nodeName)){var Ee=Pe.ownerDocument.createElementNS(Me,"g");for(se=0,me=Pe.attributes,be=me.length;se<be;se++)ge=me.item(se),Ee.setAttributeNS(Me,ge.nodeName,ge.nodeValue);for(;Pe.firstChild;)Ee.appendChild(Pe.firstChild);Pe=Ee}for(se=0,me=W.attributes,be=me.length;se<be;se++)ge=me.item(se),!(ge.nodeName==="x"||ge.nodeName==="y"||ge.nodeName==="xlink:href"||ge.nodeName==="href")&&(ge.nodeName==="transform"?K=ge.nodeValue+" "+K:Pe.setAttribute(ge.nodeName,ge.nodeValue));Pe.setAttribute("transform",K),Pe.setAttribute("instantiated_by_use","1"),Pe.removeAttribute("id"),Q=W.parentNode,Q.replaceChild(Pe,W),z.length===fe&&Z++}}var T=new RegExp("^\\s*("+o.reNum+"+)\\s*,?\\s*("+o.reNum+"+)\\s*,?\\s*("+o.reNum+"+)\\s*,?\\s*("+o.reNum+"+)\\s*$");function P($){if(!o.svgViewBoxElementsRegEx.test($.nodeName))return{};var z=$.getAttribute("viewBox"),Z=1,W=1,te=0,ie=0,re,_e,Pe,K,Q=$.getAttribute("width"),fe=$.getAttribute("height"),ge=$.getAttribute("x")||0,se=$.getAttribute("y")||0,me=$.getAttribute("preserveAspectRatio")||"",be=!z||!(z=z.match(T)),Me=!Q||!fe||Q==="100%"||fe==="100%",Ee=be&&Me,X={},Y="",le=0,Ce=0;if(X.width=0,X.height=0,X.toBeParsed=Ee,be&&(ge||se)&&$.parentNode&&$.parentNode.nodeName!=="#document"&&(Y=" translate("+u(ge)+" "+u(se)+") ",Pe=($.getAttribute("transform")||"")+Y,$.setAttribute("transform",Pe),$.removeAttribute("x"),$.removeAttribute("y")),Ee)return X;if(be)return X.width=u(Q),X.height=u(fe),X;if(te=-parseFloat(z[1]),ie=-parseFloat(z[2]),re=parseFloat(z[3]),_e=parseFloat(z[4]),X.minX=te,X.minY=ie,X.viewBoxWidth=re,X.viewBoxHeight=_e,Me?(X.width=re,X.height=_e):(X.width=u(Q),X.height=u(fe),Z=X.width/re,W=X.height/_e),me=o.util.parsePreserveAspectRatioAttribute(me),me.alignX!=="none"&&(me.meetOrSlice==="meet"&&(W=Z=Z>W?W:Z),me.meetOrSlice==="slice"&&(W=Z=Z>W?Z:W),le=X.width-re*Z,Ce=X.height-_e*Z,me.alignX==="Mid"&&(le/=2),me.alignY==="Mid"&&(Ce/=2),me.alignX==="Min"&&(le=0),me.alignY==="Min"&&(Ce=0)),Z===1&&W===1&&te===0&&ie===0&&ge===0&&se===0)return X;if((ge||se)&&$.parentNode.nodeName!=="#document"&&(Y=" translate("+u(ge)+" "+u(se)+") "),Pe=Y+" matrix("+Z+" 0 0 "+W+" "+(te*Z+le)+" "+(ie*W+Ce)+") ",$.nodeName==="svg"){for(K=$.ownerDocument.createElementNS(o.svgNS,"g");$.firstChild;)K.appendChild($.firstChild);$.appendChild(K)}else K=$,K.removeAttribute("x"),K.removeAttribute("y"),Pe=K.getAttribute("transform")+Pe;return K.setAttribute("transform",Pe),X}function H($,z){for(;$&&($=$.parentNode);)if($.nodeName&&z.test($.nodeName.replace("svg:",""))&&!$.getAttribute("instantiated_by_use"))return!0;return!1}o.parseSVGDocument=function($,z,Z,W){if($){F($);var te=o.Object.__uid++,ie,re,_e=P($),Pe=o.util.toArray($.getElementsByTagName("*"));if(_e.crossOrigin=W&&W.crossOrigin,_e.svgUid=te,Pe.length===0&&o.isLikelyNode){Pe=$.selectNodes('//*[name(.)!="svg"]');var K=[];for(ie=0,re=Pe.length;ie<re;ie++)K[ie]=Pe[ie];Pe=K}var Q=Pe.filter(function(ge){return P(ge),o.svgValidTagNamesRegEx.test(ge.nodeName.replace("svg:",""))&&!H(ge,o.svgInvalidAncestorsRegEx)});if(!Q||Q&&!Q.length){z&&z([],{});return}var fe={};Pe.filter(function(ge){return ge.nodeName.replace("svg:","")==="clipPath"}).forEach(function(ge){var se=ge.getAttribute("id");fe[se]=o.util.toArray(ge.getElementsByTagName("*")).filter(function(me){return o.svgValidTagNamesRegEx.test(me.nodeName.replace("svg:",""))})}),o.gradientDefs[te]=o.getGradientDefs($),o.cssRules[te]=o.getCSSRules($),o.clipPaths[te]=fe,o.parseElements(Q,function(ge,se){z&&(z(ge,_e,se,Pe),delete o.gradientDefs[te],delete o.cssRules[te],delete o.clipPaths[te])},h(_e),Z,W)}};function N($,z){var Z=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],W="xlink:href",te=z.getAttribute(W).slice(1),ie=k($,te);if(ie&&ie.getAttribute(W)&&N($,ie),Z.forEach(function(_e){ie&&!z.hasAttribute(_e)&&ie.hasAttribute(_e)&&z.setAttribute(_e,ie.getAttribute(_e))}),!z.children.length)for(var re=ie.cloneNode(!0);re.firstChild;)z.appendChild(re.firstChild);z.removeAttribute(W)}var G=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+o.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+o.reNum+"))?\\s+(.*)");c(o,{parseFontDeclaration:function($,z){var Z=$.match(G);if(Z){var W=Z[1],te=Z[3],ie=Z[4],re=Z[5],_e=Z[6];W&&(z.fontStyle=W),te&&(z.fontWeight=isNaN(parseFloat(te))?te:parseFloat(te)),ie&&(z.fontSize=u(ie)),_e&&(z.fontFamily=_e),re&&(z.lineHeight=re==="normal"?1:re)}},getGradientDefs:function($){var z=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],Z=A($,z),W,te=0,ie={};for(te=Z.length;te--;)W=Z[te],W.getAttribute("xlink:href")&&N($,W),ie[W.getAttribute("id")]=W;return ie},parseAttributes:function($,z,Z){if($){var W,te={},ie,re;typeof Z>"u"&&(Z=$.getAttribute("svgUid")),$.parentNode&&o.svgValidParentsRegEx.test($.parentNode.nodeName)&&(te=o.parseAttributes($.parentNode,z,Z));var _e=z.reduce(function(me,be){return W=$.getAttribute(be),W&&(me[be]=W),me},{}),Pe=c(L($,Z),o.parseStyleAttribute($));_e=c(_e,Pe),Pe[w]&&$.setAttribute(w,Pe[w]),ie=re=te.fontSize||o.Text.DEFAULT_SVG_FONT_SIZE,_e[S]&&(_e[S]=ie=u(_e[S],re));var K,Q,fe={};for(var ge in _e)K=C(ge),Q=x(K,_e[ge],te,ie),fe[K]=Q;fe&&fe.font&&o.parseFontDeclaration(fe.font,fe);var se=c(te,fe);return o.svgValidParentsRegEx.test($.nodeName)?se:E(se)}},parseElements:function($,z,Z,W,te){new o.ElementsParser($,z,Z,W,te).parse()},parseStyleAttribute:function($){var z={},Z=$.getAttribute("style");return Z&&(typeof Z=="string"?O(Z,z):D(Z,z)),z},parsePointsAttribute:function($){if(!$)return null;$=$.replace(/,/g," ").trim(),$=$.split(/\s+/);var z=[],Z,W;for(Z=0,W=$.length;Z<W;Z+=2)z.push({x:parseFloat($[Z]),y:parseFloat($[Z+1])});return z},getCSSRules:function($){var z=$.getElementsByTagName("style"),Z,W,te={},ie;for(Z=0,W=z.length;Z<W;Z++){var re=z[Z].textContent;re=re.replace(/\/\*[\s\S]*?\*\//g,""),re.trim()!==""&&(ie=re.split("}"),ie=ie.filter(function(_e){return _e.trim()}),ie.forEach(function(_e){var Pe=_e.split("{"),K={},Q=Pe[1].trim(),fe=Q.split(";").filter(function(be){return be.trim()});for(Z=0,W=fe.length;Z<W;Z++){var ge=fe[Z].split(":"),se=ge[0].trim(),me=ge[1].trim();K[se]=me}_e=Pe[0].trim(),_e.split(",").forEach(function(be){be=be.replace(/^svg/i,"").trim(),be!==""&&(te[be]?o.util.object.extend(te[be],K):te[be]=o.util.object.clone(K))})}))}return te},loadSVGFromURL:function($,z,Z,W){$=$.replace(/^\n\s*/,"").trim(),new o.util.request($,{method:"get",onComplete:te});function te(ie){var re=ie.responseXML;if(!re||!re.documentElement)return z&&z(null),!1;o.parseSVGDocument(re.documentElement,function(_e,Pe,K,Q){z&&z(_e,Pe,K,Q)},Z,W)}},loadSVGFromString:function($,z,Z,W){var te=new o.window.DOMParser,ie=te.parseFromString($.trim(),"text/xml");o.parseSVGDocument(ie.documentElement,function(re,_e,Pe,K){z(re,_e,Pe,K)},Z,W)}})}(t),e.ElementsParser=function(s,o,c,h,l,u){this.elements=s,this.callback=o,this.options=c,this.reviver=h,this.svgUid=c&&c.svgUid||0,this.parsingOptions=l,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=u},function(s){s.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},s.createObjects=function(){var o=this;this.elements.forEach(function(c,h){c.setAttribute("svgUid",o.svgUid),o.createObject(c,h)})},s.findTag=function(o){return e[e.util.string.capitalize(o.tagName.replace("svg:",""))]},s.createObject=function(o,c){var h=this.findTag(o);if(h&&h.fromElement)try{h.fromElement(o,this.createCallback(c,o),this.options)}catch(l){e.log(l)}else this.checkIfDone()},s.createCallback=function(o,c){var h=this;return function(l){var u;h.resolveGradient(l,c,"fill"),h.resolveGradient(l,c,"stroke"),l instanceof e.Image&&l._originalElement&&(u=l.parsePreserveAspectRatioAttribute(c)),l._removeTransformMatrix(u),h.resolveClipPath(l,c),h.reviver&&h.reviver(c,l),h.instances[o]=l,h.checkIfDone()}},s.extractPropertyDefinition=function(o,c,h){var l=o[c],u=this.regexUrl;if(u.test(l)){u.lastIndex=0;var f=u.exec(l)[1];return u.lastIndex=0,e[h][this.svgUid][f]}},s.resolveGradient=function(o,c,h){var l=this.extractPropertyDefinition(o,h,"gradientDefs");if(l){var u=c.getAttribute(h+"-opacity"),f=e.Gradient.fromElement(l,o,u,this.options);o.set(h,f)}},s.createClipPathCallback=function(o,c){return function(h){h._removeTransformMatrix(),h.fillRule=h.clipRule,c.push(h)}},s.resolveClipPath=function(o,c){var h=this.extractPropertyDefinition(o,"clipPath","clipPaths"),l,u,f,m,g,p;if(h){m=[],f=e.util.invertTransform(o.calcTransformMatrix());for(var v=h[0].parentNode,b=c;b.parentNode&&b.getAttribute("clip-path")!==o.clipPath;)b=b.parentNode;b.parentNode.appendChild(v);for(var _=0;_<h.length;_++)l=h[_],u=this.findTag(l),u.fromElement(l,this.createClipPathCallback(o,m),this.options);m.length===1?h=m[0]:h=new e.Group(m),g=e.util.multiplyTransformMatrices(f,h.calcTransformMatrix()),h.clipPath&&this.resolveClipPath(h,b);var p=e.util.qrDecompose(g);h.flipX=!1,h.flipY=!1,h.set("scaleX",p.scaleX),h.set("scaleY",p.scaleY),h.angle=p.angle,h.skewX=p.skewX,h.skewY=0,h.setPositionByOrigin({x:p.translateX,y:p.translateY},"center","center"),o.clipPath=h}else delete o.clipPath},s.checkIfDone=function(){--this.numElements===0&&(this.instances=this.instances.filter(function(o){return o!=null}),this.callback(this.instances,this.elements))}}(e.ElementsParser.prototype),function(s){var o=s.fabric||(s.fabric={});if(o.Point){o.warn("fabric.Point is already defined");return}o.Point=c;function c(h,l){this.x=h,this.y=l}c.prototype={type:"point",constructor:c,add:function(h){return new c(this.x+h.x,this.y+h.y)},addEquals:function(h){return this.x+=h.x,this.y+=h.y,this},scalarAdd:function(h){return new c(this.x+h,this.y+h)},scalarAddEquals:function(h){return this.x+=h,this.y+=h,this},subtract:function(h){return new c(this.x-h.x,this.y-h.y)},subtractEquals:function(h){return this.x-=h.x,this.y-=h.y,this},scalarSubtract:function(h){return new c(this.x-h,this.y-h)},scalarSubtractEquals:function(h){return this.x-=h,this.y-=h,this},multiply:function(h){return new c(this.x*h,this.y*h)},multiplyEquals:function(h){return this.x*=h,this.y*=h,this},divide:function(h){return new c(this.x/h,this.y/h)},divideEquals:function(h){return this.x/=h,this.y/=h,this},eq:function(h){return this.x===h.x&&this.y===h.y},lt:function(h){return this.x<h.x&&this.y<h.y},lte:function(h){return this.x<=h.x&&this.y<=h.y},gt:function(h){return this.x>h.x&&this.y>h.y},gte:function(h){return this.x>=h.x&&this.y>=h.y},lerp:function(h,l){return typeof l>"u"&&(l=.5),l=Math.max(Math.min(1,l),0),new c(this.x+(h.x-this.x)*l,this.y+(h.y-this.y)*l)},distanceFrom:function(h){var l=this.x-h.x,u=this.y-h.y;return Math.sqrt(l*l+u*u)},midPointFrom:function(h){return this.lerp(h)},min:function(h){return new c(Math.min(this.x,h.x),Math.min(this.y,h.y))},max:function(h){return new c(Math.max(this.x,h.x),Math.max(this.y,h.y))},toString:function(){return this.x+","+this.y},setXY:function(h,l){return this.x=h,this.y=l,this},setX:function(h){return this.x=h,this},setY:function(h){return this.y=h,this},setFromPoint:function(h){return this.x=h.x,this.y=h.y,this},swap:function(h){var l=this.x,u=this.y;this.x=h.x,this.y=h.y,h.x=l,h.y=u},clone:function(){return new c(this.x,this.y)}}}(t),function(s){var o=s.fabric||(s.fabric={});if(o.Intersection){o.warn("fabric.Intersection is already defined");return}function c(h){this.status=h,this.points=[]}o.Intersection=c,o.Intersection.prototype={constructor:c,appendPoint:function(h){return this.points.push(h),this},appendPoints:function(h){return this.points=this.points.concat(h),this}},o.Intersection.intersectLineLine=function(h,l,u,f){var m,g=(f.x-u.x)*(h.y-u.y)-(f.y-u.y)*(h.x-u.x),p=(l.x-h.x)*(h.y-u.y)-(l.y-h.y)*(h.x-u.x),v=(f.y-u.y)*(l.x-h.x)-(f.x-u.x)*(l.y-h.y);if(v!==0){var b=g/v,_=p/v;0<=b&&b<=1&&0<=_&&_<=1?(m=new c("Intersection"),m.appendPoint(new o.Point(h.x+b*(l.x-h.x),h.y+b*(l.y-h.y)))):m=new c}else g===0||p===0?m=new c("Coincident"):m=new c("Parallel");return m},o.Intersection.intersectLinePolygon=function(h,l,u){var f=new c,m=u.length,g,p,v,b;for(b=0;b<m;b++)g=u[b],p=u[(b+1)%m],v=c.intersectLineLine(h,l,g,p),f.appendPoints(v.points);return f.points.length>0&&(f.status="Intersection"),f},o.Intersection.intersectPolygonPolygon=function(h,l){var u=new c,f=h.length,m;for(m=0;m<f;m++){var g=h[m],p=h[(m+1)%f],v=c.intersectLinePolygon(g,p,l);u.appendPoints(v.points)}return u.points.length>0&&(u.status="Intersection"),u},o.Intersection.intersectPolygonRectangle=function(h,l,u){var f=l.min(u),m=l.max(u),g=new o.Point(m.x,f.y),p=new o.Point(f.x,m.y),v=c.intersectLinePolygon(f,g,h),b=c.intersectLinePolygon(g,m,h),_=c.intersectLinePolygon(m,p,h),S=c.intersectLinePolygon(p,f,h),w=new c;return w.appendPoints(v.points),w.appendPoints(b.points),w.appendPoints(_.points),w.appendPoints(S.points),w.points.length>0&&(w.status="Intersection"),w}}(t),function(s){var o=s.fabric||(s.fabric={});if(o.Color){o.warn("fabric.Color is already defined.");return}function c(l){l?this._tryParsingColor(l):this.setSource([0,0,0,1])}o.Color=c,o.Color.prototype={_tryParsingColor:function(l){var u;l in c.colorNameMap&&(l=c.colorNameMap[l]),l==="transparent"&&(u=[255,255,255,0]),u||(u=c.sourceFromHex(l)),u||(u=c.sourceFromRgb(l)),u||(u=c.sourceFromHsl(l)),u||(u=[0,0,0,1]),u&&this.setSource(u)},_rgbToHsl:function(l,u,f){l/=255,u/=255,f/=255;var m,g,p,v=o.util.array.max([l,u,f]),b=o.util.array.min([l,u,f]);if(p=(v+b)/2,v===b)m=g=0;else{var _=v-b;switch(g=p>.5?_/(2-v-b):_/(v+b),v){case l:m=(u-f)/_+(u<f?6:0);break;case u:m=(f-l)/_+2;break;case f:m=(l-u)/_+4;break}m/=6}return[Math.round(m*360),Math.round(g*100),Math.round(p*100)]},getSource:function(){return this._source},setSource:function(l){this._source=l},toRgb:function(){var l=this.getSource();return"rgb("+l[0]+","+l[1]+","+l[2]+")"},toRgba:function(){var l=this.getSource();return"rgba("+l[0]+","+l[1]+","+l[2]+","+l[3]+")"},toHsl:function(){var l=this.getSource(),u=this._rgbToHsl(l[0],l[1],l[2]);return"hsl("+u[0]+","+u[1]+"%,"+u[2]+"%)"},toHsla:function(){var l=this.getSource(),u=this._rgbToHsl(l[0],l[1],l[2]);return"hsla("+u[0]+","+u[1]+"%,"+u[2]+"%,"+l[3]+")"},toHex:function(){var l=this.getSource(),u,f,m;return u=l[0].toString(16),u=u.length===1?"0"+u:u,f=l[1].toString(16),f=f.length===1?"0"+f:f,m=l[2].toString(16),m=m.length===1?"0"+m:m,u.toUpperCase()+f.toUpperCase()+m.toUpperCase()},toHexa:function(){var l=this.getSource(),u;return u=Math.round(l[3]*255),u=u.toString(16),u=u.length===1?"0"+u:u,this.toHex()+u.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(l){var u=this.getSource();return u[3]=l,this.setSource(u),this},toGrayscale:function(){var l=this.getSource(),u=parseInt((l[0]*.3+l[1]*.59+l[2]*.11).toFixed(0),10),f=l[3];return this.setSource([u,u,u,f]),this},toBlackWhite:function(l){var u=this.getSource(),f=(u[0]*.3+u[1]*.59+u[2]*.11).toFixed(0),m=u[3];return l=l||127,f=Number(f)<Number(l)?0:255,this.setSource([f,f,f,m]),this},overlayWith:function(l){l instanceof c||(l=new c(l));var u=[],f=this.getAlpha(),m=.5,g=this.getSource(),p=l.getSource(),v;for(v=0;v<3;v++)u.push(Math.round(g[v]*(1-m)+p[v]*m));return u[3]=f,this.setSource(u),this}},o.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,o.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,o.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,o.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function h(l,u,f){return f<0&&(f+=1),f>1&&(f-=1),f<1/6?l+(u-l)*6*f:f<1/2?u:f<2/3?l+(u-l)*(2/3-f)*6:l}o.Color.fromRgb=function(l){return c.fromSource(c.sourceFromRgb(l))},o.Color.sourceFromRgb=function(l){var u=l.match(c.reRGBa);if(u){var f=parseInt(u[1],10)/(/%$/.test(u[1])?100:1)*(/%$/.test(u[1])?255:1),m=parseInt(u[2],10)/(/%$/.test(u[2])?100:1)*(/%$/.test(u[2])?255:1),g=parseInt(u[3],10)/(/%$/.test(u[3])?100:1)*(/%$/.test(u[3])?255:1);return[parseInt(f,10),parseInt(m,10),parseInt(g,10),u[4]?parseFloat(u[4]):1]}},o.Color.fromRgba=c.fromRgb,o.Color.fromHsl=function(l){return c.fromSource(c.sourceFromHsl(l))},o.Color.sourceFromHsl=function(l){var u=l.match(c.reHSLa);if(u){var f=(parseFloat(u[1])%360+360)%360/360,m=parseFloat(u[2])/(/%$/.test(u[2])?100:1),g=parseFloat(u[3])/(/%$/.test(u[3])?100:1),p,v,b;if(m===0)p=v=b=g;else{var _=g<=.5?g*(m+1):g+m-g*m,S=g*2-_;p=h(S,_,f+1/3),v=h(S,_,f),b=h(S,_,f-1/3)}return[Math.round(p*255),Math.round(v*255),Math.round(b*255),u[4]?parseFloat(u[4]):1]}},o.Color.fromHsla=c.fromHsl,o.Color.fromHex=function(l){return c.fromSource(c.sourceFromHex(l))},o.Color.sourceFromHex=function(l){if(l.match(c.reHex)){var u=l.slice(l.indexOf("#")+1),f=u.length===3||u.length===4,m=u.length===8||u.length===4,g=f?u.charAt(0)+u.charAt(0):u.substring(0,2),p=f?u.charAt(1)+u.charAt(1):u.substring(2,4),v=f?u.charAt(2)+u.charAt(2):u.substring(4,6),b=m?f?u.charAt(3)+u.charAt(3):u.substring(6,8):"FF";return[parseInt(g,16),parseInt(p,16),parseInt(v,16),parseFloat((parseInt(b,16)/255).toFixed(2))]}},o.Color.fromSource=function(l){var u=new c;return u.setSource(l),u}}(t),function(s){var o=s.fabric||(s.fabric={}),c=["e","se","s","sw","w","nw","n","ne","e"],h=["ns","nesw","ew","nwse"],l={},u="left",f="top",m="right",g="bottom",p="center",v={top:g,bottom:f,left:m,right:u,center:p},b=o.util.radiansToDegrees,_=Math.sign||function(K){return(K>0)-(K<0)||+K};function S(K,Q){var fe=K.angle+b(Math.atan2(Q.y,Q.x))+360;return Math.round(fe%360/45)}function w(K,Q){var fe=Q.transform.target,ge=fe.canvas,se=o.util.object.clone(Q);se.target=fe,ge&&ge.fire("object:"+K,se),fe.fire(K,Q)}function C(K,Q){var fe=Q.canvas,ge=fe.uniScaleKey,se=K[ge];return fe.uniformScaling&&!se||!fe.uniformScaling&&se}function x(K){return K.originX===p&&K.originY===p}function M(K,Q,fe){var ge=K.lockScalingX,se=K.lockScalingY;return!!(ge&&se||!Q&&(ge||se)&&fe||ge&&Q==="x"||se&&Q==="y")}function E(K,Q,fe){var ge="not-allowed",se=C(K,fe),me="";if(Q.x!==0&&Q.y===0?me="x":Q.x===0&&Q.y!==0&&(me="y"),M(fe,me,se))return ge;var be=S(fe,Q);return c[be]+"-resize"}function A(K,Q,fe){var ge="not-allowed";if(Q.x!==0&&fe.lockSkewingY||Q.y!==0&&fe.lockSkewingX)return ge;var se=S(fe,Q)%4;return h[se]+"-resize"}function O(K,Q,fe){return K[fe.canvas.altActionKey]?l.skewCursorStyleHandler(K,Q,fe):l.scaleCursorStyleHandler(K,Q,fe)}function D(K,Q,fe){var ge=K[fe.canvas.altActionKey];if(Q.x===0)return ge?"skewX":"scaleY";if(Q.y===0)return ge?"skewY":"scaleX"}function L(K,Q,fe){return fe.lockRotation?"not-allowed":Q.cursorStyle}function U(K,Q,fe,ge){return{e:K,transform:Q,pointer:{x:fe,y:ge}}}function j(K){return function(Q,fe,ge,se){var me=fe.target,be=me.getCenterPoint(),Me=me.translateToOriginPoint(be,fe.originX,fe.originY),Ee=K(Q,fe,ge,se);return me.setPositionByOrigin(Me,fe.originX,fe.originY),Ee}}function V(K,Q){return function(fe,ge,se,me){var be=Q(fe,ge,se,me);return be&&w(K,U(fe,ge,se,me)),be}}function k(K,Q,fe,ge,se){var me=K.target,be=me.controls[K.corner],Me=me.canvas.getZoom(),Ee=me.padding/Me,X=me.toLocalPoint(new o.Point(ge,se),Q,fe);return X.x>=Ee&&(X.x-=Ee),X.x<=-Ee&&(X.x+=Ee),X.y>=Ee&&(X.y-=Ee),X.y<=Ee&&(X.y+=Ee),X.x-=be.offsetX,X.y-=be.offsetY,X}function F(K){return K.flipX!==K.flipY}function T(K,Q,fe,ge,se){if(K[Q]!==0){var me=K._getTransformedDimensions()[ge],be=se/me*K[fe];K.set(fe,be)}}function P(K,Q,fe,ge){var se=Q.target,me=se._getTransformedDimensions(0,se.skewY),be=k(Q,Q.originX,Q.originY,fe,ge),Me=Math.abs(be.x*2)-me.x,Ee=se.skewX,X;Me<2?X=0:(X=b(Math.atan2(Me/se.scaleX,me.y/se.scaleY)),Q.originX===u&&Q.originY===g&&(X=-X),Q.originX===m&&Q.originY===f&&(X=-X),F(se)&&(X=-X));var Y=Ee!==X;if(Y){var le=se._getTransformedDimensions().y;se.set("skewX",X),T(se,"skewY","scaleY","y",le)}return Y}function H(K,Q,fe,ge){var se=Q.target,me=se._getTransformedDimensions(se.skewX,0),be=k(Q,Q.originX,Q.originY,fe,ge),Me=Math.abs(be.y*2)-me.y,Ee=se.skewY,X;Me<2?X=0:(X=b(Math.atan2(Me/se.scaleY,me.x/se.scaleX)),Q.originX===u&&Q.originY===g&&(X=-X),Q.originX===m&&Q.originY===f&&(X=-X),F(se)&&(X=-X));var Y=Ee!==X;if(Y){var le=se._getTransformedDimensions().x;se.set("skewY",X),T(se,"skewX","scaleX","x",le)}return Y}function N(K,Q,fe,ge){var se=Q.target,me=se.skewX,be,Me=Q.originY;if(se.lockSkewingX)return!1;if(me===0){var Ee=k(Q,p,p,fe,ge);Ee.x>0?be=u:be=m}else me>0&&(be=Me===f?u:m),me<0&&(be=Me===f?m:u),F(se)&&(be=be===u?m:u);Q.originX=be;var X=V("skewing",j(P));return X(K,Q,fe,ge)}function G(K,Q,fe,ge){var se=Q.target,me=se.skewY,be,Me=Q.originX;if(se.lockSkewingY)return!1;if(me===0){var Ee=k(Q,p,p,fe,ge);Ee.y>0?be=f:be=g}else me>0&&(be=Me===u?f:g),me<0&&(be=Me===u?g:f),F(se)&&(be=be===f?g:f);Q.originY=be;var X=V("skewing",j(H));return X(K,Q,fe,ge)}function $(K,Q,fe,ge){var se=Q,me=se.target,be=me.translateToOriginPoint(me.getCenterPoint(),se.originX,se.originY);if(me.lockRotation)return!1;var Me=Math.atan2(se.ey-be.y,se.ex-be.x),Ee=Math.atan2(ge-be.y,fe-be.x),X=b(Ee-Me+se.theta),Y=!0;if(me.snapAngle>0){var le=me.snapAngle,Ce=me.snapThreshold||le,Re=Math.ceil(X/le)*le,Ne=Math.floor(X/le)*le;Math.abs(X-Ne)<Ce?X=Ne:Math.abs(X-Re)<Ce&&(X=Re)}return X<0&&(X=360+X),X%=360,Y=me.angle!==X,me.angle=X,Y}function z(K,Q,fe,ge,se){se=se||{};var me=Q.target,be=me.lockScalingX,Me=me.lockScalingY,Ee=se.by,X,Y,le,Ce,Re=C(K,me),Ne=M(me,Ee,Re),he,pe,ee=Q.gestureScale;if(Ne)return!1;if(ee)Y=Q.scaleX*ee,le=Q.scaleY*ee;else{if(X=k(Q,Q.originX,Q.originY,fe,ge),he=Ee!=="y"?_(X.x):1,pe=Ee!=="x"?_(X.y):1,Q.signX||(Q.signX=he),Q.signY||(Q.signY=pe),me.lockScalingFlip&&(Q.signX!==he||Q.signY!==pe))return!1;if(Ce=me._getTransformedDimensions(),Re&&!Ee){var oe=Math.abs(X.x)+Math.abs(X.y),J=Q.original,ce=Math.abs(Ce.x*J.scaleX/me.scaleX)+Math.abs(Ce.y*J.scaleY/me.scaleY),ye=oe/ce;Y=J.scaleX*ye,le=J.scaleY*ye}else Y=Math.abs(X.x*me.scaleX/Ce.x),le=Math.abs(X.y*me.scaleY/Ce.y);x(Q)&&(Y*=2,le*=2),Q.signX!==he&&Ee!=="y"&&(Q.originX=v[Q.originX],Y*=-1,Q.signX=he),Q.signY!==pe&&Ee!=="x"&&(Q.originY=v[Q.originY],le*=-1,Q.signY=pe)}var Oe=me.scaleX,ze=me.scaleY;return Ee?(Ee==="x"&&me.set("scaleX",Y),Ee==="y"&&me.set("scaleY",le)):(!be&&me.set("scaleX",Y),!Me&&me.set("scaleY",le)),Oe!==me.scaleX||ze!==me.scaleY}function Z(K,Q,fe,ge){return z(K,Q,fe,ge)}function W(K,Q,fe,ge){return z(K,Q,fe,ge,{by:"x"})}function te(K,Q,fe,ge){return z(K,Q,fe,ge,{by:"y"})}function ie(K,Q,fe,ge){return K[Q.target.canvas.altActionKey]?l.skewHandlerX(K,Q,fe,ge):l.scalingY(K,Q,fe,ge)}function re(K,Q,fe,ge){return K[Q.target.canvas.altActionKey]?l.skewHandlerY(K,Q,fe,ge):l.scalingX(K,Q,fe,ge)}function _e(K,Q,fe,ge){var se=Q.target,me=k(Q,Q.originX,Q.originY,fe,ge),be=se.strokeWidth/(se.strokeUniform?se.scaleX:1),Me=x(Q)?2:1,Ee=se.width,X=Math.abs(me.x*Me/se.scaleX)-be;return se.set("width",Math.max(X,0)),Ee!==X}function Pe(K,Q,fe,ge){var se=Q.target,me=fe-Q.offsetX,be=ge-Q.offsetY,Me=!se.get("lockMovementX")&&se.left!==me,Ee=!se.get("lockMovementY")&&se.top!==be;return Me&&se.set("left",me),Ee&&se.set("top",be),(Me||Ee)&&w("moving",U(K,Q,fe,ge)),Me||Ee}l.scaleCursorStyleHandler=E,l.skewCursorStyleHandler=A,l.scaleSkewCursorStyleHandler=O,l.rotationWithSnapping=V("rotating",j($)),l.scalingEqually=V("scaling",j(Z)),l.scalingX=V("scaling",j(W)),l.scalingY=V("scaling",j(te)),l.scalingYOrSkewingX=ie,l.scalingXOrSkewingY=re,l.changeWidth=V("resizing",j(_e)),l.skewHandlerX=N,l.skewHandlerY=G,l.dragHandler=Pe,l.scaleOrSkewActionName=D,l.rotationStyleHandler=L,l.fireEvent=w,l.wrapWithFixedAnchor=j,l.wrapWithFireEvent=V,l.getLocalPoint=k,o.controlsUtils=l}(t),function(s){var o=s.fabric||(s.fabric={}),c=o.util.degreesToRadians,h=o.controlsUtils;function l(f,m,g,p,v){p=p||{};var b=this.sizeX||p.cornerSize||v.cornerSize,_=this.sizeY||p.cornerSize||v.cornerSize,S=typeof p.transparentCorners<"u"?p.transparentCorners:v.transparentCorners,w=S?"stroke":"fill",C=!S&&(p.cornerStrokeColor||v.cornerStrokeColor),x=m,M=g,E;f.save(),f.fillStyle=p.cornerColor||v.cornerColor,f.strokeStyle=p.cornerStrokeColor||v.cornerStrokeColor,b>_?(E=b,f.scale(1,_/b),M=g*b/_):_>b?(E=_,f.scale(b/_,1),x=m*_/b):E=b,f.lineWidth=1,f.beginPath(),f.arc(x,M,E/2,0,2*Math.PI,!1),f[w](),C&&f.stroke(),f.restore()}function u(f,m,g,p,v){p=p||{};var b=this.sizeX||p.cornerSize||v.cornerSize,_=this.sizeY||p.cornerSize||v.cornerSize,S=typeof p.transparentCorners<"u"?p.transparentCorners:v.transparentCorners,w=S?"stroke":"fill",C=!S&&(p.cornerStrokeColor||v.cornerStrokeColor),x=b/2,M=_/2;f.save(),f.fillStyle=p.cornerColor||v.cornerColor,f.strokeStyle=p.cornerStrokeColor||v.cornerStrokeColor,f.lineWidth=1,f.translate(m,g),f.rotate(c(v.angle)),f[w+"Rect"](-x,-M,b,_),C&&f.strokeRect(-x,-M,b,_),f.restore()}h.renderCircleControl=l,h.renderSquareControl=u}(t),function(s){var o=s.fabric||(s.fabric={});function c(h){for(var l in h)this[l]=h[l]}o.Control=c,o.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(h,l){return l.cursorStyle},getActionName:function(h,l){return l.actionName},getVisibility:function(h,l){var u=h._controlsVisibility;return u&&typeof u[l]<"u"?u[l]:this.visible},setVisibility:function(h){this.visible=h},positionHandler:function(h,l){var u=o.util.transformPoint({x:this.x*h.x+this.offsetX,y:this.y*h.y+this.offsetY},l);return u},calcCornerCoords:function(h,l,u,f,m){var g,p,v,b,_=m?this.touchSizeX:this.sizeX,S=m?this.touchSizeY:this.sizeY;if(_&&S&&_!==S){var w=Math.atan2(S,_),C=Math.sqrt(_*_+S*S)/2,x=w-o.util.degreesToRadians(h),M=Math.PI/2-w-o.util.degreesToRadians(h);g=C*o.util.cos(x),p=C*o.util.sin(x),v=C*o.util.cos(M),b=C*o.util.sin(M)}else{var E=_&&S?_:l;C=E*.7071067812;var x=o.util.degreesToRadians(45-h);g=v=C*o.util.cos(x),p=b=C*o.util.sin(x)}return{tl:{x:u-b,y:f-v},tr:{x:u+g,y:f-p},bl:{x:u-g,y:f+p},br:{x:u+b,y:f+v}}},render:function(h,l,u,f,m){switch(f=f||{},f.cornerStyle||m.cornerStyle){case"circle":o.controlsUtils.renderCircleControl.call(this,h,l,u,f,m);break;default:o.controlsUtils.renderSquareControl.call(this,h,l,u,f,m)}}}}(t),function(){function s(u,f){var m=u.getAttribute("style"),g=u.getAttribute("offset")||0,p,v,b,_;if(g=parseFloat(g)/(/%$/.test(g)?100:1),g=g<0?0:g>1?1:g,m){var S=m.split(/\s*;\s*/);for(S[S.length-1]===""&&S.pop(),_=S.length;_--;){var w=S[_].split(/\s*:\s*/),C=w[0].trim(),x=w[1].trim();C==="stop-color"?p=x:C==="stop-opacity"&&(b=x)}}return p||(p=u.getAttribute("stop-color")||"rgb(0,0,0)"),b||(b=u.getAttribute("stop-opacity")),p=new e.Color(p),v=p.getAlpha(),b=isNaN(parseFloat(b))?1:parseFloat(b),b*=v*f,{offset:g,color:p.toRgb(),opacity:b}}function o(u){return{x1:u.getAttribute("x1")||0,y1:u.getAttribute("y1")||0,x2:u.getAttribute("x2")||"100%",y2:u.getAttribute("y2")||0}}function c(u){return{x1:u.getAttribute("fx")||u.getAttribute("cx")||"50%",y1:u.getAttribute("fy")||u.getAttribute("cy")||"50%",r1:0,x2:u.getAttribute("cx")||"50%",y2:u.getAttribute("cy")||"50%",r2:u.getAttribute("r")||"50%"}}var h=e.util.object.clone;e.Gradient=e.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(u){u||(u={}),u.coords||(u.coords={});var f,m=this;Object.keys(u).forEach(function(g){m[g]=u[g]}),this.id?this.id+="_"+e.Object.__uid++:this.id=e.Object.__uid++,f={x1:u.coords.x1||0,y1:u.coords.y1||0,x2:u.coords.x2||0,y2:u.coords.y2||0},this.type==="radial"&&(f.r1=u.coords.r1||0,f.r2=u.coords.r2||0),this.coords=f,this.colorStops=u.colorStops.slice()},addColorStop:function(u){for(var f in u){var m=new e.Color(u[f]);this.colorStops.push({offset:parseFloat(f),color:m.toRgb(),opacity:m.getAlpha()})}return this},toObject:function(u){var f={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return e.util.populateWithProperties(this,f,u),f},toSVG:function(u,v){var m=h(this.coords,!0),g,p,v=v||{},b,_,S=h(this.colorStops,!0),w=m.r1>m.r2,C=this.gradientTransform?this.gradientTransform.concat():e.iMatrix.concat(),x=-this.offsetX,M=-this.offsetY,E=!!v.additionalTransform,A=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox";if(S.sort(function(j,V){return j.offset-V.offset}),A==="objectBoundingBox"?(x/=u.width,M/=u.height):(x+=u.width/2,M+=u.height/2),u.type==="path"&&this.gradientUnits!=="percentage"&&(x-=u.pathOffset.x,M-=u.pathOffset.y),C[4]-=x,C[5]-=M,_='id="SVGID_'+this.id+'" gradientUnits="'+A+'"',_+=' gradientTransform="'+(E?v.additionalTransform+" ":"")+e.util.matrixToSVG(C)+'" ',this.type==="linear"?b=["<linearGradient ",_,' x1="',m.x1,'" y1="',m.y1,'" x2="',m.x2,'" y2="',m.y2,`">
`]:this.type==="radial"&&(b=["<radialGradient ",_,' cx="',w?m.x1:m.x2,'" cy="',w?m.y1:m.y2,'" r="',w?m.r1:m.r2,'" fx="',w?m.x2:m.x1,'" fy="',w?m.y2:m.y1,`">
`]),this.type==="radial"){if(w)for(S=S.concat(),S.reverse(),g=0,p=S.length;g<p;g++)S[g].offset=1-S[g].offset;var O=Math.min(m.r1,m.r2);if(O>0){var D=Math.max(m.r1,m.r2),L=O/D;for(g=0,p=S.length;g<p;g++)S[g].offset+=L*(1-S[g].offset)}}for(g=0,p=S.length;g<p;g++){var U=S[g];b.push("<stop ",'offset="',U.offset*100+"%",'" style="stop-color:',U.color,typeof U.opacity<"u"?";stop-opacity: "+U.opacity:";",`"/>
`)}return b.push(this.type==="linear"?`</linearGradient>
`:`</radialGradient>
`),b.join("")},toLive:function(u){var f,m=e.util.object.clone(this.coords),g,p;if(this.type){for(this.type==="linear"?f=u.createLinearGradient(m.x1,m.y1,m.x2,m.y2):this.type==="radial"&&(f=u.createRadialGradient(m.x1,m.y1,m.r1,m.x2,m.y2,m.r2)),g=0,p=this.colorStops.length;g<p;g++){var v=this.colorStops[g].color,b=this.colorStops[g].opacity,_=this.colorStops[g].offset;typeof b<"u"&&(v=new e.Color(v).setAlpha(b).toRgba()),f.addColorStop(_,v)}return f}}}),e.util.object.extend(e.Gradient,{fromElement:function(u,f,m,g){var p=parseFloat(m)/(/%$/.test(m)?100:1);p=p<0?0:p>1?1:p,isNaN(p)&&(p=1);var v=u.getElementsByTagName("stop"),b,_=u.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage",S=u.getAttribute("gradientTransform")||"",w=[],C,x,M=0,E=0,A;for(u.nodeName==="linearGradient"||u.nodeName==="LINEARGRADIENT"?(b="linear",C=o(u)):(b="radial",C=c(u)),x=v.length;x--;)w.push(s(v[x],p));A=e.parseTransformAttribute(S),l(f,C,g,_),_==="pixels"&&(M=-f.left,E=-f.top);var O=new e.Gradient({id:u.getAttribute("id"),type:b,coords:C,colorStops:w,gradientUnits:_,gradientTransform:A,offsetX:M,offsetY:E});return O}});function l(u,f,m,g){var p,v;Object.keys(f).forEach(function(b){p=f[b],p==="Infinity"?v=1:p==="-Infinity"?v=0:(v=parseFloat(f[b],10),typeof p=="string"&&/^(\d+\.\d+)%|(\d+)%$/.test(p)&&(v*=.01,g==="pixels"&&((b==="x1"||b==="x2"||b==="r2")&&(v*=m.viewBoxWidth||m.width),(b==="y1"||b==="y2")&&(v*=m.viewBoxHeight||m.height)))),f[b]=v})}}(),function(){var s=e.util.toFixed;e.Pattern=e.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(o,c){if(o||(o={}),this.id=e.Object.__uid++,this.setOptions(o),!o.source||o.source&&typeof o.source!="string"){c&&c(this);return}else{var h=this;this.source=e.util.createImage(),e.util.loadImage(o.source,function(l,u){h.source=l,c&&c(h,u)},null,this.crossOrigin)}},toObject:function(o){var c=e.Object.NUM_FRACTION_DIGITS,h,l;return typeof this.source.src=="string"?h=this.source.src:typeof this.source=="object"&&this.source.toDataURL&&(h=this.source.toDataURL()),l={type:"pattern",source:h,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:s(this.offsetX,c),offsetY:s(this.offsetY,c),patternTransform:this.patternTransform?this.patternTransform.concat():null},e.util.populateWithProperties(this,l,o),l},toSVG:function(o){var c=typeof this.source=="function"?this.source():this.source,h=c.width/o.width,l=c.height/o.height,u=this.offsetX/o.width,f=this.offsetY/o.height,m="";return(this.repeat==="repeat-x"||this.repeat==="no-repeat")&&(l=1,f&&(l+=Math.abs(f))),(this.repeat==="repeat-y"||this.repeat==="no-repeat")&&(h=1,u&&(h+=Math.abs(u))),c.src?m=c.src:c.toDataURL&&(m=c.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+u+'" y="'+f+'" width="'+h+'" height="'+l+`">
<image x="0" y="0" width="`+c.width+'" height="'+c.height+'" xlink:href="'+m+`"></image>
</pattern>
`},setOptions:function(o){for(var c in o)this[c]=o[c]},toLive:function(o){var c=this.source;return!c||typeof c.src<"u"&&(!c.complete||c.naturalWidth===0||c.naturalHeight===0)?"":o.createPattern(c,this.repeat)}})}(),function(s){var o=s.fabric||(s.fabric={}),c=o.util.toFixed;if(o.Shadow){o.warn("fabric.Shadow is already defined.");return}o.Shadow=o.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(h){typeof h=="string"&&(h=this._parseShadow(h));for(var l in h)this[l]=h[l];this.id=o.Object.__uid++},_parseShadow:function(h){var l=h.trim(),u=o.Shadow.reOffsetsAndBlur.exec(l)||[],f=l.replace(o.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:f.trim(),offsetX:parseFloat(u[1],10)||0,offsetY:parseFloat(u[2],10)||0,blur:parseFloat(u[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(h){var l=40,u=40,f=o.Object.NUM_FRACTION_DIGITS,m=o.util.rotateVector({x:this.offsetX,y:this.offsetY},o.util.degreesToRadians(-h.angle)),g=20,p=new o.Color(this.color);return h.width&&h.height&&(l=c((Math.abs(m.x)+this.blur)/h.width,f)*100+g,u=c((Math.abs(m.y)+this.blur)/h.height,f)*100+g),h.flipX&&(m.x*=-1),h.flipY&&(m.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+u+'%" height="'+(100+2*u)+'%" x="-'+l+'%" width="'+(100+2*l)+`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`+c(this.blur?this.blur/2:0,f)+`"></feGaussianBlur>
	<feOffset dx="`+c(m.x,f)+'" dy="'+c(m.y,f)+`" result="oBlur" ></feOffset>
	<feFlood flood-color="`+p.toRgb()+'" flood-opacity="'+p.getAlpha()+`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var h={},l=o.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(u){this[u]!==l[u]&&(h[u]=this[u])},this),h}}),o.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/}(t),function(){if(e.StaticCanvas){e.warn("fabric.StaticCanvas is already defined.");return}var s=e.util.object.extend,o=e.util.getElementOffset,c=e.util.removeFromArray,h=e.util.toFixed,l=e.util.transformPoint,u=e.util.invertTransform,f=e.util.getNodeCanvas,m=e.util.createCanvasElement,g=new Error("Could not initialize `canvas` element");e.StaticCanvas=e.util.createClass(e.CommonMethods,{initialize:function(p,v){v||(v={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(p,v)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:e.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(p,v){var b=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(p),this._initOptions(v),this.interactive||this._initRetinaScaling(),v.overlayImage&&this.setOverlayImage(v.overlayImage,b),v.backgroundImage&&this.setBackgroundImage(v.backgroundImage,b),v.backgroundColor&&this.setBackgroundColor(v.backgroundColor,b),v.overlayColor&&this.setOverlayColor(v.overlayColor,b),this.calcOffset()},_isRetinaScaling:function(){return e.devicePixelRatio>1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,e.devicePixelRatio):1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var p=e.devicePixelRatio;this.__initRetinaScaling(p,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(p,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(p,v,b){v.setAttribute("width",this.width*p),v.setAttribute("height",this.height*p),b.scale(p,p)},calcOffset:function(){return this._offset=o(this.lowerCanvasEl),this},setOverlayImage:function(p,v,b){return this.__setBgOverlayImage("overlayImage",p,v,b)},setBackgroundImage:function(p,v,b){return this.__setBgOverlayImage("backgroundImage",p,v,b)},setOverlayColor:function(p,v){return this.__setBgOverlayColor("overlayColor",p,v)},setBackgroundColor:function(p,v){return this.__setBgOverlayColor("backgroundColor",p,v)},__setBgOverlayImage:function(p,v,b,_){return typeof v=="string"?e.util.loadImage(v,function(S,w){if(S){var C=new e.Image(S,_);this[p]=C,C.canvas=this}b&&b(S,w)},this,_&&_.crossOrigin):(_&&v.setOptions(_),this[p]=v,v&&(v.canvas=this),b&&b(v,!1)),this},__setBgOverlayColor:function(p,v,b){return this[p]=v,this._initGradient(v,p),this._initPattern(v,p,b),this},_createCanvasElement:function(){var p=m();if(!p||(p.style||(p.style={}),typeof p.getContext>"u"))throw g;return p},_initOptions:function(p){var v=this.lowerCanvasEl;this._setOptions(p),this.width=this.width||parseInt(v.width,10)||0,this.height=this.height||parseInt(v.height,10)||0,this.lowerCanvasEl.style&&(v.width=this.width,v.height=this.height,v.style.width=this.width+"px",v.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(p){p&&p.getContext?this.lowerCanvasEl=p:this.lowerCanvasEl=e.util.getById(p)||this._createCanvasElement(),e.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(p,v){return this.setDimensions({width:p},v)},setHeight:function(p,v){return this.setDimensions({height:p},v)},setDimensions:function(p,v){var b;v=v||{};for(var _ in p)b=p[_],v.cssOnly||(this._setBackstoreDimension(_,p[_]),b+="px",this.hasLostContext=!0),v.backstoreOnly||this._setCssDimension(_,b);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),v.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(p,v){return this.lowerCanvasEl[p]=v,this.upperCanvasEl&&(this.upperCanvasEl[p]=v),this.cacheCanvasEl&&(this.cacheCanvasEl[p]=v),this[p]=v,this},_setCssDimension:function(p,v){return this.lowerCanvasEl.style[p]=v,this.upperCanvasEl&&(this.upperCanvasEl.style[p]=v),this.wrapperEl&&(this.wrapperEl.style[p]=v),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(p){var v=this._activeObject,b=this.backgroundImage,_=this.overlayImage,S,w,C;for(this.viewportTransform=p,w=0,C=this._objects.length;w<C;w++)S=this._objects[w],S.group||S.setCoords(!0);return v&&v.setCoords(),b&&b.setCoords(!0),_&&_.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(p,v){var b=p,_=this.viewportTransform.slice(0);p=l(p,u(this.viewportTransform)),_[0]=v,_[3]=v;var S=l(p,_);return _[4]+=b.x-S.x,_[5]+=b.y-S.y,this.setViewportTransform(_)},setZoom:function(p){return this.zoomToPoint(new e.Point(0,0),p),this},absolutePan:function(p){var v=this.viewportTransform.slice(0);return v[4]=-p.x,v[5]=-p.y,this.setViewportTransform(v)},relativePan:function(p){return this.absolutePan(new e.Point(-p.x-this.viewportTransform[4],-p.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(p){this.stateful&&p.setupState(),p._set("canvas",this),p.setCoords(),this.fire("object:added",{target:p}),p.fire("added")},_onObjectRemoved:function(p){this.fire("object:removed",{target:p}),p.fire("removed"),delete p.canvas},clearContext:function(p){return p.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var p=this.contextContainer;return this.renderCanvas(p,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=e.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var p={},v=this.width,b=this.height,_=u(this.viewportTransform);return p.tl=l({x:0,y:0},_),p.br=l({x:v,y:b},_),p.tr=new e.Point(p.br.x,p.tl.y),p.bl=new e.Point(p.tl.x,p.br.y),this.vptCoords=p,p},cancelRequestedRender:function(){this.isRendering&&(e.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(p,v){var b=this.viewportTransform,_=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(p),e.util.setImageSmoothing(p,this.imageSmoothingEnabled),this.fire("before:render",{ctx:p}),this._renderBackground(p),p.save(),p.transform(b[0],b[1],b[2],b[3],b[4],b[5]),this._renderObjects(p,v),p.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(p),_&&(_.canvas=this,_.shouldCache(),_._transformDone=!0,_.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(p)),this._renderOverlay(p),this.controlsAboveOverlay&&this.interactive&&this.drawControls(p),this.fire("after:render",{ctx:p})},drawClipPathOnCanvas:function(p){var v=this.viewportTransform,b=this.clipPath;p.save(),p.transform(v[0],v[1],v[2],v[3],v[4],v[5]),p.globalCompositeOperation="destination-in",b.transform(p),p.scale(1/b.zoomX,1/b.zoomY),p.drawImage(b._cacheCanvas,-b.cacheTranslationX,-b.cacheTranslationY),p.restore()},_renderObjects:function(p,v){var b,_;for(b=0,_=v.length;b<_;++b)v[b]&&v[b].render(p)},_renderBackgroundOrOverlay:function(p,v){var b=this[v+"Color"],_=this[v+"Image"],S=this.viewportTransform,w=this[v+"Vpt"];if(!(!b&&!_)){if(b){p.save(),p.beginPath(),p.moveTo(0,0),p.lineTo(this.width,0),p.lineTo(this.width,this.height),p.lineTo(0,this.height),p.closePath(),p.fillStyle=b.toLive?b.toLive(p,this):b,w&&p.transform(S[0],S[1],S[2],S[3],S[4],S[5]),p.transform(1,0,0,1,b.offsetX||0,b.offsetY||0);var C=b.gradientTransform||b.patternTransform;C&&p.transform(C[0],C[1],C[2],C[3],C[4],C[5]),p.fill(),p.restore()}_&&(p.save(),w&&p.transform(S[0],S[1],S[2],S[3],S[4],S[5]),_.render(p),p.restore())}},_renderBackground:function(p){this._renderBackgroundOrOverlay(p,"background")},_renderOverlay:function(p){this._renderBackgroundOrOverlay(p,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new e.Point(this.width/2,this.height/2)},centerObjectH:function(p){return this._centerObject(p,new e.Point(this.getCenterPoint().x,p.getCenterPoint().y))},centerObjectV:function(p){return this._centerObject(p,new e.Point(p.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(p){var v=this.getCenterPoint();return this._centerObject(p,v)},viewportCenterObject:function(p){var v=this.getVpCenter();return this._centerObject(p,v)},viewportCenterObjectH:function(p){var v=this.getVpCenter();return this._centerObject(p,new e.Point(v.x,p.getCenterPoint().y)),this},viewportCenterObjectV:function(p){var v=this.getVpCenter();return this._centerObject(p,new e.Point(p.getCenterPoint().x,v.y))},getVpCenter:function(){var p=this.getCenterPoint(),v=u(this.viewportTransform);return l(p,v)},_centerObject:function(p,v){return p.setPositionByOrigin(v,"center","center"),p.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(p){return this.toDatalessObject(p)},toObject:function(p){return this._toObjectMethod("toObject",p)},toDatalessObject:function(p){return this._toObjectMethod("toDatalessObject",p)},_toObjectMethod:function(p,v){var b=this.clipPath,_={version:e.version,objects:this._toObjects(p,v)};return b&&!b.excludeFromExport&&(_.clipPath=this._toObject(this.clipPath,p,v)),s(_,this.__serializeBgOverlay(p,v)),e.util.populateWithProperties(this,_,v),_},_toObjects:function(p,v){return this._objects.filter(function(b){return!b.excludeFromExport}).map(function(b){return this._toObject(b,p,v)},this)},_toObject:function(p,v,b){var _;this.includeDefaultValues||(_=p.includeDefaultValues,p.includeDefaultValues=!1);var S=p[v](b);return this.includeDefaultValues||(p.includeDefaultValues=_),S},__serializeBgOverlay:function(p,v){var b={},_=this.backgroundImage,S=this.overlayImage,w=this.backgroundColor,C=this.overlayColor;return w&&w.toObject?w.excludeFromExport||(b.background=w.toObject(v)):w&&(b.background=w),C&&C.toObject?C.excludeFromExport||(b.overlay=C.toObject(v)):C&&(b.overlay=C),_&&!_.excludeFromExport&&(b.backgroundImage=this._toObject(_,p,v)),S&&!S.excludeFromExport&&(b.overlayImage=this._toObject(S,p,v)),b},svgViewportTransformation:!0,toSVG:function(p,v){p||(p={}),p.reviver=v;var b=[];return this._setSVGPreamble(b,p),this._setSVGHeader(b,p),this.clipPath&&b.push('<g clip-path="url(#'+this.clipPath.clipPathId+`)" >
`),this._setSVGBgOverlayColor(b,"background"),this._setSVGBgOverlayImage(b,"backgroundImage",v),this._setSVGObjects(b,v),this.clipPath&&b.push(`</g>
`),this._setSVGBgOverlayColor(b,"overlay"),this._setSVGBgOverlayImage(b,"overlayImage",v),b.push("</svg>"),b.join("")},_setSVGPreamble:function(p,v){v.suppressPreamble||p.push('<?xml version="1.0" encoding="',v.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)},_setSVGHeader:function(p,v){var b=v.width||this.width,_=v.height||this.height,S,w='viewBox="0 0 '+this.width+" "+this.height+'" ',C=e.Object.NUM_FRACTION_DIGITS;v.viewBox?w='viewBox="'+v.viewBox.x+" "+v.viewBox.y+" "+v.viewBox.width+" "+v.viewBox.height+'" ':this.svgViewportTransformation&&(S=this.viewportTransform,w='viewBox="'+h(-S[4]/S[0],C)+" "+h(-S[5]/S[3],C)+" "+h(this.width/S[0],C)+" "+h(this.height/S[3],C)+'" '),p.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',b,'" ','height="',_,'" ',w,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",e.version,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(v),`</defs>
`)},createSVGClipPathMarkup:function(p){var v=this.clipPath;return v?(v.clipPathId="CLIPPATH_"+e.Object.__uid++,'<clipPath id="'+v.clipPathId+`" >
`+this.clipPath.toClipPathSVG(p.reviver)+`</clipPath>
`):""},createSVGRefElementsMarkup:function(){var p=this,v=["background","overlay"].map(function(b){var _=p[b+"Color"];if(_&&_.toLive){var S=p[b+"Vpt"],w=p.viewportTransform,C={width:p.width/(S?w[0]:1),height:p.height/(S?w[3]:1)};return _.toSVG(C,{additionalTransform:S?e.util.matrixToSVG(w):""})}});return v.join("")},createSVGFontFacesMarkup:function(){var p="",v={},b,_,S,w,C,x,M,E,A,O=e.fontPaths,D=[];for(this._objects.forEach(function U(j){D.push(j),j._objects&&j._objects.forEach(U)}),E=0,A=D.length;E<A;E++)if(b=D[E],_=b.fontFamily,!(b.type.indexOf("text")===-1||v[_]||!O[_])&&(v[_]=!0,!!b.styles)){S=b.styles;for(C in S){w=S[C];for(M in w)x=w[M],_=x.fontFamily,!v[_]&&O[_]&&(v[_]=!0)}}for(var L in v)p+=[`		@font-face {
`,"			font-family: '",L,`';
`,"			src: url('",O[L],`');
`,`		}
`].join("");return p&&(p=['	<style type="text/css">',`<![CDATA[
`,p,"]]>",`</style>
`].join("")),p},_setSVGObjects:function(p,v){var b,_,S,w=this._objects;for(_=0,S=w.length;_<S;_++)b=w[_],!b.excludeFromExport&&this._setSVGObject(p,b,v)},_setSVGObject:function(p,v,b){p.push(v.toSVG(b))},_setSVGBgOverlayImage:function(p,v,b){this[v]&&!this[v].excludeFromExport&&this[v].toSVG&&p.push(this[v].toSVG(b))},_setSVGBgOverlayColor:function(p,v){var b=this[v+"Color"],_=this.viewportTransform,S=this.width,w=this.height;if(b)if(b.toLive){var C=b.repeat,x=e.util.invertTransform(_),M=this[v+"Vpt"],E=M?e.util.matrixToSVG(x):"";p.push('<rect transform="'+E+" translate(",S/2,",",w/2,')"',' x="',b.offsetX-S/2,'" y="',b.offsetY-w/2,'" ','width="',C==="repeat-y"||C==="no-repeat"?b.source.width:S,'" height="',C==="repeat-x"||C==="no-repeat"?b.source.height:w,'" fill="url(#SVGID_'+b.id+')"',`></rect>
`)}else p.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',b,'"',`></rect>
`)},sendToBack:function(p){if(!p)return this;var v=this._activeObject,b,_,S;if(p===v&&p.type==="activeSelection")for(S=v._objects,b=S.length;b--;)_=S[b],c(this._objects,_),this._objects.unshift(_);else c(this._objects,p),this._objects.unshift(p);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(p){if(!p)return this;var v=this._activeObject,b,_,S;if(p===v&&p.type==="activeSelection")for(S=v._objects,b=0;b<S.length;b++)_=S[b],c(this._objects,_),this._objects.push(_);else c(this._objects,p),this._objects.push(p);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(p,v){if(!p)return this;var b=this._activeObject,_,S,w,C,x,M=0;if(p===b&&p.type==="activeSelection")for(x=b._objects,_=0;_<x.length;_++)S=x[_],w=this._objects.indexOf(S),w>0+M&&(C=w-1,c(this._objects,S),this._objects.splice(C,0,S)),M++;else w=this._objects.indexOf(p),w!==0&&(C=this._findNewLowerIndex(p,w,v),c(this._objects,p),this._objects.splice(C,0,p));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(p,v,b){var _,S;if(b)for(_=v,S=v-1;S>=0;--S){var w=p.intersectsWithObject(this._objects[S])||p.isContainedWithinObject(this._objects[S])||this._objects[S].isContainedWithinObject(p);if(w){_=S;break}}else _=v-1;return _},bringForward:function(p,v){if(!p)return this;var b=this._activeObject,_,S,w,C,x,M=0;if(p===b&&p.type==="activeSelection")for(x=b._objects,_=x.length;_--;)S=x[_],w=this._objects.indexOf(S),w<this._objects.length-1-M&&(C=w+1,c(this._objects,S),this._objects.splice(C,0,S)),M++;else w=this._objects.indexOf(p),w!==this._objects.length-1&&(C=this._findNewUpperIndex(p,w,v),c(this._objects,p),this._objects.splice(C,0,p));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(p,v,b){var _,S,w;if(b)for(_=v,S=v+1,w=this._objects.length;S<w;++S){var C=p.intersectsWithObject(this._objects[S])||p.isContainedWithinObject(this._objects[S])||this._objects[S].isContainedWithinObject(p);if(C){_=S;break}}else _=v+1;return _},moveTo:function(p,v){return c(this._objects,p),this._objects.splice(v,0,p),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(e.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(p){p.dispose&&p.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),e.util.setStyle(this.lowerCanvasEl,this._originalCanvasStyle),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),e.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),s(e.StaticCanvas.prototype,e.Observable),s(e.StaticCanvas.prototype,e.Collection),s(e.StaticCanvas.prototype,e.DataURLExporter),s(e.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(p){var v=m();if(!v||!v.getContext)return null;var b=v.getContext("2d");if(!b)return null;switch(p){case"setLineDash":return typeof b.setLineDash<"u";default:return null}}}),e.StaticCanvas.prototype.toJSON=e.StaticCanvas.prototype.toObject,e.isLikelyNode&&(e.StaticCanvas.prototype.createPNGStream=function(){var p=f(this.lowerCanvasEl);return p&&p.createPNGStream()},e.StaticCanvas.prototype.createJPEGStream=function(p){var v=f(this.lowerCanvasEl);return v&&v.createJPEGStream(p)})}(),e.BaseBrush=e.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(s){s.strokeStyle=this.color,s.lineWidth=this.width,s.lineCap=this.strokeLineCap,s.miterLimit=this.strokeMiterLimit,s.lineJoin=this.strokeLineJoin,s.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(s){var o=this.canvas.viewportTransform;s.save(),s.transform(o[0],o[1],o[2],o[3],o[4],o[5])},_setShadow:function(){if(this.shadow){var s=this.canvas,o=this.shadow,c=s.contextTop,h=s.getZoom();s&&s._isRetinaScaling()&&(h*=e.devicePixelRatio),c.shadowColor=o.color,c.shadowBlur=o.blur*h,c.shadowOffsetX=o.offsetX*h,c.shadowOffsetY=o.offsetY*h}},needsFullRender:function(){var s=new e.Color(this.color);return s.getAlpha()<1||!!this.shadow},_resetShadow:function(){var s=this.canvas.contextTop;s.shadowColor="",s.shadowBlur=s.shadowOffsetX=s.shadowOffsetY=0},_isOutSideCanvas:function(s){return s.x<0||s.x>this.canvas.getWidth()||s.y<0||s.y>this.canvas.getHeight()}}),function(){e.PencilBrush=e.util.createClass(e.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:"shiftKey",initialize:function(s){this.canvas=s,this._points=[]},needsFullRender:function(){return this.callSuper("needsFullRender")||this._hasStraightLine},_drawSegment:function(s,o,c){var h=o.midPointFrom(c);return s.quadraticCurveTo(o.x,o.y,h.x,h.y),h},onMouseDown:function(s,o){this.canvas._isMainEvent(o.e)&&(this.drawStraightLine=o.e[this.straightLineKey],this._prepareForDrawing(s),this._captureDrawingPath(s),this._render())},onMouseMove:function(s,o){if(this.canvas._isMainEvent(o.e)&&(this.drawStraightLine=o.e[this.straightLineKey],!(this.limitedToCanvasSize===!0&&this._isOutSideCanvas(s))&&this._captureDrawingPath(s)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var c=this._points,h=c.length,l=this.canvas.contextTop;this._saveAndTransform(l),this.oldEnd&&(l.beginPath(),l.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(l,c[h-2],c[h-1],!0),l.stroke(),l.restore()}},onMouseUp:function(s){return this.canvas._isMainEvent(s.e)?(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1):!0},_prepareForDrawing:function(s){var o=new e.Point(s.x,s.y);this._reset(),this._addPoint(o),this.canvas.contextTop.moveTo(o.x,o.y)},_addPoint:function(s){return this._points.length>1&&s.eq(this._points[this._points.length-1])?!1:(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(s),!0)},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(s){var o=new e.Point(s.x,s.y);return this._addPoint(o)},_render:function(s){var o,c,h=this._points[0],l=this._points[1];if(s=s||this.canvas.contextTop,this._saveAndTransform(s),s.beginPath(),this._points.length===2&&h.x===l.x&&h.y===l.y){var u=this.width/1e3;h=new e.Point(h.x,h.y),l=new e.Point(l.x,l.y),h.x-=u,l.x+=u}for(s.moveTo(h.x,h.y),o=1,c=this._points.length;o<c;o++)this._drawSegment(s,h,l),h=this._points[o],l=this._points[o+1];s.lineTo(h.x,h.y),s.stroke(),s.restore()},convertPointsToSVGPath:function(s){var o=this.width/1e3;return e.util.getSmoothPathFromPoints(s,o)},_isEmptySVGPath:function(s){var o=e.util.joinPath(s);return o==="M 0 0 Q 0 0 0 0 L 0 0"},createPath:function(s){var o=new e.Path(s,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,o.shadow=new e.Shadow(this.shadow)),o},decimatePoints:function(s,o){if(s.length<=2)return s;var c=this.canvas.getZoom(),h=Math.pow(o/c,2),l,u=s.length-1,f=s[0],m=[f],g;for(l=1;l<u-1;l++)g=Math.pow(f.x-s[l].x,2)+Math.pow(f.y-s[l].y,2),g>=h&&(f=s[l],m.push(f));return m.push(s[u]),m},_finalizeAndAddPath:function(){var s=this.canvas.contextTop;s.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var o=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(o)){this.canvas.requestRenderAll();return}var c=this.createPath(o);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:c}),this.canvas.add(c),this.canvas.requestRenderAll(),c.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:c})}})}(),e.CircleBrush=e.util.createClass(e.BaseBrush,{width:10,initialize:function(s){this.canvas=s,this.points=[]},drawDot:function(s){var o=this.addPoint(s),c=this.canvas.contextTop;this._saveAndTransform(c),this.dot(c,o),c.restore()},dot:function(s,o){s.fillStyle=o.fill,s.beginPath(),s.arc(o.x,o.y,o.radius,0,Math.PI*2,!1),s.closePath(),s.fill()},onMouseDown:function(s){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(s)},_render:function(){var s=this.canvas.contextTop,o,c,h=this.points;for(this._saveAndTransform(s),o=0,c=h.length;o<c;o++)this.dot(s,h[o]);s.restore()},onMouseMove:function(s){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(s)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(s),this._render()):this.drawDot(s))},onMouseUp:function(){var s=this.canvas.renderOnAddRemove,o,c;this.canvas.renderOnAddRemove=!1;var h=[];for(o=0,c=this.points.length;o<c;o++){var l=this.points[o],u=new e.Circle({radius:l.radius,left:l.x,top:l.y,originX:"center",originY:"center",fill:l.fill});this.shadow&&(u.shadow=new e.Shadow(this.shadow)),h.push(u)}var f=new e.Group(h);f.canvas=this.canvas,this.canvas.fire("before:path:created",{path:f}),this.canvas.add(f),this.canvas.fire("path:created",{path:f}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=s,this.canvas.requestRenderAll()},addPoint:function(s){var o=new e.Point(s.x,s.y),c=e.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,h=new e.Color(this.color).setAlpha(e.util.getRandomInt(0,100)/100).toRgba();return o.radius=c,o.fill=h,this.points.push(o),o}}),e.SprayBrush=e.util.createClass(e.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(s){this.canvas=s,this.sprayChunks=[]},onMouseDown:function(s){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(s),this.render(this.sprayChunkPoints)},onMouseMove:function(s){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(s)||(this.addSprayChunk(s),this.render(this.sprayChunkPoints))},onMouseUp:function(){var s=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var o=[],c=0,h=this.sprayChunks.length;c<h;c++)for(var l=this.sprayChunks[c],u=0,f=l.length;u<f;u++){var m=new e.Rect({width:l[u].width,height:l[u].width,left:l[u].x+1,top:l[u].y+1,originX:"center",originY:"center",fill:this.color});o.push(m)}this.optimizeOverlapping&&(o=this._getOptimizedRects(o));var g=new e.Group(o);this.shadow&&g.set("shadow",new e.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:g}),this.canvas.add(g),this.canvas.fire("path:created",{path:g}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=s,this.canvas.requestRenderAll()},_getOptimizedRects:function(s){var o={},c,h,l;for(h=0,l=s.length;h<l;h++)c=s[h].left+""+s[h].top,o[c]||(o[c]=s[h]);var u=[];for(c in o)u.push(o[c]);return u},render:function(s){var o=this.canvas.contextTop,c,h;for(o.fillStyle=this.color,this._saveAndTransform(o),c=0,h=s.length;c<h;c++){var l=s[c];typeof l.opacity<"u"&&(o.globalAlpha=l.opacity),o.fillRect(l.x,l.y,l.width,l.width)}o.restore()},_render:function(){var s=this.canvas.contextTop,o,c;for(s.fillStyle=this.color,this._saveAndTransform(s),o=0,c=this.sprayChunks.length;o<c;o++)this.render(this.sprayChunks[o]);s.restore()},addSprayChunk:function(s){this.sprayChunkPoints=[];var o,c,h,l=this.width/2,u;for(u=0;u<this.density;u++){o=e.util.getRandomInt(s.x-l,s.x+l),c=e.util.getRandomInt(s.y-l,s.y+l),this.dotWidthVariance?h=e.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):h=this.dotWidth;var f=new e.Point(o,c);f.width=h,this.randomOpacity&&(f.opacity=e.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(f)}this.sprayChunks.push(this.sprayChunkPoints)}}),e.PatternBrush=e.util.createClass(e.PencilBrush,{getPatternSrc:function(){var s=20,o=5,c=e.util.createCanvasElement(),h=c.getContext("2d");return c.width=c.height=s+o,h.fillStyle=this.color,h.beginPath(),h.arc(s/2,s/2,s/2,0,Math.PI*2,!1),h.closePath(),h.fill(),c},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(s){return s.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(s){this.callSuper("_setBrushStyles",s),s.strokeStyle=this.getPattern(s)},createPath:function(s){var o=this.callSuper("createPath",s),c=o._getLeftTopCoords().scalarAdd(o.strokeWidth/2);return o.stroke=new e.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-c.x,offsetY:-c.y}),o}}),function(){var s=e.util.getPointer,o=e.util.degreesToRadians,c=e.util.isTouchEvent;e.Canvas=e.util.createClass(e.StaticCanvas,{initialize:function(l,u){u||(u={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(l,u),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=e.PencilBrush&&new e.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var l=this.getActiveObjects(),u,f,m;if(l.length>0&&!this.preserveObjectStacking){f=[],m=[];for(var g=0,p=this._objects.length;g<p;g++)u=this._objects[g],l.indexOf(u)===-1?f.push(u):m.push(u);l.length>1&&(this._activeObject._objects=m),f.push.apply(f,m)}else f=this._objects;return f},renderAll:function(){this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1);var l=this.contextContainer;return this.renderCanvas(l,this._chooseObjectsToRender()),this},renderTopLayer:function(l){l.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(l),this.contextTopDirty=!0),l.restore()},renderTop:function(){var l=this.contextTop;return this.clearContext(l),this.renderTopLayer(l),this.fire("after:render"),this},_normalizePointer:function(l,u){var f=l.calcTransformMatrix(),m=e.util.invertTransform(f),g=this.restorePointerVpt(u);return e.util.transformPoint(g,m)},isTargetTransparent:function(l,u,f){if(l.shouldCache()&&l._cacheCanvas&&l!==this._activeObject){var m=this._normalizePointer(l,{x:u,y:f}),g=Math.max(l.cacheTranslationX+m.x*l.zoomX,0),p=Math.max(l.cacheTranslationY+m.y*l.zoomY,0),S=e.util.isTransparent(l._cacheContext,Math.round(g),Math.round(p),this.targetFindTolerance);return S}var v=this.contextCache,b=l.selectionBackgroundColor,_=this.viewportTransform;l.selectionBackgroundColor="",this.clearContext(v),v.save(),v.transform(_[0],_[1],_[2],_[3],_[4],_[5]),l.render(v),v.restore(),l.selectionBackgroundColor=b;var S=e.util.isTransparent(v,u,f,this.targetFindTolerance);return S},_isSelectionKeyPressed:function(l){var u=!1;return Array.isArray(this.selectionKey)?u=!!this.selectionKey.find(function(f){return l[f]===!0}):u=l[this.selectionKey],u},_shouldClearSelection:function(l,u){var f=this.getActiveObjects(),m=this._activeObject;return!u||u&&m&&f.length>1&&f.indexOf(u)===-1&&m!==u&&!this._isSelectionKeyPressed(l)||u&&!u.evented||u&&!u.selectable&&m&&m!==u},_shouldCenterTransform:function(l,u,f){if(l){var m;return u==="scale"||u==="scaleX"||u==="scaleY"||u==="resizing"?m=this.centeredScaling||l.centeredScaling:u==="rotate"&&(m=this.centeredRotation||l.centeredRotation),m?!f:f}},_getOriginFromCorner:function(l,u){var f={x:l.originX,y:l.originY};return u==="ml"||u==="tl"||u==="bl"?f.x="right":(u==="mr"||u==="tr"||u==="br")&&(f.x="left"),u==="tl"||u==="mt"||u==="tr"?f.y="bottom":(u==="bl"||u==="mb"||u==="br")&&(f.y="top"),f},_getActionFromCorner:function(l,u,f,m){if(!u||!l)return"drag";var g=m.controls[u];return g.getActionName(f,g,m)},_setupCurrentTransform:function(l,u,f){if(u){var m=this.getPointer(l),g=u.__corner,p=u.controls[g],v=f&&g?p.getActionHandler(l,u,p):e.controlsUtils.dragHandler,b=this._getActionFromCorner(f,g,l,u),_=this._getOriginFromCorner(u,g),S=l[this.centeredKey],w={target:u,action:b,actionHandler:v,corner:g,scaleX:u.scaleX,scaleY:u.scaleY,skewX:u.skewX,skewY:u.skewY,offsetX:m.x-u.left,offsetY:m.y-u.top,originX:_.x,originY:_.y,ex:m.x,ey:m.y,lastX:m.x,lastY:m.y,theta:o(u.angle),width:u.width*u.scaleX,shiftKey:l.shiftKey,altKey:S,original:e.util.saveObjectTransform(u)};this._shouldCenterTransform(u,b,S)&&(w.originX="center",w.originY="center"),w.original.originX=_.x,w.original.originY=_.y,this._currentTransform=w,this._beforeTransform(l)}},setCursor:function(l){this.upperCanvasEl.style.cursor=l},_drawSelection:function(l){var u=this._groupSelector,f=new e.Point(u.ex,u.ey),m=e.util.transformPoint(f,this.viewportTransform),g=new e.Point(u.ex+u.left,u.ey+u.top),p=e.util.transformPoint(g,this.viewportTransform),v=Math.min(m.x,p.x),b=Math.min(m.y,p.y),_=Math.max(m.x,p.x),S=Math.max(m.y,p.y),w=this.selectionLineWidth/2;this.selectionColor&&(l.fillStyle=this.selectionColor,l.fillRect(v,b,_-v,S-b)),!(!this.selectionLineWidth||!this.selectionBorderColor)&&(l.lineWidth=this.selectionLineWidth,l.strokeStyle=this.selectionBorderColor,v+=w,b+=w,_-=w,S-=w,e.Object.prototype._setLineDash.call(this,l,this.selectionDashArray),l.strokeRect(v,b,_-v,S-b))},findTarget:function(l,u){if(!this.skipTargetFind){var f=!0,m=this.getPointer(l,f),g=this._activeObject,p=this.getActiveObjects(),v,b,_=c(l),S=p.length>1&&!u||p.length===1;if(this.targets=[],S&&g._findTargetCorner(m,_)||p.length>1&&!u&&g===this._searchPossibleTargets([g],m))return g;if(p.length===1&&g===this._searchPossibleTargets([g],m))if(this.preserveObjectStacking)v=g,b=this.targets,this.targets=[];else return g;var w=this._searchPossibleTargets(this._objects,m);return l[this.altSelectionKey]&&w&&v&&w!==v&&(w=v,this.targets=b),w}},_checkTarget:function(l,u,f){if(u&&u.visible&&u.evented&&u.containsPoint(l))if((this.perPixelTargetFind||u.perPixelTargetFind)&&!u.isEditing){var m=this.isTargetTransparent(u,f.x,f.y);if(!m)return!0}else return!0},_searchPossibleTargets:function(l,u){for(var f,m=l.length,g;m--;){var p=l[m],v=p.group?this._normalizePointer(p.group,u):u;if(this._checkTarget(v,p,u)){f=l[m],f.subTargetCheck&&f instanceof e.Group&&(g=this._searchPossibleTargets(f._objects,u),g&&this.targets.push(g));break}}return f},restorePointerVpt:function(l){return e.util.transformPoint(l,e.util.invertTransform(this.viewportTransform))},getPointer:function(l,u){if(this._absolutePointer&&!u)return this._absolutePointer;if(this._pointer&&u)return this._pointer;var f=s(l),m=this.upperCanvasEl,g=m.getBoundingClientRect(),p=g.width||0,v=g.height||0,b;(!p||!v)&&("top"in g&&"bottom"in g&&(v=Math.abs(g.top-g.bottom)),"right"in g&&"left"in g&&(p=Math.abs(g.right-g.left))),this.calcOffset(),f.x=f.x-this._offset.left,f.y=f.y-this._offset.top,u||(f=this.restorePointerVpt(f));var _=this.getRetinaScaling();return _!==1&&(f.x/=_,f.y/=_),p===0||v===0?b={width:1,height:1}:b={width:m.width/p,height:m.height/v},{x:f.x*b.width,y:f.y*b.height}},_createUpperCanvas:function(){var l=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),u=this.lowerCanvasEl,f=this.upperCanvasEl;f?f.className="":(f=this._createCanvasElement(),this.upperCanvasEl=f),e.util.addClass(f,"upper-canvas "+l),this.wrapperEl.appendChild(f),this._copyCanvasStyle(u,f),this._applyCanvasStyle(f),this.contextTop=f.getContext("2d")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=e.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),e.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),e.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(l){var u=this.width||l.width,f=this.height||l.height;e.util.setStyle(l,{position:"absolute",width:u+"px",height:f+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),l.width=u,l.height=f,e.util.makeElementUnselectable(l)},_copyCanvasStyle:function(l,u){u.style.cssText=l.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var l=this._activeObject;return l?l.type==="activeSelection"&&l._objects?l._objects.slice(0):[l]:[]},_onObjectRemoved:function(l){l===this._activeObject&&(this.fire("before:selection:cleared",{target:l}),this._discardActiveObject(),this.fire("selection:cleared",{target:l}),l.fire("deselected")),l===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",l)},_fireSelectionEvents:function(l,u){var f=!1,m=this.getActiveObjects(),g=[],p=[];l.forEach(function(v){m.indexOf(v)===-1&&(f=!0,v.fire("deselected",{e:u,target:v}),p.push(v))}),m.forEach(function(v){l.indexOf(v)===-1&&(f=!0,v.fire("selected",{e:u,target:v}),g.push(v))}),l.length>0&&m.length>0?f&&this.fire("selection:updated",{e:u,selected:g,deselected:p}):m.length>0?this.fire("selection:created",{e:u,selected:g}):l.length>0&&this.fire("selection:cleared",{e:u,deselected:p})},setActiveObject:function(l,u){var f=this.getActiveObjects();return this._setActiveObject(l,u),this._fireSelectionEvents(f,u),this},_setActiveObject:function(l,u){return this._activeObject===l||!this._discardActiveObject(u,l)||l.onSelect({e:u})?!1:(this._activeObject=l,!0)},_discardActiveObject:function(l,u){var f=this._activeObject;if(f){if(f.onDeselect({e:l,object:u}))return!1;this._activeObject=null}return!0},discardActiveObject:function(l){var u=this.getActiveObjects(),f=this.getActiveObject();return u.length&&this.fire("before:selection:cleared",{target:f,e:l}),this._discardActiveObject(l),this._fireSelectionEvents(u,l),this},dispose:function(){var l=this.wrapperEl;return this.removeListeners(),l.removeChild(this.upperCanvasEl),l.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach((function(u){e.util.cleanUpJsdomNode(this[u]),this[u]=void 0}).bind(this)),l.parentNode&&l.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,e.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(l){var u=this._activeObject;u&&u._renderControls(l)},_toObject:function(l,u,f){var m=this._realizeGroupTransformOnObject(l),g=this.callSuper("_toObject",l,u,f);return this._unwindGroupTransformOnObject(l,m),g},_realizeGroupTransformOnObject:function(l){if(l.group&&l.group.type==="activeSelection"&&this._activeObject===l.group){var u=["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"],f={};return u.forEach(function(m){f[m]=l[m]}),e.util.addTransformToObject(l,this._activeObject.calcOwnMatrix()),f}else return null},_unwindGroupTransformOnObject:function(l,u){u&&l.set(u)},_setSVGObject:function(l,u,f){var m=this._realizeGroupTransformOnObject(u);this.callSuper("_setSVGObject",l,u,f),this._unwindGroupTransformOnObject(u,m)},setViewportTransform:function(l){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),e.StaticCanvas.prototype.setViewportTransform.call(this,l)}});for(var h in e.StaticCanvas)h!=="prototype"&&(e.Canvas[h]=e.StaticCanvas[h])}(),function(){var s=e.util.addListener,o=e.util.removeListener,c=3,h=2,l=1,u={passive:!1};function f(m,g){return m.button&&m.button===g-1}e.util.object.extend(e.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(s,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(m,g){var p=this.upperCanvasEl,v=this._getEventPrefix();m(e.window,"resize",this._onResize),m(p,v+"down",this._onMouseDown),m(p,v+"move",this._onMouseMove,u),m(p,v+"out",this._onMouseOut),m(p,v+"enter",this._onMouseEnter),m(p,"wheel",this._onMouseWheel),m(p,"contextmenu",this._onContextMenu),m(p,"dblclick",this._onDoubleClick),m(p,"dragover",this._onDragOver),m(p,"dragenter",this._onDragEnter),m(p,"dragleave",this._onDragLeave),m(p,"drop",this._onDrop),this.enablePointerEvents||m(p,"touchstart",this._onTouchStart,u),typeof eventjs<"u"&&g in eventjs&&(eventjs[g](p,"gesture",this._onGesture),eventjs[g](p,"drag",this._onDrag),eventjs[g](p,"orientation",this._onOrientationChange),eventjs[g](p,"shake",this._onShake),eventjs[g](p,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(o,"remove");var m=this._getEventPrefix();o(e.document,m+"up",this._onMouseUp),o(e.document,"touchend",this._onTouchEnd,u),o(e.document,m+"move",this._onMouseMove,u),o(e.document,"touchmove",this._onMouseMove,u)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(m,g){this.__onTransformGesture&&this.__onTransformGesture(m,g)},_onDrag:function(m,g){this.__onDrag&&this.__onDrag(m,g)},_onMouseWheel:function(m){this.__onMouseWheel(m)},_onMouseOut:function(m){var g=this._hoveredTarget;this.fire("mouse:out",{target:g,e:m}),this._hoveredTarget=null,g&&g.fire("mouseout",{e:m});var p=this;this._hoveredTargets.forEach(function(v){p.fire("mouse:out",{target:g,e:m}),v&&g.fire("mouseout",{e:m})}),this._hoveredTargets=[]},_onMouseEnter:function(m){!this._currentTransform&&!this.findTarget(m)&&(this.fire("mouse:over",{target:null,e:m}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(m,g){this.__onOrientationChange&&this.__onOrientationChange(m,g)},_onShake:function(m,g){this.__onShake&&this.__onShake(m,g)},_onLongPress:function(m,g){this.__onLongPress&&this.__onLongPress(m,g)},_onDragOver:function(m){m.preventDefault();var g=this._simpleEventHandler("dragover",m);this._fireEnterLeaveEvents(g,m)},_onDrop:function(m){return this._simpleEventHandler("drop:before",m),this._simpleEventHandler("drop",m)},_onContextMenu:function(m){return this.stopContextMenu&&(m.stopPropagation(),m.preventDefault()),!1},_onDoubleClick:function(m){this._cacheTransformEventData(m),this._handleEvent(m,"dblclick"),this._resetTransformEventData(m)},getPointerId:function(m){var g=m.changedTouches;return g?g[0]&&g[0].identifier:this.enablePointerEvents?m.pointerId:-1},_isMainEvent:function(m){return m.isPrimary===!0?!0:m.isPrimary===!1?!1:m.type==="touchend"&&m.touches.length===0?!0:m.changedTouches?m.changedTouches[0].identifier===this.mainTouchId:!0},_onTouchStart:function(m){m.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(m)),this.__onMouseDown(m),this._resetTransformEventData();var g=this.upperCanvasEl,p=this._getEventPrefix();s(e.document,"touchend",this._onTouchEnd,u),s(e.document,"touchmove",this._onMouseMove,u),o(g,p+"down",this._onMouseDown)},_onMouseDown:function(m){this.__onMouseDown(m),this._resetTransformEventData();var g=this.upperCanvasEl,p=this._getEventPrefix();o(g,p+"move",this._onMouseMove,u),s(e.document,p+"up",this._onMouseUp),s(e.document,p+"move",this._onMouseMove,u)},_onTouchEnd:function(m){if(!(m.touches.length>0)){this.__onMouseUp(m),this._resetTransformEventData(),this.mainTouchId=null;var g=this._getEventPrefix();o(e.document,"touchend",this._onTouchEnd,u),o(e.document,"touchmove",this._onMouseMove,u);var p=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){s(p.upperCanvasEl,g+"down",p._onMouseDown),p._willAddMouseDown=0},400)}},_onMouseUp:function(m){this.__onMouseUp(m),this._resetTransformEventData();var g=this.upperCanvasEl,p=this._getEventPrefix();this._isMainEvent(m)&&(o(e.document,p+"up",this._onMouseUp),o(e.document,p+"move",this._onMouseMove,u),s(g,p+"move",this._onMouseMove,u))},_onMouseMove:function(m){!this.allowTouchScrolling&&m.preventDefault&&m.preventDefault(),this.__onMouseMove(m)},_onResize:function(){this.calcOffset()},_shouldRender:function(m){var g=this._activeObject;return!!g!=!!m||g&&m&&g!==m?!0:(g&&g.isEditing,!1)},__onMouseUp:function(m){var g,p=this._currentTransform,v=this._groupSelector,b=!1,_=!v||v.left===0&&v.top===0;if(this._cacheTransformEventData(m),g=this._target,this._handleEvent(m,"up:before"),f(m,c)){this.fireRightClick&&this._handleEvent(m,"up",c,_);return}if(f(m,h)){this.fireMiddleClick&&this._handleEvent(m,"up",h,_),this._resetTransformEventData();return}if(this.isDrawingMode&&this._isCurrentlyDrawing){this._onMouseUpInDrawingMode(m);return}if(this._isMainEvent(m)){if(p&&(this._finalizeCurrentTransform(m),b=p.actionPerformed),!_){var S=g===this._activeObject;this._maybeGroupObjects(m),b||(b=this._shouldRender(g)||!S&&g===this._activeObject)}var w,C;if(g){if(w=g._findTargetCorner(this.getPointer(m,!0),e.util.isTouchEvent(m)),g.selectable&&g!==this._activeObject&&g.activeOn==="up")this.setActiveObject(g,m),b=!0;else{var x=g.controls[w],M=x&&x.getMouseUpHandler(m,g,x);M&&(C=this.getPointer(m),M(m,p,C.x,C.y))}g.isMoving=!1}if(p&&(p.target!==g||p.corner!==w)){var E=p.target&&p.target.controls[p.corner],A=E&&E.getMouseUpHandler(m,g,x);C=C||this.getPointer(m),A&&A(m,p,C.x,C.y)}this._setCursorFromEvent(m,g),this._handleEvent(m,"up",l,_),this._groupSelector=null,this._currentTransform=null,g&&(g.__corner=0),b?this.requestRenderAll():_||this.renderTop()}},_simpleEventHandler:function(m,g){var p=this.findTarget(g),v=this.targets,b={e:g,target:p,subTargets:v};if(this.fire(m,b),p&&p.fire(m,b),!v)return p;for(var _=0;_<v.length;_++)v[_].fire(m,b);return p},_handleEvent:function(m,g,p,v){var b=this._target,_=this.targets||[],S={e:m,target:b,subTargets:_,button:p||l,isClick:v||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};g==="up"&&(S.currentTarget=this.findTarget(m),S.currentSubTargets=this.targets),this.fire("mouse:"+g,S),b&&b.fire("mouse"+g,S);for(var w=0;w<_.length;w++)_[w].fire("mouse"+g,S)},_finalizeCurrentTransform:function(m){var g=this._currentTransform,p=g.target,v={e:m,target:p,transform:g,action:g.action};p._scaling&&(p._scaling=!1),p.setCoords(),(g.actionPerformed||this.stateful&&p.hasStateChanged())&&this._fire("modified",v)},_onMouseDownInDrawingMode:function(m){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(m).requestRenderAll();var g=this.getPointer(m);this.freeDrawingBrush.onMouseDown(g,{e:m,pointer:g}),this._handleEvent(m,"down")},_onMouseMoveInDrawingMode:function(m){if(this._isCurrentlyDrawing){var g=this.getPointer(m);this.freeDrawingBrush.onMouseMove(g,{e:m,pointer:g})}this.setCursor(this.freeDrawingCursor),this._handleEvent(m,"move")},_onMouseUpInDrawingMode:function(m){var g=this.getPointer(m);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:m,pointer:g}),this._handleEvent(m,"up")},__onMouseDown:function(m){this._cacheTransformEventData(m),this._handleEvent(m,"down:before");var g=this._target;if(f(m,c)){this.fireRightClick&&this._handleEvent(m,"down",c);return}if(f(m,h)){this.fireMiddleClick&&this._handleEvent(m,"down",h);return}if(this.isDrawingMode){this._onMouseDownInDrawingMode(m);return}if(this._isMainEvent(m)&&!this._currentTransform){var p=this._pointer;this._previousPointer=p;var v=this._shouldRender(g),b=this._shouldGroup(m,g);if(this._shouldClearSelection(m,g)?this.discardActiveObject(m):b&&(this._handleGrouping(m,g),g=this._activeObject),this.selection&&(!g||!g.selectable&&!g.isEditing&&g!==this._activeObject)&&(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),g){var _=g===this._activeObject;g.selectable&&g.activeOn==="down"&&this.setActiveObject(g,m);var S=g._findTargetCorner(this.getPointer(m,!0),e.util.isTouchEvent(m));if(g.__corner=S,g===this._activeObject&&(S||!b)){this._setupCurrentTransform(m,g,_);var w=g.controls[S],p=this.getPointer(m),C=w&&w.getMouseDownHandler(m,g,w);C&&C(m,this._currentTransform,p.x,p.y)}}this._handleEvent(m,"down"),(v||b)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(m){this._resetTransformEventData(),this._pointer=this.getPointer(m,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(m)||null},_beforeTransform:function(m){var g=this._currentTransform;this.stateful&&g.target.saveState(),this.fire("before:transform",{e:m,transform:g})},__onMouseMove:function(m){this._handleEvent(m,"move:before"),this._cacheTransformEventData(m);var g,p;if(this.isDrawingMode){this._onMouseMoveInDrawingMode(m);return}if(this._isMainEvent(m)){var v=this._groupSelector;v?(p=this._absolutePointer,v.left=p.x-v.ex,v.top=p.y-v.ey,this.renderTop()):this._currentTransform?this._transformObject(m):(g=this.findTarget(m)||null,this._setCursorFromEvent(m,g),this._fireOverOutEvents(g,m)),this._handleEvent(m,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(m,g){var p=this._hoveredTarget,v=this._hoveredTargets,b=this.targets,_=Math.max(v.length,b.length);this.fireSyntheticInOutEvents(m,g,{oldTarget:p,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var S=0;S<_;S++)this.fireSyntheticInOutEvents(b[S],g,{oldTarget:v[S],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=m,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(m,g){var p=this._draggedoverTarget,v=this._hoveredTargets,b=this.targets,_=Math.max(v.length,b.length);this.fireSyntheticInOutEvents(m,g,{oldTarget:p,evtOut:"dragleave",evtIn:"dragenter"});for(var S=0;S<_;S++)this.fireSyntheticInOutEvents(b[S],g,{oldTarget:v[S],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=m},fireSyntheticInOutEvents:function(m,g,p){var v,b,_=p.oldTarget,S,w,C=_!==m,x=p.canvasEvtIn,M=p.canvasEvtOut;C&&(v={e:g,target:m,previousTarget:_},b={e:g,target:_,nextTarget:m}),w=m&&C,S=_&&C,S&&(M&&this.fire(M,b),_.fire(p.evtOut,b)),w&&(x&&this.fire(x,v),m.fire(p.evtIn,v))},__onMouseWheel:function(m){this._cacheTransformEventData(m),this._handleEvent(m,"wheel"),this._resetTransformEventData()},_transformObject:function(m){var g=this.getPointer(m),p=this._currentTransform;p.reset=!1,p.shiftKey=m.shiftKey,p.altKey=m[this.centeredKey],this._performTransformAction(m,p,g),p.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(m,g,p){var v=p.x,b=p.y,_=g.action,S=!1,w=g.actionHandler;w&&(S=w(m,g,v,b)),_==="drag"&&S&&(g.target.isMoving=!0,this.setCursor(g.target.moveCursor||this.moveCursor)),g.actionPerformed=g.actionPerformed||S},_fire:e.controlsUtils.fireEvent,_setCursorFromEvent:function(m,g){if(!g)return this.setCursor(this.defaultCursor),!1;var p=g.hoverCursor||this.hoverCursor,v=this._activeObject&&this._activeObject.type==="activeSelection"?this._activeObject:null,b=(!v||!v.contains(g))&&g._findTargetCorner(this.getPointer(m,!0));b?this.setCursor(this.getCornerCursor(b,g,m)):(g.subTargetCheck&&this.targets.concat().reverse().map(function(_){p=_.hoverCursor||p}),this.setCursor(p))},getCornerCursor:function(m,g,p){var v=g.controls[m];return v.cursorStyleHandler(p,v,g)}})}(),function(){var s=Math.min,o=Math.max;e.util.object.extend(e.Canvas.prototype,{_shouldGroup:function(c,h){var l=this._activeObject;return l&&this._isSelectionKeyPressed(c)&&h&&h.selectable&&this.selection&&(l!==h||l.type==="activeSelection")&&!h.onSelect({e:c})},_handleGrouping:function(c,h){var l=this._activeObject;l.__corner||h===l&&(h=this.findTarget(c,!0),!h||!h.selectable)||(l&&l.type==="activeSelection"?this._updateActiveSelection(h,c):this._createActiveSelection(h,c))},_updateActiveSelection:function(c,h){var l=this._activeObject,u=l._objects.slice(0);l.contains(c)?(l.removeWithUpdate(c),this._hoveredTarget=c,this._hoveredTargets=this.targets.concat(),l.size()===1&&this._setActiveObject(l.item(0),h)):(l.addWithUpdate(c),this._hoveredTarget=l,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(u,h)},_createActiveSelection:function(c,h){var l=this.getActiveObjects(),u=this._createGroup(c);this._hoveredTarget=u,this._setActiveObject(u,h),this._fireSelectionEvents(l,h)},_createGroup:function(c){var h=this._objects,l=h.indexOf(this._activeObject)<h.indexOf(c),u=l?[this._activeObject,c]:[c,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new e.ActiveSelection(u,{canvas:this})},_groupSelectedObjects:function(c){var h=this._collectObjects(c),l;h.length===1?this.setActiveObject(h[0],c):h.length>1&&(l=new e.ActiveSelection(h.reverse(),{canvas:this}),this.setActiveObject(l,c))},_collectObjects:function(c){for(var h=[],l,u=this._groupSelector.ex,f=this._groupSelector.ey,m=u+this._groupSelector.left,g=f+this._groupSelector.top,p=new e.Point(s(u,m),s(f,g)),v=new e.Point(o(u,m),o(f,g)),b=!this.selectionFullyContained,_=u===m&&f===g,S=this._objects.length;S--&&(l=this._objects[S],!(!(!l||!l.selectable||!l.visible)&&(b&&l.intersectsWithRect(p,v,!0)||l.isContainedWithinRect(p,v,!0)||b&&l.containsPoint(p,null,!0)||b&&l.containsPoint(v,null,!0))&&(h.push(l),_))););return h.length>1&&(h=h.filter(function(w){return!w.onSelect({e:c})})),h},_maybeGroupObjects:function(c){this.selection&&this._groupSelector&&this._groupSelectedObjects(c),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),function(){e.util.object.extend(e.StaticCanvas.prototype,{toDataURL:function(s){s||(s={});var o=s.format||"png",c=s.quality||1,h=(s.multiplier||1)*(s.enableRetinaScaling?this.getRetinaScaling():1),l=this.toCanvasElement(h,s);return e.util.toDataURL(l,o,c)},toCanvasElement:function(s,o){s=s||1,o=o||{};var c=(o.width||this.width)*s,h=(o.height||this.height)*s,l=this.getZoom(),u=this.width,f=this.height,m=l*s,g=this.viewportTransform,p=(g[4]-(o.left||0))*s,v=(g[5]-(o.top||0))*s,b=this.interactive,_=[m,0,0,m,p,v],S=this.enableRetinaScaling,w=e.util.createCanvasElement(),C=this.contextTop;return w.width=c,w.height=h,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=_,this.width=c,this.height=h,this.calcViewportBoundaries(),this.renderCanvas(w.getContext("2d"),this._objects),this.viewportTransform=g,this.width=u,this.height=f,this.calcViewportBoundaries(),this.interactive=b,this.enableRetinaScaling=S,this.contextTop=C,w}})}(),e.util.object.extend(e.StaticCanvas.prototype,{loadFromJSON:function(s,o,c){if(s){var h=typeof s=="string"?JSON.parse(s):e.util.object.clone(s),l=this,u=h.clipPath,f=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete h.clipPath,this._enlivenObjects(h.objects,function(m){l.clear(),l._setBgOverlay(h,function(){u?l._enlivenObjects([u],function(g){l.clipPath=g[0],l.__setupCanvas.call(l,h,m,f,o)}):l.__setupCanvas.call(l,h,m,f,o)})},c),this}},__setupCanvas:function(s,o,c,h){var l=this;o.forEach(function(u,f){l.insertAt(u,f)}),this.renderOnAddRemove=c,delete s.objects,delete s.backgroundImage,delete s.overlayImage,delete s.background,delete s.overlay,this._setOptions(s),this.renderAll(),h&&h()},_setBgOverlay:function(s,o){var c={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!s.backgroundImage&&!s.overlayImage&&!s.background&&!s.overlay){o&&o();return}var h=function(){c.backgroundImage&&c.overlayImage&&c.backgroundColor&&c.overlayColor&&o&&o()};this.__setBgOverlay("backgroundImage",s.backgroundImage,c,h),this.__setBgOverlay("overlayImage",s.overlayImage,c,h),this.__setBgOverlay("backgroundColor",s.background,c,h),this.__setBgOverlay("overlayColor",s.overlay,c,h)},__setBgOverlay:function(s,o,c,h){var l=this;if(!o){c[s]=!0,h&&h();return}s==="backgroundImage"||s==="overlayImage"?e.util.enlivenObjects([o],function(u){l[s]=u[0],c[s]=!0,h&&h()}):this["set"+e.util.string.capitalize(s,!0)](o,function(){c[s]=!0,h&&h()})},_enlivenObjects:function(s,o,c){if(!s||s.length===0){o&&o([]);return}e.util.enlivenObjects(s,function(h){o&&o(h)},null,c)},_toDataURL:function(s,o){this.clone(function(c){o(c.toDataURL(s))})},_toDataURLWithMultiplier:function(s,o,c){this.clone(function(h){c(h.toDataURLWithMultiplier(s,o))})},clone:function(s,o){var c=JSON.stringify(this.toJSON(o));this.cloneWithoutData(function(h){h.loadFromJSON(c,function(){s&&s(h)})})},cloneWithoutData:function(s){var o=e.util.createCanvasElement();o.width=this.width,o.height=this.height;var c=new e.Canvas(o);this.backgroundImage?(c.setBackgroundImage(this.backgroundImage.src,function(){c.renderAll(),s&&s(c)}),c.backgroundImageOpacity=this.backgroundImageOpacity,c.backgroundImageStretch=this.backgroundImageStretch):s&&s(c)}}),function(s){var o=s.fabric||(s.fabric={}),c=o.util.object.extend,h=o.util.object.clone,l=o.util.toFixed,u=o.util.string.capitalize,f=o.util.degreesToRadians,m=!o.isLikelyNode,g=2;o.Object||(o.Object=o.util.createClass(o.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:m,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(p){p&&this.setOptions(p)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=o.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(p){var v=o.perfLimitSizeTotal,b=p.width,_=p.height,S=o.maxCacheSideLimit,w=o.minCacheSideLimit;if(b<=S&&_<=S&&b*_<=v)return b<w&&(p.width=w),_<w&&(p.height=w),p;var C=b/_,x=o.util.limitDimsByArea(C,v),M=o.util.capValue,E=M(w,x.x,S),A=M(w,x.y,S);return b>E&&(p.zoomX/=b/E,p.width=E,p.capped=!0),_>A&&(p.zoomY/=_/A,p.height=A,p.capped=!0),p},_getCacheCanvasDimensions:function(){var p=this.getTotalObjectScaling(),v=this._getTransformedDimensions(0,0),b=v.x*p.scaleX/this.scaleX,_=v.y*p.scaleY/this.scaleY;return{width:b+g,height:_+g,zoomX:p.scaleX,zoomY:p.scaleY,x:b,y:_}},_updateCacheCanvas:function(){var p=this.canvas;if(this.noScaleCache&&p&&p._currentTransform){var v=p._currentTransform.target,b=p._currentTransform.action;if(this===v&&b.slice&&b.slice(0,5)==="scale")return!1}var _=this._cacheCanvas,S=this._limitCacheSize(this._getCacheCanvasDimensions()),w=o.minCacheSideLimit,C=S.width,x=S.height,M,E,A=S.zoomX,O=S.zoomY,D=C!==this.cacheWidth||x!==this.cacheHeight,L=this.zoomX!==A||this.zoomY!==O,U=D||L,j=0,V=0,k=!1;if(D){var F=this._cacheCanvas.width,T=this._cacheCanvas.height,P=C>F||x>T,H=(C<F*.9||x<T*.9)&&F>w&&T>w;k=P||H,P&&!S.capped&&(C>w||x>w)&&(j=C*.1,V=x*.1)}return this instanceof o.Text&&this.path&&(U=!0,k=!0,j+=this.getHeightOfLine(0)*this.zoomX,V+=this.getHeightOfLine(0)*this.zoomY),U?(k?(_.width=Math.ceil(C+j),_.height=Math.ceil(x+V)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,_.width,_.height)),M=S.x/2,E=S.y/2,this.cacheTranslationX=Math.round(_.width/2-M)+M,this.cacheTranslationY=Math.round(_.height/2-E)+E,this.cacheWidth=C,this.cacheHeight=x,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(A,O),this.zoomX=A,this.zoomY=O,!0):!1},setOptions:function(p){this._setOptions(p),this._initGradient(p.fill,"fill"),this._initGradient(p.stroke,"stroke"),this._initPattern(p.fill,"fill"),this._initPattern(p.stroke,"stroke")},transform:function(p){var v=this.group&&!this.group._transformDone||this.group&&this.canvas&&p===this.canvas.contextTop,b=this.calcTransformMatrix(!v);p.transform(b[0],b[1],b[2],b[3],b[4],b[5])},toObject:function(p){var v=o.Object.NUM_FRACTION_DIGITS,b={type:this.type,version:o.version,originX:this.originX,originY:this.originY,left:l(this.left,v),top:l(this.top,v),width:l(this.width,v),height:l(this.height,v),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:l(this.strokeWidth,v),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:l(this.strokeMiterLimit,v),scaleX:l(this.scaleX,v),scaleY:l(this.scaleY,v),angle:l(this.angle,v),flipX:this.flipX,flipY:this.flipY,opacity:l(this.opacity,v),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:l(this.skewX,v),skewY:l(this.skewY,v)};return this.clipPath&&!this.clipPath.excludeFromExport&&(b.clipPath=this.clipPath.toObject(p),b.clipPath.inverted=this.clipPath.inverted,b.clipPath.absolutePositioned=this.clipPath.absolutePositioned),o.util.populateWithProperties(this,b,p),this.includeDefaultValues||(b=this._removeDefaultValues(b)),b},toDatalessObject:function(p){return this.toObject(p)},_removeDefaultValues:function(p){var v=o.util.getKlass(p.type).prototype,b=v.stateProperties;return b.forEach(function(_){_==="left"||_==="top"||(p[_]===v[_]&&delete p[_],Array.isArray(p[_])&&Array.isArray(v[_])&&p[_].length===0&&v[_].length===0&&delete p[_])}),p},toString:function(){return"#<fabric."+u(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var p=o.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(p.scaleX),scaleY:Math.abs(p.scaleY)}},getTotalObjectScaling:function(){var p=this.getObjectScaling(),v=p.scaleX,b=p.scaleY;if(this.canvas){var _=this.canvas.getZoom(),S=this.canvas.getRetinaScaling();v*=_*S,b*=_*S}return{scaleX:v,scaleY:b}},getObjectOpacity:function(){var p=this.opacity;return this.group&&(p*=this.group.getObjectOpacity()),p},_set:function(p,v){var b=p==="scaleX"||p==="scaleY",_=this[p]!==v,S=!1;return b&&(v=this._constrainScale(v)),p==="scaleX"&&v<0?(this.flipX=!this.flipX,v*=-1):p==="scaleY"&&v<0?(this.flipY=!this.flipY,v*=-1):p==="shadow"&&v&&!(v instanceof o.Shadow)?v=new o.Shadow(v):p==="dirty"&&this.group&&this.group.set("dirty",v),this[p]=v,_&&(S=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(p)>-1?(this.dirty=!0,S&&this.group.set("dirty",!0)):S&&this.stateProperties.indexOf(p)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:o.iMatrix.concat()},isNotVisible:function(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible},render:function(p){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(p.save(),this._setupCompositeOperation(p),this.drawSelectionBackground(p),this.transform(p),this._setOpacity(p),this._setShadow(p,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(p)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(p),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),p.restore())},renderCache:function(p){p=p||{},(!this._cacheCanvas||!this._cacheContext)&&this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,p.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0},hasFill:function(){return this.fill&&this.fill!=="transparent"},needsItsOwnCache:function(){return!!(this.paintFirst==="stroke"&&this.hasFill()&&this.hasStroke()&&typeof this.shadow=="object"||this.clipPath)},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)},drawClipPathOnCache:function(p,v){if(p.save(),v.inverted?p.globalCompositeOperation="destination-out":p.globalCompositeOperation="destination-in",v.absolutePositioned){var b=o.util.invertTransform(this.calcTransformMatrix());p.transform(b[0],b[1],b[2],b[3],b[4],b[5])}v.transform(p),p.scale(1/v.zoomX,1/v.zoomY),p.drawImage(v._cacheCanvas,-v.cacheTranslationX,-v.cacheTranslationY),p.restore()},drawObject:function(p,v){var b=this.fill,_=this.stroke;v?(this.fill="black",this.stroke="",this._setClippingProperties(p)):this._renderBackground(p),this._render(p),this._drawClipPath(p,this.clipPath),this.fill=b,this.stroke=_},_drawClipPath:function(p,v){v&&(v.canvas=this.canvas,v.shouldCache(),v._transformDone=!0,v.renderCache({forClipping:!0}),this.drawClipPathOnCache(p,v))},drawCacheOnCanvas:function(p){p.scale(1/this.zoomX,1/this.zoomY),p.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(p){if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!p&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&this._cacheContext&&!p){var v=this.cacheWidth/this.zoomX,b=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-v/2,-b/2,v,b)}return!0}return!1},_renderBackground:function(p){if(this.backgroundColor){var v=this._getNonTransformedDimensions();p.fillStyle=this.backgroundColor,p.fillRect(-v.x/2,-v.y/2,v.x,v.y),this._removeShadow(p)}},_setOpacity:function(p){this.group&&!this.group._transformDone?p.globalAlpha=this.getObjectOpacity():p.globalAlpha*=this.opacity},_setStrokeStyles:function(p,v){var b=v.stroke;b&&(p.lineWidth=v.strokeWidth,p.lineCap=v.strokeLineCap,p.lineDashOffset=v.strokeDashOffset,p.lineJoin=v.strokeLineJoin,p.miterLimit=v.strokeMiterLimit,b.toLive?b.gradientUnits==="percentage"||b.gradientTransform||b.patternTransform?this._applyPatternForTransformedGradient(p,b):(p.strokeStyle=b.toLive(p,this),this._applyPatternGradientTransform(p,b)):p.strokeStyle=v.stroke)},_setFillStyles:function(p,v){var b=v.fill;b&&(b.toLive?(p.fillStyle=b.toLive(p,this),this._applyPatternGradientTransform(p,v.fill)):p.fillStyle=b)},_setClippingProperties:function(p){p.globalAlpha=1,p.strokeStyle="transparent",p.fillStyle="#000000"},_setLineDash:function(p,v){!v||v.length===0||(1&v.length&&v.push.apply(v,v),p.setLineDash(v))},_renderControls:function(p,v){var b=this.getViewportTransform(),_=this.calcTransformMatrix(),S,w,C;v=v||{},w=typeof v.hasBorders<"u"?v.hasBorders:this.hasBorders,C=typeof v.hasControls<"u"?v.hasControls:this.hasControls,_=o.util.multiplyTransformMatrices(b,_),S=o.util.qrDecompose(_),p.save(),p.translate(S.translateX,S.translateY),p.lineWidth=1*this.borderScaleFactor,this.group||(p.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(S.angle-=180),p.rotate(f(this.group?S.angle:this.angle)),v.forActiveSelection||this.group?w&&this.drawBordersInGroup(p,S,v):w&&this.drawBorders(p,v),C&&this.drawControls(p,v),p.restore()},_setShadow:function(p){if(this.shadow){var v=this.shadow,b=this.canvas,_,S=b&&b.viewportTransform[0]||1,w=b&&b.viewportTransform[3]||1;v.nonScaling?_={scaleX:1,scaleY:1}:_=this.getObjectScaling(),b&&b._isRetinaScaling()&&(S*=o.devicePixelRatio,w*=o.devicePixelRatio),p.shadowColor=v.color,p.shadowBlur=v.blur*o.browserShadowBlurConstant*(S+w)*(_.scaleX+_.scaleY)/4,p.shadowOffsetX=v.offsetX*S*_.scaleX,p.shadowOffsetY=v.offsetY*w*_.scaleY}},_removeShadow:function(p){this.shadow&&(p.shadowColor="",p.shadowBlur=p.shadowOffsetX=p.shadowOffsetY=0)},_applyPatternGradientTransform:function(p,v){if(!v||!v.toLive)return{offsetX:0,offsetY:0};var b=v.gradientTransform||v.patternTransform,_=-this.width/2+v.offsetX||0,S=-this.height/2+v.offsetY||0;return v.gradientUnits==="percentage"?p.transform(this.width,0,0,this.height,_,S):p.transform(1,0,0,1,_,S),b&&p.transform(b[0],b[1],b[2],b[3],b[4],b[5]),{offsetX:_,offsetY:S}},_renderPaintInOrder:function(p){this.paintFirst==="stroke"?(this._renderStroke(p),this._renderFill(p)):(this._renderFill(p),this._renderStroke(p))},_render:function(){},_renderFill:function(p){this.fill&&(p.save(),this._setFillStyles(p,this),this.fillRule==="evenodd"?p.fill("evenodd"):p.fill(),p.restore())},_renderStroke:function(p){if(!(!this.stroke||this.strokeWidth===0)){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(p),p.save(),this.strokeUniform&&this.group){var v=this.getObjectScaling();p.scale(1/v.scaleX,1/v.scaleY)}else this.strokeUniform&&p.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(p,this.strokeDashArray),this._setStrokeStyles(p,this),p.stroke(),p.restore()}},_applyPatternForTransformedGradient:function(p,v){var b=this._limitCacheSize(this._getCacheCanvasDimensions()),_=o.util.createCanvasElement(),S,w=this.canvas.getRetinaScaling(),C=b.x/this.scaleX/w,x=b.y/this.scaleY/w;_.width=C,_.height=x,S=_.getContext("2d"),S.beginPath(),S.moveTo(0,0),S.lineTo(C,0),S.lineTo(C,x),S.lineTo(0,x),S.closePath(),S.translate(C/2,x/2),S.scale(b.zoomX/this.scaleX/w,b.zoomY/this.scaleY/w),this._applyPatternGradientTransform(S,v),S.fillStyle=v.toLive(p),S.fill(),p.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),p.scale(w*this.scaleX/b.zoomX,w*this.scaleY/b.zoomY),p.strokeStyle=S.createPattern(_,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var p=o.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",p.scaleX),this.set("scaleY",p.scaleY),this.angle=p.angle,this.skewX=p.skewX,this.skewY=0}},_removeTransformMatrix:function(p){var v=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),v=o.util.transformPoint(v,this.transformMatrix)),this.transformMatrix=null,p&&(this.scaleX*=p.scaleX,this.scaleY*=p.scaleY,this.cropX=p.cropX,this.cropY=p.cropY,v.x+=p.offsetLeft,v.y+=p.offsetTop,this.width=p.width,this.height=p.height),this.setPositionByOrigin(v,"center","center")},clone:function(p,v){var b=this.toObject(v);this.constructor.fromObject?this.constructor.fromObject(b,p):o.Object._fromObject("Object",b,p)},cloneAsImage:function(p,v){var b=this.toCanvasElement(v);return p&&p(new o.Image(b)),this},toCanvasElement:function(p){p||(p={});var v=o.util,b=v.saveObjectTransform(this),_=this.group,S=this.shadow,w=Math.abs,C=(p.multiplier||1)*(p.enableRetinaScaling?o.devicePixelRatio:1);delete this.group,p.withoutTransform&&v.resetObjectTransform(this),p.withoutShadow&&(this.shadow=null);var x=o.util.createCanvasElement(),M=this.getBoundingRect(!0,!0),E=this.shadow,A,O={x:0,y:0},D,L,U;E&&(D=E.blur,E.nonScaling?A={scaleX:1,scaleY:1}:A=this.getObjectScaling(),O.x=2*Math.round(w(E.offsetX)+D)*w(A.scaleX),O.y=2*Math.round(w(E.offsetY)+D)*w(A.scaleY)),L=M.width+O.x,U=M.height+O.y,x.width=Math.ceil(L),x.height=Math.ceil(U);var j=new o.StaticCanvas(x,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});p.format==="jpeg"&&(j.backgroundColor="#fff"),this.setPositionByOrigin(new o.Point(j.width/2,j.height/2),"center","center");var V=this.canvas;j.add(this);var k=j.toCanvasElement(C||1,p);return this.shadow=S,this.set("canvas",V),_&&(this.group=_),this.set(b).setCoords(),j._objects=[],j.dispose(),j=null,k},toDataURL:function(p){return p||(p={}),o.util.toDataURL(this.toCanvasElement(p),p.format||"png",p.quality||1)},isType:function(p){return arguments.length>1?Array.from(arguments).includes(this.type):this.type===p},complexity:function(){return 1},toJSON:function(p){return this.toObject(p)},rotate:function(p){var v=(this.originX!=="center"||this.originY!=="center")&&this.centeredRotation;return v&&this._setOriginToCenter(),this.set("angle",p),v&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(p,v){v=v||this.canvas.getPointer(p);var b=new o.Point(v.x,v.y),_=this._getLeftTopCoords();return this.angle&&(b=o.util.rotatePoint(b,_,f(-this.angle))),{x:b.x-_.x,y:b.y-_.y}},_setupCompositeOperation:function(p){this.globalCompositeOperation&&(p.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){o.runningAnimations&&o.runningAnimations.cancelByTarget(this)}}),o.util.createAccessors&&o.util.createAccessors(o.Object),c(o.Object.prototype,o.Observable),o.Object.NUM_FRACTION_DIGITS=2,o.Object.ENLIVEN_PROPS=["clipPath"],o.Object._fromObject=function(p,v,b,_){var S=o[p];v=h(v,!0),o.util.enlivenPatterns([v.fill,v.stroke],function(w){typeof w[0]<"u"&&(v.fill=w[0]),typeof w[1]<"u"&&(v.stroke=w[1]),o.util.enlivenObjectEnlivables(v,v,function(){var C=_?new S(v[_],v):new S(v);b&&b(C)})})},o.Object.__uid=0)}(t),function(){var s=e.util.degreesToRadians,o={left:-.5,center:0,right:.5},c={top:-.5,center:0,bottom:.5};e.util.object.extend(e.Object.prototype,{translateToGivenOrigin:function(h,l,u,f,m){var g=h.x,p=h.y,v,b,_;return typeof l=="string"?l=o[l]:l-=.5,typeof f=="string"?f=o[f]:f-=.5,v=f-l,typeof u=="string"?u=c[u]:u-=.5,typeof m=="string"?m=c[m]:m-=.5,b=m-u,(v||b)&&(_=this._getTransformedDimensions(),g=h.x+v*_.x,p=h.y+b*_.y),new e.Point(g,p)},translateToCenterPoint:function(h,l,u){var f=this.translateToGivenOrigin(h,l,u,"center","center");return this.angle?e.util.rotatePoint(f,h,s(this.angle)):f},translateToOriginPoint:function(h,l,u){var f=this.translateToGivenOrigin(h,"center","center",l,u);return this.angle?e.util.rotatePoint(f,h,s(this.angle)):f},getCenterPoint:function(){var h=new e.Point(this.left,this.top);return this.translateToCenterPoint(h,this.originX,this.originY)},getPointByOrigin:function(h,l){var u=this.getCenterPoint();return this.translateToOriginPoint(u,h,l)},toLocalPoint:function(h,l,u){var f=this.getCenterPoint(),m,g;return typeof l<"u"&&typeof u<"u"?m=this.translateToGivenOrigin(f,"center","center",l,u):m=new e.Point(this.left,this.top),g=new e.Point(h.x,h.y),this.angle&&(g=e.util.rotatePoint(g,f,-s(this.angle))),g.subtractEquals(m)},setPositionByOrigin:function(h,l,u){var f=this.translateToCenterPoint(h,l,u),m=this.translateToOriginPoint(f,this.originX,this.originY);this.set("left",m.x),this.set("top",m.y)},adjustPosition:function(h){var l=s(this.angle),u=this.getScaledWidth(),f=e.util.cos(l)*u,m=e.util.sin(l)*u,g,p;typeof this.originX=="string"?g=o[this.originX]:g=this.originX-.5,typeof h=="string"?p=o[h]:p=h-.5,this.left+=f*(p-g),this.top+=m*(p-g),this.setCoords(),this.originX=h},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var h=this.getCenterPoint();this.originX="center",this.originY="center",this.left=h.x,this.top=h.y},_resetOrigin:function(){var h=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=h.x,this.top=h.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function s(u){return[new e.Point(u.tl.x,u.tl.y),new e.Point(u.tr.x,u.tr.y),new e.Point(u.br.x,u.br.y),new e.Point(u.bl.x,u.bl.y)]}var o=e.util,c=o.degreesToRadians,h=o.multiplyTransformMatrices,l=o.transformPoint;o.object.extend(e.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(u,f){return f?u?this.calcACoords():this.calcLineCoords():((!this.aCoords||!this.lineCoords)&&this.setCoords(!0),u?this.aCoords:this.lineCoords)},getCoords:function(u,f){return s(this._getCoords(u,f))},intersectsWithRect:function(u,f,m,g){var p=this.getCoords(m,g),v=e.Intersection.intersectPolygonRectangle(p,u,f);return v.status==="Intersection"},intersectsWithObject:function(u,f,m){var g=e.Intersection.intersectPolygonPolygon(this.getCoords(f,m),u.getCoords(f,m));return g.status==="Intersection"||u.isContainedWithinObject(this,f,m)||this.isContainedWithinObject(u,f,m)},isContainedWithinObject:function(u,f,m){for(var g=this.getCoords(f,m),p=f?u.aCoords:u.lineCoords,v=0,b=u._getImageLines(p);v<4;v++)if(!u.containsPoint(g[v],b))return!1;return!0},isContainedWithinRect:function(u,f,m,g){var p=this.getBoundingRect(m,g);return p.left>=u.x&&p.left+p.width<=f.x&&p.top>=u.y&&p.top+p.height<=f.y},containsPoint:function(u,v,m,g){var p=this._getCoords(m,g),v=v||this._getImageLines(p),b=this._findCrossPoints(u,v);return b!==0&&b%2===1},isOnScreen:function(u){if(!this.canvas)return!1;var f=this.canvas.vptCoords.tl,m=this.canvas.vptCoords.br,g=this.getCoords(!0,u);return g.some(function(p){return p.x<=m.x&&p.x>=f.x&&p.y<=m.y&&p.y>=f.y})||this.intersectsWithRect(f,m,!0,u)?!0:this._containsCenterOfCanvas(f,m,u)},_containsCenterOfCanvas:function(u,f,m){var g={x:(u.x+f.x)/2,y:(u.y+f.y)/2};return!!this.containsPoint(g,null,!0,m)},isPartiallyOnScreen:function(u){if(!this.canvas)return!1;var f=this.canvas.vptCoords.tl,m=this.canvas.vptCoords.br;if(this.intersectsWithRect(f,m,!0,u))return!0;var g=this.getCoords(!0,u).every(function(p){return(p.x>=m.x||p.x<=f.x)&&(p.y>=m.y||p.y<=f.y)});return g&&this._containsCenterOfCanvas(f,m,u)},_getImageLines:function(u){var f={topline:{o:u.tl,d:u.tr},rightline:{o:u.tr,d:u.br},bottomline:{o:u.br,d:u.bl},leftline:{o:u.bl,d:u.tl}};return f},_findCrossPoints:function(u,f){var m,g,p,v,b,_=0,S;for(var w in f)if(S=f[w],!(S.o.y<u.y&&S.d.y<u.y)&&!(S.o.y>=u.y&&S.d.y>=u.y)&&(S.o.x===S.d.x&&S.o.x>=u.x?b=S.o.x:(m=0,g=(S.d.y-S.o.y)/(S.d.x-S.o.x),p=u.y-m*u.x,v=S.o.y-g*S.o.x,b=-(p-v)/(m-g)),b>=u.x&&(_+=1),_===2))break;return _},getBoundingRect:function(u,f){var m=this.getCoords(u,f);return o.makeBoundingBoxFromPoints(m)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(u){return Math.abs(u)<this.minScaleLimit?u<0?-this.minScaleLimit:this.minScaleLimit:u===0?1e-4:u},scale:function(u){return this._set("scaleX",u),this._set("scaleY",u),this.setCoords()},scaleToWidth:function(u,f){var m=this.getBoundingRect(f).width/this.getScaledWidth();return this.scale(u/this.width/m)},scaleToHeight:function(u,f){var m=this.getBoundingRect(f).height/this.getScaledHeight();return this.scale(u/this.height/m)},calcLineCoords:function(){var u=this.getViewportTransform(),f=this.padding,m=c(this.angle),g=o.cos(m),p=o.sin(m),v=g*f,b=p*f,_=v+b,S=v-b,w=this.calcACoords(),C={tl:l(w.tl,u),tr:l(w.tr,u),bl:l(w.bl,u),br:l(w.br,u)};return f&&(C.tl.x-=S,C.tl.y-=_,C.tr.x+=_,C.tr.y-=S,C.bl.x-=_,C.bl.y+=S,C.br.x+=S,C.br.y+=_),C},calcOCoords:function(){var u=this._calcRotateMatrix(),f=this._calcTranslateMatrix(),m=this.getViewportTransform(),g=h(m,f),p=h(g,u),p=h(p,[1/m[0],0,0,1/m[3],0,0]),v=this._calculateCurrentDimensions(),b={};return this.forEachControl(function(_,S,w){b[S]=_.positionHandler(v,p,w)}),b},calcACoords:function(){var u=this._calcRotateMatrix(),f=this._calcTranslateMatrix(),m=h(f,u),g=this._getTransformedDimensions(),p=g.x/2,v=g.y/2;return{tl:l({x:-p,y:-v},m),tr:l({x:p,y:-v},m),bl:l({x:-p,y:v},m),br:l({x:p,y:v},m)}},setCoords:function(u){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),u?this:(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords(),this)},_calcRotateMatrix:function(){return o.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var u=this.getCenterPoint();return[1,0,0,1,u.x,u.y]},transformMatrixKey:function(u){var f="_",m="";return!u&&this.group&&(m=this.group.transformMatrixKey(u)+f),m+this.top+f+this.left+f+this.scaleX+f+this.scaleY+f+this.skewX+f+this.skewY+f+this.angle+f+this.originX+f+this.originY+f+this.width+f+this.height+f+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(u){var f=this.calcOwnMatrix();if(u||!this.group)return f;var m=this.transformMatrixKey(u),g=this.matrixCache||(this.matrixCache={});return g.key===m?g.value:(this.group&&(f=h(this.group.calcTransformMatrix(!1),f)),g.key=m,g.value=f,f)},calcOwnMatrix:function(){var u=this.transformMatrixKey(!0),f=this.ownMatrixCache||(this.ownMatrixCache={});if(f.key===u)return f.value;var m=this._calcTranslateMatrix(),g={angle:this.angle,translateX:m[4],translateY:m[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return f.key=u,f.value=o.composeMatrix(g),f.value},_getNonTransformedDimensions:function(){var u=this.strokeWidth,f=this.width+u,m=this.height+u;return{x:f,y:m}},_getTransformedDimensions:function(u,f){typeof u>"u"&&(u=this.skewX),typeof f>"u"&&(f=this.skewY);var m,g,p,v=u===0&&f===0;if(this.strokeUniform?(g=this.width,p=this.height):(m=this._getNonTransformedDimensions(),g=m.x,p=m.y),v)return this._finalizeDimensions(g*this.scaleX,p*this.scaleY);var b=o.sizeAfterTransform(g,p,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:u,skewY:f});return this._finalizeDimensions(b.x,b.y)},_finalizeDimensions:function(u,f){return this.strokeUniform?{x:u+this.strokeWidth,y:f+this.strokeWidth}:{x:u,y:f}},_calculateCurrentDimensions:function(){var u=this.getViewportTransform(),f=this._getTransformedDimensions(),m=l(f,u,!0);return m.scalarAdd(2*this.padding)}})}(),e.util.object.extend(e.Object.prototype,{sendToBack:function(){return this.group?e.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?e.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(s){return this.group?e.StaticCanvas.prototype.sendBackwards.call(this.group,this,s):this.canvas&&this.canvas.sendBackwards(this,s),this},bringForward:function(s){return this.group?e.StaticCanvas.prototype.bringForward.call(this.group,this,s):this.canvas&&this.canvas.bringForward(this,s),this},moveTo:function(s){return this.group&&this.group.type!=="activeSelection"?e.StaticCanvas.prototype.moveTo.call(this.group,this,s):this.canvas&&this.canvas.moveTo(this,s),this}}),function(){function s(c,h){if(h){if(h.toLive)return c+": url(#SVGID_"+h.id+"); ";var l=new e.Color(h),u=c+": "+l.toRgb()+"; ",f=l.getAlpha();return f!==1&&(u+=c+"-opacity: "+f.toString()+"; "),u}else return c+": none; "}var o=e.util.toFixed;e.util.object.extend(e.Object.prototype,{getSvgStyles:function(c){var h=this.fillRule?this.fillRule:"nonzero",l=this.strokeWidth?this.strokeWidth:"0",u=this.strokeDashArray?this.strokeDashArray.join(" "):"none",f=this.strokeDashOffset?this.strokeDashOffset:"0",m=this.strokeLineCap?this.strokeLineCap:"butt",g=this.strokeLineJoin?this.strokeLineJoin:"miter",p=this.strokeMiterLimit?this.strokeMiterLimit:"4",v=typeof this.opacity<"u"?this.opacity:"1",b=this.visible?"":" visibility: hidden;",_=c?"":this.getSvgFilter(),S=s("fill",this.fill),w=s("stroke",this.stroke);return[w,"stroke-width: ",l,"; ","stroke-dasharray: ",u,"; ","stroke-linecap: ",m,"; ","stroke-dashoffset: ",f,"; ","stroke-linejoin: ",g,"; ","stroke-miterlimit: ",p,"; ",S,"fill-rule: ",h,"; ","opacity: ",v,";",_,b].join("")},getSvgSpanStyles:function(c,h){var l="; ",f=c.fontFamily?"font-family: "+(c.fontFamily.indexOf("'")===-1&&c.fontFamily.indexOf('"')===-1?"'"+c.fontFamily+"'":c.fontFamily)+l:"",u=c.strokeWidth?"stroke-width: "+c.strokeWidth+l:"",f=f,m=c.fontSize?"font-size: "+c.fontSize+"px"+l:"",g=c.fontStyle?"font-style: "+c.fontStyle+l:"",p=c.fontWeight?"font-weight: "+c.fontWeight+l:"",v=c.fill?s("fill",c.fill):"",b=c.stroke?s("stroke",c.stroke):"",_=this.getSvgTextDecoration(c),S=c.deltaY?"baseline-shift: "+-c.deltaY+"; ":"";return _&&(_="text-decoration: "+_+l),[b,u,f,m,g,p,_,v,S,h?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(c){return["overline","underline","line-through"].filter(function(h){return c[h.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(c,h){var l=c?this.calcTransformMatrix():this.calcOwnMatrix(),u='transform="'+e.util.matrixToSVG(l);return u+(h||"")+'" '},_setSVGBg:function(c){if(this.backgroundColor){var h=e.Object.NUM_FRACTION_DIGITS;c.push("		<rect ",this._getFillAttributes(this.backgroundColor),' x="',o(-this.width/2,h),'" y="',o(-this.height/2,h),'" width="',o(this.width,h),'" height="',o(this.height,h),`"></rect>
`)}},toSVG:function(c){return this._createBaseSVGMarkup(this._toSVG(c),{reviver:c})},toClipPathSVG:function(c){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(c),{reviver:c})},_createBaseClipPathSVGMarkup:function(c,h){h=h||{};var l=h.reviver,u=h.additionalTransform||"",f=[this.getSvgTransform(!0,u),this.getSvgCommons()].join(""),m=c.indexOf("COMMON_PARTS");return c[m]=f,l?l(c.join("")):c.join("")},_createBaseSVGMarkup:function(c,h){h=h||{};var l=h.noStyle,u=h.reviver,f=l?"":'style="'+this.getSvgStyles()+'" ',m=h.withShadow?'style="'+this.getSvgFilter()+'" ':"",g=this.clipPath,p=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",v=g&&g.absolutePositioned,b=this.stroke,_=this.fill,S=this.shadow,w,C=[],x,M=c.indexOf("COMMON_PARTS"),E=h.additionalTransform;return g&&(g.clipPathId="CLIPPATH_"+e.Object.__uid++,x='<clipPath id="'+g.clipPathId+`" >
`+g.toClipPathSVG(u)+`</clipPath>
`),v&&C.push("<g ",m,this.getSvgCommons(),` >
`),C.push("<g ",this.getSvgTransform(!1),v?"":m+this.getSvgCommons(),` >
`),w=[f,p,l?"":this.addPaintOrder()," ",E?'transform="'+E+'" ':""].join(""),c[M]=w,_&&_.toLive&&C.push(_.toSVG(this)),b&&b.toLive&&C.push(b.toSVG(this)),S&&C.push(S.toSVG(this)),g&&C.push(x),C.push(c.join("")),C.push(`</g>
`),v&&C.push(`</g>
`),u?u(C.join("")):C.join("")},addPaintOrder:function(){return this.paintFirst!=="fill"?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var s=e.util.object.extend,o="stateProperties";function c(l,u,f){var m={},g=!0;f.forEach(function(p){m[p]=l[p]}),s(l[u],m,g)}function h(l,u,f){if(l===u)return!0;if(Array.isArray(l)){if(!Array.isArray(u)||l.length!==u.length)return!1;for(var m=0,g=l.length;m<g;m++)if(!h(l[m],u[m]))return!1;return!0}else if(l&&typeof l=="object"){var p=Object.keys(l),v;if(!u||typeof u!="object"||!f&&p.length!==Object.keys(u).length)return!1;for(var m=0,g=p.length;m<g;m++)if(v=p[m],!(v==="canvas"||v==="group")&&!h(l[v],u[v]))return!1;return!0}}e.util.object.extend(e.Object.prototype,{hasStateChanged:function(l){l=l||o;var u="_"+l;return Object.keys(this[u]).length<this[l].length?!0:!h(this[u],this,!0)},saveState:function(l){var u=l&&l.propertySet||o,f="_"+u;return this[f]?(c(this,f,this[u]),l&&l.stateProperties&&c(this,f,l.stateProperties),this):this.setupState(l)},setupState:function(l){l=l||{};var u=l.propertySet||o;return l.propertySet=u,this["_"+u]={},this.saveState(l),this}})}(),function(){var s=e.util.degreesToRadians;e.util.object.extend(e.Object.prototype,{_findTargetCorner:function(o,c){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var h=o.x,l=o.y,u,f,m=Object.keys(this.oCoords),g=m.length-1,p;for(this.__corner=0;g>=0;g--)if(p=m[g],!!this.isControlVisible(p)&&(f=this._getImageLines(c?this.oCoords[p].touchCorner:this.oCoords[p].corner),u=this._findCrossPoints({x:h,y:l},f),u!==0&&u%2===1))return this.__corner=p,p;return!1},forEachControl:function(o){for(var c in this.controls)o(this.controls[c],c,this)},_setCornerCoords:function(){var o=this.oCoords;for(var c in o){var h=this.controls[c];o[c].corner=h.calcCornerCoords(this.angle,this.cornerSize,o[c].x,o[c].y,!1),o[c].touchCorner=h.calcCornerCoords(this.angle,this.touchCornerSize,o[c].x,o[c].y,!0)}},drawSelectionBackground:function(o){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;o.save();var c=this.getCenterPoint(),h=this._calculateCurrentDimensions(),l=this.canvas.viewportTransform;return o.translate(c.x,c.y),o.scale(1/l[0],1/l[3]),o.rotate(s(this.angle)),o.fillStyle=this.selectionBackgroundColor,o.fillRect(-h.x/2,-h.y/2,h.x,h.y),o.restore(),this},drawBorders:function(o,c){c=c||{};var h=this._calculateCurrentDimensions(),l=this.borderScaleFactor,u=h.x+l,f=h.y+l,m=typeof c.hasControls<"u"?c.hasControls:this.hasControls,g=!1;return o.save(),o.strokeStyle=c.borderColor||this.borderColor,this._setLineDash(o,c.borderDashArray||this.borderDashArray),o.strokeRect(-u/2,-f/2,u,f),m&&(o.beginPath(),this.forEachControl(function(p,v,b){p.withConnection&&p.getVisibility(b,v)&&(g=!0,o.moveTo(p.x*u,p.y*f),o.lineTo(p.x*u+p.offsetX,p.y*f+p.offsetY))}),g&&o.stroke()),o.restore(),this},drawBordersInGroup:function(o,c,h){h=h||{};var l=e.util.sizeAfterTransform(this.width,this.height,c),u=this.strokeWidth,f=this.strokeUniform,m=this.borderScaleFactor,g=l.x+u*(f?this.canvas.getZoom():c.scaleX)+m,p=l.y+u*(f?this.canvas.getZoom():c.scaleY)+m;return o.save(),this._setLineDash(o,h.borderDashArray||this.borderDashArray),o.strokeStyle=h.borderColor||this.borderColor,o.strokeRect(-g/2,-p/2,g,p),o.restore(),this},drawControls:function(o,c){c=c||{},o.save();var h=this.canvas.getRetinaScaling(),l,u;return o.setTransform(h,0,0,h,0,0),o.strokeStyle=o.fillStyle=c.cornerColor||this.cornerColor,this.transparentCorners||(o.strokeStyle=c.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(o,c.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(l=this.group.calcTransformMatrix()),this.forEachControl(function(f,m,g){u=g.oCoords[m],f.getVisibility(g,m)&&(l&&(u=e.util.transformPoint(u,l)),f.render(o,u.x,u.y,c,g))}),o.restore(),this},isControlVisible:function(o){return this.controls[o]&&this.controls[o].getVisibility(this,o)},setControlVisible:function(o,c){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[o]=c,this},setControlsVisibility:function(o){o||(o={});for(var c in o)this.setControlVisible(c,o[c]);return this},onDeselect:function(){},onSelect:function(){}})}(),e.util.object.extend(e.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(s,o){o=o||{};var c=function(){},h=o.onComplete||c,l=o.onChange||c,u=this;return e.util.animate({target:this,startValue:s.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(f){s.set("left",f),u.requestRenderAll(),l()},onComplete:function(){s.setCoords(),h()}})},fxCenterObjectV:function(s,o){o=o||{};var c=function(){},h=o.onComplete||c,l=o.onChange||c,u=this;return e.util.animate({target:this,startValue:s.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(f){s.set("top",f),u.requestRenderAll(),l()},onComplete:function(){s.setCoords(),h()}})},fxRemove:function(s,o){o=o||{};var c=function(){},h=o.onComplete||c,l=o.onChange||c,u=this;return e.util.animate({target:this,startValue:s.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(f){s.set("opacity",f),u.requestRenderAll(),l()},onComplete:function(){u.remove(s),h()}})}}),e.util.object.extend(e.Object.prototype,{animate:function(){if(arguments[0]&&typeof arguments[0]=="object"){var s=[],o,c,h=[];for(o in arguments[0])s.push(o);for(var l=0,u=s.length;l<u;l++)o=s[l],c=l!==u-1,h.push(this._animate(o,arguments[0][o],arguments[1],c));return h}else return this._animate.apply(this,arguments)},_animate:function(s,o,c,h){var l=this,u;o=o.toString(),c?c=e.util.object.clone(c):c={},~s.indexOf(".")&&(u=s.split("."));var f=l.colorProperties.indexOf(s)>-1||u&&l.colorProperties.indexOf(u[1])>-1,m=u?this.get(u[0])[u[1]]:this.get(s);"from"in c||(c.from=m),f||(~o.indexOf("=")?o=m+parseFloat(o.replace("=","")):o=parseFloat(o));var g={target:this,startValue:c.from,endValue:o,byValue:c.by,easing:c.easing,duration:c.duration,abort:c.abort&&function(p,v,b){return c.abort.call(l,p,v,b)},onChange:function(p,v,b){u?l[u[0]][u[1]]=p:l.set(s,p),!h&&c.onChange&&c.onChange(p,v,b)},onComplete:function(p,v,b){h||(l.setCoords(),c.onComplete&&c.onComplete(p,v,b))}};return f?e.util.animateColor(g.startValue,g.endValue,g.duration,g):e.util.animate(g)}}),function(s){var o=s.fabric||(s.fabric={}),c=o.util.object.extend,h=o.util.object.clone,l={x1:1,x2:1,y1:1,y2:1};if(o.Line){o.warn("fabric.Line is already defined");return}o.Line=o.util.createClass(o.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:o.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(f,m){f||(f=[0,0,0,0]),this.callSuper("initialize",m),this.set("x1",f[0]),this.set("y1",f[1]),this.set("x2",f[2]),this.set("y2",f[3]),this._setWidthHeight(m)},_setWidthHeight:function(f){f||(f={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in f?f.left:this._getLeftToOriginX(),this.top="top"in f?f.top:this._getTopToOriginY()},_set:function(f,m){return this.callSuper("_set",f,m),typeof l[f]<"u"&&this._setWidthHeight(),this},_getLeftToOriginX:u({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:u({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(f){f.beginPath();var m=this.calcLinePoints();f.moveTo(m.x1,m.y1),f.lineTo(m.x2,m.y2),f.lineWidth=this.strokeWidth;var g=f.strokeStyle;f.strokeStyle=this.stroke||f.fillStyle,this.stroke&&this._renderStroke(f),f.strokeStyle=g},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(f){return c(this.callSuper("toObject",f),this.calcLinePoints())},_getNonTransformedDimensions:function(){var f=this.callSuper("_getNonTransformedDimensions");return this.strokeLineCap==="butt"&&(this.width===0&&(f.y-=this.strokeWidth),this.height===0&&(f.x-=this.strokeWidth)),f},calcLinePoints:function(){var f=this.x1<=this.x2?-1:1,m=this.y1<=this.y2?-1:1,g=f*this.width*.5,p=m*this.height*.5,v=f*this.width*-.5,b=m*this.height*-.5;return{x1:g,x2:v,y1:p,y2:b}},_toSVG:function(){var f=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',f.x1,'" y1="',f.y1,'" x2="',f.x2,'" y2="',f.y2,`" />
`]}}),o.Line.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),o.Line.fromElement=function(f,m,g){g=g||{};var p=o.parseAttributes(f,o.Line.ATTRIBUTE_NAMES),v=[p.x1||0,p.y1||0,p.x2||0,p.y2||0];m(new o.Line(v,c(p,g)))},o.Line.fromObject=function(f,m){function g(v){delete v.points,m&&m(v)}var p=h(f,!0);p.points=[f.x1,f.y1,f.x2,f.y2],o.Object._fromObject("Line",p,g,"points")};function u(f,m){var g=f.origin,p=f.axis1,v=f.axis2,b=f.dimension,_=m.nearest,S=m.center,w=m.farthest;return function(){switch(this.get(g)){case _:return Math.min(this.get(p),this.get(v));case S:return Math.min(this.get(p),this.get(v))+.5*this.get(b);case w:return Math.max(this.get(p),this.get(v))}}}}(t),function(s){var o=s.fabric||(s.fabric={}),c=o.util.degreesToRadians;if(o.Circle){o.warn("fabric.Circle is already defined.");return}o.Circle=o.util.createClass(o.Object,{type:"circle",radius:0,startAngle:0,endAngle:360,cacheProperties:o.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(l,u){return this.callSuper("_set",l,u),l==="radius"&&this.setRadius(u),this},toObject:function(l){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(l))},_toSVG:function(){var l,u=0,f=0,m=(this.endAngle-this.startAngle)%360;if(m===0)l=["<circle ","COMMON_PARTS",'cx="'+u+'" cy="'+f+'" ','r="',this.radius,`" />
`];else{var g=c(this.startAngle),p=c(this.endAngle),v=this.radius,b=o.util.cos(g)*v,_=o.util.sin(g)*v,S=o.util.cos(p)*v,w=o.util.sin(p)*v,C=m>180?"1":"0";l=['<path d="M '+b+" "+_," A "+v+" "+v," 0 ",+C+" 1"," "+S+" "+w,'" ',"COMMON_PARTS",` />
`]}return l},_render:function(l){l.beginPath(),l.arc(0,0,this.radius,c(this.startAngle),c(this.endAngle),!1),this._renderPaintInOrder(l)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(l){return this.radius=l,this.set("width",l*2).set("height",l*2)}}),o.Circle.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),o.Circle.fromElement=function(l,u){var f=o.parseAttributes(l,o.Circle.ATTRIBUTE_NAMES);if(!h(f))throw new Error("value of `r` attribute is required and can not be negative");f.left=(f.left||0)-f.radius,f.top=(f.top||0)-f.radius,u(new o.Circle(f))};function h(l){return"radius"in l&&l.radius>=0}o.Circle.fromObject=function(l,u){o.Object._fromObject("Circle",l,u)}}(t),function(s){var o=s.fabric||(s.fabric={});if(o.Triangle){o.warn("fabric.Triangle is already defined");return}o.Triangle=o.util.createClass(o.Object,{type:"triangle",width:100,height:100,_render:function(c){var h=this.width/2,l=this.height/2;c.beginPath(),c.moveTo(-h,l),c.lineTo(0,-l),c.lineTo(h,l),c.closePath(),this._renderPaintInOrder(c)},_toSVG:function(){var c=this.width/2,h=this.height/2,l=[-c+" "+h,"0 "+-h,c+" "+h].join(",");return["<polygon ","COMMON_PARTS",'points="',l,'" />']}}),o.Triangle.fromObject=function(c,h){return o.Object._fromObject("Triangle",c,h)}}(t),function(s){var o=s.fabric||(s.fabric={}),c=Math.PI*2;if(o.Ellipse){o.warn("fabric.Ellipse is already defined.");return}o.Ellipse=o.util.createClass(o.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:o.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(h){this.callSuper("initialize",h),this.set("rx",h&&h.rx||0),this.set("ry",h&&h.ry||0)},_set:function(h,l){switch(this.callSuper("_set",h,l),h){case"rx":this.rx=l,this.set("width",l*2);break;case"ry":this.ry=l,this.set("height",l*2);break}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(h){return this.callSuper("toObject",["rx","ry"].concat(h))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,`" />
`]},_render:function(h){h.beginPath(),h.save(),h.transform(1,0,0,this.ry/this.rx,0,0),h.arc(0,0,this.rx,0,c,!1),h.restore(),this._renderPaintInOrder(h)}}),o.Ellipse.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),o.Ellipse.fromElement=function(h,l){var u=o.parseAttributes(h,o.Ellipse.ATTRIBUTE_NAMES);u.left=(u.left||0)-u.rx,u.top=(u.top||0)-u.ry,l(new o.Ellipse(u))},o.Ellipse.fromObject=function(h,l){o.Object._fromObject("Ellipse",h,l)}}(t),function(s){var o=s.fabric||(s.fabric={}),c=o.util.object.extend;if(o.Rect){o.warn("fabric.Rect is already defined");return}o.Rect=o.util.createClass(o.Object,{stateProperties:o.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:o.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(h){this.callSuper("initialize",h),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(h){var l=this.rx?Math.min(this.rx,this.width/2):0,u=this.ry?Math.min(this.ry,this.height/2):0,f=this.width,m=this.height,g=-this.width/2,p=-this.height/2,v=l!==0||u!==0,b=1-.5522847498;h.beginPath(),h.moveTo(g+l,p),h.lineTo(g+f-l,p),v&&h.bezierCurveTo(g+f-b*l,p,g+f,p+b*u,g+f,p+u),h.lineTo(g+f,p+m-u),v&&h.bezierCurveTo(g+f,p+m-b*u,g+f-b*l,p+m,g+f-l,p+m),h.lineTo(g+l,p+m),v&&h.bezierCurveTo(g+b*l,p+m,g,p+m-b*u,g,p+m-u),h.lineTo(g,p+u),v&&h.bezierCurveTo(g,p+b*u,g+b*l,p,g+l,p),h.closePath(),this._renderPaintInOrder(h)},toObject:function(h){return this.callSuper("toObject",["rx","ry"].concat(h))},_toSVG:function(){var h=-this.width/2,l=-this.height/2;return["<rect ","COMMON_PARTS",'x="',h,'" y="',l,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,`" />
`]}}),o.Rect.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),o.Rect.fromElement=function(h,l,u){if(!h)return l(null);u=u||{};var f=o.parseAttributes(h,o.Rect.ATTRIBUTE_NAMES);f.left=f.left||0,f.top=f.top||0,f.height=f.height||0,f.width=f.width||0;var m=new o.Rect(c(u?o.util.object.clone(u):{},f));m.visible=m.visible&&m.width>0&&m.height>0,l(m)},o.Rect.fromObject=function(h,l){return o.Object._fromObject("Rect",h,l)}}(t),function(s){var o=s.fabric||(s.fabric={}),c=o.util.object.extend,h=o.util.array.min,l=o.util.array.max,u=o.util.toFixed,f=o.util.projectStrokeOnPoints;if(o.Polyline){o.warn("fabric.Polyline is already defined");return}o.Polyline=o.util.createClass(o.Object,{type:"polyline",points:null,exactBoundingBox:!1,cacheProperties:o.Object.prototype.cacheProperties.concat("points"),initialize:function(m,g){g=g||{},this.points=m||[],this.callSuper("initialize",g),this._setPositionDimensions(g)},_projectStrokeOnPoints:function(){return f(this.points,this,!0)},_setPositionDimensions:function(m){var g=this._calcDimensions(m),p,v=this.exactBoundingBox?this.strokeWidth:0;this.width=g.width-v,this.height=g.height-v,m.fromSVG||(p=this.translateToGivenOrigin({x:g.left-this.strokeWidth/2+v/2,y:g.top-this.strokeWidth/2+v/2},"left","top",this.originX,this.originY)),typeof m.left>"u"&&(this.left=m.fromSVG?g.left:p.x),typeof m.top>"u"&&(this.top=m.fromSVG?g.top:p.y),this.pathOffset={x:g.left+this.width/2+v/2,y:g.top+this.height/2+v/2}},_calcDimensions:function(){var m=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,g=h(m,"x")||0,p=h(m,"y")||0,v=l(m,"x")||0,b=l(m,"y")||0,_=v-g,S=b-p;return{left:g,top:p,width:_,height:S}},toObject:function(m){return c(this.callSuper("toObject",m),{points:this.points.concat()})},_toSVG:function(){for(var m=[],g=this.pathOffset.x,p=this.pathOffset.y,v=o.Object.NUM_FRACTION_DIGITS,b=0,_=this.points.length;b<_;b++)m.push(u(this.points[b].x-g,v),",",u(this.points[b].y-p,v)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',m.join(""),`" />
`]},commonRender:function(m){var g,p=this.points.length,v=this.pathOffset.x,b=this.pathOffset.y;if(!p||isNaN(this.points[p-1].y))return!1;m.beginPath(),m.moveTo(this.points[0].x-v,this.points[0].y-b);for(var _=0;_<p;_++)g=this.points[_],m.lineTo(g.x-v,g.y-b);return!0},_render:function(m){this.commonRender(m)&&this._renderPaintInOrder(m)},complexity:function(){return this.get("points").length}}),o.Polyline.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat(),o.Polyline.fromElementGenerator=function(m){return function(g,p,v){if(!g)return p(null);v||(v={});var b=o.parsePointsAttribute(g.getAttribute("points")),_=o.parseAttributes(g,o[m].ATTRIBUTE_NAMES);_.fromSVG=!0,p(new o[m](b,c(_,v)))}},o.Polyline.fromElement=o.Polyline.fromElementGenerator("Polyline"),o.Polyline.fromObject=function(m,g){return o.Object._fromObject("Polyline",m,g,"points")}}(t),function(s){var o=s.fabric||(s.fabric={}),c=o.util.projectStrokeOnPoints;if(o.Polygon){o.warn("fabric.Polygon is already defined");return}o.Polygon=o.util.createClass(o.Polyline,{type:"polygon",_projectStrokeOnPoints:function(){return c(this.points,this)},_render:function(h){this.commonRender(h)&&(h.closePath(),this._renderPaintInOrder(h))}}),o.Polygon.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat(),o.Polygon.fromElement=o.Polyline.fromElementGenerator("Polygon"),o.Polygon.fromObject=function(h,l){o.Object._fromObject("Polygon",h,l,"points")}}(t),function(s){var o=s.fabric||(s.fabric={}),c=o.util.array.min,h=o.util.array.max,l=o.util.object.extend,u=o.util.object.clone,f=o.util.toFixed;if(o.Path){o.warn("fabric.Path is already defined");return}o.Path=o.util.createClass(o.Object,{type:"path",path:null,cacheProperties:o.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:o.Object.prototype.stateProperties.concat("path"),initialize:function(m,g){g=u(g||{}),delete g.path,this.callSuper("initialize",g),this._setPath(m||[],g)},_setPath:function(m,g){this.path=o.util.makePathSimpler(Array.isArray(m)?m:o.util.parsePath(m)),o.Polyline.prototype._setPositionDimensions.call(this,g||{})},_renderPathCommands:function(m){var g,p=0,v=0,b=0,_=0,S=0,w=0,C=-this.pathOffset.x,x=-this.pathOffset.y;m.beginPath();for(var M=0,E=this.path.length;M<E;++M)switch(g=this.path[M],g[0]){case"L":b=g[1],_=g[2],m.lineTo(b+C,_+x);break;case"M":b=g[1],_=g[2],p=b,v=_,m.moveTo(b+C,_+x);break;case"C":b=g[5],_=g[6],S=g[3],w=g[4],m.bezierCurveTo(g[1]+C,g[2]+x,S+C,w+x,b+C,_+x);break;case"Q":m.quadraticCurveTo(g[1]+C,g[2]+x,g[3]+C,g[4]+x),b=g[3],_=g[4],S=g[1],w=g[2];break;case"z":case"Z":b=p,_=v,m.closePath();break}},_render:function(m){this._renderPathCommands(m),this._renderPaintInOrder(m)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(m){return l(this.callSuper("toObject",m),{path:this.path.map(function(g){return g.slice()})})},toDatalessObject:function(m){var g=this.toObject(["sourcePath"].concat(m));return g.sourcePath&&delete g.path,g},_toSVG:function(){var m=o.util.joinPath(this.path);return["<path ","COMMON_PARTS",'d="',m,'" stroke-linecap="round" ',`/>
`]},_getOffsetTransform:function(){var m=o.Object.NUM_FRACTION_DIGITS;return" translate("+f(-this.pathOffset.x,m)+", "+f(-this.pathOffset.y,m)+")"},toClipPathSVG:function(m){var g=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:m,additionalTransform:g})},toSVG:function(m){var g=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:m,additionalTransform:g})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var m=[],g=[],p,v=0,b=0,_=0,S=0,w,C=0,x=this.path.length;C<x;++C){switch(p=this.path[C],p[0]){case"L":_=p[1],S=p[2],w=[];break;case"M":_=p[1],S=p[2],v=_,b=S,w=[];break;case"C":w=o.util.getBoundsOfCurve(_,S,p[1],p[2],p[3],p[4],p[5],p[6]),_=p[5],S=p[6];break;case"Q":w=o.util.getBoundsOfCurve(_,S,p[1],p[2],p[1],p[2],p[3],p[4]),_=p[3],S=p[4];break;case"z":case"Z":_=v,S=b;break}w.forEach(function(U){m.push(U.x),g.push(U.y)}),m.push(_),g.push(S)}var M=c(m)||0,E=c(g)||0,A=h(m)||0,O=h(g)||0,D=A-M,L=O-E;return{left:M,top:E,width:D,height:L}}}),o.Path.fromObject=function(m,g){if(typeof m.sourcePath=="string"){var p=m.sourcePath;o.loadSVGFromURL(p,function(v){var b=v[0];b.setOptions(m),m.clipPath?o.util.enlivenObjects([m.clipPath],function(_){b.clipPath=_[0],g&&g(b)}):g&&g(b)})}else o.Object._fromObject("Path",m,g,"path")},o.Path.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat(["d"]),o.Path.fromElement=function(m,g,p){var v=o.parseAttributes(m,o.Path.ATTRIBUTE_NAMES);v.fromSVG=!0,g(new o.Path(v.d,l(v,p)))}}(t),function(s){var o=s.fabric||(s.fabric={}),c=o.util.array.min,h=o.util.array.max;o.Group||(o.Group=o.util.createClass(o.Object,o.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(l,u,f){u=u||{},this._objects=[],f&&this.callSuper("initialize",u),this._objects=l||[];for(var m=this._objects.length;m--;)this._objects[m].group=this;if(f)this._updateObjectsACoords();else{var g=u&&u.centerPoint;u.originX!==void 0&&(this.originX=u.originX),u.originY!==void 0&&(this.originY=u.originY),g||this._calcBounds(),this._updateObjectsCoords(g),delete u.centerPoint,this.callSuper("initialize",u)}this.setCoords()},_updateObjectsACoords:function(){for(var l=!0,u=this._objects.length;u--;)this._objects[u].setCoords(l)},_updateObjectsCoords:function(u){for(var u=u||this.getCenterPoint(),f=this._objects.length;f--;)this._updateObjectCoords(this._objects[f],u)},_updateObjectCoords:function(l,u){var f=l.left,m=l.top,g=!0;l.set({left:f-u.x,top:m-u.y}),l.group=this,l.setCoords(g)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(l){var u=!!this.group;return this._restoreObjectsState(),o.util.resetObjectTransform(this),l&&(u&&o.util.removeTransformFromObject(l,this.group.calcTransformMatrix()),this._objects.push(l),l.group=this,l._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,u?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(l){return this._restoreObjectsState(),o.util.resetObjectTransform(this),this.remove(l),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(l){this.dirty=!0,l.group=this,l._set("canvas",this.canvas)},_onObjectRemoved:function(l){this.dirty=!0,delete l.group},_set:function(l,u){var f=this._objects.length;if(this.useSetOnGroup)for(;f--;)this._objects[f].setOnGroup(l,u);if(l==="canvas")for(;f--;)this._objects[f]._set(l,u);o.Object.prototype._set.call(this,l,u)},toObject:function(l){var u=this.includeDefaultValues,f=this._objects.filter(function(g){return!g.excludeFromExport}).map(function(g){var p=g.includeDefaultValues;g.includeDefaultValues=u;var v=g.toObject(l);return g.includeDefaultValues=p,v}),m=o.Object.prototype.toObject.call(this,l);return m.objects=f,m},toDatalessObject:function(l){var u,f=this.sourcePath;if(f)u=f;else{var m=this.includeDefaultValues;u=this._objects.map(function(p){var v=p.includeDefaultValues;p.includeDefaultValues=m;var b=p.toDatalessObject(l);return p.includeDefaultValues=v,b})}var g=o.Object.prototype.toDatalessObject.call(this,l);return g.objects=u,g},render:function(l){this._transformDone=!0,this.callSuper("render",l),this._transformDone=!1},shouldCache:function(){var l=o.Object.prototype.shouldCache.call(this);if(l){for(var u=0,f=this._objects.length;u<f;u++)if(this._objects[u].willDrawShadow())return this.ownCaching=!1,!1}return l},willDrawShadow:function(){if(o.Object.prototype.willDrawShadow.call(this))return!0;for(var l=0,u=this._objects.length;l<u;l++)if(this._objects[l].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(l){for(var u=0,f=this._objects.length;u<f;u++)this._objects[u].render(l);this._drawClipPath(l,this.clipPath)},isCacheDirty:function(l){if(this.callSuper("isCacheDirty",l))return!0;if(!this.statefullCache)return!1;for(var u=0,f=this._objects.length;u<f;u++)if(this._objects[u].isCacheDirty(!0)){if(this._cacheCanvas){var m=this.cacheWidth/this.zoomX,g=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-m/2,-g/2,m,g)}return!0}return!1},_restoreObjectsState:function(){var l=this.calcOwnMatrix();return this._objects.forEach(function(u){o.util.addTransformToObject(u,l),delete u.group,u.setCoords()}),this},destroy:function(){return this._objects.forEach(function(l){l.set("dirty",!0)}),this._restoreObjectsState()},dispose:function(){this.callSuper("dispose"),this.forEachObject(function(l){l.dispose&&l.dispose()}),this._objects=[]},toActiveSelection:function(){if(this.canvas){var l=this._objects,u=this.canvas;this._objects=[];var f=this.toObject();delete f.objects;var m=new o.ActiveSelection([]);return m.set(f),m.type="activeSelection",u.remove(this),l.forEach(function(g){g.group=m,g.dirty=!0,u.add(g)}),m.canvas=u,m._objects=l,u._activeObject=m,m.setCoords(),m}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){var l=!0;return this.forEachObject(function(u){u.setCoords(l)}),this},_calcBounds:function(l){for(var u=[],f=[],m,g,p,v=["tr","br","bl","tl"],b=0,_=this._objects.length,S,w=v.length;b<_;++b){for(m=this._objects[b],p=m.calcACoords(),S=0;S<w;S++)g=v[S],u.push(p[g].x),f.push(p[g].y);m.aCoords=p}this._getBounds(u,f,l)},_getBounds:function(l,u,f){var m=new o.Point(c(l),c(u)),g=new o.Point(h(l),h(u)),p=m.y||0,v=m.x||0,b=g.x-m.x||0,_=g.y-m.y||0;this.width=b,this.height=_,f||this.setPositionByOrigin({x:v,y:p},"left","top")},_toSVG:function(l){for(var u=["<g ","COMMON_PARTS",` >
`],f=0,m=this._objects.length;f<m;f++)u.push("		",this._objects[f].toSVG(l));return u.push(`</g>
`),u},getSvgStyles:function(){var l=typeof this.opacity<"u"&&this.opacity!==1?"opacity: "+this.opacity+";":"",u=this.visible?"":" visibility: hidden;";return[l,this.getSvgFilter(),u].join("")},toClipPathSVG:function(l){for(var u=[],f=0,m=this._objects.length;f<m;f++)u.push("	",this._objects[f].toClipPathSVG(l));return this._createBaseClipPathSVGMarkup(u,{reviver:l})}}),o.Group.fromObject=function(l,u){var f=l.objects,m=o.util.object.clone(l,!0);if(delete m.objects,typeof f=="string"){o.loadSVGFromURL(f,function(g){var p=o.util.groupSVGElements(g,l,f),v=m.clipPath;delete m.clipPath,p.set(m),v?o.util.enlivenObjects([v],function(b){p.clipPath=b[0],u&&u(p)}):u&&u(p)});return}o.util.enlivenObjects(f,function(g){o.util.enlivenObjectEnlivables(l,m,function(){u&&u(new o.Group(g,m,!0))})})})}(t),function(s){var o=s.fabric||(s.fabric={});o.ActiveSelection||(o.ActiveSelection=o.util.createClass(o.Group,{type:"activeSelection",initialize:function(c,h){h=h||{},this._objects=c||[];for(var l=this._objects.length;l--;)this._objects[l].group=this;h.originX&&(this.originX=h.originX),h.originY&&(this.originY=h.originY),this._calcBounds(),this._updateObjectsCoords(),o.Object.prototype.initialize.call(this,h),this.setCoords()},toGroup:function(){var c=this._objects.concat();this._objects=[];var h=o.Object.prototype.toObject.call(this),l=new o.Group([]);if(delete h.type,l.set(h),c.forEach(function(f){f.canvas.remove(f),f.group=l}),l._objects=c,!this.canvas)return l;var u=this.canvas;return u.add(l),u._activeObject=l,l.setCoords(),l},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(c,h,l){c.save(),c.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",c,h),l=l||{},typeof l.hasControls>"u"&&(l.hasControls=!1),l.forActiveSelection=!0;for(var u=0,f=this._objects.length;u<f;u++)this._objects[u]._renderControls(c,l);c.restore()}}),o.ActiveSelection.fromObject=function(c,h){o.util.enlivenObjects(c.objects,function(l){delete c.objects,h&&h(new o.ActiveSelection(l,c,!0))})})}(t),function(s){var o=e.util.object.extend;if(s.fabric||(s.fabric={}),s.fabric.Image){e.warn("fabric.Image is already defined.");return}e.Image=e.util.createClass(e.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:e.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:e.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(c,h){h||(h={}),this.filters=[],this.cacheKey="texture"+e.Object.__uid++,this.callSuper("initialize",h),this._initElement(c,h)},getElement:function(){return this._element||{}},setElement:function(c,h){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=c,this._originalElement=c,this._initConfig(h),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(c){var h=e.filterBackend;h&&h.evictCachesForKey&&h.evictCachesForKey(c)},dispose:function(){this.callSuper("dispose"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach((function(c){e.util.cleanUpJsdomNode(this[c]),this[c]=void 0}).bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var c=this.getElement();return{width:c.naturalWidth||c.width,height:c.naturalHeight||c.height}},_stroke:function(c){if(!(!this.stroke||this.strokeWidth===0)){var h=this.width/2,l=this.height/2;c.beginPath(),c.moveTo(-h,-l),c.lineTo(h,-l),c.lineTo(h,l),c.lineTo(-h,l),c.lineTo(-h,-l),c.closePath()}},toObject:function(c){var h=[];this.filters.forEach(function(u){u&&h.push(u.toObject())});var l=o(this.callSuper("toObject",["cropX","cropY"].concat(c)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:h});return this.resizeFilter&&(l.resizeFilter=this.resizeFilter.toObject()),l},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var c=[],h=[],l,u=this._element,f=-this.width/2,m=-this.height/2,g="",p="";if(!u)return[];if(this.hasCrop()){var v=e.Object.__uid++;c.push('<clipPath id="imageCrop_'+v+`">
`,'	<rect x="'+f+'" y="'+m+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),g=' clip-path="url(#imageCrop_'+v+')" '}if(this.imageSmoothing||(p='" image-rendering="optimizeSpeed'),h.push("	<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',f-this.cropX,'" y="',m-this.cropY,'" width="',u.width||u.naturalWidth,'" height="',u.height||u.height,p,'"',g,`></image>
`),this.stroke||this.strokeDashArray){var b=this.fill;this.fill=null,l=["	<rect ",'x="',f,'" y="',m,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),`"/>
`],this.fill=b}return this.paintFirst!=="fill"?c=c.concat(l,h):c=c.concat(h,l),c},getSrc:function(c){var h=c?this._element:this._originalElement;return h?h.toDataURL?h.toDataURL():this.srcFromAttribute?h.getAttribute("src"):h.src:this.src||""},setSrc:function(c,h,l){return e.util.loadImage(c,function(u,f){this.setElement(u,l),this._setWidthHeight(),h&&h(this,f)},this,l&&l.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var c=this.resizeFilter,h=this.minimumScaleTrigger,l=this.getTotalObjectScaling(),u=l.scaleX,f=l.scaleY,m=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!c||u>h&&f>h){this._element=m,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=u,this._lastScaleY=f;return}e.filterBackend||(e.filterBackend=e.initFilterBackend());var g=e.util.createCanvasElement(),p=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,v=m.width,b=m.height;g.width=v,g.height=b,this._element=g,this._lastScaleX=c.scaleX=u,this._lastScaleY=c.scaleY=f,e.filterBackend.applyFilters([c],m,v,b,this._element,p),this._filterScalingX=g.width/this._originalElement.width,this._filterScalingY=g.height/this._originalElement.height},applyFilters:function(c){if(c=c||this.filters||[],c=c.filter(function(m){return m&&!m.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),c.length===0)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var h=this._originalElement,l=h.naturalWidth||h.width,u=h.naturalHeight||h.height;if(this._element===this._originalElement){var f=e.util.createCanvasElement();f.width=l,f.height=u,this._element=f,this._filteredEl=f}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,l,u),this._lastScaleX=1,this._lastScaleY=1;return e.filterBackend||(e.filterBackend=e.initFilterBackend()),e.filterBackend.applyFilters(c,this._originalElement,l,u,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(c){e.util.setImageSmoothing(c,this.imageSmoothing),this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(c),this._renderPaintInOrder(c)},drawCacheOnCanvas:function(c){e.util.setImageSmoothing(c,this.imageSmoothing),e.Object.prototype.drawCacheOnCanvas.call(this,c)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(c){var h=this._element;if(h){var l=this._filterScalingX,u=this._filterScalingY,f=this.width,m=this.height,g=Math.min,p=Math.max,v=p(this.cropX,0),b=p(this.cropY,0),_=h.naturalWidth||h.width,S=h.naturalHeight||h.height,w=v*l,C=b*u,x=g(f*l,_-w),M=g(m*u,S-C),E=-f/2,A=-m/2,O=g(f,_/l-v),D=g(m,S/u-b);h&&c.drawImage(h,w,C,x,M,E,A,O,D)}},_needsResize:function(){var c=this.getTotalObjectScaling();return c.scaleX!==this._lastScaleX||c.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(c,h){this.setElement(e.util.getById(c),h),e.util.addClass(this.getElement(),e.Image.CSS_CANVAS)},_initConfig:function(c){c||(c={}),this.setOptions(c),this._setWidthHeight(c)},_initFilters:function(c,h){c&&c.length?e.util.enlivenObjects(c,function(l){h&&h(l)},"fabric.Image.filters"):h&&h()},_setWidthHeight:function(c){c||(c={});var h=this.getElement();this.width=c.width||h.naturalWidth||h.width||0,this.height=c.height||h.naturalHeight||h.height||0},parsePreserveAspectRatioAttribute:function(){var c=e.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),h=this._element.width,l=this._element.height,u=1,f=1,m=0,g=0,p=0,v=0,b,_=this.width,S=this.height,w={width:_,height:S};return c&&(c.alignX!=="none"||c.alignY!=="none")?(c.meetOrSlice==="meet"&&(u=f=e.util.findScaleToFit(this._element,w),b=(_-h*u)/2,c.alignX==="Min"&&(m=-b),c.alignX==="Max"&&(m=b),b=(S-l*f)/2,c.alignY==="Min"&&(g=-b),c.alignY==="Max"&&(g=b)),c.meetOrSlice==="slice"&&(u=f=e.util.findScaleToCover(this._element,w),b=h-_/u,c.alignX==="Mid"&&(p=b/2),c.alignX==="Max"&&(p=b),b=l-S/f,c.alignY==="Mid"&&(v=b/2),c.alignY==="Max"&&(v=b),h=_/u,l=S/f)):(u=_/h,f=S/l),{width:h,height:l,scaleX:u,scaleY:f,offsetLeft:m,offsetTop:g,cropX:p,cropY:v}}}),e.Image.CSS_CANVAS="canvas-img",e.Image.prototype.getSvgSrc=e.Image.prototype.getSrc,e.Image.fromObject=function(c,h){var l=e.util.object.clone(c);e.util.loadImage(l.src,function(u,f){if(f){h&&h(null,!0);return}e.Image.prototype._initFilters.call(l,l.filters,function(m){l.filters=m||[],e.Image.prototype._initFilters.call(l,[l.resizeFilter],function(g){l.resizeFilter=g[0],e.util.enlivenObjectEnlivables(l,l,function(){var p=new e.Image(u,l);h(p,!1)})})})},null,l.crossOrigin)},e.Image.fromURL=function(c,h,l){e.util.loadImage(c,function(u,f){h&&h(new e.Image(u,l),f)},null,l&&l.crossOrigin)},e.Image.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),e.Image.fromElement=function(c,h,l){var u=e.parseAttributes(c,e.Image.ATTRIBUTE_NAMES);e.Image.fromURL(u["xlink:href"],h,o(l?e.util.object.clone(l):{},u))}}(t),e.util.object.extend(e.Object.prototype,{_getAngleValueForStraighten:function(){var s=this.angle%360;return s>0?Math.round((s-1)/90)*90:Math.round(s/90)*90},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(s){s=s||{};var o=function(){},c=s.onComplete||o,h=s.onChange||o,l=this;return e.util.animate({target:this,startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(u){l.rotate(u),h()},onComplete:function(){l.setCoords(),c()}})}}),e.util.object.extend(e.StaticCanvas.prototype,{straightenObject:function(s){return s.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(s){return s.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){function s(c,h){var l="precision "+h+` float;
void main(){}`,u=c.createShader(c.FRAGMENT_SHADER);return c.shaderSource(u,l),c.compileShader(u),!!c.getShaderParameter(u,c.COMPILE_STATUS)}e.isWebglSupported=function(c){if(e.isLikelyNode)return!1;c=c||e.WebglFilterBackend.prototype.tileSize;var h=document.createElement("canvas"),l=h.getContext("webgl")||h.getContext("experimental-webgl"),u=!1;if(l){e.maxTextureSize=l.getParameter(l.MAX_TEXTURE_SIZE),u=e.maxTextureSize>=c;for(var f=["highp","mediump","lowp"],m=0;m<3;m++)if(s(l,f[m])){e.webGlPrecision=f[m];break}}return this.isSupported=u,u},e.WebglFilterBackend=o;function o(c){c&&c.tileSize&&(this.tileSize=c.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}o.prototype={tileSize:2048,resources:{},setupGLContext:function(c,h){this.dispose(),this.createWebGLCanvas(c,h),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(c,h)},chooseFastestCopyGLTo2DMethod:function(c,h){var l=typeof window.performance<"u",u;try{new ImageData(1,1),u=!0}catch{u=!1}var f=typeof ArrayBuffer<"u",m=typeof Uint8ClampedArray<"u";if(l&&u&&f&&m){var g=e.util.createCanvasElement(),p=new ArrayBuffer(c*h*4);if(e.forceGLPutImageData){this.imageBuffer=p,this.copyGLTo2D=d;return}var v={imageBuffer:p,destinationWidth:c,destinationHeight:h,targetCanvas:g},b,_,S;g.width=c,g.height=h,b=window.performance.now(),a.call(v,this.gl,v),_=window.performance.now()-b,b=window.performance.now(),d.call(v,this.gl,v),S=window.performance.now()-b,_>S?(this.imageBuffer=p,this.copyGLTo2D=d):this.copyGLTo2D=a}},createWebGLCanvas:function(c,h){var l=e.util.createCanvasElement();l.width=c,l.height=h;var u={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},f=l.getContext("webgl",u);f||(f=l.getContext("experimental-webgl",u)),f&&(f.clearColor(0,0,0,0),this.canvas=l,this.gl=f)},applyFilters:function(c,h,l,u,f,m){var g=this.gl,p;m&&(p=this.getCachedTexture(m,h));var v={originalWidth:h.width||h.originalWidth,originalHeight:h.height||h.originalHeight,sourceWidth:l,sourceHeight:u,destinationWidth:l,destinationHeight:u,context:g,sourceTexture:this.createTexture(g,l,u,!p&&h),targetTexture:this.createTexture(g,l,u),originalTexture:p||this.createTexture(g,l,u,!p&&h),passes:c.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:f},b=g.createFramebuffer();return g.bindFramebuffer(g.FRAMEBUFFER,b),c.forEach(function(_){_&&_.applyTo(v)}),r(v),this.copyGLTo2D(g,v),g.bindTexture(g.TEXTURE_2D,null),g.deleteTexture(v.sourceTexture),g.deleteTexture(v.targetTexture),g.deleteFramebuffer(b),f.getContext("2d").setTransform(1,0,0,1,0,0),v},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(c,h,l,u,f){var m=c.createTexture();return c.bindTexture(c.TEXTURE_2D,m),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,f||c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,f||c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),u?c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,u):c.texImage2D(c.TEXTURE_2D,0,c.RGBA,h,l,0,c.RGBA,c.UNSIGNED_BYTE,null),m},getCachedTexture:function(c,h){if(this.textureCache[c])return this.textureCache[c];var l=this.createTexture(this.gl,h.width,h.height,h);return this.textureCache[c]=l,l},evictCachesForKey:function(c){this.textureCache[c]&&(this.gl.deleteTexture(this.textureCache[c]),delete this.textureCache[c])},copyGLTo2D:a,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var c=this.gl,h={renderer:"",vendor:""};if(!c)return h;var l=c.getExtension("WEBGL_debug_renderer_info");if(l){var u=c.getParameter(l.UNMASKED_RENDERER_WEBGL),f=c.getParameter(l.UNMASKED_VENDOR_WEBGL);u&&(h.renderer=u.toLowerCase()),f&&(h.vendor=f.toLowerCase())}return this.gpuInfo=h,h}}}();function r(s){var o=s.targetCanvas,c=o.width,h=o.height,l=s.destinationWidth,u=s.destinationHeight;(c!==l||h!==u)&&(o.width=l,o.height=u)}function a(s,o){var c=s.canvas,h=o.targetCanvas,l=h.getContext("2d");l.translate(0,h.height),l.scale(1,-1);var u=c.height-h.height;l.drawImage(c,0,u,h.width,h.height,0,0,h.width,h.height)}function d(s,o){var c=o.targetCanvas,h=c.getContext("2d"),l=o.destinationWidth,u=o.destinationHeight,f=l*u*4,m=new Uint8Array(this.imageBuffer,0,f),g=new Uint8ClampedArray(this.imageBuffer,0,f);s.readPixels(0,0,l,u,s.RGBA,s.UNSIGNED_BYTE,m);var p=new ImageData(g,l,u);h.putImageData(p,0,0)}(function(){var s=function(){};e.Canvas2dFilterBackend=o;function o(){}o.prototype={evictCachesForKey:s,dispose:s,clearWebGLCaches:s,resources:{},applyFilters:function(c,h,l,u,f){var m=f.getContext("2d");m.drawImage(h,0,0,l,u);var g=m.getImageData(0,0,l,u),p=m.getImageData(0,0,l,u),v={sourceWidth:l,sourceHeight:u,imageData:g,originalEl:h,originalImageData:p,canvasEl:f,ctx:m,filterBackend:this};return c.forEach(function(b){b.applyTo(v)}),(v.imageData.width!==l||v.imageData.height!==u)&&(f.width=v.imageData.width,f.height=v.imageData.height),m.putImageData(v.imageData,0,0),v}}})(),e.Image=e.Image||{},e.Image.filters=e.Image.filters||{},e.Image.filters.BaseFilter=e.util.createClass({type:"BaseFilter",vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
void main() {
vTexCoord = aPosition;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:`precision highp float;
varying vec2 vTexCoord;
uniform sampler2D uTexture;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
}`,initialize:function(s){s&&this.setOptions(s)},setOptions:function(s){for(var o in s)this[o]=s[o]},createProgram:function(s,o,c){o=o||this.fragmentSource,c=c||this.vertexSource,e.webGlPrecision!=="highp"&&(o=o.replace(/precision highp float/g,"precision "+e.webGlPrecision+" float"));var h=s.createShader(s.VERTEX_SHADER);if(s.shaderSource(h,c),s.compileShader(h),!s.getShaderParameter(h,s.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+s.getShaderInfoLog(h));var l=s.createShader(s.FRAGMENT_SHADER);if(s.shaderSource(l,o),s.compileShader(l),!s.getShaderParameter(l,s.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+s.getShaderInfoLog(l));var u=s.createProgram();if(s.attachShader(u,h),s.attachShader(u,l),s.linkProgram(u),!s.getProgramParameter(u,s.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+s.getProgramInfoLog(u));var f=this.getAttributeLocations(s,u),m=this.getUniformLocations(s,u)||{};return m.uStepW=s.getUniformLocation(u,"uStepW"),m.uStepH=s.getUniformLocation(u,"uStepH"),{program:u,attributeLocations:f,uniformLocations:m}},getAttributeLocations:function(s,o){return{aPosition:s.getAttribLocation(o,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(s,o,c){var h=o.aPosition,l=s.createBuffer();s.bindBuffer(s.ARRAY_BUFFER,l),s.enableVertexAttribArray(h),s.vertexAttribPointer(h,2,s.FLOAT,!1,0,0),s.bufferData(s.ARRAY_BUFFER,c,s.STATIC_DRAW)},_setupFrameBuffer:function(s){var o=s.context,c,h;s.passes>1?(c=s.destinationWidth,h=s.destinationHeight,(s.sourceWidth!==c||s.sourceHeight!==h)&&(o.deleteTexture(s.targetTexture),s.targetTexture=s.filterBackend.createTexture(o,c,h)),o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,s.targetTexture,0)):(o.bindFramebuffer(o.FRAMEBUFFER,null),o.finish())},_swapTextures:function(s){s.passes--,s.pass++;var o=s.targetTexture;s.targetTexture=s.sourceTexture,s.sourceTexture=o},isNeutralState:function(){var s=this.mainParameter,o=e.Image.filters[this.type].prototype;if(s)if(Array.isArray(o[s])){for(var c=o[s].length;c--;)if(this[s][c]!==o[s][c])return!1;return!0}else return o[s]===this[s];else return!1},applyTo:function(s){s.webgl?(this._setupFrameBuffer(s),this.applyToWebGL(s),this._swapTextures(s)):this.applyTo2d(s)},retrieveShader:function(s){return s.programCache.hasOwnProperty(this.type)||(s.programCache[this.type]=this.createProgram(s.context)),s.programCache[this.type]},applyToWebGL:function(s){var o=s.context,c=this.retrieveShader(s);s.pass===0&&s.originalTexture?o.bindTexture(o.TEXTURE_2D,s.originalTexture):o.bindTexture(o.TEXTURE_2D,s.sourceTexture),o.useProgram(c.program),this.sendAttributeData(o,c.attributeLocations,s.aPosition),o.uniform1f(c.uniformLocations.uStepW,1/s.sourceWidth),o.uniform1f(c.uniformLocations.uStepH,1/s.sourceHeight),this.sendUniformData(o,c.uniformLocations),o.viewport(0,0,s.destinationWidth,s.destinationHeight),o.drawArrays(o.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(s,o,c){s.activeTexture(c),s.bindTexture(s.TEXTURE_2D,o),s.activeTexture(s.TEXTURE0)},unbindAdditionalTexture:function(s,o){s.activeTexture(o),s.bindTexture(s.TEXTURE_2D,null),s.activeTexture(s.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(s){this[this.mainParameter]=s},sendUniformData:function(){},createHelpLayer:function(s){if(!s.helpLayer){var o=document.createElement("canvas");o.width=s.sourceWidth,o.height=s.sourceHeight,s.helpLayer=o}},toObject:function(){var s={type:this.type},o=this.mainParameter;return o&&(s[o]=this[o]),s},toJSON:function(){return this.toObject()}}),e.Image.filters.BaseFilter.fromObject=function(s,o){var c=new e.Image.filters[s.type](s);return o&&o(c),c},function(s){var o=s.fabric||(s.fabric={}),c=o.Image.filters,h=o.util.createClass;c.ColorMatrix=h(c.BaseFilter,{type:"ColorMatrix",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
uniform mat4 uColorMatrix;
uniform vec4 uConstants;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color *= uColorMatrix;
color += uConstants;
gl_FragColor = color;
}`,matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(l){this.callSuper("initialize",l),this.matrix=this.matrix.slice(0)},applyTo2d:function(l){var u=l.imageData,f=u.data,m=f.length,g=this.matrix,p,v,b,_,S,w=this.colorsOnly;for(S=0;S<m;S+=4)p=f[S],v=f[S+1],b=f[S+2],w?(f[S]=p*g[0]+v*g[1]+b*g[2]+g[4]*255,f[S+1]=p*g[5]+v*g[6]+b*g[7]+g[9]*255,f[S+2]=p*g[10]+v*g[11]+b*g[12]+g[14]*255):(_=f[S+3],f[S]=p*g[0]+v*g[1]+b*g[2]+_*g[3]+g[4]*255,f[S+1]=p*g[5]+v*g[6]+b*g[7]+_*g[8]+g[9]*255,f[S+2]=p*g[10]+v*g[11]+b*g[12]+_*g[13]+g[14]*255,f[S+3]=p*g[15]+v*g[16]+b*g[17]+_*g[18]+g[19]*255)},getUniformLocations:function(l,u){return{uColorMatrix:l.getUniformLocation(u,"uColorMatrix"),uConstants:l.getUniformLocation(u,"uConstants")}},sendUniformData:function(l,u){var f=this.matrix,m=[f[0],f[1],f[2],f[3],f[5],f[6],f[7],f[8],f[10],f[11],f[12],f[13],f[15],f[16],f[17],f[18]],g=[f[4],f[9],f[14],f[19]];l.uniformMatrix4fv(u.uColorMatrix,!1,m),l.uniform4fv(u.uConstants,g)}}),o.Image.filters.ColorMatrix.fromObject=o.Image.filters.BaseFilter.fromObject}(t),function(s){var o=s.fabric||(s.fabric={}),c=o.Image.filters,h=o.util.createClass;c.Brightness=h(c.BaseFilter,{type:"Brightness",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBrightness;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += uBrightness;
gl_FragColor = color;
}`,brightness:0,mainParameter:"brightness",applyTo2d:function(l){if(this.brightness!==0){var u=l.imageData,f=u.data,m,g=f.length,p=Math.round(this.brightness*255);for(m=0;m<g;m+=4)f[m]=f[m]+p,f[m+1]=f[m+1]+p,f[m+2]=f[m+2]+p}},getUniformLocations:function(l,u){return{uBrightness:l.getUniformLocation(u,"uBrightness")}},sendUniformData:function(l,u){l.uniform1f(u.uBrightness,this.brightness)}}),o.Image.filters.Brightness.fromObject=o.Image.filters.BaseFilter.fromObject}(t),function(s){var o=s.fabric||(s.fabric={}),c=o.util.object.extend,h=o.Image.filters,l=o.util.createClass;h.Convolute=l(h.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_3_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_5_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_5_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_7_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_7_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_9_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_9_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`},retrieveShader:function(u){var f=Math.sqrt(this.matrix.length),m=this.type+"_"+f+"_"+(this.opaque?1:0),g=this.fragmentSource[m];return u.programCache.hasOwnProperty(m)||(u.programCache[m]=this.createProgram(u.context,g)),u.programCache[m]},applyTo2d:function(u){var f=u.imageData,m=f.data,g=this.matrix,p=Math.round(Math.sqrt(g.length)),v=Math.floor(p/2),b=f.width,_=f.height,S=u.ctx.createImageData(b,_),w=S.data,C=this.opaque?1:0,x,M,E,A,O,D,L,U,j,V,k,F,T;for(k=0;k<_;k++)for(V=0;V<b;V++){for(O=(k*b+V)*4,x=0,M=0,E=0,A=0,T=0;T<p;T++)for(F=0;F<p;F++)L=k+T-v,D=V+F-v,!(L<0||L>=_||D<0||D>=b)&&(U=(L*b+D)*4,j=g[T*p+F],x+=m[U]*j,M+=m[U+1]*j,E+=m[U+2]*j,C||(A+=m[U+3]*j));w[O]=x,w[O+1]=M,w[O+2]=E,C?w[O+3]=m[O+3]:w[O+3]=A}u.imageData=S},getUniformLocations:function(u,f){return{uMatrix:u.getUniformLocation(f,"uMatrix"),uOpaque:u.getUniformLocation(f,"uOpaque"),uHalfSize:u.getUniformLocation(f,"uHalfSize"),uSize:u.getUniformLocation(f,"uSize")}},sendUniformData:function(u,f){u.uniform1fv(f.uMatrix,this.matrix)},toObject:function(){return c(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),o.Image.filters.Convolute.fromObject=o.Image.filters.BaseFilter.fromObject}(t),function(s){var o=s.fabric||(s.fabric={}),c=o.Image.filters,h=o.util.createClass;c.Grayscale=h(c.BaseFilter,{type:"Grayscale",fragmentSource:{average:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float average = (color.r + color.b + color.g) / 3.0;
gl_FragColor = vec4(average, average, average, color.a);
}`,lightness:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
gl_FragColor = vec4(average, average, average, col.a);
}`,luminosity:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
gl_FragColor = vec4(average, average, average, col.a);
}`},mode:"average",mainParameter:"mode",applyTo2d:function(l){var u=l.imageData,f=u.data,m,g=f.length,p,v=this.mode;for(m=0;m<g;m+=4)v==="average"?p=(f[m]+f[m+1]+f[m+2])/3:v==="lightness"?p=(Math.min(f[m],f[m+1],f[m+2])+Math.max(f[m],f[m+1],f[m+2]))/2:v==="luminosity"&&(p=.21*f[m]+.72*f[m+1]+.07*f[m+2]),f[m]=p,f[m+1]=p,f[m+2]=p},retrieveShader:function(l){var u=this.type+"_"+this.mode;if(!l.programCache.hasOwnProperty(u)){var f=this.fragmentSource[this.mode];l.programCache[u]=this.createProgram(l.context,f)}return l.programCache[u]},getUniformLocations:function(l,u){return{uMode:l.getUniformLocation(u,"uMode")}},sendUniformData:function(l,u){var f=1;l.uniform1i(u.uMode,f)},isNeutralState:function(){return!1}}),o.Image.filters.Grayscale.fromObject=o.Image.filters.BaseFilter.fromObject}(t),function(s){var o=s.fabric||(s.fabric={}),c=o.Image.filters,h=o.util.createClass;c.Invert=h(c.BaseFilter,{type:"Invert",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform int uInvert;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
if (uInvert == 1) {
gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
} else {
gl_FragColor = color;
}
}`,invert:!0,mainParameter:"invert",applyTo2d:function(l){var u=l.imageData,f=u.data,m,g=f.length;for(m=0;m<g;m+=4)f[m]=255-f[m],f[m+1]=255-f[m+1],f[m+2]=255-f[m+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(l,u){return{uInvert:l.getUniformLocation(u,"uInvert")}},sendUniformData:function(l,u){l.uniform1i(u.uInvert,this.invert)}}),o.Image.filters.Invert.fromObject=o.Image.filters.BaseFilter.fromObject}(t),function(s){var o=s.fabric||(s.fabric={}),c=o.util.object.extend,h=o.Image.filters,l=o.util.createClass;h.Noise=l(h.BaseFilter,{type:"Noise",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uStepH;
uniform float uNoise;
uniform float uSeed;
varying vec2 vTexCoord;
float rand(vec2 co, float seed, float vScale) {
return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
}
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
gl_FragColor = color;
}`,mainParameter:"noise",noise:0,applyTo2d:function(u){if(this.noise!==0){var f=u.imageData,m=f.data,g,p=m.length,v=this.noise,b;for(g=0,p=m.length;g<p;g+=4)b=(.5-Math.random())*v,m[g]+=b,m[g+1]+=b,m[g+2]+=b}},getUniformLocations:function(u,f){return{uNoise:u.getUniformLocation(f,"uNoise"),uSeed:u.getUniformLocation(f,"uSeed")}},sendUniformData:function(u,f){u.uniform1f(f.uNoise,this.noise/255),u.uniform1f(f.uSeed,Math.random())},toObject:function(){return c(this.callSuper("toObject"),{noise:this.noise})}}),o.Image.filters.Noise.fromObject=o.Image.filters.BaseFilter.fromObject}(t),function(s){var o=s.fabric||(s.fabric={}),c=o.Image.filters,h=o.util.createClass;c.Pixelate=h(c.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBlocksize;
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
float blockW = uBlocksize * uStepW;
float blockH = uBlocksize * uStepW;
int posX = int(vTexCoord.x / blockW);
int posY = int(vTexCoord.y / blockH);
float fposX = float(posX);
float fposY = float(posY);
vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
vec4 color = texture2D(uTexture, squareCoords);
gl_FragColor = color;
}`,applyTo2d:function(l){var u=l.imageData,f=u.data,m=u.height,g=u.width,p,v,b,_,S,w,C,x,M,E,A;for(v=0;v<m;v+=this.blocksize)for(b=0;b<g;b+=this.blocksize)for(p=v*4*g+b*4,_=f[p],S=f[p+1],w=f[p+2],C=f[p+3],E=Math.min(v+this.blocksize,m),A=Math.min(b+this.blocksize,g),x=v;x<E;x++)for(M=b;M<A;M++)p=x*4*g+M*4,f[p]=_,f[p+1]=S,f[p+2]=w,f[p+3]=C},isNeutralState:function(){return this.blocksize===1},getUniformLocations:function(l,u){return{uBlocksize:l.getUniformLocation(u,"uBlocksize"),uStepW:l.getUniformLocation(u,"uStepW"),uStepH:l.getUniformLocation(u,"uStepH")}},sendUniformData:function(l,u){l.uniform1f(u.uBlocksize,this.blocksize)}}),o.Image.filters.Pixelate.fromObject=o.Image.filters.BaseFilter.fromObject}(t),function(s){var o=s.fabric||(s.fabric={}),c=o.util.object.extend,h=o.Image.filters,l=o.util.createClass;h.RemoveColor=l(h.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
gl_FragColor.a = 0.0;
}
}`,distance:.02,useAlpha:!1,applyTo2d:function(u){var f=u.imageData,m=f.data,g,p=this.distance*255,v,b,_,S=new o.Color(this.color).getSource(),w=[S[0]-p,S[1]-p,S[2]-p],C=[S[0]+p,S[1]+p,S[2]+p];for(g=0;g<m.length;g+=4)v=m[g],b=m[g+1],_=m[g+2],v>w[0]&&b>w[1]&&_>w[2]&&v<C[0]&&b<C[1]&&_<C[2]&&(m[g+3]=0)},getUniformLocations:function(u,f){return{uLow:u.getUniformLocation(f,"uLow"),uHigh:u.getUniformLocation(f,"uHigh")}},sendUniformData:function(u,f){var m=new o.Color(this.color).getSource(),g=parseFloat(this.distance),p=[0+m[0]/255-g,0+m[1]/255-g,0+m[2]/255-g,1],v=[m[0]/255+g,m[1]/255+g,m[2]/255+g,1];u.uniform4fv(f.uLow,p),u.uniform4fv(f.uHigh,v)},toObject:function(){return c(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),o.Image.filters.RemoveColor.fromObject=o.Image.filters.BaseFilter.fromObject}(t),function(s){var o=s.fabric||(s.fabric={}),c=o.Image.filters,h=o.util.createClass,l={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var u in l)c[u]=h(c.ColorMatrix,{type:u,matrix:l[u],mainParameter:!1,colorsOnly:!0}),o.Image.filters[u].fromObject=o.Image.filters.BaseFilter.fromObject}(t),function(s){var o=s.fabric,c=o.Image.filters,h=o.util.createClass;c.BlendColor=h(c.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,diff:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`if (uColor.r < 0.5) {
gl_FragColor.r *= 2.0 * uColor.r;
} else {
gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
}
if (uColor.g < 0.5) {
gl_FragColor.g *= 2.0 * uColor.g;
} else {
gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
}
if (uColor.b < 0.5) {
gl_FragColor.b *= 2.0 * uColor.b;
} else {
gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
}
`,tint:`gl_FragColor.rgb *= (1.0 - uColor.a);
gl_FragColor.rgb += uColor.rgb;
`},buildSource:function(l){return`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uColor;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
gl_FragColor = color;
if (color.a > 0.0) {
`+this.fragmentSource[l]+`}
}`},retrieveShader:function(l){var u=this.type+"_"+this.mode,f;return l.programCache.hasOwnProperty(u)||(f=this.buildSource(this.mode),l.programCache[u]=this.createProgram(l.context,f)),l.programCache[u]},applyTo2d:function(l){var u=l.imageData,f=u.data,m=f.length,g,p,v,b,_,S,w,C=1-this.alpha;w=new o.Color(this.color).getSource(),g=w[0]*this.alpha,p=w[1]*this.alpha,v=w[2]*this.alpha;for(var x=0;x<m;x+=4)switch(b=f[x],_=f[x+1],S=f[x+2],this.mode){case"multiply":f[x]=b*g/255,f[x+1]=_*p/255,f[x+2]=S*v/255;break;case"screen":f[x]=255-(255-b)*(255-g)/255,f[x+1]=255-(255-_)*(255-p)/255,f[x+2]=255-(255-S)*(255-v)/255;break;case"add":f[x]=b+g,f[x+1]=_+p,f[x+2]=S+v;break;case"diff":case"difference":f[x]=Math.abs(b-g),f[x+1]=Math.abs(_-p),f[x+2]=Math.abs(S-v);break;case"subtract":f[x]=b-g,f[x+1]=_-p,f[x+2]=S-v;break;case"darken":f[x]=Math.min(b,g),f[x+1]=Math.min(_,p),f[x+2]=Math.min(S,v);break;case"lighten":f[x]=Math.max(b,g),f[x+1]=Math.max(_,p),f[x+2]=Math.max(S,v);break;case"overlay":f[x]=g<128?2*b*g/255:255-2*(255-b)*(255-g)/255,f[x+1]=p<128?2*_*p/255:255-2*(255-_)*(255-p)/255,f[x+2]=v<128?2*S*v/255:255-2*(255-S)*(255-v)/255;break;case"exclusion":f[x]=g+b-2*g*b/255,f[x+1]=p+_-2*p*_/255,f[x+2]=v+S-2*v*S/255;break;case"tint":f[x]=g+b*C,f[x+1]=p+_*C,f[x+2]=v+S*C}},getUniformLocations:function(l,u){return{uColor:l.getUniformLocation(u,"uColor")}},sendUniformData:function(l,u){var f=new o.Color(this.color).getSource();f[0]=this.alpha*f[0]/255,f[1]=this.alpha*f[1]/255,f[2]=this.alpha*f[2]/255,f[3]=this.alpha,l.uniform4fv(u.uColor,f)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),o.Image.filters.BlendColor.fromObject=o.Image.filters.BaseFilter.fromObject}(t),function(s){var o=s.fabric,c=o.Image.filters,h=o.util.createClass;c.BlendImage=h(c.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
uniform mat3 uTransformMatrix;
void main() {
vTexCoord = aPosition;
vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:{multiply:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.rgba *= color2.rgba;
gl_FragColor = color;
}`,mask:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.a = color2.a;
gl_FragColor = color;
}`},retrieveShader:function(l){var u=this.type+"_"+this.mode,f=this.fragmentSource[this.mode];return l.programCache.hasOwnProperty(u)||(l.programCache[u]=this.createProgram(l.context,f)),l.programCache[u]},applyToWebGL:function(l){var u=l.context,f=this.createTexture(l.filterBackend,this.image);this.bindAdditionalTexture(u,f,u.TEXTURE1),this.callSuper("applyToWebGL",l),this.unbindAdditionalTexture(u,u.TEXTURE1)},createTexture:function(l,u){return l.getCachedTexture(u.cacheKey,u._element)},calculateMatrix:function(){var l=this.image,u=l._element.width,f=l._element.height;return[1/l.scaleX,0,0,0,1/l.scaleY,0,-l.left/u,-l.top/f,1]},applyTo2d:function(l){var u=l.imageData,f=l.filterBackend.resources,m=u.data,g=m.length,p=u.width,v=u.height,b,_,S,w,C,x,M,E,A,O,D=this.image,L;f.blendImage||(f.blendImage=o.util.createCanvasElement()),A=f.blendImage,O=A.getContext("2d"),A.width!==p||A.height!==v?(A.width=p,A.height=v):O.clearRect(0,0,p,v),O.setTransform(D.scaleX,0,0,D.scaleY,D.left,D.top),O.drawImage(D._element,0,0,p,v),L=O.getImageData(0,0,p,v).data;for(var U=0;U<g;U+=4)switch(C=m[U],x=m[U+1],M=m[U+2],E=m[U+3],b=L[U],_=L[U+1],S=L[U+2],w=L[U+3],this.mode){case"multiply":m[U]=C*b/255,m[U+1]=x*_/255,m[U+2]=M*S/255,m[U+3]=E*w/255;break;case"mask":m[U+3]=w;break}},getUniformLocations:function(l,u){return{uTransformMatrix:l.getUniformLocation(u,"uTransformMatrix"),uImage:l.getUniformLocation(u,"uImage")}},sendUniformData:function(l,u){var f=this.calculateMatrix();l.uniform1i(u.uImage,1),l.uniformMatrix3fv(u.uTransformMatrix,!1,f)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),o.Image.filters.BlendImage.fromObject=function(l,u){o.Image.fromObject(l.image,function(f){var m=o.util.object.clone(l);m.image=f,u(new o.Image.filters.BlendImage(m))})}}(t),function(s){var o=s.fabric||(s.fabric={}),c=Math.pow,h=Math.floor,l=Math.sqrt,u=Math.abs,f=Math.round,m=Math.sin,g=Math.ceil,p=o.Image.filters,v=o.util.createClass;p.Resize=v(p.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(b,_){return{uDelta:b.getUniformLocation(_,"uDelta"),uTaps:b.getUniformLocation(_,"uTaps")}},sendUniformData:function(b,_){b.uniform2fv(_.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),b.uniform1fv(_.uTaps,this.taps)},retrieveShader:function(b){var _=this.getFilterWindow(),S=this.type+"_"+_;if(!b.programCache.hasOwnProperty(S)){var w=this.generateShader(_);b.programCache[S]=this.createProgram(b.context,w)}return b.programCache[S]},getFilterWindow:function(){var b=this.tempScale;return Math.ceil(this.lanczosLobes/b)},getTaps:function(){for(var b=this.lanczosCreate(this.lanczosLobes),_=this.tempScale,S=this.getFilterWindow(),w=new Array(S),C=1;C<=S;C++)w[C-1]=b(C*_);return w},generateShader:function(w){for(var _=new Array(w),S=this.fragmentSourceTOP,w,C=1;C<=w;C++)_[C-1]=C+".0 * uDelta";return S+="uniform float uTaps["+w+`];
`,S+=`void main() {
`,S+=`  vec4 color = texture2D(uTexture, vTexCoord);
`,S+=`  float sum = 1.0;
`,_.forEach(function(x,M){S+="  color += texture2D(uTexture, vTexCoord + "+x+") * uTaps["+M+`];
`,S+="  color += texture2D(uTexture, vTexCoord - "+x+") * uTaps["+M+`];
`,S+="  sum += 2.0 * uTaps["+M+`];
`}),S+=`  gl_FragColor = color / sum;
`,S+="}",S},fragmentSourceTOP:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
`,applyTo:function(b){b.webgl?(b.passes++,this.width=b.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=b.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),b.destinationWidth=this.dW,this._setupFrameBuffer(b),this.applyToWebGL(b),this._swapTextures(b),b.sourceWidth=b.destinationWidth,this.height=b.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),b.destinationHeight=this.dH,this._setupFrameBuffer(b),this.applyToWebGL(b),this._swapTextures(b),b.sourceHeight=b.destinationHeight):this.applyTo2d(b)},isNeutralState:function(){return this.scaleX===1&&this.scaleY===1},lanczosCreate:function(b){return function(_){if(_>=b||_<=-b)return 0;if(_<11920929e-14&&_>-11920929e-14)return 1;_*=Math.PI;var S=_/b;return m(_)/_*m(S)/S}},applyTo2d:function(b){var _=b.imageData,S=this.scaleX,w=this.scaleY;this.rcpScaleX=1/S,this.rcpScaleY=1/w;var C=_.width,x=_.height,M=f(C*S),E=f(x*w),A;this.resizeType==="sliceHack"?A=this.sliceByTwo(b,C,x,M,E):this.resizeType==="hermite"?A=this.hermiteFastResize(b,C,x,M,E):this.resizeType==="bilinear"?A=this.bilinearFiltering(b,C,x,M,E):this.resizeType==="lanczos"&&(A=this.lanczosResize(b,C,x,M,E)),b.imageData=A},sliceByTwo:function(b,_,S,w,C){var x=b.imageData,M=.5,E=!1,A=!1,O=_*M,D=S*M,L=o.filterBackend.resources,U,j,V=0,k=0,F=_,T=0;for(L.sliceByTwo||(L.sliceByTwo=document.createElement("canvas")),U=L.sliceByTwo,(U.width<_*1.5||U.height<S)&&(U.width=_*1.5,U.height=S),j=U.getContext("2d"),j.clearRect(0,0,_*1.5,S),j.putImageData(x,0,0),w=h(w),C=h(C);!E||!A;)_=O,S=D,w<h(O*M)?O=h(O*M):(O=w,E=!0),C<h(D*M)?D=h(D*M):(D=C,A=!0),j.drawImage(U,V,k,_,S,F,T,O,D),V=F,k=T,T+=D;return j.getImageData(V,k,w,C)},lanczosResize:function(b,_,S,w,C){function x(H){var N,G,$,z,Z,W,te,ie,re,_e,Pe;for(T.x=(H+.5)*D,P.x=h(T.x),N=0;N<C;N++){for(T.y=(N+.5)*L,P.y=h(T.y),Z=0,W=0,te=0,ie=0,re=0,G=P.x-V;G<=P.x+V;G++)if(!(G<0||G>=_)){_e=h(1e3*u(G-T.x)),F[_e]||(F[_e]={});for(var K=P.y-k;K<=P.y+k;K++)K<0||K>=S||(Pe=h(1e3*u(K-T.y)),F[_e][Pe]||(F[_e][Pe]=O(l(c(_e*U,2)+c(Pe*j,2))/1e3)),$=F[_e][Pe],$>0&&(z=(K*_+G)*4,Z+=$,W+=$*M[z],te+=$*M[z+1],ie+=$*M[z+2],re+=$*M[z+3]))}z=(N*w+H)*4,A[z]=W/Z,A[z+1]=te/Z,A[z+2]=ie/Z,A[z+3]=re/Z}return++H<w?x(H):E}var M=b.imageData.data,E=b.ctx.createImageData(w,C),A=E.data,O=this.lanczosCreate(this.lanczosLobes),D=this.rcpScaleX,L=this.rcpScaleY,U=2/this.rcpScaleX,j=2/this.rcpScaleY,V=g(D*this.lanczosLobes/2),k=g(L*this.lanczosLobes/2),F={},T={},P={};return x(0)},bilinearFiltering:function(b,_,S,w,C){var x,M,E,A,O,D,L,U,j,V,k,F,T=0,P,H=this.rcpScaleX,N=this.rcpScaleY,G=4*(_-1),$=b.imageData,z=$.data,Z=b.ctx.createImageData(w,C),W=Z.data;for(L=0;L<C;L++)for(U=0;U<w;U++)for(O=h(H*U),D=h(N*L),j=H*U-O,V=N*L-D,P=4*(D*_+O),k=0;k<4;k++)x=z[P+k],M=z[P+4+k],E=z[P+G+k],A=z[P+G+4+k],F=x*(1-j)*(1-V)+M*j*(1-V)+E*V*(1-j)+A*j*V,W[T++]=F;return Z},hermiteFastResize:function(b,_,S,w,C){for(var x=this.rcpScaleX,M=this.rcpScaleY,E=g(x/2),A=g(M/2),O=b.imageData,D=O.data,L=b.ctx.createImageData(w,C),U=L.data,j=0;j<C;j++)for(var V=0;V<w;V++){for(var k=(V+j*w)*4,F=0,T=0,P=0,H=0,N=0,G=0,$=0,z=(j+.5)*M,Z=h(j*M);Z<(j+1)*M;Z++)for(var W=u(z-(Z+.5))/A,te=(V+.5)*x,ie=W*W,re=h(V*x);re<(V+1)*x;re++){var _e=u(te-(re+.5))/E,Pe=l(ie+_e*_e);Pe>1&&Pe<-1||(F=2*Pe*Pe*Pe-3*Pe*Pe+1,F>0&&(_e=4*(re+Z*_),$+=F*D[_e+3],P+=F,D[_e+3]<255&&(F=F*D[_e+3]/250),H+=F*D[_e],N+=F*D[_e+1],G+=F*D[_e+2],T+=F))}U[k]=H/T,U[k+1]=N/T,U[k+2]=G/T,U[k+3]=$/P}return L},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),o.Image.filters.Resize.fromObject=o.Image.filters.BaseFilter.fromObject}(t),function(s){var o=s.fabric||(s.fabric={}),c=o.Image.filters,h=o.util.createClass;c.Contrast=h(c.BaseFilter,{type:"Contrast",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uContrast;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
gl_FragColor = color;
}`,contrast:0,mainParameter:"contrast",applyTo2d:function(l){if(this.contrast!==0){var u=l.imageData,f,g,m=u.data,g=m.length,p=Math.floor(this.contrast*255),v=259*(p+255)/(255*(259-p));for(f=0;f<g;f+=4)m[f]=v*(m[f]-128)+128,m[f+1]=v*(m[f+1]-128)+128,m[f+2]=v*(m[f+2]-128)+128}},getUniformLocations:function(l,u){return{uContrast:l.getUniformLocation(u,"uContrast")}},sendUniformData:function(l,u){l.uniform1f(u.uContrast,this.contrast)}}),o.Image.filters.Contrast.fromObject=o.Image.filters.BaseFilter.fromObject}(t),function(s){var o=s.fabric||(s.fabric={}),c=o.Image.filters,h=o.util.createClass;c.Saturation=h(c.BaseFilter,{type:"Saturation",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uSaturation;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float rgMax = max(color.r, color.g);
float rgbMax = max(rgMax, color.b);
color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
gl_FragColor = color;
}`,saturation:0,mainParameter:"saturation",applyTo2d:function(l){if(this.saturation!==0){var u=l.imageData,f=u.data,m=f.length,g=-this.saturation,p,v;for(p=0;p<m;p+=4)v=Math.max(f[p],f[p+1],f[p+2]),f[p]+=v!==f[p]?(v-f[p])*g:0,f[p+1]+=v!==f[p+1]?(v-f[p+1])*g:0,f[p+2]+=v!==f[p+2]?(v-f[p+2])*g:0}},getUniformLocations:function(l,u){return{uSaturation:l.getUniformLocation(u,"uSaturation")}},sendUniformData:function(l,u){l.uniform1f(u.uSaturation,-this.saturation)}}),o.Image.filters.Saturation.fromObject=o.Image.filters.BaseFilter.fromObject}(t),function(s){var o=s.fabric||(s.fabric={}),c=o.Image.filters,h=o.util.createClass;c.Vibrance=h(c.BaseFilter,{type:"Vibrance",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uVibrance;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float max = max(color.r, max(color.g, color.b));
float avg = (color.r + color.g + color.b) / 3.0;
float amt = (abs(max - avg) * 2.0) * uVibrance;
color.r += max != color.r ? (max - color.r) * amt : 0.00;
color.g += max != color.g ? (max - color.g) * amt : 0.00;
color.b += max != color.b ? (max - color.b) * amt : 0.00;
gl_FragColor = color;
}`,vibrance:0,mainParameter:"vibrance",applyTo2d:function(l){if(this.vibrance!==0){var u=l.imageData,f=u.data,m=f.length,g=-this.vibrance,p,v,b,_;for(p=0;p<m;p+=4)v=Math.max(f[p],f[p+1],f[p+2]),b=(f[p]+f[p+1]+f[p+2])/3,_=Math.abs(v-b)*2/255*g,f[p]+=v!==f[p]?(v-f[p])*_:0,f[p+1]+=v!==f[p+1]?(v-f[p+1])*_:0,f[p+2]+=v!==f[p+2]?(v-f[p+2])*_:0}},getUniformLocations:function(l,u){return{uVibrance:l.getUniformLocation(u,"uVibrance")}},sendUniformData:function(l,u){l.uniform1f(u.uVibrance,-this.vibrance)}}),o.Image.filters.Vibrance.fromObject=o.Image.filters.BaseFilter.fromObject}(t),function(s){var o=s.fabric||(s.fabric={}),c=o.Image.filters,h=o.util.createClass;c.Blur=h(c.BaseFilter,{type:"Blur",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
const float nSamples = 15.0;
vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
float random(vec3 scale) {
return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
}
void main() {
vec4 color = vec4(0.0);
float total = 0.0;
float offset = random(v3offset);
for (float t = -nSamples; t <= nSamples; t++) {
float percent = (t + offset - 0.5) / nSamples;
float weight = 1.0 - abs(percent);
color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
total += weight;
}
gl_FragColor = color / total;
}`,blur:0,mainParameter:"blur",applyTo:function(l){l.webgl?(this.aspectRatio=l.sourceWidth/l.sourceHeight,l.passes++,this._setupFrameBuffer(l),this.horizontal=!0,this.applyToWebGL(l),this._swapTextures(l),this._setupFrameBuffer(l),this.horizontal=!1,this.applyToWebGL(l),this._swapTextures(l)):this.applyTo2d(l)},applyTo2d:function(l){l.imageData=this.simpleBlur(l)},simpleBlur:function(l){var u=l.filterBackend.resources,f,m,g=l.imageData.width,p=l.imageData.height;u.blurLayer1||(u.blurLayer1=o.util.createCanvasElement(),u.blurLayer2=o.util.createCanvasElement()),f=u.blurLayer1,m=u.blurLayer2,(f.width!==g||f.height!==p)&&(m.width=f.width=g,m.height=f.height=p);var v=f.getContext("2d"),b=m.getContext("2d"),_=15,S,w,C,x,M=this.blur*.06*.5;for(v.putImageData(l.imageData,0,0),b.clearRect(0,0,g,p),x=-_;x<=_;x++)S=(Math.random()-.5)/4,w=x/_,C=M*w*g+S,b.globalAlpha=1-Math.abs(w),b.drawImage(f,C,S),v.drawImage(m,0,0),b.globalAlpha=1,b.clearRect(0,0,m.width,m.height);for(x=-_;x<=_;x++)S=(Math.random()-.5)/4,w=x/_,C=M*w*p+S,b.globalAlpha=1-Math.abs(w),b.drawImage(f,S,C),v.drawImage(m,0,0),b.globalAlpha=1,b.clearRect(0,0,m.width,m.height);l.ctx.drawImage(f,0,0);var E=l.ctx.getImageData(0,0,f.width,f.height);return v.globalAlpha=1,v.clearRect(0,0,f.width,f.height),E},getUniformLocations:function(l,u){return{delta:l.getUniformLocation(u,"uDelta")}},sendUniformData:function(l,u){var f=this.chooseRightDelta();l.uniform2fv(u.delta,f)},chooseRightDelta:function(){var l=1,u=[0,0],f;return this.horizontal?this.aspectRatio>1&&(l=1/this.aspectRatio):this.aspectRatio<1&&(l=this.aspectRatio),f=l*this.blur*.12,this.horizontal?u[0]=f:u[1]=f,u}}),c.Blur.fromObject=o.Image.filters.BaseFilter.fromObject}(t),function(s){var o=s.fabric||(s.fabric={}),c=o.Image.filters,h=o.util.createClass;c.Gamma=h(c.BaseFilter,{type:"Gamma",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec3 uGamma;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec3 correction = (1.0 / uGamma);
color.r = pow(color.r, correction.r);
color.g = pow(color.g, correction.g);
color.b = pow(color.b, correction.b);
gl_FragColor = color;
gl_FragColor.rgb *= color.a;
}`,gamma:[1,1,1],mainParameter:"gamma",initialize:function(l){this.gamma=[1,1,1],c.BaseFilter.prototype.initialize.call(this,l)},applyTo2d:function(l){var u=l.imageData,f=u.data,m=this.gamma,g=f.length,p=1/m[0],v=1/m[1],b=1/m[2],_;for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),_=0,g=256;_<g;_++)this.rVals[_]=Math.pow(_/255,p)*255,this.gVals[_]=Math.pow(_/255,v)*255,this.bVals[_]=Math.pow(_/255,b)*255;for(_=0,g=f.length;_<g;_+=4)f[_]=this.rVals[f[_]],f[_+1]=this.gVals[f[_+1]],f[_+2]=this.bVals[f[_+2]]},getUniformLocations:function(l,u){return{uGamma:l.getUniformLocation(u,"uGamma")}},sendUniformData:function(l,u){l.uniform3fv(u.uGamma,this.gamma)}}),o.Image.filters.Gamma.fromObject=o.Image.filters.BaseFilter.fromObject}(t),function(s){var o=s.fabric||(s.fabric={}),c=o.Image.filters,h=o.util.createClass;c.Composed=h(c.BaseFilter,{type:"Composed",subFilters:[],initialize:function(l){this.callSuper("initialize",l),this.subFilters=this.subFilters.slice(0)},applyTo:function(l){l.passes+=this.subFilters.length-1,this.subFilters.forEach(function(u){u.applyTo(l)})},toObject:function(){return o.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(l){return l.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(l){return!l.isNeutralState()})}}),o.Image.filters.Composed.fromObject=function(l,u){var f=l.subFilters||[],m=f.map(function(p){return new o.Image.filters[p.type](p)}),g=new o.Image.filters.Composed({subFilters:m});return u&&u(g),g}}(t),function(s){var o=s.fabric||(s.fabric={}),c=o.Image.filters,h=o.util.createClass;c.HueRotation=h(c.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var l=this.rotation*Math.PI,u=o.util.cos(l),f=o.util.sin(l),m=1/3,g=Math.sqrt(m)*f,p=1-u;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=u+p/3,this.matrix[1]=m*p-g,this.matrix[2]=m*p+g,this.matrix[5]=m*p+g,this.matrix[6]=u+m*p,this.matrix[7]=m*p-g,this.matrix[10]=m*p-g,this.matrix[11]=m*p+g,this.matrix[12]=u+m*p},isNeutralState:function(l){return this.calculateMatrix(),c.BaseFilter.prototype.isNeutralState.call(this,l)},applyTo:function(l){this.calculateMatrix(),c.BaseFilter.prototype.applyTo.call(this,l)}}),o.Image.filters.HueRotation.fromObject=o.Image.filters.BaseFilter.fromObject}(t),function(s){var o=s.fabric||(s.fabric={}),c=o.util.object.clone;if(o.Text){o.warn("fabric.Text is already defined");return}var h="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign".split(" ");o.Text=o.util.createClass(o.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:o.Object.prototype.stateProperties.concat(h),cacheProperties:o.Object.prototype.cacheProperties.concat(h),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(l,u){this.styles=u?u.styles||{}:{},this.text=l,this.__skipDimension=!0,this.callSuper("initialize",u),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var l=this.path;l&&(l.segmentsInfo=o.util.getPathSegmentsInfo(l.path))},getMeasuringContext:function(){return o._measuringContext||(o._measuringContext=this.canvas&&this.canvas.contextCache||o.util.createCanvasElement().getContext("2d")),o._measuringContext},_splitText:function(){var l=this._splitTextIntoLines(this.text);return this.textLines=l.lines,this._textLines=l.graphemeLines,this._unwrappedTextLines=l._unwrappedLines,this._text=l.graphemeText,l},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var l,u,f,m,g,p,v,b=0,_=this._textLines.length;b<_;b++)if(!(this.textAlign!=="justify"&&(b===_-1||this.isEndOfWrapping(b)))&&(m=0,g=this._textLines[b],u=this.getLineWidth(b),u<this.width&&(v=this.textLines[b].match(this._reSpacesAndTabs)))){f=v.length,l=(this.width-u)/f;for(var S=0,w=g.length;S<=w;S++)p=this.__charBounds[b][S],this._reSpaceAndTab.test(g[S])?(p.width+=l,p.kernedWidth+=l,p.left+=m,m+=l):p.left+=m}},isEndOfWrapping:function(l){return l===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var l=this.callSuper("_getCacheCanvasDimensions"),u=this.fontSize;return l.width+=u*l.zoomX,l.height+=u*l.zoomY,l},_render:function(l){var u=this.path;u&&!u.isNotVisible()&&u._render(l),this._setTextStyles(l),this._renderTextLinesBackground(l),this._renderTextDecoration(l,"underline"),this._renderText(l),this._renderTextDecoration(l,"overline"),this._renderTextDecoration(l,"linethrough")},_renderText:function(l){this.paintFirst==="stroke"?(this._renderTextStroke(l),this._renderTextFill(l)):(this._renderTextFill(l),this._renderTextStroke(l))},_setTextStyles:function(l,u,f){if(l.textBaseline="alphabetical",this.path)switch(this.pathAlign){case"center":l.textBaseline="middle";break;case"ascender":l.textBaseline="top";break;case"descender":l.textBaseline="bottom";break}l.font=this._getFontDeclaration(u,f)},calcTextWidth:function(){for(var l=this.getLineWidth(0),u=1,f=this._textLines.length;u<f;u++){var m=this.getLineWidth(u);m>l&&(l=m)}return l},_renderTextLine:function(l,u,f,m,g,p){this._renderChars(l,u,f,m,g,p)},_renderTextLinesBackground:function(l){if(!(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))){for(var u,f,m=l.fillStyle,g,p,v=this._getLeftOffset(),b=this._getTopOffset(),_=0,S=0,w,C,x=this.path,M,E=0,A=this._textLines.length;E<A;E++){if(u=this.getHeightOfLine(E),!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",E)){b+=u;continue}g=this._textLines[E],f=this._getLineLeftOffset(E),S=0,_=0,p=this.getValueOfPropertyAt(E,0,"textBackgroundColor");for(var O=0,D=g.length;O<D;O++)w=this.__charBounds[E][O],C=this.getValueOfPropertyAt(E,O,"textBackgroundColor"),x?(l.save(),l.translate(w.renderLeft,w.renderTop),l.rotate(w.angle),l.fillStyle=C,C&&l.fillRect(-w.width/2,-u/this.lineHeight*(1-this._fontSizeFraction),w.width,u/this.lineHeight),l.restore()):C!==p?(M=v+f+_,this.direction==="rtl"&&(M=this.width-M-S),l.fillStyle=p,p&&l.fillRect(M,b,S,u/this.lineHeight),_=w.left,S=w.width,p=C):S+=w.kernedWidth;C&&!x&&(M=v+f+_,this.direction==="rtl"&&(M=this.width-M-S),l.fillStyle=C,l.fillRect(M,b,S,u/this.lineHeight)),b+=u}l.fillStyle=m,this._removeShadow(l)}},getFontCache:function(l){var u=l.fontFamily.toLowerCase();o.charWidthsCache[u]||(o.charWidthsCache[u]={});var f=o.charWidthsCache[u],m=l.fontStyle.toLowerCase()+"_"+(l.fontWeight+"").toLowerCase();return f[m]||(f[m]={}),f[m]},_measureChar:function(l,u,f,m){var g=this.getFontCache(u),p=this._getFontDeclaration(u),v=this._getFontDeclaration(m),b=f+l,_=p===v,S,w,C,x=u.fontSize/this.CACHE_FONT_SIZE,M;if(f&&g[f]!==void 0&&(C=g[f]),g[l]!==void 0&&(M=S=g[l]),_&&g[b]!==void 0&&(w=g[b],M=w-C),S===void 0||C===void 0||w===void 0){var E=this.getMeasuringContext();this._setTextStyles(E,u,!0)}return S===void 0&&(M=S=E.measureText(l).width,g[l]=S),C===void 0&&_&&f&&(C=E.measureText(f).width,g[f]=C),_&&w===void 0&&(w=E.measureText(b).width,g[b]=w,M=w-C),{width:S*x,kernedWidth:M*x}},getHeightOfChar:function(l,u){return this.getValueOfPropertyAt(l,u,"fontSize")},measureLine:function(l){var u=this._measureLine(l);return this.charSpacing!==0&&(u.width-=this._getWidthOfCharSpacing()),u.width<0&&(u.width=0),u},_measureLine:function(l){var u=0,f,m,g=this._textLines[l],p,v,b=0,_=new Array(g.length),S=0,w,C,x=this.path,M=this.pathSide==="right";for(this.__charBounds[l]=_,f=0;f<g.length;f++)m=g[f],v=this._getGraphemeBox(m,l,f,p),_[f]=v,u+=v.kernedWidth,p=m;if(_[f]={left:v?v.left+v.width:0,width:0,kernedWidth:0,height:this.fontSize},x){switch(C=x.segmentsInfo[x.segmentsInfo.length-1].length,w=o.util.getPointOnPath(x.path,0,x.segmentsInfo),w.x+=x.pathOffset.x,w.y+=x.pathOffset.y,this.textAlign){case"left":S=M?C-u:0;break;case"center":S=(C-u)/2;break;case"right":S=M?0:C-u;break}for(S+=this.pathStartOffset*(M?-1:1),f=M?g.length-1:0;M?f>=0:f<g.length;M?f--:f++)v=_[f],S>C?S%=C:S<0&&(S+=C),this._setGraphemeOnPath(S,v,w),S+=v.kernedWidth}return{width:u,numOfSpaces:b}},_setGraphemeOnPath:function(l,u,f){var m=l+u.kernedWidth/2,g=this.path,p=o.util.getPointOnPath(g.path,m,g.segmentsInfo);u.renderLeft=p.x-f.x,u.renderTop=p.y-f.y,u.angle=p.angle+(this.pathSide==="right"?Math.PI:0)},_getGraphemeBox:function(l,u,f,m,g){var p=this.getCompleteStyleDeclaration(u,f),v=m?this.getCompleteStyleDeclaration(u,f-1):{},b=this._measureChar(l,p,m,v),_=b.kernedWidth,S=b.width,w;this.charSpacing!==0&&(w=this._getWidthOfCharSpacing(),S+=w,_+=w);var C={width:S,left:0,height:p.fontSize,kernedWidth:_,deltaY:p.deltaY};if(f>0&&!g){var x=this.__charBounds[u][f-1];C.left=x.left+x.width+b.kernedWidth-b.width}return C},getHeightOfLine:function(l){if(this.__lineHeights[l])return this.__lineHeights[l];for(var u=this._textLines[l],f=this.getHeightOfChar(l,0),m=1,g=u.length;m<g;m++)f=Math.max(this.getHeightOfChar(l,m),f);return this.__lineHeights[l]=f*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var l,u=0,f=0,m=this._textLines.length;f<m;f++)l=this.getHeightOfLine(f),u+=f===m-1?l/this.lineHeight:l;return u},_getLeftOffset:function(){return this.direction==="ltr"?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(l,u){l.save();for(var f=0,m=this._getLeftOffset(),g=this._getTopOffset(),p=0,v=this._textLines.length;p<v;p++){var b=this.getHeightOfLine(p),_=b/this.lineHeight,S=this._getLineLeftOffset(p);this._renderTextLine(u,l,this._textLines[p],m+S,g+f+_,p),f+=b}l.restore()},_renderTextFill:function(l){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(l,"fillText")},_renderTextStroke:function(l){(!this.stroke||this.strokeWidth===0)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(l),l.save(),this._setLineDash(l,this.strokeDashArray),l.beginPath(),this._renderTextCommon(l,"strokeText"),l.closePath(),l.restore())},_renderChars:function(l,u,f,m,g,p){var v=this.getHeightOfLine(p),b=this.textAlign.indexOf("justify")!==-1,_,S,w="",C,x=0,M,E=this.path,A=!b&&this.charSpacing===0&&this.isEmptyStyles(p)&&!E,O=this.direction==="ltr",D=this.direction==="ltr"?1:-1,L,U=u.canvas.getAttribute("dir");if(u.save(),U!==this.direction&&(u.canvas.setAttribute("dir",O?"ltr":"rtl"),u.direction=O?"ltr":"rtl",u.textAlign=O?"left":"right"),g-=v*this._fontSizeFraction/this.lineHeight,A){this._renderChar(l,u,p,0,f.join(""),m,g,v),u.restore();return}for(var j=0,V=f.length-1;j<=V;j++)M=j===V||this.charSpacing||E,w+=f[j],C=this.__charBounds[p][j],x===0?(m+=D*(C.kernedWidth-C.width),x+=C.width):x+=C.kernedWidth,b&&!M&&this._reSpaceAndTab.test(f[j])&&(M=!0),M||(_=_||this.getCompleteStyleDeclaration(p,j),S=this.getCompleteStyleDeclaration(p,j+1),M=o.util.hasStyleChanged(_,S,!1)),M&&(E?(u.save(),u.translate(C.renderLeft,C.renderTop),u.rotate(C.angle),this._renderChar(l,u,p,j,w,-x/2,0,v),u.restore()):(L=m,this._renderChar(l,u,p,j,w,L,g,v)),w="",_=S,m+=D*x,x=0);u.restore()},_applyPatternGradientTransformText:function(l){var u=o.util.createCanvasElement(),f,m=this.width+this.strokeWidth,g=this.height+this.strokeWidth;return u.width=m,u.height=g,f=u.getContext("2d"),f.beginPath(),f.moveTo(0,0),f.lineTo(m,0),f.lineTo(m,g),f.lineTo(0,g),f.closePath(),f.translate(m/2,g/2),f.fillStyle=l.toLive(f),this._applyPatternGradientTransform(f,l),f.fill(),f.createPattern(u,"no-repeat")},handleFiller:function(l,u,f){var m,g;return f.toLive?f.gradientUnits==="percentage"||f.gradientTransform||f.patternTransform?(m=-this.width/2,g=-this.height/2,l.translate(m,g),l[u]=this._applyPatternGradientTransformText(f),{offsetX:m,offsetY:g}):(l[u]=f.toLive(l,this),this._applyPatternGradientTransform(l,f)):(l[u]=f,{offsetX:0,offsetY:0})},_setStrokeStyles:function(l,u){return l.lineWidth=u.strokeWidth,l.lineCap=this.strokeLineCap,l.lineDashOffset=this.strokeDashOffset,l.lineJoin=this.strokeLineJoin,l.miterLimit=this.strokeMiterLimit,this.handleFiller(l,"strokeStyle",u.stroke)},_setFillStyles:function(l,u){return this.handleFiller(l,"fillStyle",u.fill)},_renderChar:function(l,u,f,m,g,p,v){var b=this._getStyleDeclaration(f,m),_=this.getCompleteStyleDeclaration(f,m),S=l==="fillText"&&_.fill,w=l==="strokeText"&&_.stroke&&_.strokeWidth,C,x;!w&&!S||(u.save(),S&&(C=this._setFillStyles(u,_)),w&&(x=this._setStrokeStyles(u,_)),u.font=this._getFontDeclaration(_),b&&b.textBackgroundColor&&this._removeShadow(u),b&&b.deltaY&&(v+=b.deltaY),S&&u.fillText(g,p-C.offsetX,v-C.offsetY),w&&u.strokeText(g,p-x.offsetX,v-x.offsetY),u.restore())},setSuperscript:function(l,u){return this._setScript(l,u,this.superscript)},setSubscript:function(l,u){return this._setScript(l,u,this.subscript)},_setScript:function(l,u,f){var m=this.get2DCursorLocation(l,!0),g=this.getValueOfPropertyAt(m.lineIndex,m.charIndex,"fontSize"),p=this.getValueOfPropertyAt(m.lineIndex,m.charIndex,"deltaY"),v={fontSize:g*f.size,deltaY:p+g*f.baseline};return this.setSelectionStyles(v,l,u),this},_getLineLeftOffset:function(l){var u=this.getLineWidth(l),f=this.width-u,m=this.textAlign,g=this.direction,v,p=0,v=this.isEndOfWrapping(l);return m==="justify"||m==="justify-center"&&!v||m==="justify-right"&&!v||m==="justify-left"&&!v?0:(m==="center"&&(p=f/2),m==="right"&&(p=f),m==="justify-center"&&(p=f/2),m==="justify-right"&&(p=f),g==="rtl"&&(p-=f),p)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var l=this._forceClearCache;return l||(l=this.hasStateChanged("_dimensionAffectingProps")),l&&(this.dirty=!0,this._forceClearCache=!1),l},getLineWidth:function(l){if(this.__lineWidths[l]!==void 0)return this.__lineWidths[l];var u=this.measureLine(l),f=u.width;return this.__lineWidths[l]=f,f},_getWidthOfCharSpacing:function(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(l,u,f){var m=this._getStyleDeclaration(l,u);return m&&typeof m[f]<"u"?m[f]:this[f]},_renderTextDecoration:function(l,u){if(!(!this[u]&&!this.styleHas(u))){for(var f,m,g,p,v,b,_,S,w=this._getLeftOffset(),C=this._getTopOffset(),x,M,E,A,O,D,L,U,j=this.path,V=this._getWidthOfCharSpacing(),k=this.offsets[u],F=0,T=this._textLines.length;F<T;F++){if(f=this.getHeightOfLine(F),!this[u]&&!this.styleHas(u,F)){C+=f;continue}_=this._textLines[F],D=f/this.lineHeight,p=this._getLineLeftOffset(F),M=0,E=0,S=this.getValueOfPropertyAt(F,0,u),U=this.getValueOfPropertyAt(F,0,"fill"),x=C+D*(1-this._fontSizeFraction),m=this.getHeightOfChar(F,0),v=this.getValueOfPropertyAt(F,0,"deltaY");for(var P=0,H=_.length;P<H;P++)if(A=this.__charBounds[F][P],O=this.getValueOfPropertyAt(F,P,u),L=this.getValueOfPropertyAt(F,P,"fill"),g=this.getHeightOfChar(F,P),b=this.getValueOfPropertyAt(F,P,"deltaY"),j&&O&&L)l.save(),l.fillStyle=U,l.translate(A.renderLeft,A.renderTop),l.rotate(A.angle),l.fillRect(-A.kernedWidth/2,k*g+b,A.kernedWidth,this.fontSize/15),l.restore();else if((O!==S||L!==U||g!==m||b!==v)&&E>0){var N=w+p+M;this.direction==="rtl"&&(N=this.width-N-E),S&&U&&(l.fillStyle=U,l.fillRect(N,x+k*m+v,E,this.fontSize/15)),M=A.left,E=A.width,S=O,U=L,m=g,v=b}else E+=A.kernedWidth;var N=w+p+M;this.direction==="rtl"&&(N=this.width-N-E),l.fillStyle=L,O&&L&&l.fillRect(N,x+k*m+v,E-V,this.fontSize/15),C+=f}this._removeShadow(l)}},_getFontDeclaration:function(l,u){var f=l||this,m=this.fontFamily,g=o.Text.genericFonts.indexOf(m.toLowerCase())>-1,p=m===void 0||m.indexOf("'")>-1||m.indexOf(",")>-1||m.indexOf('"')>-1||g?f.fontFamily:'"'+f.fontFamily+'"';return[o.isLikelyNode?f.fontWeight:f.fontStyle,o.isLikelyNode?f.fontStyle:f.fontWeight,u?this.CACHE_FONT_SIZE+"px":f.fontSize+"px",p].join(" ")},render:function(l){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",l)))},_splitTextIntoLines:function(l){for(var u=l.split(this._reNewline),f=new Array(u.length),m=[`
`],g=[],p=0;p<u.length;p++)f[p]=o.util.string.graphemeSplit(u[p]),g=g.concat(f[p],m);return g.pop(),{_unwrappedLines:f,lines:u,graphemeText:g,graphemeLines:f}},toObject:function(l){var u=h.concat(l),f=this.callSuper("toObject",u);return f.styles=o.util.stylesToArray(this.styles,this.text),f.path&&(f.path=this.path.toObject()),f},set:function(l,u){this.callSuper("set",l,u);var f=!1,m=!1;if(typeof l=="object")for(var g in l)g==="path"&&this.setPathInfo(),f=f||this._dimensionAffectingProps.indexOf(g)!==-1,m=m||g==="path";else f=this._dimensionAffectingProps.indexOf(l)!==-1,m=l==="path";return m&&this.setPathInfo(),f&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),o.Text.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),o.Text.DEFAULT_SVG_FONT_SIZE=16,o.Text.fromElement=function(l,u,f){if(!l)return u(null);var m=o.parseAttributes(l,o.Text.ATTRIBUTE_NAMES),g=m.textAnchor||"left";if(f=o.util.object.extend(f?c(f):{},m),f.top=f.top||0,f.left=f.left||0,m.textDecoration){var p=m.textDecoration;p.indexOf("underline")!==-1&&(f.underline=!0),p.indexOf("overline")!==-1&&(f.overline=!0),p.indexOf("line-through")!==-1&&(f.linethrough=!0),delete f.textDecoration}"dx"in m&&(f.left+=m.dx),"dy"in m&&(f.top+=m.dy),"fontSize"in f||(f.fontSize=o.Text.DEFAULT_SVG_FONT_SIZE);var v="";"textContent"in l?v=l.textContent:"firstChild"in l&&l.firstChild!==null&&"data"in l.firstChild&&l.firstChild.data!==null&&(v=l.firstChild.data),v=v.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var b=f.strokeWidth;f.strokeWidth=0;var _=new o.Text(v,f),S=_.getScaledHeight()/_.height,w=(_.height+_.strokeWidth)*_.lineHeight-_.height,C=w*S,x=_.getScaledHeight()+C,M=0;g==="center"&&(M=_.getScaledWidth()/2),g==="right"&&(M=_.getScaledWidth()),_.set({left:_.left-M,top:_.top-(x-_.fontSize*(.07+_._fontSizeFraction))/_.lineHeight,strokeWidth:typeof b<"u"?b:1}),u(_)},o.Text.fromObject=function(l,u){var f=c(l),m=l.path;return delete f.path,o.Object._fromObject("Text",f,function(g){g.styles=o.util.stylesFromArray(l.styles,l.text),m?o.Object._fromObject("Path",m,function(p){g.set("path",p),u(g)},"path"):u(g)},"text")},o.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],o.util.createAccessors&&o.util.createAccessors(o.Text)}(t),function(){e.util.object.extend(e.Text.prototype,{isEmptyStyles:function(s){if(!this.styles||typeof s<"u"&&!this.styles[s])return!0;var o=typeof s>"u"?this.styles:{line:this.styles[s]};for(var c in o)for(var h in o[c])for(var l in o[c][h])return!1;return!0},styleHas:function(s,o){if(!this.styles||!s||s===""||typeof o<"u"&&!this.styles[o])return!1;var c=typeof o>"u"?this.styles:{0:this.styles[o]};for(var h in c)for(var l in c[h])if(typeof c[h][l][s]<"u")return!0;return!1},cleanStyle:function(s){if(!this.styles||!s||s==="")return!1;var o=this.styles,c=0,h,l,u=!0,f=0,m;for(var g in o){h=0;for(var p in o[g]){var m=o[g][p],v=m.hasOwnProperty(s);c++,v?(l?m[s]!==l&&(u=!1):l=m[s],m[s]===this[s]&&delete m[s]):u=!1,Object.keys(m).length!==0?h++:delete o[g][p]}h===0&&delete o[g]}for(var b=0;b<this._textLines.length;b++)f+=this._textLines[b].length;u&&c===f&&(this[s]=l,this.removeStyle(s))},removeStyle:function(s){if(!(!this.styles||!s||s==="")){var o=this.styles,c,h,l;for(h in o){c=o[h];for(l in c)delete c[l][s],Object.keys(c[l]).length===0&&delete c[l];Object.keys(c).length===0&&delete o[h]}}},_extendStyles:function(s,o){var c=this.get2DCursorLocation(s);this._getLineStyle(c.lineIndex)||this._setLineStyle(c.lineIndex),this._getStyleDeclaration(c.lineIndex,c.charIndex)||this._setStyleDeclaration(c.lineIndex,c.charIndex,{}),e.util.object.extend(this._getStyleDeclaration(c.lineIndex,c.charIndex),o)},get2DCursorLocation:function(s,o){typeof s>"u"&&(s=this.selectionStart);for(var c=o?this._unwrappedTextLines:this._textLines,h=c.length,l=0;l<h;l++){if(s<=c[l].length)return{lineIndex:l,charIndex:s};s-=c[l].length+this.missingNewlineOffset(l)}return{lineIndex:l-1,charIndex:c[l-1].length<s?c[l-1].length:s}},getSelectionStyles:function(s,o,c){typeof s>"u"&&(s=this.selectionStart||0),typeof o>"u"&&(o=this.selectionEnd||s);for(var h=[],l=s;l<o;l++)h.push(this.getStyleAtPosition(l,c));return h},getStyleAtPosition:function(s,o){var c=this.get2DCursorLocation(s),h=o?this.getCompleteStyleDeclaration(c.lineIndex,c.charIndex):this._getStyleDeclaration(c.lineIndex,c.charIndex);return h||{}},setSelectionStyles:function(s,o,c){typeof o>"u"&&(o=this.selectionStart||0),typeof c>"u"&&(c=this.selectionEnd||o);for(var h=o;h<c;h++)this._extendStyles(h,s);return this._forceClearCache=!0,this},_getStyleDeclaration:function(s,o){var c=this.styles&&this.styles[s];return c?c[o]:null},getCompleteStyleDeclaration:function(s,o){for(var c=this._getStyleDeclaration(s,o)||{},h={},l,u=0;u<this._styleProperties.length;u++)l=this._styleProperties[u],h[l]=typeof c[l]>"u"?this[l]:c[l];return h},_setStyleDeclaration:function(s,o,c){this.styles[s][o]=c},_deleteStyleDeclaration:function(s,o){delete this.styles[s][o]},_getLineStyle:function(s){return!!this.styles[s]},_setLineStyle:function(s){this.styles[s]={}},_deleteLineStyle:function(s){delete this.styles[s]}})}(),function(){function s(o){o.textDecoration&&(o.textDecoration.indexOf("underline")>-1&&(o.underline=!0),o.textDecoration.indexOf("line-through")>-1&&(o.linethrough=!0),o.textDecoration.indexOf("overline")>-1&&(o.overline=!0),delete o.textDecoration)}e.IText=e.util.createClass(e.Text,e.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(o,c){this.callSuper("initialize",o,c),this.initBehavior()},setSelectionStart:function(o){o=Math.max(o,0),this._updateAndFire("selectionStart",o)},setSelectionEnd:function(o){o=Math.min(o,this.text.length),this._updateAndFire("selectionEnd",o)},_updateAndFire:function(o,c){this[o]!==c&&(this._fireSelectionChanged(),this[o]=c),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(o){this.clearContextTop(),this.callSuper("render",o),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(o){this.callSuper("_render",o)},clearContextTop:function(o){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var c=this.canvas.contextTop,h=this.canvas.viewportTransform;c.save(),c.transform(h[0],h[1],h[2],h[3],h[4],h[5]),this.transform(c),this._clearTextArea(c),o||c.restore()}},renderCursorOrSelection:function(){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var o=this._getCursorBoundaries(),c=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(o,c):this.renderSelection(o,c),c.restore()}},_clearTextArea:function(o){var c=this.width+4,h=this.height+4;o.clearRect(-c/2,-h/2,c,h)},_getCursorBoundaries:function(o){typeof o>"u"&&(o=this.selectionStart);var c=this._getLeftOffset(),h=this._getTopOffset(),l=this._getCursorBoundariesOffsets(o);return{left:c,top:h,leftOffset:l.left,topOffset:l.top}},_getCursorBoundariesOffsets:function(o){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var c,h,l,u=0,f=0,m,g=this.get2DCursorLocation(o);l=g.charIndex,h=g.lineIndex;for(var p=0;p<h;p++)u+=this.getHeightOfLine(p);c=this._getLineLeftOffset(h);var v=this.__charBounds[h][l];return v&&(f=v.left),this.charSpacing!==0&&l===this._textLines[h].length&&(f-=this._getWidthOfCharSpacing()),m={top:u,left:c+(f>0?f:0)},this.direction==="rtl"&&(m.left*=-1),this.cursorOffsetCache=m,this.cursorOffsetCache},renderCursor:function(o,c){var h=this.get2DCursorLocation(),l=h.lineIndex,u=h.charIndex>0?h.charIndex-1:0,f=this.getValueOfPropertyAt(l,u,"fontSize"),m=this.scaleX*this.canvas.getZoom(),g=this.cursorWidth/m,p=o.topOffset,v=this.getValueOfPropertyAt(l,u,"deltaY");p+=(1-this._fontSizeFraction)*this.getHeightOfLine(l)/this.lineHeight-f*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(o,c),c.fillStyle=this.cursorColor||this.getValueOfPropertyAt(l,u,"fill"),c.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,c.fillRect(o.left+o.leftOffset-g/2,p+o.top+v,g,f)},renderSelection:function(o,c){for(var h=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,l=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,u=this.textAlign.indexOf("justify")!==-1,f=this.get2DCursorLocation(h),m=this.get2DCursorLocation(l),g=f.lineIndex,p=m.lineIndex,v=f.charIndex<0?0:f.charIndex,b=m.charIndex<0?0:m.charIndex,_=g;_<=p;_++){var S=this._getLineLeftOffset(_)||0,w=this.getHeightOfLine(_),C=0,x=0,M=0;if(_===g&&(x=this.__charBounds[g][v].left),_>=g&&_<p)M=u&&!this.isEndOfWrapping(_)?this.width:this.getLineWidth(_)||5;else if(_===p)if(b===0)M=this.__charBounds[p][b].left;else{var E=this._getWidthOfCharSpacing();M=this.__charBounds[p][b-1].left+this.__charBounds[p][b-1].width-E}C=w,(this.lineHeight<1||_===p&&this.lineHeight>1)&&(w/=this.lineHeight);var A=o.left+S+x,O=M-x,D=w,L=0;this.inCompositionMode?(c.fillStyle=this.compositionColor||"black",D=1,L=w):c.fillStyle=this.selectionColor,this.direction==="rtl"&&(A=this.width-A-O),c.fillRect(A,o.top+o.topOffset+L,O,D),o.topOffset+=C}},getCurrentCharFontSize:function(){var o=this._getCurrentCharIndex();return this.getValueOfPropertyAt(o.l,o.c,"fontSize")},getCurrentCharColor:function(){var o=this._getCurrentCharIndex();return this.getValueOfPropertyAt(o.l,o.c,"fill")},_getCurrentCharIndex:function(){var o=this.get2DCursorLocation(this.selectionStart,!0),c=o.charIndex>0?o.charIndex-1:0;return{l:o.lineIndex,c}}}),e.IText.fromObject=function(o,c){var h=e.util.stylesFromArray(o.styles,o.text),l=Object.assign({},o,{styles:h});if(s(l),l.styles)for(var u in l.styles)for(var f in l.styles[u])s(l.styles[u][f]);e.Object._fromObject("IText",l,c,"text")}}(),function(){var s=e.util.object.clone;e.util.object.extend(e.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var o=this;this.on("added",function(){var c=o.canvas;c&&(c._hasITextHandlers||(c._hasITextHandlers=!0,o._initCanvasHandlers(c)),c._iTextInstances=c._iTextInstances||[],c._iTextInstances.push(o))})},initRemovedHandler:function(){var o=this;this.on("removed",function(){var c=o.canvas;c&&(c._iTextInstances=c._iTextInstances||[],e.util.removeFromArray(c._iTextInstances,o),c._iTextInstances.length===0&&(c._hasITextHandlers=!1,o._removeCanvasHandlers(c)))})},_initCanvasHandlers:function(o){o._mouseUpITextHandler=function(){o._iTextInstances&&o._iTextInstances.forEach(function(c){c.__isMousedown=!1})},o.on("mouse:up",o._mouseUpITextHandler)},_removeCanvasHandlers:function(o){o.off("mouse:up",o._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(o,c,h,l){var u;return u={isAborted:!1,abort:function(){this.isAborted=!0}},o.animate("_currentCursorOpacity",c,{duration:h,onComplete:function(){u.isAborted||o[l]()},onChange:function(){o.canvas&&o.selectionStart===o.selectionEnd&&o.renderCursorOrSelection()},abort:function(){return u.isAborted}}),u},_onTickComplete:function(){var o=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){o._currentTickCompleteState=o._animateCursor(o,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(o){var c=this,h=o?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){c._tick()},h)},abortCursorAnimation:function(){var o=this._currentTickState||this._currentTickCompleteState,c=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,o&&c&&c.clearContext(c.contextTop||c.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(o){var c=0,h=o-1;if(this._reSpace.test(this._text[h]))for(;this._reSpace.test(this._text[h]);)c++,h--;for(;/\S/.test(this._text[h])&&h>-1;)c++,h--;return o-c},findWordBoundaryRight:function(o){var c=0,h=o;if(this._reSpace.test(this._text[h]))for(;this._reSpace.test(this._text[h]);)c++,h++;for(;/\S/.test(this._text[h])&&h<this._text.length;)c++,h++;return o+c},findLineBoundaryLeft:function(o){for(var c=0,h=o-1;!/\n/.test(this._text[h])&&h>-1;)c++,h--;return o-c},findLineBoundaryRight:function(o){for(var c=0,h=o;!/\n/.test(this._text[h])&&h<this._text.length;)c++,h++;return o+c},searchWordBoundary:function(o,c){for(var h=this._text,l=this._reSpace.test(h[o])?o-1:o,u=h[l],f=e.reNonWord;!f.test(u)&&l>0&&l<h.length;)l+=c,u=h[l];return f.test(u)&&(l+=c===1?0:1),l},selectWord:function(o){o=o||this.selectionStart;var c=this.searchWordBoundary(o,-1),h=this.searchWordBoundary(o,1);this.selectionStart=c,this.selectionEnd=h,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(o){o=o||this.selectionStart;var c=this.findLineBoundaryLeft(o),h=this.findLineBoundaryRight(o);return this.selectionStart=c,this.selectionEnd=h,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(o){if(!(this.isEditing||!this.editable))return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(o),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(o){o._iTextInstances&&o._iTextInstances.forEach(function(c){c.selected=!1,c.isEditing&&c.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(o){if(!(!this.__isMousedown||!this.isEditing)){document.activeElement!==this.hiddenTextarea&&this.hiddenTextarea.focus();var c=this.getSelectionStartFromPointer(o.e),h=this.selectionStart,l=this.selectionEnd;(c!==this.__selectionStartOnMouseDown||h===l)&&(h===c||l===c)||(c>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=c):(this.selectionStart=c,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==h||this.selectionEnd!==l)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(o,c,h){var l=h.slice(0,o),u=e.util.string.graphemeSplit(l).length;if(o===c)return{selectionStart:u,selectionEnd:u};var f=h.slice(o,c),m=e.util.string.graphemeSplit(f).length;return{selectionStart:u,selectionEnd:u+m}},fromGraphemeToStringSelection:function(o,c,h){var l=h.slice(0,o),u=l.join("").length;if(o===c)return{selectionStart:u,selectionEnd:u};var f=h.slice(o,c),m=f.join("").length;return{selectionStart:u,selectionEnd:u+m}},_updateTextarea:function(){if(this.cursorOffsetCache={},!!this.hiddenTextarea){if(!this.inCompositionMode){var o=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=o.selectionStart,this.hiddenTextarea.selectionEnd=o.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var o=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=o.selectionEnd,this.inCompositionMode||(this.selectionStart=o.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var o=this._calcTextareaPosition();this.hiddenTextarea.style.left=o.left,this.hiddenTextarea.style.top=o.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var o=this.inCompositionMode?this.compositionStart:this.selectionStart,c=this._getCursorBoundaries(o),h=this.get2DCursorLocation(o),l=h.lineIndex,u=h.charIndex,f=this.getValueOfPropertyAt(l,u,"fontSize")*this.lineHeight,m=c.leftOffset,g=this.calcTransformMatrix(),p={x:c.left+m,y:c.top+c.topOffset+f},v=this.canvas.getRetinaScaling(),b=this.canvas.upperCanvasEl,_=b.width/v,S=b.height/v,w=_-f,C=S-f,x=b.clientWidth/_,M=b.clientHeight/S;return p=e.util.transformPoint(p,g),p=e.util.transformPoint(p,this.canvas.viewportTransform),p.x*=x,p.y*=M,p.x<0&&(p.x=0),p.x>w&&(p.x=w),p.y<0&&(p.y=0),p.y>C&&(p.y=C),p.x+=this.canvas._offset.left,p.y+=this.canvas._offset.top,{left:p.x+"px",top:p.y+"px",fontSize:f+"px",charHeight:f}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var o=this._textBeforeEdit!==this.text,c=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,c&&(c.blur&&c.blur(),c.parentNode&&c.parentNode.removeChild(c)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),o&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),o&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var o in this.styles)this._textLines[o]||delete this.styles[o]},removeStyleFromTo:function(o,c){var h=this.get2DCursorLocation(o,!0),l=this.get2DCursorLocation(c,!0),u=h.lineIndex,f=h.charIndex,m=l.lineIndex,g=l.charIndex,p,v;if(u!==m){if(this.styles[u])for(p=f;p<this._unwrappedTextLines[u].length;p++)delete this.styles[u][p];if(this.styles[m])for(p=g;p<this._unwrappedTextLines[m].length;p++)v=this.styles[m][p],v&&(this.styles[u]||(this.styles[u]={}),this.styles[u][f+p-g]=v);for(p=u+1;p<=m;p++)delete this.styles[p];this.shiftLineStyles(m,u-m)}else if(this.styles[u]){v=this.styles[u];var b=g-f,_,S;for(p=f;p<g;p++)delete v[p];for(S in this.styles[u])_=parseInt(S,10),_>=g&&(v[_-b]=v[S],delete v[S])}},shiftLineStyles:function(o,c){var h=s(this.styles);for(var l in this.styles){var u=parseInt(l,10);u>o&&(this.styles[u+c]=h[u],h[u-c]||delete this.styles[u])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(o,c,h,l){var u,f={},m=!1,g=this._unwrappedTextLines[o].length===c;h||(h=1),this.shiftLineStyles(o,h),this.styles[o]&&(u=this.styles[o][c===0?c:c-1]);for(var p in this.styles[o]){var v=parseInt(p,10);v>=c&&(m=!0,f[v-c]=this.styles[o][p],g&&c===0||delete this.styles[o][p])}var b=!1;for(m&&!g&&(this.styles[o+h]=f,b=!0),b&&h--;h>0;)l&&l[h-1]?this.styles[o+h]={0:s(l[h-1])}:u?this.styles[o+h]={0:s(u)}:delete this.styles[o+h],h--;this._forceClearCache=!0},insertCharStyleObject:function(o,c,h,l){this.styles||(this.styles={});var u=this.styles[o],f=u?s(u):{};h||(h=1);for(var m in f){var g=parseInt(m,10);g>=c&&(u[g+h]=f[g],f[g-h]||delete u[g])}if(this._forceClearCache=!0,l){for(;h--;)Object.keys(l[h]).length&&(this.styles[o]||(this.styles[o]={}),this.styles[o][c+h]=s(l[h]));return}if(u)for(var p=u[c?c-1:1];p&&h--;)this.styles[o][c+h]=s(p)},insertNewStyleBlock:function(o,c,h){for(var l=this.get2DCursorLocation(c,!0),u=[0],f=0,m=0;m<o.length;m++)o[m]===`
`?(f++,u[f]=0):u[f]++;u[0]>0&&(this.insertCharStyleObject(l.lineIndex,l.charIndex,u[0],h),h=h&&h.slice(u[0]+1)),f&&this.insertNewlineStyleObject(l.lineIndex,l.charIndex+u[0],f);for(var m=1;m<f;m++)u[m]>0?this.insertCharStyleObject(l.lineIndex+m,0,u[m],h):h&&this.styles[l.lineIndex+m]&&h[0]&&(this.styles[l.lineIndex+m][0]=h[0]),h=h&&h.slice(u[m]+1);u[m]>0&&this.insertCharStyleObject(l.lineIndex+m,0,u[m],h)},setSelectionStartEndWithShift:function(o,c,h){h<=o?(c===o?this._selectionDirection="left":this._selectionDirection==="right"&&(this._selectionDirection="left",this.selectionEnd=o),this.selectionStart=h):h>o&&h<c?this._selectionDirection==="right"?this.selectionEnd=h:this.selectionStart=h:(c===o?this._selectionDirection="right":this._selectionDirection==="left"&&(this._selectionDirection="right",this.selectionStart=c),this.selectionEnd=h)},setSelectionInBoundaries:function(){var o=this.text.length;this.selectionStart>o?this.selectionStart=o:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>o?this.selectionEnd=o:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),e.util.object.extend(e.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(s){if(this.canvas){this.__newClickTime=+new Date;var o=s.pointer;this.isTripleClick(o)&&(this.fire("tripleclick",s),this._stopEvent(s.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=o,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(s){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===s.x&&this.__lastPointer.y===s.y},_stopEvent:function(s){s.preventDefault&&s.preventDefault(),s.stopPropagation&&s.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(s){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(s.e))},tripleClickHandler:function(s){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(s.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(s){!this.canvas||!this.editable||s.e.button&&s.e.button!==1||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(s.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(s){!this.canvas||!this.editable||s.e.button&&s.e.button!==1||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(s){if(this.__isMousedown=!1,!(!this.editable||this.group||s.transform&&s.transform.actionPerformed||s.e.button&&s.e.button!==1)){if(this.canvas){var o=this.canvas._activeObject;if(o&&o!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(s.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(s){var o=this.getSelectionStartFromPointer(s),c=this.selectionStart,h=this.selectionEnd;s.shiftKey?this.setSelectionStartEndWithShift(c,h,o):(this.selectionStart=o,this.selectionEnd=o),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(s){for(var o=this.getLocalPointer(s),c=0,h=0,l=0,u=0,f=0,m,g,p=0,v=this._textLines.length;p<v&&l<=o.y;p++)l+=this.getHeightOfLine(p)*this.scaleY,f=p,p>0&&(u+=this._textLines[p-1].length+this.missingNewlineOffset(p-1));m=this._getLineLeftOffset(f),h=m*this.scaleX,g=this._textLines[f],this.direction==="rtl"&&(o.x=this.width*this.scaleX-o.x+h);for(var b=0,_=g.length;b<_&&(c=h,h+=this.__charBounds[f][b].kernedWidth*this.scaleX,h<=o.x);b++)u++;return this._getNewSelectionStartFromOffset(o,c,h,u,_)},_getNewSelectionStartFromOffset:function(s,o,c,h,l){var u=s.x-o,f=c-s.x,m=f>u||f<0?0:1,g=h+m;return this.flipX&&(g=l-g),g>this._text.length&&(g=this._text.length),g}}),e.util.object.extend(e.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=e.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var s=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+s.top+"; left: "+s.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: "+s.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):e.document.body.appendChild(this.hiddenTextarea),e.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),e.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),e.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),e.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),e.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),e.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(e.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(s){if(this.isEditing){var o=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(s.keyCode in o)this[o[s.keyCode]](s);else if(s.keyCode in this.ctrlKeysMapDown&&(s.ctrlKey||s.metaKey))this[this.ctrlKeysMapDown[s.keyCode]](s);else return;s.stopImmediatePropagation(),s.preventDefault(),s.keyCode>=33&&s.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(s){if(!this.isEditing||this._copyDone||this.inCompositionMode){this._copyDone=!1;return}if(s.keyCode in this.ctrlKeysMapUp&&(s.ctrlKey||s.metaKey))this[this.ctrlKeysMapUp[s.keyCode]](s);else return;s.stopImmediatePropagation(),s.preventDefault(),this.canvas&&this.canvas.requestRenderAll()},onInput:function(s){var o=this.fromPaste;if(this.fromPaste=!1,s&&s.stopPropagation(),!!this.isEditing){var c=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,h=this._text.length,l=c.length,u,f,m=l-h,g=this.selectionStart,p=this.selectionEnd,v=g!==p,b,_,S;if(this.hiddenTextarea.value===""){this.styles={},this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll());return}var w=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),C=g>w.selectionStart;v?(u=this._text.slice(g,p),m+=p-g):l<h&&(C?u=this._text.slice(p+m,p):u=this._text.slice(g,g-m)),f=c.slice(w.selectionEnd-m,w.selectionEnd),u&&u.length&&(f.length&&(b=this.getSelectionStyles(g,g+1,!1),b=f.map(function(){return b[0]})),v?(_=g,S=p):C?(_=p-u.length,S=p):(_=p,S=p+u.length),this.removeStyleFromTo(_,S)),f.length&&(o&&f.join("")===e.copiedText&&!e.disableStyleCopyPaste&&(b=e.copiedTextStyle),this.insertNewStyleBlock(f,g,b)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(s){this.compositionStart=s.target.selectionStart,this.compositionEnd=s.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(e.copiedText=this.getSelectedText(),e.disableStyleCopyPaste?e.copiedTextStyle=null:e.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(s){return s&&s.clipboardData||e.window.clipboardData},_getWidthBeforeCursor:function(s,o){var c=this._getLineLeftOffset(s),h;return o>0&&(h=this.__charBounds[s][o-1],c+=h.left+h.width),c},getDownCursorOffset:function(s,o){var c=this._getSelectionForOffset(s,o),h=this.get2DCursorLocation(c),l=h.lineIndex;if(l===this._textLines.length-1||s.metaKey||s.keyCode===34)return this._text.length-c;var u=h.charIndex,f=this._getWidthBeforeCursor(l,u),m=this._getIndexOnLine(l+1,f),g=this._textLines[l].slice(u);return g.length+m+1+this.missingNewlineOffset(l)},_getSelectionForOffset:function(s,o){return s.shiftKey&&this.selectionStart!==this.selectionEnd&&o?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(s,o){var c=this._getSelectionForOffset(s,o),h=this.get2DCursorLocation(c),l=h.lineIndex;if(l===0||s.metaKey||s.keyCode===33)return-c;var u=h.charIndex,f=this._getWidthBeforeCursor(l,u),m=this._getIndexOnLine(l-1,f),g=this._textLines[l].slice(0,u),p=this.missingNewlineOffset(l-1);return-this._textLines[l-1].length+m-g.length+(1-p)},_getIndexOnLine:function(s,o){for(var c=this._textLines[s],h=this._getLineLeftOffset(s),l=h,u=0,f,m,g=0,p=c.length;g<p;g++)if(f=this.__charBounds[s][g].width,l+=f,l>o){m=!0;var v=l-f,b=l,_=Math.abs(v-o),S=Math.abs(b-o);u=S<_?g:g-1;break}return m||(u=c.length-1),u},moveCursorDown:function(s){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",s)},moveCursorUp:function(s){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",s)},_moveCursorUpOrDown:function(s,o){var c="get"+s+"CursorOffset",h=this[c](o,this._selectionDirection==="right");o.shiftKey?this.moveCursorWithShift(h):this.moveCursorWithoutShift(h),h!==0&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(s){var o=this._selectionDirection==="left"?this.selectionStart+s:this.selectionEnd+s;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,o),s!==0},moveCursorWithoutShift:function(s){return s<0?(this.selectionStart+=s,this.selectionEnd=this.selectionStart):(this.selectionEnd+=s,this.selectionStart=this.selectionEnd),s!==0},moveCursorLeft:function(s){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",s)},_move:function(s,o,c){var h;if(s.altKey)h=this["findWordBoundary"+c](this[o]);else if(s.metaKey||s.keyCode===35||s.keyCode===36)h=this["findLineBoundary"+c](this[o]);else return this[o]+=c==="Left"?-1:1,!0;if(typeof h<"u"&&this[o]!==h)return this[o]=h,!0},_moveLeft:function(s,o){return this._move(s,o,"Left")},_moveRight:function(s,o){return this._move(s,o,"Right")},moveCursorLeftWithoutShift:function(s){var o=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(o=this._moveLeft(s,"selectionStart")),this.selectionEnd=this.selectionStart,o},moveCursorLeftWithShift:function(s){if(this._selectionDirection==="right"&&this.selectionStart!==this.selectionEnd)return this._moveLeft(s,"selectionEnd");if(this.selectionStart!==0)return this._selectionDirection="left",this._moveLeft(s,"selectionStart")},moveCursorRight:function(s){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",s)},_moveCursorLeftOrRight:function(s,o){var c="moveCursor"+s+"With";this._currentCursorOpacity=1,o.shiftKey?c+="Shift":c+="outShift",this[c](o)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(s){if(this._selectionDirection==="left"&&this.selectionStart!==this.selectionEnd)return this._moveRight(s,"selectionStart");if(this.selectionEnd!==this._text.length)return this._selectionDirection="right",this._moveRight(s,"selectionEnd")},moveCursorRightWithoutShift:function(s){var o=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(o=this._moveRight(s,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,o},removeChars:function(s,o){typeof o>"u"&&(o=s+1),this.removeStyleFromTo(s,o),this._text.splice(s,o-s),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(s,o,c,h){typeof h>"u"&&(h=c),h>c&&this.removeStyleFromTo(c,h);var l=e.util.string.graphemeSplit(s);this.insertNewStyleBlock(l,c,o),this._text=[].concat(this._text.slice(0,c),l,this._text.slice(h)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var s=e.util.toFixed,o=/  +/g;e.util.object.extend(e.Text.prototype,{_toSVG:function(){var c=this._getSVGLeftTopOffsets(),h=this._getSVGTextAndBg(c.textTop,c.textLeft);return this._wrapSVGTextAndBg(h)},toSVG:function(c){return this._createBaseSVGMarkup(this._toSVG(),{reviver:c,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(c){var h=!0,l=this.getSvgTextDecoration(this);return[c.textBgRects.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",l?'text-decoration="'+l+'" ':"",'style="',this.getSvgStyles(h),'"',this.addPaintOrder()," >",c.textSpans.join(""),`</text>
`]},_getSVGTextAndBg:function(c,h){var l=[],u=[],f=c,m;this._setSVGBg(u);for(var g=0,p=this._textLines.length;g<p;g++)m=this._getLineLeftOffset(g),(this.textBackgroundColor||this.styleHas("textBackgroundColor",g))&&this._setSVGTextLineBg(u,g,h+m,f),this._setSVGTextLineText(l,g,h+m,f),f+=this.getHeightOfLine(g);return{textSpans:l,textBgRects:u}},_createTextCharSpan:function(c,h,l,u){var f=c!==c.trim()||c.match(o),m=this.getSvgSpanStyles(h,f),g=m?'style="'+m+'"':"",p=h.deltaY,v="",b=e.Object.NUM_FRACTION_DIGITS;return p&&(v=' dy="'+s(p,b)+'" '),['<tspan x="',s(l,b),'" y="',s(u,b),'" ',v,g,">",e.util.string.escapeXml(c),"</tspan>"].join("")},_setSVGTextLineText:function(c,h,l,u){var f=this.getHeightOfLine(h),m=this.textAlign.indexOf("justify")!==-1,g,p,v="",b,_,S=0,w=this._textLines[h],C;u+=f*(1-this._fontSizeFraction)/this.lineHeight;for(var x=0,M=w.length-1;x<=M;x++)C=x===M||this.charSpacing,v+=w[x],b=this.__charBounds[h][x],S===0?(l+=b.kernedWidth-b.width,S+=b.width):S+=b.kernedWidth,m&&!C&&this._reSpaceAndTab.test(w[x])&&(C=!0),C||(g=g||this.getCompleteStyleDeclaration(h,x),p=this.getCompleteStyleDeclaration(h,x+1),C=e.util.hasStyleChanged(g,p,!0)),C&&(_=this._getStyleDeclaration(h,x)||{},c.push(this._createTextCharSpan(v,_,l,u)),v="",g=p,l+=S,S=0)},_pushTextBgRect:function(c,h,l,u,f,m){var g=e.Object.NUM_FRACTION_DIGITS;c.push("		<rect ",this._getFillAttributes(h),' x="',s(l,g),'" y="',s(u,g),'" width="',s(f,g),'" height="',s(m,g),`"></rect>
`)},_setSVGTextLineBg:function(c,h,l,u){for(var f=this._textLines[h],m=this.getHeightOfLine(h)/this.lineHeight,g=0,p=0,v,b,_=this.getValueOfPropertyAt(h,0,"textBackgroundColor"),S=0,w=f.length;S<w;S++)v=this.__charBounds[h][S],b=this.getValueOfPropertyAt(h,S,"textBackgroundColor"),b!==_?(_&&this._pushTextBgRect(c,_,l+p,u,g,m),p=v.left,g=v.width,_=b):g+=v.kernedWidth;b&&this._pushTextBgRect(c,b,l+p,u,g,m)},_getFillAttributes:function(c){var h=c&&typeof c=="string"?new e.Color(c):"";return!h||!h.getSource()||h.getAlpha()===1?'fill="'+c+'"':'opacity="'+h.getAlpha()+'" fill="'+h.setAlpha(1).toRgb()+'"'},_getSVGLineTopOffset:function(c){for(var h=0,l=0,u=0;u<c;u++)h+=this.getHeightOfLine(u);return l=this.getHeightOfLine(u),{lineTop:h,offset:(this._fontSizeMult-this._fontSizeFraction)*l/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(c){var h=e.Object.prototype.getSvgStyles.call(this,c);return h+" white-space: pre;"}})}(),function(s){var o=s.fabric||(s.fabric={});o.Textbox=o.util.createClass(o.IText,o.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:o.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(c){for(var h=0,l=0,u=0,f={},m=0;m<c.graphemeLines.length;m++)c.graphemeText[u]===`
`&&m>0?(l=0,u++,h++):!this.splitByGrapheme&&this._reSpaceAndTab.test(c.graphemeText[u])&&m>0&&(l++,u++),f[m]={line:h,offset:l},u+=c.graphemeLines[m].length,l+=c.graphemeLines[m].length;return f},styleHas:function(c,h){if(this._styleMap&&!this.isWrapping){var l=this._styleMap[h];l&&(h=l.line)}return o.Text.prototype.styleHas.call(this,c,h)},isEmptyStyles:function(c){if(!this.styles)return!0;var h=0,l=c+1,u,f,m=!1,g=this._styleMap[c],p=this._styleMap[c+1];g&&(c=g.line,h=g.offset),p&&(l=p.line,m=l===c,u=p.offset),f=typeof c>"u"?this.styles:{line:this.styles[c]};for(var v in f)for(var b in f[v])if(b>=h&&(!m||b<u))for(var _ in f[v][b])return!1;return!0},_getStyleDeclaration:function(c,h){if(this._styleMap&&!this.isWrapping){var l=this._styleMap[c];if(!l)return null;c=l.line,h=l.offset+h}return this.callSuper("_getStyleDeclaration",c,h)},_setStyleDeclaration:function(c,h,l){var u=this._styleMap[c];c=u.line,h=u.offset+h,this.styles[c][h]=l},_deleteStyleDeclaration:function(c,h){var l=this._styleMap[c];c=l.line,h=l.offset+h,delete this.styles[c][h]},_getLineStyle:function(c){var h=this._styleMap[c];return!!this.styles[h.line]},_setLineStyle:function(c){var h=this._styleMap[c];this.styles[h.line]={}},_wrapText:function(c,h){var l=[],u;for(this.isWrapping=!0,u=0;u<c.length;u++)l=l.concat(this._wrapLine(c[u],u,h));return this.isWrapping=!1,l},_measureWord:function(c,h,l){var u=0,f,m=!0;l=l||0;for(var g=0,p=c.length;g<p;g++){var v=this._getGraphemeBox(c[g],h,g+l,f,m);u+=v.kernedWidth,f=c[g]}return u},_wrapLine:function(c,h,l,A){var f=0,m=this.splitByGrapheme,g=[],p=[],v=m?o.util.string.graphemeSplit(c):c.split(this._wordJoiners),b="",_=0,S=m?"":" ",w=0,C=0,x=0,M=!0,E=this._getWidthOfCharSpacing(),A=A||0;v.length===0&&v.push([]),l-=A;for(var O=0;O<v.length;O++)b=m?v[O]:o.util.string.graphemeSplit(v[O]),w=this._measureWord(b,h,_),_+=b.length,f+=C+w-E,f>l&&!M?(g.push(p),p=[],f=w,M=!0):f+=E,!M&&!m&&p.push(S),p=p.concat(b),C=m?0:this._measureWord([S],h,_),_++,M=!1,w>x&&(x=w);return O&&g.push(p),x+A>this.dynamicMinWidth&&(this.dynamicMinWidth=x-E+A),g},isEndOfWrapping:function(c){return!this._styleMap[c+1]||this._styleMap[c+1].line!==this._styleMap[c].line},missingNewlineOffset:function(c){return this.splitByGrapheme?this.isEndOfWrapping(c)?1:0:1},_splitTextIntoLines:function(c){for(var h=o.Text.prototype._splitTextIntoLines.call(this,c),l=this._wrapText(h.lines,this.width),u=new Array(l.length),f=0;f<l.length;f++)u[f]=l[f].join("");return h.lines=u,h.graphemeLines=l,h},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var c={};for(var h in this._styleMap)this._textLines[h]&&(c[this._styleMap[h].line]=1);for(var h in this.styles)c[h]||delete this.styles[h]},toObject:function(c){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(c))}}),o.Textbox.fromObject=function(c,h){var l=o.util.stylesFromArray(c.styles,c.text),u=Object.assign({},c,{styles:l});return o.Object._fromObject("Textbox",u,h,"text")}}(t),function(){var s=e.controlsUtils,o=s.scaleSkewCursorStyleHandler,c=s.scaleCursorStyleHandler,h=s.scalingEqually,l=s.scalingYOrSkewingX,u=s.scalingXOrSkewingY,f=s.scaleOrSkewActionName,m=e.Object.prototype.controls;if(m.ml=new e.Control({x:-.5,y:0,cursorStyleHandler:o,actionHandler:u,getActionName:f}),m.mr=new e.Control({x:.5,y:0,cursorStyleHandler:o,actionHandler:u,getActionName:f}),m.mb=new e.Control({x:0,y:.5,cursorStyleHandler:o,actionHandler:l,getActionName:f}),m.mt=new e.Control({x:0,y:-.5,cursorStyleHandler:o,actionHandler:l,getActionName:f}),m.tl=new e.Control({x:-.5,y:-.5,cursorStyleHandler:c,actionHandler:h}),m.tr=new e.Control({x:.5,y:-.5,cursorStyleHandler:c,actionHandler:h}),m.bl=new e.Control({x:-.5,y:.5,cursorStyleHandler:c,actionHandler:h}),m.br=new e.Control({x:.5,y:.5,cursorStyleHandler:c,actionHandler:h}),m.mtr=new e.Control({x:0,y:-.5,actionHandler:s.rotationWithSnapping,cursorStyleHandler:s.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),e.Textbox){var g=e.Textbox.prototype.controls={};g.mtr=m.mtr,g.tr=m.tr,g.br=m.br,g.tl=m.tl,g.bl=m.bl,g.mt=m.mt,g.mb=m.mb,g.mr=new e.Control({x:.5,y:0,actionHandler:s.changeWidth,cursorStyleHandler:o,actionName:"resizing"}),g.ml=new e.Control({x:-.5,y:0,actionHandler:s.changeWidth,cursorStyleHandler:o,actionName:"resizing"})}}()})(Sn);const w_={type:"change"},Pp={type:"start"},C_={type:"end"};class j3 extends la{constructor(e,n){super(),this.object=e,this.domElement=n,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new Fe,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:ma.ROTATE,MIDDLE:ma.DOLLY,RIGHT:ma.PAN},this.touches={ONE:ga.ROTATE,TWO:ga.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return s.phi},this.getAzimuthalAngle=function(){return s.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(he){he.addEventListener("keydown",Me),this._domElementKeyEvents=he},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",Me),this._domElementKeyEvents=null},this.saveState=function(){i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=function(){i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(w_),i.update(),a=r.NONE},this.update=function(){const he=new Fe,pe=new Or().setFromUnitVectors(e.up,new Fe(0,1,0)),ee=pe.clone().invert(),oe=new Fe,J=new Or,ce=2*Math.PI;return function(){const Oe=i.object.position;he.copy(Oe).sub(i.target),he.applyQuaternion(pe),s.setFromVector3(he),i.autoRotate&&a===r.NONE&&E(x()),i.enableDamping?(s.theta+=o.theta*i.dampingFactor,s.phi+=o.phi*i.dampingFactor):(s.theta+=o.theta,s.phi+=o.phi);let ze=i.minAzimuthAngle,xe=i.maxAzimuthAngle;return isFinite(ze)&&isFinite(xe)&&(ze<-Math.PI?ze+=ce:ze>Math.PI&&(ze-=ce),xe<-Math.PI?xe+=ce:xe>Math.PI&&(xe-=ce),ze<=xe?s.theta=Math.max(ze,Math.min(xe,s.theta)):s.theta=s.theta>(ze+xe)/2?Math.max(ze,s.theta):Math.min(xe,s.theta)),s.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,s.phi)),s.makeSafe(),s.radius*=c,s.radius=Math.max(i.minDistance,Math.min(i.maxDistance,s.radius)),i.enableDamping===!0?i.target.addScaledVector(h,i.dampingFactor):i.target.add(h),he.setFromSpherical(s),he.applyQuaternion(ee),Oe.copy(i.target).add(he),i.object.lookAt(i.target),i.enableDamping===!0?(o.theta*=1-i.dampingFactor,o.phi*=1-i.dampingFactor,h.multiplyScalar(1-i.dampingFactor)):(o.set(0,0,0),h.set(0,0,0)),c=1,l||oe.distanceToSquared(i.object.position)>d||8*(1-J.dot(i.object.quaternion))>d?(i.dispatchEvent(w_),oe.copy(i.object.position),J.copy(i.object.quaternion),l=!1,!0):!1}}(),this.dispose=function(){i.domElement.removeEventListener("contextmenu",Y),i.domElement.removeEventListener("pointerdown",Q),i.domElement.removeEventListener("pointercancel",ge),i.domElement.removeEventListener("wheel",be),i.domElement.removeEventListener("pointermove",fe),i.domElement.removeEventListener("pointerup",ge),i._domElementKeyEvents!==null&&(i._domElementKeyEvents.removeEventListener("keydown",Me),i._domElementKeyEvents=null)};const i=this,r={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let a=r.NONE;const d=1e-6,s=new S_,o=new S_;let c=1;const h=new Fe;let l=!1;const u=new It,f=new It,m=new It,g=new It,p=new It,v=new It,b=new It,_=new It,S=new It,w=[],C={};function x(){return 2*Math.PI/60/60*i.autoRotateSpeed}function M(){return Math.pow(.95,i.zoomSpeed)}function E(he){o.theta-=he}function A(he){o.phi-=he}const O=function(){const he=new Fe;return function(ee,oe){he.setFromMatrixColumn(oe,0),he.multiplyScalar(-ee),h.add(he)}}(),D=function(){const he=new Fe;return function(ee,oe){i.screenSpacePanning===!0?he.setFromMatrixColumn(oe,1):(he.setFromMatrixColumn(oe,0),he.crossVectors(i.object.up,he)),he.multiplyScalar(ee),h.add(he)}}(),L=function(){const he=new Fe;return function(ee,oe){const J=i.domElement;if(i.object.isPerspectiveCamera){const ce=i.object.position;he.copy(ce).sub(i.target);let ye=he.length();ye*=Math.tan(i.object.fov/2*Math.PI/180),O(2*ee*ye/J.clientHeight,i.object.matrix),D(2*oe*ye/J.clientHeight,i.object.matrix)}else i.object.isOrthographicCamera?(O(ee*(i.object.right-i.object.left)/i.object.zoom/J.clientWidth,i.object.matrix),D(oe*(i.object.top-i.object.bottom)/i.object.zoom/J.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}}();function U(he){i.object.isPerspectiveCamera?c/=he:i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom*he)),i.object.updateProjectionMatrix(),l=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function j(he){i.object.isPerspectiveCamera?c*=he:i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/he)),i.object.updateProjectionMatrix(),l=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function V(he){u.set(he.clientX,he.clientY)}function k(he){b.set(he.clientX,he.clientY)}function F(he){g.set(he.clientX,he.clientY)}function T(he){f.set(he.clientX,he.clientY),m.subVectors(f,u).multiplyScalar(i.rotateSpeed);const pe=i.domElement;E(2*Math.PI*m.x/pe.clientHeight),A(2*Math.PI*m.y/pe.clientHeight),u.copy(f),i.update()}function P(he){_.set(he.clientX,he.clientY),S.subVectors(_,b),S.y>0?U(M()):S.y<0&&j(M()),b.copy(_),i.update()}function H(he){p.set(he.clientX,he.clientY),v.subVectors(p,g).multiplyScalar(i.panSpeed),L(v.x,v.y),g.copy(p),i.update()}function N(he){he.deltaY<0?j(M()):he.deltaY>0&&U(M()),i.update()}function G(he){let pe=!1;switch(he.code){case i.keys.UP:he.ctrlKey||he.metaKey||he.shiftKey?A(2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):L(0,i.keyPanSpeed),pe=!0;break;case i.keys.BOTTOM:he.ctrlKey||he.metaKey||he.shiftKey?A(-2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):L(0,-i.keyPanSpeed),pe=!0;break;case i.keys.LEFT:he.ctrlKey||he.metaKey||he.shiftKey?E(2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):L(i.keyPanSpeed,0),pe=!0;break;case i.keys.RIGHT:he.ctrlKey||he.metaKey||he.shiftKey?E(-2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):L(-i.keyPanSpeed,0),pe=!0;break}pe&&(he.preventDefault(),i.update())}function $(){if(w.length===1)u.set(w[0].pageX,w[0].pageY);else{const he=.5*(w[0].pageX+w[1].pageX),pe=.5*(w[0].pageY+w[1].pageY);u.set(he,pe)}}function z(){if(w.length===1)g.set(w[0].pageX,w[0].pageY);else{const he=.5*(w[0].pageX+w[1].pageX),pe=.5*(w[0].pageY+w[1].pageY);g.set(he,pe)}}function Z(){const he=w[0].pageX-w[1].pageX,pe=w[0].pageY-w[1].pageY,ee=Math.sqrt(he*he+pe*pe);b.set(0,ee)}function W(){i.enableZoom&&Z(),i.enablePan&&z()}function te(){i.enableZoom&&Z(),i.enableRotate&&$()}function ie(he){if(w.length==1)f.set(he.pageX,he.pageY);else{const ee=Ne(he),oe=.5*(he.pageX+ee.x),J=.5*(he.pageY+ee.y);f.set(oe,J)}m.subVectors(f,u).multiplyScalar(i.rotateSpeed);const pe=i.domElement;E(2*Math.PI*m.x/pe.clientHeight),A(2*Math.PI*m.y/pe.clientHeight),u.copy(f)}function re(he){if(w.length===1)p.set(he.pageX,he.pageY);else{const pe=Ne(he),ee=.5*(he.pageX+pe.x),oe=.5*(he.pageY+pe.y);p.set(ee,oe)}v.subVectors(p,g).multiplyScalar(i.panSpeed),L(v.x,v.y),g.copy(p)}function _e(he){const pe=Ne(he),ee=he.pageX-pe.x,oe=he.pageY-pe.y,J=Math.sqrt(ee*ee+oe*oe);_.set(0,J),S.set(0,Math.pow(_.y/b.y,i.zoomSpeed)),U(S.y),b.copy(_)}function Pe(he){i.enableZoom&&_e(he),i.enablePan&&re(he)}function K(he){i.enableZoom&&_e(he),i.enableRotate&&ie(he)}function Q(he){i.enabled!==!1&&(w.length===0&&(i.domElement.setPointerCapture(he.pointerId),i.domElement.addEventListener("pointermove",fe),i.domElement.addEventListener("pointerup",ge)),le(he),he.pointerType==="touch"?Ee(he):se(he))}function fe(he){i.enabled!==!1&&(he.pointerType==="touch"?X(he):me(he))}function ge(he){Ce(he),w.length===0&&(i.domElement.releasePointerCapture(he.pointerId),i.domElement.removeEventListener("pointermove",fe),i.domElement.removeEventListener("pointerup",ge)),i.dispatchEvent(C_),a=r.NONE}function se(he){let pe;switch(he.button){case 0:pe=i.mouseButtons.LEFT;break;case 1:pe=i.mouseButtons.MIDDLE;break;case 2:pe=i.mouseButtons.RIGHT;break;default:pe=-1}switch(pe){case ma.DOLLY:if(i.enableZoom===!1)return;k(he),a=r.DOLLY;break;case ma.ROTATE:if(he.ctrlKey||he.metaKey||he.shiftKey){if(i.enablePan===!1)return;F(he),a=r.PAN}else{if(i.enableRotate===!1)return;V(he),a=r.ROTATE}break;case ma.PAN:if(he.ctrlKey||he.metaKey||he.shiftKey){if(i.enableRotate===!1)return;V(he),a=r.ROTATE}else{if(i.enablePan===!1)return;F(he),a=r.PAN}break;default:a=r.NONE}a!==r.NONE&&i.dispatchEvent(Pp)}function me(he){switch(a){case r.ROTATE:if(i.enableRotate===!1)return;T(he);break;case r.DOLLY:if(i.enableZoom===!1)return;P(he);break;case r.PAN:if(i.enablePan===!1)return;H(he);break}}function be(he){i.enabled===!1||i.enableZoom===!1||a!==r.NONE||(he.preventDefault(),i.dispatchEvent(Pp),N(he),i.dispatchEvent(C_))}function Me(he){i.enabled===!1||i.enablePan===!1||G(he)}function Ee(he){switch(Re(he),w.length){case 1:switch(i.touches.ONE){case ga.ROTATE:if(i.enableRotate===!1)return;$(),a=r.TOUCH_ROTATE;break;case ga.PAN:if(i.enablePan===!1)return;z(),a=r.TOUCH_PAN;break;default:a=r.NONE}break;case 2:switch(i.touches.TWO){case ga.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;W(),a=r.TOUCH_DOLLY_PAN;break;case ga.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;te(),a=r.TOUCH_DOLLY_ROTATE;break;default:a=r.NONE}break;default:a=r.NONE}a!==r.NONE&&i.dispatchEvent(Pp)}function X(he){switch(Re(he),a){case r.TOUCH_ROTATE:if(i.enableRotate===!1)return;ie(he),i.update();break;case r.TOUCH_PAN:if(i.enablePan===!1)return;re(he),i.update();break;case r.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Pe(he),i.update();break;case r.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;K(he),i.update();break;default:a=r.NONE}}function Y(he){i.enabled!==!1&&he.preventDefault()}function le(he){w.push(he)}function Ce(he){delete C[he.pointerId];for(let pe=0;pe<w.length;pe++)if(w[pe].pointerId==he.pointerId){w.splice(pe,1);return}}function Re(he){let pe=C[he.pointerId];pe===void 0&&(pe=new It,C[he.pointerId]=pe),pe.set(he.pageX,he.pageY)}function Ne(he){const pe=he.pointerId===w[0].pointerId?w[1]:w[0];return C[pe.pointerId]}i.domElement.addEventListener("contextmenu",Y),i.domElement.addEventListener("pointerdown",Q),i.domElement.addEventListener("pointercancel",ge),i.domElement.addEventListener("wheel",be,{passive:!1}),this.update()}}function x_(t,e){if(e===NP)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),t;if(e===Cm||e===U1){let n=t.getIndex();if(n===null){const d=[],s=t.getAttribute("position");if(s!==void 0){for(let o=0;o<s.count;o++)d.push(o);t.setIndex(d),n=t.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),t}const i=n.count-2,r=[];if(e===Cm)for(let d=1;d<=i;d++)r.push(n.getX(0)),r.push(n.getX(d)),r.push(n.getX(d+1));else for(let d=0;d<i;d++)d%2===0?(r.push(n.getX(d)),r.push(n.getX(d+1)),r.push(n.getX(d+2))):(r.push(n.getX(d+2)),r.push(n.getX(d+1)),r.push(n.getX(d)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const a=t.clone();return a.setIndex(r),a.clearGroups(),a}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),t}class X3 extends Gl{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(n){return new J3(n)}),this.register(function(n){return new sF(n)}),this.register(function(n){return new oF(n)}),this.register(function(n){return new aF(n)}),this.register(function(n){return new eF(n)}),this.register(function(n){return new tF(n)}),this.register(function(n){return new nF(n)}),this.register(function(n){return new iF(n)}),this.register(function(n){return new Z3(n)}),this.register(function(n){return new rF(n)}),this.register(function(n){return new Q3(n)}),this.register(function(n){return new Y3(n)}),this.register(function(n){return new lF(n)}),this.register(function(n){return new cF(n)})}load(e,n,i,r){const a=this;let d;this.resourcePath!==""?d=this.resourcePath:this.path!==""?d=this.path:d=km.extractUrlBase(e),this.manager.itemStart(e);const s=function(c){r?r(c):console.error(c),a.manager.itemError(e),a.manager.itemEnd(e)},o=new px(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(c){try{a.parse(c,d,function(h){n(h),a.manager.itemEnd(e)},s)}catch(h){s(h)}},i,s)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,n,i,r){let a;const d={},s={},o=new TextDecoder;if(typeof e=="string")a=JSON.parse(e);else if(e instanceof ArrayBuffer)if(o.decode(new Uint8Array(e,0,4))===yx){try{d[qt.KHR_BINARY_GLTF]=new uF(e)}catch(l){r&&r(l);return}a=JSON.parse(d[qt.KHR_BINARY_GLTF].content)}else a=JSON.parse(o.decode(e));else a=e;if(a.asset===void 0||a.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const c=new CF(a,{path:n||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let h=0;h<this.pluginCallbacks.length;h++){const l=this.pluginCallbacks[h](c);s[l.name]=l,d[l.name]=!0}if(a.extensionsUsed)for(let h=0;h<a.extensionsUsed.length;++h){const l=a.extensionsUsed[h],u=a.extensionsRequired||[];switch(l){case qt.KHR_MATERIALS_UNLIT:d[l]=new q3;break;case qt.KHR_DRACO_MESH_COMPRESSION:d[l]=new dF(a,this.dracoLoader);break;case qt.KHR_TEXTURE_TRANSFORM:d[l]=new fF;break;case qt.KHR_MESH_QUANTIZATION:d[l]=new hF;break;default:u.indexOf(l)>=0&&s[l]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+l+'".')}}c.setExtensions(d),c.setPlugins(s),c.parse(i,r)}parseAsync(e,n){const i=this;return new Promise(function(r,a){i.parse(e,n,r,a)})}}function K3(){let t={};return{get:function(e){return t[e]},add:function(e,n){t[e]=n},remove:function(e){delete t[e]},removeAll:function(){t={}}}}const qt={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class Y3{constructor(e){this.parser=e,this.name=qt.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,n=this.parser.json.nodes||[];for(let i=0,r=n.length;i<r;i++){const a=n[i];a.extensions&&a.extensions[this.name]&&a.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,a.extensions[this.name].light)}}_loadLight(e){const n=this.parser,i="light:"+e;let r=n.cache.get(i);if(r)return r;const a=n.json,o=((a.extensions&&a.extensions[this.name]||{}).lights||[])[e];let c;const h=new Nt(16777215);o.color!==void 0&&h.fromArray(o.color);const l=o.range!==void 0?o.range:0;switch(o.type){case"directional":c=new vx(h),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new P3(h),c.distance=l;break;case"spot":c=new k3(h),c.distance=l,o.spot=o.spot||{},o.spot.innerConeAngle=o.spot.innerConeAngle!==void 0?o.spot.innerConeAngle:0,o.spot.outerConeAngle=o.spot.outerConeAngle!==void 0?o.spot.outerConeAngle:Math.PI/4,c.angle=o.spot.outerConeAngle,c.penumbra=1-o.spot.innerConeAngle/o.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+o.type)}return c.position.set(0,0,0),c.decay=2,Hs(c,o),o.intensity!==void 0&&(c.intensity=o.intensity),c.name=n.createUniqueName(o.name||"light_"+e),r=Promise.resolve(c),n.cache.add(i,r),r}getDependency(e,n){if(e==="light")return this._loadLight(n)}createNodeAttachment(e){const n=this,i=this.parser,a=i.json.nodes[e],s=(a.extensions&&a.extensions[this.name]||{}).light;return s===void 0?null:this._loadLight(s).then(function(o){return i._getNodeRef(n.cache,s,o)})}}class q3{constructor(){this.name=qt.KHR_MATERIALS_UNLIT}getMaterialType(){return Do}extendParams(e,n,i){const r=[];e.color=new Nt(1,1,1),e.opacity=1;const a=n.pbrMetallicRoughness;if(a){if(Array.isArray(a.baseColorFactor)){const d=a.baseColorFactor;e.color.fromArray(d),e.opacity=d[3]}a.baseColorTexture!==void 0&&r.push(i.assignTexture(e,"map",a.baseColorTexture,Ot))}return Promise.all(r)}}class Z3{constructor(e){this.parser=e,this.name=qt.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,n){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=r.extensions[this.name].emissiveStrength;return a!==void 0&&(n.emissiveIntensity=a),Promise.resolve()}}class J3{constructor(e){this.parser=e,this.name=qt.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:ca}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=[],d=r.extensions[this.name];if(d.clearcoatFactor!==void 0&&(n.clearcoat=d.clearcoatFactor),d.clearcoatTexture!==void 0&&a.push(i.assignTexture(n,"clearcoatMap",d.clearcoatTexture)),d.clearcoatRoughnessFactor!==void 0&&(n.clearcoatRoughness=d.clearcoatRoughnessFactor),d.clearcoatRoughnessTexture!==void 0&&a.push(i.assignTexture(n,"clearcoatRoughnessMap",d.clearcoatRoughnessTexture)),d.clearcoatNormalTexture!==void 0&&(a.push(i.assignTexture(n,"clearcoatNormalMap",d.clearcoatNormalTexture)),d.clearcoatNormalTexture.scale!==void 0)){const s=d.clearcoatNormalTexture.scale;n.clearcoatNormalScale=new It(s,s)}return Promise.all(a)}}class Q3{constructor(e){this.parser=e,this.name=qt.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:ca}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=[],d=r.extensions[this.name];return d.iridescenceFactor!==void 0&&(n.iridescence=d.iridescenceFactor),d.iridescenceTexture!==void 0&&a.push(i.assignTexture(n,"iridescenceMap",d.iridescenceTexture)),d.iridescenceIor!==void 0&&(n.iridescenceIOR=d.iridescenceIor),n.iridescenceThicknessRange===void 0&&(n.iridescenceThicknessRange=[100,400]),d.iridescenceThicknessMinimum!==void 0&&(n.iridescenceThicknessRange[0]=d.iridescenceThicknessMinimum),d.iridescenceThicknessMaximum!==void 0&&(n.iridescenceThicknessRange[1]=d.iridescenceThicknessMaximum),d.iridescenceThicknessTexture!==void 0&&a.push(i.assignTexture(n,"iridescenceThicknessMap",d.iridescenceThicknessTexture)),Promise.all(a)}}class eF{constructor(e){this.parser=e,this.name=qt.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:ca}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=[];n.sheenColor=new Nt(0,0,0),n.sheenRoughness=0,n.sheen=1;const d=r.extensions[this.name];return d.sheenColorFactor!==void 0&&n.sheenColor.fromArray(d.sheenColorFactor),d.sheenRoughnessFactor!==void 0&&(n.sheenRoughness=d.sheenRoughnessFactor),d.sheenColorTexture!==void 0&&a.push(i.assignTexture(n,"sheenColorMap",d.sheenColorTexture,Ot)),d.sheenRoughnessTexture!==void 0&&a.push(i.assignTexture(n,"sheenRoughnessMap",d.sheenRoughnessTexture)),Promise.all(a)}}class tF{constructor(e){this.parser=e,this.name=qt.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:ca}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=[],d=r.extensions[this.name];return d.transmissionFactor!==void 0&&(n.transmission=d.transmissionFactor),d.transmissionTexture!==void 0&&a.push(i.assignTexture(n,"transmissionMap",d.transmissionTexture)),Promise.all(a)}}class nF{constructor(e){this.parser=e,this.name=qt.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:ca}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=[],d=r.extensions[this.name];n.thickness=d.thicknessFactor!==void 0?d.thicknessFactor:0,d.thicknessTexture!==void 0&&a.push(i.assignTexture(n,"thicknessMap",d.thicknessTexture)),n.attenuationDistance=d.attenuationDistance||1/0;const s=d.attenuationColor||[1,1,1];return n.attenuationColor=new Nt(s[0],s[1],s[2]),Promise.all(a)}}class iF{constructor(e){this.parser=e,this.name=qt.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:ca}extendMaterialParams(e,n){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=r.extensions[this.name];return n.ior=a.ior!==void 0?a.ior:1.5,Promise.resolve()}}class rF{constructor(e){this.parser=e,this.name=qt.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:ca}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=[],d=r.extensions[this.name];n.specularIntensity=d.specularFactor!==void 0?d.specularFactor:1,d.specularTexture!==void 0&&a.push(i.assignTexture(n,"specularIntensityMap",d.specularTexture));const s=d.specularColorFactor||[1,1,1];return n.specularColor=new Nt(s[0],s[1],s[2]),d.specularColorTexture!==void 0&&a.push(i.assignTexture(n,"specularColorMap",d.specularColorTexture,Ot)),Promise.all(a)}}class sF{constructor(e){this.parser=e,this.name=qt.KHR_TEXTURE_BASISU}loadTexture(e){const n=this.parser,i=n.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const a=r.extensions[this.name],d=n.options.ktx2Loader;if(!d){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return n.loadTextureImage(e,a.source,d)}}class oF{constructor(e){this.parser=e,this.name=qt.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const n=this.name,i=this.parser,r=i.json,a=r.textures[e];if(!a.extensions||!a.extensions[n])return null;const d=a.extensions[n],s=r.images[d.source];let o=i.textureLoader;if(s.uri){const c=i.options.manager.getHandler(s.uri);c!==null&&(o=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,d.source,o);if(r.extensionsRequired&&r.extensionsRequired.indexOf(n)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const n=new Image;n.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",n.onload=n.onerror=function(){e(n.height===1)}})),this.isSupported}}class aF{constructor(e){this.parser=e,this.name=qt.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const n=this.name,i=this.parser,r=i.json,a=r.textures[e];if(!a.extensions||!a.extensions[n])return null;const d=a.extensions[n],s=r.images[d.source];let o=i.textureLoader;if(s.uri){const c=i.options.manager.getHandler(s.uri);c!==null&&(o=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,d.source,o);if(r.extensionsRequired&&r.extensionsRequired.indexOf(n)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const n=new Image;n.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",n.onload=n.onerror=function(){e(n.height===1)}})),this.isSupported}}class lF{constructor(e){this.name=qt.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const n=this.parser.json,i=n.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const r=i.extensions[this.name],a=this.parser.getDependency("buffer",r.buffer),d=this.parser.options.meshoptDecoder;if(!d||!d.supported){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return a.then(function(s){const o=r.byteOffset||0,c=r.byteLength||0,h=r.count,l=r.byteStride,u=new Uint8Array(s,o,c);return d.decodeGltfBufferAsync?d.decodeGltfBufferAsync(h,l,u,r.mode,r.filter).then(function(f){return f.buffer}):d.ready.then(function(){const f=new ArrayBuffer(h*l);return d.decodeGltfBuffer(new Uint8Array(f),h,l,u,r.mode,r.filter),f})})}else return null}}class cF{constructor(e){this.name=qt.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const n=this.parser.json,i=n.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;const r=n.meshes[i.mesh];for(const c of r.primitives)if(c.mode!==Ui.TRIANGLES&&c.mode!==Ui.TRIANGLE_STRIP&&c.mode!==Ui.TRIANGLE_FAN&&c.mode!==void 0)return null;const d=i.extensions[this.name].attributes,s=[],o={};for(const c in d)s.push(this.parser.getDependency("accessor",d[c]).then(h=>(o[c]=h,o[c])));return s.length<1?null:(s.push(this.parser.createNodeMesh(e)),Promise.all(s).then(c=>{const h=c.pop(),l=h.isGroup?h.children:[h],u=c[0].count,f=[];for(const m of l){const g=new Gt,p=new Fe,v=new Or,b=new Fe(1,1,1),_=new d3(m.geometry,m.material,u);for(let S=0;S<u;S++)o.TRANSLATION&&p.fromBufferAttribute(o.TRANSLATION,S),o.ROTATION&&v.fromBufferAttribute(o.ROTATION,S),o.SCALE&&b.fromBufferAttribute(o.SCALE,S),_.setMatrixAt(S,g.compose(p,v,b));for(const S in o)S!=="TRANSLATION"&&S!=="ROTATION"&&S!=="SCALE"&&m.geometry.setAttribute(S,o[S]);yn.prototype.copy.call(_,m),this.parser.assignFinalMaterial(_),f.push(_)}return h.isGroup?(h.clear(),h.add(...f),h):f[0]}))}}const yx="glTF",lc=12,T_={JSON:1313821514,BIN:5130562};class uF{constructor(e){this.name=qt.KHR_BINARY_GLTF,this.content=null,this.body=null;const n=new DataView(e,0,lc),i=new TextDecoder;if(this.header={magic:i.decode(new Uint8Array(e.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==yx)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-lc,a=new DataView(e,lc);let d=0;for(;d<r;){const s=a.getUint32(d,!0);d+=4;const o=a.getUint32(d,!0);if(d+=4,o===T_.JSON){const c=new Uint8Array(e,lc+d,s);this.content=i.decode(c)}else if(o===T_.BIN){const c=lc+d;this.body=e.slice(c,c+s)}d+=s}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class dF{constructor(e,n){if(!n)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=qt.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=n,this.dracoLoader.preload()}decodePrimitive(e,n){const i=this.json,r=this.dracoLoader,a=e.extensions[this.name].bufferView,d=e.extensions[this.name].attributes,s={},o={},c={};for(const h in d){const l=Rm[h]||h.toLowerCase();s[l]=d[h]}for(const h in e.attributes){const l=Rm[h]||h.toLowerCase();if(d[h]!==void 0){const u=i.accessors[e.attributes[h]],f=nl[u.componentType];c[l]=f.name,o[l]=u.normalized===!0}}return n.getDependency("bufferView",a).then(function(h){return new Promise(function(l){r.decodeDracoFile(h,function(u){for(const f in u.attributes){const m=u.attributes[f],g=o[f];g!==void 0&&(m.normalized=g)}l(u)},s,c)})})}}class fF{constructor(){this.name=qt.KHR_TEXTURE_TRANSFORM}extendTexture(e,n){return(n.texCoord===void 0||n.texCoord===e.channel)&&n.offset===void 0&&n.rotation===void 0&&n.scale===void 0||(e=e.clone(),n.texCoord!==void 0&&(e.channel=n.texCoord),n.offset!==void 0&&e.offset.fromArray(n.offset),n.rotation!==void 0&&(e.rotation=n.rotation),n.scale!==void 0&&e.repeat.fromArray(n.scale),e.needsUpdate=!0),e}}class hF{constructor(){this.name=qt.KHR_MESH_QUANTIZATION}}class bx extends Au{constructor(e,n,i,r){super(e,n,i,r)}copySampleValue_(e){const n=this.resultBuffer,i=this.sampleValues,r=this.valueSize,a=e*r*3+r;for(let d=0;d!==r;d++)n[d]=i[a+d];return n}interpolate_(e,n,i,r){const a=this.resultBuffer,d=this.sampleValues,s=this.valueSize,o=s*2,c=s*3,h=r-n,l=(i-n)/h,u=l*l,f=u*l,m=e*c,g=m-c,p=-2*f+3*u,v=f-u,b=1-p,_=v-u+l;for(let S=0;S!==s;S++){const w=d[g+S+s],C=d[g+S+o]*h,x=d[m+S+s],M=d[m+S]*h;a[S]=b*w+_*C+p*x+v*M}return a}}const pF=new Or;class mF extends bx{interpolate_(e,n,i,r){const a=super.interpolate_(e,n,i,r);return pF.fromArray(a).normalize().toArray(a),a}}const Ui={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},nl={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},E_={9728:Bn,9729:qn,9984:wm,9985:F1,9986:Gd,9987:Zo},M_={33071:Hi,33648:yl,10497:vl},Op={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Rm={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Ps={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},gF={CUBICSPLINE:void 0,LINEAR:_l,STEP:Yc},Lp={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function vF(t){return t.DefaultMaterial===void 0&&(t.DefaultMaterial=new yv({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:hs})),t.DefaultMaterial}function cc(t,e,n){for(const i in n.extensions)t[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=n.extensions[i])}function Hs(t,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(t.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function yF(t,e,n){let i=!1,r=!1,a=!1;for(let c=0,h=e.length;c<h;c++){const l=e[c];if(l.POSITION!==void 0&&(i=!0),l.NORMAL!==void 0&&(r=!0),l.COLOR_0!==void 0&&(a=!0),i&&r&&a)break}if(!i&&!r&&!a)return Promise.resolve(t);const d=[],s=[],o=[];for(let c=0,h=e.length;c<h;c++){const l=e[c];if(i){const u=l.POSITION!==void 0?n.getDependency("accessor",l.POSITION):t.attributes.position;d.push(u)}if(r){const u=l.NORMAL!==void 0?n.getDependency("accessor",l.NORMAL):t.attributes.normal;s.push(u)}if(a){const u=l.COLOR_0!==void 0?n.getDependency("accessor",l.COLOR_0):t.attributes.color;o.push(u)}}return Promise.all([Promise.all(d),Promise.all(s),Promise.all(o)]).then(function(c){const h=c[0],l=c[1],u=c[2];return i&&(t.morphAttributes.position=h),r&&(t.morphAttributes.normal=l),a&&(t.morphAttributes.color=u),t.morphTargetsRelative=!0,t})}function bF(t,e){if(t.updateMorphTargets(),e.weights!==void 0)for(let n=0,i=e.weights.length;n<i;n++)t.morphTargetInfluences[n]=e.weights[n];if(e.extras&&Array.isArray(e.extras.targetNames)){const n=e.extras.targetNames;if(t.morphTargetInfluences.length===n.length){t.morphTargetDictionary={};for(let i=0,r=n.length;i<r;i++)t.morphTargetDictionary[n[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function _F(t){const e=t.extensions&&t.extensions[qt.KHR_DRACO_MESH_COMPRESSION];let n;return e?n="draco:"+e.bufferView+":"+e.indices+":"+A_(e.attributes):n=t.indices+":"+A_(t.attributes)+":"+t.mode,n}function A_(t){let e="";const n=Object.keys(t).sort();for(let i=0,r=n.length;i<r;i++)e+=n[i]+":"+t[n[i]]+";";return e}function Pm(t){switch(t){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function SF(t){return t.search(/\.jpe?g($|\?)/i)>0||t.search(/^data\:image\/jpeg/)===0?"image/jpeg":t.search(/\.webp($|\?)/i)>0||t.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const wF=new Gt;class CF{constructor(e={},n={}){this.json=e,this.extensions={},this.plugins={},this.options=n,this.cache=new K3,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,r=!1,a=-1;typeof navigator<"u"&&(i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,r=navigator.userAgent.indexOf("Firefox")>-1,a=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||i||r&&a<98?this.textureLoader=new gx(this.options.manager):this.textureLoader=new L3(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new px(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,n){const i=this,r=this.json,a=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(d){return d._markDefs&&d._markDefs()}),Promise.all(this._invokeAll(function(d){return d.beforeRoot&&d.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(d){const s={scene:d[0][r.scene||0],scenes:d[0],animations:d[1],cameras:d[2],asset:r.asset,parser:i,userData:{}};cc(a,s,r),Hs(s,r),Promise.all(i._invokeAll(function(o){return o.afterRoot&&o.afterRoot(s)})).then(function(){e(s)})}).catch(n)}_markDefs(){const e=this.json.nodes||[],n=this.json.skins||[],i=this.json.meshes||[];for(let r=0,a=n.length;r<a;r++){const d=n[r].joints;for(let s=0,o=d.length;s<o;s++)e[d[s]].isBone=!0}for(let r=0,a=e.length;r<a;r++){const d=e[r];d.mesh!==void 0&&(this._addNodeRef(this.meshCache,d.mesh),d.skin!==void 0&&(i[d.mesh].isSkinnedMesh=!0)),d.camera!==void 0&&this._addNodeRef(this.cameraCache,d.camera)}}_addNodeRef(e,n){n!==void 0&&(e.refs[n]===void 0&&(e.refs[n]=e.uses[n]=0),e.refs[n]++)}_getNodeRef(e,n,i){if(e.refs[n]<=1)return i;const r=i.clone(),a=(d,s)=>{const o=this.associations.get(d);o!=null&&this.associations.set(s,o);for(const[c,h]of d.children.entries())a(h,s.children[c])};return a(i,r),r.name+="_instance_"+e.uses[n]++,r}_invokeOne(e){const n=Object.values(this.plugins);n.push(this);for(let i=0;i<n.length;i++){const r=e(n[i]);if(r)return r}return null}_invokeAll(e){const n=Object.values(this.plugins);n.unshift(this);const i=[];for(let r=0;r<n.length;r++){const a=e(n[r]);a&&i.push(a)}return i}getDependency(e,n){const i=e+":"+n;let r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(n);break;case"node":r=this._invokeOne(function(a){return a.loadNode&&a.loadNode(n)});break;case"mesh":r=this._invokeOne(function(a){return a.loadMesh&&a.loadMesh(n)});break;case"accessor":r=this.loadAccessor(n);break;case"bufferView":r=this._invokeOne(function(a){return a.loadBufferView&&a.loadBufferView(n)});break;case"buffer":r=this.loadBuffer(n);break;case"material":r=this._invokeOne(function(a){return a.loadMaterial&&a.loadMaterial(n)});break;case"texture":r=this._invokeOne(function(a){return a.loadTexture&&a.loadTexture(n)});break;case"skin":r=this.loadSkin(n);break;case"animation":r=this._invokeOne(function(a){return a.loadAnimation&&a.loadAnimation(n)});break;case"camera":r=this.loadCamera(n);break;default:if(r=this._invokeOne(function(a){return a!=this&&a.getDependency&&a.getDependency(e,n)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(i,r)}return r}getDependencies(e){let n=this.cache.get(e);if(!n){const i=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];n=Promise.all(r.map(function(a,d){return i.getDependency(e,d)})),this.cache.add(e,n)}return n}loadBuffer(e){const n=this.json.buffers[e],i=this.fileLoader;if(n.type&&n.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+n.type+" buffer type is not supported.");if(n.uri===void 0&&e===0)return Promise.resolve(this.extensions[qt.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(a,d){i.load(km.resolveURL(n.uri,r.path),a,void 0,function(){d(new Error('THREE.GLTFLoader: Failed to load buffer "'+n.uri+'".'))})})}loadBufferView(e){const n=this.json.bufferViews[e];return this.getDependency("buffer",n.buffer).then(function(i){const r=n.byteLength||0,a=n.byteOffset||0;return i.slice(a,a+r)})}loadAccessor(e){const n=this,i=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){const d=Op[r.type],s=nl[r.componentType],o=r.normalized===!0,c=new s(r.count*d);return Promise.resolve(new ci(c,d,o))}const a=[];return r.bufferView!==void 0?a.push(this.getDependency("bufferView",r.bufferView)):a.push(null),r.sparse!==void 0&&(a.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),a.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(a).then(function(d){const s=d[0],o=Op[r.type],c=nl[r.componentType],h=c.BYTES_PER_ELEMENT,l=h*o,u=r.byteOffset||0,f=r.bufferView!==void 0?i.bufferViews[r.bufferView].byteStride:void 0,m=r.normalized===!0;let g,p;if(f&&f!==l){const v=Math.floor(u/f),b="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+v+":"+r.count;let _=n.cache.get(b);_||(g=new c(s,v*f,r.count*f/h),_=new r3(g,f/h),n.cache.add(b,_)),p=new gv(_,o,u%f/h,m)}else s===null?g=new c(r.count*o):g=new c(s,u,r.count*o),p=new ci(g,o,m);if(r.sparse!==void 0){const v=Op.SCALAR,b=nl[r.sparse.indices.componentType],_=r.sparse.indices.byteOffset||0,S=r.sparse.values.byteOffset||0,w=new b(d[1],_,r.sparse.count*v),C=new c(d[2],S,r.sparse.count*o);s!==null&&(p=new ci(p.array.slice(),p.itemSize,p.normalized));for(let x=0,M=w.length;x<M;x++){const E=w[x];if(p.setX(E,C[x*o]),o>=2&&p.setY(E,C[x*o+1]),o>=3&&p.setZ(E,C[x*o+2]),o>=4&&p.setW(E,C[x*o+3]),o>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return p})}loadTexture(e){const n=this.json,i=this.options,a=n.textures[e].source,d=n.images[a];let s=this.textureLoader;if(d.uri){const o=i.manager.getHandler(d.uri);o!==null&&(s=o)}return this.loadTextureImage(e,a,s)}loadTextureImage(e,n,i){const r=this,a=this.json,d=a.textures[e],s=a.images[n],o=(s.uri||s.bufferView)+":"+d.sampler;if(this.textureCache[o])return this.textureCache[o];const c=this.loadImageSource(n,i).then(function(h){h.flipY=!1,h.name=d.name||s.name||"",h.name===""&&typeof s.uri=="string"&&s.uri.startsWith("data:image/")===!1&&(h.name=s.uri);const u=(a.samplers||{})[d.sampler]||{};return h.magFilter=E_[u.magFilter]||qn,h.minFilter=E_[u.minFilter]||Zo,h.wrapS=M_[u.wrapS]||vl,h.wrapT=M_[u.wrapT]||vl,r.associations.set(h,{textures:e}),h}).catch(function(){return null});return this.textureCache[o]=c,c}loadImageSource(e,n){const i=this,r=this.json,a=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(l=>l.clone());const d=r.images[e],s=self.URL||self.webkitURL;let o=d.uri||"",c=!1;if(d.bufferView!==void 0)o=i.getDependency("bufferView",d.bufferView).then(function(l){c=!0;const u=new Blob([l],{type:d.mimeType});return o=s.createObjectURL(u),o});else if(d.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const h=Promise.resolve(o).then(function(l){return new Promise(function(u,f){let m=u;n.isImageBitmapLoader===!0&&(m=function(g){const p=new Wn(g);p.needsUpdate=!0,u(p)}),n.load(km.resolveURL(l,a.path),m,void 0,f)})}).then(function(l){return c===!0&&s.revokeObjectURL(o),l.userData.mimeType=d.mimeType||SF(d.uri),l}).catch(function(l){throw console.error("THREE.GLTFLoader: Couldn't load texture",o),l});return this.sourceCache[e]=h,h}assignTexture(e,n,i,r){const a=this;return this.getDependency("texture",i.index).then(function(d){if(!d)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(d=d.clone(),d.channel=i.texCoord),a.extensions[qt.KHR_TEXTURE_TRANSFORM]){const s=i.extensions!==void 0?i.extensions[qt.KHR_TEXTURE_TRANSFORM]:void 0;if(s){const o=a.associations.get(d);d=a.extensions[qt.KHR_TEXTURE_TRANSFORM].extendTexture(d,s),a.associations.set(d,o)}}return r!==void 0&&(d.colorSpace=r),e[n]=d,d})}assignFinalMaterial(e){const n=e.geometry;let i=e.material;const r=n.attributes.tangent===void 0,a=n.attributes.color!==void 0,d=n.attributes.normal===void 0;if(e.isPoints){const s="PointsMaterial:"+i.uuid;let o=this.cache.get(s);o||(o=new cx,mr.prototype.copy.call(o,i),o.color.copy(i.color),o.map=i.map,o.sizeAttenuation=!1,this.cache.add(s,o)),i=o}else if(e.isLine){const s="LineBasicMaterial:"+i.uuid;let o=this.cache.get(s);o||(o=new lx,mr.prototype.copy.call(o,i),o.color.copy(i.color),o.map=i.map,this.cache.add(s,o)),i=o}if(r||a||d){let s="ClonedMaterial:"+i.uuid+":";r&&(s+="derivative-tangents:"),a&&(s+="vertex-colors:"),d&&(s+="flat-shading:");let o=this.cache.get(s);o||(o=i.clone(),a&&(o.vertexColors=!0),d&&(o.flatShading=!0),r&&(o.normalScale&&(o.normalScale.y*=-1),o.clearcoatNormalScale&&(o.clearcoatNormalScale.y*=-1)),this.cache.add(s,o),this.associations.set(o,this.associations.get(i))),i=o}e.material=i}getMaterialType(){return yv}loadMaterial(e){const n=this,i=this.json,r=this.extensions,a=i.materials[e];let d;const s={},o=a.extensions||{},c=[];if(o[qt.KHR_MATERIALS_UNLIT]){const l=r[qt.KHR_MATERIALS_UNLIT];d=l.getMaterialType(),c.push(l.extendParams(s,a,n))}else{const l=a.pbrMetallicRoughness||{};if(s.color=new Nt(1,1,1),s.opacity=1,Array.isArray(l.baseColorFactor)){const u=l.baseColorFactor;s.color.fromArray(u),s.opacity=u[3]}l.baseColorTexture!==void 0&&c.push(n.assignTexture(s,"map",l.baseColorTexture,Ot)),s.metalness=l.metallicFactor!==void 0?l.metallicFactor:1,s.roughness=l.roughnessFactor!==void 0?l.roughnessFactor:1,l.metallicRoughnessTexture!==void 0&&(c.push(n.assignTexture(s,"metalnessMap",l.metallicRoughnessTexture)),c.push(n.assignTexture(s,"roughnessMap",l.metallicRoughnessTexture))),d=this._invokeOne(function(u){return u.getMaterialType&&u.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(u){return u.extendMaterialParams&&u.extendMaterialParams(e,s)})))}a.doubleSided===!0&&(s.side=ur);const h=a.alphaMode||Lp.OPAQUE;if(h===Lp.BLEND?(s.transparent=!0,s.depthWrite=!1):(s.transparent=!1,h===Lp.MASK&&(s.alphaTest=a.alphaCutoff!==void 0?a.alphaCutoff:.5)),a.normalTexture!==void 0&&d!==Do&&(c.push(n.assignTexture(s,"normalMap",a.normalTexture)),s.normalScale=new It(1,1),a.normalTexture.scale!==void 0)){const l=a.normalTexture.scale;s.normalScale.set(l,l)}return a.occlusionTexture!==void 0&&d!==Do&&(c.push(n.assignTexture(s,"aoMap",a.occlusionTexture)),a.occlusionTexture.strength!==void 0&&(s.aoMapIntensity=a.occlusionTexture.strength)),a.emissiveFactor!==void 0&&d!==Do&&(s.emissive=new Nt().fromArray(a.emissiveFactor)),a.emissiveTexture!==void 0&&d!==Do&&c.push(n.assignTexture(s,"emissiveMap",a.emissiveTexture,Ot)),Promise.all(c).then(function(){const l=new d(s);return a.name&&(l.name=a.name),Hs(l,a),n.associations.set(l,{materials:e}),a.extensions&&cc(r,l,a),l})}createUniqueName(e){const n=nn.sanitizeNodeName(e||"");let i=n;for(let r=1;this.nodeNamesUsed[i];++r)i=n+"_"+r;return this.nodeNamesUsed[i]=!0,i}loadGeometries(e){const n=this,i=this.extensions,r=this.primitiveCache;function a(s){return i[qt.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(s,n).then(function(o){return k_(o,s,n)})}const d=[];for(let s=0,o=e.length;s<o;s++){const c=e[s],h=_F(c),l=r[h];if(l)d.push(l.promise);else{let u;c.extensions&&c.extensions[qt.KHR_DRACO_MESH_COMPRESSION]?u=a(c):u=k_(new Br,c,n),r[h]={primitive:c,promise:u},d.push(u)}}return Promise.all(d)}loadMesh(e){const n=this,i=this.json,r=this.extensions,a=i.meshes[e],d=a.primitives,s=[];for(let o=0,c=d.length;o<c;o++){const h=d[o].material===void 0?vF(this.cache):this.getDependency("material",d[o].material);s.push(h)}return s.push(n.loadGeometries(d)),Promise.all(s).then(function(o){const c=o.slice(0,o.length-1),h=o[o.length-1],l=[];for(let f=0,m=h.length;f<m;f++){const g=h[f],p=d[f];let v;const b=c[f];if(p.mode===Ui.TRIANGLES||p.mode===Ui.TRIANGLE_STRIP||p.mode===Ui.TRIANGLE_FAN||p.mode===void 0)v=a.isSkinnedMesh===!0?new o3(g,b):new _i(g,b),v.isSkinnedMesh===!0&&v.normalizeSkinWeights(),p.mode===Ui.TRIANGLE_STRIP?v.geometry=x_(v.geometry,U1):p.mode===Ui.TRIANGLE_FAN&&(v.geometry=x_(v.geometry,Cm));else if(p.mode===Ui.LINES)v=new f3(g,b);else if(p.mode===Ui.LINE_STRIP)v=new vv(g,b);else if(p.mode===Ui.LINE_LOOP)v=new h3(g,b);else if(p.mode===Ui.POINTS)v=new p3(g,b);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+p.mode);Object.keys(v.geometry.morphAttributes).length>0&&bF(v,a),v.name=n.createUniqueName(a.name||"mesh_"+e),Hs(v,a),p.extensions&&cc(r,v,p),n.assignFinalMaterial(v),l.push(v)}for(let f=0,m=l.length;f<m;f++)n.associations.set(l[f],{meshes:e,primitives:f});if(l.length===1)return l[0];const u=new Ws;n.associations.set(u,{meshes:e});for(let f=0,m=l.length;f<m;f++)u.add(l[f]);return u})}loadCamera(e){let n;const i=this.json.cameras[e],r=i[i.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?n=new ai(eO.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):i.type==="orthographic"&&(n=new pv(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(n.name=this.createUniqueName(i.name)),Hs(n,i),Promise.resolve(n)}loadSkin(e){const n=this.json.skins[e],i=[];for(let r=0,a=n.joints.length;r<a;r++)i.push(this._loadNodeShallow(n.joints[r]));return n.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",n.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(r){const a=r.pop(),d=r,s=[],o=[];for(let c=0,h=d.length;c<h;c++){const l=d[c];if(l){s.push(l);const u=new Gt;a!==null&&u.fromArray(a.array,c*16),o.push(u)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',n.joints[c])}return new c3(s,o)})}loadAnimation(e){const i=this.json.animations[e],r=i.name?i.name:"animation_"+e,a=[],d=[],s=[],o=[],c=[];for(let h=0,l=i.channels.length;h<l;h++){const u=i.channels[h],f=i.samplers[u.sampler],m=u.target,g=m.node,p=i.parameters!==void 0?i.parameters[f.input]:f.input,v=i.parameters!==void 0?i.parameters[f.output]:f.output;m.node!==void 0&&(a.push(this.getDependency("node",g)),d.push(this.getDependency("accessor",p)),s.push(this.getDependency("accessor",v)),o.push(f),c.push(m))}return Promise.all([Promise.all(a),Promise.all(d),Promise.all(s),Promise.all(o),Promise.all(c)]).then(function(h){const l=h[0],u=h[1],f=h[2],m=h[3],g=h[4],p=[];for(let v=0,b=l.length;v<b;v++){const _=l[v],S=u[v],w=f[v],C=m[v],x=g[v];if(_===void 0)continue;_.updateMatrix();let M;switch(Ps[x.path]){case Ps.weights:M=Zc;break;case Ps.rotation:M=ta;break;case Ps.position:case Ps.scale:default:M=Jc;break}const E=_.name?_.name:_.uuid,A=C.interpolation!==void 0?gF[C.interpolation]:_l,O=[];Ps[x.path]===Ps.weights?_.traverse(function(L){L.morphTargetInfluences&&O.push(L.name?L.name:L.uuid)}):O.push(E);let D=w.array;if(w.normalized){const L=Pm(D.constructor),U=new Float32Array(D.length);for(let j=0,V=D.length;j<V;j++)U[j]=D[j]*L;D=U}for(let L=0,U=O.length;L<U;L++){const j=new M(O[L]+"."+Ps[x.path],S.array,D,A);C.interpolation==="CUBICSPLINE"&&(j.createInterpolant=function(k){const F=this instanceof ta?mF:bx;return new F(this.times,this.values,this.getValueSize()/3,k)},j.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),p.push(j)}}return new S3(r,void 0,p)})}createNodeMesh(e){const n=this.json,i=this,r=n.nodes[e];return r.mesh===void 0?null:i.getDependency("mesh",r.mesh).then(function(a){const d=i._getNodeRef(i.meshCache,r.mesh,a);return r.weights!==void 0&&d.traverse(function(s){if(s.isMesh)for(let o=0,c=r.weights.length;o<c;o++)s.morphTargetInfluences[o]=r.weights[o]}),d})}loadNode(e){const n=this.json,i=this,r=n.nodes[e],a=i._loadNodeShallow(e),d=[],s=r.children||[];for(let c=0,h=s.length;c<h;c++)d.push(i.getDependency("node",s[c]));const o=r.skin===void 0?Promise.resolve(null):i.getDependency("skin",r.skin);return Promise.all([a,Promise.all(d),o]).then(function(c){const h=c[0],l=c[1],u=c[2];u!==null&&h.traverse(function(f){f.isSkinnedMesh&&f.bind(u,wF)});for(let f=0,m=l.length;f<m;f++)h.add(l[f]);return h})}_loadNodeShallow(e){const n=this.json,i=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const a=n.nodes[e],d=a.name?r.createUniqueName(a.name):"",s=[],o=r._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return o&&s.push(o),a.camera!==void 0&&s.push(r.getDependency("camera",a.camera).then(function(c){return r._getNodeRef(r.cameraCache,a.camera,c)})),r._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){s.push(c)}),this.nodeCache[e]=Promise.all(s).then(function(c){let h;if(a.isBone===!0?h=new ox:c.length>1?h=new Ws:c.length===1?h=c[0]:h=new yn,h!==c[0])for(let l=0,u=c.length;l<u;l++)h.add(c[l]);if(a.name&&(h.userData.name=a.name,h.name=d),Hs(h,a),a.extensions&&cc(i,h,a),a.matrix!==void 0){const l=new Gt;l.fromArray(a.matrix),h.applyMatrix4(l)}else a.translation!==void 0&&h.position.fromArray(a.translation),a.rotation!==void 0&&h.quaternion.fromArray(a.rotation),a.scale!==void 0&&h.scale.fromArray(a.scale);return r.associations.has(h)||r.associations.set(h,{}),r.associations.get(h).nodes=e,h}),this.nodeCache[e]}loadScene(e){const n=this.extensions,i=this.json.scenes[e],r=this,a=new Ws;i.name&&(a.name=r.createUniqueName(i.name)),Hs(a,i),i.extensions&&cc(n,a,i);const d=i.nodes||[],s=[];for(let o=0,c=d.length;o<c;o++)s.push(r.getDependency("node",d[o]));return Promise.all(s).then(function(o){for(let h=0,l=o.length;h<l;h++)a.add(o[h]);const c=h=>{const l=new Map;for(const[u,f]of r.associations)(u instanceof mr||u instanceof Wn)&&l.set(u,f);return h.traverse(u=>{const f=r.associations.get(u);f!=null&&l.set(u,f)}),l};return r.associations=c(a),a})}}function xF(t,e,n){const i=e.attributes,r=new ys;if(i.POSITION!==void 0){const s=n.json.accessors[i.POSITION],o=s.min,c=s.max;if(o!==void 0&&c!==void 0){if(r.set(new Fe(o[0],o[1],o[2]),new Fe(c[0],c[1],c[2])),s.normalized){const h=Pm(nl[s.componentType]);r.min.multiplyScalar(h),r.max.multiplyScalar(h)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const a=e.targets;if(a!==void 0){const s=new Fe,o=new Fe;for(let c=0,h=a.length;c<h;c++){const l=a[c];if(l.POSITION!==void 0){const u=n.json.accessors[l.POSITION],f=u.min,m=u.max;if(f!==void 0&&m!==void 0){if(o.setX(Math.max(Math.abs(f[0]),Math.abs(m[0]))),o.setY(Math.max(Math.abs(f[1]),Math.abs(m[1]))),o.setZ(Math.max(Math.abs(f[2]),Math.abs(m[2]))),u.normalized){const g=Pm(nl[u.componentType]);o.multiplyScalar(g)}s.max(o)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(s)}t.boundingBox=r;const d=new bs;r.getCenter(d.center),d.radius=r.min.distanceTo(r.max)/2,t.boundingSphere=d}function k_(t,e,n){const i=e.attributes,r=[];function a(d,s){return n.getDependency("accessor",d).then(function(o){t.setAttribute(s,o)})}for(const d in i){const s=Rm[d]||d.toLowerCase();s in t.attributes||r.push(a(i[d],s))}if(e.indices!==void 0&&!t.index){const d=n.getDependency("accessor",e.indices).then(function(s){t.setIndex(s)});r.push(d)}return Hs(t,e),xF(t,e,n),Promise.all(r).then(function(){return e.targets!==void 0?yF(t,e.targets,n):t})}const TF="/3DdesignerDemo/assets/nx-CrgeqY0F.jpg",EF="/3DdesignerDemo/assets/ny-DoPIwNF1.jpg",MF="/3DdesignerDemo/assets/nz-DuNLZWcq.jpg",AF="/3DdesignerDemo/assets/px-CsU_OFLC.jpg",kF="/3DdesignerDemo/assets/py-f0Rz10zn.jpg",RF="/3DdesignerDemo/assets/pz-pjWjogLg.jpg",PF="/3DdesignerDemo/assets/204102AA9999莫代尔_201131-Dgrt-2EI.png",OF="/3DdesignerDemo/assets/219183AA9999  L8F3011-Dq9S03i8.png",LF="/3DdesignerDemo/assets/排扣-D_ObmviI.png",IF="/3DdesignerDemo/assets/红色下橡筋面料_26666856-B5YZ6qXT.png",DF="/3DdesignerDemo/assets/红色排扣正面-DGcCHFZj.png",NF="/3DdesignerDemo/assets/红色排扣背面-BjxXRybb.png",FF="/3DdesignerDemo/assets/红色网布_26666762-CPLSLRls.png",BF="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4CAYAAACohjseAAAMZklEQVRogdWa2XLb2BGGGyRIgrsoWbItb+MsN6nkIg+V58uTJBe5SGUq8Sx2PN5kSRR3AiBSUP3/1FeokhxfmlUokkCfc7r79PJ3HyR/SZJqFxGbiMgjIomIKiLaETGNiOOIGOjZWnT1ZxQR3Yg4RMRRRDzV/5Vo6u9PEXGj+zV9GRFvIuJfEbGIiIcR8VLP6jFFRIwxz05XS3zV8/0YEfuIeBwR5xHRB789fVuO+n/a0o+WCEMT1L9T3V9q8ksxmUXEtWjr3x2NCTFqJdSMbiPig363NM9c9HsJWoDJnf4Xol9rzE5Ct6SUM/3eaVwhZRbi+0FEnNa/B5J2q92oMHAnJnqi+SxhrZCafhYREzFyEP0BGq0/V2Iu/0omTzTHeymitpQXEfFciq0VlYt3K6AQP2MpJj3TJFe6scFOFjCbmb4/a/cq7dxQzHT1v61d7ul+beKvI+KdlPA1TJ6IPpPSnsosE/FbC73UtZeyunpeK+ptzcM5zOxaV6kFMi22k5+80ESvxUhHPkB/NH2lZzMx6YW/hsmuhPyDFP5ANDXjH8VnG+5wLL+u+XkVERe1gJm0PVJQGUqrWw1ONUFtys+0cFsLtKWEvXa2lOZ2mtO7Us/5W63x/zL5QIo40dpW/LUYX2jtsRQ4Fe1MyprYit5o0oMIthJiqd+e4FimtAfTiZ7txGwhM9xr8al2ZKbdHEiQLzF5qv8TjXsm/n7RmER0NU+nUsZM82+05lMHytdiaKgHExEd9L+vZ21NnmsnhjDtg+57jKOvI/RAz1ZS2vwOJo8l2EBzJOKt1JoT7epMz+txdqWulDtvmHra0QRrfYcW6kkDRyJeyGc2CC4jpIgNAk+iufxdSLilBB1IwyOZ45F+U7jQ2ByR2bvb1VUr30Ftiaifa46eo2gg/3RlKtZSih1qa9IUoTiTYGai28iHJfz2SM+8+Bi+0kIkTpCHD7o30xwJ6JyqQnxl+l7oWf0/3YPImqu0+FAMOmJONLADLXaAGkqZ4BLKsiknulfqakFZO6AkB5yOdrMtXuIeuqGuI+3wlfioZUsXYMKmutXAkRZpabIVzHAg+gV2rqWxKwk0lQn2Jdxe898A0nU05kbzpbAiQ7a97t9FN9D8gbXMWzqWICmCS6HfWwSMAxzeO7gRfNsgHyZS2EBIxVawQQReCL7l2nkjpVTjppqrXv+/Euo+uo4U7wB2pSj9zj54gKYGGpCK+U/QjrVWaSdWWnwL5x4qSB2L9lILLvV8pzFrWc1MtH0xn2uttZi81rp30e0w7xxybLyDxocLQKuJiN4p95QytSfS4k5ClfAja7YvzfbE3A+aZwMTGslXZljPLrBGZbEWzX10hpUbwL6prOcWqMwRqTKE/w1CsINCW7QOx23RVpjD5Uu9c/+JiO+FctoA5jPlvbHGvZcy1o0SqWb0kb7vo+vJWsb6P0CUT2mWTNxe4Am0f4loyHLKnxI7e63a75PGzJDzphIw05yXQkL2cSdqm/roHjrn7QeiO4CfX+tBpwZrpBJTYwnvwLDF4AOimccewBzRSg840XM6UU/EXILI6rmIpu6is3UVKNO2yARpDwyGCLdIvPaZmYS8RrStYJ5rKMA5yiVPG1cg3Dt/PtRu3gADm+EPsK676AJCp5DjNi6kKDBbYM4QiYD7VM8/wTdLFMkpxgT8rY8dtzJcAxqAc8eG4MFVxAligoXy2BwdAIOKrdZJTWzhusg33uprJOU9HNsgt4RZVQgAfRS+BUy/rblKJG4LmOjKZDk3isR/B8AI0bhCMW0bnQFDxNSL7bTtCXykBUgWqO/c3nBVcQCwbqGyr+SLVkYG0NCC8N6VDjCx/ckVxlz8uSDoQVEdKHGFnHwbIy60/TcK506qRgljTWYkYjTiyacIRBcK5VfwgRbgXQem2lOumqJqKKCkFKBhrPsEDRZooVztJN9WSfXclclb+YrtfY8qwLCtjQjJxpQ/VSMfObLa3F3xX0kRmSJiC3AtsJOsL3NAtZZ2s/79D92/Et8rQEv3dKYWcAp/cJ/ESXyPaNWC4HvAJQvlcsodLbcfS6SaQKE7BQ6uNN9GPOSIwg5CLolSoaNasAVcZ4WgZ+tL60jzE5D7pbTtdsQzVBoOMh9EV6DisJCpotcV/MFROgMCMvMut3Zi+LWau6X6OGcSzEEwQ6/UDd4Mc9hVvneQGWlAAdu/1EJGEucSIpGtf0ZFcdC9Eia2AJxbAvWMRLvWfUOwreasod0/ZUmPtUYu2gwR1F3zOlY4fSzRi/WYWlHpREz1gCU7MpX32q0JGHFnOkOtN5f2HSQYbVeoMkYw8znaE/WcP8uSVgoQf0YXb4FgNVdHzgpyc+pGPC2c/1AI/AqfRtLcVAvmKE53jerirNHTLKHxBdDGEn7hNsPCtZrWvtG9gTref4yI34jhHazjlfDtR411FTRAJF8hSp84D7rGqiScbfoCOzHAQrmefUbCPQFoX8PsVkAb0Zj3IDDfkjVM1Vx+gqazx9Zu828l/Y3Ms57/B9EdIy2VUH7qXuQSgcPNV9dkH+WHPkv4Sf6Sq5x5CRN3yeIO3IUEGSIozOG/gXx3JjjYwu7P4QL09alcyD79CH2hQuv+7Nb9qSbYQrtdIIuPYsw9yV+QK4fONxIgQwM3RafblXylOZ5JMTPkvB36mpeIxAcAkIHuXzVKuucoflfi/3YHfczkxq9b6mvgQmPRHGXP7zTZI7T+cqCcAZLyUgx1leBfKAWM9WwNpFIALe1wFPZQ6xbi8a3mO9XOHyEF5aiC0gro4oUmvIAjT2HXleiewOYnuipEzAK5b4y+Sc3g79X0LRQ0fPbXQV3HeWdS4jnAt3fItDnKrz5Operx6Uft0ATC9BFUDHi9yBhnDz1N1EdStyl+0K6fNIreUynjRwWIOXxwAgDwUPeGABM7HAydo5SrAPkea6zPSNIPInTFbKc/x1bb+bMGFu2gSihReTgyP4a5uqLI1Qr8rLmOJdAj0Z+id+MzDbcnl/DRP6E8GqAycdev5+LBiTlBd/ipdnOBHd2gYs4An0oA6wlqsyO0FHdAF04PPp+3GZ5LyC4ioc8zDKTdcX8qpdT/C/Dg/ivPGm/7oscNfNjFya1zmtsUHdRjJYJRX/NUgGdLJP3Abr/UTj3C4WkPDLuWXOt72LCCCjWlG1w3SPQ+Qps4ivqTAo/2kdOa7YkNzKCHLtcQjG0R/q0w7/AY/mVhbEUpcG8BIO9Wyh50jvwtpJYV5LmlSxrlkE3Dbz2cIMcxpK8R/RxcLuGfPnk6wvmFT4vWqDFTMOSi2FHYaaN/D50RmDfqNVJa6a4au1gW4ABkMoPJthuFb6KJC3Sbu6jEBxq7awQBdu8qtD168G9j2/vo7POuNtY497hV4BF6ievGGcIOVf4Zqmorw4u1G72WuXxijGjouq7A4cgK54Q2d78rUKHlfx/dsAHyO41eT8ou9QT9f+ezPbTTh/kkiFwFcmavEdG22rUrNIrcd3F+m+GUyOXaGynqPjq/J+B+0hwty8RR/x0Ytjke6XL9VWDhHGH/AAHXANNHuv9eyfxCQtbh/Tvh0GabZImkvpaAJ8qNd9HV967lqzvk4RL8pD6e6uAtJJ6YHmuCHIk1sIMH+BeDiA9fXkmrZwgQPtX9JH8p0FxeaOxeqeQ+uvoy1BtLIQ6aTk1pF3VcgtorRcJ0jnFITiCQG0J+eS+X7xghvYDpjwCWt+iGudLfoEvWEuLJv0A3h+87RzpdZK4HnYC7MMFfxGSJPOfI2YFP+mzQ5+kbtAVnAL6BOVYA5hncgt0zv9iwvofO0NEpbgtgUbol4ojjcOsdvEY66MBp9w0cOgKYdrvuuZjxAWkXZVCFUsZV/tgtPrz+VSKV5EAmU7Q0ayWWyMM+zDXgyPwq1x5lSIl8tgaIJkRzSvDrXitg1gwvNVj78wb6GQum+RzBJdYOEd35dQi3cDHrM5R6PX9cUUxRSdzWs39NkupSkY5J/gCt7xEhJzi8PCDktwDJvPAG/ktAENqBY+DdBeBaBaF9Yss3OIyyHAsmCkgjzW1eO64HLS3f8rvrxChDk5cnRi3sSPPEyJ9MNDeKrn/7wonREJG7AJrZQ0jvsHfX4N8dufRbPDHy7rJNskGQ3LPgbcFJv5UToxt0sg/i8QLnmm2kk5TA+Vs5MToFsHbXbQMlGdDfvhrDo7Jv5cToMSCdi3EDEbuNP7cF77d2YlQLVPPnlyL8DrlBi6NuPyL+B7P34D38THbHAAAAAElFTkSuQmCC",UF="/3DdesignerDemo/assets/红色胸棉背面-raXMjKyA.png",VF="/3DdesignerDemo/assets/红色菱形织带正面_1450561-CmGvQ3qC.png",HF="/3DdesignerDemo/assets/红色菱形织带正面_1450561横-D_H1g27m.png",zF="/3DdesignerDemo/assets/红色菱形背面-j2uUtKFP.png",$F="/3DdesignerDemo/assets/148800178 copy-O3Bxhqk_.glb",WF="/3DdesignerDemo/assets/148800178-Dem4-2mg.glb",GF="/3DdesignerDemo/assets/148800178-CB15ZkSf.svg",jF="/3DdesignerDemo/assets/148800178copy-7Tuf7_u8.svg",XF="/3DdesignerDemo/assets/line-black-Dc4bge17.png",KF="/3DdesignerDemo/assets/line-blue-DiLGitnc.png",YF="/3DdesignerDemo/assets/line-green-BGBDyhF7.png",qF="/3DdesignerDemo/assets/line-red-BoYKkIyp.png",ZF="/3DdesignerDemo/assets/line-white-Bg6MNVmj.png",JF="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20aria-hidden='true'%20role='img'%20class='iconify%20iconify--logos'%20width='37.07'%20height='36'%20preserveAspectRatio='xMidYMid%20meet'%20viewBox='0%200%20256%20198'%3e%3cpath%20fill='%2341B883'%20d='M204.8%200H256L128%20220.8L0%200h97.92L128%2051.2L157.44%200h47.36Z'%3e%3c/path%3e%3cpath%20fill='%2341B883'%20d='m0%200l128%20220.8L256%200h-51.2L128%20132.48L50.56%200H0Z'%3e%3c/path%3e%3cpath%20fill='%2335495E'%20d='M50.56%200L128%20133.12L204.8%200h-47.36L128%2051.2L97.92%200H50.56Z'%3e%3c/path%3e%3c/svg%3e",QF=t=>new URL(Object.assign({"../assets/sky/nx.jpg":TF,"../assets/sky/ny.jpg":EF,"../assets/sky/nz.jpg":MF,"../assets/sky/px.jpg":AF,"../assets/sky/py.jpg":kF,"../assets/sky/pz.jpg":RF,"../assets/texture/204102AA9999莫代尔_201131.png":PF,"../assets/texture/219183AA9999  L8F3011.png":OF,"../assets/texture/排扣.png":LF,"../assets/texture/红色下橡筋面料_26666856.png":IF,"../assets/texture/红色排扣正面.png":DF,"../assets/texture/红色排扣背面.png":NF,"../assets/texture/红色网布_26666762.png":FF,"../assets/texture/红色胸棉布正面.png":BF,"../assets/texture/红色胸棉背面.png":UF,"../assets/texture/红色菱形织带正面_1450561.png":VF,"../assets/texture/红色菱形织带正面_1450561横.png":HF,"../assets/texture/红色菱形背面.png":zF,"../assets/vs/148800178 copy.glb":$F,"../assets/vs/148800178.glb":WF,"../assets/vs/148800178.svg":GF,"../assets/vs/148800178copy.svg":jF,"../assets/vs/line-black.png":XF,"../assets/vs/line-blue.png":KF,"../assets/vs/line-green.png":YF,"../assets/vs/line-red.png":qF,"../assets/vs/line-white.png":ZF,"../assets/vue.svg":JF})[`../assets/${t}`],import.meta.url).href,uc=t=>typeof t.id=="string",dc=t=>typeof t.uuid=="number",eB=t=>typeof t.isMirror=="boolean",tB=t=>typeof t.mirrorId=="number",R_={imageOptions:{crossOrigin:"anonymous"},async repeat(t,e,n){if(!e.clipPath)return;let i=e.imgUrl,r={left:e.left,top:e.top,scaleX:e.scaleX,scaleY:e.scaleY,flipX:e.flipX,flipY:e.flipY},a=new Sn.fabric.Point(e.getCenterPoint().x,e.getCenterPoint().y),d=a.x-e.width*e.scaleX/2,s=a.y-e.height*e.scaleX/2,o=e.clipPath.left+e.clipPath.width-(d+e.width*e.scaleX),c=e.clipPath.top+e.clipPath.height-(s+e.height*e.scaleX);if(n.getObjects())for(let v=0;v<n.getObjects().length;v++)e.isMirror&&n.getObjects()[v].mirrorId==e.uuid&&n.remove(n.getObjects()[v]);let h=t.getObjects();if(h)for(let v=0;v<h.length;v++)t.remove(h[v]);let l=0;for(l=0;l<=Math.floor(o/(e.width*e.scaleY));l++)await this.doX(t,i,l,r,null,null,!0,void 0,void 0,d,s);let u=0;for(u=0;u<=Math.floor((e.left-e.clipPath.left)/(e.width*e.scaleY));u++)await this.doX(t,i,u,r,null,null,!1,void 0,void 0,d,s);let f=!0;(e.flipX&&!e.flipY||!e.flipX&&!e.flipY)&&(f=!1);for(let v=0;v<=Math.floor(c/(e.height*e.scaleX));v++)r.left=e.left,await this.doY(t,i,v,r,!0,f,d,s).then(async b=>{for(let _=0;_<l;_++)await this.doX(t,i,_,r,!0,b,!0,v,!0,d,s);for(let _=0;_<u;_++)await this.doX(t,i,_,r,!0,b,!1,v,!0,d,s)});for(let v=0;v<=Math.floor((e.top-e.clipPath.top)/(e.height*e.scaleX));v++)r.left=e.left,await this.doY(t,i,v,r,!1,f,d,s).then(async b=>{for(let _=0;_<l;_++)await this.doX(t,i,_,r,!0,b,!0,v,!1,d,s);for(let _=0;_<u;_++)await this.doX(t,i,_,r,!0,b,!1,v,!1,d,s)});let m=t.getObjects(),g=new Sn.fabric.Group(m);g.mirrorId=e.uuid,this.doRotate(e,g,n),n.add(g);let p=n.getObjects().findIndex(v=>v.uuid==e.uuid);return g.moveTo(p),g.selectable=!1,g.hoverCursor="default",n.requestRenderAll(),g},doX(t,e,n,i,r,a,d,s,o,c,h){return new Promise(l=>{console.log(r,a),Sn.fabric!=null&&Sn.fabric.Image.fromURL(e,u=>{u.set({scaleX:i.scaleX,scaleY:i.scaleY,flipX:i.flipX,flipY:i.flipY,crossOrigin:"anonymous"}).setCoords();let f=n%2===0;i.flipX&&(f=n%2!==0),d?u.left=+(u.width*u.scaleX*(n+1)+c)-1:u.left=c-u.width*u.scaleX*(n+1)+1,typeof s<"u"?o?u.top=u.height*u.scaleY*(s+1)+h-1:u.top=h-u.height*u.scaleY*(s+1)+1:u.top=h,t.active=!1,t.add(u),l&&l(f)},this.imageOptions)})},doY(t,e,n,i,r,a,d,s){return new Promise(o=>{Sn.fabric!=null&&Sn.fabric.Image.fromURL(e,c=>{c.set({scaleX:i.scaleX,scaleY:i.scaleY,flipX:i.flipX,flipY:i.flipY,crossOrigin:"anonymous"}).setCoords();let h=n%2!==0;a===!1&&(h=n%2===0),r?(c.left=d,c.top=c.height*c.scaleY*(n+1)+s-1):(c.left=d,c.top=s-c.height*c.scaleY*(n+1)+1),t.active=!1,t.add(c),o&&o(h)},this.imageOptions)})},doRotate(t,e,n){let i=new Sn.fabric.Point(t.getCenterPoint().x,t.getCenterPoint().y),r=Sn.fabric.util.degreesToRadians(t.angle),a=new Sn.fabric.Point(e.left,e.top),d=Sn.fabric.util.rotatePoint(a,i,r);e.top=d.y,e.left=d.x,e.angle=t.angle,e.setCoords(),n.renderAll()}},_x=t=>(fk("data-v-e7e221e7"),t=t(),hk(),t),nB={class:"container-wrap"},iB=_x(()=>ae("div",{id:"model-wrap",class:"model-wrap"},null,-1)),rB={class:"canvas-wrap"},sB={class:"canvas-container-opera"},oB=_x(()=>ae("div",{class:"canvas-container-outer"},[ae("canvas",{id:"canvas"})],-1)),aB={class:"canvas-container-texture"},lB={class:"texture-left"},cB=["onClick"],uB={class:"texture-right"},dB=["onClick"],fB={class:"sketch-wrap"},hB={class:"sketch-name"},pB={class:"sketch-image"},mB=["onClick"],P_="http://sbz6msx38.hn-bkt.clouddn.com/148800178.svg",gB="http://sbz6msx38.hn-bkt.clouddn.com/148800178.glb",vB=de({__name:"HelloWorld",setup(t){let e,n,i,r,a,d=45,s,o,c;const h=new hx,l=new X3(h),u=new gx(h),f=new m3({opacity:1,transparent:!0,shininess:30,side:ur});let m=Ft([]);const g=Ft({});let p,v=2048,b,_=800,S,w,C=null,x=!1,M=!0;const E=q("blue");let A,O,D;const L=["http://sbz6msx38.hn-bkt.clouddn.com/排扣.png","http://sbz6msx38.hn-bkt.clouddn.com/219183AA9999  L8F3011.png","http://sbz6msx38.hn-bkt.clouddn.com/204102AA9999莫代尔_201131.png"],U=["#f27a9c","#bf8fc0","#fc1944","#264B4F","#FFFFFF","#000000"],j=[{value:"red",label:"红色"},{value:"blue",label:"蓝色"},{value:"green",label:"绿色"},{value:"white",label:"白色"},{value:"black",label:"黑色"}];mt(()=>{G()}),et(()=>{s=document.getElementById("model-wrap"),o=document.querySelector(".canvas-container-outer"),S=new Sn.fabric.Canvas("canvas"),w=new Sn.fabric.Canvas(null),V(),k(s.clientWidth,s.clientHeight),F(s.clientWidth,s.clientHeight),T(),N(),P(),H(),S.on("mouse:down",X),S.on("mouse:move",Y),S.on("mouse:up",le),S.on("mouse:wheel",Ce),S.on("object:modified",Re),window.addEventListener("resize",Ne,!1)});const V=()=>{r=new i3;const ee=["http://sbz6msx38.hn-bkt.clouddn.com/px.jpg","http://sbz6msx38.hn-bkt.clouddn.com/nx.jpg","http://sbz6msx38.hn-bkt.clouddn.com/py.jpg","http://sbz6msx38.hn-bkt.clouddn.com/ny.jpg","http://sbz6msx38.hn-bkt.clouddn.com/pz.jpg","http://sbz6msx38.hn-bkt.clouddn.com/nz.jpg"];c=new E3(h).load(ee),r.background=c},k=(ee,oe)=>{e=new ai(d,ee/oe,.1,1e3),e.position.set(0,0,3.5),e.updateProjectionMatrix(),r.add(e)},F=(ee,oe)=>{n=new sx({antialias:!0}),n.setPixelRatio(window.devicePixelRatio),n.setSize(ee,oe),n.outputEncoding=ls,s.appendChild(n.domElement),n.render(r,e)},T=()=>{i=new j3(e,n.domElement),i.enabled=!0,i.screenSpacePanning=!0,i.enableDamping=!0,i.enableZoom=!0,i.autoRotate=!1,i.autoRotateSpeed=.1,i.enablePan=!0,i.zoomSpeed=1},P=()=>{const ee=new M3(16777215,16777215,.61);ee.position.set(0,50,0);const oe=new vx(16777215,.54);oe.position.set(-8,12,8),oe.castShadow=!0,oe.shadow.mapSize=new It(1024,1024),r.add(oe,ee)},H=()=>{l.load(gB,ee=>{a=ee.scene,a.position.set(0,0,0),a.rotation.y=Math.PI*2,a.position.y=-1,a.traverse(oe=>{oe instanceof _i&&(oe.castShadow=!0,oe.receiveShadow=!0,m.forEach(J=>{J.id==oe.name&&(oe.renderOrder=J.renderOrder)}))}),te(),r.add(a)})},N=()=>{i.update(),n.render(r,e),requestAnimationFrame(N)},G=()=>{Sn.fabric.loadSVGFromURL(P_,async(ee,oe)=>{p=oe.width,b=_/p,S.setZoom(b),S.setWidth(_),S.setHeight(_),S.renderAll();let J=await $(P_);const ce=new Sn.fabric.Group(ee);m=ce.getObjects(),m.forEach(Oe=>{let ze=Oe.id;g[ze]=[],J.forEach(xe=>{ze==xe.id&&(Oe.renderOrder=parseInt(xe.renderOrder))})}),ce.getObjects().forEach(Oe=>{Oe.selectable=!1,Oe.hoverCursor="default"}),S.add(ce),S.setActiveObject(ce);const ye=S.getActiveObject();ye!==null&&ye.toActiveSelection(),S.discardActiveObject(),S.renderAll()})},$=ee=>new Promise(oe=>{let J=new XMLHttpRequest;J.open("GET",ee,!0),J.onreadystatechange=function(){if(J.readyState===4&&J.status===200){let ce=[],ye=J.responseText,xe=new DOMParser().parseFromString(ye,"image/svg+xml").getElementsByTagName("path");for(let Ve=0;Ve<xe.length;Ve++){let we=xe[Ve],Ie=we.getAttribute("id"),Ge=we.getAttribute("renderOrder");ce.push({id:Ie,renderOrder:Ge})}oe(ce)}},J.send()}),z=ee=>{Sn.fabric.Image.fromURL(ee,function(oe){oe.set({left:50,top:50,imgUrl:ee,isMirror:!1,uuid:Math.random(),show:!0,selected:!1}),se(oe),S.add(oe)})},Z=ee=>{C=ee,m.forEach(oe=>{oe.set({strokeWidth:.1,stroke:ee=="transparent"?"#000000":ee,fill:ee})}),S.renderAll()},W=(ee,oe)=>{console.log(oe.toDataURL()),u.load(oe.toDataURL(),function(J){J.magFilter=qn,J.minFilter=qn,J.encoding=ls,J.needsUpdate=!0,J.wrapS=yl,J.wrapT=yl,J.anisotropy=n.capabilities.getMaxAnisotropy(),f.map=J,ee.traverse(ce=>{ce instanceof _i&&m.forEach(ye=>{ye.id==ce.name&&(ce.material=f)})})})},te=()=>{O=o.scrollTop,D=o.scrollLeft,S.setOverlayImage(A,S.renderAll.bind(S)),ie(v),W(a,S),S.setOverlayImage(null,S.renderAll.bind(S)),ie(p*b),p*b>=v&&(o.scrollTop=O,o.scrollLeft=D)},ie=ee=>{S.setZoom(ee/p),S.setWidth(ee),S.setHeight(ee),S.renderAll()},re=async()=>{let ee=S.getActiveObject();if(ee&&eB(ee))if(ee.isMirror=!ee.isMirror,ee.isMirror){me(ee);let oe=await R_.repeat(w,ee,S);_e(oe,ee.clipPath)}else se(ee),S.getObjects().forEach(oe=>{dc(ee)&&oe.mirrorId==ee.uuid&&S.remove(oe)})},_e=(ee,oe)=>{let J,ce;uc(oe)&&(ce=oe.id),oe.set({left:oe.left,top:oe.top}),oe.clone(ye=>{J=ye,J&&(J.absolutePositioned=!0),ee.set({clipPath:J,clipPathTarget:ce})})},Pe=()=>{b=_/p,S.setZoom(b),S.setWidth(_),S.setHeight(_),S.renderAll()},K=()=>{Sn.fabric.Image.fromURL(QF(`vs/line-${E.value}.png`),function(ee){A=ee.set({originX:"left",originY:"top"}),te()})},Q=()=>{M=!M,a.traverse(ee=>{ee instanceof Ws&&ee.name=="Avatar_Olivia"&&(ee.visible=!!M)})},fe=ee=>{let oe=S.getObjects();ee.show=!ee.show,console.log(ee.show),ee.set("visible",ee.show).setCoords(),ee.show||(ee.selected=!1),ee.selectable=ee.show,ee.hoverCursor=ee.show?"move":"default",S.discardActiveObject(ee),ee.isMirror&&oe.forEach(J=>{J.mirrorId==ee.uuid&&J.set("visible",ee.show).setCoords()}),S.renderAll()},ge=ee=>{S.getObjects().forEach(oe=>{dc(oe)&&ee.uuid==oe.uuid&&(ee.show?(ee.selected=!0,S.setActiveObject(oe)):alert("该对象已经隐藏,请先控制显示再选中!"))}),S.renderAll()},se=ee=>{ee.setControlsVisibility({mt:!1,mb:!1,ml:!1,mr:!1,tl:!0,tr:!0,bl:!0,br:!0})},me=ee=>{ee.setControlsVisibility({mt:!1,mb:!1,ml:!1,mr:!1,tl:!1,tr:!1,bl:!1,br:!1})},be=()=>{let ee=[],oe=[];Object.keys(g).forEach(J=>{const ce=g[J];ce.length>0&&ce.forEach(ye=>{ee.push(ye)})}),ee.forEach(J=>{oe.push({scaleX:J.scaleX,scaleY:J.scaleY,left:J.left,top:J.top,imgUrl:J.imgUrl,angle:J.angle,clipPathTarget:J.clipPathTarget?J.clipPathTarget:"",isMirror:J.isMirror,uuid:J.uuid,show:J.show})}),console.log(C),localStorage.setItem("canvas",JSON.stringify(oe)),localStorage.setItem("color",C),localStorage.setItem("overlay",E.value)},Me=ee=>new Promise(oe=>{Sn.fabric.Image.fromURL(ee.imgUrl,function(J){J.set({left:ee.left,top:ee.top,scaleX:ee.scaleX,scaleY:ee.scaleY,imgUrl:ee.imgUrl,angle:ee.angle,clipPathTarget:ee.clipPathTarget?ee.clipPathTarget:"",isMirror:ee.isMirror,uuid:ee.uuid,show:ee.show,visible:ee.show}),S.add(J),S.getObjects().forEach(ye=>{ee.clipPathTarget&&uc(ye)&&ye.id==ee.clipPathTarget&&_e(J,ye)}),oe(J)})}),Ee=async()=>{const ee=localStorage.getItem("canvas")||"";E.value=localStorage.getItem("overlay")||"";const oe=JSON.parse(ee);for(let J=0;J<oe.length;J++){let ce=oe[J],ye=await Me(ce);if(ye.isMirror){let Oe=await R_.repeat(w,ye,S);_e(Oe,ye.clipPath),Oe.visible=ye.show}g[ce.clipPathTarget].push(ye)}localStorage.getItem("color")&&S.getObjects().forEach(J=>{J.id&&(localStorage.getItem("color")=="transparent"?J.set({strokeWidth:.1,stroke:"#000000",fill:"transparent"}):localStorage.getItem("color")!="null"&&J.set("fill",localStorage.getItem("color")))}),K()},X=ee=>{x=!0,ee.target&&(ee.target.oldLeft=ee.target.left,ee.target.oldTop=ee.target.top,ee.target.oldAngle=ee.target.angle,ee.target.oldScaleX=ee.target.ScaleX,ee.target.oldScaleY=ee.target.ScaleY);let oe=S.getActiveObject();if(oe!==null&&dc(oe)){const J=oe.uuid;Object.keys(g).forEach(ce=>{const ye=g[ce];ye.length>0&&ye.forEach(Oe=>Oe.selected=Oe.uuid===J)})}else Object.keys(g).forEach(J=>{const ce=g[J];ce.length>0&&ce.forEach(ye=>{ye.selected=!1})})},Y=ee=>{if(x){let oe=S.getActiveObject();if(!oe)return;let J=S.getPointer(ee.e,!0),ce=S.getObjects(),ye=null,Oe;if(ce.forEach(ze=>{ze.containsPoint(J)&&uc(ze)&&(ye=ze)}),ye&&m.some(ze=>ze===ye)){let ze,xe=ye;uc(xe)&&(Oe=xe.id),xe.set({left:xe.left,top:xe.top}),xe.clone(Ve=>{ze=Ve,ze&&(ze.absolutePositioned=!0),oe.set({clipPath:ze,clipPathTarget:Oe})})}if(Oe!==void 0&&oe!==null&&dc(oe)){const ze=oe.uuid;Object.keys(g).forEach(xe=>{const Ve=g[xe],we=Ve.findIndex(Ie=>Ie.uuid===ze);we!==-1&&Ve.splice(we,1)}),g[Oe].push(oe)}}},le=()=>{x=!1,te()},Ce=ee=>{var oe=ee.e.deltaY;b*=.9999**oe,b>2&&(b=2),b<.01&&(b=.01),S.setZoom(b),S.setWidth(b*p),S.setHeight(b*p),S.renderAll(),ee.e.preventDefault(),ee.e.stopPropagation()},Re=ee=>{let oe=S.getObjects(),J=null;if(oe.forEach(ce=>{tB(ce)&&ce.mirrorId==ee.target.uuid&&(J=ce)}),J!==null){let ce=J,ye=ee.target.clipPathTarget,Oe=ye?oe.find(ze=>uc(ze)&&ze.id==ye):null;if(ee.target.oldAngle!=ee.target.angle){let ze=ee.target.angle-ee.target.oldAngle,xe=new Sn.fabric.Point(ee.target.getCenterPoint().x,ee.target.getCenterPoint().y),Ve=Sn.fabric.util.degreesToRadians(ze),we=new Sn.fabric.Point(ce.left,ce.top),Ie=Sn.fabric.util.rotatePoint(we,xe,Ve);ce.top=Ie.y,ce.left=Ie.x,ce.angle=ee.target.angle,console.log("平铺旋转")}else ce.left=ce.left+ee.target.left-ee.target.oldLeft,ce.top=ce.top+ee.target.top-ee.target.oldTop;ee.target.isMirror&&Oe&&_e(ce,Oe),ce.setCoords(),S.renderAll()}},Ne=()=>{n.setSize(s.clientWidth,s.clientHeight),e.aspect=s.clientWidth/s.clientHeight,e.updateProjectionMatrix(),n.render(r,e)},he=()=>{let ee=S.getActiveObject();S.remove(ee),S.renderAll();let oe;dc(ee)&&(oe=ee.uuid),S.getObjects().forEach(J=>{J.mirrorId==oe&&S.remove(J)}),Object.keys(g).forEach(J=>{const ce=g[J],ye=ce.findIndex(Oe=>Oe.uuid===oe);ye!==-1&&ce.splice(ye,1)})},pe=ee=>{const oe=new FileReader;oe.readAsDataURL(ee.raw),oe.onload=function(){var J=oe.result,ce=new Image;ce.onload=function(){Sn.fabric.Image.fromURL(ce.src,function(ye){ye.set({left:100,top:100,imgUrl:ce.src,isMirror:!1,uuid:Math.random(),show:!0,selected:!1}),se(ye),S.add(ye)})},ce.src=J}};return(ee,oe)=>{const J=ft("el-button"),ce=ft("el-option"),ye=ft("el-select"),Oe=ft("el-upload");return I(),ne("div",nB,[iB,ae("div",rB,[ae("div",sB,[ue(J,{size:"small",onClick:be},{default:ve(()=>[Tt("保存")]),_:1}),ue(J,{size:"small",onClick:Ee},{default:ve(()=>[Tt("本地")]),_:1}),ue(J,{size:"small",onClick:he},{default:ve(()=>[Tt("删除")]),_:1}),ue(J,{size:"small",onClick:re},{default:ve(()=>[Tt("平铺")]),_:1}),ue(J,{size:"small",onClick:Q},{default:ve(()=>[Tt("模特")]),_:1}),ue(J,{size:"small",onClick:Pe},{default:ve(()=>[Tt("还原")]),_:1}),ue(ye,{modelValue:E.value,"onUpdate:modelValue":oe[0]||(oe[0]=ze=>E.value=ze),size:"small",style:{"margin-left":"12px"},onChange:K},{default:ve(()=>[(I(),ne(Qe,null,wt(j,ze=>ue(ce,{key:ze.value,label:ze.label,value:ze.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),ue(Oe,{style:{"margin-left":"5px"},action:"","on-change":pe,"auto-upload":!1,"show-file-list":!1},{default:ve(()=>[ue(J,{size:"small",type:"primary"},{default:ve(()=>[Tt("图片上传")]),_:1})]),_:1})]),oB,ae("div",aB,[ae("div",lB,[(I(),ne(Qe,null,wt(L,ze=>ae("div",{key:ze,class:"texture-item",style:nt({backgroundImage:"url("+ze+")"}),onClick:xe=>z(ze)},null,12,cB)),64))]),ae("div",uB,[(I(),ne(Qe,null,wt(U,ze=>ae("div",{key:ze,class:"texture-item",style:nt({background:ze}),onClick:xe=>Z(ze)},null,12,dB)),64)),ae("div",{class:"texture-item trans",onClick:oe[1]||(oe[1]=ze=>Z("transparent"))})])])]),ae("div",fB,[(I(!0),ne(Qe,null,wt(g,(ze,xe)=>(I(),ne("div",{key:xe,class:"sketch-item"},[ae("div",hB,$e(xe),1),ae("div",pB,[(I(!0),ne(Qe,null,wt(ze,(Ve,we)=>(I(),ne("div",{key:we},[ae("div",{class:B(["sketch-image-wrap",{"sketch-image-active":Ve.selected}]),style:nt({backgroundImage:"url("+Ve.imgUrl+")"}),onClick:Ie=>ge(Ve)},null,14,mB),ue(J,{size:"small",onClick:Ie=>fe(Ve)},{default:ve(()=>[Tt($e(Ve.show?"显示":"隐藏"),1)]),_:2},1032,["onClick"])]))),128))])]))),128))])])}}}),Sx=(t,e)=>{const n=t.__vccOpts||t;for(const[i,r]of e)n[i]=r;return n},yB=Sx(vB,[["__scopeId","data-v-e7e221e7"]]),bB=de({__name:"App",setup(t){return(e,n)=>(I(),ke(yB,{msg:"DEMO"}))}}),_B=Sx(bB,[["__scopeId","data-v-ef005e52"]]),SB='a[href],button:not([disabled]),button:not([hidden]),:not([tabindex="-1"]),input:not([disabled]),input:not([type="hidden"]),select:not([disabled]),textarea:not([disabled])',wB=t=>getComputedStyle(t).position==="fixed"?!1:t.offsetParent!==null,O_=t=>Array.from(t.querySelectorAll(SB)).filter(e=>CB(e)&&wB(e)),CB=t=>{if(t.tabIndex>0||t.tabIndex===0&&t.getAttribute("tabIndex")!==null)return!0;if(t.disabled)return!1;switch(t.nodeName){case"A":return!!t.href&&t.rel!=="ignore";case"INPUT":return!(t.type==="hidden"||t.type==="file");case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},Xd=function(t,e,...n){let i;e.includes("mouse")||e.includes("click")?i="MouseEvents":e.includes("key")?i="KeyboardEvent":i="HTMLEvents";const r=document.createEvent(i);return r.initEvent(e,...n),t.dispatchEvent(r),t},wx=t=>!t.getAttribute("aria-owns"),Cx=(t,e,n)=>{const{parentNode:i}=t;if(!i)return null;const r=i.querySelectorAll(n),a=Array.prototype.indexOf.call(r,t);return r[a+e]||null},Kd=t=>{t&&(t.focus(),!wx(t)&&t.click())},pn=(t,e,{checkForDefaultPrevented:n=!0}={})=>r=>{const a=t==null?void 0:t(r);if(n===!1||!a)return e==null?void 0:e(r)},L_=t=>e=>e.pointerType==="mouse"?t(e):void 0;var xB=Object.defineProperty,TB=Object.defineProperties,EB=Object.getOwnPropertyDescriptors,I_=Object.getOwnPropertySymbols,MB=Object.prototype.hasOwnProperty,AB=Object.prototype.propertyIsEnumerable,D_=(t,e,n)=>e in t?xB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,kB=(t,e)=>{for(var n in e||(e={}))MB.call(e,n)&&D_(t,n,e[n]);if(I_)for(var n of I_(e))AB.call(e,n)&&D_(t,n,e[n]);return t},RB=(t,e)=>TB(t,EB(e));function N_(t,e){var n;const i=Jt();return Di(()=>{i.value=t()},RB(kB({},e),{flush:(n=e==null?void 0:e.flush)!=null?n:"sync"})),Ul(i)}var F_;const kt=typeof window<"u",PB=t=>typeof t<"u",OB=t=>typeof t=="function",LB=t=>typeof t=="string",xl=()=>{},xx=kt&&((F_=window==null?void 0:window.navigator)==null?void 0:F_.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function Qs(t){return typeof t=="function"?t():y(t)}function Tx(t,e){function n(...i){return new Promise((r,a)=>{Promise.resolve(t(()=>e.apply(this,i),{fn:e,thisArg:this,args:i})).then(r).catch(a)})}return n}function IB(t,e={}){let n,i,r=xl;const a=s=>{clearTimeout(s),r(),r=xl};return s=>{const o=Qs(t),c=Qs(e.maxWait);return n&&a(n),o<=0||c!==void 0&&c<=0?(i&&(a(i),i=null),Promise.resolve(s())):new Promise((h,l)=>{r=e.rejectOnCancel?l:h,c&&!i&&(i=setTimeout(()=>{n&&a(n),i=null,h(s())},c)),n=setTimeout(()=>{i&&a(i),i=null,h(s())},o)})}}function DB(t,e=!0,n=!0,i=!1){let r=0,a,d=!0,s=xl,o;const c=()=>{a&&(clearTimeout(a),a=void 0,s(),s=xl)};return l=>{const u=Qs(t),f=Date.now()-r,m=()=>o=l();return c(),u<=0?(r=Date.now(),m()):(f>u&&(n||!d)?(r=Date.now(),m()):e&&(o=new Promise((g,p)=>{s=i?p:g,a=setTimeout(()=>{r=Date.now(),d=!0,g(m()),c()},Math.max(0,u-f))})),!n&&!a&&(a=setTimeout(()=>d=!0,u)),d=!1,o)}}function NB(t){return t}function fh(t){return CC()?(xC(t),!0):!1}function FB(t,e=200,n={}){return Tx(IB(e,n),t)}function BB(t,e=200,n={}){const i=q(t.value),r=FB(()=>{i.value=t.value},e,n);return Be(t,()=>r()),i}function Ex(t,e=200,n=!1,i=!0,r=!1){return Tx(DB(e,n,i,r),t)}function wv(t,e=!0){vt()?mt(t):e?t():et(t)}function na(t,e,n={}){const{immediate:i=!0}=n,r=q(!1);let a=null;function d(){a&&(clearTimeout(a),a=null)}function s(){r.value=!1,d()}function o(...c){d(),r.value=!0,a=setTimeout(()=>{r.value=!1,a=null,t(...c)},Qs(e))}return i&&(r.value=!0,kt&&o()),fh(s),{isPending:Ul(r),start:o,stop:s}}function Li(t){var e;const n=Qs(t);return(e=n==null?void 0:n.$el)!=null?e:n}const jl=kt?window:void 0,UB=kt?window.document:void 0;function cn(...t){let e,n,i,r;if(LB(t[0])||Array.isArray(t[0])?([n,i,r]=t,e=jl):[e,n,i,r]=t,!e)return xl;Array.isArray(n)||(n=[n]),Array.isArray(i)||(i=[i]);const a=[],d=()=>{a.forEach(h=>h()),a.length=0},s=(h,l,u,f)=>(h.addEventListener(l,u,f),()=>h.removeEventListener(l,u,f)),o=Be(()=>[Li(e),Qs(r)],([h,l])=>{d(),h&&a.push(...n.flatMap(u=>i.map(f=>s(h,u,f,l))))},{immediate:!0,flush:"post"}),c=()=>{o(),d()};return fh(c),c}let B_=!1;function Cv(t,e,n={}){const{window:i=jl,ignore:r=[],capture:a=!0,detectIframe:d=!1}=n;if(!i)return;xx&&!B_&&(B_=!0,Array.from(i.document.body.children).forEach(u=>u.addEventListener("click",xl)));let s=!0;const o=u=>r.some(f=>{if(typeof f=="string")return Array.from(i.document.querySelectorAll(f)).some(m=>m===u.target||u.composedPath().includes(m));{const m=Li(f);return m&&(u.target===m||u.composedPath().includes(m))}}),h=[cn(i,"click",u=>{const f=Li(t);if(!(!f||f===u.target||u.composedPath().includes(f))){if(u.detail===0&&(s=!o(u)),!s){s=!0;return}e(u)}},{passive:!0,capture:a}),cn(i,"pointerdown",u=>{const f=Li(t);f&&(s=!u.composedPath().includes(f)&&!o(u))},{passive:!0}),d&&cn(i,"blur",u=>{var f;const m=Li(t);((f=i.document.activeElement)==null?void 0:f.tagName)==="IFRAME"&&!(m!=null&&m.contains(i.document.activeElement))&&e(u)})].filter(Boolean);return()=>h.forEach(u=>u())}function VB(t,e=!1){const n=q(),i=()=>n.value=!!t();return i(),wv(i,e),n}function HB(t){return JSON.parse(JSON.stringify(t))}const U_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},V_="__vueuse_ssr_handlers__";U_[V_]=U_[V_]||{};function zB(t,e,{window:n=jl,initialValue:i=""}={}){const r=q(i),a=R(()=>{var d;return Li(e)||((d=n==null?void 0:n.document)==null?void 0:d.documentElement)});return Be([a,()=>Qs(t)],([d,s])=>{var o;if(d&&n){const c=(o=n.getComputedStyle(d).getPropertyValue(s))==null?void 0:o.trim();r.value=c||i}},{immediate:!0}),Be(r,d=>{var s;(s=a.value)!=null&&s.style&&a.value.style.setProperty(Qs(t),d)}),r}function $B({document:t=UB}={}){if(!t)return q("visible");const e=q(t.visibilityState);return cn(t,"visibilitychange",()=>{e.value=t.visibilityState}),e}var H_=Object.getOwnPropertySymbols,WB=Object.prototype.hasOwnProperty,GB=Object.prototype.propertyIsEnumerable,jB=(t,e)=>{var n={};for(var i in t)WB.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&H_)for(var i of H_(t))e.indexOf(i)<0&&GB.call(t,i)&&(n[i]=t[i]);return n};function Qn(t,e,n={}){const i=n,{window:r=jl}=i,a=jB(i,["window"]);let d;const s=VB(()=>r&&"ResizeObserver"in r),o=()=>{d&&(d.disconnect(),d=void 0)},c=Be(()=>Li(t),l=>{o(),s.value&&r&&l&&(d=new ResizeObserver(e),d.observe(l,a))},{immediate:!0,flush:"post"}),h=()=>{o(),c()};return fh(h),{isSupported:s,stop:h}}function z_(t,e={}){const{reset:n=!0,windowResize:i=!0,windowScroll:r=!0,immediate:a=!0}=e,d=q(0),s=q(0),o=q(0),c=q(0),h=q(0),l=q(0),u=q(0),f=q(0);function m(){const g=Li(t);if(!g){n&&(d.value=0,s.value=0,o.value=0,c.value=0,h.value=0,l.value=0,u.value=0,f.value=0);return}const p=g.getBoundingClientRect();d.value=p.height,s.value=p.bottom,o.value=p.left,c.value=p.right,h.value=p.top,l.value=p.width,u.value=p.x,f.value=p.y}return Qn(t,m),Be(()=>Li(t),g=>!g&&m()),r&&cn("scroll",m,{capture:!0,passive:!0}),i&&cn("resize",m,{passive:!0}),wv(()=>{a&&m()}),{height:d,bottom:s,left:o,right:c,top:h,width:l,x:u,y:f,update:m}}var $_;(function(t){t.UP="UP",t.RIGHT="RIGHT",t.DOWN="DOWN",t.LEFT="LEFT",t.NONE="NONE"})($_||($_={}));var XB=Object.defineProperty,W_=Object.getOwnPropertySymbols,KB=Object.prototype.hasOwnProperty,YB=Object.prototype.propertyIsEnumerable,G_=(t,e,n)=>e in t?XB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,qB=(t,e)=>{for(var n in e||(e={}))KB.call(e,n)&&G_(t,n,e[n]);if(W_)for(var n of W_(e))YB.call(e,n)&&G_(t,n,e[n]);return t};const ZB={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};qB({linear:NB},ZB);function JB(t,e,n,i={}){var r,a,d;const{clone:s=!1,passive:o=!1,eventName:c,deep:h=!1,defaultValue:l}=i,u=vt(),f=n||(u==null?void 0:u.emit)||((r=u==null?void 0:u.$emit)==null?void 0:r.bind(u))||((d=(a=u==null?void 0:u.proxy)==null?void 0:a.$emit)==null?void 0:d.bind(u==null?void 0:u.proxy));let m=c;e||(e="modelValue"),m=c||m||`update:${e.toString()}`;const g=v=>s?OB(s)?s(v):HB(v):v,p=()=>PB(t[e])?g(t[e]):l;if(o){const v=p(),b=q(v);return Be(()=>t[e],_=>b.value=g(_)),Be(b,_=>{(_!==t[e]||h)&&f(m,_)},{deep:h}),b}else return R({get(){return p()},set(v){f(m,v)}})}function QB({window:t=jl}={}){if(!t)return q(!1);const e=q(t.document.hasFocus());return cn(t,"blur",()=>{e.value=!1}),cn(t,"focus",()=>{e.value=!0}),e}function e4(t={}){const{window:e=jl,initialWidth:n=1/0,initialHeight:i=1/0,listenOrientation:r=!0,includeScrollbar:a=!0}=t,d=q(n),s=q(i),o=()=>{e&&(a?(d.value=e.innerWidth,s.value=e.innerHeight):(d.value=e.document.documentElement.clientWidth,s.value=e.document.documentElement.clientHeight))};return o(),wv(o),cn("resize",o,{passive:!0}),r&&cn("orientationchange",o,{passive:!0}),{width:d,height:s}}const Mx=()=>kt&&/firefox/i.test(window.navigator.userAgent),t4=(t,e)=>{if(!kt||!t||!e)return!1;const n=t.getBoundingClientRect();let i;return e instanceof Element?i=e.getBoundingClientRect():i={top:0,right:window.innerWidth,bottom:window.innerHeight,left:0},n.top<i.bottom&&n.bottom>i.top&&n.right>i.left&&n.left<i.right},j_=t=>{let e=0,n=t;for(;n;)e+=n.offsetTop,n=n.offsetParent;return e},n4=(t,e)=>Math.abs(j_(t)-j_(e)),xv=t=>{let e,n;return t.type==="touchend"?(n=t.changedTouches[0].clientY,e=t.changedTouches[0].clientX):t.type.startsWith("touch")?(n=t.touches[0].clientY,e=t.touches[0].clientX):(n=t.clientY,e=t.clientX),{clientX:e,clientY:n}};var Ax=typeof global=="object"&&global&&global.Object===Object&&global,i4=typeof self=="object"&&self&&self.Object===Object&&self,br=Ax||i4||Function("return this")(),Ki=br.Symbol,kx=Object.prototype,r4=kx.hasOwnProperty,s4=kx.toString,fc=Ki?Ki.toStringTag:void 0;function o4(t){var e=r4.call(t,fc),n=t[fc];try{t[fc]=void 0;var i=!0}catch{}var r=s4.call(t);return i&&(e?t[fc]=n:delete t[fc]),r}var a4=Object.prototype,l4=a4.toString;function c4(t){return l4.call(t)}var u4="[object Null]",d4="[object Undefined]",X_=Ki?Ki.toStringTag:void 0;function ua(t){return t==null?t===void 0?d4:u4:X_&&X_ in Object(t)?o4(t):c4(t)}function Lr(t){return t!=null&&typeof t=="object"}var f4="[object Symbol]";function hh(t){return typeof t=="symbol"||Lr(t)&&ua(t)==f4}function Rx(t,e){for(var n=-1,i=t==null?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}var fi=Array.isArray,h4=1/0,K_=Ki?Ki.prototype:void 0,Y_=K_?K_.toString:void 0;function Px(t){if(typeof t=="string")return t;if(fi(t))return Rx(t,Px)+"";if(hh(t))return Y_?Y_.call(t):"";var e=t+"";return e=="0"&&1/t==-h4?"-0":e}var p4=/\s/;function m4(t){for(var e=t.length;e--&&p4.test(t.charAt(e)););return e}var g4=/^\s+/;function v4(t){return t&&t.slice(0,m4(t)+1).replace(g4,"")}function hi(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var q_=NaN,y4=/^[-+]0x[0-9a-f]+$/i,b4=/^0b[01]+$/i,_4=/^0o[0-7]+$/i,S4=parseInt;function Z_(t){if(typeof t=="number")return t;if(hh(t))return q_;if(hi(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=hi(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=v4(t);var n=b4.test(t);return n||_4.test(t)?S4(t.slice(2),n?2:8):y4.test(t)?q_:+t}function Tv(t){return t}var w4="[object AsyncFunction]",C4="[object Function]",x4="[object GeneratorFunction]",T4="[object Proxy]";function Ev(t){if(!hi(t))return!1;var e=ua(t);return e==C4||e==x4||e==w4||e==T4}var Ip=br["__core-js_shared__"],J_=function(){var t=/[^.]+$/.exec(Ip&&Ip.keys&&Ip.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function E4(t){return!!J_&&J_ in t}var M4=Function.prototype,A4=M4.toString;function da(t){if(t!=null){try{return A4.call(t)}catch{}try{return t+""}catch{}}return""}var k4=/[\\^$.*+?()[\]{}|]/g,R4=/^\[object .+?Constructor\]$/,P4=Function.prototype,O4=Object.prototype,L4=P4.toString,I4=O4.hasOwnProperty,D4=RegExp("^"+L4.call(I4).replace(k4,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function N4(t){if(!hi(t)||E4(t))return!1;var e=Ev(t)?D4:R4;return e.test(da(t))}function F4(t,e){return t==null?void 0:t[e]}function fa(t,e){var n=F4(t,e);return N4(n)?n:void 0}var Om=fa(br,"WeakMap"),Q_=Object.create,B4=function(){function t(){}return function(e){if(!hi(e))return{};if(Q_)return Q_(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();function U4(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function V4(){}function Ox(t,e){var n=-1,i=t.length;for(e||(e=Array(i));++n<i;)e[n]=t[n];return e}var H4=800,z4=16,$4=Date.now;function W4(t){var e=0,n=0;return function(){var i=$4(),r=z4-(i-n);if(n=i,r>0){if(++e>=H4)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function G4(t){return function(){return t}}var Af=function(){try{var t=fa(Object,"defineProperty");return t({},"",{}),t}catch{}}(),j4=Af?function(t,e){return Af(t,"toString",{configurable:!0,enumerable:!1,value:G4(e),writable:!0})}:Tv;const X4=j4;var Lx=W4(X4);function K4(t,e){for(var n=-1,i=t==null?0:t.length;++n<i&&e(t[n],n,t)!==!1;);return t}function Y4(t,e,n,i){for(var r=t.length,a=n+(i?1:-1);i?a--:++a<r;)if(e(t[a],a,t))return a;return-1}function q4(t){return t!==t}function Z4(t,e,n){for(var i=n-1,r=t.length;++i<r;)if(t[i]===e)return i;return-1}function J4(t,e,n){return e===e?Z4(t,e,n):Y4(t,q4,n)}function Q4(t,e){var n=t==null?0:t.length;return!!n&&J4(t,e,0)>-1}var eU=9007199254740991,tU=/^(?:0|[1-9]\d*)$/;function ph(t,e){var n=typeof t;return e=e??eU,!!e&&(n=="number"||n!="symbol"&&tU.test(t))&&t>-1&&t%1==0&&t<e}function Mv(t,e,n){e=="__proto__"&&Af?Af(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function ku(t,e){return t===e||t!==t&&e!==e}var nU=Object.prototype,iU=nU.hasOwnProperty;function Av(t,e,n){var i=t[e];(!(iU.call(t,e)&&ku(i,n))||n===void 0&&!(e in t))&&Mv(t,e,n)}function Ru(t,e,n,i){var r=!n;n||(n={});for(var a=-1,d=e.length;++a<d;){var s=e[a],o=i?i(n[s],t[s],s,n,t):void 0;o===void 0&&(o=t[s]),r?Mv(n,s,o):Av(n,s,o)}return n}var eS=Math.max;function Ix(t,e,n){return e=eS(e===void 0?t.length-1:e,0),function(){for(var i=arguments,r=-1,a=eS(i.length-e,0),d=Array(a);++r<a;)d[r]=i[e+r];r=-1;for(var s=Array(e+1);++r<e;)s[r]=i[r];return s[e]=n(d),U4(t,this,s)}}function Dx(t,e){return Lx(Ix(t,e,Tv),t+"")}var rU=9007199254740991;function kv(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=rU}function Xl(t){return t!=null&&kv(t.length)&&!Ev(t)}function sU(t,e,n){if(!hi(n))return!1;var i=typeof e;return(i=="number"?Xl(n)&&ph(e,n.length):i=="string"&&e in n)?ku(n[e],t):!1}function oU(t){return Dx(function(e,n){var i=-1,r=n.length,a=r>1?n[r-1]:void 0,d=r>2?n[2]:void 0;for(a=t.length>3&&typeof a=="function"?(r--,a):void 0,d&&sU(n[0],n[1],d)&&(a=r<3?void 0:a,r=1),e=Object(e);++i<r;){var s=n[i];s&&t(e,s,i,a)}return e})}var aU=Object.prototype;function Rv(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||aU;return t===n}function lU(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}var cU="[object Arguments]";function tS(t){return Lr(t)&&ua(t)==cU}var Nx=Object.prototype,uU=Nx.hasOwnProperty,dU=Nx.propertyIsEnumerable,Qc=tS(function(){return arguments}())?tS:function(t){return Lr(t)&&uU.call(t,"callee")&&!dU.call(t,"callee")};function fU(){return!1}var Fx=typeof exports=="object"&&exports&&!exports.nodeType&&exports,nS=Fx&&typeof module=="object"&&module&&!module.nodeType&&module,hU=nS&&nS.exports===Fx,iS=hU?br.Buffer:void 0,pU=iS?iS.isBuffer:void 0,eu=pU||fU,mU="[object Arguments]",gU="[object Array]",vU="[object Boolean]",yU="[object Date]",bU="[object Error]",_U="[object Function]",SU="[object Map]",wU="[object Number]",CU="[object Object]",xU="[object RegExp]",TU="[object Set]",EU="[object String]",MU="[object WeakMap]",AU="[object ArrayBuffer]",kU="[object DataView]",RU="[object Float32Array]",PU="[object Float64Array]",OU="[object Int8Array]",LU="[object Int16Array]",IU="[object Int32Array]",DU="[object Uint8Array]",NU="[object Uint8ClampedArray]",FU="[object Uint16Array]",BU="[object Uint32Array]",gn={};gn[RU]=gn[PU]=gn[OU]=gn[LU]=gn[IU]=gn[DU]=gn[NU]=gn[FU]=gn[BU]=!0;gn[mU]=gn[gU]=gn[AU]=gn[vU]=gn[kU]=gn[yU]=gn[bU]=gn[_U]=gn[SU]=gn[wU]=gn[CU]=gn[xU]=gn[TU]=gn[EU]=gn[MU]=!1;function UU(t){return Lr(t)&&kv(t.length)&&!!gn[ua(t)]}function Pv(t){return function(e){return t(e)}}var Bx=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Oc=Bx&&typeof module=="object"&&module&&!module.nodeType&&module,VU=Oc&&Oc.exports===Bx,Dp=VU&&Ax.process,Tl=function(){try{var t=Oc&&Oc.require&&Oc.require("util").types;return t||Dp&&Dp.binding&&Dp.binding("util")}catch{}}(),rS=Tl&&Tl.isTypedArray,Ov=rS?Pv(rS):UU,HU=Object.prototype,zU=HU.hasOwnProperty;function Ux(t,e){var n=fi(t),i=!n&&Qc(t),r=!n&&!i&&eu(t),a=!n&&!i&&!r&&Ov(t),d=n||i||r||a,s=d?lU(t.length,String):[],o=s.length;for(var c in t)(e||zU.call(t,c))&&!(d&&(c=="length"||r&&(c=="offset"||c=="parent")||a&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||ph(c,o)))&&s.push(c);return s}function Vx(t,e){return function(n){return t(e(n))}}var $U=Vx(Object.keys,Object),WU=Object.prototype,GU=WU.hasOwnProperty;function jU(t){if(!Rv(t))return $U(t);var e=[];for(var n in Object(t))GU.call(t,n)&&n!="constructor"&&e.push(n);return e}function Pu(t){return Xl(t)?Ux(t):jU(t)}function XU(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var KU=Object.prototype,YU=KU.hasOwnProperty;function qU(t){if(!hi(t))return XU(t);var e=Rv(t),n=[];for(var i in t)i=="constructor"&&(e||!YU.call(t,i))||n.push(i);return n}function Ou(t){return Xl(t)?Ux(t,!0):qU(t)}var ZU=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,JU=/^\w*$/;function Lv(t,e){if(fi(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||hh(t)?!0:JU.test(t)||!ZU.test(t)||e!=null&&t in Object(e)}var tu=fa(Object,"create");function QU(){this.__data__=tu?tu(null):{},this.size=0}function eV(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var tV="__lodash_hash_undefined__",nV=Object.prototype,iV=nV.hasOwnProperty;function rV(t){var e=this.__data__;if(tu){var n=e[t];return n===tV?void 0:n}return iV.call(e,t)?e[t]:void 0}var sV=Object.prototype,oV=sV.hasOwnProperty;function aV(t){var e=this.__data__;return tu?e[t]!==void 0:oV.call(e,t)}var lV="__lodash_hash_undefined__";function cV(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=tu&&e===void 0?lV:e,this}function ia(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}ia.prototype.clear=QU;ia.prototype.delete=eV;ia.prototype.get=rV;ia.prototype.has=aV;ia.prototype.set=cV;function uV(){this.__data__=[],this.size=0}function mh(t,e){for(var n=t.length;n--;)if(ku(t[n][0],e))return n;return-1}var dV=Array.prototype,fV=dV.splice;function hV(t){var e=this.__data__,n=mh(e,t);if(n<0)return!1;var i=e.length-1;return n==i?e.pop():fV.call(e,n,1),--this.size,!0}function pV(t){var e=this.__data__,n=mh(e,t);return n<0?void 0:e[n][1]}function mV(t){return mh(this.__data__,t)>-1}function gV(t,e){var n=this.__data__,i=mh(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}function Ss(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}Ss.prototype.clear=uV;Ss.prototype.delete=hV;Ss.prototype.get=pV;Ss.prototype.has=mV;Ss.prototype.set=gV;var nu=fa(br,"Map");function vV(){this.size=0,this.__data__={hash:new ia,map:new(nu||Ss),string:new ia}}function yV(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function gh(t,e){var n=t.__data__;return yV(e)?n[typeof e=="string"?"string":"hash"]:n.map}function bV(t){var e=gh(this,t).delete(t);return this.size-=e?1:0,e}function _V(t){return gh(this,t).get(t)}function SV(t){return gh(this,t).has(t)}function wV(t,e){var n=gh(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}function ws(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}ws.prototype.clear=vV;ws.prototype.delete=bV;ws.prototype.get=_V;ws.prototype.has=SV;ws.prototype.set=wV;var CV="Expected a function";function vh(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(CV);var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],a=n.cache;if(a.has(r))return a.get(r);var d=t.apply(this,i);return n.cache=a.set(r,d)||a,d};return n.cache=new(vh.Cache||ws),n}vh.Cache=ws;var xV=500;function TV(t){var e=vh(t,function(i){return n.size===xV&&n.clear(),i}),n=e.cache;return e}var EV=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,MV=/\\(\\)?/g,AV=TV(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(EV,function(n,i,r,a){e.push(r?a.replace(MV,"$1"):i||n)}),e});function kV(t){return t==null?"":Px(t)}function yh(t,e){return fi(t)?t:Lv(t,e)?[t]:AV(kV(t))}var RV=1/0;function Lu(t){if(typeof t=="string"||hh(t))return t;var e=t+"";return e=="0"&&1/t==-RV?"-0":e}function Iv(t,e){e=yh(e,t);for(var n=0,i=e.length;t!=null&&n<i;)t=t[Lu(e[n++])];return n&&n==i?t:void 0}function on(t,e,n){var i=t==null?void 0:Iv(t,e);return i===void 0?n:i}function Dv(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}var sS=Ki?Ki.isConcatSpreadable:void 0;function PV(t){return fi(t)||Qc(t)||!!(sS&&t&&t[sS])}function Iu(t,e,n,i,r){var a=-1,d=t.length;for(n||(n=PV),r||(r=[]);++a<d;){var s=t[a];e>0&&n(s)?e>1?Iu(s,e-1,n,i,r):Dv(r,s):i||(r[r.length]=s)}return r}function Hx(t){var e=t==null?0:t.length;return e?Iu(t,1):[]}function OV(t){return Lx(Ix(t,void 0,Hx),t+"")}var LV=Vx(Object.getPrototypeOf,Object);const Nv=LV;var IV="[object Object]",DV=Function.prototype,NV=Object.prototype,zx=DV.toString,FV=NV.hasOwnProperty,BV=zx.call(Object);function UV(t){if(!Lr(t)||ua(t)!=IV)return!1;var e=Nv(t);if(e===null)return!0;var n=FV.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&zx.call(n)==BV}function El(){if(!arguments.length)return[];var t=arguments[0];return fi(t)?t:[t]}function VV(){this.__data__=new Ss,this.size=0}function HV(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function zV(t){return this.__data__.get(t)}function $V(t){return this.__data__.has(t)}var WV=200;function GV(t,e){var n=this.__data__;if(n instanceof Ss){var i=n.__data__;if(!nu||i.length<WV-1)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new ws(i)}return n.set(t,e),this.size=n.size,this}function gr(t){var e=this.__data__=new Ss(t);this.size=e.size}gr.prototype.clear=VV;gr.prototype.delete=HV;gr.prototype.get=zV;gr.prototype.has=$V;gr.prototype.set=GV;function jV(t,e){return t&&Ru(e,Pu(e),t)}function XV(t,e){return t&&Ru(e,Ou(e),t)}var $x=typeof exports=="object"&&exports&&!exports.nodeType&&exports,oS=$x&&typeof module=="object"&&module&&!module.nodeType&&module,KV=oS&&oS.exports===$x,aS=KV?br.Buffer:void 0,lS=aS?aS.allocUnsafe:void 0;function Wx(t,e){if(e)return t.slice();var n=t.length,i=lS?lS(n):new t.constructor(n);return t.copy(i),i}function YV(t,e){for(var n=-1,i=t==null?0:t.length,r=0,a=[];++n<i;){var d=t[n];e(d,n,t)&&(a[r++]=d)}return a}function Gx(){return[]}var qV=Object.prototype,ZV=qV.propertyIsEnumerable,cS=Object.getOwnPropertySymbols,Fv=cS?function(t){return t==null?[]:(t=Object(t),YV(cS(t),function(e){return ZV.call(t,e)}))}:Gx;function JV(t,e){return Ru(t,Fv(t),e)}var QV=Object.getOwnPropertySymbols,jx=QV?function(t){for(var e=[];t;)Dv(e,Fv(t)),t=Nv(t);return e}:Gx;function eH(t,e){return Ru(t,jx(t),e)}function Xx(t,e,n){var i=e(t);return fi(t)?i:Dv(i,n(t))}function Lm(t){return Xx(t,Pu,Fv)}function tH(t){return Xx(t,Ou,jx)}var Im=fa(br,"DataView"),Dm=fa(br,"Promise"),il=fa(br,"Set"),uS="[object Map]",nH="[object Object]",dS="[object Promise]",fS="[object Set]",hS="[object WeakMap]",pS="[object DataView]",iH=da(Im),rH=da(nu),sH=da(Dm),oH=da(il),aH=da(Om),Mo=ua;(Im&&Mo(new Im(new ArrayBuffer(1)))!=pS||nu&&Mo(new nu)!=uS||Dm&&Mo(Dm.resolve())!=dS||il&&Mo(new il)!=fS||Om&&Mo(new Om)!=hS)&&(Mo=function(t){var e=ua(t),n=e==nH?t.constructor:void 0,i=n?da(n):"";if(i)switch(i){case iH:return pS;case rH:return uS;case sH:return dS;case oH:return fS;case aH:return hS}return e});const iu=Mo;var lH=Object.prototype,cH=lH.hasOwnProperty;function uH(t){var e=t.length,n=new t.constructor(e);return e&&typeof t[0]=="string"&&cH.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var kf=br.Uint8Array;function Bv(t){var e=new t.constructor(t.byteLength);return new kf(e).set(new kf(t)),e}function dH(t,e){var n=e?Bv(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}var fH=/\w*$/;function hH(t){var e=new t.constructor(t.source,fH.exec(t));return e.lastIndex=t.lastIndex,e}var mS=Ki?Ki.prototype:void 0,gS=mS?mS.valueOf:void 0;function pH(t){return gS?Object(gS.call(t)):{}}function Kx(t,e){var n=e?Bv(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var mH="[object Boolean]",gH="[object Date]",vH="[object Map]",yH="[object Number]",bH="[object RegExp]",_H="[object Set]",SH="[object String]",wH="[object Symbol]",CH="[object ArrayBuffer]",xH="[object DataView]",TH="[object Float32Array]",EH="[object Float64Array]",MH="[object Int8Array]",AH="[object Int16Array]",kH="[object Int32Array]",RH="[object Uint8Array]",PH="[object Uint8ClampedArray]",OH="[object Uint16Array]",LH="[object Uint32Array]";function IH(t,e,n){var i=t.constructor;switch(e){case CH:return Bv(t);case mH:case gH:return new i(+t);case xH:return dH(t,n);case TH:case EH:case MH:case AH:case kH:case RH:case PH:case OH:case LH:return Kx(t,n);case vH:return new i;case yH:case SH:return new i(t);case bH:return hH(t);case _H:return new i;case wH:return pH(t)}}function Yx(t){return typeof t.constructor=="function"&&!Rv(t)?B4(Nv(t)):{}}var DH="[object Map]";function NH(t){return Lr(t)&&iu(t)==DH}var vS=Tl&&Tl.isMap,FH=vS?Pv(vS):NH,BH="[object Set]";function UH(t){return Lr(t)&&iu(t)==BH}var yS=Tl&&Tl.isSet,VH=yS?Pv(yS):UH,HH=1,zH=2,$H=4,qx="[object Arguments]",WH="[object Array]",GH="[object Boolean]",jH="[object Date]",XH="[object Error]",Zx="[object Function]",KH="[object GeneratorFunction]",YH="[object Map]",qH="[object Number]",Jx="[object Object]",ZH="[object RegExp]",JH="[object Set]",QH="[object String]",ez="[object Symbol]",tz="[object WeakMap]",nz="[object ArrayBuffer]",iz="[object DataView]",rz="[object Float32Array]",sz="[object Float64Array]",oz="[object Int8Array]",az="[object Int16Array]",lz="[object Int32Array]",cz="[object Uint8Array]",uz="[object Uint8ClampedArray]",dz="[object Uint16Array]",fz="[object Uint32Array]",hn={};hn[qx]=hn[WH]=hn[nz]=hn[iz]=hn[GH]=hn[jH]=hn[rz]=hn[sz]=hn[oz]=hn[az]=hn[lz]=hn[YH]=hn[qH]=hn[Jx]=hn[ZH]=hn[JH]=hn[QH]=hn[ez]=hn[cz]=hn[uz]=hn[dz]=hn[fz]=!0;hn[XH]=hn[Zx]=hn[tz]=!1;function Lc(t,e,n,i,r,a){var d,s=e&HH,o=e&zH,c=e&$H;if(n&&(d=r?n(t,i,r,a):n(t)),d!==void 0)return d;if(!hi(t))return t;var h=fi(t);if(h){if(d=uH(t),!s)return Ox(t,d)}else{var l=iu(t),u=l==Zx||l==KH;if(eu(t))return Wx(t,s);if(l==Jx||l==qx||u&&!r){if(d=o||u?{}:Yx(t),!s)return o?eH(t,XV(d,t)):JV(t,jV(d,t))}else{if(!hn[l])return r?t:{};d=IH(t,l,s)}}a||(a=new gr);var f=a.get(t);if(f)return f;a.set(t,d),VH(t)?t.forEach(function(p){d.add(Lc(p,e,n,p,t,a))}):FH(t)&&t.forEach(function(p,v){d.set(v,Lc(p,e,n,v,t,a))});var m=c?o?tH:Lm:o?Ou:Pu,g=h?void 0:m(t);return K4(g||t,function(p,v){g&&(v=p,p=t[v]),Av(d,v,Lc(p,e,n,v,t,a))}),d}var hz=4;function bS(t){return Lc(t,hz)}var pz=1,mz=4;function Rf(t){return Lc(t,pz|mz)}var gz="__lodash_hash_undefined__";function vz(t){return this.__data__.set(t,gz),this}function yz(t){return this.__data__.has(t)}function ru(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new ws;++e<n;)this.add(t[e])}ru.prototype.add=ru.prototype.push=vz;ru.prototype.has=yz;function bz(t,e){for(var n=-1,i=t==null?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}function Qx(t,e){return t.has(e)}var _z=1,Sz=2;function eT(t,e,n,i,r,a){var d=n&_z,s=t.length,o=e.length;if(s!=o&&!(d&&o>s))return!1;var c=a.get(t),h=a.get(e);if(c&&h)return c==e&&h==t;var l=-1,u=!0,f=n&Sz?new ru:void 0;for(a.set(t,e),a.set(e,t);++l<s;){var m=t[l],g=e[l];if(i)var p=d?i(g,m,l,e,t,a):i(m,g,l,t,e,a);if(p!==void 0){if(p)continue;u=!1;break}if(f){if(!bz(e,function(v,b){if(!Qx(f,b)&&(m===v||r(m,v,n,i,a)))return f.push(b)})){u=!1;break}}else if(!(m===g||r(m,g,n,i,a))){u=!1;break}}return a.delete(t),a.delete(e),u}function wz(t){var e=-1,n=Array(t.size);return t.forEach(function(i,r){n[++e]=[r,i]}),n}function Uv(t){var e=-1,n=Array(t.size);return t.forEach(function(i){n[++e]=i}),n}var Cz=1,xz=2,Tz="[object Boolean]",Ez="[object Date]",Mz="[object Error]",Az="[object Map]",kz="[object Number]",Rz="[object RegExp]",Pz="[object Set]",Oz="[object String]",Lz="[object Symbol]",Iz="[object ArrayBuffer]",Dz="[object DataView]",_S=Ki?Ki.prototype:void 0,Np=_S?_S.valueOf:void 0;function Nz(t,e,n,i,r,a,d){switch(n){case Dz:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Iz:return!(t.byteLength!=e.byteLength||!a(new kf(t),new kf(e)));case Tz:case Ez:case kz:return ku(+t,+e);case Mz:return t.name==e.name&&t.message==e.message;case Rz:case Oz:return t==e+"";case Az:var s=wz;case Pz:var o=i&Cz;if(s||(s=Uv),t.size!=e.size&&!o)return!1;var c=d.get(t);if(c)return c==e;i|=xz,d.set(t,e);var h=eT(s(t),s(e),i,r,a,d);return d.delete(t),h;case Lz:if(Np)return Np.call(t)==Np.call(e)}return!1}var Fz=1,Bz=Object.prototype,Uz=Bz.hasOwnProperty;function Vz(t,e,n,i,r,a){var d=n&Fz,s=Lm(t),o=s.length,c=Lm(e),h=c.length;if(o!=h&&!d)return!1;for(var l=o;l--;){var u=s[l];if(!(d?u in e:Uz.call(e,u)))return!1}var f=a.get(t),m=a.get(e);if(f&&m)return f==e&&m==t;var g=!0;a.set(t,e),a.set(e,t);for(var p=d;++l<o;){u=s[l];var v=t[u],b=e[u];if(i)var _=d?i(b,v,u,e,t,a):i(v,b,u,t,e,a);if(!(_===void 0?v===b||r(v,b,n,i,a):_)){g=!1;break}p||(p=u=="constructor")}if(g&&!p){var S=t.constructor,w=e.constructor;S!=w&&"constructor"in t&&"constructor"in e&&!(typeof S=="function"&&S instanceof S&&typeof w=="function"&&w instanceof w)&&(g=!1)}return a.delete(t),a.delete(e),g}var Hz=1,SS="[object Arguments]",wS="[object Array]",Cd="[object Object]",zz=Object.prototype,CS=zz.hasOwnProperty;function $z(t,e,n,i,r,a){var d=fi(t),s=fi(e),o=d?wS:iu(t),c=s?wS:iu(e);o=o==SS?Cd:o,c=c==SS?Cd:c;var h=o==Cd,l=c==Cd,u=o==c;if(u&&eu(t)){if(!eu(e))return!1;d=!0,h=!1}if(u&&!h)return a||(a=new gr),d||Ov(t)?eT(t,e,n,i,r,a):Nz(t,e,o,n,i,r,a);if(!(n&Hz)){var f=h&&CS.call(t,"__wrapped__"),m=l&&CS.call(e,"__wrapped__");if(f||m){var g=f?t.value():t,p=m?e.value():e;return a||(a=new gr),r(g,p,n,i,a)}}return u?(a||(a=new gr),Vz(t,e,n,i,r,a)):!1}function bh(t,e,n,i,r){return t===e?!0:t==null||e==null||!Lr(t)&&!Lr(e)?t!==t&&e!==e:$z(t,e,n,i,bh,r)}var Wz=1,Gz=2;function jz(t,e,n,i){var r=n.length,a=r,d=!i;if(t==null)return!a;for(t=Object(t);r--;){var s=n[r];if(d&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++r<a;){s=n[r];var o=s[0],c=t[o],h=s[1];if(d&&s[2]){if(c===void 0&&!(o in t))return!1}else{var l=new gr;if(i)var u=i(c,h,o,t,e,l);if(!(u===void 0?bh(h,c,Wz|Gz,i,l):u))return!1}}return!0}function tT(t){return t===t&&!hi(t)}function Xz(t){for(var e=Pu(t),n=e.length;n--;){var i=e[n],r=t[i];e[n]=[i,r,tT(r)]}return e}function nT(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}function Kz(t){var e=Xz(t);return e.length==1&&e[0][2]?nT(e[0][0],e[0][1]):function(n){return n===t||jz(n,t,e)}}function Yz(t,e){return t!=null&&e in Object(t)}function qz(t,e,n){e=yh(e,t);for(var i=-1,r=e.length,a=!1;++i<r;){var d=Lu(e[i]);if(!(a=t!=null&&n(t,d)))break;t=t[d]}return a||++i!=r?a:(r=t==null?0:t.length,!!r&&kv(r)&&ph(d,r)&&(fi(t)||Qc(t)))}function iT(t,e){return t!=null&&qz(t,e,Yz)}var Zz=1,Jz=2;function Qz(t,e){return Lv(t)&&tT(e)?nT(Lu(t),e):function(n){var i=on(n,t);return i===void 0&&i===e?iT(n,t):bh(e,i,Zz|Jz)}}function e$(t){return function(e){return e==null?void 0:e[t]}}function t$(t){return function(e){return Iv(e,t)}}function n$(t){return Lv(t)?e$(Lu(t)):t$(t)}function i$(t){return typeof t=="function"?t:t==null?Tv:typeof t=="object"?fi(t)?Qz(t[0],t[1]):Kz(t):n$(t)}function r$(t){return function(e,n,i){for(var r=-1,a=Object(e),d=i(e),s=d.length;s--;){var o=d[t?s:++r];if(n(a[o],o,a)===!1)break}return e}}var rT=r$();function s$(t,e){return t&&rT(t,e,Pu)}function o$(t,e){return function(n,i){if(n==null)return n;if(!Xl(n))return t(n,i);for(var r=n.length,a=e?r:-1,d=Object(n);(e?a--:++a<r)&&i(d[a],a,d)!==!1;);return n}}var a$=o$(s$),Fp=function(){return br.Date.now()},l$="Expected a function",c$=Math.max,u$=Math.min;function pi(t,e,n){var i,r,a,d,s,o,c=0,h=!1,l=!1,u=!0;if(typeof t!="function")throw new TypeError(l$);e=Z_(e)||0,hi(n)&&(h=!!n.leading,l="maxWait"in n,a=l?c$(Z_(n.maxWait)||0,e):a,u="trailing"in n?!!n.trailing:u);function f(C){var x=i,M=r;return i=r=void 0,c=C,d=t.apply(M,x),d}function m(C){return c=C,s=setTimeout(v,e),h?f(C):d}function g(C){var x=C-o,M=C-c,E=e-x;return l?u$(E,a-M):E}function p(C){var x=C-o,M=C-c;return o===void 0||x>=e||x<0||l&&M>=a}function v(){var C=Fp();if(p(C))return b(C);s=setTimeout(v,g(C))}function b(C){return s=void 0,u&&i?f(C):(i=r=void 0,d)}function _(){s!==void 0&&clearTimeout(s),c=0,i=o=r=s=void 0}function S(){return s===void 0?d:b(Fp())}function w(){var C=Fp(),x=p(C);if(i=arguments,r=this,o=C,x){if(s===void 0)return m(o);if(l)return clearTimeout(s),s=setTimeout(v,e),f(o)}return s===void 0&&(s=setTimeout(v,e)),d}return w.cancel=_,w.flush=S,w}function Nm(t,e,n){(n!==void 0&&!ku(t[e],n)||n===void 0&&!(e in t))&&Mv(t,e,n)}function sT(t){return Lr(t)&&Xl(t)}function Fm(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}function d$(t){return Ru(t,Ou(t))}function f$(t,e,n,i,r,a,d){var s=Fm(t,n),o=Fm(e,n),c=d.get(o);if(c){Nm(t,n,c);return}var h=a?a(s,o,n+"",t,e,d):void 0,l=h===void 0;if(l){var u=fi(o),f=!u&&eu(o),m=!u&&!f&&Ov(o);h=o,u||f||m?fi(s)?h=s:sT(s)?h=Ox(s):f?(l=!1,h=Wx(o,!0)):m?(l=!1,h=Kx(o,!0)):h=[]:UV(o)||Qc(o)?(h=s,Qc(s)?h=d$(s):(!hi(s)||Ev(s))&&(h=Yx(o))):l=!1}l&&(d.set(o,h),r(h,o,i,a,d),d.delete(o)),Nm(t,n,h)}function oT(t,e,n,i,r){t!==e&&rT(e,function(a,d){if(r||(r=new gr),hi(a))f$(t,e,d,n,oT,i,r);else{var s=i?i(Fm(t,d),a,d+"",t,e,r):void 0;s===void 0&&(s=a),Nm(t,d,s)}},Ou)}function h$(t,e,n){for(var i=-1,r=t==null?0:t.length;++i<r;)if(n(e,t[i]))return!0;return!1}function p$(t,e){var n=-1,i=Xl(t)?Array(t.length):[];return a$(t,function(r,a,d){i[++n]=e(r,a,d)}),i}function m$(t,e){var n=fi(t)?Rx:p$;return n(t,i$(e))}function g$(t,e){return Iu(m$(t,e),1)}var v$=1/0;function y$(t){var e=t==null?0:t.length;return e?Iu(t,v$):[]}function Pf(t){for(var e=-1,n=t==null?0:t.length,i={};++e<n;){var r=t[e];i[r[0]]=r[1]}return i}function wi(t,e){return bh(t,e)}function Cn(t){return t==null}function b$(t){return t===void 0}var _$=oU(function(t,e,n){oT(t,e,n)});const aT=_$;function lT(t,e,n,i){if(!hi(t))return t;e=yh(e,t);for(var r=-1,a=e.length,d=a-1,s=t;s!=null&&++r<a;){var o=Lu(e[r]),c=n;if(o==="__proto__"||o==="constructor"||o==="prototype")return t;if(r!=d){var h=s[o];c=i?i(h,o,s):void 0,c===void 0&&(c=hi(h)?h:ph(e[r+1])?[]:{})}Av(s,o,c),s=s[o]}return t}function S$(t,e,n){for(var i=-1,r=e.length,a={};++i<r;){var d=e[i],s=Iv(t,d);n(s,d)&&lT(a,yh(d,t),s)}return a}function w$(t,e){return S$(t,e,function(n,i){return iT(t,i)})}var rs=OV(function(t,e){return t==null?{}:w$(t,e)});function C$(t,e,n){return t==null?t:lT(t,e,n)}var x$="Expected a function";function Xo(t,e,n){var i=!0,r=!0;if(typeof t!="function")throw new TypeError(x$);return hi(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),pi(t,e,{leading:i,maxWait:e,trailing:r})}var T$=1/0,E$=il&&1/Uv(new il([,-0]))[1]==T$?function(t){return new il(t)}:V4,M$=200;function A$(t,e,n){var i=-1,r=Q4,a=t.length,d=!0,s=[],o=s;if(n)d=!1,r=h$;else if(a>=M$){var c=e?null:E$(t);if(c)return Uv(c);d=!1,r=Qx,o=new ru}else o=e?[]:s;e:for(;++i<a;){var h=t[i],l=e?e(h):h;if(h=n||h!==0?h:0,d&&l===l){for(var u=o.length;u--;)if(o[u]===l)continue e;e&&o.push(l),s.push(h)}else r(o,l,n)||(o!==s&&o.push(l),s.push(h))}return s}var Bp=Dx(function(t){return A$(Iu(t,1,sT,!0))});const Un=t=>t===void 0,xn=t=>typeof t=="boolean",at=t=>typeof t=="number",$i=t=>!t&&t!==0||Ze(t)&&t.length===0||_t(t)&&!Object.keys(t).length,Yi=t=>typeof Element>"u"?!1:t instanceof Element,k$=t=>Cn(t),R$=t=>ct(t)?!Number.isNaN(Number(t)):!1,cT=(t="")=>t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d"),Mr=t=>xu(t),su=t=>Object.keys(t),P$=t=>Object.entries(t),Yd=(t,e,n)=>({get value(){return on(t,e,n)},set value(i){C$(t,e,i)}});class O$ extends Error{constructor(e){super(e),this.name="ElementPlusError"}}function Tn(t,e){throw new O$(`[${t}] ${e}`)}const uT=(t="")=>t.split(" ").filter(e=>!!e.trim()),vr=(t,e)=>{if(!t||!e)return!1;if(e.includes(" "))throw new Error("className should not contain space.");return t.classList.contains(e)},Ar=(t,e)=>{!t||!e.trim()||t.classList.add(...uT(e))},Ci=(t,e)=>{!t||!e.trim()||t.classList.remove(...uT(e))},ts=(t,e)=>{var n;if(!kt||!t||!e)return"";let i=Xi(e);i==="float"&&(i="cssFloat");try{const r=t.style[i];if(r)return r;const a=(n=document.defaultView)==null?void 0:n.getComputedStyle(t,"");return a?a[i]:""}catch{return t.style[i]}};function bn(t,e="px"){if(!t)return"";if(at(t)||R$(t))return`${t}${e}`;if(ct(t))return t}const L$=(t,e)=>{if(!kt)return!1;const n={undefined:"overflow",true:"overflow-y",false:"overflow-x"}[String(e)],i=ts(t,n);return["scroll","auto","overlay"].some(r=>i.includes(r))},Vv=(t,e)=>{if(!kt)return;let n=t;for(;n;){if([window,document,document.documentElement].includes(n))return window;if(L$(n,e))return n;n=n.parentNode}return n};let xd;const dT=t=>{var e;if(!kt)return 0;if(xd!==void 0)return xd;const n=document.createElement("div");n.className=`${t}-scrollbar__wrap`,n.style.visibility="hidden",n.style.width="100px",n.style.position="absolute",n.style.top="-9999px",document.body.appendChild(n);const i=n.offsetWidth;n.style.overflow="scroll";const r=document.createElement("div");r.style.width="100%",n.appendChild(r);const a=r.offsetWidth;return(e=n.parentNode)==null||e.removeChild(n),xd=i-a,xd};function fT(t,e){if(!kt)return;if(!e){t.scrollTop=0;return}const n=[];let i=e.offsetParent;for(;i!==null&&t!==i&&t.contains(i);)n.push(i),i=i.offsetParent;const r=e.offsetTop+n.reduce((o,c)=>o+c.offsetTop,0),a=r+e.offsetHeight,d=t.scrollTop,s=d+t.clientHeight;r<d?t.scrollTop=r:a>s&&(t.scrollTop=a-t.clientHeight)}/*! Element Plus Icons Vue v2.3.1 */var I$=de({name:"ArrowDown",__name:"arrow-down",setup(t){return(e,n)=>(I(),ne("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M831.872 340.864 512 652.672 192.128 340.864a30.592 30.592 0 0 0-42.752 0 29.12 29.12 0 0 0 0 41.6L489.664 714.24a32 32 0 0 0 44.672 0l340.288-331.712a29.12 29.12 0 0 0 0-41.728 30.592 30.592 0 0 0-42.752 0z"})]))}}),ao=I$,D$=de({name:"ArrowLeft",__name:"arrow-left",setup(t){return(e,n)=>(I(),ne("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M609.408 149.376 277.76 489.6a32 32 0 0 0 0 44.672l331.648 340.352a29.12 29.12 0 0 0 41.728 0 30.592 30.592 0 0 0 0-42.752L339.264 511.936l311.872-319.872a30.592 30.592 0 0 0 0-42.688 29.12 29.12 0 0 0-41.728 0z"})]))}}),eo=D$,N$=de({name:"ArrowRight",__name:"arrow-right",setup(t){return(e,n)=>(I(),ne("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M340.864 149.312a30.592 30.592 0 0 0 0 42.752L652.736 512 340.864 831.872a30.592 30.592 0 0 0 0 42.752 29.12 29.12 0 0 0 41.728 0L714.24 534.336a32 32 0 0 0 0-44.672L382.592 149.376a29.12 29.12 0 0 0-41.728 0z"})]))}}),ui=N$,F$=de({name:"ArrowUp",__name:"arrow-up",setup(t){return(e,n)=>(I(),ne("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"m488.832 344.32-339.84 356.672a32 32 0 0 0 0 44.16l.384.384a29.44 29.44 0 0 0 42.688 0l320-335.872 319.872 335.872a29.44 29.44 0 0 0 42.688 0l.384-.384a32 32 0 0 0 0-44.16L535.168 344.32a32 32 0 0 0-46.336 0"})]))}}),_h=F$,B$=de({name:"Back",__name:"back",setup(t){return(e,n)=>(I(),ne("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M224 480h640a32 32 0 1 1 0 64H224a32 32 0 0 1 0-64"}),ae("path",{fill:"currentColor",d:"m237.248 512 265.408 265.344a32 32 0 0 1-45.312 45.312l-288-288a32 32 0 0 1 0-45.312l288-288a32 32 0 1 1 45.312 45.312z"})]))}}),U$=B$,V$=de({name:"Calendar",__name:"calendar",setup(t){return(e,n)=>(I(),ne("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M128 384v512h768V192H768v32a32 32 0 1 1-64 0v-32H320v32a32 32 0 0 1-64 0v-32H128v128h768v64zm192-256h384V96a32 32 0 1 1 64 0v32h160a32 32 0 0 1 32 32v768a32 32 0 0 1-32 32H96a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h160V96a32 32 0 0 1 64 0zm-32 384h64a32 32 0 0 1 0 64h-64a32 32 0 0 1 0-64m0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64m192-192h64a32 32 0 0 1 0 64h-64a32 32 0 0 1 0-64m0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64m192-192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64m0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64"})]))}}),H$=V$,z$=de({name:"CaretRight",__name:"caret-right",setup(t){return(e,n)=>(I(),ne("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M384 192v640l384-320.064z"})]))}}),hT=z$,$$=de({name:"CaretTop",__name:"caret-top",setup(t){return(e,n)=>(I(),ne("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M512 320 192 704h639.936z"})]))}}),W$=$$,G$=de({name:"Check",__name:"check",setup(t){return(e,n)=>(I(),ne("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M406.656 706.944 195.84 496.256a32 32 0 1 0-45.248 45.248l256 256 512-512a32 32 0 0 0-45.248-45.248L406.592 706.944z"})]))}}),Du=G$,j$=de({name:"CircleCheckFilled",__name:"circle-check-filled",setup(t){return(e,n)=>(I(),ne("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m-55.808 536.384-99.52-99.584a38.4 38.4 0 1 0-54.336 54.336l126.72 126.72a38.272 38.272 0 0 0 54.336 0l262.4-262.464a38.4 38.4 0 1 0-54.272-54.336z"})]))}}),X$=j$,K$=de({name:"CircleCheck",__name:"circle-check",setup(t){return(e,n)=>(I(),ne("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"}),ae("path",{fill:"currentColor",d:"M745.344 361.344a32 32 0 0 1 45.312 45.312l-288 288a32 32 0 0 1-45.312 0l-160-160a32 32 0 1 1 45.312-45.312L480 626.752l265.344-265.408z"})]))}}),Hv=K$,Y$=de({name:"CircleCloseFilled",__name:"circle-close-filled",setup(t){return(e,n)=>(I(),ne("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m0 393.664L407.936 353.6a38.4 38.4 0 1 0-54.336 54.336L457.664 512 353.6 616.064a38.4 38.4 0 1 0 54.336 54.336L512 566.336 616.064 670.4a38.4 38.4 0 1 0 54.336-54.336L566.336 512 670.4 407.936a38.4 38.4 0 1 0-54.336-54.336z"})]))}}),zv=Y$,q$=de({name:"CircleClose",__name:"circle-close",setup(t){return(e,n)=>(I(),ne("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"m466.752 512-90.496-90.496a32 32 0 0 1 45.248-45.248L512 466.752l90.496-90.496a32 32 0 1 1 45.248 45.248L557.248 512l90.496 90.496a32 32 0 1 1-45.248 45.248L512 557.248l-90.496 90.496a32 32 0 0 1-45.248-45.248z"}),ae("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"})]))}}),lo=q$,Z$=de({name:"Clock",__name:"clock",setup(t){return(e,n)=>(I(),ne("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"}),ae("path",{fill:"currentColor",d:"M480 256a32 32 0 0 1 32 32v256a32 32 0 0 1-64 0V288a32 32 0 0 1 32-32"}),ae("path",{fill:"currentColor",d:"M480 512h256q32 0 32 32t-32 32H480q-32 0-32-32t32-32"})]))}}),pT=Z$,J$=de({name:"Close",__name:"close",setup(t){return(e,n)=>(I(),ne("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M764.288 214.592 512 466.88 259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512 214.528 764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z"})]))}}),yr=J$,Q$=de({name:"DArrowLeft",__name:"d-arrow-left",setup(t){return(e,n)=>(I(),ne("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M529.408 149.376a29.12 29.12 0 0 1 41.728 0 30.592 30.592 0 0 1 0 42.688L259.264 511.936l311.872 319.936a30.592 30.592 0 0 1-.512 43.264 29.12 29.12 0 0 1-41.216-.512L197.76 534.272a32 32 0 0 1 0-44.672l331.648-340.224zm256 0a29.12 29.12 0 0 1 41.728 0 30.592 30.592 0 0 1 0 42.688L515.264 511.936l311.872 319.936a30.592 30.592 0 0 1-.512 43.264 29.12 29.12 0 0 1-41.216-.512L453.76 534.272a32 32 0 0 1 0-44.672l331.648-340.224z"})]))}}),Ml=Q$,e5=de({name:"DArrowRight",__name:"d-arrow-right",setup(t){return(e,n)=>(I(),ne("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M452.864 149.312a29.12 29.12 0 0 1 41.728.064L826.24 489.664a32 32 0 0 1 0 44.672L494.592 874.624a29.12 29.12 0 0 1-41.728 0 30.592 30.592 0 0 1 0-42.752L764.736 512 452.864 192a30.592 30.592 0 0 1 0-42.688m-256 0a29.12 29.12 0 0 1 41.728.064L570.24 489.664a32 32 0 0 1 0 44.672L238.592 874.624a29.12 29.12 0 0 1-41.728 0 30.592 30.592 0 0 1 0-42.752L508.736 512 196.864 192a30.592 30.592 0 0 1 0-42.688z"})]))}}),Al=e5,t5=de({name:"Delete",__name:"delete",setup(t){return(e,n)=>(I(),ne("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M160 256H96a32 32 0 0 1 0-64h256V95.936a32 32 0 0 1 32-32h256a32 32 0 0 1 32 32V192h256a32 32 0 1 1 0 64h-64v672a32 32 0 0 1-32 32H192a32 32 0 0 1-32-32zm448-64v-64H416v64zM224 896h576V256H224zm192-128a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32m192 0a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32"})]))}}),n5=t5,i5=de({name:"Document",__name:"document",setup(t){return(e,n)=>(I(),ne("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M832 384H576V128H192v768h640zm-26.496-64L640 154.496V320zM160 64h480l256 256v608a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V96a32 32 0 0 1 32-32m160 448h384v64H320zm0-192h160v64H320zm0 384h384v64H320z"})]))}}),r5=i5,s5=de({name:"FullScreen",__name:"full-screen",setup(t){return(e,n)=>(I(),ne("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"m160 96.064 192 .192a32 32 0 0 1 0 64l-192-.192V352a32 32 0 0 1-64 0V96h64zm0 831.872V928H96V672a32 32 0 1 1 64 0v191.936l192-.192a32 32 0 1 1 0 64zM864 96.064V96h64v256a32 32 0 1 1-64 0V160.064l-192 .192a32 32 0 1 1 0-64l192-.192zm0 831.872-192-.192a32 32 0 0 1 0-64l192 .192V672a32 32 0 1 1 64 0v256h-64z"})]))}}),o5=s5,a5=de({name:"Hide",__name:"hide",setup(t){return(e,n)=>(I(),ne("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M876.8 156.8c0-9.6-3.2-16-9.6-22.4-6.4-6.4-12.8-9.6-22.4-9.6-9.6 0-16 3.2-22.4 9.6L736 220.8c-64-32-137.6-51.2-224-60.8-160 16-288 73.6-377.6 176C44.8 438.4 0 496 0 512s48 73.6 134.4 176c22.4 25.6 44.8 48 73.6 67.2l-86.4 89.6c-6.4 6.4-9.6 12.8-9.6 22.4 0 9.6 3.2 16 9.6 22.4 6.4 6.4 12.8 9.6 22.4 9.6 9.6 0 16-3.2 22.4-9.6l704-710.4c3.2-6.4 6.4-12.8 6.4-22.4Zm-646.4 528c-76.8-70.4-128-128-153.6-172.8 28.8-48 80-105.6 153.6-172.8C304 272 400 230.4 512 224c64 3.2 124.8 19.2 176 44.8l-54.4 54.4C598.4 300.8 560 288 512 288c-64 0-115.2 22.4-160 64s-64 96-64 160c0 48 12.8 89.6 35.2 124.8L256 707.2c-9.6-6.4-19.2-16-25.6-22.4Zm140.8-96c-12.8-22.4-19.2-48-19.2-76.8 0-44.8 16-83.2 48-112 32-28.8 67.2-48 112-48 28.8 0 54.4 6.4 73.6 19.2zM889.599 336c-12.8-16-28.8-28.8-41.6-41.6l-48 48c73.6 67.2 124.8 124.8 150.4 169.6-28.8 48-80 105.6-153.6 172.8-73.6 67.2-172.8 108.8-284.8 115.2-51.2-3.2-99.2-12.8-140.8-28.8l-48 48c57.6 22.4 118.4 38.4 188.8 44.8 160-16 288-73.6 377.6-176C979.199 585.6 1024 528 1024 512s-48.001-73.6-134.401-176Z"}),ae("path",{fill:"currentColor",d:"M511.998 672c-12.8 0-25.6-3.2-38.4-6.4l-51.2 51.2c28.8 12.8 57.6 19.2 89.6 19.2 64 0 115.2-22.4 160-64 41.6-41.6 64-96 64-160 0-32-6.4-64-19.2-89.6l-51.2 51.2c3.2 12.8 6.4 25.6 6.4 38.4 0 44.8-16 83.2-48 112-32 28.8-67.2 48-112 48Z"})]))}}),l5=a5,c5=de({name:"InfoFilled",__name:"info-filled",setup(t){return(e,n)=>(I(),ne("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896.064A448 448 0 0 1 512 64m67.2 275.072c33.28 0 60.288-23.104 60.288-57.344s-27.072-57.344-60.288-57.344c-33.28 0-60.16 23.104-60.16 57.344s26.88 57.344 60.16 57.344M590.912 699.2c0-6.848 2.368-24.64 1.024-34.752l-52.608 60.544c-10.88 11.456-24.512 19.392-30.912 17.28a12.992 12.992 0 0 1-8.256-14.72l87.68-276.992c7.168-35.136-12.544-67.2-54.336-71.296-44.096 0-108.992 44.736-148.48 101.504 0 6.784-1.28 23.68.064 33.792l52.544-60.608c10.88-11.328 23.552-19.328 29.952-17.152a12.8 12.8 0 0 1 7.808 16.128L388.48 728.576c-10.048 32.256 8.96 63.872 55.04 71.04 67.84 0 107.904-43.648 147.456-100.416z"})]))}}),$v=c5,u5=de({name:"Loading",__name:"loading",setup(t){return(e,n)=>(I(),ne("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M512 64a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0V96a32 32 0 0 1 32-32m0 640a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V736a32 32 0 0 1 32-32m448-192a32 32 0 0 1-32 32H736a32 32 0 1 1 0-64h192a32 32 0 0 1 32 32m-640 0a32 32 0 0 1-32 32H96a32 32 0 0 1 0-64h192a32 32 0 0 1 32 32M195.2 195.2a32 32 0 0 1 45.248 0L376.32 331.008a32 32 0 0 1-45.248 45.248L195.2 240.448a32 32 0 0 1 0-45.248zm452.544 452.544a32 32 0 0 1 45.248 0L828.8 783.552a32 32 0 0 1-45.248 45.248L647.744 692.992a32 32 0 0 1 0-45.248zM828.8 195.264a32 32 0 0 1 0 45.184L692.992 376.32a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0m-452.544 452.48a32 32 0 0 1 0 45.248L240.448 828.8a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0z"})]))}}),co=u5,d5=de({name:"Minus",__name:"minus",setup(t){return(e,n)=>(I(),ne("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M128 544h768a32 32 0 1 0 0-64H128a32 32 0 0 0 0 64"})]))}}),f5=d5,h5=de({name:"MoreFilled",__name:"more-filled",setup(t){return(e,n)=>(I(),ne("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M176 416a112 112 0 1 1 0 224 112 112 0 0 1 0-224m336 0a112 112 0 1 1 0 224 112 112 0 0 1 0-224m336 0a112 112 0 1 1 0 224 112 112 0 0 1 0-224"})]))}}),xS=h5,p5=de({name:"More",__name:"more",setup(t){return(e,n)=>(I(),ne("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M176 416a112 112 0 1 0 0 224 112 112 0 0 0 0-224m0 64a48 48 0 1 1 0 96 48 48 0 0 1 0-96m336-64a112 112 0 1 1 0 224 112 112 0 0 1 0-224m0 64a48 48 0 1 0 0 96 48 48 0 0 0 0-96m336-64a112 112 0 1 1 0 224 112 112 0 0 1 0-224m0 64a48 48 0 1 0 0 96 48 48 0 0 0 0-96"})]))}}),m5=p5,g5=de({name:"PictureFilled",__name:"picture-filled",setup(t){return(e,n)=>(I(),ne("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M96 896a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h832a32 32 0 0 1 32 32v704a32 32 0 0 1-32 32zm315.52-228.48-68.928-68.928a32 32 0 0 0-45.248 0L128 768.064h778.688l-242.112-290.56a32 32 0 0 0-49.216 0L458.752 665.408a32 32 0 0 1-47.232 2.112M256 384a96 96 0 1 0 192.064-.064A96 96 0 0 0 256 384"})]))}}),v5=g5,y5=de({name:"Plus",__name:"plus",setup(t){return(e,n)=>(I(),ne("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M480 480V128a32 32 0 0 1 64 0v352h352a32 32 0 1 1 0 64H544v352a32 32 0 1 1-64 0V544H128a32 32 0 0 1 0-64z"})]))}}),mT=y5,b5=de({name:"QuestionFilled",__name:"question-filled",setup(t){return(e,n)=>(I(),ne("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m23.744 191.488c-52.096 0-92.928 14.784-123.2 44.352-30.976 29.568-45.76 70.4-45.76 122.496h80.256c0-29.568 5.632-52.8 17.6-68.992 13.376-19.712 35.2-28.864 66.176-28.864 23.936 0 42.944 6.336 56.32 19.712 12.672 13.376 19.712 31.68 19.712 54.912 0 17.6-6.336 34.496-19.008 49.984l-8.448 9.856c-45.76 40.832-73.216 70.4-82.368 89.408-9.856 19.008-14.08 42.24-14.08 68.992v9.856h80.96v-9.856c0-16.896 3.52-31.68 10.56-45.76 6.336-12.672 15.488-24.64 28.16-35.2 33.792-29.568 54.208-48.576 60.544-55.616 16.896-22.528 26.048-51.392 26.048-86.592 0-42.944-14.08-76.736-42.24-101.376-28.16-25.344-65.472-37.312-111.232-37.312zm-12.672 406.208a54.272 54.272 0 0 0-38.72 14.784 49.408 49.408 0 0 0-15.488 38.016c0 15.488 4.928 28.16 15.488 38.016A54.848 54.848 0 0 0 523.072 768c15.488 0 28.16-4.928 38.72-14.784a51.52 51.52 0 0 0 16.192-38.72 51.968 51.968 0 0 0-15.488-38.016 55.936 55.936 0 0 0-39.424-14.784z"})]))}}),_5=b5,S5=de({name:"RefreshLeft",__name:"refresh-left",setup(t){return(e,n)=>(I(),ne("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M289.088 296.704h92.992a32 32 0 0 1 0 64H232.96a32 32 0 0 1-32-32V179.712a32 32 0 0 1 64 0v50.56a384 384 0 0 1 643.84 282.88 384 384 0 0 1-383.936 384 384 384 0 0 1-384-384h64a320 320 0 1 0 640 0 320 320 0 0 0-555.712-216.448z"})]))}}),w5=S5,C5=de({name:"RefreshRight",__name:"refresh-right",setup(t){return(e,n)=>(I(),ne("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M784.512 230.272v-50.56a32 32 0 1 1 64 0v149.056a32 32 0 0 1-32 32H667.52a32 32 0 1 1 0-64h92.992A320 320 0 1 0 524.8 833.152a320 320 0 0 0 320-320h64a384 384 0 0 1-384 384 384 384 0 0 1-384-384 384 384 0 0 1 643.712-282.88z"})]))}}),x5=C5,T5=de({name:"ScaleToOriginal",__name:"scale-to-original",setup(t){return(e,n)=>(I(),ne("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M813.176 180.706a60.235 60.235 0 0 1 60.236 60.235v481.883a60.235 60.235 0 0 1-60.236 60.235H210.824a60.235 60.235 0 0 1-60.236-60.235V240.94a60.235 60.235 0 0 1 60.236-60.235h602.352zm0-60.235H210.824A120.47 120.47 0 0 0 90.353 240.94v481.883a120.47 120.47 0 0 0 120.47 120.47h602.353a120.47 120.47 0 0 0 120.471-120.47V240.94a120.47 120.47 0 0 0-120.47-120.47zm-120.47 180.705a30.118 30.118 0 0 0-30.118 30.118v301.177a30.118 30.118 0 0 0 60.236 0V331.294a30.118 30.118 0 0 0-30.118-30.118zm-361.412 0a30.118 30.118 0 0 0-30.118 30.118v301.177a30.118 30.118 0 1 0 60.236 0V331.294a30.118 30.118 0 0 0-30.118-30.118M512 361.412a30.118 30.118 0 0 0-30.118 30.117v30.118a30.118 30.118 0 0 0 60.236 0V391.53A30.118 30.118 0 0 0 512 361.412M512 512a30.118 30.118 0 0 0-30.118 30.118v30.117a30.118 30.118 0 0 0 60.236 0v-30.117A30.118 30.118 0 0 0 512 512"})]))}}),E5=T5,M5=de({name:"Search",__name:"search",setup(t){return(e,n)=>(I(),ne("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704"})]))}}),A5=M5,k5=de({name:"SortDown",__name:"sort-down",setup(t){return(e,n)=>(I(),ne("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M576 96v709.568L333.312 562.816A32 32 0 1 0 288 608l297.408 297.344A32 32 0 0 0 640 882.688V96a32 32 0 0 0-64 0"})]))}}),R5=k5,P5=de({name:"SortUp",__name:"sort-up",setup(t){return(e,n)=>(I(),ne("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M384 141.248V928a32 32 0 1 0 64 0V218.56l242.688 242.688A32 32 0 1 0 736 416L438.592 118.656A32 32 0 0 0 384 141.248"})]))}}),O5=P5,L5=de({name:"StarFilled",__name:"star-filled",setup(t){return(e,n)=>(I(),ne("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M283.84 867.84 512 747.776l228.16 119.936a6.4 6.4 0 0 0 9.28-6.72l-43.52-254.08 184.512-179.904a6.4 6.4 0 0 0-3.52-10.88l-255.104-37.12L517.76 147.904a6.4 6.4 0 0 0-11.52 0L392.192 379.072l-255.104 37.12a6.4 6.4 0 0 0-3.52 10.88L318.08 606.976l-43.584 254.08a6.4 6.4 0 0 0 9.28 6.72z"})]))}}),Td=L5,I5=de({name:"Star",__name:"star",setup(t){return(e,n)=>(I(),ne("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"m512 747.84 228.16 119.936a6.4 6.4 0 0 0 9.28-6.72l-43.52-254.08 184.512-179.904a6.4 6.4 0 0 0-3.52-10.88l-255.104-37.12L517.76 147.904a6.4 6.4 0 0 0-11.52 0L392.192 379.072l-255.104 37.12a6.4 6.4 0 0 0-3.52 10.88L318.08 606.976l-43.584 254.08a6.4 6.4 0 0 0 9.28 6.72zM313.6 924.48a70.4 70.4 0 0 1-102.144-74.24l37.888-220.928L88.96 472.96A70.4 70.4 0 0 1 128 352.896l221.76-32.256 99.2-200.96a70.4 70.4 0 0 1 126.208 0l99.2 200.96 221.824 32.256a70.4 70.4 0 0 1 39.04 120.064L774.72 629.376l37.888 220.928a70.4 70.4 0 0 1-102.144 74.24L512 820.096l-198.4 104.32z"})]))}}),D5=I5,N5=de({name:"SuccessFilled",__name:"success-filled",setup(t){return(e,n)=>(I(),ne("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m-55.808 536.384-99.52-99.584a38.4 38.4 0 1 0-54.336 54.336l126.72 126.72a38.272 38.272 0 0 0 54.336 0l262.4-262.464a38.4 38.4 0 1 0-54.272-54.336z"})]))}}),gT=N5,F5=de({name:"View",__name:"view",setup(t){return(e,n)=>(I(),ne("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M512 160c320 0 512 352 512 352S832 864 512 864 0 512 0 512s192-352 512-352m0 64c-225.28 0-384.128 208.064-436.8 288 52.608 79.872 211.456 288 436.8 288 225.28 0 384.128-208.064 436.8-288-52.608-79.872-211.456-288-436.8-288zm0 64a224 224 0 1 1 0 448 224 224 0 0 1 0-448m0 64a160.192 160.192 0 0 0-160 160c0 88.192 71.744 160 160 160s160-71.808 160-160-71.744-160-160-160"})]))}}),B5=F5,U5=de({name:"WarningFilled",__name:"warning-filled",setup(t){return(e,n)=>(I(),ne("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m0 192a58.432 58.432 0 0 0-58.24 63.744l23.36 256.384a35.072 35.072 0 0 0 69.76 0l23.296-256.384A58.432 58.432 0 0 0 512 256m0 512a51.2 51.2 0 1 0 0-102.4 51.2 51.2 0 0 0 0 102.4"})]))}}),Sh=U5,V5=de({name:"ZoomIn",__name:"zoom-in",setup(t){return(e,n)=>(I(),ne("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704m-32-384v-96a32 32 0 0 1 64 0v96h96a32 32 0 0 1 0 64h-96v96a32 32 0 0 1-64 0v-96h-96a32 32 0 0 1 0-64z"})]))}}),vT=V5,H5=de({name:"ZoomOut",__name:"zoom-out",setup(t){return(e,n)=>(I(),ne("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ae("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704M352 448h256a32 32 0 0 1 0 64H352a32 32 0 0 1 0-64"})]))}}),z5=H5;const yT="__epPropKey",Ae=t=>t,$5=t=>_t(t)&&!!t[yT],_r=(t,e)=>{if(!_t(t)||$5(t))return t;const{values:n,required:i,default:r,type:a,validator:d}=t,o={type:a,required:!!i,validator:n||d?c=>{let h=!1,l=[];if(n&&(l=Array.from(n),Mt(t,"default")&&l.push(r),h||(h=l.includes(c))),d&&(h||(h=d(c))),!h&&l.length>0){const u=[...new Set(l)].map(f=>JSON.stringify(f)).join(", ");uR(`Invalid prop: validation failed${e?` for prop "${e}"`:""}. Expected one of [${u}], got value ${JSON.stringify(c)}.`)}return h}:void 0,[yT]:!0};return Mt(t,"default")&&(o.default=r),o},Xe=t=>Pf(Object.entries(t).map(([e,n])=>[e,_r(n,e)])),Qt=Ae([String,Object,Function]),bT={Close:yr},Wv={Close:yr,SuccessFilled:gT,InfoFilled:$v,WarningFilled:Sh,CircleCloseFilled:zv},to={success:gT,warning:Sh,error:zv,info:$v},_T={validating:co,success:Hv,error:lo},yt=(t,e)=>{if(t.install=n=>{for(const i of[t,...Object.values(e??{})])n.component(i.name,i)},e)for(const[n,i]of Object.entries(e))t[n]=i;return t},ST=(t,e)=>(t.install=n=>{t._context=n._context,n.config.globalProperties[e]=t},t),W5=(t,e)=>(t.install=n=>{n.directive(e,t)},t),mn=t=>(t.install=Ht,t),wh=(...t)=>e=>{t.forEach(n=>{lt(n)?n(e):n.value=e})},rt={tab:"Tab",enter:"Enter",space:"Space",left:"ArrowLeft",up:"ArrowUp",right:"ArrowRight",down:"ArrowDown",esc:"Escape",delete:"Delete",backspace:"Backspace",numpadEnter:"NumpadEnter",pageUp:"PageUp",pageDown:"PageDown",home:"Home",end:"End"},G5=["year","month","date","dates","week","datetime","datetimerange","daterange","monthrange"],Up=["sun","mon","tue","wed","thu","fri","sat"],bt="update:modelValue",tn="change",di="input",TS=Symbol("INSTALLED_KEY"),Hr=["","default","small","large"],j5={large:40,default:32,small:24},X5=t=>j5[t||"default"],Ch=t=>["",...Hr].includes(t);var Vi=(t=>(t[t.TEXT=1]="TEXT",t[t.CLASS=2]="CLASS",t[t.STYLE=4]="STYLE",t[t.PROPS=8]="PROPS",t[t.FULL_PROPS=16]="FULL_PROPS",t[t.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",t[t.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",t[t.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",t[t.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",t[t.NEED_PATCH=512]="NEED_PATCH",t[t.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",t[t.HOISTED=-1]="HOISTED",t[t.BAIL=-2]="BAIL",t))(Vi||{});function Bm(t){return un(t)&&t.type===Qe}function K5(t){return un(t)&&t.type===li}function Y5(t){return un(t)&&!Bm(t)&&!K5(t)}const q5=t=>{if(!un(t))return{};const e=t.props||{},n=(un(t.type)?t.type.props:void 0)||{},i={};return Object.keys(n).forEach(r=>{Mt(n[r],"default")&&(i[r]=n[r].default)}),Object.keys(e).forEach(r=>{i[Xi(r)]=e[r]}),i},Z5=t=>{if(!Ze(t)||t.length>1)throw new Error("expect to receive a single Vue element child");return t[0]},rl=t=>{const e=Ze(t)?t:[t],n=[];return e.forEach(i=>{var r;Ze(i)?n.push(...rl(i)):un(i)&&Ze(i.children)?n.push(...rl(i.children)):(n.push(i),un(i)&&((r=i.component)!=null&&r.subTree)&&n.push(...rl(i.component.subTree)))}),n},ES=t=>[...new Set(t)],us=t=>!t&&t!==0?[]:Array.isArray(t)?t:[t],xh=t=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(t),ou=t=>kt?window.requestAnimationFrame(t):setTimeout(t,16),Th=t=>kt?window.cancelAnimationFrame(t):clearTimeout(t),Eh=()=>Math.floor(Math.random()*1e4),an=t=>t,J5=["class","style"],Q5=/^on[A-Z]/,Gv=(t={})=>{const{excludeListeners:e=!1,excludeKeys:n}=t,i=R(()=>((n==null?void 0:n.value)||[]).concat(J5)),r=vt();return R(r?()=>{var a;return Pf(Object.entries((a=r.proxy)==null?void 0:a.$attrs).filter(([d])=>!i.value.includes(d)&&!(e&&Q5.test(d))))}:()=>({}))},Ir=({from:t,replacement:e,scope:n,version:i,ref:r,type:a="API"},d)=>{Be(()=>y(d),s=>{},{immediate:!0})},wT=(t,e,n)=>{let i={offsetX:0,offsetY:0};const r=s=>{const o=s.clientX,c=s.clientY,{offsetX:h,offsetY:l}=i,u=t.value.getBoundingClientRect(),f=u.left,m=u.top,g=u.width,p=u.height,v=document.documentElement.clientWidth,b=document.documentElement.clientHeight,_=-f+h,S=-m+l,w=v-f-g+h,C=b-m-p+l,x=E=>{const A=Math.min(Math.max(h+E.clientX-o,_),w),O=Math.min(Math.max(l+E.clientY-c,S),C);i={offsetX:A,offsetY:O},t.value.style.transform=`translate(${bn(A)}, ${bn(O)})`},M=()=>{document.removeEventListener("mousemove",x),document.removeEventListener("mouseup",M)};document.addEventListener("mousemove",x),document.addEventListener("mouseup",M)},a=()=>{e.value&&t.value&&e.value.addEventListener("mousedown",r)},d=()=>{e.value&&t.value&&e.value.removeEventListener("mousedown",r)};mt(()=>{Di(()=>{n.value?a():d()})}),rn(()=>{d()})},e8=t=>({focus:()=>{var e,n;(n=(e=t.value)==null?void 0:e.focus)==null||n.call(e)}});var t8={name:"en",el:{colorpicker:{confirm:"OK",clear:"Clear",defaultLabel:"color picker",description:"current color is {color}. press enter to select a new color."},datepicker:{now:"Now",today:"Today",cancel:"Cancel",clear:"Clear",confirm:"OK",dateTablePrompt:"Use the arrow keys and enter to select the day of the month",monthTablePrompt:"Use the arrow keys and enter to select the month",yearTablePrompt:"Use the arrow keys and enter to select the year",selectedDate:"Selected date",selectDate:"Select date",selectTime:"Select time",startDate:"Start Date",startTime:"Start Time",endDate:"End Date",endTime:"End Time",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",year:"",month1:"January",month2:"February",month3:"March",month4:"April",month5:"May",month6:"June",month7:"July",month8:"August",month9:"September",month10:"October",month11:"November",month12:"December",week:"week",weeks:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},weeksFull:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"},months:{jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec"}},inputNumber:{decrease:"decrease number",increase:"increase number"},select:{loading:"Loading",noMatch:"No matching data",noData:"No data",placeholder:"Select"},dropdown:{toggleDropdown:"Toggle Dropdown"},cascader:{noMatch:"No matching data",loading:"Loading",placeholder:"Select",noData:"No data"},pagination:{goto:"Go to",pagesize:"/page",total:"Total {total}",pageClassifier:"",page:"Page",prev:"Go to previous page",next:"Go to next page",currentPage:"page {pager}",prevPages:"Previous {pager} pages",nextPages:"Next {pager} pages",deprecationWarning:"Deprecated usages detected, please refer to the el-pagination documentation for more details"},dialog:{close:"Close this dialog"},drawer:{close:"Close this dialog"},messagebox:{title:"Message",confirm:"OK",cancel:"Cancel",error:"Illegal input",close:"Close this dialog"},upload:{deleteTip:"press delete to remove",delete:"Delete",preview:"Preview",continue:"Continue"},slider:{defaultLabel:"slider between {min} and {max}",defaultRangeStartLabel:"pick start value",defaultRangeEndLabel:"pick end value"},table:{emptyText:"No Data",confirmFilter:"Confirm",resetFilter:"Reset",clearFilter:"All",sumText:"Sum"},tree:{emptyText:"No Data"},transfer:{noMatch:"No matching data",noData:"No data",titles:["List 1","List 2"],filterPlaceholder:"Enter keyword",noCheckedFormat:"{total} items",hasCheckedFormat:"{checked}/{total} checked"},image:{error:"FAILED"},pageHeader:{title:"Back"},popconfirm:{confirmButtonText:"Yes",cancelButtonText:"No"}}};const n8=t=>(e,n)=>i8(e,n,y(t)),i8=(t,e,n)=>on(n,t,t).replace(/\{(\w+)\}/g,(i,r)=>{var a;return`${(a=e==null?void 0:e[r])!=null?a:`{${r}}`}`}),r8=t=>{const e=R(()=>y(t).name),n=en(t)?t:q(t);return{lang:e,locale:n,t:n8(t)}},CT=Symbol("localeContextKey"),Pt=t=>{const e=t||Je(CT,q());return r8(R(()=>e.value||t8))},Of="el",s8="is-",Co=(t,e,n,i,r)=>{let a=`${t}-${e}`;return n&&(a+=`-${n}`),i&&(a+=`__${i}`),r&&(a+=`--${r}`),a},xT=Symbol("namespaceContextKey"),jv=t=>{const e=t||Je(xT,q(Of));return R(()=>y(e)||Of)},Ue=(t,e)=>{const n=jv(e);return{namespace:n,b:(g="")=>Co(n.value,t,g,"",""),e:g=>g?Co(n.value,t,"",g,""):"",m:g=>g?Co(n.value,t,"","",g):"",be:(g,p)=>g&&p?Co(n.value,t,g,p,""):"",em:(g,p)=>g&&p?Co(n.value,t,"",g,p):"",bm:(g,p)=>g&&p?Co(n.value,t,g,"",p):"",bem:(g,p,v)=>g&&p&&v?Co(n.value,t,g,p,v):"",is:(g,...p)=>{const v=p.length>=1?p[0]:!0;return g&&v?`${s8}${g}`:""},cssVar:g=>{const p={};for(const v in g)g[v]&&(p[`--${n.value}-${v}`]=g[v]);return p},cssVarName:g=>`--${n.value}-${g}`,cssVarBlock:g=>{const p={};for(const v in g)g[v]&&(p[`--${n.value}-${t}-${v}`]=g[v]);return p},cssVarBlockName:g=>`--${n.value}-${t}-${g}`}},TT=(t,e={})=>{en(t)||Tn("[useLockscreen]","You need to pass a ref param to this function");const n=e.ns||Ue("popup"),i=UC(()=>n.bm("parent","hidden"));if(!kt||vr(document.body,i.value))return;let r=0,a=!1,d="0";const s=()=>{setTimeout(()=>{Ci(document==null?void 0:document.body,i.value),a&&document&&(document.body.style.width=d)},200)};Be(t,o=>{if(!o){s();return}a=!vr(document.body,i.value),a&&(d=document.body.style.width),r=dT(n.namespace.value);const c=document.documentElement.clientHeight<document.body.scrollHeight,h=ts(document.body,"overflowY");r>0&&(c||h==="scroll")&&a&&(document.body.style.width=`calc(100% - ${r}px)`),Ar(document.body,i.value)}),xC(()=>s())},o8=_r({type:Ae(Boolean),default:null}),a8=_r({type:Ae(Function)}),ET=t=>{const e=`update:${t}`,n=`onUpdate:${t}`,i=[e],r={[t]:o8,[n]:a8};return{useModelToggle:({indicator:d,toggleReason:s,shouldHideWhenRouteChanges:o,shouldProceed:c,onShow:h,onHide:l})=>{const u=vt(),{emit:f}=u,m=u.props,g=R(()=>lt(m[n])),p=R(()=>m[t]===null),v=x=>{d.value!==!0&&(d.value=!0,s&&(s.value=x),lt(h)&&h(x))},b=x=>{d.value!==!1&&(d.value=!1,s&&(s.value=x),lt(l)&&l(x))},_=x=>{if(m.disabled===!0||lt(c)&&!c())return;const M=g.value&&kt;M&&f(e,!0),(p.value||!M)&&v(x)},S=x=>{if(m.disabled===!0||!kt)return;const M=g.value&&kt;M&&f(e,!1),(p.value||!M)&&b(x)},w=x=>{xn(x)&&(m.disabled&&x?g.value&&f(e,!1):d.value!==x&&(x?v():b()))},C=()=>{d.value?S():_()};return Be(()=>m[t],w),o&&u.appContext.config.globalProperties.$route!==void 0&&Be(()=>({...u.proxy.$route}),()=>{o.value&&d.value&&S()}),mt(()=>{w(m[t])}),{hide:S,show:_,toggle:C,hasUpdateHandler:g}},useModelToggleProps:r,useModelToggleEmits:i}};ET("modelValue");const MT=t=>{const e=vt();return R(()=>{var n,i;return(i=(n=e==null?void 0:e.proxy)==null?void 0:n.$props)==null?void 0:i[t]})};var xi="top",qi="bottom",Zi="right",Ti="left",Xv="auto",Nu=[xi,qi,Zi,Ti],kl="start",au="end",l8="clippingParents",AT="viewport",hc="popper",c8="reference",MS=Nu.reduce(function(t,e){return t.concat([e+"-"+kl,e+"-"+au])},[]),ha=[].concat(Nu,[Xv]).reduce(function(t,e){return t.concat([e,e+"-"+kl,e+"-"+au])},[]),u8="beforeRead",d8="read",f8="afterRead",h8="beforeMain",p8="main",m8="afterMain",g8="beforeWrite",v8="write",y8="afterWrite",b8=[u8,d8,f8,h8,p8,m8,g8,v8,y8];function Dr(t){return t?(t.nodeName||"").toLowerCase():null}function Sr(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Rl(t){var e=Sr(t).Element;return t instanceof e||t instanceof Element}function ji(t){var e=Sr(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function Kv(t){if(typeof ShadowRoot>"u")return!1;var e=Sr(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function _8(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var i=e.styles[n]||{},r=e.attributes[n]||{},a=e.elements[n];!ji(a)||!Dr(a)||(Object.assign(a.style,i),Object.keys(r).forEach(function(d){var s=r[d];s===!1?a.removeAttribute(d):a.setAttribute(d,s===!0?"":s)}))})}function S8(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(i){var r=e.elements[i],a=e.attributes[i]||{},d=Object.keys(e.styles.hasOwnProperty(i)?e.styles[i]:n[i]),s=d.reduce(function(o,c){return o[c]="",o},{});!ji(r)||!Dr(r)||(Object.assign(r.style,s),Object.keys(a).forEach(function(o){r.removeAttribute(o)}))})}}var kT={name:"applyStyles",enabled:!0,phase:"write",fn:_8,effect:S8,requires:["computeStyles"]};function Rr(t){return t.split("-")[0]}var Ko=Math.max,Lf=Math.min,Pl=Math.round;function Ol(t,e){e===void 0&&(e=!1);var n=t.getBoundingClientRect(),i=1,r=1;if(ji(t)&&e){var a=t.offsetHeight,d=t.offsetWidth;d>0&&(i=Pl(n.width)/d||1),a>0&&(r=Pl(n.height)/a||1)}return{width:n.width/i,height:n.height/r,top:n.top/r,right:n.right/i,bottom:n.bottom/r,left:n.left/i,x:n.left/i,y:n.top/r}}function Yv(t){var e=Ol(t),n=t.offsetWidth,i=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:i}}function RT(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&Kv(n)){var i=e;do{if(i&&t.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function ps(t){return Sr(t).getComputedStyle(t)}function w8(t){return["table","td","th"].indexOf(Dr(t))>=0}function uo(t){return((Rl(t)?t.ownerDocument:t.document)||window.document).documentElement}function Mh(t){return Dr(t)==="html"?t:t.assignedSlot||t.parentNode||(Kv(t)?t.host:null)||uo(t)}function AS(t){return!ji(t)||ps(t).position==="fixed"?null:t.offsetParent}function C8(t){var e=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,n=navigator.userAgent.indexOf("Trident")!==-1;if(n&&ji(t)){var i=ps(t);if(i.position==="fixed")return null}var r=Mh(t);for(Kv(r)&&(r=r.host);ji(r)&&["html","body"].indexOf(Dr(r))<0;){var a=ps(r);if(a.transform!=="none"||a.perspective!=="none"||a.contain==="paint"||["transform","perspective"].indexOf(a.willChange)!==-1||e&&a.willChange==="filter"||e&&a.filter&&a.filter!=="none")return r;r=r.parentNode}return null}function Fu(t){for(var e=Sr(t),n=AS(t);n&&w8(n)&&ps(n).position==="static";)n=AS(n);return n&&(Dr(n)==="html"||Dr(n)==="body"&&ps(n).position==="static")?e:n||C8(t)||e}function qv(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Ic(t,e,n){return Ko(t,Lf(e,n))}function x8(t,e,n){var i=Ic(t,e,n);return i>n?n:i}function PT(){return{top:0,right:0,bottom:0,left:0}}function OT(t){return Object.assign({},PT(),t)}function LT(t,e){return e.reduce(function(n,i){return n[i]=t,n},{})}var T8=function(t,e){return t=typeof t=="function"?t(Object.assign({},e.rects,{placement:e.placement})):t,OT(typeof t!="number"?t:LT(t,Nu))};function E8(t){var e,n=t.state,i=t.name,r=t.options,a=n.elements.arrow,d=n.modifiersData.popperOffsets,s=Rr(n.placement),o=qv(s),c=[Ti,Zi].indexOf(s)>=0,h=c?"height":"width";if(!(!a||!d)){var l=T8(r.padding,n),u=Yv(a),f=o==="y"?xi:Ti,m=o==="y"?qi:Zi,g=n.rects.reference[h]+n.rects.reference[o]-d[o]-n.rects.popper[h],p=d[o]-n.rects.reference[o],v=Fu(a),b=v?o==="y"?v.clientHeight||0:v.clientWidth||0:0,_=g/2-p/2,S=l[f],w=b-u[h]-l[m],C=b/2-u[h]/2+_,x=Ic(S,C,w),M=o;n.modifiersData[i]=(e={},e[M]=x,e.centerOffset=x-C,e)}}function M8(t){var e=t.state,n=t.options,i=n.element,r=i===void 0?"[data-popper-arrow]":i;r!=null&&(typeof r=="string"&&(r=e.elements.popper.querySelector(r),!r)||!RT(e.elements.popper,r)||(e.elements.arrow=r))}var A8={name:"arrow",enabled:!0,phase:"main",fn:E8,effect:M8,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ll(t){return t.split("-")[1]}var k8={top:"auto",right:"auto",bottom:"auto",left:"auto"};function R8(t){var e=t.x,n=t.y,i=window,r=i.devicePixelRatio||1;return{x:Pl(e*r)/r||0,y:Pl(n*r)/r||0}}function kS(t){var e,n=t.popper,i=t.popperRect,r=t.placement,a=t.variation,d=t.offsets,s=t.position,o=t.gpuAcceleration,c=t.adaptive,h=t.roundOffsets,l=t.isFixed,u=d.x,f=u===void 0?0:u,m=d.y,g=m===void 0?0:m,p=typeof h=="function"?h({x:f,y:g}):{x:f,y:g};f=p.x,g=p.y;var v=d.hasOwnProperty("x"),b=d.hasOwnProperty("y"),_=Ti,S=xi,w=window;if(c){var C=Fu(n),x="clientHeight",M="clientWidth";if(C===Sr(n)&&(C=uo(n),ps(C).position!=="static"&&s==="absolute"&&(x="scrollHeight",M="scrollWidth")),C=C,r===xi||(r===Ti||r===Zi)&&a===au){S=qi;var E=l&&C===w&&w.visualViewport?w.visualViewport.height:C[x];g-=E-i.height,g*=o?1:-1}if(r===Ti||(r===xi||r===qi)&&a===au){_=Zi;var A=l&&C===w&&w.visualViewport?w.visualViewport.width:C[M];f-=A-i.width,f*=o?1:-1}}var O=Object.assign({position:s},c&&k8),D=h===!0?R8({x:f,y:g}):{x:f,y:g};if(f=D.x,g=D.y,o){var L;return Object.assign({},O,(L={},L[S]=b?"0":"",L[_]=v?"0":"",L.transform=(w.devicePixelRatio||1)<=1?"translate("+f+"px, "+g+"px)":"translate3d("+f+"px, "+g+"px, 0)",L))}return Object.assign({},O,(e={},e[S]=b?g+"px":"",e[_]=v?f+"px":"",e.transform="",e))}function P8(t){var e=t.state,n=t.options,i=n.gpuAcceleration,r=i===void 0?!0:i,a=n.adaptive,d=a===void 0?!0:a,s=n.roundOffsets,o=s===void 0?!0:s,c={placement:Rr(e.placement),variation:Ll(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,kS(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:d,roundOffsets:o})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,kS(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:o})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var IT={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:P8,data:{}},Ed={passive:!0};function O8(t){var e=t.state,n=t.instance,i=t.options,r=i.scroll,a=r===void 0?!0:r,d=i.resize,s=d===void 0?!0:d,o=Sr(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return a&&c.forEach(function(h){h.addEventListener("scroll",n.update,Ed)}),s&&o.addEventListener("resize",n.update,Ed),function(){a&&c.forEach(function(h){h.removeEventListener("scroll",n.update,Ed)}),s&&o.removeEventListener("resize",n.update,Ed)}}var DT={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:O8,data:{}},L8={left:"right",right:"left",bottom:"top",top:"bottom"};function qd(t){return t.replace(/left|right|bottom|top/g,function(e){return L8[e]})}var I8={start:"end",end:"start"};function RS(t){return t.replace(/start|end/g,function(e){return I8[e]})}function Zv(t){var e=Sr(t),n=e.pageXOffset,i=e.pageYOffset;return{scrollLeft:n,scrollTop:i}}function Jv(t){return Ol(uo(t)).left+Zv(t).scrollLeft}function D8(t){var e=Sr(t),n=uo(t),i=e.visualViewport,r=n.clientWidth,a=n.clientHeight,d=0,s=0;return i&&(r=i.width,a=i.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(d=i.offsetLeft,s=i.offsetTop)),{width:r,height:a,x:d+Jv(t),y:s}}function N8(t){var e,n=uo(t),i=Zv(t),r=(e=t.ownerDocument)==null?void 0:e.body,a=Ko(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),d=Ko(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),s=-i.scrollLeft+Jv(t),o=-i.scrollTop;return ps(r||n).direction==="rtl"&&(s+=Ko(n.clientWidth,r?r.clientWidth:0)-a),{width:a,height:d,x:s,y:o}}function Qv(t){var e=ps(t),n=e.overflow,i=e.overflowX,r=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+i)}function NT(t){return["html","body","#document"].indexOf(Dr(t))>=0?t.ownerDocument.body:ji(t)&&Qv(t)?t:NT(Mh(t))}function Dc(t,e){var n;e===void 0&&(e=[]);var i=NT(t),r=i===((n=t.ownerDocument)==null?void 0:n.body),a=Sr(i),d=r?[a].concat(a.visualViewport||[],Qv(i)?i:[]):i,s=e.concat(d);return r?s:s.concat(Dc(Mh(d)))}function Um(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function F8(t){var e=Ol(t);return e.top=e.top+t.clientTop,e.left=e.left+t.clientLeft,e.bottom=e.top+t.clientHeight,e.right=e.left+t.clientWidth,e.width=t.clientWidth,e.height=t.clientHeight,e.x=e.left,e.y=e.top,e}function PS(t,e){return e===AT?Um(D8(t)):Rl(e)?F8(e):Um(N8(uo(t)))}function B8(t){var e=Dc(Mh(t)),n=["absolute","fixed"].indexOf(ps(t).position)>=0,i=n&&ji(t)?Fu(t):t;return Rl(i)?e.filter(function(r){return Rl(r)&&RT(r,i)&&Dr(r)!=="body"}):[]}function U8(t,e,n){var i=e==="clippingParents"?B8(t):[].concat(e),r=[].concat(i,[n]),a=r[0],d=r.reduce(function(s,o){var c=PS(t,o);return s.top=Ko(c.top,s.top),s.right=Lf(c.right,s.right),s.bottom=Lf(c.bottom,s.bottom),s.left=Ko(c.left,s.left),s},PS(t,a));return d.width=d.right-d.left,d.height=d.bottom-d.top,d.x=d.left,d.y=d.top,d}function FT(t){var e=t.reference,n=t.element,i=t.placement,r=i?Rr(i):null,a=i?Ll(i):null,d=e.x+e.width/2-n.width/2,s=e.y+e.height/2-n.height/2,o;switch(r){case xi:o={x:d,y:e.y-n.height};break;case qi:o={x:d,y:e.y+e.height};break;case Zi:o={x:e.x+e.width,y:s};break;case Ti:o={x:e.x-n.width,y:s};break;default:o={x:e.x,y:e.y}}var c=r?qv(r):null;if(c!=null){var h=c==="y"?"height":"width";switch(a){case kl:o[c]=o[c]-(e[h]/2-n[h]/2);break;case au:o[c]=o[c]+(e[h]/2-n[h]/2);break}}return o}function lu(t,e){e===void 0&&(e={});var n=e,i=n.placement,r=i===void 0?t.placement:i,a=n.boundary,d=a===void 0?l8:a,s=n.rootBoundary,o=s===void 0?AT:s,c=n.elementContext,h=c===void 0?hc:c,l=n.altBoundary,u=l===void 0?!1:l,f=n.padding,m=f===void 0?0:f,g=OT(typeof m!="number"?m:LT(m,Nu)),p=h===hc?c8:hc,v=t.rects.popper,b=t.elements[u?p:h],_=U8(Rl(b)?b:b.contextElement||uo(t.elements.popper),d,o),S=Ol(t.elements.reference),w=FT({reference:S,element:v,strategy:"absolute",placement:r}),C=Um(Object.assign({},v,w)),x=h===hc?C:S,M={top:_.top-x.top+g.top,bottom:x.bottom-_.bottom+g.bottom,left:_.left-x.left+g.left,right:x.right-_.right+g.right},E=t.modifiersData.offset;if(h===hc&&E){var A=E[r];Object.keys(M).forEach(function(O){var D=[Zi,qi].indexOf(O)>=0?1:-1,L=[xi,qi].indexOf(O)>=0?"y":"x";M[O]+=A[L]*D})}return M}function V8(t,e){e===void 0&&(e={});var n=e,i=n.placement,r=n.boundary,a=n.rootBoundary,d=n.padding,s=n.flipVariations,o=n.allowedAutoPlacements,c=o===void 0?ha:o,h=Ll(i),l=h?s?MS:MS.filter(function(m){return Ll(m)===h}):Nu,u=l.filter(function(m){return c.indexOf(m)>=0});u.length===0&&(u=l);var f=u.reduce(function(m,g){return m[g]=lu(t,{placement:g,boundary:r,rootBoundary:a,padding:d})[Rr(g)],m},{});return Object.keys(f).sort(function(m,g){return f[m]-f[g]})}function H8(t){if(Rr(t)===Xv)return[];var e=qd(t);return[RS(t),e,RS(e)]}function z8(t){var e=t.state,n=t.options,i=t.name;if(!e.modifiersData[i]._skip){for(var r=n.mainAxis,a=r===void 0?!0:r,d=n.altAxis,s=d===void 0?!0:d,o=n.fallbackPlacements,c=n.padding,h=n.boundary,l=n.rootBoundary,u=n.altBoundary,f=n.flipVariations,m=f===void 0?!0:f,g=n.allowedAutoPlacements,p=e.options.placement,v=Rr(p),b=v===p,_=o||(b||!m?[qd(p)]:H8(p)),S=[p].concat(_).reduce(function($,z){return $.concat(Rr(z)===Xv?V8(e,{placement:z,boundary:h,rootBoundary:l,padding:c,flipVariations:m,allowedAutoPlacements:g}):z)},[]),w=e.rects.reference,C=e.rects.popper,x=new Map,M=!0,E=S[0],A=0;A<S.length;A++){var O=S[A],D=Rr(O),L=Ll(O)===kl,U=[xi,qi].indexOf(D)>=0,j=U?"width":"height",V=lu(e,{placement:O,boundary:h,rootBoundary:l,altBoundary:u,padding:c}),k=U?L?Zi:Ti:L?qi:xi;w[j]>C[j]&&(k=qd(k));var F=qd(k),T=[];if(a&&T.push(V[D]<=0),s&&T.push(V[k]<=0,V[F]<=0),T.every(function($){return $})){E=O,M=!1;break}x.set(O,T)}if(M)for(var P=m?3:1,H=function($){var z=S.find(function(Z){var W=x.get(Z);if(W)return W.slice(0,$).every(function(te){return te})});if(z)return E=z,"break"},N=P;N>0;N--){var G=H(N);if(G==="break")break}e.placement!==E&&(e.modifiersData[i]._skip=!0,e.placement=E,e.reset=!0)}}var $8={name:"flip",enabled:!0,phase:"main",fn:z8,requiresIfExists:["offset"],data:{_skip:!1}};function OS(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function LS(t){return[xi,Zi,qi,Ti].some(function(e){return t[e]>=0})}function W8(t){var e=t.state,n=t.name,i=e.rects.reference,r=e.rects.popper,a=e.modifiersData.preventOverflow,d=lu(e,{elementContext:"reference"}),s=lu(e,{altBoundary:!0}),o=OS(d,i),c=OS(s,r,a),h=LS(o),l=LS(c);e.modifiersData[n]={referenceClippingOffsets:o,popperEscapeOffsets:c,isReferenceHidden:h,hasPopperEscaped:l},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":h,"data-popper-escaped":l})}var G8={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:W8};function j8(t,e,n){var i=Rr(t),r=[Ti,xi].indexOf(i)>=0?-1:1,a=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,d=a[0],s=a[1];return d=d||0,s=(s||0)*r,[Ti,Zi].indexOf(i)>=0?{x:s,y:d}:{x:d,y:s}}function X8(t){var e=t.state,n=t.options,i=t.name,r=n.offset,a=r===void 0?[0,0]:r,d=ha.reduce(function(h,l){return h[l]=j8(l,e.rects,a),h},{}),s=d[e.placement],o=s.x,c=s.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=o,e.modifiersData.popperOffsets.y+=c),e.modifiersData[i]=d}var K8={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:X8};function Y8(t){var e=t.state,n=t.name;e.modifiersData[n]=FT({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var BT={name:"popperOffsets",enabled:!0,phase:"read",fn:Y8,data:{}};function q8(t){return t==="x"?"y":"x"}function Z8(t){var e=t.state,n=t.options,i=t.name,r=n.mainAxis,a=r===void 0?!0:r,d=n.altAxis,s=d===void 0?!1:d,o=n.boundary,c=n.rootBoundary,h=n.altBoundary,l=n.padding,u=n.tether,f=u===void 0?!0:u,m=n.tetherOffset,g=m===void 0?0:m,p=lu(e,{boundary:o,rootBoundary:c,padding:l,altBoundary:h}),v=Rr(e.placement),b=Ll(e.placement),_=!b,S=qv(v),w=q8(S),C=e.modifiersData.popperOffsets,x=e.rects.reference,M=e.rects.popper,E=typeof g=="function"?g(Object.assign({},e.rects,{placement:e.placement})):g,A=typeof E=="number"?{mainAxis:E,altAxis:E}:Object.assign({mainAxis:0,altAxis:0},E),O=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,D={x:0,y:0};if(C){if(a){var L,U=S==="y"?xi:Ti,j=S==="y"?qi:Zi,V=S==="y"?"height":"width",k=C[S],F=k+p[U],T=k-p[j],P=f?-M[V]/2:0,H=b===kl?x[V]:M[V],N=b===kl?-M[V]:-x[V],G=e.elements.arrow,$=f&&G?Yv(G):{width:0,height:0},z=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:PT(),Z=z[U],W=z[j],te=Ic(0,x[V],$[V]),ie=_?x[V]/2-P-te-Z-A.mainAxis:H-te-Z-A.mainAxis,re=_?-x[V]/2+P+te+W+A.mainAxis:N+te+W+A.mainAxis,_e=e.elements.arrow&&Fu(e.elements.arrow),Pe=_e?S==="y"?_e.clientTop||0:_e.clientLeft||0:0,K=(L=O==null?void 0:O[S])!=null?L:0,Q=k+ie-K-Pe,fe=k+re-K,ge=Ic(f?Lf(F,Q):F,k,f?Ko(T,fe):T);C[S]=ge,D[S]=ge-k}if(s){var se,me=S==="x"?xi:Ti,be=S==="x"?qi:Zi,Me=C[w],Ee=w==="y"?"height":"width",X=Me+p[me],Y=Me-p[be],le=[xi,Ti].indexOf(v)!==-1,Ce=(se=O==null?void 0:O[w])!=null?se:0,Re=le?X:Me-x[Ee]-M[Ee]-Ce+A.altAxis,Ne=le?Me+x[Ee]+M[Ee]-Ce-A.altAxis:Y,he=f&&le?x8(Re,Me,Ne):Ic(f?Re:X,Me,f?Ne:Y);C[w]=he,D[w]=he-Me}e.modifiersData[i]=D}}var J8={name:"preventOverflow",enabled:!0,phase:"main",fn:Z8,requiresIfExists:["offset"]};function Q8(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function e6(t){return t===Sr(t)||!ji(t)?Zv(t):Q8(t)}function t6(t){var e=t.getBoundingClientRect(),n=Pl(e.width)/t.offsetWidth||1,i=Pl(e.height)/t.offsetHeight||1;return n!==1||i!==1}function n6(t,e,n){n===void 0&&(n=!1);var i=ji(e),r=ji(e)&&t6(e),a=uo(e),d=Ol(t,r),s={scrollLeft:0,scrollTop:0},o={x:0,y:0};return(i||!i&&!n)&&((Dr(e)!=="body"||Qv(a))&&(s=e6(e)),ji(e)?(o=Ol(e,!0),o.x+=e.clientLeft,o.y+=e.clientTop):a&&(o.x=Jv(a))),{x:d.left+s.scrollLeft-o.x,y:d.top+s.scrollTop-o.y,width:d.width,height:d.height}}function i6(t){var e=new Map,n=new Set,i=[];t.forEach(function(a){e.set(a.name,a)});function r(a){n.add(a.name);var d=[].concat(a.requires||[],a.requiresIfExists||[]);d.forEach(function(s){if(!n.has(s)){var o=e.get(s);o&&r(o)}}),i.push(a)}return t.forEach(function(a){n.has(a.name)||r(a)}),i}function r6(t){var e=i6(t);return b8.reduce(function(n,i){return n.concat(e.filter(function(r){return r.phase===i}))},[])}function s6(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function o6(t){var e=t.reduce(function(n,i){var r=n[i.name];return n[i.name]=r?Object.assign({},r,i,{options:Object.assign({},r.options,i.options),data:Object.assign({},r.data,i.data)}):i,n},{});return Object.keys(e).map(function(n){return e[n]})}var IS={placement:"bottom",modifiers:[],strategy:"absolute"};function DS(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function e0(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,i=n===void 0?[]:n,r=e.defaultOptions,a=r===void 0?IS:r;return function(d,s,o){o===void 0&&(o=a);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},IS,a),modifiersData:{},elements:{reference:d,popper:s},attributes:{},styles:{}},h=[],l=!1,u={state:c,setOptions:function(g){var p=typeof g=="function"?g(c.options):g;m(),c.options=Object.assign({},a,c.options,p),c.scrollParents={reference:Rl(d)?Dc(d):d.contextElement?Dc(d.contextElement):[],popper:Dc(s)};var v=r6(o6([].concat(i,c.options.modifiers)));return c.orderedModifiers=v.filter(function(b){return b.enabled}),f(),u.update()},forceUpdate:function(){if(!l){var g=c.elements,p=g.reference,v=g.popper;if(DS(p,v)){c.rects={reference:n6(p,Fu(v),c.options.strategy==="fixed"),popper:Yv(v)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(M){return c.modifiersData[M.name]=Object.assign({},M.data)});for(var b=0;b<c.orderedModifiers.length;b++){if(c.reset===!0){c.reset=!1,b=-1;continue}var _=c.orderedModifiers[b],S=_.fn,w=_.options,C=w===void 0?{}:w,x=_.name;typeof S=="function"&&(c=S({state:c,options:C,name:x,instance:u})||c)}}}},update:s6(function(){return new Promise(function(g){u.forceUpdate(),g(c)})}),destroy:function(){m(),l=!0}};if(!DS(d,s))return u;u.setOptions(o).then(function(g){!l&&o.onFirstUpdate&&o.onFirstUpdate(g)});function f(){c.orderedModifiers.forEach(function(g){var p=g.name,v=g.options,b=v===void 0?{}:v,_=g.effect;if(typeof _=="function"){var S=_({state:c,name:p,instance:u,options:b}),w=function(){};h.push(S||w)}})}function m(){h.forEach(function(g){return g()}),h=[]}return u}}e0();var a6=[DT,BT,IT,kT];e0({defaultModifiers:a6});var l6=[DT,BT,IT,kT,K8,$8,J8,A8,G8],UT=e0({defaultModifiers:l6});const c6=(t,e,n={})=>{const i={name:"updateState",enabled:!0,phase:"write",fn:({state:o})=>{const c=u6(o);Object.assign(d.value,c)},requires:["computeStyles"]},r=R(()=>{const{onFirstUpdate:o,placement:c,strategy:h,modifiers:l}=y(n);return{onFirstUpdate:o,placement:c||"bottom",strategy:h||"absolute",modifiers:[...l||[],i,{name:"applyStyles",enabled:!1}]}}),a=Jt(),d=q({styles:{popper:{position:y(r).strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),s=()=>{a.value&&(a.value.destroy(),a.value=void 0)};return Be(r,o=>{const c=y(a);c&&c.setOptions(o)},{deep:!0}),Be([t,e],([o,c])=>{s(),!(!o||!c)&&(a.value=UT(o,c,y(r)))}),rn(()=>{s()}),{state:R(()=>{var o;return{...((o=y(a))==null?void 0:o.state)||{}}}),styles:R(()=>y(d).styles),attributes:R(()=>y(d).attributes),update:()=>{var o;return(o=y(a))==null?void 0:o.update()},forceUpdate:()=>{var o;return(o=y(a))==null?void 0:o.forceUpdate()},instanceRef:R(()=>y(a))}};function u6(t){const e=Object.keys(t.elements),n=Pf(e.map(r=>[r,t.styles[r]||{}])),i=Pf(e.map(r=>[r,t.attributes[r]]));return{styles:n,attributes:i}}const t0=t=>{if(!t)return{onClick:Ht,onMousedown:Ht,onMouseup:Ht};let e=!1,n=!1;return{onClick:d=>{e&&n&&t(d),e=n=!1},onMousedown:d=>{e=d.target===d.currentTarget},onMouseup:d=>{n=d.target===d.currentTarget}}},d6=(t,e=0)=>{if(e===0)return t;const n=q(!1);let i=0;const r=()=>{i&&clearTimeout(i),i=window.setTimeout(()=>{n.value=t.value},e)};return mt(r),Be(()=>t.value,a=>{a?r():n.value=a}),n};function NS(){let t;const e=(i,r)=>{n(),t=window.setTimeout(i,r)},n=()=>window.clearTimeout(t);return fh(()=>n()),{registerTimeout:e,cancelTimeout:n}}const FS={prefix:Math.floor(Math.random()*1e4),current:0},f6=Symbol("elIdInjection"),VT=()=>vt()?Je(f6,FS):FS,Ji=t=>{const e=VT(),n=jv();return R(()=>y(t)||`${n.value}-id-${e.prefix}-${e.current++}`)};let Va=[];const BS=t=>{const e=t;e.key===rt.esc&&Va.forEach(n=>n(e))},h6=t=>{mt(()=>{Va.length===0&&document.addEventListener("keydown",BS),kt&&Va.push(t)}),rn(()=>{Va=Va.filter(e=>e!==t),Va.length===0&&kt&&document.removeEventListener("keydown",BS)})};let US;const HT=()=>{const t=jv(),e=VT(),n=R(()=>`${t.value}-popper-container-${e.prefix}`),i=R(()=>`#${n.value}`);return{id:n,selector:i}},p6=t=>{const e=document.createElement("div");return e.id=t,document.body.appendChild(e),e},m6=()=>{const{id:t,selector:e}=HT();return ih(()=>{kt&&!US&&!document.body.querySelector(e.value)&&(US=p6(t.value))}),{id:t,selector:e}},g6=Xe({showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0}}),zT=({showAfter:t,hideAfter:e,autoClose:n,open:i,close:r})=>{const{registerTimeout:a}=NS(),{registerTimeout:d,cancelTimeout:s}=NS();return{onOpen:h=>{a(()=>{i(h);const l=y(n);at(l)&&l>0&&d(()=>{r(h)},l)},y(t))},onClose:h=>{s(),a(()=>{r(h)},y(e))}}},$T=Symbol("elForwardRef"),v6=t=>{xt($T,{setForwardRef:n=>{t.value=n}})},y6=t=>({mounted(e){t(e)},updated(e){t(e)},unmounted(){t(null)}}),VS=q(0),WT=2e3,GT=Symbol("zIndexContextKey"),Kl=t=>{const e=t||Je(GT,void 0),n=R(()=>{const a=y(e);return at(a)?a:WT}),i=R(()=>n.value+VS.value);return{initialZIndex:n,currentZIndex:i,nextZIndex:()=>(VS.value++,i.value)}},cu=Math.min,sl=Math.max,If=Math.round,no=t=>({x:t,y:t});function b6(t,e,n){return sl(t,cu(e,n))}function jT(t,e){return typeof t=="function"?t(e):t}function n0(t){return t.split("-")[0]}function i0(t){return t.split("-")[1]}function _6(t){return t==="x"?"y":"x"}function XT(t){return t==="y"?"height":"width"}function r0(t){return["top","bottom"].includes(n0(t))?"y":"x"}function KT(t){return _6(r0(t))}function S6(t){return{top:0,right:0,bottom:0,left:0,...t}}function w6(t){return typeof t!="number"?S6(t):{top:t,right:t,bottom:t,left:t}}function YT(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}function HS(t,e,n){let{reference:i,floating:r}=t;const a=r0(e),d=KT(e),s=XT(d),o=n0(e),c=a==="y",h=i.x+i.width/2-r.width/2,l=i.y+i.height/2-r.height/2,u=i[s]/2-r[s]/2;let f;switch(o){case"top":f={x:h,y:i.y-r.height};break;case"bottom":f={x:h,y:i.y+i.height};break;case"right":f={x:i.x+i.width,y:l};break;case"left":f={x:i.x-r.width,y:l};break;default:f={x:i.x,y:i.y}}switch(i0(e)){case"start":f[d]-=u*(n&&c?-1:1);break;case"end":f[d]+=u*(n&&c?-1:1);break}return f}const C6=async(t,e,n)=>{const{placement:i="bottom",strategy:r="absolute",middleware:a=[],platform:d}=n,s=a.filter(Boolean),o=await(d.isRTL==null?void 0:d.isRTL(e));let c=await d.getElementRects({reference:t,floating:e,strategy:r}),{x:h,y:l}=HS(c,i,o),u=i,f={},m=0;for(let g=0;g<s.length;g++){const{name:p,fn:v}=s[g],{x:b,y:_,data:S,reset:w}=await v({x:h,y:l,initialPlacement:i,placement:u,strategy:r,middlewareData:f,rects:c,platform:d,elements:{reference:t,floating:e}});h=b??h,l=_??l,f={...f,[p]:{...f[p],...S}},w&&m<=50&&(m++,typeof w=="object"&&(w.placement&&(u=w.placement),w.rects&&(c=w.rects===!0?await d.getElementRects({reference:t,floating:e,strategy:r}):w.rects),{x:h,y:l}=HS(c,u,o)),g=-1)}return{x:h,y:l,placement:u,strategy:r,middlewareData:f}},x6=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:i,placement:r,rects:a,platform:d,elements:s,middlewareData:o}=e,{element:c,padding:h=0}=jT(t,e)||{};if(c==null)return{};const l=w6(h),u={x:n,y:i},f=KT(r),m=XT(f),g=await d.getDimensions(c),p=f==="y",v=p?"top":"left",b=p?"bottom":"right",_=p?"clientHeight":"clientWidth",S=a.reference[m]+a.reference[f]-u[f]-a.floating[m],w=u[f]-a.reference[f],C=await(d.getOffsetParent==null?void 0:d.getOffsetParent(c));let x=C?C[_]:0;(!x||!await(d.isElement==null?void 0:d.isElement(C)))&&(x=s.floating[_]||a.floating[m]);const M=S/2-w/2,E=x/2-g[m]/2-1,A=cu(l[v],E),O=cu(l[b],E),D=A,L=x-g[m]-O,U=x/2-g[m]/2+M,j=b6(D,U,L),V=!o.arrow&&i0(r)!=null&&U!==j&&a.reference[m]/2-(U<D?A:O)-g[m]/2<0,k=V?U<D?U-D:U-L:0;return{[f]:u[f]+k,data:{[f]:j,centerOffset:U-j-k,...V&&{alignmentOffset:k}},reset:V}}});async function T6(t,e){const{placement:n,platform:i,elements:r}=t,a=await(i.isRTL==null?void 0:i.isRTL(r.floating)),d=n0(n),s=i0(n),o=r0(n)==="y",c=["left","top"].includes(d)?-1:1,h=a&&o?-1:1,l=jT(e,t);let{mainAxis:u,crossAxis:f,alignmentAxis:m}=typeof l=="number"?{mainAxis:l,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...l};return s&&typeof m=="number"&&(f=s==="end"?m*-1:m),o?{x:f*h,y:u*c}:{x:u*c,y:f*h}}const E6=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,i;const{x:r,y:a,placement:d,middlewareData:s}=e,o=await T6(e,t);return d===((n=s.offset)==null?void 0:n.placement)&&(i=s.arrow)!=null&&i.alignmentOffset?{}:{x:r+o.x,y:a+o.y,data:{...o,placement:d}}}}};function io(t){return qT(t)?(t.nodeName||"").toLowerCase():"#document"}function Ni(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function fo(t){var e;return(e=(qT(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function qT(t){return t instanceof Node||t instanceof Ni(t).Node}function ms(t){return t instanceof Element||t instanceof Ni(t).Element}function Nr(t){return t instanceof HTMLElement||t instanceof Ni(t).HTMLElement}function zS(t){return typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Ni(t).ShadowRoot}function Bu(t){const{overflow:e,overflowX:n,overflowY:i,display:r}=Qi(t);return/auto|scroll|overlay|hidden|clip/.test(e+i+n)&&!["inline","contents"].includes(r)}function M6(t){return["table","td","th"].includes(io(t))}function s0(t){const e=o0(),n=Qi(t);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(i=>(n.willChange||"").includes(i))||["paint","layout","strict","content"].some(i=>(n.contain||"").includes(i))}function A6(t){let e=Il(t);for(;Nr(e)&&!Ah(e);){if(s0(e))return e;e=Il(e)}return null}function o0(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Ah(t){return["html","body","#document"].includes(io(t))}function Qi(t){return Ni(t).getComputedStyle(t)}function kh(t){return ms(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function Il(t){if(io(t)==="html")return t;const e=t.assignedSlot||t.parentNode||zS(t)&&t.host||fo(t);return zS(e)?e.host:e}function ZT(t){const e=Il(t);return Ah(e)?t.ownerDocument?t.ownerDocument.body:t.body:Nr(e)&&Bu(e)?e:ZT(e)}function Vm(t,e,n){var i;e===void 0&&(e=[]),n===void 0&&(n=!0);const r=ZT(t),a=r===((i=t.ownerDocument)==null?void 0:i.body),d=Ni(r);return a?e.concat(d,d.visualViewport||[],Bu(r)?r:[],d.frameElement&&n?Vm(d.frameElement):[]):e.concat(r,Vm(r,[],n))}function JT(t){const e=Qi(t);let n=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const r=Nr(t),a=r?t.offsetWidth:n,d=r?t.offsetHeight:i,s=If(n)!==a||If(i)!==d;return s&&(n=a,i=d),{width:n,height:i,$:s}}function QT(t){return ms(t)?t:t.contextElement}function ol(t){const e=QT(t);if(!Nr(e))return no(1);const n=e.getBoundingClientRect(),{width:i,height:r,$:a}=JT(e);let d=(a?If(n.width):n.width)/i,s=(a?If(n.height):n.height)/r;return(!d||!Number.isFinite(d))&&(d=1),(!s||!Number.isFinite(s))&&(s=1),{x:d,y:s}}const k6=no(0);function eE(t){const e=Ni(t);return!o0()||!e.visualViewport?k6:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function R6(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Ni(t)?!1:e}function uu(t,e,n,i){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=t.getBoundingClientRect(),a=QT(t);let d=no(1);e&&(i?ms(i)&&(d=ol(i)):d=ol(t));const s=R6(a,n,i)?eE(a):no(0);let o=(r.left+s.x)/d.x,c=(r.top+s.y)/d.y,h=r.width/d.x,l=r.height/d.y;if(a){const u=Ni(a),f=i&&ms(i)?Ni(i):i;let m=u,g=m.frameElement;for(;g&&i&&f!==m;){const p=ol(g),v=g.getBoundingClientRect(),b=Qi(g),_=v.left+(g.clientLeft+parseFloat(b.paddingLeft))*p.x,S=v.top+(g.clientTop+parseFloat(b.paddingTop))*p.y;o*=p.x,c*=p.y,h*=p.x,l*=p.y,o+=_,c+=S,m=Ni(g),g=m.frameElement}}return YT({width:h,height:l,x:o,y:c})}const P6=[":popover-open",":modal"];function tE(t){return P6.some(e=>{try{return t.matches(e)}catch{return!1}})}function O6(t){let{elements:e,rect:n,offsetParent:i,strategy:r}=t;const a=r==="fixed",d=fo(i),s=e?tE(e.floating):!1;if(i===d||s&&a)return n;let o={scrollLeft:0,scrollTop:0},c=no(1);const h=no(0),l=Nr(i);if((l||!l&&!a)&&((io(i)!=="body"||Bu(d))&&(o=kh(i)),Nr(i))){const u=uu(i);c=ol(i),h.x=u.x+i.clientLeft,h.y=u.y+i.clientTop}return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-o.scrollLeft*c.x+h.x,y:n.y*c.y-o.scrollTop*c.y+h.y}}function L6(t){return Array.from(t.getClientRects())}function nE(t){return uu(fo(t)).left+kh(t).scrollLeft}function I6(t){const e=fo(t),n=kh(t),i=t.ownerDocument.body,r=sl(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),a=sl(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let d=-n.scrollLeft+nE(t);const s=-n.scrollTop;return Qi(i).direction==="rtl"&&(d+=sl(e.clientWidth,i.clientWidth)-r),{width:r,height:a,x:d,y:s}}function D6(t,e){const n=Ni(t),i=fo(t),r=n.visualViewport;let a=i.clientWidth,d=i.clientHeight,s=0,o=0;if(r){a=r.width,d=r.height;const c=o0();(!c||c&&e==="fixed")&&(s=r.offsetLeft,o=r.offsetTop)}return{width:a,height:d,x:s,y:o}}function N6(t,e){const n=uu(t,!0,e==="fixed"),i=n.top+t.clientTop,r=n.left+t.clientLeft,a=Nr(t)?ol(t):no(1),d=t.clientWidth*a.x,s=t.clientHeight*a.y,o=r*a.x,c=i*a.y;return{width:d,height:s,x:o,y:c}}function $S(t,e,n){let i;if(e==="viewport")i=D6(t,n);else if(e==="document")i=I6(fo(t));else if(ms(e))i=N6(e,n);else{const r=eE(t);i={...e,x:e.x-r.x,y:e.y-r.y}}return YT(i)}function iE(t,e){const n=Il(t);return n===e||!ms(n)||Ah(n)?!1:Qi(n).position==="fixed"||iE(n,e)}function F6(t,e){const n=e.get(t);if(n)return n;let i=Vm(t,[],!1).filter(s=>ms(s)&&io(s)!=="body"),r=null;const a=Qi(t).position==="fixed";let d=a?Il(t):t;for(;ms(d)&&!Ah(d);){const s=Qi(d),o=s0(d);!o&&s.position==="fixed"&&(r=null),(a?!o&&!r:!o&&s.position==="static"&&!!r&&["absolute","fixed"].includes(r.position)||Bu(d)&&!o&&iE(t,d))?i=i.filter(h=>h!==d):r=s,d=Il(d)}return e.set(t,i),i}function B6(t){let{element:e,boundary:n,rootBoundary:i,strategy:r}=t;const d=[...n==="clippingAncestors"?F6(e,this._c):[].concat(n),i],s=d[0],o=d.reduce((c,h)=>{const l=$S(e,h,r);return c.top=sl(l.top,c.top),c.right=cu(l.right,c.right),c.bottom=cu(l.bottom,c.bottom),c.left=sl(l.left,c.left),c},$S(e,s,r));return{width:o.right-o.left,height:o.bottom-o.top,x:o.left,y:o.top}}function U6(t){const{width:e,height:n}=JT(t);return{width:e,height:n}}function V6(t,e,n){const i=Nr(e),r=fo(e),a=n==="fixed",d=uu(t,!0,a,e);let s={scrollLeft:0,scrollTop:0};const o=no(0);if(i||!i&&!a)if((io(e)!=="body"||Bu(r))&&(s=kh(e)),i){const l=uu(e,!0,a,e);o.x=l.x+e.clientLeft,o.y=l.y+e.clientTop}else r&&(o.x=nE(r));const c=d.left+s.scrollLeft-o.x,h=d.top+s.scrollTop-o.y;return{x:c,y:h,width:d.width,height:d.height}}function WS(t,e){return!Nr(t)||Qi(t).position==="fixed"?null:e?e(t):t.offsetParent}function rE(t,e){const n=Ni(t);if(!Nr(t)||tE(t))return n;let i=WS(t,e);for(;i&&M6(i)&&Qi(i).position==="static";)i=WS(i,e);return i&&(io(i)==="html"||io(i)==="body"&&Qi(i).position==="static"&&!s0(i))?n:i||A6(t)||n}const H6=async function(t){const e=this.getOffsetParent||rE,n=this.getDimensions;return{reference:V6(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,...await n(t.floating)}}};function z6(t){return Qi(t).direction==="rtl"}const $6={convertOffsetParentRelativeRectToViewportRelativeRect:O6,getDocumentElement:fo,getClippingRect:B6,getOffsetParent:rE,getElementRects:H6,getClientRects:L6,getDimensions:U6,getScale:ol,isElement:ms,isRTL:z6},W6=x6,G6=(t,e,n)=>{const i=new Map,r={platform:$6,...n},a={...r.platform,_c:i};return C6(t,e,{...r,platform:a})};Xe({});const j6=t=>{if(!kt)return;if(!t)return t;const e=Li(t);return e||(en(t)?e:t)},X6=({middleware:t,placement:e,strategy:n})=>{const i=q(),r=q(),a=q(),d=q(),s=q({}),o={x:a,y:d,placement:e,strategy:n,middlewareData:s},c=async()=>{if(!kt)return;const h=j6(i),l=Li(r);if(!h||!l)return;const u=await G6(h,l,{placement:y(e),strategy:y(n),middleware:y(t)});su(o).forEach(f=>{o[f].value=u[f]})};return mt(()=>{Di(()=>{c()})}),{...o,update:c,referenceRef:i,contentRef:r}},K6=({arrowRef:t,padding:e})=>({name:"arrow",options:{element:t,padding:e},fn(n){const i=y(t);return i?W6({element:i,padding:e}).fn(n):{}}});function Y6(t){const e=q();function n(){if(t.value==null)return;const{selectionStart:r,selectionEnd:a,value:d}=t.value;if(r==null||a==null)return;const s=d.slice(0,Math.max(0,r)),o=d.slice(Math.max(0,a));e.value={selectionStart:r,selectionEnd:a,value:d,beforeTxt:s,afterTxt:o}}function i(){if(t.value==null||e.value==null)return;const{value:r}=t.value,{beforeTxt:a,afterTxt:d,selectionStart:s}=e.value;if(a==null||d==null||s==null)return;let o=r.length;if(r.endsWith(d))o=r.length-d.length;else if(r.startsWith(a))o=a.length;else{const c=a[s-1],h=r.indexOf(c,s-1);h!==-1&&(o=h+1)}t.value.setSelectionRange(o,o)}return[n,i]}const q6=(t,e,n)=>rl(t.subTree).filter(a=>{var d;return un(a)&&((d=a.type)==null?void 0:d.name)===e&&!!a.component}).map(a=>a.component.uid).map(a=>n[a]).filter(a=>!!a),a0=(t,e)=>{const n={},i=Jt([]);return{children:i,addChild:d=>{n[d.uid]=d,i.value=q6(t,e,n)},removeChild:d=>{delete n[d],i.value=i.value.filter(s=>s.uid!==d)}}},Xn=_r({type:String,values:Hr,required:!1}),sE=Symbol("size"),Z6=()=>{const t=Je(sE,{});return R(()=>y(t.size)||"")},oE=Symbol(),Df=q();function Rh(t,e=void 0){const n=vt()?Je(oE,Df):Df;return t?R(()=>{var i,r;return(r=(i=n.value)==null?void 0:i[t])!=null?r:e}):n}function Ph(t,e){const n=Rh(),i=Ue(t,R(()=>{var s;return((s=n.value)==null?void 0:s.namespace)||Of})),r=Pt(R(()=>{var s;return(s=n.value)==null?void 0:s.locale})),a=Kl(R(()=>{var s;return((s=n.value)==null?void 0:s.zIndex)||WT})),d=R(()=>{var s;return y(e)||((s=n.value)==null?void 0:s.size)||""});return l0(R(()=>y(n)||{})),{ns:i,locale:r,zIndex:a,size:d}}const l0=(t,e,n=!1)=>{var i;const r=!!vt(),a=r?Rh():void 0,d=(i=e==null?void 0:e.provide)!=null?i:r?xt:void 0;if(!d)return;const s=R(()=>{const o=y(t);return a!=null&&a.value?J6(a.value,o):o});return d(oE,s),d(CT,R(()=>s.value.locale)),d(xT,R(()=>s.value.namespace)),d(GT,R(()=>s.value.zIndex)),d(sE,{size:R(()=>s.value.size||"")}),(n||!Df.value)&&(Df.value=s.value),s},J6=(t,e)=>{var n;const i=[...new Set([...su(t),...su(e)])],r={};for(const a of i)r[a]=(n=e[a])!=null?n:t[a];return r},Q6=Xe({a11y:{type:Boolean,default:!0},locale:{type:Ae(Object)},size:Xn,button:{type:Ae(Object)},experimentalFeatures:{type:Ae(Object)},keyboardNavigation:{type:Boolean,default:!0},message:{type:Ae(Object)},zIndex:Number,namespace:{type:String,default:"el"}}),Hm={},eW=de({name:"ElConfigProvider",props:Q6,setup(t,{slots:e}){Be(()=>t.message,i=>{Object.assign(Hm,i??{})},{immediate:!0,deep:!0});const n=l0(t);return()=>Le(e,"default",{config:n==null?void 0:n.value})}}),tW=yt(eW),nW="2.3.6",iW=(t=[])=>({version:nW,install:(n,i)=>{n[TS]||(n[TS]=!0,t.forEach(r=>n.use(r)),i&&l0(i,n,!0))}}),rW=Xe({zIndex:{type:Ae([Number,String]),default:100},target:{type:String,default:""},offset:{type:Number,default:0},position:{type:String,values:["top","bottom"],default:"top"}}),sW={scroll:({scrollTop:t,fixed:e})=>at(t)&&xn(e),[tn]:t=>xn(t)};var je=(t,e)=>{const n=t.__vccOpts||t;for(const[i,r]of e)n[i]=r;return n};const aE="ElAffix",oW=de({name:aE}),aW=de({...oW,props:rW,emits:sW,setup(t,{expose:e,emit:n}){const i=t,r=Ue("affix"),a=Jt(),d=Jt(),s=Jt(),{height:o}=e4(),{height:c,width:h,top:l,bottom:u,update:f}=z_(d,{windowScroll:!1}),m=z_(a),g=q(!1),p=q(0),v=q(0),b=R(()=>({height:g.value?`${c.value}px`:"",width:g.value?`${h.value}px`:""})),_=R(()=>{if(!g.value)return{};const C=i.offset?bn(i.offset):0;return{height:`${c.value}px`,width:`${h.value}px`,top:i.position==="top"?C:"",bottom:i.position==="bottom"?C:"",transform:v.value?`translateY(${v.value}px)`:"",zIndex:i.zIndex}}),S=()=>{if(s.value)if(p.value=s.value instanceof Window?document.documentElement.scrollTop:s.value.scrollTop||0,i.position==="top")if(i.target){const C=m.bottom.value-i.offset-c.value;g.value=i.offset>l.value&&m.bottom.value>0,v.value=C<0?C:0}else g.value=i.offset>l.value;else if(i.target){const C=o.value-m.top.value-i.offset-c.value;g.value=o.value-i.offset<u.value&&o.value>m.top.value,v.value=C<0?-C:0}else g.value=o.value-i.offset<u.value},w=()=>{f(),n("scroll",{scrollTop:p.value,fixed:g.value})};return Be(g,C=>n("change",C)),mt(()=>{var C;i.target?(a.value=(C=document.querySelector(i.target))!=null?C:void 0,a.value||Tn(aE,`Target is not existed: ${i.target}`)):a.value=document.documentElement,s.value=Vv(d.value,!0),f()}),cn(s,"scroll",w),Di(S),e({update:S,updateRoot:f}),(C,x)=>(I(),ne("div",{ref_key:"root",ref:d,class:B(y(r).b()),style:nt(y(b))},[ae("div",{class:B({[y(r).m("fixed")]:g.value}),style:nt(y(_))},[Le(C.$slots,"default")],6)],6))}});var lW=je(aW,[["__file","/home/runner/work/element-plus/element-plus/packages/components/affix/src/affix.vue"]]);const cW=yt(lW),uW=Xe({size:{type:Ae([Number,String])},color:{type:String}}),dW=de({name:"ElIcon",inheritAttrs:!1}),fW=de({...dW,props:uW,setup(t){const e=t,n=Ue("icon"),i=R(()=>{const{size:r,color:a}=e;return!r&&!a?{}:{fontSize:Un(r)?void 0:bn(r),"--color":a}});return(r,a)=>(I(),ne("i",St({class:y(n).b(),style:y(i)},r.$attrs),[Le(r.$slots,"default")],16))}});var hW=je(fW,[["__file","/home/runner/work/element-plus/element-plus/packages/components/icon/src/icon.vue"]]);const tt=yt(hW),pW=["light","dark"],mW=Xe({title:{type:String,default:""},description:{type:String,default:""},type:{type:String,values:su(to),default:"info"},closable:{type:Boolean,default:!0},closeText:{type:String,default:""},showIcon:Boolean,center:Boolean,effect:{type:String,values:pW,default:"light"}}),gW={close:t=>t instanceof MouseEvent},vW=de({name:"ElAlert"}),yW=de({...vW,props:mW,emits:gW,setup(t,{emit:e}){const n=t,{Close:i}=Wv,r=Vn(),a=Ue("alert"),d=q(!0),s=R(()=>to[n.type]),o=R(()=>[a.e("icon"),{[a.is("big")]:!!n.description||!!r.default}]),c=R(()=>({[a.is("bold")]:n.description||r.default})),h=l=>{d.value=!1,e("close",l)};return(l,u)=>(I(),ke(wn,{name:y(a).b("fade"),persisted:""},{default:ve(()=>[pt(ae("div",{class:B([y(a).b(),y(a).m(l.type),y(a).is("center",l.center),y(a).is(l.effect)]),role:"alert"},[l.showIcon&&y(s)?(I(),ke(y(tt),{key:0,class:B(y(o))},{default:ve(()=>[(I(),ke(Ct(y(s))))]),_:1},8,["class"])):Te("v-if",!0),ae("div",{class:B(y(a).e("content"))},[l.title||l.$slots.title?(I(),ne("span",{key:0,class:B([y(a).e("title"),y(c)])},[Le(l.$slots,"title",{},()=>[Tt($e(l.title),1)])],2)):Te("v-if",!0),l.$slots.default||l.description?(I(),ne("p",{key:1,class:B(y(a).e("description"))},[Le(l.$slots,"default",{},()=>[Tt($e(l.description),1)])],2)):Te("v-if",!0),l.closable?(I(),ne(Qe,{key:2},[l.closeText?(I(),ne("div",{key:0,class:B([y(a).e("close-btn"),y(a).is("customed")]),onClick:h},$e(l.closeText),3)):(I(),ke(y(tt),{key:1,class:B(y(a).e("close-btn")),onClick:h},{default:ve(()=>[ue(y(i))]),_:1},8,["class"]))],64)):Te("v-if",!0)],2)],2),[[Dt,d.value]])]),_:3},8,["name"]))}});var bW=je(yW,[["__file","/home/runner/work/element-plus/element-plus/packages/components/alert/src/alert.vue"]]);const _W=yt(bW),pa=Symbol("formContextKey"),Fr=Symbol("formItemContextKey"),En=(t,e={})=>{const n=q(void 0),i=e.prop?n:MT("size"),r=e.global?n:Z6(),a=e.form?{size:void 0}:Je(pa,void 0),d=e.formItem?{size:void 0}:Je(Fr,void 0);return R(()=>i.value||y(t)||(d==null?void 0:d.size)||(a==null?void 0:a.size)||r.value||"")},Mi=t=>{const e=MT("disabled"),n=Je(pa,void 0);return R(()=>e.value||y(t)||(n==null?void 0:n.disabled)||!1)},gi=()=>{const t=Je(pa,void 0),e=Je(Fr,void 0);return{form:t,formItem:e}},ho=(t,{formItemContext:e,disableIdGeneration:n,disableIdManagement:i})=>{n||(n=q(!1)),i||(i=q(!1));const r=q();let a;const d=R(()=>{var s;return!!(!t.label&&e&&e.inputIds&&((s=e.inputIds)==null?void 0:s.length)<=1)});return mt(()=>{a=Be([ln(t,"id"),n],([s,o])=>{const c=s??(o?void 0:Ji().value);c!==r.value&&(e!=null&&e.removeInputId&&(r.value&&e.removeInputId(r.value),!(i!=null&&i.value)&&!o&&c&&e.addInputId(c)),r.value=c)},{immediate:!0})}),oo(()=>{a&&a(),e!=null&&e.removeInputId&&r.value&&e.removeInputId(r.value)}),{isLabeledByFormItem:d,inputId:r}},SW=Xe({size:{type:String,values:Hr},disabled:Boolean}),wW=Xe({...SW,model:Object,rules:{type:Ae(Object)},labelPosition:{type:String,values:["left","right","top"],default:"right"},requireAsteriskPosition:{type:String,values:["left","right"],default:"left"},labelWidth:{type:[String,Number],default:""},labelSuffix:{type:String,default:""},inline:Boolean,inlineMessage:Boolean,statusIcon:Boolean,showMessage:{type:Boolean,default:!0},validateOnRuleChange:{type:Boolean,default:!0},hideRequiredAsterisk:{type:Boolean,default:!1},scrollToError:Boolean,scrollIntoViewOptions:{type:[Object,Boolean]}}),CW={validate:(t,e,n)=>(Ze(t)||ct(t))&&xn(e)&&ct(n)};function xW(){const t=q([]),e=R(()=>{if(!t.value.length)return"0";const a=Math.max(...t.value);return a?`${a}px`:""});function n(a){const d=t.value.indexOf(a);return d===-1&&e.value,d}function i(a,d){if(a&&d){const s=n(d);t.value.splice(s,1,a)}else a&&t.value.push(a)}function r(a){const d=n(a);d>-1&&t.value.splice(d,1)}return{autoLabelWidth:e,registerLabelWidth:i,deregisterLabelWidth:r}}const Md=(t,e)=>{const n=El(e);return n.length>0?t.filter(i=>i.prop&&n.includes(i.prop)):t},TW="ElForm",EW=de({name:TW}),MW=de({...EW,props:wW,emits:CW,setup(t,{expose:e,emit:n}){const i=t,r=[],a=En(),d=Ue("form"),s=R(()=>{const{labelPosition:b,inline:_}=i;return[d.b(),d.m(a.value||"default"),{[d.m(`label-${b}`)]:b,[d.m("inline")]:_}]}),o=b=>{r.push(b)},c=b=>{b.prop&&r.splice(r.indexOf(b),1)},h=(b=[])=>{i.model&&Md(r,b).forEach(_=>_.resetField())},l=(b=[])=>{Md(r,b).forEach(_=>_.clearValidate())},u=R(()=>!!i.model),f=b=>{if(r.length===0)return[];const _=Md(r,b);return _.length?_:[]},m=async b=>p(void 0,b),g=async(b=[])=>{if(!u.value)return!1;const _=f(b);if(_.length===0)return!0;let S={};for(const w of _)try{await w.validate("")}catch(C){S={...S,...C}}return Object.keys(S).length===0?!0:Promise.reject(S)},p=async(b=[],_)=>{const S=!lt(_);try{const w=await g(b);return w===!0&&(_==null||_(w)),w}catch(w){if(w instanceof Error)throw w;const C=w;return i.scrollToError&&v(Object.keys(C)[0]),_==null||_(!1,C),S&&Promise.reject(C)}},v=b=>{var _;const S=Md(r,b)[0];S&&((_=S.$el)==null||_.scrollIntoView(i.scrollIntoViewOptions))};return Be(()=>i.rules,()=>{i.validateOnRuleChange&&m().catch(b=>void 0)},{deep:!0}),xt(pa,Ft({...Rn(i),emit:n,resetFields:h,clearValidate:l,validateField:p,addField:o,removeField:c,...xW()})),e({validate:m,validateField:p,resetFields:h,clearValidate:l,scrollToField:v}),(b,_)=>(I(),ne("form",{class:B(y(s))},[Le(b.$slots,"default")],2))}});var AW=je(MW,[["__file","/home/runner/work/element-plus/element-plus/packages/components/form/src/form.vue"]]);function No(){return No=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},No.apply(this,arguments)}function kW(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,du(t,e)}function zm(t){return zm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},zm(t)}function du(t,e){return du=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,r){return i.__proto__=r,i},du(t,e)}function RW(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Zd(t,e,n){return RW()?Zd=Reflect.construct.bind():Zd=function(r,a,d){var s=[null];s.push.apply(s,a);var o=Function.bind.apply(r,s),c=new o;return d&&du(c,d.prototype),c},Zd.apply(null,arguments)}function PW(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function $m(t){var e=typeof Map=="function"?new Map:void 0;return $m=function(i){if(i===null||!PW(i))return i;if(typeof i!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(i))return e.get(i);e.set(i,r)}function r(){return Zd(i,arguments,zm(this).constructor)}return r.prototype=Object.create(i.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),du(r,i)},$m(t)}var OW=/%[sdj%]/g,LW=function(){};function Wm(t){if(!t||!t.length)return null;var e={};return t.forEach(function(n){var i=n.field;e[i]=e[i]||[],e[i].push(n)}),e}function Ii(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];var r=0,a=n.length;if(typeof t=="function")return t.apply(null,n);if(typeof t=="string"){var d=t.replace(OW,function(s){if(s==="%%")return"%";if(r>=a)return s;switch(s){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch{return"[Circular]"}break;default:return s}});return d}return t}function IW(t){return t==="string"||t==="url"||t==="hex"||t==="email"||t==="date"||t==="pattern"}function In(t,e){return!!(t==null||e==="array"&&Array.isArray(t)&&!t.length||IW(e)&&typeof t=="string"&&!t)}function DW(t,e,n){var i=[],r=0,a=t.length;function d(s){i.push.apply(i,s||[]),r++,r===a&&n(i)}t.forEach(function(s){e(s,d)})}function GS(t,e,n){var i=0,r=t.length;function a(d){if(d&&d.length){n(d);return}var s=i;i=i+1,s<r?e(t[s],a):n([])}a([])}function NW(t){var e=[];return Object.keys(t).forEach(function(n){e.push.apply(e,t[n]||[])}),e}var jS=function(t){kW(e,t);function e(n,i){var r;return r=t.call(this,"Async Validation Error")||this,r.errors=n,r.fields=i,r}return e}($m(Error));function FW(t,e,n,i,r){if(e.first){var a=new Promise(function(u,f){var m=function(v){return i(v),v.length?f(new jS(v,Wm(v))):u(r)},g=NW(t);GS(g,n,m)});return a.catch(function(u){return u}),a}var d=e.firstFields===!0?Object.keys(t):e.firstFields||[],s=Object.keys(t),o=s.length,c=0,h=[],l=new Promise(function(u,f){var m=function(p){if(h.push.apply(h,p),c++,c===o)return i(h),h.length?f(new jS(h,Wm(h))):u(r)};s.length||(i(h),u(r)),s.forEach(function(g){var p=t[g];d.indexOf(g)!==-1?GS(p,n,m):DW(p,n,m)})});return l.catch(function(u){return u}),l}function BW(t){return!!(t&&t.message!==void 0)}function UW(t,e){for(var n=t,i=0;i<e.length;i++){if(n==null)return n;n=n[e[i]]}return n}function XS(t,e){return function(n){var i;return t.fullFields?i=UW(e,t.fullFields):i=e[n.field||t.fullField],BW(n)?(n.field=n.field||t.fullField,n.fieldValue=i,n):{message:typeof n=="function"?n():n,fieldValue:i,field:n.field||t.fullField}}}function KS(t,e){if(e){for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];typeof i=="object"&&typeof t[n]=="object"?t[n]=No({},t[n],i):t[n]=i}}return t}var lE=function(e,n,i,r,a,d){e.required&&(!i.hasOwnProperty(e.field)||In(n,d||e.type))&&r.push(Ii(a.messages.required,e.fullField))},VW=function(e,n,i,r,a){(/^\s+$/.test(n)||n==="")&&r.push(Ii(a.messages.whitespace,e.fullField))},Ad,HW=function(){if(Ad)return Ad;var t="[a-fA-F\\d:]",e=function(S){return S&&S.includeBoundaries?"(?:(?<=\\s|^)(?="+t+")|(?<="+t+")(?=\\s|$))":""},n="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",i="[a-fA-F\\d]{1,4}",r=(`
(?:
(?:`+i+":){7}(?:"+i+`|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:`+i+":){6}(?:"+n+"|:"+i+`|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:`+i+":){5}(?::"+n+"|(?::"+i+`){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:`+i+":){4}(?:(?::"+i+"){0,1}:"+n+"|(?::"+i+`){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:`+i+":){3}(?:(?::"+i+"){0,2}:"+n+"|(?::"+i+`){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:`+i+":){2}(?:(?::"+i+"){0,3}:"+n+"|(?::"+i+`){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:`+i+":){1}(?:(?::"+i+"){0,4}:"+n+"|(?::"+i+`){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::`+i+"){0,5}:"+n+"|(?::"+i+`){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`).replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),a=new RegExp("(?:^"+n+"$)|(?:^"+r+"$)"),d=new RegExp("^"+n+"$"),s=new RegExp("^"+r+"$"),o=function(S){return S&&S.exact?a:new RegExp("(?:"+e(S)+n+e(S)+")|(?:"+e(S)+r+e(S)+")","g")};o.v4=function(_){return _&&_.exact?d:new RegExp(""+e(_)+n+e(_),"g")},o.v6=function(_){return _&&_.exact?s:new RegExp(""+e(_)+r+e(_),"g")};var c="(?:(?:[a-z]+:)?//)",h="(?:\\S+(?::\\S*)?@)?",l=o.v4().source,u=o.v6().source,f="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",m="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",g="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",p="(?::\\d{2,5})?",v='(?:[/?#][^\\s"]*)?',b="(?:"+c+"|www\\.)"+h+"(?:localhost|"+l+"|"+u+"|"+f+m+g+")"+p+v;return Ad=new RegExp("(?:^"+b+"$)","i"),Ad},YS={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},_c={integer:function(e){return _c.number(e)&&parseInt(e,10)===e},float:function(e){return _c.number(e)&&!_c.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch{return!1}},date:function(e){return typeof e.getTime=="function"&&typeof e.getMonth=="function"&&typeof e.getYear=="function"&&!isNaN(e.getTime())},number:function(e){return isNaN(e)?!1:typeof e=="number"},object:function(e){return typeof e=="object"&&!_c.array(e)},method:function(e){return typeof e=="function"},email:function(e){return typeof e=="string"&&e.length<=320&&!!e.match(YS.email)},url:function(e){return typeof e=="string"&&e.length<=2048&&!!e.match(HW())},hex:function(e){return typeof e=="string"&&!!e.match(YS.hex)}},zW=function(e,n,i,r,a){if(e.required&&n===void 0){lE(e,n,i,r,a);return}var d=["integer","float","array","regexp","object","method","email","number","date","url","hex"],s=e.type;d.indexOf(s)>-1?_c[s](n)||r.push(Ii(a.messages.types[s],e.fullField,e.type)):s&&typeof n!==e.type&&r.push(Ii(a.messages.types[s],e.fullField,e.type))},$W=function(e,n,i,r,a){var d=typeof e.len=="number",s=typeof e.min=="number",o=typeof e.max=="number",c=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,h=n,l=null,u=typeof n=="number",f=typeof n=="string",m=Array.isArray(n);if(u?l="number":f?l="string":m&&(l="array"),!l)return!1;m&&(h=n.length),f&&(h=n.replace(c,"_").length),d?h!==e.len&&r.push(Ii(a.messages[l].len,e.fullField,e.len)):s&&!o&&h<e.min?r.push(Ii(a.messages[l].min,e.fullField,e.min)):o&&!s&&h>e.max?r.push(Ii(a.messages[l].max,e.fullField,e.max)):s&&o&&(h<e.min||h>e.max)&&r.push(Ii(a.messages[l].range,e.fullField,e.min,e.max))},Da="enum",WW=function(e,n,i,r,a){e[Da]=Array.isArray(e[Da])?e[Da]:[],e[Da].indexOf(n)===-1&&r.push(Ii(a.messages[Da],e.fullField,e[Da].join(", ")))},GW=function(e,n,i,r,a){if(e.pattern){if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(n)||r.push(Ii(a.messages.pattern.mismatch,e.fullField,n,e.pattern));else if(typeof e.pattern=="string"){var d=new RegExp(e.pattern);d.test(n)||r.push(Ii(a.messages.pattern.mismatch,e.fullField,n,e.pattern))}}},Xt={required:lE,whitespace:VW,type:zW,range:$W,enum:WW,pattern:GW},jW=function(e,n,i,r,a){var d=[],s=e.required||!e.required&&r.hasOwnProperty(e.field);if(s){if(In(n,"string")&&!e.required)return i();Xt.required(e,n,r,d,a,"string"),In(n,"string")||(Xt.type(e,n,r,d,a),Xt.range(e,n,r,d,a),Xt.pattern(e,n,r,d,a),e.whitespace===!0&&Xt.whitespace(e,n,r,d,a))}i(d)},XW=function(e,n,i,r,a){var d=[],s=e.required||!e.required&&r.hasOwnProperty(e.field);if(s){if(In(n)&&!e.required)return i();Xt.required(e,n,r,d,a),n!==void 0&&Xt.type(e,n,r,d,a)}i(d)},KW=function(e,n,i,r,a){var d=[],s=e.required||!e.required&&r.hasOwnProperty(e.field);if(s){if(n===""&&(n=void 0),In(n)&&!e.required)return i();Xt.required(e,n,r,d,a),n!==void 0&&(Xt.type(e,n,r,d,a),Xt.range(e,n,r,d,a))}i(d)},YW=function(e,n,i,r,a){var d=[],s=e.required||!e.required&&r.hasOwnProperty(e.field);if(s){if(In(n)&&!e.required)return i();Xt.required(e,n,r,d,a),n!==void 0&&Xt.type(e,n,r,d,a)}i(d)},qW=function(e,n,i,r,a){var d=[],s=e.required||!e.required&&r.hasOwnProperty(e.field);if(s){if(In(n)&&!e.required)return i();Xt.required(e,n,r,d,a),In(n)||Xt.type(e,n,r,d,a)}i(d)},ZW=function(e,n,i,r,a){var d=[],s=e.required||!e.required&&r.hasOwnProperty(e.field);if(s){if(In(n)&&!e.required)return i();Xt.required(e,n,r,d,a),n!==void 0&&(Xt.type(e,n,r,d,a),Xt.range(e,n,r,d,a))}i(d)},JW=function(e,n,i,r,a){var d=[],s=e.required||!e.required&&r.hasOwnProperty(e.field);if(s){if(In(n)&&!e.required)return i();Xt.required(e,n,r,d,a),n!==void 0&&(Xt.type(e,n,r,d,a),Xt.range(e,n,r,d,a))}i(d)},QW=function(e,n,i,r,a){var d=[],s=e.required||!e.required&&r.hasOwnProperty(e.field);if(s){if(n==null&&!e.required)return i();Xt.required(e,n,r,d,a,"array"),n!=null&&(Xt.type(e,n,r,d,a),Xt.range(e,n,r,d,a))}i(d)},eG=function(e,n,i,r,a){var d=[],s=e.required||!e.required&&r.hasOwnProperty(e.field);if(s){if(In(n)&&!e.required)return i();Xt.required(e,n,r,d,a),n!==void 0&&Xt.type(e,n,r,d,a)}i(d)},tG="enum",nG=function(e,n,i,r,a){var d=[],s=e.required||!e.required&&r.hasOwnProperty(e.field);if(s){if(In(n)&&!e.required)return i();Xt.required(e,n,r,d,a),n!==void 0&&Xt[tG](e,n,r,d,a)}i(d)},iG=function(e,n,i,r,a){var d=[],s=e.required||!e.required&&r.hasOwnProperty(e.field);if(s){if(In(n,"string")&&!e.required)return i();Xt.required(e,n,r,d,a),In(n,"string")||Xt.pattern(e,n,r,d,a)}i(d)},rG=function(e,n,i,r,a){var d=[],s=e.required||!e.required&&r.hasOwnProperty(e.field);if(s){if(In(n,"date")&&!e.required)return i();if(Xt.required(e,n,r,d,a),!In(n,"date")){var o;n instanceof Date?o=n:o=new Date(n),Xt.type(e,o,r,d,a),o&&Xt.range(e,o.getTime(),r,d,a)}}i(d)},sG=function(e,n,i,r,a){var d=[],s=Array.isArray(n)?"array":typeof n;Xt.required(e,n,r,d,a,s),i(d)},Vp=function(e,n,i,r,a){var d=e.type,s=[],o=e.required||!e.required&&r.hasOwnProperty(e.field);if(o){if(In(n,d)&&!e.required)return i();Xt.required(e,n,r,s,a,d),In(n,d)||Xt.type(e,n,r,s,a)}i(s)},oG=function(e,n,i,r,a){var d=[],s=e.required||!e.required&&r.hasOwnProperty(e.field);if(s){if(In(n)&&!e.required)return i();Xt.required(e,n,r,d,a)}i(d)},Nc={string:jW,method:XW,number:KW,boolean:YW,regexp:qW,integer:ZW,float:JW,array:QW,object:eG,enum:nG,pattern:iG,date:rG,url:Vp,hex:Vp,email:Vp,required:sG,any:oG};function Gm(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var jm=Gm(),Uu=function(){function t(n){this.rules=null,this._messages=jm,this.define(n)}var e=t.prototype;return e.define=function(i){var r=this;if(!i)throw new Error("Cannot configure a schema with no rules");if(typeof i!="object"||Array.isArray(i))throw new Error("Rules must be an object");this.rules={},Object.keys(i).forEach(function(a){var d=i[a];r.rules[a]=Array.isArray(d)?d:[d]})},e.messages=function(i){return i&&(this._messages=KS(Gm(),i)),this._messages},e.validate=function(i,r,a){var d=this;r===void 0&&(r={}),a===void 0&&(a=function(){});var s=i,o=r,c=a;if(typeof o=="function"&&(c=o,o={}),!this.rules||Object.keys(this.rules).length===0)return c&&c(null,s),Promise.resolve(s);function h(g){var p=[],v={};function b(S){if(Array.isArray(S)){var w;p=(w=p).concat.apply(w,S)}else p.push(S)}for(var _=0;_<g.length;_++)b(g[_]);p.length?(v=Wm(p),c(p,v)):c(null,s)}if(o.messages){var l=this.messages();l===jm&&(l=Gm()),KS(l,o.messages),o.messages=l}else o.messages=this.messages();var u={},f=o.keys||Object.keys(this.rules);f.forEach(function(g){var p=d.rules[g],v=s[g];p.forEach(function(b){var _=b;typeof _.transform=="function"&&(s===i&&(s=No({},s)),v=s[g]=_.transform(v)),typeof _=="function"?_={validator:_}:_=No({},_),_.validator=d.getValidationMethod(_),_.validator&&(_.field=g,_.fullField=_.fullField||g,_.type=d.getType(_),u[g]=u[g]||[],u[g].push({rule:_,value:v,source:s,field:g}))})});var m={};return FW(u,o,function(g,p){var v=g.rule,b=(v.type==="object"||v.type==="array")&&(typeof v.fields=="object"||typeof v.defaultField=="object");b=b&&(v.required||!v.required&&g.value),v.field=g.field;function _(C,x){return No({},x,{fullField:v.fullField+"."+C,fullFields:v.fullFields?[].concat(v.fullFields,[C]):[C]})}function S(C){C===void 0&&(C=[]);var x=Array.isArray(C)?C:[C];!o.suppressWarning&&x.length&&t.warning("async-validator:",x),x.length&&v.message!==void 0&&(x=[].concat(v.message));var M=x.map(XS(v,s));if(o.first&&M.length)return m[v.field]=1,p(M);if(!b)p(M);else{if(v.required&&!g.value)return v.message!==void 0?M=[].concat(v.message).map(XS(v,s)):o.error&&(M=[o.error(v,Ii(o.messages.required,v.field))]),p(M);var E={};v.defaultField&&Object.keys(g.value).map(function(D){E[D]=v.defaultField}),E=No({},E,g.rule.fields);var A={};Object.keys(E).forEach(function(D){var L=E[D],U=Array.isArray(L)?L:[L];A[D]=U.map(_.bind(null,D))});var O=new t(A);O.messages(o.messages),g.rule.options&&(g.rule.options.messages=o.messages,g.rule.options.error=o.error),O.validate(g.value,g.rule.options||o,function(D){var L=[];M&&M.length&&L.push.apply(L,M),D&&D.length&&L.push.apply(L,D),p(L.length?L:null)})}}var w;if(v.asyncValidator)w=v.asyncValidator(v,g.value,S,g.source,o);else if(v.validator){try{w=v.validator(v,g.value,S,g.source,o)}catch(C){console.error==null||console.error(C),o.suppressValidatorError||setTimeout(function(){throw C},0),S(C.message)}w===!0?S():w===!1?S(typeof v.message=="function"?v.message(v.fullField||v.field):v.message||(v.fullField||v.field)+" fails"):w instanceof Array?S(w):w instanceof Error&&S(w.message)}w&&w.then&&w.then(function(){return S()},function(C){return S(C)})},function(g){h(g)},s)},e.getType=function(i){if(i.type===void 0&&i.pattern instanceof RegExp&&(i.type="pattern"),typeof i.validator!="function"&&i.type&&!Nc.hasOwnProperty(i.type))throw new Error(Ii("Unknown rule type %s",i.type));return i.type||"string"},e.getValidationMethod=function(i){if(typeof i.validator=="function")return i.validator;var r=Object.keys(i),a=r.indexOf("message");return a!==-1&&r.splice(a,1),r.length===1&&r[0]==="required"?Nc.required:Nc[this.getType(i)]||void 0},t}();Uu.register=function(e,n){if(typeof n!="function")throw new Error("Cannot register a validator by type, validator is not a function");Nc[e]=n};Uu.warning=LW;Uu.messages=jm;Uu.validators=Nc;const aG=["","error","validating","success"],lG=Xe({label:String,labelWidth:{type:[String,Number],default:""},prop:{type:Ae([String,Array])},required:{type:Boolean,default:void 0},rules:{type:Ae([Object,Array])},error:String,validateStatus:{type:String,values:aG},for:String,inlineMessage:{type:[String,Boolean],default:""},showMessage:{type:Boolean,default:!0},size:{type:String,values:Hr}}),qS="ElLabelWrap";var cG=de({name:qS,props:{isAutoWidth:Boolean,updateAll:Boolean},setup(t,{slots:e}){const n=Je(pa,void 0),i=Je(Fr);i||Tn(qS,"usage: <el-form-item><label-wrap /></el-form-item>");const r=Ue("form"),a=q(),d=q(0),s=()=>{var h;if((h=a.value)!=null&&h.firstElementChild){const l=window.getComputedStyle(a.value.firstElementChild).width;return Math.ceil(Number.parseFloat(l))}else return 0},o=(h="update")=>{et(()=>{e.default&&t.isAutoWidth&&(h==="update"?d.value=s():h==="remove"&&(n==null||n.deregisterLabelWidth(d.value)))})},c=()=>o("update");return mt(()=>{c()}),rn(()=>{o("remove")}),vs(()=>c()),Be(d,(h,l)=>{t.updateAll&&(n==null||n.registerLabelWidth(h,l))}),Qn(R(()=>{var h,l;return(l=(h=a.value)==null?void 0:h.firstElementChild)!=null?l:null}),c),()=>{var h,l;if(!e)return null;const{isAutoWidth:u}=t;if(u){const f=n==null?void 0:n.autoLabelWidth,m=i==null?void 0:i.hasLabel,g={};if(m&&f&&f!=="auto"){const p=Math.max(0,Number.parseInt(f,10)-d.value),v=n.labelPosition==="left"?"marginRight":"marginLeft";p&&(g[v]=`${p}px`)}return ue("div",{ref:a,class:[r.be("item","label-wrap")],style:g},[(h=e.default)==null?void 0:h.call(e)])}else return ue(Qe,{ref:a},[(l=e.default)==null?void 0:l.call(e)])}}});const uG=["role","aria-labelledby"],dG=de({name:"ElFormItem"}),fG=de({...dG,props:lG,setup(t,{expose:e}){const n=t,i=Vn(),r=Je(pa,void 0),a=Je(Fr,void 0),d=En(void 0,{formItem:!1}),s=Ue("form-item"),o=Ji().value,c=q([]),h=q(""),l=BB(h,100),u=q(""),f=q();let m,g=!1;const p=R(()=>{if((r==null?void 0:r.labelPosition)==="top")return{};const W=bn(n.labelWidth||(r==null?void 0:r.labelWidth)||"");return W?{width:W}:{}}),v=R(()=>{if((r==null?void 0:r.labelPosition)==="top"||r!=null&&r.inline)return{};if(!n.label&&!n.labelWidth&&E)return{};const W=bn(n.labelWidth||(r==null?void 0:r.labelWidth)||"");return!n.label&&!i.label?{marginLeft:W}:{}}),b=R(()=>[s.b(),s.m(d.value),s.is("error",h.value==="error"),s.is("validating",h.value==="validating"),s.is("success",h.value==="success"),s.is("required",U.value||n.required),s.is("no-asterisk",r==null?void 0:r.hideRequiredAsterisk),(r==null?void 0:r.requireAsteriskPosition)==="right"?"asterisk-right":"asterisk-left",{[s.m("feedback")]:r==null?void 0:r.statusIcon}]),_=R(()=>xn(n.inlineMessage)?n.inlineMessage:(r==null?void 0:r.inlineMessage)||!1),S=R(()=>[s.e("error"),{[s.em("error","inline")]:_.value}]),w=R(()=>n.prop?ct(n.prop)?n.prop:n.prop.join("."):""),C=R(()=>!!(n.label||i.label)),x=R(()=>n.for||c.value.length===1?c.value[0]:void 0),M=R(()=>!x.value&&C.value),E=!!a,A=R(()=>{const W=r==null?void 0:r.model;if(!(!W||!n.prop))return Yd(W,n.prop).value}),O=R(()=>{const{required:W}=n,te=[];n.rules&&te.push(...El(n.rules));const ie=r==null?void 0:r.rules;if(ie&&n.prop){const re=Yd(ie,n.prop).value;re&&te.push(...El(re))}if(W!==void 0){const re=te.map((_e,Pe)=>[_e,Pe]).filter(([_e])=>Object.keys(_e).includes("required"));if(re.length>0)for(const[_e,Pe]of re)_e.required!==W&&(te[Pe]={..._e,required:W});else te.push({required:W})}return te}),D=R(()=>O.value.length>0),L=W=>O.value.filter(ie=>!ie.trigger||!W?!0:Array.isArray(ie.trigger)?ie.trigger.includes(W):ie.trigger===W).map(({trigger:ie,...re})=>re),U=R(()=>O.value.some(W=>W.required)),j=R(()=>{var W;return l.value==="error"&&n.showMessage&&((W=r==null?void 0:r.showMessage)!=null?W:!0)}),V=R(()=>`${n.label||""}${(r==null?void 0:r.labelSuffix)||""}`),k=W=>{h.value=W},F=W=>{var te,ie;const{errors:re,fields:_e}=W;(!re||!_e)&&console.error(W),k("error"),u.value=re?(ie=(te=re==null?void 0:re[0])==null?void 0:te.message)!=null?ie:`${n.prop} is required`:"",r==null||r.emit("validate",n.prop,!1,u.value)},T=()=>{k("success"),r==null||r.emit("validate",n.prop,!0,"")},P=async W=>{const te=w.value;return new Uu({[te]:W}).validate({[te]:A.value},{firstFields:!0}).then(()=>(T(),!0)).catch(re=>(F(re),Promise.reject(re)))},H=async(W,te)=>{if(g||!n.prop)return!1;const ie=lt(te);if(!D.value)return te==null||te(!1),!1;const re=L(W);return re.length===0?(te==null||te(!0),!0):(k("validating"),P(re).then(()=>(te==null||te(!0),!0)).catch(_e=>{const{fields:Pe}=_e;return te==null||te(!1,Pe),ie?!1:Promise.reject(Pe)}))},N=()=>{k(""),u.value="",g=!1},G=async()=>{const W=r==null?void 0:r.model;if(!W||!n.prop)return;const te=Yd(W,n.prop);g=!0,te.value=bS(m),await et(),N(),g=!1},$=W=>{c.value.includes(W)||c.value.push(W)},z=W=>{c.value=c.value.filter(te=>te!==W)};Be(()=>n.error,W=>{u.value=W||"",k(W?"error":"")},{immediate:!0}),Be(()=>n.validateStatus,W=>k(W||""));const Z=Ft({...Rn(n),$el:f,size:d,validateState:h,labelId:o,inputIds:c,isGroup:M,hasLabel:C,addInputId:$,removeInputId:z,resetField:G,clearValidate:N,validate:H});return xt(Fr,Z),mt(()=>{n.prop&&(r==null||r.addField(Z),m=bS(A.value))}),rn(()=>{r==null||r.removeField(Z)}),e({size:d,validateMessage:u,validateState:h,validate:H,clearValidate:N,resetField:G}),(W,te)=>{var ie;return I(),ne("div",{ref_key:"formItemRef",ref:f,class:B(y(b)),role:y(M)?"group":void 0,"aria-labelledby":y(M)?y(o):void 0},[ue(y(cG),{"is-auto-width":y(p).width==="auto","update-all":((ie=y(r))==null?void 0:ie.labelWidth)==="auto"},{default:ve(()=>[y(C)?(I(),ke(Ct(y(x)?"label":"div"),{key:0,id:y(o),for:y(x),class:B(y(s).e("label")),style:nt(y(p))},{default:ve(()=>[Le(W.$slots,"label",{label:y(V)},()=>[Tt($e(y(V)),1)])]),_:3},8,["id","for","class","style"])):Te("v-if",!0)]),_:3},8,["is-auto-width","update-all"]),ae("div",{class:B(y(s).e("content")),style:nt(y(v))},[Le(W.$slots,"default"),ue(M1,{name:`${y(s).namespace.value}-zoom-in-top`},{default:ve(()=>[y(j)?Le(W.$slots,"error",{key:0,error:u.value},()=>[ae("div",{class:B(y(S))},$e(u.value),3)]):Te("v-if",!0)]),_:3},8,["name"])],6)],10,uG)}}});var cE=je(fG,[["__file","/home/runner/work/element-plus/element-plus/packages/components/form/src/form-item.vue"]]);const hG=yt(AW,{FormItem:cE}),pG=mn(cE);let or;const mG=`
  height:0 !important;
  visibility:hidden !important;
  ${Mx()?"":"overflow:hidden !important;"}
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
`,gG=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function vG(t){const e=window.getComputedStyle(t),n=e.getPropertyValue("box-sizing"),i=Number.parseFloat(e.getPropertyValue("padding-bottom"))+Number.parseFloat(e.getPropertyValue("padding-top")),r=Number.parseFloat(e.getPropertyValue("border-bottom-width"))+Number.parseFloat(e.getPropertyValue("border-top-width"));return{contextStyle:gG.map(d=>`${d}:${e.getPropertyValue(d)}`).join(";"),paddingSize:i,borderSize:r,boxSizing:n}}function ZS(t,e=1,n){var i;or||(or=document.createElement("textarea"),document.body.appendChild(or));const{paddingSize:r,borderSize:a,boxSizing:d,contextStyle:s}=vG(t);or.setAttribute("style",`${s};${mG}`),or.value=t.value||t.placeholder||"";let o=or.scrollHeight;const c={};d==="border-box"?o=o+a:d==="content-box"&&(o=o-r),or.value="";const h=or.scrollHeight-r;if(at(e)){let l=h*e;d==="border-box"&&(l=l+r+a),o=Math.max(l,o),c.minHeight=`${l}px`}if(at(n)){let l=h*n;d==="border-box"&&(l=l+r+a),o=Math.min(l,o)}return c.height=`${o}px`,(i=or.parentNode)==null||i.removeChild(or),or=void 0,c}const yG=Xe({id:{type:String,default:void 0},size:Xn,disabled:Boolean,modelValue:{type:Ae([String,Number,Object]),default:""},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:Ae([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},suffixIcon:{type:Qt},prefixIcon:{type:Qt},containerRole:{type:String,default:void 0},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:Ae([Object,Array,String]),default:()=>an({})}}),bG={[bt]:t=>ct(t),input:t=>ct(t),change:t=>ct(t),focus:t=>t instanceof FocusEvent,blur:t=>t instanceof FocusEvent,clear:()=>!0,mouseleave:t=>t instanceof MouseEvent,mouseenter:t=>t instanceof MouseEvent,keydown:t=>t instanceof Event,compositionstart:t=>t instanceof CompositionEvent,compositionupdate:t=>t instanceof CompositionEvent,compositionend:t=>t instanceof CompositionEvent},_G=["role"],SG=["id","type","disabled","formatter","parser","readonly","autocomplete","tabindex","aria-label","placeholder","form"],wG=["id","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form"],CG=de({name:"ElInput",inheritAttrs:!1}),xG=de({...CG,props:yG,emits:bG,setup(t,{expose:e,emit:n}){const i=t,r=Vl(),a=Vn(),d=R(()=>{const le={};return i.containerRole==="combobox"&&(le["aria-haspopup"]=r["aria-haspopup"],le["aria-owns"]=r["aria-owns"],le["aria-expanded"]=r["aria-expanded"]),le}),s=R(()=>[i.type==="textarea"?p.b():g.b(),g.m(f.value),g.is("disabled",m.value),g.is("exceed",H.value),{[g.b("group")]:a.prepend||a.append,[g.bm("group","append")]:a.append,[g.bm("group","prepend")]:a.prepend,[g.m("prefix")]:a.prefix||i.prefixIcon,[g.m("suffix")]:a.suffix||i.suffixIcon||i.clearable||i.showPassword,[g.bm("suffix","password-clear")]:k.value&&F.value},r.class]),o=R(()=>[g.e("wrapper"),g.is("focus",_.value)]),c=Gv({excludeKeys:R(()=>Object.keys(d.value))}),{form:h,formItem:l}=gi(),{inputId:u}=ho(i,{formItemContext:l}),f=En(),m=Mi(),g=Ue("input"),p=Ue("textarea"),v=Jt(),b=Jt(),_=q(!1),S=q(!1),w=q(!1),C=q(!1),x=q(),M=Jt(i.inputStyle),E=R(()=>v.value||b.value),A=R(()=>{var le;return(le=h==null?void 0:h.statusIcon)!=null?le:!1}),O=R(()=>(l==null?void 0:l.validateState)||""),D=R(()=>O.value&&_T[O.value]),L=R(()=>C.value?B5:l5),U=R(()=>[r.style,i.inputStyle]),j=R(()=>[i.inputStyle,M.value,{resize:i.resize}]),V=R(()=>Cn(i.modelValue)?"":String(i.modelValue)),k=R(()=>i.clearable&&!m.value&&!i.readonly&&!!V.value&&(_.value||S.value)),F=R(()=>i.showPassword&&!m.value&&!i.readonly&&!!V.value&&(!!V.value||_.value)),T=R(()=>i.showWordLimit&&!!c.value.maxlength&&(i.type==="text"||i.type==="textarea")&&!m.value&&!i.readonly&&!i.showPassword),P=R(()=>V.value.length),H=R(()=>!!T.value&&P.value>Number(c.value.maxlength)),N=R(()=>!!a.suffix||!!i.suffixIcon||k.value||i.showPassword||T.value||!!O.value&&A.value),[G,$]=Y6(v);Qn(b,le=>{if(W(),!T.value||i.resize!=="both")return;const Ce=le[0],{width:Re}=Ce.contentRect;x.value={right:`calc(100% - ${Re+15+6}px)`}});const z=()=>{const{type:le,autosize:Ce}=i;if(!(!kt||le!=="textarea"||!b.value))if(Ce){const Re=_t(Ce)?Ce.minRows:void 0,Ne=_t(Ce)?Ce.maxRows:void 0,he=ZS(b.value,Re,Ne);M.value={overflowY:"hidden",...he},et(()=>{b.value.offsetHeight,M.value=he})}else M.value={minHeight:ZS(b.value).minHeight}},W=(le=>{let Ce=!1;return()=>{var Re;if(Ce||!i.autosize)return;((Re=b.value)==null?void 0:Re.offsetParent)===null||(le(),Ce=!0)}})(z),te=()=>{const le=E.value;!le||le.value===V.value||(le.value=V.value)},ie=async le=>{G();let{value:Ce}=le.target;if(i.formatter&&(Ce=i.parser?i.parser(Ce):Ce,Ce=i.formatter(Ce)),!w.value){if(Ce===V.value){te();return}n(bt,Ce),n("input",Ce),await et(),te(),$()}},re=le=>{n("change",le.target.value)},_e=le=>{n("compositionstart",le),w.value=!0},Pe=le=>{var Ce;n("compositionupdate",le);const Re=(Ce=le.target)==null?void 0:Ce.value,Ne=Re[Re.length-1]||"";w.value=!xh(Ne)},K=le=>{n("compositionend",le),w.value&&(w.value=!1,ie(le))},Q=()=>{C.value=!C.value,fe()},fe=async()=>{var le;await et(),(le=E.value)==null||le.focus()},ge=()=>{var le;return(le=E.value)==null?void 0:le.blur()},se=le=>{_.value=!0,n("focus",le)},me=le=>{var Ce;_.value=!1,n("blur",le),i.validateEvent&&((Ce=l==null?void 0:l.validate)==null||Ce.call(l,"blur").catch(Re=>void 0))},be=le=>{S.value=!1,n("mouseleave",le)},Me=le=>{S.value=!0,n("mouseenter",le)},Ee=le=>{n("keydown",le)},X=()=>{var le;(le=E.value)==null||le.select()},Y=()=>{n(bt,""),n("change",""),n("clear"),n("input","")};return Be(()=>i.modelValue,()=>{var le;et(()=>z()),i.validateEvent&&((le=l==null?void 0:l.validate)==null||le.call(l,"change").catch(Ce=>void 0))}),Be(V,()=>te()),Be(()=>i.type,async()=>{await et(),te(),z()}),mt(()=>{!i.formatter&&i.parser,te(),et(z)}),e({input:v,textarea:b,ref:E,textareaStyle:j,autosize:ln(i,"autosize"),focus:fe,blur:ge,select:X,clear:Y,resizeTextarea:z}),(le,Ce)=>pt((I(),ne("div",St(y(d),{class:y(s),style:y(U),role:le.containerRole,onMouseenter:Me,onMouseleave:be}),[Te(" input "),le.type!=="textarea"?(I(),ne(Qe,{key:0},[Te(" prepend slot "),le.$slots.prepend?(I(),ne("div",{key:0,class:B(y(g).be("group","prepend"))},[Le(le.$slots,"prepend")],2)):Te("v-if",!0),ae("div",{class:B(y(o))},[Te(" prefix slot "),le.$slots.prefix||le.prefixIcon?(I(),ne("span",{key:0,class:B(y(g).e("prefix"))},[ae("span",{class:B(y(g).e("prefix-inner")),onClick:fe},[Le(le.$slots,"prefix"),le.prefixIcon?(I(),ke(y(tt),{key:0,class:B(y(g).e("icon"))},{default:ve(()=>[(I(),ke(Ct(le.prefixIcon)))]),_:1},8,["class"])):Te("v-if",!0)],2)],2)):Te("v-if",!0),ae("input",St({id:y(u),ref_key:"input",ref:v,class:y(g).e("inner")},y(c),{type:le.showPassword?C.value?"text":"password":le.type,disabled:y(m),formatter:le.formatter,parser:le.parser,readonly:le.readonly,autocomplete:le.autocomplete,tabindex:le.tabindex,"aria-label":le.label,placeholder:le.placeholder,style:le.inputStyle,form:i.form,onCompositionstart:_e,onCompositionupdate:Pe,onCompositionend:K,onInput:ie,onFocus:se,onBlur:me,onChange:re,onKeydown:Ee}),null,16,SG),Te(" suffix slot "),y(N)?(I(),ne("span",{key:1,class:B(y(g).e("suffix"))},[ae("span",{class:B(y(g).e("suffix-inner")),onClick:fe},[!y(k)||!y(F)||!y(T)?(I(),ne(Qe,{key:0},[Le(le.$slots,"suffix"),le.suffixIcon?(I(),ke(y(tt),{key:0,class:B(y(g).e("icon"))},{default:ve(()=>[(I(),ke(Ct(le.suffixIcon)))]),_:1},8,["class"])):Te("v-if",!0)],64)):Te("v-if",!0),y(k)?(I(),ke(y(tt),{key:1,class:B([y(g).e("icon"),y(g).e("clear")]),onMousedown:ot(y(Ht),["prevent"]),onClick:Y},{default:ve(()=>[ue(y(lo))]),_:1},8,["class","onMousedown"])):Te("v-if",!0),y(F)?(I(),ke(y(tt),{key:2,class:B([y(g).e("icon"),y(g).e("password")]),onClick:Q},{default:ve(()=>[(I(),ke(Ct(y(L))))]),_:1},8,["class"])):Te("v-if",!0),y(T)?(I(),ne("span",{key:3,class:B(y(g).e("count"))},[ae("span",{class:B(y(g).e("count-inner"))},$e(y(P))+" / "+$e(y(c).maxlength),3)],2)):Te("v-if",!0),y(O)&&y(D)&&y(A)?(I(),ke(y(tt),{key:4,class:B([y(g).e("icon"),y(g).e("validateIcon"),y(g).is("loading",y(O)==="validating")])},{default:ve(()=>[(I(),ke(Ct(y(D))))]),_:1},8,["class"])):Te("v-if",!0)],2)],2)):Te("v-if",!0)],2),Te(" append slot "),le.$slots.append?(I(),ne("div",{key:1,class:B(y(g).be("group","append"))},[Le(le.$slots,"append")],2)):Te("v-if",!0)],64)):(I(),ne(Qe,{key:1},[Te(" textarea "),ae("textarea",St({id:y(u),ref_key:"textarea",ref:b,class:y(p).e("inner")},y(c),{tabindex:le.tabindex,disabled:y(m),readonly:le.readonly,autocomplete:le.autocomplete,style:y(j),"aria-label":le.label,placeholder:le.placeholder,form:i.form,onCompositionstart:_e,onCompositionupdate:Pe,onCompositionend:K,onInput:ie,onFocus:se,onBlur:me,onChange:re,onKeydown:Ee}),null,16,wG),y(T)?(I(),ne("span",{key:0,style:nt(x.value),class:B(y(g).e("count"))},$e(y(P))+" / "+$e(y(c).maxlength),7)):Te("v-if",!0)],64))],16,_G)),[[Dt,le.type!=="hidden"]])}});var TG=je(xG,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input/src/input.vue"]]);const Jn=yt(TG),Ga=4,uE={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},EG=({move:t,size:e,bar:n})=>({[n.size]:e,transform:`translate${n.axis}(${t}%)`}),dE=Symbol("scrollbarContextKey"),MG=Xe({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),AG="Thumb",kG=de({__name:"thumb",props:MG,setup(t){const e=t,n=Je(dE),i=Ue("scrollbar");n||Tn(AG,"can not inject scrollbar context");const r=q(),a=q(),d=q({}),s=q(!1);let o=!1,c=!1,h=kt?document.onselectstart:null;const l=R(()=>uE[e.vertical?"vertical":"horizontal"]),u=R(()=>EG({size:e.size,move:e.move,bar:l.value})),f=R(()=>r.value[l.value.offset]**2/n.wrapElement[l.value.scrollSize]/e.ratio/a.value[l.value.offset]),m=C=>{var x;if(C.stopPropagation(),C.ctrlKey||[1,2].includes(C.button))return;(x=window.getSelection())==null||x.removeAllRanges(),p(C);const M=C.currentTarget;M&&(d.value[l.value.axis]=M[l.value.offset]-(C[l.value.client]-M.getBoundingClientRect()[l.value.direction]))},g=C=>{if(!a.value||!r.value||!n.wrapElement)return;const x=Math.abs(C.target.getBoundingClientRect()[l.value.direction]-C[l.value.client]),M=a.value[l.value.offset]/2,E=(x-M)*100*f.value/r.value[l.value.offset];n.wrapElement[l.value.scroll]=E*n.wrapElement[l.value.scrollSize]/100},p=C=>{C.stopImmediatePropagation(),o=!0,document.addEventListener("mousemove",v),document.addEventListener("mouseup",b),h=document.onselectstart,document.onselectstart=()=>!1},v=C=>{if(!r.value||!a.value||o===!1)return;const x=d.value[l.value.axis];if(!x)return;const M=(r.value.getBoundingClientRect()[l.value.direction]-C[l.value.client])*-1,E=a.value[l.value.offset]-x,A=(M-E)*100*f.value/r.value[l.value.offset];n.wrapElement[l.value.scroll]=A*n.wrapElement[l.value.scrollSize]/100},b=()=>{o=!1,d.value[l.value.axis]=0,document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",b),w(),c&&(s.value=!1)},_=()=>{c=!1,s.value=!!e.size},S=()=>{c=!0,s.value=o};rn(()=>{w(),document.removeEventListener("mouseup",b)});const w=()=>{document.onselectstart!==h&&(document.onselectstart=h)};return cn(ln(n,"scrollbarElement"),"mousemove",_),cn(ln(n,"scrollbarElement"),"mouseleave",S),(C,x)=>(I(),ke(wn,{name:y(i).b("fade"),persisted:""},{default:ve(()=>[pt(ae("div",{ref_key:"instance",ref:r,class:B([y(i).e("bar"),y(i).is(y(l).key)]),onMousedown:g},[ae("div",{ref_key:"thumb",ref:a,class:B(y(i).e("thumb")),style:nt(y(u)),onMousedown:m},null,38)],34),[[Dt,C.always||s.value]])]),_:1},8,["name"]))}});var JS=je(kG,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/thumb.vue"]]);const RG=Xe({always:{type:Boolean,default:!0},width:String,height:String,ratioX:{type:Number,default:1},ratioY:{type:Number,default:1}}),PG=de({__name:"bar",props:RG,setup(t,{expose:e}){const n=t,i=q(0),r=q(0);return e({handleScroll:d=>{if(d){const s=d.offsetHeight-Ga,o=d.offsetWidth-Ga;r.value=d.scrollTop*100/s*n.ratioY,i.value=d.scrollLeft*100/o*n.ratioX}}}),(d,s)=>(I(),ne(Qe,null,[ue(JS,{move:i.value,ratio:d.ratioX,size:d.width,always:d.always},null,8,["move","ratio","size","always"]),ue(JS,{move:r.value,ratio:d.ratioY,size:d.height,vertical:"",always:d.always},null,8,["move","ratio","size","always"])],64))}});var OG=je(PG,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/bar.vue"]]);const LG=Xe({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:Ae([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20}}),IG={scroll:({scrollTop:t,scrollLeft:e})=>[t,e].every(at)},DG="ElScrollbar",NG=de({name:DG}),FG=de({...NG,props:LG,emits:IG,setup(t,{expose:e,emit:n}){const i=t,r=Ue("scrollbar");let a,d;const s=q(),o=q(),c=q(),h=q("0"),l=q("0"),u=q(),f=q(1),m=q(1),g=R(()=>{const x={};return i.height&&(x.height=bn(i.height)),i.maxHeight&&(x.maxHeight=bn(i.maxHeight)),[i.wrapStyle,x]}),p=R(()=>[i.wrapClass,r.e("wrap"),{[r.em("wrap","hidden-default")]:!i.native}]),v=R(()=>[r.e("view"),i.viewClass]),b=()=>{var x;o.value&&((x=u.value)==null||x.handleScroll(o.value),n("scroll",{scrollTop:o.value.scrollTop,scrollLeft:o.value.scrollLeft}))};function _(x,M){_t(x)?o.value.scrollTo(x):at(x)&&at(M)&&o.value.scrollTo(x,M)}const S=x=>{at(x)&&(o.value.scrollTop=x)},w=x=>{at(x)&&(o.value.scrollLeft=x)},C=()=>{if(!o.value)return;const x=o.value.offsetHeight-Ga,M=o.value.offsetWidth-Ga,E=x**2/o.value.scrollHeight,A=M**2/o.value.scrollWidth,O=Math.max(E,i.minSize),D=Math.max(A,i.minSize);f.value=E/(x-E)/(O/(x-O)),m.value=A/(M-A)/(D/(M-D)),l.value=O+Ga<x?`${O}px`:"",h.value=D+Ga<M?`${D}px`:""};return Be(()=>i.noresize,x=>{x?(a==null||a(),d==null||d()):({stop:a}=Qn(c,C),d=cn("resize",C))},{immediate:!0}),Be(()=>[i.maxHeight,i.height],()=>{i.native||et(()=>{var x;C(),o.value&&((x=u.value)==null||x.handleScroll(o.value))})}),xt(dE,Ft({scrollbarElement:s,wrapElement:o})),mt(()=>{i.native||et(()=>{C()})}),vs(()=>C()),e({wrapRef:o,update:C,scrollTo:_,setScrollTop:S,setScrollLeft:w,handleScroll:b}),(x,M)=>(I(),ne("div",{ref_key:"scrollbarRef",ref:s,class:B(y(r).b())},[ae("div",{ref_key:"wrapRef",ref:o,class:B(y(p)),style:nt(y(g)),onScroll:b},[(I(),ke(Ct(x.tag),{ref_key:"resizeRef",ref:c,class:B(y(v)),style:nt(x.viewStyle)},{default:ve(()=>[Le(x.$slots,"default")]),_:3},8,["class","style"]))],38),x.native?Te("v-if",!0):(I(),ke(OG,{key:0,ref_key:"barRef",ref:u,height:l.value,width:h.value,always:x.always,"ratio-x":m.value,"ratio-y":f.value},null,8,["height","width","always","ratio-x","ratio-y"]))],2))}});var BG=je(FG,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/scrollbar.vue"]]);const Cs=yt(BG),c0=Symbol("popper"),fE=Symbol("popperContent"),UG=["dialog","grid","group","listbox","menu","navigation","tooltip","tree"],hE=Xe({role:{type:String,values:UG,default:"tooltip"}}),VG=de({name:"ElPopper",inheritAttrs:!1}),HG=de({...VG,props:hE,setup(t,{expose:e}){const n=t,i=q(),r=q(),a=q(),d=q(),s=R(()=>n.role),o={triggerRef:i,popperInstanceRef:r,contentRef:a,referenceRef:d,role:s};return e(o),xt(c0,o),(c,h)=>Le(c.$slots,"default")}});var zG=je(HG,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popper/src/popper.vue"]]);const pE=Xe({arrowOffset:{type:Number,default:5}}),$G=de({name:"ElPopperArrow",inheritAttrs:!1}),WG=de({...$G,props:pE,setup(t,{expose:e}){const n=t,i=Ue("popper"),{arrowOffset:r,arrowRef:a,arrowStyle:d}=Je(fE,void 0);return Be(()=>n.arrowOffset,s=>{r.value=s}),rn(()=>{a.value=void 0}),e({arrowRef:a}),(s,o)=>(I(),ne("span",{ref_key:"arrowRef",ref:a,class:B(y(i).e("arrow")),style:nt(y(d)),"data-popper-arrow":""},null,6))}});var GG=je(WG,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popper/src/arrow.vue"]]);const jG="ElOnlyChild",mE=de({name:jG,setup(t,{slots:e,attrs:n}){var i;const r=Je($T),a=y6((i=r==null?void 0:r.setForwardRef)!=null?i:Ht);return()=>{var d;const s=(d=e.default)==null?void 0:d.call(e,n);if(!s||s.length>1)return null;const o=gE(s);return o?pt(fs(o,n),[[a]]):null}}});function gE(t){if(!t)return null;const e=t;for(const n of e){if(_t(n))switch(n.type){case li:continue;case Hl:case"svg":return QS(n);case Qe:return gE(n.children);default:return n}return QS(n)}return null}function QS(t){const e=Ue("only-child");return ue("span",{class:e.e("content")},[t])}const vE=Xe({virtualRef:{type:Ae(Object)},virtualTriggering:Boolean,onMouseenter:{type:Ae(Function)},onMouseleave:{type:Ae(Function)},onClick:{type:Ae(Function)},onKeydown:{type:Ae(Function)},onFocus:{type:Ae(Function)},onBlur:{type:Ae(Function)},onContextmenu:{type:Ae(Function)},id:String,open:Boolean}),XG=de({name:"ElPopperTrigger",inheritAttrs:!1}),KG=de({...XG,props:vE,setup(t,{expose:e}){const n=t,{role:i,triggerRef:r}=Je(c0,void 0);v6(r);const a=R(()=>s.value?n.id:void 0),d=R(()=>{if(i&&i.value==="tooltip")return n.open&&n.id?n.id:void 0}),s=R(()=>{if(i&&i.value!=="tooltip")return i.value}),o=R(()=>s.value?`${n.open}`:void 0);let c;return mt(()=>{Be(()=>n.virtualRef,h=>{h&&(r.value=Li(h))},{immediate:!0}),Be(r,(h,l)=>{c==null||c(),c=void 0,Yi(h)&&(["onMouseenter","onMouseleave","onClick","onKeydown","onFocus","onBlur","onContextmenu"].forEach(u=>{var f;const m=n[u];m&&(h.addEventListener(u.slice(2).toLowerCase(),m),(f=l==null?void 0:l.removeEventListener)==null||f.call(l,u.slice(2).toLowerCase(),m))}),c=Be([a,d,s,o],u=>{["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach((f,m)=>{Cn(u[m])?h.removeAttribute(f):h.setAttribute(f,u[m])})},{immediate:!0})),Yi(l)&&["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach(u=>l.removeAttribute(u))},{immediate:!0})}),rn(()=>{c==null||c(),c=void 0}),e({triggerRef:r}),(h,l)=>h.virtualTriggering?Te("v-if",!0):(I(),ke(y(mE),St({key:0},h.$attrs,{"aria-controls":y(a),"aria-describedby":y(d),"aria-expanded":y(o),"aria-haspopup":y(s)}),{default:ve(()=>[Le(h.$slots,"default")]),_:3},16,["aria-controls","aria-describedby","aria-expanded","aria-haspopup"]))}});var YG=je(KG,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popper/src/trigger.vue"]]);const Hp="focus-trap.focus-after-trapped",zp="focus-trap.focus-after-released",qG="focus-trap.focusout-prevented",ew={cancelable:!0,bubbles:!1},ZG={cancelable:!0,bubbles:!1},tw="focusAfterTrapped",nw="focusAfterReleased",u0=Symbol("elFocusTrap"),d0=q(),Oh=q(0),f0=q(0);let kd=0;const yE=t=>{const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const r=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||r?NodeFilter.FILTER_SKIP:i.tabIndex>=0||i===document.activeElement?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e},iw=(t,e)=>{for(const n of t)if(!JG(n,e))return n},JG=(t,e)=>{if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1},QG=t=>{const e=yE(t),n=iw(e,t),i=iw(e.reverse(),t);return[n,i]},ej=t=>t instanceof HTMLInputElement&&"select"in t,Is=(t,e)=>{if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),f0.value=window.performance.now(),t!==n&&ej(t)&&e&&t.select()}};function rw(t,e){const n=[...t],i=t.indexOf(e);return i!==-1&&n.splice(i,1),n}const tj=()=>{let t=[];return{push:i=>{const r=t[0];r&&i!==r&&r.pause(),t=rw(t,i),t.unshift(i)},remove:i=>{var r,a;t=rw(t,i),(a=(r=t[0])==null?void 0:r.resume)==null||a.call(r)}}},nj=(t,e=!1)=>{const n=document.activeElement;for(const i of t)if(Is(i,e),document.activeElement!==n)return},sw=tj(),ij=()=>Oh.value>f0.value,Rd=()=>{d0.value="pointer",Oh.value=window.performance.now()},ow=()=>{d0.value="keyboard",Oh.value=window.performance.now()},rj=()=>(mt(()=>{kd===0&&(document.addEventListener("mousedown",Rd),document.addEventListener("touchstart",Rd),document.addEventListener("keydown",ow)),kd++}),rn(()=>{kd--,kd<=0&&(document.removeEventListener("mousedown",Rd),document.removeEventListener("touchstart",Rd),document.removeEventListener("keydown",ow))}),{focusReason:d0,lastUserFocusTimestamp:Oh,lastAutomatedFocusTimestamp:f0}),Pd=t=>new CustomEvent(qG,{...ZG,detail:t}),sj=de({name:"ElFocusTrap",inheritAttrs:!1,props:{loop:Boolean,trapped:Boolean,focusTrapEl:Object,focusStartEl:{type:[Object,String],default:"first"}},emits:[tw,nw,"focusin","focusout","focusout-prevented","release-requested"],setup(t,{emit:e}){const n=q();let i,r;const{focusReason:a}=rj();h6(m=>{t.trapped&&!d.paused&&e("release-requested",m)});const d={paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}},s=m=>{if(!t.loop&&!t.trapped||d.paused)return;const{key:g,altKey:p,ctrlKey:v,metaKey:b,currentTarget:_,shiftKey:S}=m,{loop:w}=t,C=g===rt.tab&&!p&&!v&&!b,x=document.activeElement;if(C&&x){const M=_,[E,A]=QG(M);if(E&&A){if(!S&&x===A){const D=Pd({focusReason:a.value});e("focusout-prevented",D),D.defaultPrevented||(m.preventDefault(),w&&Is(E,!0))}else if(S&&[E,M].includes(x)){const D=Pd({focusReason:a.value});e("focusout-prevented",D),D.defaultPrevented||(m.preventDefault(),w&&Is(A,!0))}}else if(x===M){const D=Pd({focusReason:a.value});e("focusout-prevented",D),D.defaultPrevented||m.preventDefault()}}};xt(u0,{focusTrapRef:n,onKeydown:s}),Be(()=>t.focusTrapEl,m=>{m&&(n.value=m)},{immediate:!0}),Be([n],([m],[g])=>{m&&(m.addEventListener("keydown",s),m.addEventListener("focusin",h),m.addEventListener("focusout",l)),g&&(g.removeEventListener("keydown",s),g.removeEventListener("focusin",h),g.removeEventListener("focusout",l))});const o=m=>{e(tw,m)},c=m=>e(nw,m),h=m=>{const g=y(n);if(!g)return;const p=m.target,v=m.relatedTarget,b=p&&g.contains(p);t.trapped||v&&g.contains(v)||(i=v),b&&e("focusin",m),!d.paused&&t.trapped&&(b?r=p:Is(r,!0))},l=m=>{const g=y(n);if(!(d.paused||!g))if(t.trapped){const p=m.relatedTarget;!Cn(p)&&!g.contains(p)&&setTimeout(()=>{if(!d.paused&&t.trapped){const v=Pd({focusReason:a.value});e("focusout-prevented",v),v.defaultPrevented||Is(r,!0)}},0)}else{const p=m.target;p&&g.contains(p)||e("focusout",m)}};async function u(){await et();const m=y(n);if(m){sw.push(d);const g=m.contains(document.activeElement)?i:document.activeElement;if(i=g,!m.contains(g)){const v=new Event(Hp,ew);m.addEventListener(Hp,o),m.dispatchEvent(v),v.defaultPrevented||et(()=>{let b=t.focusStartEl;ct(b)||(Is(b),document.activeElement!==b&&(b="first")),b==="first"&&nj(yE(m),!0),(document.activeElement===g||b==="container")&&Is(m)})}}}function f(){const m=y(n);if(m){m.removeEventListener(Hp,o);const g=new CustomEvent(zp,{...ew,detail:{focusReason:a.value}});m.addEventListener(zp,c),m.dispatchEvent(g),!g.defaultPrevented&&(a.value=="keyboard"||!ij()||m.contains(document.activeElement))&&Is(i??document.body),m.removeEventListener(zp,o),sw.remove(d)}}return mt(()=>{t.trapped&&u(),Be(()=>t.trapped,m=>{m?u():f()})}),rn(()=>{t.trapped&&f()}),{onKeydown:s}}});function oj(t,e,n,i,r,a){return Le(t.$slots,"default",{handleKeydown:t.onKeydown})}var Lh=je(sj,[["render",oj],["__file","/home/runner/work/element-plus/element-plus/packages/components/focus-trap/src/focus-trap.vue"]]);const aj=["fixed","absolute"],lj=Xe({boundariesPadding:{type:Number,default:0},fallbackPlacements:{type:Ae(Array),default:void 0},gpuAcceleration:{type:Boolean,default:!0},offset:{type:Number,default:12},placement:{type:String,values:ha,default:"bottom"},popperOptions:{type:Ae(Object),default:()=>({})},strategy:{type:String,values:aj,default:"absolute"}}),bE=Xe({...lj,id:String,style:{type:Ae([String,Array,Object])},className:{type:Ae([String,Array,Object])},effect:{type:String,default:"dark"},visible:Boolean,enterable:{type:Boolean,default:!0},pure:Boolean,focusOnShow:{type:Boolean,default:!1},trapping:{type:Boolean,default:!1},popperClass:{type:Ae([String,Array,Object])},popperStyle:{type:Ae([String,Array,Object])},referenceEl:{type:Ae(Object)},triggerTargetEl:{type:Ae(Object)},stopPopperMouseEvent:{type:Boolean,default:!0},ariaLabel:{type:String,default:void 0},virtualTriggering:Boolean,zIndex:Number}),cj={mouseenter:t=>t instanceof MouseEvent,mouseleave:t=>t instanceof MouseEvent,focus:()=>!0,blur:()=>!0,close:()=>!0},uj=(t,e=[])=>{const{placement:n,strategy:i,popperOptions:r}=t,a={placement:n,strategy:i,...r,modifiers:[...fj(t),...e]};return hj(a,r==null?void 0:r.modifiers),a},dj=t=>{if(kt)return Li(t)};function fj(t){const{offset:e,gpuAcceleration:n,fallbackPlacements:i}=t;return[{name:"offset",options:{offset:[0,e??12]}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5,fallbackPlacements:i}},{name:"computeStyles",options:{gpuAcceleration:n}}]}function hj(t,e){e&&(t.modifiers=[...t.modifiers,...e??[]])}const pj=0,mj=t=>{const{popperInstanceRef:e,contentRef:n,triggerRef:i,role:r}=Je(c0,void 0),a=q(),d=q(),s=R(()=>({name:"eventListeners",enabled:!!t.visible})),o=R(()=>{var v;const b=y(a),_=(v=y(d))!=null?v:pj;return{name:"arrow",enabled:!b$(b),options:{element:b,padding:_}}}),c=R(()=>({onFirstUpdate:()=>{m()},...uj(t,[y(o),y(s)])})),h=R(()=>dj(t.referenceEl)||y(i)),{attributes:l,state:u,styles:f,update:m,forceUpdate:g,instanceRef:p}=c6(h,n,c);return Be(p,v=>e.value=v),mt(()=>{Be(()=>{var v;return(v=y(h))==null?void 0:v.getBoundingClientRect()},()=>{m()})}),{attributes:l,arrowRef:a,contentRef:n,instanceRef:p,state:u,styles:f,role:r,forceUpdate:g,update:m}},gj=(t,{attributes:e,styles:n,role:i})=>{const{nextZIndex:r}=Kl(),a=Ue("popper"),d=R(()=>y(e).popper),s=q(t.zIndex||r()),o=R(()=>[a.b(),a.is("pure",t.pure),a.is(t.effect),t.popperClass]),c=R(()=>[{zIndex:y(s)},y(n).popper,t.popperStyle||{}]),h=R(()=>i.value==="dialog"?"false":void 0),l=R(()=>y(n).arrow||{});return{ariaModal:h,arrowStyle:l,contentAttrs:d,contentClass:o,contentStyle:c,contentZIndex:s,updateZIndex:()=>{s.value=t.zIndex||r()}}},vj=(t,e)=>{const n=q(!1),i=q();return{focusStartRef:i,trapped:n,onFocusAfterReleased:c=>{var h;((h=c.detail)==null?void 0:h.focusReason)!=="pointer"&&(i.value="first",e("blur"))},onFocusAfterTrapped:()=>{e("focus")},onFocusInTrap:c=>{t.visible&&!n.value&&(c.target&&(i.value=c.target),n.value=!0)},onFocusoutPrevented:c=>{t.trapping||(c.detail.focusReason==="pointer"&&c.preventDefault(),n.value=!1)},onReleaseRequested:()=>{n.value=!1,e("close")}}},yj=de({name:"ElPopperContent"}),bj=de({...yj,props:bE,emits:cj,setup(t,{expose:e,emit:n}){const i=t,{focusStartRef:r,trapped:a,onFocusAfterReleased:d,onFocusAfterTrapped:s,onFocusInTrap:o,onFocusoutPrevented:c,onReleaseRequested:h}=vj(i,n),{attributes:l,arrowRef:u,contentRef:f,styles:m,instanceRef:g,role:p,update:v}=mj(i),{ariaModal:b,arrowStyle:_,contentAttrs:S,contentClass:w,contentStyle:C,updateZIndex:x}=gj(i,{styles:m,attributes:l,role:p}),M=Je(Fr,void 0),E=q();xt(fE,{arrowStyle:_,arrowRef:u,arrowOffset:E}),M&&(M.addInputId||M.removeInputId)&&xt(Fr,{...M,addInputId:Ht,removeInputId:Ht});let A;const O=(L=!0)=>{v(),L&&x()},D=()=>{O(!1),i.visible&&i.focusOnShow?a.value=!0:i.visible===!1&&(a.value=!1)};return mt(()=>{Be(()=>i.triggerTargetEl,(L,U)=>{A==null||A(),A=void 0;const j=y(L||f.value),V=y(U||f.value);Yi(j)&&(A=Be([p,()=>i.ariaLabel,b,()=>i.id],k=>{["role","aria-label","aria-modal","id"].forEach((F,T)=>{Cn(k[T])?j.removeAttribute(F):j.setAttribute(F,k[T])})},{immediate:!0})),V!==j&&Yi(V)&&["role","aria-label","aria-modal","id"].forEach(k=>{V.removeAttribute(k)})},{immediate:!0}),Be(()=>i.visible,D,{immediate:!0})}),rn(()=>{A==null||A(),A=void 0}),e({popperContentRef:f,popperInstanceRef:g,updatePopper:O,contentStyle:C}),(L,U)=>(I(),ne("div",St({ref_key:"contentRef",ref:f},y(S),{style:y(C),class:y(w),tabindex:"-1",onMouseenter:U[0]||(U[0]=j=>L.$emit("mouseenter",j)),onMouseleave:U[1]||(U[1]=j=>L.$emit("mouseleave",j))}),[ue(y(Lh),{trapped:y(a),"trap-on-focus-in":!0,"focus-trap-el":y(f),"focus-start-el":y(r),onFocusAfterTrapped:y(s),onFocusAfterReleased:y(d),onFocusin:y(o),onFocusoutPrevented:y(c),onReleaseRequested:y(h)},{default:ve(()=>[Le(L.$slots,"default")]),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusin","onFocusoutPrevented","onReleaseRequested"])],16))}});var _j=je(bj,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popper/src/content.vue"]]);const _E=yt(zG),Ih=Symbol("elTooltip"),Fn=Xe({...g6,...bE,appendTo:{type:Ae([String,Object])},content:{type:String,default:""},rawContent:{type:Boolean,default:!1},persistent:Boolean,ariaLabel:String,visible:{type:Ae(Boolean),default:null},transition:String,teleported:{type:Boolean,default:!0},disabled:Boolean}),fu=Xe({...vE,disabled:Boolean,trigger:{type:Ae([String,Array]),default:"hover"},triggerKeys:{type:Ae(Array),default:()=>[rt.enter,rt.space]}}),{useModelToggleProps:Sj,useModelToggleEmits:wj,useModelToggle:Cj}=ET("visible"),xj=Xe({...hE,...Sj,...Fn,...fu,...pE,showArrow:{type:Boolean,default:!0}}),Tj=[...wj,"before-show","before-hide","show","hide","open","close"],Ej=(t,e)=>Ze(t)?t.includes(e):t===e,Na=(t,e,n)=>i=>{Ej(y(t),e)&&n(i)},Mj=de({name:"ElTooltipTrigger"}),Aj=de({...Mj,props:fu,setup(t,{expose:e}){const n=t,i=Ue("tooltip"),{controlled:r,id:a,open:d,onOpen:s,onClose:o,onToggle:c}=Je(Ih,void 0),h=q(null),l=()=>{if(y(r)||n.disabled)return!0},u=ln(n,"trigger"),f=pn(l,Na(u,"hover",s)),m=pn(l,Na(u,"hover",o)),g=pn(l,Na(u,"click",S=>{S.button===0&&c(S)})),p=pn(l,Na(u,"focus",s)),v=pn(l,Na(u,"focus",o)),b=pn(l,Na(u,"contextmenu",S=>{S.preventDefault(),c(S)})),_=pn(l,S=>{const{code:w}=S;n.triggerKeys.includes(w)&&(S.preventDefault(),c(S))});return e({triggerRef:h}),(S,w)=>(I(),ke(y(YG),{id:y(a),"virtual-ref":S.virtualRef,open:y(d),"virtual-triggering":S.virtualTriggering,class:B(y(i).e("trigger")),onBlur:y(v),onClick:y(g),onContextmenu:y(b),onFocus:y(p),onMouseenter:y(f),onMouseleave:y(m),onKeydown:y(_)},{default:ve(()=>[Le(S.$slots,"default")]),_:3},8,["id","virtual-ref","open","virtual-triggering","class","onBlur","onClick","onContextmenu","onFocus","onMouseenter","onMouseleave","onKeydown"]))}});var kj=je(Aj,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip/src/trigger.vue"]]);const Rj=de({name:"ElTooltipContent",inheritAttrs:!1}),Pj=de({...Rj,props:Fn,setup(t,{expose:e}){const n=t,{selector:i}=HT(),r=Ue("tooltip"),a=q(null),d=q(!1),{controlled:s,id:o,open:c,trigger:h,onClose:l,onOpen:u,onShow:f,onHide:m,onBeforeShow:g,onBeforeHide:p}=Je(Ih,void 0),v=R(()=>n.transition||`${r.namespace.value}-fade-in-linear`),b=R(()=>n.persistent);rn(()=>{d.value=!0});const _=R(()=>y(b)?!0:y(c)),S=R(()=>n.disabled?!1:y(c)),w=R(()=>n.appendTo||i.value),C=R(()=>{var k;return(k=n.style)!=null?k:{}}),x=R(()=>!y(c)),M=()=>{m()},E=()=>{if(y(s))return!0},A=pn(E,()=>{n.enterable&&y(h)==="hover"&&u()}),O=pn(E,()=>{y(h)==="hover"&&l()}),D=()=>{var k,F;(F=(k=a.value)==null?void 0:k.updatePopper)==null||F.call(k),g==null||g()},L=()=>{p==null||p()},U=()=>{f(),V=Cv(R(()=>{var k;return(k=a.value)==null?void 0:k.popperContentRef}),()=>{if(y(s))return;y(h)!=="hover"&&l()})},j=()=>{n.virtualTriggering||l()};let V;return Be(()=>y(c),k=>{k||V==null||V()},{flush:"post"}),Be(()=>n.content,()=>{var k,F;(F=(k=a.value)==null?void 0:k.updatePopper)==null||F.call(k)}),e({contentRef:a}),(k,F)=>(I(),ke(Tu,{disabled:!k.teleported,to:y(w)},[ue(wn,{name:y(v),onAfterLeave:M,onBeforeEnter:D,onAfterEnter:U,onBeforeLeave:L},{default:ve(()=>[y(_)?pt((I(),ke(y(_j),St({key:0,id:y(o),ref_key:"contentRef",ref:a},k.$attrs,{"aria-label":k.ariaLabel,"aria-hidden":y(x),"boundaries-padding":k.boundariesPadding,"fallback-placements":k.fallbackPlacements,"gpu-acceleration":k.gpuAcceleration,offset:k.offset,placement:k.placement,"popper-options":k.popperOptions,strategy:k.strategy,effect:k.effect,enterable:k.enterable,pure:k.pure,"popper-class":k.popperClass,"popper-style":[k.popperStyle,y(C)],"reference-el":k.referenceEl,"trigger-target-el":k.triggerTargetEl,visible:y(S),"z-index":k.zIndex,onMouseenter:y(A),onMouseleave:y(O),onBlur:j,onClose:y(l)}),{default:ve(()=>[d.value?Te("v-if",!0):Le(k.$slots,"default",{key:0})]),_:3},16,["id","aria-label","aria-hidden","boundaries-padding","fallback-placements","gpu-acceleration","offset","placement","popper-options","strategy","effect","enterable","pure","popper-class","popper-style","reference-el","trigger-target-el","visible","z-index","onMouseenter","onMouseleave","onClose"])),[[Dt,y(S)]]):Te("v-if",!0)]),_:3},8,["name"])],8,["disabled","to"]))}});var Oj=je(Pj,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip/src/content.vue"]]);const Lj=["innerHTML"],Ij={key:1},Dj=de({name:"ElTooltip"}),Nj=de({...Dj,props:xj,emits:Tj,setup(t,{expose:e,emit:n}){const i=t;m6();const r=Ji(),a=q(),d=q(),s=()=>{var v;const b=y(a);b&&((v=b.popperInstanceRef)==null||v.update())},o=q(!1),c=q(),{show:h,hide:l,hasUpdateHandler:u}=Cj({indicator:o,toggleReason:c}),{onOpen:f,onClose:m}=zT({showAfter:ln(i,"showAfter"),hideAfter:ln(i,"hideAfter"),autoClose:ln(i,"autoClose"),open:h,close:l}),g=R(()=>xn(i.visible)&&!u.value);xt(Ih,{controlled:g,id:r,open:Ul(o),trigger:ln(i,"trigger"),onOpen:v=>{f(v)},onClose:v=>{m(v)},onToggle:v=>{y(o)?m(v):f(v)},onShow:()=>{n("show",c.value)},onHide:()=>{n("hide",c.value)},onBeforeShow:()=>{n("before-show",c.value)},onBeforeHide:()=>{n("before-hide",c.value)},updatePopper:s}),Be(()=>i.disabled,v=>{v&&o.value&&(o.value=!1)});const p=()=>{var v,b;const _=(b=(v=d.value)==null?void 0:v.contentRef)==null?void 0:b.popperContentRef;return _&&_.contains(document.activeElement)};return e1(()=>o.value&&l()),e({popperRef:a,contentRef:d,isFocusInsideContent:p,updatePopper:s,onOpen:f,onClose:m,hide:l}),(v,b)=>(I(),ke(y(_E),{ref_key:"popperRef",ref:a,role:v.role},{default:ve(()=>[ue(kj,{disabled:v.disabled,trigger:v.trigger,"trigger-keys":v.triggerKeys,"virtual-ref":v.virtualRef,"virtual-triggering":v.virtualTriggering},{default:ve(()=>[v.$slots.default?Le(v.$slots,"default",{key:0}):Te("v-if",!0)]),_:3},8,["disabled","trigger","trigger-keys","virtual-ref","virtual-triggering"]),ue(Oj,{ref_key:"contentRef",ref:d,"aria-label":v.ariaLabel,"boundaries-padding":v.boundariesPadding,content:v.content,disabled:v.disabled,effect:v.effect,enterable:v.enterable,"fallback-placements":v.fallbackPlacements,"hide-after":v.hideAfter,"gpu-acceleration":v.gpuAcceleration,offset:v.offset,persistent:v.persistent,"popper-class":v.popperClass,"popper-style":v.popperStyle,placement:v.placement,"popper-options":v.popperOptions,pure:v.pure,"raw-content":v.rawContent,"reference-el":v.referenceEl,"trigger-target-el":v.triggerTargetEl,"show-after":v.showAfter,strategy:v.strategy,teleported:v.teleported,transition:v.transition,"virtual-triggering":v.virtualTriggering,"z-index":v.zIndex,"append-to":v.appendTo},{default:ve(()=>[Le(v.$slots,"content",{},()=>[v.rawContent?(I(),ne("span",{key:0,innerHTML:v.content},null,8,Lj)):(I(),ne("span",Ij,$e(v.content),1))]),v.showArrow?(I(),ke(y(GG),{key:0,"arrow-offset":v.arrowOffset},null,8,["arrow-offset"])):Te("v-if",!0)]),_:3},8,["aria-label","boundaries-padding","content","disabled","effect","enterable","fallback-placements","hide-after","gpu-acceleration","offset","persistent","popper-class","popper-style","placement","popper-options","pure","raw-content","reference-el","trigger-target-el","show-after","strategy","teleported","transition","virtual-triggering","z-index","append-to"])]),_:3},8,["role"]))}});var Fj=je(Nj,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip/src/tooltip.vue"]]);const mi=yt(Fj),Bj=Xe({valueKey:{type:String,default:"value"},modelValue:{type:[String,Number],default:""},debounce:{type:Number,default:300},placement:{type:Ae(String),values:["top","top-start","top-end","bottom","bottom-start","bottom-end"],default:"bottom-start"},fetchSuggestions:{type:Ae([Function,Array]),default:Ht},popperClass:{type:String,default:""},triggerOnFocus:{type:Boolean,default:!0},selectWhenUnmatched:{type:Boolean,default:!1},hideLoading:{type:Boolean,default:!1},label:{type:String},teleported:Fn.teleported,highlightFirstItem:{type:Boolean,default:!1},fitInputWidth:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},name:String}),Uj={[bt]:t=>ct(t),[di]:t=>ct(t),[tn]:t=>ct(t),focus:t=>t instanceof FocusEvent,blur:t=>t instanceof FocusEvent,clear:()=>!0,select:t=>_t(t)},Vj=["aria-expanded","aria-owns"],Hj={key:0},zj=["id","aria-selected","onClick"],SE="ElAutocomplete",$j=de({name:SE,inheritAttrs:!1}),Wj=de({...$j,props:Bj,emits:Uj,setup(t,{expose:e,emit:n}){const i=t,r=Gv(),a=Vl(),d=Mi(),s=Ue("autocomplete"),o=q(),c=q(),h=q(),l=q();let u=!1,f=!1;const m=q([]),g=q(-1),p=q(""),v=q(!1),b=q(!1),_=q(!1),S=R(()=>s.b(String(Eh()))),w=R(()=>a.style),C=R(()=>(m.value.length>0||_.value)&&v.value),x=R(()=>!i.hideLoading&&_.value),M=R(()=>o.value?Array.from(o.value.$el.querySelectorAll("input")):[]),E=async()=>{await et(),C.value&&(p.value=`${o.value.$el.offsetWidth}px`)},A=()=>{g.value=-1},D=pi(async Z=>{if(b.value)return;const W=te=>{_.value=!1,!b.value&&(Ze(te)?(m.value=te,g.value=i.highlightFirstItem?0:-1):Tn(SE,"autocomplete suggestions must be an array"))};if(_.value=!0,Ze(i.fetchSuggestions))W(i.fetchSuggestions);else{const te=await i.fetchSuggestions(Z,W);Ze(te)&&W(te)}},i.debounce),L=Z=>{const W=!!Z;if(n(di,Z),n(bt,Z),b.value=!1,v.value||(v.value=W),!i.triggerOnFocus&&!Z){b.value=!0,m.value=[];return}D(Z)},U=Z=>{var W;d.value||(((W=Z.target)==null?void 0:W.tagName)!=="INPUT"||M.value.includes(document.activeElement))&&(v.value=!0)},j=Z=>{n(tn,Z)},V=Z=>{f?f=!1:(v.value=!0,n("focus",Z),i.triggerOnFocus&&!u&&D(String(i.modelValue)))},k=Z=>{setTimeout(()=>{var W;if((W=h.value)!=null&&W.isFocusInsideContent()){f=!0;return}v.value&&H(),n("blur",Z)})},F=()=>{v.value=!1,n(bt,""),n("clear")},T=async()=>{C.value&&g.value>=0&&g.value<m.value.length?$(m.value[g.value]):i.selectWhenUnmatched&&(n("select",{value:i.modelValue}),m.value=[],g.value=-1)},P=Z=>{C.value&&(Z.preventDefault(),Z.stopPropagation(),H())},H=()=>{v.value=!1},N=()=>{var Z;(Z=o.value)==null||Z.focus()},G=()=>{var Z;(Z=o.value)==null||Z.blur()},$=async Z=>{n(di,Z[i.valueKey]),n(bt,Z[i.valueKey]),n("select",Z),m.value=[],g.value=-1},z=Z=>{if(!C.value||_.value)return;if(Z<0){g.value=-1;return}Z>=m.value.length&&(Z=m.value.length-1);const W=c.value.querySelector(`.${s.be("suggestion","wrap")}`),ie=W.querySelectorAll(`.${s.be("suggestion","list")} li`)[Z],re=W.scrollTop,{offsetTop:_e,scrollHeight:Pe}=ie;_e+Pe>re+W.clientHeight&&(W.scrollTop+=Pe),_e<re&&(W.scrollTop-=Pe),g.value=Z,o.value.ref.setAttribute("aria-activedescendant",`${S.value}-item-${g.value}`)};return Cv(l,()=>{C.value&&H()}),mt(()=>{o.value.ref.setAttribute("role","textbox"),o.value.ref.setAttribute("aria-autocomplete","list"),o.value.ref.setAttribute("aria-controls","id"),o.value.ref.setAttribute("aria-activedescendant",`${S.value}-item-${g.value}`),u=o.value.ref.hasAttribute("readonly")}),e({highlightedIndex:g,activated:v,loading:_,inputRef:o,popperRef:h,suggestions:m,handleSelect:$,handleKeyEnter:T,focus:N,blur:G,close:H,highlight:z}),(Z,W)=>(I(),ke(y(mi),{ref_key:"popperRef",ref:h,visible:y(C),placement:Z.placement,"fallback-placements":["bottom-start","top-start"],"popper-class":[y(s).e("popper"),Z.popperClass],teleported:Z.teleported,"gpu-acceleration":!1,pure:"","manual-mode":"",effect:"light",trigger:"click",transition:`${y(s).namespace.value}-zoom-in-top`,persistent:"",onBeforeShow:E,onHide:A},{content:ve(()=>[ae("div",{ref_key:"regionRef",ref:c,class:B([y(s).b("suggestion"),y(s).is("loading",y(x))]),style:nt({[Z.fitInputWidth?"width":"minWidth"]:p.value,outline:"none"}),role:"region"},[ue(y(Cs),{id:y(S),tag:"ul","wrap-class":y(s).be("suggestion","wrap"),"view-class":y(s).be("suggestion","list"),role:"listbox"},{default:ve(()=>[y(x)?(I(),ne("li",Hj,[ue(y(tt),{class:B(y(s).is("loading"))},{default:ve(()=>[ue(y(co))]),_:1},8,["class"])])):(I(!0),ne(Qe,{key:1},wt(m.value,(te,ie)=>(I(),ne("li",{id:`${y(S)}-item-${ie}`,key:ie,class:B({highlighted:g.value===ie}),role:"option","aria-selected":g.value===ie,onClick:re=>$(te)},[Le(Z.$slots,"default",{item:te},()=>[Tt($e(te[Z.valueKey]),1)])],10,zj))),128))]),_:3},8,["id","wrap-class","view-class"])],6)]),default:ve(()=>[ae("div",{ref_key:"listboxRef",ref:l,class:B([y(s).b(),Z.$attrs.class]),style:nt(y(w)),role:"combobox","aria-haspopup":"listbox","aria-expanded":y(C),"aria-owns":y(S)},[ue(y(Jn),St({ref_key:"inputRef",ref:o},y(r),{clearable:Z.clearable,disabled:y(d),name:Z.name,"model-value":Z.modelValue,onInput:L,onChange:j,onFocus:V,onBlur:k,onClear:F,onKeydown:[W[0]||(W[0]=Rt(ot(te=>z(g.value-1),["prevent"]),["up"])),W[1]||(W[1]=Rt(ot(te=>z(g.value+1),["prevent"]),["down"])),Rt(T,["enter"]),Rt(H,["tab"]),Rt(P,["esc"])],onMousedown:U}),ds({_:2},[Z.$slots.prepend?{name:"prepend",fn:ve(()=>[Le(Z.$slots,"prepend")])}:void 0,Z.$slots.append?{name:"append",fn:ve(()=>[Le(Z.$slots,"append")])}:void 0,Z.$slots.prefix?{name:"prefix",fn:ve(()=>[Le(Z.$slots,"prefix")])}:void 0,Z.$slots.suffix?{name:"suffix",fn:ve(()=>[Le(Z.$slots,"suffix")])}:void 0]),1040,["clearable","disabled","name","model-value","onKeydown"])],14,Vj)]),_:3},8,["visible","placement","popper-class","teleported","transition"]))}});var Gj=je(Wj,[["__file","/home/runner/work/element-plus/element-plus/packages/components/autocomplete/src/autocomplete.vue"]]);const jj=yt(Gj),Xj=Xe({size:{type:[Number,String],values:Hr,default:"",validator:t=>at(t)},shape:{type:String,values:["circle","square"],default:"circle"},icon:{type:Qt},src:{type:String,default:""},alt:String,srcSet:String,fit:{type:Ae(String),default:"cover"}}),Kj={error:t=>t instanceof Event},Yj=["src","alt","srcset"],qj=de({name:"ElAvatar"}),Zj=de({...qj,props:Xj,emits:Kj,setup(t,{emit:e}){const n=t,i=Ue("avatar"),r=q(!1),a=R(()=>{const{size:c,icon:h,shape:l}=n,u=[i.b()];return ct(c)&&u.push(i.m(c)),h&&u.push(i.m("icon")),l&&u.push(i.m(l)),u}),d=R(()=>{const{size:c}=n;return at(c)?i.cssVarBlock({size:bn(c)||""}):void 0}),s=R(()=>({objectFit:n.fit}));Be(()=>n.src,()=>r.value=!1);function o(c){r.value=!0,e("error",c)}return(c,h)=>(I(),ne("span",{class:B(y(a)),style:nt(y(d))},[(c.src||c.srcSet)&&!r.value?(I(),ne("img",{key:0,src:c.src,alt:c.alt,srcset:c.srcSet,style:nt(y(s)),onError:o},null,44,Yj)):c.icon?(I(),ke(y(tt),{key:1},{default:ve(()=>[(I(),ke(Ct(c.icon)))]),_:1})):Le(c.$slots,"default",{key:2})],6))}});var Jj=je(Zj,[["__file","/home/runner/work/element-plus/element-plus/packages/components/avatar/src/avatar.vue"]]);const Qj=yt(Jj),e9={visibilityHeight:{type:Number,default:200},target:{type:String,default:""},right:{type:Number,default:40},bottom:{type:Number,default:40}},t9={click:t=>t instanceof MouseEvent},n9=(t,e,n)=>{const i=Jt(),r=Jt(),a=q(!1),d=()=>{i.value&&(a.value=i.value.scrollTop>=t.visibilityHeight)},s=c=>{var h;(h=i.value)==null||h.scrollTo({top:0,behavior:"smooth"}),e("click",c)},o=Ex(d,300,!0);return cn(r,"scroll",o),mt(()=>{var c;r.value=document,i.value=document.documentElement,t.target&&(i.value=(c=document.querySelector(t.target))!=null?c:void 0,i.value||Tn(n,`target does not exist: ${t.target}`),r.value=i.value)}),{visible:a,handleClick:s}},wE="ElBacktop",i9=de({name:wE}),r9=de({...i9,props:e9,emits:t9,setup(t,{emit:e}){const n=t,i=Ue("backtop"),{handleClick:r,visible:a}=n9(n,e,wE),d=R(()=>({right:`${n.right}px`,bottom:`${n.bottom}px`}));return(s,o)=>(I(),ke(wn,{name:`${y(i).namespace.value}-fade-in`},{default:ve(()=>[y(a)?(I(),ne("div",{key:0,style:nt(y(d)),class:B(y(i).b()),onClick:o[0]||(o[0]=ot((...c)=>y(r)&&y(r)(...c),["stop"]))},[Le(s.$slots,"default",{},()=>[ue(y(tt),{class:B(y(i).e("icon"))},{default:ve(()=>[ue(y(W$))]),_:1},8,["class"])])],6)):Te("v-if",!0)]),_:3},8,["name"]))}});var s9=je(r9,[["__file","/home/runner/work/element-plus/element-plus/packages/components/backtop/src/backtop.vue"]]);const o9=yt(s9),a9=Xe({value:{type:[String,Number],default:""},max:{type:Number,default:99},isDot:Boolean,hidden:Boolean,type:{type:String,values:["primary","success","warning","info","danger"],default:"danger"}}),l9=["textContent"],c9=de({name:"ElBadge"}),u9=de({...c9,props:a9,setup(t,{expose:e}){const n=t,i=Ue("badge"),r=R(()=>n.isDot?"":at(n.value)&&at(n.max)?n.max<n.value?`${n.max}+`:`${n.value}`:`${n.value}`);return e({content:r}),(a,d)=>(I(),ne("div",{class:B(y(i).b())},[Le(a.$slots,"default"),ue(wn,{name:`${y(i).namespace.value}-zoom-in-center`,persisted:""},{default:ve(()=>[pt(ae("sup",{class:B([y(i).e("content"),y(i).em("content",a.type),y(i).is("fixed",!!a.$slots.default),y(i).is("dot",a.isDot)]),textContent:$e(y(r))},null,10,l9),[[Dt,!a.hidden&&(y(r)||a.isDot)]])]),_:1},8,["name"])],2))}});var d9=je(u9,[["__file","/home/runner/work/element-plus/element-plus/packages/components/badge/src/badge.vue"]]);const CE=yt(d9),xE=Symbol("breadcrumbKey"),f9=Xe({separator:{type:String,default:"/"},separatorIcon:{type:Qt}}),h9=de({name:"ElBreadcrumb"}),p9=de({...h9,props:f9,setup(t){const e=t,n=Ue("breadcrumb"),i=q();return xt(xE,e),mt(()=>{const r=i.value.querySelectorAll(`.${n.e("item")}`);r.length&&r[r.length-1].setAttribute("aria-current","page")}),(r,a)=>(I(),ne("div",{ref_key:"breadcrumb",ref:i,class:B(y(n).b()),"aria-label":"Breadcrumb",role:"navigation"},[Le(r.$slots,"default")],2))}});var m9=je(p9,[["__file","/home/runner/work/element-plus/element-plus/packages/components/breadcrumb/src/breadcrumb.vue"]]);const g9=Xe({to:{type:Ae([String,Object]),default:""},replace:{type:Boolean,default:!1}}),v9=de({name:"ElBreadcrumbItem"}),y9=de({...v9,props:g9,setup(t){const e=t,n=vt(),i=Je(xE,void 0),r=Ue("breadcrumb"),{separator:a,separatorIcon:d}=Rn(i),s=n.appContext.config.globalProperties.$router,o=q(),c=()=>{!e.to||!s||(e.replace?s.replace(e.to):s.push(e.to))};return(h,l)=>(I(),ne("span",{class:B(y(r).e("item"))},[ae("span",{ref_key:"link",ref:o,class:B([y(r).e("inner"),y(r).is("link",!!h.to)]),role:"link",onClick:c},[Le(h.$slots,"default")],2),y(d)?(I(),ke(y(tt),{key:0,class:B(y(r).e("separator"))},{default:ve(()=>[(I(),ke(Ct(y(d))))]),_:1},8,["class"])):(I(),ne("span",{key:1,class:B(y(r).e("separator")),role:"presentation"},$e(y(a)),3))],2))}});var TE=je(y9,[["__file","/home/runner/work/element-plus/element-plus/packages/components/breadcrumb/src/breadcrumb-item.vue"]]);const b9=yt(m9,{BreadcrumbItem:TE}),_9=mn(TE),EE=Symbol("buttonGroupContextKey"),S9=(t,e)=>{Ir({from:"type.text",replacement:"link",version:"3.0.0",scope:"props",ref:"https://element-plus.org/en-US/component/button.html#button-attributes"},R(()=>t.type==="text"));const n=Je(EE,void 0),i=Rh("button"),{form:r}=gi(),a=En(R(()=>n==null?void 0:n.size)),d=Mi(),s=q(),o=Vn(),c=R(()=>t.type||(n==null?void 0:n.type)||""),h=R(()=>{var m,g,p;return(p=(g=t.autoInsertSpace)!=null?g:(m=i.value)==null?void 0:m.autoInsertSpace)!=null?p:!1}),l=R(()=>t.tag==="button"?{ariaDisabled:d.value||t.loading,disabled:d.value||t.loading,autofocus:t.autofocus,type:t.nativeType}:{}),u=R(()=>{var m;const g=(m=o.default)==null?void 0:m.call(o);if(h.value&&(g==null?void 0:g.length)===1){const p=g[0];if((p==null?void 0:p.type)===Hl){const v=p.children;return new RegExp("^\\p{Unified_Ideograph}{2}$","u").test(v.trim())}}return!1});return{_disabled:d,_size:a,_type:c,_ref:s,_props:l,shouldAddSpace:u,handleClick:m=>{t.nativeType==="reset"&&(r==null||r.resetFields()),e("click",m)}}},Xm=["default","primary","success","warning","info","danger","text",""],w9=["button","submit","reset"],Km=Xe({size:Xn,disabled:Boolean,type:{type:String,values:Xm,default:""},icon:{type:Qt},nativeType:{type:String,values:w9,default:"button"},loading:Boolean,loadingIcon:{type:Qt,default:()=>co},plain:Boolean,text:Boolean,link:Boolean,bg:Boolean,autofocus:Boolean,round:Boolean,circle:Boolean,color:String,dark:Boolean,autoInsertSpace:{type:Boolean,default:void 0},tag:{type:Ae([String,Object]),default:"button"}}),C9={click:t=>t instanceof MouseEvent};function Gn(t,e){x9(t)&&(t="100%");var n=T9(t);return t=e===360?t:Math.min(e,Math.max(0,parseFloat(t))),n&&(t=parseInt(String(t*e),10)/100),Math.abs(t-e)<1e-6?1:(e===360?t=(t<0?t%e+e:t%e)/parseFloat(String(e)):t=t%e/parseFloat(String(e)),t)}function Od(t){return Math.min(1,Math.max(0,t))}function x9(t){return typeof t=="string"&&t.indexOf(".")!==-1&&parseFloat(t)===1}function T9(t){return typeof t=="string"&&t.indexOf("%")!==-1}function ME(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function Ld(t){return t<=1?"".concat(Number(t)*100,"%"):t}function Fo(t){return t.length===1?"0"+t:String(t)}function E9(t,e,n){return{r:Gn(t,255)*255,g:Gn(e,255)*255,b:Gn(n,255)*255}}function aw(t,e,n){t=Gn(t,255),e=Gn(e,255),n=Gn(n,255);var i=Math.max(t,e,n),r=Math.min(t,e,n),a=0,d=0,s=(i+r)/2;if(i===r)d=0,a=0;else{var o=i-r;switch(d=s>.5?o/(2-i-r):o/(i+r),i){case t:a=(e-n)/o+(e<n?6:0);break;case e:a=(n-t)/o+2;break;case n:a=(t-e)/o+4;break}a/=6}return{h:a,s:d,l:s}}function $p(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*(6*n):n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function M9(t,e,n){var i,r,a;if(t=Gn(t,360),e=Gn(e,100),n=Gn(n,100),e===0)r=n,a=n,i=n;else{var d=n<.5?n*(1+e):n+e-n*e,s=2*n-d;i=$p(s,d,t+1/3),r=$p(s,d,t),a=$p(s,d,t-1/3)}return{r:i*255,g:r*255,b:a*255}}function lw(t,e,n){t=Gn(t,255),e=Gn(e,255),n=Gn(n,255);var i=Math.max(t,e,n),r=Math.min(t,e,n),a=0,d=i,s=i-r,o=i===0?0:s/i;if(i===r)a=0;else{switch(i){case t:a=(e-n)/s+(e<n?6:0);break;case e:a=(n-t)/s+2;break;case n:a=(t-e)/s+4;break}a/=6}return{h:a,s:o,v:d}}function A9(t,e,n){t=Gn(t,360)*6,e=Gn(e,100),n=Gn(n,100);var i=Math.floor(t),r=t-i,a=n*(1-e),d=n*(1-r*e),s=n*(1-(1-r)*e),o=i%6,c=[n,d,a,a,s,n][o],h=[s,n,n,d,a,a][o],l=[a,a,s,n,n,d][o];return{r:c*255,g:h*255,b:l*255}}function cw(t,e,n,i){var r=[Fo(Math.round(t).toString(16)),Fo(Math.round(e).toString(16)),Fo(Math.round(n).toString(16))];return i&&r[0].startsWith(r[0].charAt(1))&&r[1].startsWith(r[1].charAt(1))&&r[2].startsWith(r[2].charAt(1))?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function k9(t,e,n,i,r){var a=[Fo(Math.round(t).toString(16)),Fo(Math.round(e).toString(16)),Fo(Math.round(n).toString(16)),Fo(R9(i))];return r&&a[0].startsWith(a[0].charAt(1))&&a[1].startsWith(a[1].charAt(1))&&a[2].startsWith(a[2].charAt(1))&&a[3].startsWith(a[3].charAt(1))?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")}function R9(t){return Math.round(parseFloat(t)*255).toString(16)}function uw(t){return Pi(t)/255}function Pi(t){return parseInt(t,16)}function P9(t){return{r:t>>16,g:(t&65280)>>8,b:t&255}}var Ym={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function O9(t){var e={r:0,g:0,b:0},n=1,i=null,r=null,a=null,d=!1,s=!1;return typeof t=="string"&&(t=D9(t)),typeof t=="object"&&(qr(t.r)&&qr(t.g)&&qr(t.b)?(e=E9(t.r,t.g,t.b),d=!0,s=String(t.r).substr(-1)==="%"?"prgb":"rgb"):qr(t.h)&&qr(t.s)&&qr(t.v)?(i=Ld(t.s),r=Ld(t.v),e=A9(t.h,i,r),d=!0,s="hsv"):qr(t.h)&&qr(t.s)&&qr(t.l)&&(i=Ld(t.s),a=Ld(t.l),e=M9(t.h,i,a),d=!0,s="hsl"),Object.prototype.hasOwnProperty.call(t,"a")&&(n=t.a)),n=ME(n),{ok:d,format:t.format||s,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:n}}var L9="[-\\+]?\\d+%?",I9="[-\\+]?\\d*\\.\\d+%?",Gs="(?:".concat(I9,")|(?:").concat(L9,")"),Wp="[\\s|\\(]+(".concat(Gs,")[,|\\s]+(").concat(Gs,")[,|\\s]+(").concat(Gs,")\\s*\\)?"),Gp="[\\s|\\(]+(".concat(Gs,")[,|\\s]+(").concat(Gs,")[,|\\s]+(").concat(Gs,")[,|\\s]+(").concat(Gs,")\\s*\\)?"),ar={CSS_UNIT:new RegExp(Gs),rgb:new RegExp("rgb"+Wp),rgba:new RegExp("rgba"+Gp),hsl:new RegExp("hsl"+Wp),hsla:new RegExp("hsla"+Gp),hsv:new RegExp("hsv"+Wp),hsva:new RegExp("hsva"+Gp),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function D9(t){if(t=t.trim().toLowerCase(),t.length===0)return!1;var e=!1;if(Ym[t])t=Ym[t],e=!0;else if(t==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var n=ar.rgb.exec(t);return n?{r:n[1],g:n[2],b:n[3]}:(n=ar.rgba.exec(t),n?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=ar.hsl.exec(t),n?{h:n[1],s:n[2],l:n[3]}:(n=ar.hsla.exec(t),n?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=ar.hsv.exec(t),n?{h:n[1],s:n[2],v:n[3]}:(n=ar.hsva.exec(t),n?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=ar.hex8.exec(t),n?{r:Pi(n[1]),g:Pi(n[2]),b:Pi(n[3]),a:uw(n[4]),format:e?"name":"hex8"}:(n=ar.hex6.exec(t),n?{r:Pi(n[1]),g:Pi(n[2]),b:Pi(n[3]),format:e?"name":"hex"}:(n=ar.hex4.exec(t),n?{r:Pi(n[1]+n[1]),g:Pi(n[2]+n[2]),b:Pi(n[3]+n[3]),a:uw(n[4]+n[4]),format:e?"name":"hex8"}:(n=ar.hex3.exec(t),n?{r:Pi(n[1]+n[1]),g:Pi(n[2]+n[2]),b:Pi(n[3]+n[3]),format:e?"name":"hex"}:!1)))))))))}function qr(t){return!!ar.CSS_UNIT.exec(String(t))}var AE=function(){function t(e,n){e===void 0&&(e=""),n===void 0&&(n={});var i;if(e instanceof t)return e;typeof e=="number"&&(e=P9(e)),this.originalInput=e;var r=O9(e);this.originalInput=e,this.r=r.r,this.g=r.g,this.b=r.b,this.a=r.a,this.roundA=Math.round(100*this.a)/100,this.format=(i=n.format)!==null&&i!==void 0?i:r.format,this.gradientType=n.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=r.ok}return t.prototype.isDark=function(){return this.getBrightness()<128},t.prototype.isLight=function(){return!this.isDark()},t.prototype.getBrightness=function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},t.prototype.getLuminance=function(){var e=this.toRgb(),n,i,r,a=e.r/255,d=e.g/255,s=e.b/255;return a<=.03928?n=a/12.92:n=Math.pow((a+.055)/1.055,2.4),d<=.03928?i=d/12.92:i=Math.pow((d+.055)/1.055,2.4),s<=.03928?r=s/12.92:r=Math.pow((s+.055)/1.055,2.4),.2126*n+.7152*i+.0722*r},t.prototype.getAlpha=function(){return this.a},t.prototype.setAlpha=function(e){return this.a=ME(e),this.roundA=Math.round(100*this.a)/100,this},t.prototype.isMonochrome=function(){var e=this.toHsl().s;return e===0},t.prototype.toHsv=function(){var e=lw(this.r,this.g,this.b);return{h:e.h*360,s:e.s,v:e.v,a:this.a}},t.prototype.toHsvString=function(){var e=lw(this.r,this.g,this.b),n=Math.round(e.h*360),i=Math.round(e.s*100),r=Math.round(e.v*100);return this.a===1?"hsv(".concat(n,", ").concat(i,"%, ").concat(r,"%)"):"hsva(".concat(n,", ").concat(i,"%, ").concat(r,"%, ").concat(this.roundA,")")},t.prototype.toHsl=function(){var e=aw(this.r,this.g,this.b);return{h:e.h*360,s:e.s,l:e.l,a:this.a}},t.prototype.toHslString=function(){var e=aw(this.r,this.g,this.b),n=Math.round(e.h*360),i=Math.round(e.s*100),r=Math.round(e.l*100);return this.a===1?"hsl(".concat(n,", ").concat(i,"%, ").concat(r,"%)"):"hsla(".concat(n,", ").concat(i,"%, ").concat(r,"%, ").concat(this.roundA,")")},t.prototype.toHex=function(e){return e===void 0&&(e=!1),cw(this.r,this.g,this.b,e)},t.prototype.toHexString=function(e){return e===void 0&&(e=!1),"#"+this.toHex(e)},t.prototype.toHex8=function(e){return e===void 0&&(e=!1),k9(this.r,this.g,this.b,this.a,e)},t.prototype.toHex8String=function(e){return e===void 0&&(e=!1),"#"+this.toHex8(e)},t.prototype.toHexShortString=function(e){return e===void 0&&(e=!1),this.a===1?this.toHexString(e):this.toHex8String(e)},t.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},t.prototype.toRgbString=function(){var e=Math.round(this.r),n=Math.round(this.g),i=Math.round(this.b);return this.a===1?"rgb(".concat(e,", ").concat(n,", ").concat(i,")"):"rgba(".concat(e,", ").concat(n,", ").concat(i,", ").concat(this.roundA,")")},t.prototype.toPercentageRgb=function(){var e=function(n){return"".concat(Math.round(Gn(n,255)*100),"%")};return{r:e(this.r),g:e(this.g),b:e(this.b),a:this.a}},t.prototype.toPercentageRgbString=function(){var e=function(n){return Math.round(Gn(n,255)*100)};return this.a===1?"rgb(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%)"):"rgba(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%, ").concat(this.roundA,")")},t.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var e="#"+cw(this.r,this.g,this.b,!1),n=0,i=Object.entries(Ym);n<i.length;n++){var r=i[n],a=r[0],d=r[1];if(e===d)return a}return!1},t.prototype.toString=function(e){var n=!!e;e=e??this.format;var i=!1,r=this.a<1&&this.a>=0,a=!n&&r&&(e.startsWith("hex")||e==="name");return a?e==="name"&&this.a===0?this.toName():this.toRgbString():(e==="rgb"&&(i=this.toRgbString()),e==="prgb"&&(i=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(i=this.toHexString()),e==="hex3"&&(i=this.toHexString(!0)),e==="hex4"&&(i=this.toHex8String(!0)),e==="hex8"&&(i=this.toHex8String()),e==="name"&&(i=this.toName()),e==="hsl"&&(i=this.toHslString()),e==="hsv"&&(i=this.toHsvString()),i||this.toHexString())},t.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},t.prototype.clone=function(){return new t(this.toString())},t.prototype.lighten=function(e){e===void 0&&(e=10);var n=this.toHsl();return n.l+=e/100,n.l=Od(n.l),new t(n)},t.prototype.brighten=function(e){e===void 0&&(e=10);var n=this.toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(255*-(e/100)))),n.g=Math.max(0,Math.min(255,n.g-Math.round(255*-(e/100)))),n.b=Math.max(0,Math.min(255,n.b-Math.round(255*-(e/100)))),new t(n)},t.prototype.darken=function(e){e===void 0&&(e=10);var n=this.toHsl();return n.l-=e/100,n.l=Od(n.l),new t(n)},t.prototype.tint=function(e){return e===void 0&&(e=10),this.mix("white",e)},t.prototype.shade=function(e){return e===void 0&&(e=10),this.mix("black",e)},t.prototype.desaturate=function(e){e===void 0&&(e=10);var n=this.toHsl();return n.s-=e/100,n.s=Od(n.s),new t(n)},t.prototype.saturate=function(e){e===void 0&&(e=10);var n=this.toHsl();return n.s+=e/100,n.s=Od(n.s),new t(n)},t.prototype.greyscale=function(){return this.desaturate(100)},t.prototype.spin=function(e){var n=this.toHsl(),i=(n.h+e)%360;return n.h=i<0?360+i:i,new t(n)},t.prototype.mix=function(e,n){n===void 0&&(n=50);var i=this.toRgb(),r=new t(e).toRgb(),a=n/100,d={r:(r.r-i.r)*a+i.r,g:(r.g-i.g)*a+i.g,b:(r.b-i.b)*a+i.b,a:(r.a-i.a)*a+i.a};return new t(d)},t.prototype.analogous=function(e,n){e===void 0&&(e=6),n===void 0&&(n=30);var i=this.toHsl(),r=360/n,a=[this];for(i.h=(i.h-(r*e>>1)+720)%360;--e;)i.h=(i.h+r)%360,a.push(new t(i));return a},t.prototype.complement=function(){var e=this.toHsl();return e.h=(e.h+180)%360,new t(e)},t.prototype.monochromatic=function(e){e===void 0&&(e=6);for(var n=this.toHsv(),i=n.h,r=n.s,a=n.v,d=[],s=1/e;e--;)d.push(new t({h:i,s:r,v:a})),a=(a+s)%1;return d},t.prototype.splitcomplement=function(){var e=this.toHsl(),n=e.h;return[this,new t({h:(n+72)%360,s:e.s,l:e.l}),new t({h:(n+216)%360,s:e.s,l:e.l})]},t.prototype.onBackground=function(e){var n=this.toRgb(),i=new t(e).toRgb(),r=n.a+i.a*(1-n.a);return new t({r:(n.r*n.a+i.r*i.a*(1-n.a))/r,g:(n.g*n.a+i.g*i.a*(1-n.a))/r,b:(n.b*n.a+i.b*i.a*(1-n.a))/r,a:r})},t.prototype.triad=function(){return this.polyad(3)},t.prototype.tetrad=function(){return this.polyad(4)},t.prototype.polyad=function(e){for(var n=this.toHsl(),i=n.h,r=[this],a=360/e,d=1;d<e;d++)r.push(new t({h:(i+d*a)%360,s:n.s,l:n.l}));return r},t.prototype.equals=function(e){return this.toRgbString()===new t(e).toRgbString()},t}();function Os(t,e=20){return t.mix("#141414",e).toString()}function N9(t){const e=Mi(),n=Ue("button");return R(()=>{let i={};const r=t.color;if(r){const a=new AE(r),d=t.dark?a.tint(20).toString():Os(a,20);if(t.plain)i=n.cssVarBlock({"bg-color":t.dark?Os(a,90):a.tint(90).toString(),"text-color":r,"border-color":t.dark?Os(a,50):a.tint(50).toString(),"hover-text-color":`var(${n.cssVarName("color-white")})`,"hover-bg-color":r,"hover-border-color":r,"active-bg-color":d,"active-text-color":`var(${n.cssVarName("color-white")})`,"active-border-color":d}),e.value&&(i[n.cssVarBlockName("disabled-bg-color")]=t.dark?Os(a,90):a.tint(90).toString(),i[n.cssVarBlockName("disabled-text-color")]=t.dark?Os(a,50):a.tint(50).toString(),i[n.cssVarBlockName("disabled-border-color")]=t.dark?Os(a,80):a.tint(80).toString());else{const s=t.dark?Os(a,30):a.tint(30).toString(),o=a.isDark()?`var(${n.cssVarName("color-white")})`:`var(${n.cssVarName("color-black")})`;if(i=n.cssVarBlock({"bg-color":r,"text-color":o,"border-color":r,"hover-bg-color":s,"hover-text-color":o,"hover-border-color":s,"active-bg-color":d,"active-border-color":d}),e.value){const c=t.dark?Os(a,50):a.tint(50).toString();i[n.cssVarBlockName("disabled-bg-color")]=c,i[n.cssVarBlockName("disabled-text-color")]=t.dark?"rgba(255, 255, 255, 0.5)":`var(${n.cssVarName("color-white")})`,i[n.cssVarBlockName("disabled-border-color")]=c}}}return i})}const F9=de({name:"ElButton"}),B9=de({...F9,props:Km,emits:C9,setup(t,{expose:e,emit:n}){const i=t,r=N9(i),a=Ue("button"),{_ref:d,_size:s,_type:o,_disabled:c,_props:h,shouldAddSpace:l,handleClick:u}=S9(i,n);return e({ref:d,size:s,type:o,disabled:c,shouldAddSpace:l}),(f,m)=>(I(),ke(Ct(f.tag),St({ref_key:"_ref",ref:d},y(h),{class:[y(a).b(),y(a).m(y(o)),y(a).m(y(s)),y(a).is("disabled",y(c)),y(a).is("loading",f.loading),y(a).is("plain",f.plain),y(a).is("round",f.round),y(a).is("circle",f.circle),y(a).is("text",f.text),y(a).is("link",f.link),y(a).is("has-bg",f.bg)],style:y(r),onClick:y(u)}),{default:ve(()=>[f.loading?(I(),ne(Qe,{key:0},[f.$slots.loading?Le(f.$slots,"loading",{key:0}):(I(),ke(y(tt),{key:1,class:B(y(a).is("loading"))},{default:ve(()=>[(I(),ke(Ct(f.loadingIcon)))]),_:1},8,["class"]))],64)):f.icon||f.$slots.icon?(I(),ke(y(tt),{key:1},{default:ve(()=>[f.icon?(I(),ke(Ct(f.icon),{key:0})):Le(f.$slots,"icon",{key:1})]),_:3})):Te("v-if",!0),f.$slots.default?(I(),ne("span",{key:2,class:B({[y(a).em("text","expand")]:y(l)})},[Le(f.$slots,"default")],2)):Te("v-if",!0)]),_:3},16,["class","style","onClick"]))}});var U9=je(B9,[["__file","/home/runner/work/element-plus/element-plus/packages/components/button/src/button.vue"]]);const V9={size:Km.size,type:Km.type},H9=de({name:"ElButtonGroup"}),z9=de({...H9,props:V9,setup(t){const e=t;xt(EE,Ft({size:ln(e,"size"),type:ln(e,"type")}));const n=Ue("button");return(i,r)=>(I(),ne("div",{class:B(`${y(n).b("group")}`)},[Le(i.$slots,"default")],2))}});var kE=je(z9,[["__file","/home/runner/work/element-plus/element-plus/packages/components/button/src/button-group.vue"]]);const jn=yt(U9,{ButtonGroup:kE}),RE=mn(kE);var PE={exports:{}};(function(t,e){(function(n,i){t.exports=i()})(_s,function(){var n=1e3,i=6e4,r=36e5,a="millisecond",d="second",s="minute",o="hour",c="day",h="week",l="month",u="quarter",f="year",m="date",g="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,v=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,b={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(U){var j=["th","st","nd","rd"],V=U%100;return"["+U+(j[(V-20)%10]||j[V]||j[0])+"]"}},_=function(U,j,V){var k=String(U);return!k||k.length>=j?U:""+Array(j+1-k.length).join(V)+U},S={s:_,z:function(U){var j=-U.utcOffset(),V=Math.abs(j),k=Math.floor(V/60),F=V%60;return(j<=0?"+":"-")+_(k,2,"0")+":"+_(F,2,"0")},m:function U(j,V){if(j.date()<V.date())return-U(V,j);var k=12*(V.year()-j.year())+(V.month()-j.month()),F=j.clone().add(k,l),T=V-F<0,P=j.clone().add(k+(T?-1:1),l);return+(-(k+(V-F)/(T?F-P:P-F))||0)},a:function(U){return U<0?Math.ceil(U)||0:Math.floor(U)},p:function(U){return{M:l,y:f,w:h,d:c,D:m,h:o,m:s,s:d,ms:a,Q:u}[U]||String(U||"").toLowerCase().replace(/s$/,"")},u:function(U){return U===void 0}},w="en",C={};C[w]=b;var x="$isDayjsObject",M=function(U){return U instanceof D||!(!U||!U[x])},E=function U(j,V,k){var F;if(!j)return w;if(typeof j=="string"){var T=j.toLowerCase();C[T]&&(F=T),V&&(C[T]=V,F=T);var P=j.split("-");if(!F&&P.length>1)return U(P[0])}else{var H=j.name;C[H]=j,F=H}return!k&&F&&(w=F),F||!k&&w},A=function(U,j){if(M(U))return U.clone();var V=typeof j=="object"?j:{};return V.date=U,V.args=arguments,new D(V)},O=S;O.l=E,O.i=M,O.w=function(U,j){return A(U,{locale:j.$L,utc:j.$u,x:j.$x,$offset:j.$offset})};var D=function(){function U(V){this.$L=E(V.locale,null,!0),this.parse(V),this.$x=this.$x||V.x||{},this[x]=!0}var j=U.prototype;return j.parse=function(V){this.$d=function(k){var F=k.date,T=k.utc;if(F===null)return new Date(NaN);if(O.u(F))return new Date;if(F instanceof Date)return new Date(F);if(typeof F=="string"&&!/Z$/i.test(F)){var P=F.match(p);if(P){var H=P[2]-1||0,N=(P[7]||"0").substring(0,3);return T?new Date(Date.UTC(P[1],H,P[3]||1,P[4]||0,P[5]||0,P[6]||0,N)):new Date(P[1],H,P[3]||1,P[4]||0,P[5]||0,P[6]||0,N)}}return new Date(F)}(V),this.init()},j.init=function(){var V=this.$d;this.$y=V.getFullYear(),this.$M=V.getMonth(),this.$D=V.getDate(),this.$W=V.getDay(),this.$H=V.getHours(),this.$m=V.getMinutes(),this.$s=V.getSeconds(),this.$ms=V.getMilliseconds()},j.$utils=function(){return O},j.isValid=function(){return this.$d.toString()!==g},j.isSame=function(V,k){var F=A(V);return this.startOf(k)<=F&&F<=this.endOf(k)},j.isAfter=function(V,k){return A(V)<this.startOf(k)},j.isBefore=function(V,k){return this.endOf(k)<A(V)},j.$g=function(V,k,F){return O.u(V)?this[k]:this.set(F,V)},j.unix=function(){return Math.floor(this.valueOf()/1e3)},j.valueOf=function(){return this.$d.getTime()},j.startOf=function(V,k){var F=this,T=!!O.u(k)||k,P=O.p(V),H=function(ie,re){var _e=O.w(F.$u?Date.UTC(F.$y,re,ie):new Date(F.$y,re,ie),F);return T?_e:_e.endOf(c)},N=function(ie,re){return O.w(F.toDate()[ie].apply(F.toDate("s"),(T?[0,0,0,0]:[23,59,59,999]).slice(re)),F)},G=this.$W,$=this.$M,z=this.$D,Z="set"+(this.$u?"UTC":"");switch(P){case f:return T?H(1,0):H(31,11);case l:return T?H(1,$):H(0,$+1);case h:var W=this.$locale().weekStart||0,te=(G<W?G+7:G)-W;return H(T?z-te:z+(6-te),$);case c:case m:return N(Z+"Hours",0);case o:return N(Z+"Minutes",1);case s:return N(Z+"Seconds",2);case d:return N(Z+"Milliseconds",3);default:return this.clone()}},j.endOf=function(V){return this.startOf(V,!1)},j.$set=function(V,k){var F,T=O.p(V),P="set"+(this.$u?"UTC":""),H=(F={},F[c]=P+"Date",F[m]=P+"Date",F[l]=P+"Month",F[f]=P+"FullYear",F[o]=P+"Hours",F[s]=P+"Minutes",F[d]=P+"Seconds",F[a]=P+"Milliseconds",F)[T],N=T===c?this.$D+(k-this.$W):k;if(T===l||T===f){var G=this.clone().set(m,1);G.$d[H](N),G.init(),this.$d=G.set(m,Math.min(this.$D,G.daysInMonth())).$d}else H&&this.$d[H](N);return this.init(),this},j.set=function(V,k){return this.clone().$set(V,k)},j.get=function(V){return this[O.p(V)]()},j.add=function(V,k){var F,T=this;V=Number(V);var P=O.p(k),H=function($){var z=A(T);return O.w(z.date(z.date()+Math.round($*V)),T)};if(P===l)return this.set(l,this.$M+V);if(P===f)return this.set(f,this.$y+V);if(P===c)return H(1);if(P===h)return H(7);var N=(F={},F[s]=i,F[o]=r,F[d]=n,F)[P]||1,G=this.$d.getTime()+V*N;return O.w(G,this)},j.subtract=function(V,k){return this.add(-1*V,k)},j.format=function(V){var k=this,F=this.$locale();if(!this.isValid())return F.invalidDate||g;var T=V||"YYYY-MM-DDTHH:mm:ssZ",P=O.z(this),H=this.$H,N=this.$m,G=this.$M,$=F.weekdays,z=F.months,Z=F.meridiem,W=function(re,_e,Pe,K){return re&&(re[_e]||re(k,T))||Pe[_e].slice(0,K)},te=function(re){return O.s(H%12||12,re,"0")},ie=Z||function(re,_e,Pe){var K=re<12?"AM":"PM";return Pe?K.toLowerCase():K};return T.replace(v,function(re,_e){return _e||function(Pe){switch(Pe){case"YY":return String(k.$y).slice(-2);case"YYYY":return O.s(k.$y,4,"0");case"M":return G+1;case"MM":return O.s(G+1,2,"0");case"MMM":return W(F.monthsShort,G,z,3);case"MMMM":return W(z,G);case"D":return k.$D;case"DD":return O.s(k.$D,2,"0");case"d":return String(k.$W);case"dd":return W(F.weekdaysMin,k.$W,$,2);case"ddd":return W(F.weekdaysShort,k.$W,$,3);case"dddd":return $[k.$W];case"H":return String(H);case"HH":return O.s(H,2,"0");case"h":return te(1);case"hh":return te(2);case"a":return ie(H,N,!0);case"A":return ie(H,N,!1);case"m":return String(N);case"mm":return O.s(N,2,"0");case"s":return String(k.$s);case"ss":return O.s(k.$s,2,"0");case"SSS":return O.s(k.$ms,3,"0");case"Z":return P}return null}(re)||P.replace(":","")})},j.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},j.diff=function(V,k,F){var T,P=this,H=O.p(k),N=A(V),G=(N.utcOffset()-this.utcOffset())*i,$=this-N,z=function(){return O.m(P,N)};switch(H){case f:T=z()/12;break;case l:T=z();break;case u:T=z()/3;break;case h:T=($-G)/6048e5;break;case c:T=($-G)/864e5;break;case o:T=$/r;break;case s:T=$/i;break;case d:T=$/n;break;default:T=$}return F?T:O.a(T)},j.daysInMonth=function(){return this.endOf(l).$D},j.$locale=function(){return C[this.$L]},j.locale=function(V,k){if(!V)return this.$L;var F=this.clone(),T=E(V,k,!0);return T&&(F.$L=T),F},j.clone=function(){return O.w(this.$d,this)},j.toDate=function(){return new Date(this.valueOf())},j.toJSON=function(){return this.isValid()?this.toISOString():null},j.toISOString=function(){return this.$d.toISOString()},j.toString=function(){return this.$d.toUTCString()},U}(),L=D.prototype;return A.prototype=L,[["$ms",a],["$s",d],["$m",s],["$H",o],["$W",c],["$M",l],["$y",f],["$D",m]].forEach(function(U){L[U[1]]=function(j){return this.$g(j,U[0],U[1])}}),A.extend=function(U,j){return U.$i||(U(j,D,A),U.$i=!0),A},A.locale=E,A.isDayjs=M,A.unix=function(U){return A(1e3*U)},A.en=C[w],A.Ls=C,A.p={},A})})(PE);var $9=PE.exports;const gt=Vr($9);var OE={exports:{}};(function(t,e){(function(n,i){t.exports=i()})(_s,function(){var n={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},i=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,r=/\d\d/,a=/\d\d?/,d=/\d*[^-_:/,()\s\d]+/,s={},o=function(g){return(g=+g)+(g>68?1900:2e3)},c=function(g){return function(p){this[g]=+p}},h=[/[+-]\d\d:?(\d\d)?|Z/,function(g){(this.zone||(this.zone={})).offset=function(p){if(!p||p==="Z")return 0;var v=p.match(/([+-]|\d\d)/g),b=60*v[1]+(+v[2]||0);return b===0?0:v[0]==="+"?-b:b}(g)}],l=function(g){var p=s[g];return p&&(p.indexOf?p:p.s.concat(p.f))},u=function(g,p){var v,b=s.meridiem;if(b){for(var _=1;_<=24;_+=1)if(g.indexOf(b(_,0,p))>-1){v=_>12;break}}else v=g===(p?"pm":"PM");return v},f={A:[d,function(g){this.afternoon=u(g,!1)}],a:[d,function(g){this.afternoon=u(g,!0)}],S:[/\d/,function(g){this.milliseconds=100*+g}],SS:[r,function(g){this.milliseconds=10*+g}],SSS:[/\d{3}/,function(g){this.milliseconds=+g}],s:[a,c("seconds")],ss:[a,c("seconds")],m:[a,c("minutes")],mm:[a,c("minutes")],H:[a,c("hours")],h:[a,c("hours")],HH:[a,c("hours")],hh:[a,c("hours")],D:[a,c("day")],DD:[r,c("day")],Do:[d,function(g){var p=s.ordinal,v=g.match(/\d+/);if(this.day=v[0],p)for(var b=1;b<=31;b+=1)p(b).replace(/\[|\]/g,"")===g&&(this.day=b)}],M:[a,c("month")],MM:[r,c("month")],MMM:[d,function(g){var p=l("months"),v=(l("monthsShort")||p.map(function(b){return b.slice(0,3)})).indexOf(g)+1;if(v<1)throw new Error;this.month=v%12||v}],MMMM:[d,function(g){var p=l("months").indexOf(g)+1;if(p<1)throw new Error;this.month=p%12||p}],Y:[/[+-]?\d+/,c("year")],YY:[r,function(g){this.year=o(g)}],YYYY:[/\d{4}/,c("year")],Z:h,ZZ:h};function m(g){var p,v;p=g,v=s&&s.formats;for(var b=(g=p.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(E,A,O){var D=O&&O.toUpperCase();return A||v[O]||n[O]||v[D].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(L,U,j){return U||j.slice(1)})})).match(i),_=b.length,S=0;S<_;S+=1){var w=b[S],C=f[w],x=C&&C[0],M=C&&C[1];b[S]=M?{regex:x,parser:M}:w.replace(/^\[|\]$/g,"")}return function(E){for(var A={},O=0,D=0;O<_;O+=1){var L=b[O];if(typeof L=="string")D+=L.length;else{var U=L.regex,j=L.parser,V=E.slice(D),k=U.exec(V)[0];j.call(A,k),E=E.replace(k,"")}}return function(F){var T=F.afternoon;if(T!==void 0){var P=F.hours;T?P<12&&(F.hours+=12):P===12&&(F.hours=0),delete F.afternoon}}(A),A}}return function(g,p,v){v.p.customParseFormat=!0,g&&g.parseTwoDigitYear&&(o=g.parseTwoDigitYear);var b=p.prototype,_=b.parse;b.parse=function(S){var w=S.date,C=S.utc,x=S.args;this.$u=C;var M=x[1];if(typeof M=="string"){var E=x[2]===!0,A=x[3]===!0,O=E||A,D=x[2];A&&(D=x[2]),s=this.$locale(),!E&&D&&(s=v.Ls[D]),this.$d=function(V,k,F){try{if(["x","X"].indexOf(k)>-1)return new Date((k==="X"?1e3:1)*V);var T=m(k)(V),P=T.year,H=T.month,N=T.day,G=T.hours,$=T.minutes,z=T.seconds,Z=T.milliseconds,W=T.zone,te=new Date,ie=N||(P||H?1:te.getDate()),re=P||te.getFullYear(),_e=0;P&&!H||(_e=H>0?H-1:te.getMonth());var Pe=G||0,K=$||0,Q=z||0,fe=Z||0;return W?new Date(Date.UTC(re,_e,ie,Pe,K,Q,fe+60*W.offset*1e3)):F?new Date(Date.UTC(re,_e,ie,Pe,K,Q,fe)):new Date(re,_e,ie,Pe,K,Q,fe)}catch{return new Date("")}}(w,M,C),this.init(),D&&D!==!0&&(this.$L=this.locale(D).$L),O&&w!=this.format(M)&&(this.$d=new Date("")),s={}}else if(M instanceof Array)for(var L=M.length,U=1;U<=L;U+=1){x[1]=M[U-1];var j=v.apply(this,x);if(j.isValid()){this.$d=j.$d,this.$L=j.$L,this.init();break}U===L&&(this.$d=new Date(""))}else _.call(this,S)}}})})(OE);var W9=OE.exports;const h0=Vr(W9),dw=["hours","minutes","seconds"],qm="HH:mm:ss",Ha="YYYY-MM-DD",G9={date:Ha,dates:Ha,week:"gggg[w]ww",year:"YYYY",month:"YYYY-MM",datetime:`${Ha} ${qm}`,monthrange:"YYYY-MM",daterange:Ha,datetimerange:`${Ha} ${qm}`},jp=(t,e)=>[t>0?t-1:void 0,t,t<e?t+1:void 0],qs=t=>Array.from(Array.from({length:t}).keys()),LE=t=>t.replace(/\W?m{1,2}|\W?ZZ/g,"").replace(/\W?h{1,2}|\W?s{1,3}|\W?a/gi,"").trim(),IE=t=>t.replace(/\W?D{1,2}|\W?Do|\W?d{1,4}|\W?M{1,4}|\W?Y{2,4}/g,"").trim(),fw=function(t,e){const n=qo(t),i=qo(e);return n&&i?t.getTime()===e.getTime():!n&&!i?t===e:!1},hw=function(t,e){const n=Ze(t),i=Ze(e);return n&&i?t.length!==e.length?!1:t.every((r,a)=>fw(r,e[a])):!n&&!i?fw(t,e):!1},pw=function(t,e,n){const i=$i(e)||e==="x"?gt(t).locale(n):gt(t,e).locale(n);return i.isValid()?i:void 0},mw=function(t,e,n){return $i(e)?t:e==="x"?+t:gt(t).locale(n).format(e)},Xp=(t,e)=>{var n;const i=[],r=e==null?void 0:e();for(let a=0;a<t;a++)i.push((n=r==null?void 0:r.includes(a))!=null?n:!1);return i},DE=Xe({disabledHours:{type:Ae(Function)},disabledMinutes:{type:Ae(Function)},disabledSeconds:{type:Ae(Function)}}),NE=Xe({visible:Boolean,actualVisible:{type:Boolean,default:void 0},format:{type:String,default:""}}),p0=Xe({id:{type:Ae([Array,String])},name:{type:Ae([Array,String]),default:""},popperClass:{type:String,default:""},format:String,valueFormat:String,type:{type:String,default:""},clearable:{type:Boolean,default:!0},clearIcon:{type:Ae([String,Object]),default:lo},editable:{type:Boolean,default:!0},prefixIcon:{type:Ae([String,Object]),default:""},size:Xn,readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:""},popperOptions:{type:Ae(Object),default:()=>({})},modelValue:{type:Ae([Date,Array,String,Number]),default:""},rangeSeparator:{type:String,default:"-"},startPlaceholder:String,endPlaceholder:String,defaultValue:{type:Ae([Date,Array])},defaultTime:{type:Ae([Date,Array])},isRange:{type:Boolean,default:!1},...DE,disabledDate:{type:Function},cellClassName:{type:Function},shortcuts:{type:Array,default:()=>[]},arrowControl:{type:Boolean,default:!1},label:{type:String,default:void 0},tabindex:{type:Ae([String,Number]),default:0},validateEvent:{type:Boolean,default:!0},unlinkPanels:Boolean}),j9=["id","name","placeholder","value","disabled","readonly"],X9=["id","name","placeholder","value","disabled","readonly"],K9=de({name:"Picker"}),Y9=de({...K9,props:p0,emits:["update:modelValue","change","focus","blur","calendar-change","panel-change","visible-change","keydown"],setup(t,{expose:e,emit:n}){const i=t,{lang:r}=Pt(),a=Ue("date"),d=Ue("input"),s=Ue("range"),{form:o,formItem:c}=gi(),h=Je("ElPopperOptions",{}),l=q(),u=q(),f=q(!1),m=q(!1),g=q(null);let p=!1,v=!1;Be(f,J=>{J?et(()=>{J&&(g.value=i.modelValue)}):(se.value=null,et(()=>{b(i.modelValue)}))});const b=(J,ce)=>{(ce||!hw(J,g.value))&&(n("change",J),i.validateEvent&&(c==null||c.validate("change").catch(ye=>void 0)))},_=J=>{if(!hw(i.modelValue,J)){let ce;Ze(J)?ce=J.map(ye=>mw(ye,i.valueFormat,r.value)):J&&(ce=mw(J,i.valueFormat,r.value)),n("update:modelValue",J&&ce,r.value)}},S=J=>{n("keydown",J)},w=R(()=>{if(u.value){const J=K.value?u.value:u.value.$el;return Array.from(J.querySelectorAll("input"))}return[]}),C=(J,ce,ye)=>{const Oe=w.value;Oe.length&&(!ye||ye==="min"?(Oe[0].setSelectionRange(J,ce),Oe[0].focus()):ye==="max"&&(Oe[1].setSelectionRange(J,ce),Oe[1].focus()))},x=()=>{j(!0,!0),et(()=>{v=!1})},M=(J="",ce=!1)=>{ce||(v=!0),f.value=ce;let ye;Ze(J)?ye=J.map(Oe=>Oe.toDate()):ye=J&&J.toDate(),se.value=null,_(ye)},E=()=>{m.value=!0},A=()=>{n("visible-change",!0)},O=J=>{(J==null?void 0:J.key)===rt.esc&&j(!0,!0)},D=()=>{m.value=!1,f.value=!1,v=!1,n("visible-change",!1)},L=()=>{f.value=!0},U=()=>{f.value=!1},j=(J=!0,ce=!1)=>{v=ce;const[ye,Oe]=y(w);let ze=ye;!J&&K.value&&(ze=Oe),ze&&ze.focus()},V=J=>{i.readonly||T.value||f.value||v||(f.value=!0,n("focus",J))};let k;const F=J=>{const ce=async()=>{setTimeout(()=>{var ye;k===ce&&(!((ye=l.value)!=null&&ye.isFocusInsideContent()&&!p)&&w.value.filter(Oe=>Oe.contains(document.activeElement)).length===0&&(me(),f.value=!1,n("blur",J),i.validateEvent&&(c==null||c.validate("blur").catch(Oe=>void 0))),p=!1)},0)};k=ce,ce()},T=R(()=>i.disabled||(o==null?void 0:o.disabled)),P=R(()=>{let J;if(te.value?he.value.getDefaultValue&&(J=he.value.getDefaultValue()):Ze(i.modelValue)?J=i.modelValue.map(ce=>pw(ce,i.valueFormat,r.value)):J=pw(i.modelValue,i.valueFormat,r.value),he.value.getRangeAvailableTime){const ce=he.value.getRangeAvailableTime(J);wi(ce,J)||(J=ce,_(Ze(J)?J.map(ye=>ye.toDate()):J.toDate()))}return Ze(J)&&J.some(ce=>!ce)&&(J=[]),J}),H=R(()=>{if(!he.value.panelReady)return"";const J=Me(P.value);return Ze(se.value)?[se.value[0]||J&&J[0]||"",se.value[1]||J&&J[1]||""]:se.value!==null?se.value:!G.value&&te.value||!f.value&&te.value?"":J?$.value?J.join(", "):J:""}),N=R(()=>i.type.includes("time")),G=R(()=>i.type.startsWith("time")),$=R(()=>i.type==="dates"),z=R(()=>i.prefixIcon||(N.value?pT:H$)),Z=q(!1),W=J=>{i.readonly||T.value||Z.value&&(J.stopPropagation(),x(),_(null),b(null,!0),Z.value=!1,f.value=!1,he.value.handleClear&&he.value.handleClear())},te=R(()=>{const{modelValue:J}=i;return!J||Ze(J)&&!J.filter(Boolean).length}),ie=async J=>{var ce;i.readonly||T.value||(((ce=J.target)==null?void 0:ce.tagName)!=="INPUT"||w.value.includes(document.activeElement))&&(f.value=!0)},re=()=>{i.readonly||T.value||!te.value&&i.clearable&&(Z.value=!0)},_e=()=>{Z.value=!1},Pe=J=>{var ce;i.readonly||T.value||(((ce=J.touches[0].target)==null?void 0:ce.tagName)!=="INPUT"||w.value.includes(document.activeElement))&&(f.value=!0)},K=R(()=>i.type.includes("range")),Q=En(),fe=R(()=>{var J,ce;return(ce=(J=y(l))==null?void 0:J.popperRef)==null?void 0:ce.contentRef}),ge=R(()=>{var J;return y(K)?y(u):(J=y(u))==null?void 0:J.$el});Cv(ge,J=>{const ce=y(fe),ye=y(ge);ce&&(J.target===ce||J.composedPath().includes(ce))||J.target===ye||J.composedPath().includes(ye)||(f.value=!1)});const se=q(null),me=()=>{if(se.value){const J=be(H.value);J&&Ee(J)&&(_(Ze(J)?J.map(ce=>ce.toDate()):J.toDate()),se.value=null)}se.value===""&&(_(null),b(null),se.value=null)},be=J=>J?he.value.parseUserInput(J):null,Me=J=>J?he.value.formatToString(J):null,Ee=J=>he.value.isValidValue(J),X=async J=>{if(i.readonly||T.value)return;const{code:ce}=J;if(S(J),ce===rt.esc){f.value===!0&&(f.value=!1,J.preventDefault(),J.stopPropagation());return}if(ce===rt.down&&(he.value.handleFocusPicker&&(J.preventDefault(),J.stopPropagation()),f.value===!1&&(f.value=!0,await et()),he.value.handleFocusPicker)){he.value.handleFocusPicker();return}if(ce===rt.tab){p=!0;return}if(ce===rt.enter||ce===rt.numpadEnter){(se.value===null||se.value===""||Ee(be(H.value)))&&(me(),f.value=!1),J.stopPropagation();return}if(se.value){J.stopPropagation();return}he.value.handleKeydownInput&&he.value.handleKeydownInput(J)},Y=J=>{se.value=J,f.value||(f.value=!0)},le=J=>{const ce=J.target;se.value?se.value=[ce.value,se.value[1]]:se.value=[ce.value,null]},Ce=J=>{const ce=J.target;se.value?se.value=[se.value[0],ce.value]:se.value=[null,ce.value]},Re=()=>{var J;const ce=se.value,ye=be(ce&&ce[0]),Oe=y(P);if(ye&&ye.isValid()){se.value=[Me(ye),((J=H.value)==null?void 0:J[1])||null];const ze=[ye,Oe&&(Oe[1]||null)];Ee(ze)&&(_(ze),se.value=null)}},Ne=()=>{var J;const ce=y(se),ye=be(ce&&ce[1]),Oe=y(P);if(ye&&ye.isValid()){se.value=[((J=y(H))==null?void 0:J[0])||null,Me(ye)];const ze=[Oe&&Oe[0],ye];Ee(ze)&&(_(ze),se.value=null)}},he=q({}),pe=J=>{he.value[J[0]]=J[1],he.value.panelReady=!0},ee=J=>{n("calendar-change",J)},oe=(J,ce,ye)=>{n("panel-change",J,ce,ye)};return xt("EP_PICKER_BASE",{props:i}),e({focus:j,handleFocusInput:V,handleBlurInput:F,handleOpen:L,handleClose:U,onPick:M}),(J,ce)=>(I(),ke(y(mi),St({ref_key:"refPopper",ref:l,visible:f.value,effect:"light",pure:"",trigger:"click"},J.$attrs,{role:"dialog",teleported:"",transition:`${y(a).namespace.value}-zoom-in-top`,"popper-class":[`${y(a).namespace.value}-picker__popper`,J.popperClass],"popper-options":y(h),"fallback-placements":["bottom","top","right","left"],"gpu-acceleration":!1,"stop-popper-mouse-event":!1,"hide-after":0,persistent:"",onBeforeShow:E,onShow:A,onHide:D}),{default:ve(()=>[y(K)?(I(),ne("div",{key:1,ref_key:"inputRef",ref:u,class:B([y(a).b("editor"),y(a).bm("editor",J.type),y(d).e("wrapper"),y(a).is("disabled",y(T)),y(a).is("active",f.value),y(s).b("editor"),y(Q)?y(s).bm("editor",y(Q)):"",J.$attrs.class]),style:nt(J.$attrs.style),onClick:V,onMouseenter:re,onMouseleave:_e,onTouchstart:Pe,onKeydown:X},[y(z)?(I(),ke(y(tt),{key:0,class:B([y(d).e("icon"),y(s).e("icon")]),onMousedown:ot(ie,["prevent"]),onTouchstart:Pe},{default:ve(()=>[(I(),ke(Ct(y(z))))]),_:1},8,["class","onMousedown"])):Te("v-if",!0),ae("input",{id:J.id&&J.id[0],autocomplete:"off",name:J.name&&J.name[0],placeholder:J.startPlaceholder,value:y(H)&&y(H)[0],disabled:y(T),readonly:!J.editable||J.readonly,class:B(y(s).b("input")),onMousedown:ie,onInput:le,onChange:Re,onFocus:V,onBlur:F},null,42,j9),Le(J.$slots,"range-separator",{},()=>[ae("span",{class:B(y(s).b("separator"))},$e(J.rangeSeparator),3)]),ae("input",{id:J.id&&J.id[1],autocomplete:"off",name:J.name&&J.name[1],placeholder:J.endPlaceholder,value:y(H)&&y(H)[1],disabled:y(T),readonly:!J.editable||J.readonly,class:B(y(s).b("input")),onMousedown:ie,onFocus:V,onBlur:F,onInput:Ce,onChange:Ne},null,42,X9),J.clearIcon?(I(),ke(y(tt),{key:1,class:B([y(d).e("icon"),y(s).e("close-icon"),{[y(s).e("close-icon--hidden")]:!Z.value}]),onClick:W},{default:ve(()=>[(I(),ke(Ct(J.clearIcon)))]),_:1},8,["class"])):Te("v-if",!0)],38)):(I(),ke(y(Jn),{key:0,id:J.id,ref_key:"inputRef",ref:u,"container-role":"combobox","model-value":y(H),name:J.name,size:y(Q),disabled:y(T),placeholder:J.placeholder,class:B([y(a).b("editor"),y(a).bm("editor",J.type),J.$attrs.class]),style:nt(J.$attrs.style),readonly:!J.editable||J.readonly||y($)||J.type==="week",label:J.label,tabindex:J.tabindex,"validate-event":!1,onInput:Y,onFocus:V,onBlur:F,onKeydown:X,onChange:me,onMousedown:ie,onMouseenter:re,onMouseleave:_e,onTouchstart:Pe,onClick:ce[0]||(ce[0]=ot(()=>{},["stop"]))},{prefix:ve(()=>[y(z)?(I(),ke(y(tt),{key:0,class:B(y(d).e("icon")),onMousedown:ot(ie,["prevent"]),onTouchstart:Pe},{default:ve(()=>[(I(),ke(Ct(y(z))))]),_:1},8,["class","onMousedown"])):Te("v-if",!0)]),suffix:ve(()=>[Z.value&&J.clearIcon?(I(),ke(y(tt),{key:0,class:B(`${y(d).e("icon")} clear-icon`),onClick:ot(W,["stop"])},{default:ve(()=>[(I(),ke(Ct(J.clearIcon)))]),_:1},8,["class","onClick"])):Te("v-if",!0)]),_:1},8,["id","model-value","name","size","disabled","placeholder","class","style","readonly","label","tabindex","onKeydown"]))]),content:ve(()=>[Le(J.$slots,"default",{visible:f.value,actualVisible:m.value,parsedValue:y(P),format:J.format,unlinkPanels:J.unlinkPanels,type:J.type,defaultValue:J.defaultValue,onPick:M,onSelectRange:C,onSetPickerOption:pe,onCalendarChange:ee,onPanelChange:oe,onKeydown:O,onMousedown:ce[1]||(ce[1]=ot(()=>{},["stop"]))})]),_:3},16,["visible","transition","popper-class","popper-options"]))}});var FE=je(Y9,[["__file","/home/runner/work/element-plus/element-plus/packages/components/time-picker/src/common/picker.vue"]]);const q9=Xe({...NE,datetimeRole:String,parsedValue:{type:Ae(Object)}}),BE=({getAvailableHours:t,getAvailableMinutes:e,getAvailableSeconds:n})=>{const i=(d,s,o,c)=>{const h={hour:t,minute:e,second:n};let l=d;return["hour","minute","second"].forEach(u=>{if(h[u]){let f;const m=h[u];switch(u){case"minute":{f=m(l.hour(),s,c);break}case"second":{f=m(l.hour(),l.minute(),s,c);break}default:{f=m(s,c);break}}if(f!=null&&f.length&&!f.includes(l[u]())){const g=o?0:f.length-1;l=l[u](f[g])}}}),l},r={};return{timePickerOptions:r,getAvailableTime:i,onSetOption:([d,s])=>{r[d]=s}}},Kp=t=>{const e=(i,r)=>i||r,n=i=>i!==!0;return t.map(e).filter(n)},UE=(t,e,n)=>({getHoursList:(d,s)=>Xp(24,t&&(()=>t==null?void 0:t(d,s))),getMinutesList:(d,s,o)=>Xp(60,e&&(()=>e==null?void 0:e(d,s,o))),getSecondsList:(d,s,o,c)=>Xp(60,n&&(()=>n==null?void 0:n(d,s,o,c)))}),VE=(t,e,n)=>{const{getHoursList:i,getMinutesList:r,getSecondsList:a}=UE(t,e,n);return{getAvailableHours:(c,h)=>Kp(i(c,h)),getAvailableMinutes:(c,h,l)=>Kp(r(c,h,l)),getAvailableSeconds:(c,h,l,u)=>Kp(a(c,h,l,u))}},HE=t=>{const e=q(t.parsedValue);return Be(()=>t.visible,n=>{n||(e.value=t.parsedValue)}),e},Ds=new Map;let gw;kt&&(document.addEventListener("mousedown",t=>gw=t),document.addEventListener("mouseup",t=>{for(const e of Ds.values())for(const{documentHandler:n}of e)n(t,gw)}));function vw(t,e){let n=[];return Array.isArray(e.arg)?n=e.arg:Yi(e.arg)&&n.push(e.arg),function(i,r){const a=e.instance.popperRef,d=i.target,s=r==null?void 0:r.target,o=!e||!e.instance,c=!d||!s,h=t.contains(d)||t.contains(s),l=t===d,u=n.length&&n.some(m=>m==null?void 0:m.contains(d))||n.length&&n.includes(s),f=a&&(a.contains(d)||a.contains(s));o||c||h||l||u||f||e.value(i,r)}}const ro={beforeMount(t,e){Ds.has(t)||Ds.set(t,[]),Ds.get(t).push({documentHandler:vw(t,e),bindingFn:e.value})},updated(t,e){Ds.has(t)||Ds.set(t,[]);const n=Ds.get(t),i=n.findIndex(a=>a.bindingFn===e.oldValue),r={documentHandler:vw(t,e),bindingFn:e.value};i>=0?n.splice(i,1,r):n.push(r)},unmounted(t){Ds.delete(t)}},Z9=100,J9=600,Nf={beforeMount(t,e){const n=e.value,{interval:i=Z9,delay:r=J9}=lt(n)?{}:n;let a,d;const s=()=>lt(n)?n():n.handler(),o=()=>{d&&(clearTimeout(d),d=void 0),a&&(clearInterval(a),a=void 0)};t.addEventListener("mousedown",c=>{c.button===0&&(o(),s(),document.addEventListener("mouseup",()=>o(),{once:!0}),d=setTimeout(()=>{a=setInterval(()=>{s()},i)},r))})}},Zm="_trap-focus-children",Bo=[],yw=t=>{if(Bo.length===0)return;const e=Bo[Bo.length-1][Zm];if(e.length>0&&t.code===rt.tab){if(e.length===1){t.preventDefault(),document.activeElement!==e[0]&&e[0].focus();return}const n=t.shiftKey,i=t.target===e[0],r=t.target===e[e.length-1];i&&n&&(t.preventDefault(),e[e.length-1].focus()),r&&!n&&(t.preventDefault(),e[0].focus())}},Q9={beforeMount(t){t[Zm]=O_(t),Bo.push(t),Bo.length<=1&&document.addEventListener("keydown",yw)},updated(t){et(()=>{t[Zm]=O_(t)})},unmounted(){Bo.shift(),Bo.length===0&&document.removeEventListener("keydown",yw)}};var bw=!1,Po,Jm,Qm,Jd,Qd,zE,ef,eg,tg,ng,$E,ig,rg,WE,GE;function vi(){if(!bw){bw=!0;var t=navigator.userAgent,e=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(t),n=/(Mac OS X)|(Windows)|(Linux)/.exec(t);if(ig=/\b(iPhone|iP[ao]d)/.exec(t),rg=/\b(iP[ao]d)/.exec(t),ng=/Android/i.exec(t),WE=/FBAN\/\w+;/i.exec(t),GE=/Mobile/i.exec(t),$E=!!/Win64/.exec(t),e){Po=e[1]?parseFloat(e[1]):e[5]?parseFloat(e[5]):NaN,Po&&document&&document.documentMode&&(Po=document.documentMode);var i=/(?:Trident\/(\d+.\d+))/.exec(t);zE=i?parseFloat(i[1])+4:Po,Jm=e[2]?parseFloat(e[2]):NaN,Qm=e[3]?parseFloat(e[3]):NaN,Jd=e[4]?parseFloat(e[4]):NaN,Jd?(e=/(?:Chrome\/(\d+\.\d+))/.exec(t),Qd=e&&e[1]?parseFloat(e[1]):NaN):Qd=NaN}else Po=Jm=Qm=Qd=Jd=NaN;if(n){if(n[1]){var r=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(t);ef=r?parseFloat(r[1].replace("_",".")):!0}else ef=!1;eg=!!n[2],tg=!!n[3]}else ef=eg=tg=!1}}var sg={ie:function(){return vi()||Po},ieCompatibilityMode:function(){return vi()||zE>Po},ie64:function(){return sg.ie()&&$E},firefox:function(){return vi()||Jm},opera:function(){return vi()||Qm},webkit:function(){return vi()||Jd},safari:function(){return sg.webkit()},chrome:function(){return vi()||Qd},windows:function(){return vi()||eg},osx:function(){return vi()||ef},linux:function(){return vi()||tg},iphone:function(){return vi()||ig},mobile:function(){return vi()||ig||rg||ng||GE},nativeApp:function(){return vi()||WE},android:function(){return vi()||ng},ipad:function(){return vi()||rg}},eX=sg,Id=!!(typeof window<"u"&&window.document&&window.document.createElement),tX={canUseDOM:Id,canUseWorkers:typeof Worker<"u",canUseEventListeners:Id&&!!(window.addEventListener||window.attachEvent),canUseViewport:Id&&!!window.screen,isInWorker:!Id},jE=tX,XE;jE.canUseDOM&&(XE=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);function nX(t,e){if(!jE.canUseDOM||e&&!("addEventListener"in document))return!1;var n="on"+t,i=n in document;if(!i){var r=document.createElement("div");r.setAttribute(n,"return;"),i=typeof r[n]=="function"}return!i&&XE&&t==="wheel"&&(i=document.implementation.hasFeature("Events.wheel","3.0")),i}var iX=nX,_w=10,Sw=40,ww=800;function KE(t){var e=0,n=0,i=0,r=0;return"detail"in t&&(n=t.detail),"wheelDelta"in t&&(n=-t.wheelDelta/120),"wheelDeltaY"in t&&(n=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(e=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(e=n,n=0),i=e*_w,r=n*_w,"deltaY"in t&&(r=t.deltaY),"deltaX"in t&&(i=t.deltaX),(i||r)&&t.deltaMode&&(t.deltaMode==1?(i*=Sw,r*=Sw):(i*=ww,r*=ww)),i&&!e&&(e=i<1?-1:1),r&&!n&&(n=r<1?-1:1),{spinX:e,spinY:n,pixelX:i,pixelY:r}}KE.getEventType=function(){return eX.firefox()?"DOMMouseScroll":iX("wheel")?"wheel":"mousewheel"};var rX=KE;/**
* Checks if an event is supported in the current execution environment.
*
* NOTE: This will not work correctly for non-generic events such as `change`,
* `reset`, `load`, `error`, and `select`.
*
* Borrows from Modernizr.
*
* @param {string} eventNameSuffix Event name, e.g. "click".
* @param {?boolean} capture Check if the capture phase is supported.
* @return {boolean} True if the event is supported.
* @internal
* @license Modernizr 3.0.0pre (Custom Build) | MIT
*/const sX=function(t,e){if(t&&t.addEventListener){const n=function(i){const r=rX(i);e&&Reflect.apply(e,this,[i,r])};t.addEventListener("wheel",n,{passive:!0})}},oX={beforeMount(t,e){sX(t,e.value)}},aX=Xe({role:{type:String,required:!0},spinnerDate:{type:Ae(Object),required:!0},showSeconds:{type:Boolean,default:!0},arrowControl:Boolean,amPmMode:{type:Ae(String),default:""},...DE}),lX=["onClick"],cX=["onMouseenter"],uX=de({__name:"basic-time-spinner",props:aX,emits:["change","select-range","set-option"],setup(t,{emit:e}){const n=t,i=Ue("time"),{getHoursList:r,getMinutesList:a,getSecondsList:d}=UE(n.disabledHours,n.disabledMinutes,n.disabledSeconds);let s=!1;const o=q(),c=q(),h=q(),l=q(),u={hours:c,minutes:h,seconds:l},f=R(()=>n.showSeconds?dw:dw.slice(0,2)),m=R(()=>{const{spinnerDate:T}=n,P=T.hour(),H=T.minute(),N=T.second();return{hours:P,minutes:H,seconds:N}}),g=R(()=>{const{hours:T,minutes:P}=y(m);return{hours:r(n.role),minutes:a(T,n.role),seconds:d(T,P,n.role)}}),p=R(()=>{const{hours:T,minutes:P,seconds:H}=y(m);return{hours:jp(T,23),minutes:jp(P,59),seconds:jp(H,59)}}),v=pi(T=>{s=!1,S(T)},200),b=T=>{if(!!!n.amPmMode)return"";const H=n.amPmMode==="A";let N=T<12?" am":" pm";return H&&(N=N.toUpperCase()),N},_=T=>{let P;switch(T){case"hours":P=[0,2];break;case"minutes":P=[3,5];break;case"seconds":P=[6,8];break}const[H,N]=P;e("select-range",H,N),o.value=T},S=T=>{x(T,y(m)[T])},w=()=>{S("hours"),S("minutes"),S("seconds")},C=T=>T.querySelector(`.${i.namespace.value}-scrollbar__wrap`),x=(T,P)=>{if(n.arrowControl)return;const H=y(u[T]);H&&H.$el&&(C(H.$el).scrollTop=Math.max(0,P*M(T)))},M=T=>{const P=y(u[T]);return(P==null?void 0:P.$el.querySelector("li").offsetHeight)||0},E=()=>{O(1)},A=()=>{O(-1)},O=T=>{o.value||_("hours");const P=o.value,H=y(m)[P],N=o.value==="hours"?24:60,G=D(P,H,T,N);L(P,G),x(P,G),et(()=>_(P))},D=(T,P,H,N)=>{let G=(P+H+N)%N;const $=y(g)[T];for(;$[G]&&G!==P;)G=(G+H+N)%N;return G},L=(T,P)=>{if(y(g)[T][P])return;const{hours:G,minutes:$,seconds:z}=y(m);let Z;switch(T){case"hours":Z=n.spinnerDate.hour(P).minute($).second(z);break;case"minutes":Z=n.spinnerDate.hour(G).minute(P).second(z);break;case"seconds":Z=n.spinnerDate.hour(G).minute($).second(P);break}e("change",Z)},U=(T,{value:P,disabled:H})=>{H||(L(T,P),_(T),x(T,P))},j=T=>{s=!0,v(T);const P=Math.min(Math.round((C(y(u[T]).$el).scrollTop-(V(T)*.5-10)/M(T)+3)/M(T)),T==="hours"?23:59);L(T,P)},V=T=>y(u[T]).$el.offsetHeight,k=()=>{const T=P=>{const H=y(u[P]);H&&H.$el&&(C(H.$el).onscroll=()=>{j(P)})};T("hours"),T("minutes"),T("seconds")};mt(()=>{et(()=>{!n.arrowControl&&k(),w(),n.role==="start"&&_("hours")})});const F=(T,P)=>{u[P].value=T};return e("set-option",[`${n.role}_scrollDown`,O]),e("set-option",[`${n.role}_emitSelectRange`,_]),Be(()=>n.spinnerDate,()=>{s||w()}),(T,P)=>(I(),ne("div",{class:B([y(i).b("spinner"),{"has-seconds":T.showSeconds}])},[T.arrowControl?Te("v-if",!0):(I(!0),ne(Qe,{key:0},wt(y(f),H=>(I(),ke(y(Cs),{key:H,ref_for:!0,ref:N=>F(N,H),class:B(y(i).be("spinner","wrapper")),"wrap-style":"max-height: inherit;","view-class":y(i).be("spinner","list"),noresize:"",tag:"ul",onMouseenter:N=>_(H),onMousemove:N=>S(H)},{default:ve(()=>[(I(!0),ne(Qe,null,wt(y(g)[H],(N,G)=>(I(),ne("li",{key:G,class:B([y(i).be("spinner","item"),y(i).is("active",G===y(m)[H]),y(i).is("disabled",N)]),onClick:$=>U(H,{value:G,disabled:N})},[H==="hours"?(I(),ne(Qe,{key:0},[Tt($e(("0"+(T.amPmMode?G%12||12:G)).slice(-2))+$e(b(G)),1)],64)):(I(),ne(Qe,{key:1},[Tt($e(("0"+G).slice(-2)),1)],64))],10,lX))),128))]),_:2},1032,["class","view-class","onMouseenter","onMousemove"]))),128)),T.arrowControl?(I(!0),ne(Qe,{key:1},wt(y(f),H=>(I(),ne("div",{key:H,class:B([y(i).be("spinner","wrapper"),y(i).is("arrow")]),onMouseenter:N=>_(H)},[pt((I(),ke(y(tt),{class:B(["arrow-up",y(i).be("spinner","arrow")])},{default:ve(()=>[ue(y(_h))]),_:1},8,["class"])),[[y(Nf),A]]),pt((I(),ke(y(tt),{class:B(["arrow-down",y(i).be("spinner","arrow")])},{default:ve(()=>[ue(y(ao))]),_:1},8,["class"])),[[y(Nf),E]]),ae("ul",{class:B(y(i).be("spinner","list"))},[(I(!0),ne(Qe,null,wt(y(p)[H],(N,G)=>(I(),ne("li",{key:G,class:B([y(i).be("spinner","item"),y(i).is("active",N===y(m)[H]),y(i).is("disabled",y(g)[H][N])])},[typeof N=="number"?(I(),ne(Qe,{key:0},[H==="hours"?(I(),ne(Qe,{key:0},[Tt($e(("0"+(T.amPmMode?N%12||12:N)).slice(-2))+$e(b(N)),1)],64)):(I(),ne(Qe,{key:1},[Tt($e(("0"+N).slice(-2)),1)],64))],64)):Te("v-if",!0)],2))),128))],2)],42,cX))),128)):Te("v-if",!0)],2))}});var og=je(uX,[["__file","/home/runner/work/element-plus/element-plus/packages/components/time-picker/src/time-picker-com/basic-time-spinner.vue"]]);const dX=de({__name:"panel-time-pick",props:q9,emits:["pick","select-range","set-picker-option"],setup(t,{emit:e}){const n=t,i=Je("EP_PICKER_BASE"),{arrowControl:r,disabledHours:a,disabledMinutes:d,disabledSeconds:s,defaultValue:o}=i.props,{getAvailableHours:c,getAvailableMinutes:h,getAvailableSeconds:l}=VE(a,d,s),u=Ue("time"),{t:f,lang:m}=Pt(),g=q([0,2]),p=HE(n),v=R(()=>Un(n.actualVisible)?`${u.namespace.value}-zoom-in-top`:""),b=R(()=>n.format.includes("ss")),_=R(()=>n.format.includes("A")?"A":n.format.includes("a")?"a":""),S=F=>{const T=gt(F).locale(m.value),P=U(T);return T.isSame(P)},w=()=>{e("pick",p.value,!1)},C=(F=!1,T=!1)=>{T||e("pick",n.parsedValue,F)},x=F=>{if(!n.visible)return;const T=U(F).millisecond(0);e("pick",T,!0)},M=(F,T)=>{e("select-range",F,T),g.value=[F,T]},E=F=>{const T=[0,3].concat(b.value?[6]:[]),P=["hours","minutes"].concat(b.value?["seconds"]:[]),N=(T.indexOf(g.value[0])+F+T.length)%T.length;O.start_emitSelectRange(P[N])},A=F=>{const T=F.code,{left:P,right:H,up:N,down:G}=rt;if([P,H].includes(T)){E(T===P?-1:1),F.preventDefault();return}if([N,G].includes(T)){const $=T===N?-1:1;O.start_scrollDown($),F.preventDefault();return}},{timePickerOptions:O,onSetOption:D,getAvailableTime:L}=BE({getAvailableHours:c,getAvailableMinutes:h,getAvailableSeconds:l}),U=F=>L(F,n.datetimeRole||"",!0),j=F=>F?gt(F,n.format).locale(m.value):null,V=F=>F?F.format(n.format):null,k=()=>gt(o).locale(m.value);return e("set-picker-option",["isValidValue",S]),e("set-picker-option",["formatToString",V]),e("set-picker-option",["parseUserInput",j]),e("set-picker-option",["handleKeydownInput",A]),e("set-picker-option",["getRangeAvailableTime",U]),e("set-picker-option",["getDefaultValue",k]),(F,T)=>(I(),ke(wn,{name:y(v)},{default:ve(()=>[F.actualVisible||F.visible?(I(),ne("div",{key:0,class:B(y(u).b("panel"))},[ae("div",{class:B([y(u).be("panel","content"),{"has-seconds":y(b)}])},[ue(og,{ref:"spinner",role:F.datetimeRole||"start","arrow-control":y(r),"show-seconds":y(b),"am-pm-mode":y(_),"spinner-date":F.parsedValue,"disabled-hours":y(a),"disabled-minutes":y(d),"disabled-seconds":y(s),onChange:x,onSetOption:y(D),onSelectRange:M},null,8,["role","arrow-control","show-seconds","am-pm-mode","spinner-date","disabled-hours","disabled-minutes","disabled-seconds","onSetOption"])],2),ae("div",{class:B(y(u).be("panel","footer"))},[ae("button",{type:"button",class:B([y(u).be("panel","btn"),"cancel"]),onClick:w},$e(y(f)("el.datepicker.cancel")),3),ae("button",{type:"button",class:B([y(u).be("panel","btn"),"confirm"]),onClick:T[0]||(T[0]=P=>C())},$e(y(f)("el.datepicker.confirm")),3)],2)],2)):Te("v-if",!0)]),_:1},8,["name"]))}});var Ff=je(dX,[["__file","/home/runner/work/element-plus/element-plus/packages/components/time-picker/src/time-picker-com/panel-time-pick.vue"]]);const fX=Xe({...NE,parsedValue:{type:Ae(Array)}}),hX=["disabled"],pX=de({__name:"panel-time-range",props:fX,emits:["pick","select-range","set-picker-option"],setup(t,{emit:e}){const n=t,i=(ie,re)=>{const _e=[];for(let Pe=ie;Pe<=re;Pe++)_e.push(Pe);return _e},{t:r,lang:a}=Pt(),d=Ue("time"),s=Ue("picker"),o=Je("EP_PICKER_BASE"),{arrowControl:c,disabledHours:h,disabledMinutes:l,disabledSeconds:u,defaultValue:f}=o.props,m=R(()=>n.parsedValue[0]),g=R(()=>n.parsedValue[1]),p=HE(n),v=()=>{e("pick",p.value,!1)},b=R(()=>n.format.includes("ss")),_=R(()=>n.format.includes("A")?"A":n.format.includes("a")?"a":""),S=(ie=!1)=>{e("pick",[m.value,g.value],ie)},w=ie=>{M(ie.millisecond(0),g.value)},C=ie=>{M(m.value,ie.millisecond(0))},x=ie=>{const re=ie.map(Pe=>gt(Pe).locale(a.value)),_e=T(re);return re[0].isSame(_e[0])&&re[1].isSame(_e[1])},M=(ie,re)=>{e("pick",[ie,re],!0)},E=R(()=>m.value>g.value),A=q([0,2]),O=(ie,re)=>{e("select-range",ie,re,"min"),A.value=[ie,re]},D=R(()=>b.value?11:8),L=(ie,re)=>{e("select-range",ie,re,"max");const _e=y(D);A.value=[ie+_e,re+_e]},U=ie=>{const re=b.value?[0,3,6,11,14,17]:[0,3,8,11],_e=["hours","minutes"].concat(b.value?["seconds"]:[]),K=(re.indexOf(A.value[0])+ie+re.length)%re.length,Q=re.length/2;K<Q?G.start_emitSelectRange(_e[K]):G.end_emitSelectRange(_e[K-Q])},j=ie=>{const re=ie.code,{left:_e,right:Pe,up:K,down:Q}=rt;if([_e,Pe].includes(re)){U(re===_e?-1:1),ie.preventDefault();return}if([K,Q].includes(re)){const fe=re===K?-1:1,ge=A.value[0]<D.value?"start":"end";G[`${ge}_scrollDown`](fe),ie.preventDefault();return}},V=(ie,re)=>{const _e=h?h(ie):[],Pe=ie==="start",Q=(re||(Pe?g.value:m.value)).hour(),fe=Pe?i(Q+1,23):i(0,Q-1);return Bp(_e,fe)},k=(ie,re,_e)=>{const Pe=l?l(ie,re):[],K=re==="start",Q=_e||(K?g.value:m.value),fe=Q.hour();if(ie!==fe)return Pe;const ge=Q.minute(),se=K?i(ge+1,59):i(0,ge-1);return Bp(Pe,se)},F=(ie,re,_e,Pe)=>{const K=u?u(ie,re,_e):[],Q=_e==="start",fe=Pe||(Q?g.value:m.value),ge=fe.hour(),se=fe.minute();if(ie!==ge||re!==se)return K;const me=fe.second(),be=Q?i(me+1,59):i(0,me-1);return Bp(K,be)},T=([ie,re])=>[$(ie,"start",!0,re),$(re,"end",!1,ie)],{getAvailableHours:P,getAvailableMinutes:H,getAvailableSeconds:N}=VE(V,k,F),{timePickerOptions:G,getAvailableTime:$,onSetOption:z}=BE({getAvailableHours:P,getAvailableMinutes:H,getAvailableSeconds:N}),Z=ie=>ie?Ze(ie)?ie.map(re=>gt(re,n.format).locale(a.value)):gt(ie,n.format).locale(a.value):null,W=ie=>ie?Ze(ie)?ie.map(re=>re.format(n.format)):ie.format(n.format):null,te=()=>{if(Ze(f))return f.map(re=>gt(re).locale(a.value));const ie=gt(f).locale(a.value);return[ie,ie.add(60,"m")]};return e("set-picker-option",["formatToString",W]),e("set-picker-option",["parseUserInput",Z]),e("set-picker-option",["isValidValue",x]),e("set-picker-option",["handleKeydownInput",j]),e("set-picker-option",["getDefaultValue",te]),e("set-picker-option",["getRangeAvailableTime",T]),(ie,re)=>ie.actualVisible?(I(),ne("div",{key:0,class:B([y(d).b("range-picker"),y(s).b("panel")])},[ae("div",{class:B(y(d).be("range-picker","content"))},[ae("div",{class:B(y(d).be("range-picker","cell"))},[ae("div",{class:B(y(d).be("range-picker","header"))},$e(y(r)("el.datepicker.startTime")),3),ae("div",{class:B([y(d).be("range-picker","body"),y(d).be("panel","content"),y(d).is("arrow",y(c)),{"has-seconds":y(b)}])},[ue(og,{ref:"minSpinner",role:"start","show-seconds":y(b),"am-pm-mode":y(_),"arrow-control":y(c),"spinner-date":y(m),"disabled-hours":V,"disabled-minutes":k,"disabled-seconds":F,onChange:w,onSetOption:y(z),onSelectRange:O},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2),ae("div",{class:B(y(d).be("range-picker","cell"))},[ae("div",{class:B(y(d).be("range-picker","header"))},$e(y(r)("el.datepicker.endTime")),3),ae("div",{class:B([y(d).be("range-picker","body"),y(d).be("panel","content"),y(d).is("arrow",y(c)),{"has-seconds":y(b)}])},[ue(og,{ref:"maxSpinner",role:"end","show-seconds":y(b),"am-pm-mode":y(_),"arrow-control":y(c),"spinner-date":y(g),"disabled-hours":V,"disabled-minutes":k,"disabled-seconds":F,onChange:C,onSetOption:y(z),onSelectRange:L},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2)],2),ae("div",{class:B(y(d).be("panel","footer"))},[ae("button",{type:"button",class:B([y(d).be("panel","btn"),"cancel"]),onClick:re[0]||(re[0]=_e=>v())},$e(y(r)("el.datepicker.cancel")),3),ae("button",{type:"button",class:B([y(d).be("panel","btn"),"confirm"]),disabled:y(E),onClick:re[1]||(re[1]=_e=>S())},$e(y(r)("el.datepicker.confirm")),11,hX)],2)],2)):Te("v-if",!0)}});var mX=je(pX,[["__file","/home/runner/work/element-plus/element-plus/packages/components/time-picker/src/time-picker-com/panel-time-range.vue"]]);gt.extend(h0);var gX=de({name:"ElTimePicker",install:null,props:{...p0,isRange:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(t,e){const n=q(),[i,r]=t.isRange?["timerange",mX]:["time",Ff],a=d=>e.emit("update:modelValue",d);return xt("ElPopperOptions",t.popperOptions),e.expose({focus:d=>{var s;(s=n.value)==null||s.handleFocusInput(d)},blur:d=>{var s;(s=n.value)==null||s.handleBlurInput(d)},handleOpen:()=>{var d;(d=n.value)==null||d.handleOpen()},handleClose:()=>{var d;(d=n.value)==null||d.handleClose()}}),()=>{var d;const s=(d=t.format)!=null?d:qm;return ue(FE,St(t,{ref:n,type:i,format:s,"onUpdate:modelValue":a}),{default:o=>ue(r,o,null)})}}});const tf=gX;tf.install=t=>{t.component(tf.name,tf)};const vX=tf,yX=(t,e)=>{const n=t.subtract(1,"month").endOf("month").date();return qs(e).map((i,r)=>n-(e-r-1))},bX=t=>{const e=t.daysInMonth();return qs(e).map((n,i)=>i+1)},_X=t=>qs(t.length/7).map(e=>{const n=e*7;return t.slice(n,n+7)}),SX=Xe({selectedDay:{type:Ae(Object)},range:{type:Ae(Array)},date:{type:Ae(Object),required:!0},hideHeader:{type:Boolean}}),wX={pick:t=>_t(t)};var YE={exports:{}};(function(t,e){(function(n,i){t.exports=i()})(_s,function(){return function(n,i,r){var a=i.prototype,d=function(l){return l&&(l.indexOf?l:l.s)},s=function(l,u,f,m,g){var p=l.name?l:l.$locale(),v=d(p[u]),b=d(p[f]),_=v||b.map(function(w){return w.slice(0,m)});if(!g)return _;var S=p.weekStart;return _.map(function(w,C){return _[(C+(S||0))%7]})},o=function(){return r.Ls[r.locale()]},c=function(l,u){return l.formats[u]||function(f){return f.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(m,g,p){return g||p.slice(1)})}(l.formats[u.toUpperCase()])},h=function(){var l=this;return{months:function(u){return u?u.format("MMMM"):s(l,"months")},monthsShort:function(u){return u?u.format("MMM"):s(l,"monthsShort","months",3)},firstDayOfWeek:function(){return l.$locale().weekStart||0},weekdays:function(u){return u?u.format("dddd"):s(l,"weekdays")},weekdaysMin:function(u){return u?u.format("dd"):s(l,"weekdaysMin","weekdays",2)},weekdaysShort:function(u){return u?u.format("ddd"):s(l,"weekdaysShort","weekdays",3)},longDateFormat:function(u){return c(l.$locale(),u)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};a.localeData=function(){return h.bind(this)()},r.localeData=function(){var l=o();return{firstDayOfWeek:function(){return l.weekStart||0},weekdays:function(){return r.weekdays()},weekdaysShort:function(){return r.weekdaysShort()},weekdaysMin:function(){return r.weekdaysMin()},months:function(){return r.months()},monthsShort:function(){return r.monthsShort()},longDateFormat:function(u){return c(l,u)},meridiem:l.meridiem,ordinal:l.ordinal}},r.months=function(){return s(o(),"months")},r.monthsShort=function(){return s(o(),"monthsShort","months",3)},r.weekdays=function(l){return s(o(),"weekdays",null,null,l)},r.weekdaysShort=function(l){return s(o(),"weekdaysShort","weekdays",3,l)},r.weekdaysMin=function(l){return s(o(),"weekdaysMin","weekdays",2,l)}}})})(YE);var CX=YE.exports;const qE=Vr(CX),xX=(t,e)=>{gt.extend(qE);const n=gt.localeData().firstDayOfWeek(),{t:i,lang:r}=Pt(),a=gt().locale(r.value),d=R(()=>!!t.range&&!!t.range.length),s=R(()=>{let u=[];if(d.value){const[f,m]=t.range,g=qs(m.date()-f.date()+1).map(b=>({text:f.date()+b,type:"current"}));let p=g.length%7;p=p===0?0:7-p;const v=qs(p).map((b,_)=>({text:_+1,type:"next"}));u=g.concat(v)}else{const f=t.date.startOf("month").day(),m=yX(t.date,(f-n+7)%7).map(b=>({text:b,type:"prev"})),g=bX(t.date).map(b=>({text:b,type:"current"}));u=[...m,...g];const p=7-(u.length%7||7),v=qs(p).map((b,_)=>({text:_+1,type:"next"}));u=u.concat(v)}return _X(u)}),o=R(()=>{const u=n;return u===0?Up.map(f=>i(`el.datepicker.weeks.${f}`)):Up.slice(u).concat(Up.slice(0,u)).map(f=>i(`el.datepicker.weeks.${f}`))}),c=(u,f)=>{switch(f){case"prev":return t.date.startOf("month").subtract(1,"month").date(u);case"next":return t.date.startOf("month").add(1,"month").date(u);case"current":return t.date.date(u)}};return{now:a,isInRange:d,rows:s,weekDays:o,getFormattedDate:c,handlePickDay:({text:u,type:f})=>{const m=c(u,f);e("pick",m)},getSlotData:({text:u,type:f})=>{const m=c(u,f);return{isSelected:m.isSame(t.selectedDay),type:`${f}-month`,day:m.format("YYYY-MM-DD"),date:m.toDate()}}}},TX={key:0},EX=["onClick"],MX=de({name:"DateTable"}),AX=de({...MX,props:SX,emits:wX,setup(t,{expose:e,emit:n}){const i=t,{isInRange:r,now:a,rows:d,weekDays:s,getFormattedDate:o,handlePickDay:c,getSlotData:h}=xX(i,n),l=Ue("calendar-table"),u=Ue("calendar-day"),f=({text:m,type:g})=>{const p=[g];if(g==="current"){const v=o(m,g);v.isSame(i.selectedDay,"day")&&p.push(u.is("selected")),v.isSame(a,"day")&&p.push(u.is("today"))}return p};return e({getFormattedDate:o}),(m,g)=>(I(),ne("table",{class:B([y(l).b(),y(l).is("range",y(r))]),cellspacing:"0",cellpadding:"0"},[m.hideHeader?Te("v-if",!0):(I(),ne("thead",TX,[(I(!0),ne(Qe,null,wt(y(s),p=>(I(),ne("th",{key:p},$e(p),1))),128))])),ae("tbody",null,[(I(!0),ne(Qe,null,wt(y(d),(p,v)=>(I(),ne("tr",{key:v,class:B({[y(l).e("row")]:!0,[y(l).em("row","hide-border")]:v===0&&m.hideHeader})},[(I(!0),ne(Qe,null,wt(p,(b,_)=>(I(),ne("td",{key:_,class:B(f(b)),onClick:S=>y(c)(b)},[ae("div",{class:B(y(u).b())},[Le(m.$slots,"date-cell",{data:y(h)(b)},()=>[ae("span",null,$e(b.text),1)])],2)],10,EX))),128))],2))),128))])],2))}});var Cw=je(AX,[["__file","/home/runner/work/element-plus/element-plus/packages/components/calendar/src/date-table.vue"]]);const kX=(t,e)=>{const n=t.endOf("month"),i=e.startOf("month"),a=n.isSame(i,"week")?i.add(1,"week"):i;return[[t,n],[a.startOf("week"),e]]},RX=(t,e)=>{const n=t.endOf("month"),i=t.add(1,"month").startOf("month"),r=n.isSame(i,"week")?i.add(1,"week"):i,a=r.endOf("month"),d=e.startOf("month"),s=a.isSame(d,"week")?d.add(1,"week"):d;return[[t,n],[r.startOf("week"),a],[s.startOf("week"),e]]},PX=(t,e,n)=>{const i=Vn(),{lang:r}=Pt(),a=q(),d=gt().locale(r.value),s=R({get(){return t.modelValue?c.value:a.value},set(v){if(!v)return;a.value=v;const b=v.toDate();e(di,b),e(bt,b)}}),o=R(()=>{if(!t.range)return[];const v=t.range.map(S=>gt(S).locale(r.value)),[b,_]=v;return b.isAfter(_)?[]:b.isSame(_,"month")?m(b,_):b.add(1,"month").month()!==_.month()?[]:m(b,_)}),c=R(()=>t.modelValue?gt(t.modelValue).locale(r.value):s.value||(o.value.length?o.value[0][0]:d)),h=R(()=>c.value.subtract(1,"month").date(1)),l=R(()=>c.value.add(1,"month").date(1)),u=R(()=>c.value.subtract(1,"year").date(1)),f=R(()=>c.value.add(1,"year").date(1)),m=(v,b)=>{const _=v.startOf("week"),S=b.endOf("week"),w=_.get("month"),C=S.get("month");return w===C?[[_,S]]:(w+1)%12===C?kX(_,S):w+2===C||(w+1)%11===C?RX(_,S):[]},g=v=>{s.value=v},p=v=>{const _={"prev-month":h.value,"next-month":l.value,"prev-year":u.value,"next-year":f.value,today:d}[v];_.isSame(c.value,"day")||g(_)};return Ir({from:'"dateCell"',replacement:'"date-cell"',scope:"ElCalendar",version:"2.3.0",ref:"https://element-plus.org/en-US/component/calendar.html#slots",type:"Slot"},R(()=>!!i.dateCell)),{calculateValidatedDateRange:m,date:c,realSelectedDay:s,pickDay:g,selectDate:p,validatedRange:o}},OX=t=>Ze(t)&&t.length===2&&t.every(e=>qo(e)),LX=Xe({modelValue:{type:Date},range:{type:Ae(Array),validator:OX}}),IX={[bt]:t=>qo(t),[di]:t=>qo(t)},DX="ElCalendar",NX=de({name:DX}),FX=de({...NX,props:LX,emits:IX,setup(t,{expose:e,emit:n}){const i=t,r=Ue("calendar"),{calculateValidatedDateRange:a,date:d,pickDay:s,realSelectedDay:o,selectDate:c,validatedRange:h}=PX(i,n),{t:l}=Pt(),u=R(()=>{const f=`el.datepicker.month${d.value.format("M")}`;return`${d.value.year()} ${l("el.datepicker.year")} ${l(f)}`});return e({selectedDay:o,pickDay:s,selectDate:c,calculateValidatedDateRange:a}),(f,m)=>(I(),ne("div",{class:B(y(r).b())},[ae("div",{class:B(y(r).e("header"))},[Le(f.$slots,"header",{date:y(u)},()=>[ae("div",{class:B(y(r).e("title"))},$e(y(u)),3),y(h).length===0?(I(),ne("div",{key:0,class:B(y(r).e("button-group"))},[ue(y(RE),null,{default:ve(()=>[ue(y(jn),{size:"small",onClick:m[0]||(m[0]=g=>y(c)("prev-month"))},{default:ve(()=>[Tt($e(y(l)("el.datepicker.prevMonth")),1)]),_:1}),ue(y(jn),{size:"small",onClick:m[1]||(m[1]=g=>y(c)("today"))},{default:ve(()=>[Tt($e(y(l)("el.datepicker.today")),1)]),_:1}),ue(y(jn),{size:"small",onClick:m[2]||(m[2]=g=>y(c)("next-month"))},{default:ve(()=>[Tt($e(y(l)("el.datepicker.nextMonth")),1)]),_:1})]),_:1})],2)):Te("v-if",!0)])],2),y(h).length===0?(I(),ne("div",{key:0,class:B(y(r).e("body"))},[ue(Cw,{date:y(d),"selected-day":y(o),onPick:y(s)},ds({_:2},[f.$slots["date-cell"]||f.$slots.dateCell?{name:"date-cell",fn:ve(g=>[f.$slots["date-cell"]?Le(f.$slots,"date-cell",dr(St({key:0},g))):Le(f.$slots,"dateCell",dr(St({key:1},g)))])}:void 0]),1032,["date","selected-day","onPick"])],2)):(I(),ne("div",{key:1,class:B(y(r).e("body"))},[(I(!0),ne(Qe,null,wt(y(h),(g,p)=>(I(),ke(Cw,{key:p,date:g[0],"selected-day":y(o),range:g,"hide-header":p!==0,onPick:y(s)},ds({_:2},[f.$slots["date-cell"]||f.$slots.dateCell?{name:"date-cell",fn:ve(v=>[f.$slots["date-cell"]?Le(f.$slots,"date-cell",dr(St({key:0},v))):Le(f.$slots,"dateCell",dr(St({key:1},v)))])}:void 0]),1032,["date","selected-day","range","hide-header","onPick"]))),128))],2))],2))}});var BX=je(FX,[["__file","/home/runner/work/element-plus/element-plus/packages/components/calendar/src/calendar.vue"]]);const UX=yt(BX),VX=Xe({header:{type:String,default:""},bodyStyle:{type:Ae([String,Object,Array]),default:""},shadow:{type:String,values:["always","hover","never"],default:"always"}}),HX=de({name:"ElCard"}),zX=de({...HX,props:VX,setup(t){const e=Ue("card");return(n,i)=>(I(),ne("div",{class:B([y(e).b(),y(e).is(`${n.shadow}-shadow`)])},[n.$slots.header||n.header?(I(),ne("div",{key:0,class:B(y(e).e("header"))},[Le(n.$slots,"header",{},()=>[Tt($e(n.header),1)])],2)):Te("v-if",!0),ae("div",{class:B(y(e).e("body")),style:nt(n.bodyStyle)},[Le(n.$slots,"default")],6)],2))}});var $X=je(zX,[["__file","/home/runner/work/element-plus/element-plus/packages/components/card/src/card.vue"]]);const WX=yt($X),GX=Xe({initialIndex:{type:Number,default:0},height:{type:String,default:""},trigger:{type:String,values:["hover","click"],default:"hover"},autoplay:{type:Boolean,default:!0},interval:{type:Number,default:3e3},indicatorPosition:{type:String,values:["","none","outside"],default:""},arrow:{type:String,values:["always","hover","never"],default:"hover"},type:{type:String,values:["","card"],default:""},loop:{type:Boolean,default:!0},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},pauseOnHover:{type:Boolean,default:!0}}),jX={change:(t,e)=>[t,e].every(at)},ZE=Symbol("carouselContextKey"),xw=300,XX=(t,e,n)=>{const{children:i,addChild:r,removeChild:a}=a0(vt(),"ElCarouselItem"),d=q(-1),s=q(null),o=q(!1),c=q(),h=q(0),l=R(()=>t.arrow!=="never"&&!y(m)),u=R(()=>i.value.some(T=>T.props.label.toString().length>0)),f=R(()=>t.type==="card"),m=R(()=>t.direction==="vertical"),g=R(()=>t.height!=="auto"?{height:t.height}:{height:`${h.value}px`,overflow:"hidden"}),p=Xo(T=>{w(T)},xw,{trailing:!0}),v=Xo(T=>{L(T)},xw);function b(){s.value&&(clearInterval(s.value),s.value=null)}function _(){t.interval<=0||!t.autoplay||s.value||(s.value=setInterval(()=>S(),t.interval))}const S=()=>{d.value<i.value.length-1?d.value=d.value+1:t.loop&&(d.value=0)};function w(T){if(ct(T)){const N=i.value.filter(G=>G.props.name===T);N.length>0&&(T=i.value.indexOf(N[0]))}if(T=Number(T),Number.isNaN(T)||T!==Math.floor(T))return;const P=i.value.length,H=d.value;T<0?d.value=t.loop?P-1:0:T>=P?d.value=t.loop?0:P-1:d.value=T,H===d.value&&C(H),V()}function C(T){i.value.forEach((P,H)=>{P.translateItem(H,d.value,T)})}function x(T,P){var H,N,G,$;const z=y(i),Z=z.length;if(Z===0||!T.states.inStage)return!1;const W=P+1,te=P-1,ie=Z-1,re=z[ie].states.active,_e=z[0].states.active,Pe=(N=(H=z[W])==null?void 0:H.states)==null?void 0:N.active,K=($=(G=z[te])==null?void 0:G.states)==null?void 0:$.active;return P===ie&&_e||Pe?"left":P===0&&re||K?"right":!1}function M(){o.value=!0,t.pauseOnHover&&b()}function E(){o.value=!1,_()}function A(T){y(m)||i.value.forEach((P,H)=>{T===x(P,H)&&(P.states.hover=!0)})}function O(){y(m)||i.value.forEach(T=>{T.states.hover=!1})}function D(T){d.value=T}function L(T){t.trigger==="hover"&&T!==d.value&&(d.value=T)}function U(){w(d.value-1)}function j(){w(d.value+1)}function V(){b(),_()}function k(T){t.height==="auto"&&(h.value=T)}Be(()=>d.value,(T,P)=>{C(P),P>-1&&e("change",T,P)}),Be(()=>t.autoplay,T=>{T?_():b()}),Be(()=>t.loop,()=>{w(d.value)}),Be(()=>t.interval,()=>{V()}),Be(()=>i.value,()=>{i.value.length>0&&w(t.initialIndex)});const F=Jt();return mt(()=>{F.value=Qn(c.value,()=>{C()}),_()}),rn(()=>{b(),c.value&&F.value&&F.value.stop()}),xt(ZE,{root:c,isCardType:f,isVertical:m,items:i,loop:t.loop,addItem:r,removeItem:a,setActiveItem:w,setContainerHeight:k}),{root:c,activeIndex:d,arrowDisplay:l,hasLabel:u,hover:o,isCardType:f,items:i,isVertical:m,containerStyle:g,handleButtonEnter:A,handleButtonLeave:O,handleIndicatorClick:D,handleMouseEnter:M,handleMouseLeave:E,setActiveItem:w,prev:U,next:j,throttledArrowClick:p,throttledIndicatorHover:v}},KX=["onMouseenter","onClick"],YX={key:0},qX="ElCarousel",ZX=de({name:qX}),JX=de({...ZX,props:GX,emits:jX,setup(t,{expose:e,emit:n}){const i=t,{root:r,activeIndex:a,arrowDisplay:d,hasLabel:s,hover:o,isCardType:c,items:h,isVertical:l,containerStyle:u,handleButtonEnter:f,handleButtonLeave:m,handleIndicatorClick:g,handleMouseEnter:p,handleMouseLeave:v,setActiveItem:b,prev:_,next:S,throttledArrowClick:w,throttledIndicatorHover:C}=XX(i,n),x=Ue("carousel"),M=R(()=>{const A=[x.b(),x.m(i.direction)];return y(c)&&A.push(x.m("card")),A}),E=R(()=>{const A=[x.e("indicators"),x.em("indicators",i.direction)];return y(s)&&A.push(x.em("indicators","labels")),i.indicatorPosition==="outside"&&A.push(x.em("indicators","outside")),y(l)&&A.push(x.em("indicators","right")),A});return e({setActiveItem:b,prev:_,next:S}),(A,O)=>(I(),ne("div",{ref_key:"root",ref:r,class:B(y(M)),onMouseenter:O[6]||(O[6]=ot((...D)=>y(p)&&y(p)(...D),["stop"])),onMouseleave:O[7]||(O[7]=ot((...D)=>y(v)&&y(v)(...D),["stop"]))},[ae("div",{class:B(y(x).e("container")),style:nt(y(u))},[y(d)?(I(),ke(wn,{key:0,name:"carousel-arrow-left",persisted:""},{default:ve(()=>[pt(ae("button",{type:"button",class:B([y(x).e("arrow"),y(x).em("arrow","left")]),onMouseenter:O[0]||(O[0]=D=>y(f)("left")),onMouseleave:O[1]||(O[1]=(...D)=>y(m)&&y(m)(...D)),onClick:O[2]||(O[2]=ot(D=>y(w)(y(a)-1),["stop"]))},[ue(y(tt),null,{default:ve(()=>[ue(y(eo))]),_:1})],34),[[Dt,(A.arrow==="always"||y(o))&&(i.loop||y(a)>0)]])]),_:1})):Te("v-if",!0),y(d)?(I(),ke(wn,{key:1,name:"carousel-arrow-right",persisted:""},{default:ve(()=>[pt(ae("button",{type:"button",class:B([y(x).e("arrow"),y(x).em("arrow","right")]),onMouseenter:O[3]||(O[3]=D=>y(f)("right")),onMouseleave:O[4]||(O[4]=(...D)=>y(m)&&y(m)(...D)),onClick:O[5]||(O[5]=ot(D=>y(w)(y(a)+1),["stop"]))},[ue(y(tt),null,{default:ve(()=>[ue(y(ui))]),_:1})],34),[[Dt,(A.arrow==="always"||y(o))&&(i.loop||y(a)<y(h).length-1)]])]),_:1})):Te("v-if",!0),Le(A.$slots,"default")],6),A.indicatorPosition!=="none"?(I(),ne("ul",{key:0,class:B(y(E))},[(I(!0),ne(Qe,null,wt(y(h),(D,L)=>(I(),ne("li",{key:L,class:B([y(x).e("indicator"),y(x).em("indicator",A.direction),y(x).is("active",L===y(a))]),onMouseenter:U=>y(C)(L),onClick:ot(U=>y(g)(L),["stop"])},[ae("button",{class:B(y(x).e("button"))},[y(s)?(I(),ne("span",YX,$e(D.props.label),1)):Te("v-if",!0)],2)],42,KX))),128))],2)):Te("v-if",!0)],34))}});var QX=je(JX,[["__file","/home/runner/work/element-plus/element-plus/packages/components/carousel/src/carousel.vue"]]);const eK=Xe({name:{type:String,default:""},label:{type:[String,Number],default:""}}),tK=(t,e)=>{const n=Je(ZE),i=vt(),r=.83,a=q(),d=q(!1),s=q(0),o=q(1),c=q(!1),h=q(!1),l=q(!1),u=q(!1),{isCardType:f,isVertical:m}=n;function g(S,w,C){const x=C-1,M=w-1,E=w+1,A=C/2;return w===0&&S===x?-1:w===x&&S===0?C:S<M&&w-S>=A?C+1:S>E&&S-w>=A?-2:S}function p(S,w){var C,x;const M=y(m)?((C=n.root.value)==null?void 0:C.offsetHeight)||0:((x=n.root.value)==null?void 0:x.offsetWidth)||0;return l.value?M*((2-r)*(S-w)+1)/4:S<w?-(1+r)*M/4:(3+r)*M/4}function v(S,w,C){const x=n.root.value;return x?((C?x.offsetHeight:x.offsetWidth)||0)*(S-w):0}const b=(S,w,C)=>{var x;const M=y(f),E=(x=n.items.value.length)!=null?x:Number.NaN,A=S===w;!M&&!Un(C)&&(u.value=A||S===C),!A&&E>2&&n.loop&&(S=g(S,w,E));const O=y(m);c.value=A,M?(l.value=Math.round(Math.abs(S-w))<=1,s.value=p(S,w),o.value=y(c)?1:r):s.value=v(S,w,O),h.value=!0,A&&a.value&&n.setContainerHeight(a.value.offsetHeight)};function _(){if(n&&y(f)){const S=n.items.value.findIndex(({uid:w})=>w===i.uid);n.setActiveItem(S)}}return mt(()=>{n.addItem({props:t,states:Ft({hover:d,translate:s,scale:o,active:c,ready:h,inStage:l,animating:u}),uid:i.uid,translateItem:b})}),oo(()=>{n.removeItem(i.uid)}),{carouselItemRef:a,active:c,animating:u,hover:d,inStage:l,isVertical:m,translate:s,isCardType:f,scale:o,ready:h,handleItemClick:_}},nK=de({name:"ElCarouselItem"}),iK=de({...nK,props:eK,setup(t){const e=t,n=Ue("carousel"),{carouselItemRef:i,active:r,animating:a,hover:d,inStage:s,isVertical:o,translate:c,isCardType:h,scale:l,ready:u,handleItemClick:f}=tK(e),m=R(()=>{const p=`${`translate${y(o)?"Y":"X"}`}(${y(c)}px)`,v=`scale(${y(l)})`;return{transform:[p,v].join(" ")}});return(g,p)=>pt((I(),ne("div",{ref_key:"carouselItemRef",ref:i,class:B([y(n).e("item"),y(n).is("active",y(r)),y(n).is("in-stage",y(s)),y(n).is("hover",y(d)),y(n).is("animating",y(a)),{[y(n).em("item","card")]:y(h),[y(n).em("item","card-vertical")]:y(h)&&y(o)}]),style:nt(y(m)),onClick:p[0]||(p[0]=(...v)=>y(f)&&y(f)(...v))},[y(h)?pt((I(),ne("div",{key:0,class:B(y(n).e("mask"))},null,2)),[[Dt,!y(r)]]):Te("v-if",!0),Le(g.$slots,"default")],6)),[[Dt,y(u)]])}});var JE=je(iK,[["__file","/home/runner/work/element-plus/element-plus/packages/components/carousel/src/carousel-item.vue"]]);const rK=yt(QX,{CarouselItem:JE}),sK=mn(JE),QE={modelValue:{type:[Number,String,Boolean],default:void 0},label:{type:[String,Boolean,Number,Object]},indeterminate:Boolean,disabled:Boolean,checked:Boolean,name:{type:String,default:void 0},trueLabel:{type:[String,Number],default:void 0},falseLabel:{type:[String,Number],default:void 0},id:{type:String,default:void 0},controls:{type:String,default:void 0},border:Boolean,size:Xn,tabindex:[String,Number],validateEvent:{type:Boolean,default:!0}},eM={[bt]:t=>ct(t)||at(t)||xn(t),change:t=>ct(t)||at(t)||xn(t)},Yl=Symbol("checkboxGroupContextKey"),oK=({model:t,isChecked:e})=>{const n=Je(Yl,void 0),i=R(()=>{var a,d;const s=(a=n==null?void 0:n.max)==null?void 0:a.value,o=(d=n==null?void 0:n.min)==null?void 0:d.value;return!Un(s)&&t.value.length>=s&&!e.value||!Un(o)&&t.value.length<=o&&e.value});return{isDisabled:Mi(R(()=>(n==null?void 0:n.disabled.value)||i.value)),isLimitDisabled:i}},aK=(t,{model:e,isLimitExceeded:n,hasOwnLabel:i,isDisabled:r,isLabeledByFormItem:a})=>{const d=Je(Yl,void 0),{formItem:s}=gi(),{emit:o}=vt();function c(m){var g,p;return m===t.trueLabel||m===!0?(g=t.trueLabel)!=null?g:!0:(p=t.falseLabel)!=null?p:!1}function h(m,g){o("change",c(m),g)}function l(m){if(n.value)return;const g=m.target;o("change",c(g.checked),m)}async function u(m){n.value||!i.value&&!r.value&&a.value&&(m.composedPath().some(v=>v.tagName==="LABEL")||(e.value=c([!1,t.falseLabel].includes(e.value)),await et(),h(e.value,m)))}const f=R(()=>(d==null?void 0:d.validateEvent)||t.validateEvent);return Be(()=>t.modelValue,()=>{f.value&&(s==null||s.validate("change").catch(m=>void 0))}),{handleChange:l,onClickRoot:u}},lK=t=>{const e=q(!1),{emit:n}=vt(),i=Je(Yl,void 0),r=R(()=>Un(i)===!1),a=q(!1);return{model:R({get(){var s,o;return r.value?(s=i==null?void 0:i.modelValue)==null?void 0:s.value:(o=t.modelValue)!=null?o:e.value},set(s){var o,c;r.value&&Ze(s)?(a.value=((o=i==null?void 0:i.max)==null?void 0:o.value)!==void 0&&s.length>(i==null?void 0:i.max.value),a.value===!1&&((c=i==null?void 0:i.changeEvent)==null||c.call(i,s))):(n(bt,s),e.value=s)}}),isGroup:r,isLimitExceeded:a}},cK=(t,e,{model:n})=>{const i=Je(Yl,void 0),r=q(!1),a=R(()=>{const c=n.value;return xn(c)?c:Ze(c)?_t(t.label)?c.map(Bt).some(h=>wi(h,t.label)):c.map(Bt).includes(t.label):c!=null?c===t.trueLabel:!!c}),d=En(R(()=>{var c;return(c=i==null?void 0:i.size)==null?void 0:c.value}),{prop:!0}),s=En(R(()=>{var c;return(c=i==null?void 0:i.size)==null?void 0:c.value})),o=R(()=>!!(e.default||t.label));return{checkboxButtonSize:d,isChecked:a,isFocused:r,checkboxSize:s,hasOwnLabel:o}},uK=(t,{model:e})=>{function n(){Ze(e.value)&&!e.value.includes(t.label)?e.value.push(t.label):e.value=t.trueLabel||!0}t.checked&&n()},tM=(t,e)=>{const{formItem:n}=gi(),{model:i,isGroup:r,isLimitExceeded:a}=lK(t),{isFocused:d,isChecked:s,checkboxButtonSize:o,checkboxSize:c,hasOwnLabel:h}=cK(t,e,{model:i}),{isDisabled:l}=oK({model:i,isChecked:s}),{inputId:u,isLabeledByFormItem:f}=ho(t,{formItemContext:n,disableIdGeneration:h,disableIdManagement:r}),{handleChange:m,onClickRoot:g}=aK(t,{model:i,isLimitExceeded:a,hasOwnLabel:h,isDisabled:l,isLabeledByFormItem:f});return uK(t,{model:i}),{inputId:u,isLabeledByFormItem:f,isChecked:s,isDisabled:l,isFocused:d,checkboxButtonSize:o,checkboxSize:c,hasOwnLabel:h,model:i,handleChange:m,onClickRoot:g}},dK=["tabindex","role","aria-checked"],fK=["id","aria-hidden","name","tabindex","disabled","true-value","false-value"],hK=["id","aria-hidden","disabled","value","name","tabindex"],pK=de({name:"ElCheckbox"}),mK=de({...pK,props:QE,emits:eM,setup(t){const e=t,n=Vn(),{inputId:i,isLabeledByFormItem:r,isChecked:a,isDisabled:d,isFocused:s,checkboxSize:o,hasOwnLabel:c,model:h,handleChange:l,onClickRoot:u}=tM(e,n),f=Ue("checkbox"),m=R(()=>[f.b(),f.m(o.value),f.is("disabled",d.value),f.is("bordered",e.border),f.is("checked",a.value)]),g=R(()=>[f.e("input"),f.is("disabled",d.value),f.is("checked",a.value),f.is("indeterminate",e.indeterminate),f.is("focus",s.value)]);return(p,v)=>(I(),ke(Ct(!y(c)&&y(r)?"span":"label"),{class:B(y(m)),"aria-controls":p.indeterminate?p.controls:null,onClick:y(u)},{default:ve(()=>[ae("span",{class:B(y(g)),tabindex:p.indeterminate?0:void 0,role:p.indeterminate?"checkbox":void 0,"aria-checked":p.indeterminate?"mixed":void 0},[p.trueLabel||p.falseLabel?pt((I(),ne("input",{key:0,id:y(i),"onUpdate:modelValue":v[0]||(v[0]=b=>en(h)?h.value=b:null),class:B(y(f).e("original")),type:"checkbox","aria-hidden":p.indeterminate?"true":"false",name:p.name,tabindex:p.tabindex,disabled:y(d),"true-value":p.trueLabel,"false-value":p.falseLabel,onChange:v[1]||(v[1]=(...b)=>y(l)&&y(l)(...b)),onFocus:v[2]||(v[2]=b=>s.value=!0),onBlur:v[3]||(v[3]=b=>s.value=!1)},null,42,fK)),[[Mf,y(h)]]):pt((I(),ne("input",{key:1,id:y(i),"onUpdate:modelValue":v[4]||(v[4]=b=>en(h)?h.value=b:null),class:B(y(f).e("original")),type:"checkbox","aria-hidden":p.indeterminate?"true":"false",disabled:y(d),value:p.label,name:p.name,tabindex:p.tabindex,onChange:v[5]||(v[5]=(...b)=>y(l)&&y(l)(...b)),onFocus:v[6]||(v[6]=b=>s.value=!0),onBlur:v[7]||(v[7]=b=>s.value=!1)},null,42,hK)),[[Mf,y(h)]]),ae("span",{class:B(y(f).e("inner"))},null,2)],10,dK),y(c)?(I(),ne("span",{key:0,class:B(y(f).e("label"))},[Le(p.$slots,"default"),p.$slots.default?Te("v-if",!0):(I(),ne(Qe,{key:0},[Tt($e(p.label),1)],64))],2)):Te("v-if",!0)]),_:3},8,["class","aria-controls","onClick"]))}});var gK=je(mK,[["__file","/home/runner/work/element-plus/element-plus/packages/components/checkbox/src/checkbox.vue"]]);const vK=["name","tabindex","disabled","true-value","false-value"],yK=["name","tabindex","disabled","value"],bK=de({name:"ElCheckboxButton"}),_K=de({...bK,props:QE,emits:eM,setup(t){const e=t,n=Vn(),{isFocused:i,isChecked:r,isDisabled:a,checkboxButtonSize:d,model:s,handleChange:o}=tM(e,n),c=Je(Yl,void 0),h=Ue("checkbox"),l=R(()=>{var f,m,g,p;const v=(m=(f=c==null?void 0:c.fill)==null?void 0:f.value)!=null?m:"";return{backgroundColor:v,borderColor:v,color:(p=(g=c==null?void 0:c.textColor)==null?void 0:g.value)!=null?p:"",boxShadow:v?`-1px 0 0 0 ${v}`:void 0}}),u=R(()=>[h.b("button"),h.bm("button",d.value),h.is("disabled",a.value),h.is("checked",r.value),h.is("focus",i.value)]);return(f,m)=>(I(),ne("label",{class:B(y(u))},[f.trueLabel||f.falseLabel?pt((I(),ne("input",{key:0,"onUpdate:modelValue":m[0]||(m[0]=g=>en(s)?s.value=g:null),class:B(y(h).be("button","original")),type:"checkbox",name:f.name,tabindex:f.tabindex,disabled:y(a),"true-value":f.trueLabel,"false-value":f.falseLabel,onChange:m[1]||(m[1]=(...g)=>y(o)&&y(o)(...g)),onFocus:m[2]||(m[2]=g=>i.value=!0),onBlur:m[3]||(m[3]=g=>i.value=!1)},null,42,vK)),[[Mf,y(s)]]):pt((I(),ne("input",{key:1,"onUpdate:modelValue":m[4]||(m[4]=g=>en(s)?s.value=g:null),class:B(y(h).be("button","original")),type:"checkbox",name:f.name,tabindex:f.tabindex,disabled:y(a),value:f.label,onChange:m[5]||(m[5]=(...g)=>y(o)&&y(o)(...g)),onFocus:m[6]||(m[6]=g=>i.value=!0),onBlur:m[7]||(m[7]=g=>i.value=!1)},null,42,yK)),[[Mf,y(s)]]),f.$slots.default||f.label?(I(),ne("span",{key:2,class:B(y(h).be("button","inner")),style:nt(y(r)?y(l):void 0)},[Le(f.$slots,"default",{},()=>[Tt($e(f.label),1)])],6)):Te("v-if",!0)],2))}});var nM=je(_K,[["__file","/home/runner/work/element-plus/element-plus/packages/components/checkbox/src/checkbox-button.vue"]]);const SK=Xe({modelValue:{type:Ae(Array),default:()=>[]},disabled:Boolean,min:Number,max:Number,size:Xn,label:String,fill:String,textColor:String,tag:{type:String,default:"div"},validateEvent:{type:Boolean,default:!0}}),wK={[bt]:t=>Ze(t),change:t=>Ze(t)},CK=de({name:"ElCheckboxGroup"}),xK=de({...CK,props:SK,emits:wK,setup(t,{emit:e}){const n=t,i=Ue("checkbox"),{formItem:r}=gi(),{inputId:a,isLabeledByFormItem:d}=ho(n,{formItemContext:r}),s=async c=>{e(bt,c),await et(),e("change",c)},o=R({get(){return n.modelValue},set(c){s(c)}});return xt(Yl,{...rs(Rn(n),["size","min","max","disabled","validateEvent","fill","textColor"]),modelValue:o,changeEvent:s}),Be(()=>n.modelValue,()=>{n.validateEvent&&(r==null||r.validate("change").catch(c=>void 0))}),(c,h)=>{var l;return I(),ke(Ct(c.tag),{id:y(a),class:B(y(i).b("group")),role:"group","aria-label":y(d)?void 0:c.label||"checkbox-group","aria-labelledby":y(d)?(l=y(r))==null?void 0:l.labelId:void 0},{default:ve(()=>[Le(c.$slots,"default")]),_:3},8,["id","class","aria-label","aria-labelledby"])}}});var iM=je(xK,[["__file","/home/runner/work/element-plus/element-plus/packages/components/checkbox/src/checkbox-group.vue"]]);const er=yt(gK,{CheckboxButton:nM,CheckboxGroup:iM}),TK=mn(nM),rM=mn(iM),sM=Xe({size:Xn,disabled:Boolean,label:{type:[String,Number,Boolean],default:""}}),EK=Xe({...sM,modelValue:{type:[String,Number,Boolean],default:""},name:{type:String,default:""},border:Boolean}),oM={[bt]:t=>ct(t)||at(t)||xn(t),[tn]:t=>ct(t)||at(t)||xn(t)},aM=Symbol("radioGroupKey"),lM=(t,e)=>{const n=q(),i=Je(aM,void 0),r=R(()=>!!i),a=R({get(){return r.value?i.modelValue:t.modelValue},set(h){r.value?i.changeEvent(h):e&&e(bt,h),n.value.checked=t.modelValue===t.label}}),d=En(R(()=>i==null?void 0:i.size)),s=Mi(R(()=>i==null?void 0:i.disabled)),o=q(!1),c=R(()=>s.value||r.value&&a.value!==t.label?-1:0);return{radioRef:n,isGroup:r,radioGroup:i,focus:o,size:d,disabled:s,tabIndex:c,modelValue:a}},MK=["value","name","disabled"],AK=de({name:"ElRadio"}),kK=de({...AK,props:EK,emits:oM,setup(t,{emit:e}){const n=t,i=Ue("radio"),{radioRef:r,radioGroup:a,focus:d,size:s,disabled:o,modelValue:c}=lM(n,e);function h(){et(()=>e("change",c.value))}return(l,u)=>{var f;return I(),ne("label",{class:B([y(i).b(),y(i).is("disabled",y(o)),y(i).is("focus",y(d)),y(i).is("bordered",l.border),y(i).is("checked",y(c)===l.label),y(i).m(y(s))])},[ae("span",{class:B([y(i).e("input"),y(i).is("disabled",y(o)),y(i).is("checked",y(c)===l.label)])},[pt(ae("input",{ref_key:"radioRef",ref:r,"onUpdate:modelValue":u[0]||(u[0]=m=>en(c)?c.value=m:null),class:B(y(i).e("original")),value:l.label,name:l.name||((f=y(a))==null?void 0:f.name),disabled:y(o),type:"radio",onFocus:u[1]||(u[1]=m=>d.value=!0),onBlur:u[2]||(u[2]=m=>d.value=!1),onChange:h},null,42,MK),[[A1,y(c)]]),ae("span",{class:B(y(i).e("inner"))},null,2)],2),ae("span",{class:B(y(i).e("label")),onKeydown:u[3]||(u[3]=ot(()=>{},["stop"]))},[Le(l.$slots,"default",{},()=>[Tt($e(l.label),1)])],34)],2)}}});var RK=je(kK,[["__file","/home/runner/work/element-plus/element-plus/packages/components/radio/src/radio.vue"]]);const PK=Xe({...sM,name:{type:String,default:""}}),OK=["value","name","disabled"],LK=de({name:"ElRadioButton"}),IK=de({...LK,props:PK,setup(t){const e=t,n=Ue("radio"),{radioRef:i,focus:r,size:a,disabled:d,modelValue:s,radioGroup:o}=lM(e),c=R(()=>({backgroundColor:(o==null?void 0:o.fill)||"",borderColor:(o==null?void 0:o.fill)||"",boxShadow:o!=null&&o.fill?`-1px 0 0 0 ${o.fill}`:"",color:(o==null?void 0:o.textColor)||""}));return(h,l)=>{var u;return I(),ne("label",{class:B([y(n).b("button"),y(n).is("active",y(s)===h.label),y(n).is("disabled",y(d)),y(n).is("focus",y(r)),y(n).bm("button",y(a))])},[pt(ae("input",{ref_key:"radioRef",ref:i,"onUpdate:modelValue":l[0]||(l[0]=f=>en(s)?s.value=f:null),class:B(y(n).be("button","original-radio")),value:h.label,type:"radio",name:h.name||((u=y(o))==null?void 0:u.name),disabled:y(d),onFocus:l[1]||(l[1]=f=>r.value=!0),onBlur:l[2]||(l[2]=f=>r.value=!1)},null,42,OK),[[A1,y(s)]]),ae("span",{class:B(y(n).be("button","inner")),style:nt(y(s)===h.label?y(c):{}),onKeydown:l[3]||(l[3]=ot(()=>{},["stop"]))},[Le(h.$slots,"default",{},()=>[Tt($e(h.label),1)])],38)],2)}}});var cM=je(IK,[["__file","/home/runner/work/element-plus/element-plus/packages/components/radio/src/radio-button.vue"]]);const DK=Xe({id:{type:String,default:void 0},size:Xn,disabled:Boolean,modelValue:{type:[String,Number,Boolean],default:""},fill:{type:String,default:""},label:{type:String,default:void 0},textColor:{type:String,default:""},name:{type:String,default:void 0},validateEvent:{type:Boolean,default:!0}}),NK=oM,FK=["id","aria-label","aria-labelledby"],BK=de({name:"ElRadioGroup"}),UK=de({...BK,props:DK,emits:NK,setup(t,{emit:e}){const n=t,i=Ue("radio"),r=Ji(),a=q(),{formItem:d}=gi(),{inputId:s,isLabeledByFormItem:o}=ho(n,{formItemContext:d}),c=l=>{e(bt,l),et(()=>e("change",l))};mt(()=>{const l=a.value.querySelectorAll("[type=radio]"),u=l[0];!Array.from(l).some(f=>f.checked)&&u&&(u.tabIndex=0)});const h=R(()=>n.name||r.value);return xt(aM,Ft({...Rn(n),changeEvent:c,name:h})),Be(()=>n.modelValue,()=>{n.validateEvent&&(d==null||d.validate("change").catch(l=>void 0))}),(l,u)=>(I(),ne("div",{id:y(s),ref_key:"radioGroupRef",ref:a,class:B(y(i).b("group")),role:"radiogroup","aria-label":y(o)?void 0:l.label||"radio-group","aria-labelledby":y(o)?y(d).labelId:void 0},[Le(l.$slots,"default")],10,FK))}});var uM=je(UK,[["__file","/home/runner/work/element-plus/element-plus/packages/components/radio/src/radio-group.vue"]]);const dM=yt(RK,{RadioButton:cM,RadioGroup:uM}),VK=mn(uM),HK=mn(cM);var zK=de({name:"NodeContent",setup(){return{ns:Ue("cascader-node")}},render(){const{ns:t}=this,{node:e,panel:n}=this.$parent,{data:i,label:r}=e,{renderLabelFn:a}=n;return st("span",{class:t.e("label")},a?a({node:e,data:i}):r)}});const m0=Symbol(),$K=de({name:"ElCascaderNode",components:{ElCheckbox:er,ElRadio:dM,NodeContent:zK,ElIcon:tt,Check:Du,Loading:co,ArrowRight:ui},props:{node:{type:Object,required:!0},menuId:String},emits:["expand"],setup(t,{emit:e}){const n=Je(m0),i=Ue("cascader-node"),r=R(()=>n.isHoverMenu),a=R(()=>n.config.multiple),d=R(()=>n.config.checkStrictly),s=R(()=>{var C;return(C=n.checkedNodes[0])==null?void 0:C.uid}),o=R(()=>t.node.isDisabled),c=R(()=>t.node.isLeaf),h=R(()=>d.value&&!c.value||!o.value),l=R(()=>f(n.expandingNode)),u=R(()=>d.value&&n.checkedNodes.some(f)),f=C=>{var x;const{level:M,uid:E}=t.node;return((x=C==null?void 0:C.pathNodes[M-1])==null?void 0:x.uid)===E},m=()=>{l.value||n.expandNode(t.node)},g=C=>{const{node:x}=t;C!==x.checked&&n.handleCheckChange(x,C)},p=()=>{n.lazyLoad(t.node,()=>{c.value||m()})},v=C=>{r.value&&(b(),!c.value&&e("expand",C))},b=()=>{const{node:C}=t;!h.value||C.loading||(C.loaded?m():p())},_=()=>{r.value&&!c.value||(c.value&&!o.value&&!d.value&&!a.value?w(!0):b())},S=C=>{d.value?(g(C),t.node.loaded&&m()):w(C)},w=C=>{t.node.loaded?(g(C),!d.value&&m()):p()};return{panel:n,isHoverMenu:r,multiple:a,checkStrictly:d,checkedNodeId:s,isDisabled:o,isLeaf:c,expandable:h,inExpandingPath:l,inCheckedPath:u,ns:i,handleHoverExpand:v,handleExpand:b,handleClick:_,handleCheck:w,handleSelectCheck:S}}}),WK=["id","aria-haspopup","aria-owns","aria-expanded","tabindex"],GK=ae("span",null,null,-1);function jK(t,e,n,i,r,a){const d=ft("el-checkbox"),s=ft("el-radio"),o=ft("check"),c=ft("el-icon"),h=ft("node-content"),l=ft("loading"),u=ft("arrow-right");return I(),ne("li",{id:`${t.menuId}-${t.node.uid}`,role:"menuitem","aria-haspopup":!t.isLeaf,"aria-owns":t.isLeaf?null:t.menuId,"aria-expanded":t.inExpandingPath,tabindex:t.expandable?-1:void 0,class:B([t.ns.b(),t.ns.is("selectable",t.checkStrictly),t.ns.is("active",t.node.checked),t.ns.is("disabled",!t.expandable),t.inExpandingPath&&"in-active-path",t.inCheckedPath&&"in-checked-path"]),onMouseenter:e[2]||(e[2]=(...f)=>t.handleHoverExpand&&t.handleHoverExpand(...f)),onFocus:e[3]||(e[3]=(...f)=>t.handleHoverExpand&&t.handleHoverExpand(...f)),onClick:e[4]||(e[4]=(...f)=>t.handleClick&&t.handleClick(...f))},[Te(" prefix "),t.multiple?(I(),ke(d,{key:0,"model-value":t.node.checked,indeterminate:t.node.indeterminate,disabled:t.isDisabled,onClick:e[0]||(e[0]=ot(()=>{},["stop"])),"onUpdate:modelValue":t.handleSelectCheck},null,8,["model-value","indeterminate","disabled","onUpdate:modelValue"])):t.checkStrictly?(I(),ke(s,{key:1,"model-value":t.checkedNodeId,label:t.node.uid,disabled:t.isDisabled,"onUpdate:modelValue":t.handleSelectCheck,onClick:e[1]||(e[1]=ot(()=>{},["stop"]))},{default:ve(()=>[Te(`
        Add an empty element to avoid render label,
        do not use empty fragment here for https://github.com/vuejs/vue-next/pull/2485
      `),GK]),_:1},8,["model-value","label","disabled","onUpdate:modelValue"])):t.isLeaf&&t.node.checked?(I(),ke(c,{key:2,class:B(t.ns.e("prefix"))},{default:ve(()=>[ue(o)]),_:1},8,["class"])):Te("v-if",!0),Te(" content "),ue(h),Te(" postfix "),t.isLeaf?Te("v-if",!0):(I(),ne(Qe,{key:3},[t.node.loading?(I(),ke(c,{key:0,class:B([t.ns.is("loading"),t.ns.e("postfix")])},{default:ve(()=>[ue(l)]),_:1},8,["class"])):(I(),ke(c,{key:1,class:B(["arrow-right",t.ns.e("postfix")])},{default:ve(()=>[ue(u)]),_:1},8,["class"]))],64))],42,WK)}var XK=je($K,[["render",jK],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/node.vue"]]);const KK=de({name:"ElCascaderMenu",components:{Loading:co,ElIcon:tt,ElScrollbar:Cs,ElCascaderNode:XK},props:{nodes:{type:Array,required:!0},index:{type:Number,required:!0}},setup(t){const e=vt(),n=Ue("cascader-menu"),{t:i}=Pt(),r=Eh();let a=null,d=null;const s=Je(m0),o=q(null),c=R(()=>!t.nodes.length),h=R(()=>!s.initialLoaded),l=R(()=>`cascader-menu-${r}-${t.index}`),u=p=>{a=p.target},f=p=>{if(!(!s.isHoverMenu||!a||!o.value))if(a.contains(p.target)){m();const v=e.vnode.el,{left:b}=v.getBoundingClientRect(),{offsetWidth:_,offsetHeight:S}=v,w=p.clientX-b,C=a.offsetTop,x=C+a.offsetHeight;o.value.innerHTML=`
          <path style="pointer-events: auto;" fill="transparent" d="M${w} ${C} L${_} 0 V${C} Z" />
          <path style="pointer-events: auto;" fill="transparent" d="M${w} ${x} L${_} ${S} V${x} Z" />
        `}else d||(d=window.setTimeout(g,s.config.hoverThreshold))},m=()=>{d&&(clearTimeout(d),d=null)},g=()=>{o.value&&(o.value.innerHTML="",m())};return{ns:n,panel:s,hoverZone:o,isEmpty:c,isLoading:h,menuId:l,t:i,handleExpand:u,handleMouseMove:f,clearHoverZone:g}}});function YK(t,e,n,i,r,a){const d=ft("el-cascader-node"),s=ft("loading"),o=ft("el-icon"),c=ft("el-scrollbar");return I(),ke(c,{key:t.menuId,tag:"ul",role:"menu",class:B(t.ns.b()),"wrap-class":t.ns.e("wrap"),"view-class":[t.ns.e("list"),t.ns.is("empty",t.isEmpty)],onMousemove:t.handleMouseMove,onMouseleave:t.clearHoverZone},{default:ve(()=>{var h;return[(I(!0),ne(Qe,null,wt(t.nodes,l=>(I(),ke(d,{key:l.uid,node:l,"menu-id":t.menuId,onExpand:t.handleExpand},null,8,["node","menu-id","onExpand"]))),128)),t.isLoading?(I(),ne("div",{key:0,class:B(t.ns.e("empty-text"))},[ue(o,{size:"14",class:B(t.ns.is("loading"))},{default:ve(()=>[ue(s)]),_:1},8,["class"]),Tt(" "+$e(t.t("el.cascader.loading")),1)],2)):t.isEmpty?(I(),ne("div",{key:1,class:B(t.ns.e("empty-text"))},$e(t.t("el.cascader.noData")),3)):(h=t.panel)!=null&&h.isHoverMenu?(I(),ne("svg",{key:2,ref:"hoverZone",class:B(t.ns.e("hover-zone"))},null,2)):Te("v-if",!0)]}),_:1},8,["class","wrap-class","view-class","onMousemove","onMouseleave"])}var qK=je(KK,[["render",YK],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/menu.vue"]]);let ZK=0;const JK=t=>{const e=[t];let{parent:n}=t;for(;n;)e.unshift(n),n=n.parent;return e};let ag=class lg{constructor(e,n,i,r=!1){this.data=e,this.config=n,this.parent=i,this.root=r,this.uid=ZK++,this.checked=!1,this.indeterminate=!1,this.loading=!1;const{value:a,label:d,children:s}=n,o=e[s],c=JK(this);this.level=r?0:i?i.level+1:1,this.value=e[a],this.label=e[d],this.pathNodes=c,this.pathValues=c.map(h=>h.value),this.pathLabels=c.map(h=>h.label),this.childrenData=o,this.children=(o||[]).map(h=>new lg(h,n,this)),this.loaded=!n.lazy||this.isLeaf||!$i(o)}get isDisabled(){const{data:e,parent:n,config:i}=this,{disabled:r,checkStrictly:a}=i;return(lt(r)?r(e,this):!!e[r])||!a&&(n==null?void 0:n.isDisabled)}get isLeaf(){const{data:e,config:n,childrenData:i,loaded:r}=this,{lazy:a,leaf:d}=n,s=lt(d)?d(e,this):e[d];return Un(s)?a&&!r?!1:!(Array.isArray(i)&&i.length):!!s}get valueByOption(){return this.config.emitPath?this.pathValues:this.value}appendChild(e){const{childrenData:n,children:i}=this,r=new lg(e,this.config,this);return Array.isArray(n)?n.push(e):this.childrenData=[e],i.push(r),r}calcText(e,n){const i=e?this.pathLabels.join(n):this.label;return this.text=i,i}broadcast(e,...n){const i=`onParent${Mr(e)}`;this.children.forEach(r=>{r&&(r.broadcast(e,...n),r[i]&&r[i](...n))})}emit(e,...n){const{parent:i}=this,r=`onChild${Mr(e)}`;i&&(i[r]&&i[r](...n),i.emit(e,...n))}onParentCheck(e){this.isDisabled||this.setCheckState(e)}onChildCheck(){const{children:e}=this,n=e.filter(r=>!r.isDisabled),i=n.length?n.every(r=>r.checked):!1;this.setCheckState(i)}setCheckState(e){const n=this.children.length,i=this.children.reduce((r,a)=>{const d=a.checked?1:a.indeterminate?.5:0;return r+d},0);this.checked=this.loaded&&this.children.filter(r=>!r.isDisabled).every(r=>r.loaded&&r.checked)&&e,this.indeterminate=this.loaded&&i!==n&&i>0}doCheck(e){if(this.checked===e)return;const{checkStrictly:n,multiple:i}=this.config;n||!i?this.checked=e:(this.broadcast("check",e),this.setCheckState(e),this.emit("check"))}};const cg=(t,e)=>t.reduce((n,i)=>(i.isLeaf?n.push(i):(!e&&n.push(i),n=n.concat(cg(i.children,e))),n),[]);class Tw{constructor(e,n){this.config=n;const i=(e||[]).map(r=>new ag(r,this.config));this.nodes=i,this.allNodes=cg(i,!1),this.leafNodes=cg(i,!0)}getNodes(){return this.nodes}getFlattedNodes(e){return e?this.leafNodes:this.allNodes}appendNode(e,n){const i=n?n.appendChild(e):new ag(e,this.config);n||this.nodes.push(i),this.allNodes.push(i),i.isLeaf&&this.leafNodes.push(i)}appendNodes(e,n){e.forEach(i=>this.appendNode(i,n))}getNodeByValue(e,n=!1){return!e&&e!==0?null:this.getFlattedNodes(n).find(r=>wi(r.value,e)||wi(r.pathValues,e))||null}getSameNode(e){return e&&this.getFlattedNodes(!1).find(({value:i,level:r})=>wi(e.value,i)&&e.level===r)||null}}const fM=Xe({modelValue:{type:Ae([Number,String,Array])},options:{type:Ae(Array),default:()=>[]},props:{type:Ae(Object),default:()=>({})}}),QK={expandTrigger:"click",multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:Ht,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},eY=t=>R(()=>({...QK,...t.props})),Ew=t=>{if(!t)return 0;const e=t.id.split("-");return Number(e[e.length-2])},tY=t=>{if(!t)return;const e=t.querySelector("input");e?e.click():wx(t)&&t.click()},nY=(t,e)=>{const n=e.slice(0),i=n.map(a=>a.uid),r=t.reduce((a,d)=>{const s=i.indexOf(d.uid);return s>-1&&(a.push(d),n.splice(s,1),i.splice(s,1)),a},[]);return r.push(...n),r},iY=de({name:"ElCascaderPanel",components:{ElCascaderMenu:qK},props:{...fM,border:{type:Boolean,default:!0},renderLabel:Function},emits:[bt,tn,"close","expand-change"],setup(t,{emit:e,slots:n}){let i=!1;const r=Ue("cascader"),a=eY(t);let d=null;const s=q(!0),o=q([]),c=q(null),h=q([]),l=q(null),u=q([]),f=R(()=>a.value.expandTrigger==="hover"),m=R(()=>t.renderLabel||n.default),g=()=>{const{options:D}=t,L=a.value;i=!1,d=new Tw(D,L),h.value=[d.getNodes()],L.lazy&&$i(t.options)?(s.value=!1,p(void 0,U=>{U&&(d=new Tw(U,L),h.value=[d.getNodes()]),s.value=!0,M(!1,!0)})):M(!1,!0)},p=(D,L)=>{const U=a.value;D=D||new ag({},U,void 0,!0),D.loading=!0;const j=V=>{const k=D,F=k.root?null:k;V&&(d==null||d.appendNodes(V,F)),k.loading=!1,k.loaded=!0,k.childrenData=k.childrenData||[],L&&L(V)};U.lazyLoad(D,j)},v=(D,L)=>{var U;const{level:j}=D,V=h.value.slice(0,j);let k;D.isLeaf?k=D.pathNodes[j-2]:(k=D,V.push(D.children)),((U=l.value)==null?void 0:U.uid)!==(k==null?void 0:k.uid)&&(l.value=D,h.value=V,!L&&e("expand-change",(D==null?void 0:D.pathValues)||[]))},b=(D,L,U=!0)=>{const{checkStrictly:j,multiple:V}=a.value,k=u.value[0];i=!0,!V&&(k==null||k.doCheck(!1)),D.doCheck(L),x(),U&&!V&&!j&&e("close"),!U&&!V&&!j&&_(D)},_=D=>{D&&(D=D.parent,_(D),D&&v(D))},S=D=>d==null?void 0:d.getFlattedNodes(D),w=D=>{var L;return(L=S(D))==null?void 0:L.filter(U=>U.checked!==!1)},C=()=>{u.value.forEach(D=>D.doCheck(!1)),x(),h.value=h.value.slice(0,1),l.value=null,e("expand-change",[])},x=()=>{var D;const{checkStrictly:L,multiple:U}=a.value,j=u.value,V=w(!L),k=nY(j,V),F=k.map(T=>T.valueByOption);u.value=k,c.value=U?F:(D=F[0])!=null?D:null},M=(D=!1,L=!1)=>{const{modelValue:U}=t,{lazy:j,multiple:V,checkStrictly:k}=a.value,F=!k;if(!(!s.value||i||!L&&wi(U,c.value)))if(j&&!D){const P=ES(y$(us(U))).map(H=>d==null?void 0:d.getNodeByValue(H)).filter(H=>!!H&&!H.loaded&&!H.loading);P.length?P.forEach(H=>{p(H,()=>M(!1,L))}):M(!0,L)}else{const T=V?us(U):[U],P=ES(T.map(H=>d==null?void 0:d.getNodeByValue(H,F)));E(P,L),c.value=Rf(U)}},E=(D,L=!0)=>{const{checkStrictly:U}=a.value,j=u.value,V=D.filter(T=>!!T&&(U||T.isLeaf)),k=d==null?void 0:d.getSameNode(l.value),F=L&&k||V[0];F?F.pathNodes.forEach(T=>v(T,!0)):l.value=null,j.forEach(T=>T.doCheck(!1)),V.forEach(T=>T.doCheck(!0)),u.value=V,et(A)},A=()=>{kt&&o.value.forEach(D=>{const L=D==null?void 0:D.$el;if(L){const U=L.querySelector(`.${r.namespace.value}-scrollbar__wrap`),j=L.querySelector(`.${r.b("node")}.${r.is("active")}`)||L.querySelector(`.${r.b("node")}.in-active-path`);fT(U,j)}})},O=D=>{const L=D.target,{code:U}=D;switch(U){case rt.up:case rt.down:{D.preventDefault();const j=U===rt.up?-1:1;Kd(Cx(L,j,`.${r.b("node")}[tabindex="-1"]`));break}case rt.left:{D.preventDefault();const j=o.value[Ew(L)-1],V=j==null?void 0:j.$el.querySelector(`.${r.b("node")}[aria-expanded="true"]`);Kd(V);break}case rt.right:{D.preventDefault();const j=o.value[Ew(L)+1],V=j==null?void 0:j.$el.querySelector(`.${r.b("node")}[tabindex="-1"]`);Kd(V);break}case rt.enter:tY(L);break}};return xt(m0,Ft({config:a,expandingNode:l,checkedNodes:u,isHoverMenu:f,initialLoaded:s,renderLabelFn:m,lazyLoad:p,expandNode:v,handleCheckChange:b})),Be([a,()=>t.options],g,{deep:!0,immediate:!0}),Be(()=>t.modelValue,()=>{i=!1,M()},{deep:!0}),Be(()=>c.value,D=>{wi(D,t.modelValue)||(e(bt,D),e(tn,D))}),n1(()=>o.value=[]),mt(()=>!$i(t.modelValue)&&M()),{ns:r,menuList:o,menus:h,checkedNodes:u,handleKeyDown:O,handleCheckChange:b,getFlattedNodes:S,getCheckedNodes:w,clearCheckedNodes:C,calculateCheckedValue:x,scrollToExpandingNode:A}}});function rY(t,e,n,i,r,a){const d=ft("el-cascader-menu");return I(),ne("div",{class:B([t.ns.b("panel"),t.ns.is("bordered",t.border)]),onKeydown:e[0]||(e[0]=(...s)=>t.handleKeyDown&&t.handleKeyDown(...s))},[(I(!0),ne(Qe,null,wt(t.menus,(s,o)=>(I(),ke(d,{key:o,ref_for:!0,ref:c=>t.menuList[o]=c,index:o,nodes:[...s]},null,8,["index","nodes"]))),128))],34)}var nf=je(iY,[["render",rY],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/index.vue"]]);nf.install=t=>{t.component(nf.name,nf)};const hM=nf,sY=hM,g0=Xe({type:{type:String,values:["success","info","warning","danger",""],default:""},closable:Boolean,disableTransitions:Boolean,hit:Boolean,color:{type:String,default:""},size:{type:String,values:Hr,default:""},effect:{type:String,values:["dark","light","plain"],default:"light"},round:Boolean}),oY={close:t=>t instanceof MouseEvent,click:t=>t instanceof MouseEvent},aY=de({name:"ElTag"}),lY=de({...aY,props:g0,emits:oY,setup(t,{emit:e}){const n=t,i=En(),r=Ue("tag"),a=R(()=>{const{type:o,hit:c,effect:h,closable:l,round:u}=n;return[r.b(),r.is("closable",l),r.m(o),r.m(i.value),r.m(h),r.is("hit",c),r.is("round",u)]}),d=o=>{e("close",o)},s=o=>{e("click",o)};return(o,c)=>o.disableTransitions?(I(),ne("span",{key:0,class:B(y(a)),style:nt({backgroundColor:o.color}),onClick:s},[ae("span",{class:B(y(r).e("content"))},[Le(o.$slots,"default")],2),o.closable?(I(),ke(y(tt),{key:0,class:B(y(r).e("close")),onClick:ot(d,["stop"])},{default:ve(()=>[ue(y(yr))]),_:1},8,["class","onClick"])):Te("v-if",!0)],6)):(I(),ke(wn,{key:1,name:`${y(r).namespace.value}-zoom-in-center`,appear:""},{default:ve(()=>[ae("span",{class:B(y(a)),style:nt({backgroundColor:o.color}),onClick:s},[ae("span",{class:B(y(r).e("content"))},[Le(o.$slots,"default")],2),o.closable?(I(),ke(y(tt),{key:0,class:B(y(r).e("close")),onClick:ot(d,["stop"])},{default:ve(()=>[ue(y(yr))]),_:1},8,["class","onClick"])):Te("v-if",!0)],6)]),_:3},8,["name"]))}});var cY=je(lY,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tag/src/tag.vue"]]);const hu=yt(cY),uY=Xe({...fM,size:Xn,placeholder:String,disabled:Boolean,clearable:Boolean,filterable:Boolean,filterMethod:{type:Ae(Function),default:(t,e)=>t.text.includes(e)},separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,collapseTagsTooltip:{type:Boolean,default:!1},debounce:{type:Number,default:300},beforeFilter:{type:Ae(Function),default:()=>!0},popperClass:{type:String,default:""},teleported:Fn.teleported,tagType:{...g0.type,default:"info"},validateEvent:{type:Boolean,default:!0}}),dY={[bt]:t=>!!t||t===null,[tn]:t=>!!t||t===null,focus:t=>t instanceof FocusEvent,blur:t=>t instanceof FocusEvent,visibleChange:t=>xn(t),expandChange:t=>!!t,removeTag:t=>!!t},fY={key:0},hY=["placeholder","onKeydown"],pY=["onClick"],mY="ElCascader",gY=de({name:mY}),vY=de({...gY,props:uY,emits:dY,setup(t,{expose:e,emit:n}){const i=t,r={modifiers:[{name:"arrowPosition",enabled:!0,phase:"main",fn:({state:oe})=>{const{modifiersData:J,placement:ce}=oe;["right","left","bottom","top"].includes(ce)||(J.arrow.x=35)},requires:["arrow"]}]},a=Vl();let d=0,s=0;const o=Ue("cascader"),c=Ue("input"),{t:h}=Pt(),{form:l,formItem:u}=gi(),f=q(null),m=q(null),g=q(null),p=q(null),v=q(null),b=q(!1),_=q(!1),S=q(!1),w=q(!1),C=q(""),x=q(""),M=q([]),E=q([]),A=q([]),O=q(!1),D=R(()=>a.style),L=R(()=>i.disabled||(l==null?void 0:l.disabled)),U=R(()=>i.placeholder||h("el.cascader.placeholder")),j=R(()=>x.value||M.value.length>0||O.value?"":U.value),V=En(),k=R(()=>["small"].includes(V.value)?"small":"default"),F=R(()=>!!i.props.multiple),T=R(()=>!i.filterable||F.value),P=R(()=>F.value?x.value:C.value),H=R(()=>{var oe;return((oe=p.value)==null?void 0:oe.checkedNodes)||[]}),N=R(()=>!i.clearable||L.value||S.value||!_.value?!1:!!H.value.length),G=R(()=>{const{showAllLevels:oe,separator:J}=i,ce=H.value;return ce.length?F.value?"":ce[0].calcText(oe,J):""}),$=R({get(){return Rf(i.modelValue)},set(oe){n(bt,oe),n(tn,oe),i.validateEvent&&(u==null||u.validate("change").catch(J=>void 0))}}),z=R(()=>[o.b(),o.m(V.value),o.is("disabled",L.value),a.class]),Z=R(()=>[c.e("icon"),"icon-arrow-down",o.is("reverse",b.value)]),W=R(()=>o.is("focus",b.value||w.value)),te=R(()=>{var oe,J;return(J=(oe=f.value)==null?void 0:oe.popperRef)==null?void 0:J.contentRef}),ie=oe=>{var J,ce,ye;L.value||(oe=oe??!b.value,oe!==b.value&&(b.value=oe,(ce=(J=m.value)==null?void 0:J.input)==null||ce.setAttribute("aria-expanded",`${oe}`),oe?(re(),et((ye=p.value)==null?void 0:ye.scrollToExpandingNode)):i.filterable&&Y(),n("visibleChange",oe)))},re=()=>{et(()=>{var oe;(oe=f.value)==null||oe.updatePopper()})},_e=()=>{S.value=!1},Pe=oe=>{const{showAllLevels:J,separator:ce}=i;return{node:oe,key:oe.uid,text:oe.calcText(J,ce),hitState:!1,closable:!L.value&&!oe.isDisabled,isCollapseTag:!1}},K=oe=>{var J;const ce=oe.node;ce.doCheck(!1),(J=p.value)==null||J.calculateCheckedValue(),n("removeTag",ce.valueByOption)},Q=()=>{if(!F.value)return;const oe=H.value,J=[],ce=[];if(oe.forEach(ye=>ce.push(Pe(ye))),E.value=ce,oe.length){const[ye,...Oe]=oe,ze=Oe.length;J.push(Pe(ye)),ze&&(i.collapseTags?J.push({key:-1,text:`+ ${ze}`,closable:!1,isCollapseTag:!0}):Oe.forEach(xe=>J.push(Pe(xe))))}M.value=J},fe=()=>{var oe,J;const{filterMethod:ce,showAllLevels:ye,separator:Oe}=i,ze=(J=(oe=p.value)==null?void 0:oe.getFlattedNodes(!i.props.checkStrictly))==null?void 0:J.filter(xe=>xe.isDisabled?!1:(xe.calcText(ye,Oe),ce(xe,P.value)));F.value&&(M.value.forEach(xe=>{xe.hitState=!1}),E.value.forEach(xe=>{xe.hitState=!1})),S.value=!0,A.value=ze,re()},ge=()=>{var oe;let J;S.value&&v.value?J=v.value.$el.querySelector(`.${o.e("suggestion-item")}`):J=(oe=p.value)==null?void 0:oe.$el.querySelector(`.${o.b("node")}[tabindex="-1"]`),J&&(J.focus(),!S.value&&J.click())},se=()=>{var oe,J;const ce=(oe=m.value)==null?void 0:oe.input,ye=g.value,Oe=(J=v.value)==null?void 0:J.$el;if(!(!kt||!ce)){if(Oe){const ze=Oe.querySelector(`.${o.e("suggestion-list")}`);ze.style.minWidth=`${ce.offsetWidth}px`}if(ye){const{offsetHeight:ze}=ye,xe=M.value.length>0?`${Math.max(ze+6,d)}px`:`${d}px`;ce.style.height=xe,re()}}},me=oe=>{var J;return(J=p.value)==null?void 0:J.getCheckedNodes(oe)},be=oe=>{re(),n("expandChange",oe)},Me=oe=>{var J;const ce=(J=oe.target)==null?void 0:J.value;if(oe.type==="compositionend")O.value=!1,et(()=>ee(ce));else{const ye=ce[ce.length-1]||"";O.value=!xh(ye)}},Ee=oe=>{if(!O.value)switch(oe.code){case rt.enter:ie();break;case rt.down:ie(!0),et(ge),oe.preventDefault();break;case rt.esc:b.value===!0&&(oe.preventDefault(),oe.stopPropagation(),ie(!1));break;case rt.tab:ie(!1);break}},X=()=>{var oe;(oe=p.value)==null||oe.clearCheckedNodes(),!b.value&&i.filterable&&Y(),ie(!1)},Y=()=>{const{value:oe}=G;C.value=oe,x.value=oe},le=oe=>{var J,ce;const{checked:ye}=oe;F.value?(J=p.value)==null||J.handleCheckChange(oe,!ye,!1):(!ye&&((ce=p.value)==null||ce.handleCheckChange(oe,!0,!1)),ie(!1))},Ce=oe=>{const J=oe.target,{code:ce}=oe;switch(ce){case rt.up:case rt.down:{const ye=ce===rt.up?-1:1;Kd(Cx(J,ye,`.${o.e("suggestion-item")}[tabindex="-1"]`));break}case rt.enter:J.click();break}},Re=()=>{const oe=M.value,J=oe[oe.length-1];s=x.value?0:s+1,!(!J||!s||i.collapseTags&&oe.length>1)&&(J.hitState?K(J):J.hitState=!0)},Ne=oe=>{const J=oe.target,ce=o.e("search-input");J.className===ce&&(w.value=!0),n("focus",oe)},he=oe=>{w.value=!1,n("blur",oe)},pe=pi(()=>{const{value:oe}=P;if(!oe)return;const J=i.beforeFilter(oe);Vc(J)?J.then(fe).catch(()=>{}):J!==!1?fe():_e()},i.debounce),ee=(oe,J)=>{!b.value&&ie(!0),!(J!=null&&J.isComposing)&&(oe?pe():_e())};return Be(S,re),Be([H,L],Q),Be(M,()=>{et(()=>se())}),Be(G,Y,{immediate:!0}),mt(()=>{const oe=m.value.input,J=Number.parseFloat(zB(c.cssVarName("input-height"),oe).value)-2;d=oe.offsetHeight||J,Qn(oe,se)}),e({getCheckedNodes:me,cascaderPanelRef:p,togglePopperVisible:ie,contentRef:te}),(oe,J)=>(I(),ke(y(mi),{ref_key:"tooltipRef",ref:f,visible:b.value,teleported:oe.teleported,"popper-class":[y(o).e("dropdown"),oe.popperClass],"popper-options":r,"fallback-placements":["bottom-start","bottom","top-start","top","right","left"],"stop-popper-mouse-event":!1,"gpu-acceleration":!1,placement:"bottom-start",transition:`${y(o).namespace.value}-zoom-in-top`,effect:"light",pure:"",persistent:"",onHide:_e},{default:ve(()=>[pt((I(),ne("div",{class:B(y(z)),style:nt(y(D)),onClick:J[5]||(J[5]=()=>ie(y(T)?void 0:!0)),onKeydown:Ee,onMouseenter:J[6]||(J[6]=ce=>_.value=!0),onMouseleave:J[7]||(J[7]=ce=>_.value=!1)},[ue(y(Jn),{ref_key:"input",ref:m,modelValue:C.value,"onUpdate:modelValue":J[1]||(J[1]=ce=>C.value=ce),placeholder:y(j),readonly:y(T),disabled:y(L),"validate-event":!1,size:y(V),class:B(y(W)),tabindex:y(F)&&oe.filterable&&!y(L)?-1:void 0,onCompositionstart:Me,onCompositionupdate:Me,onCompositionend:Me,onFocus:Ne,onBlur:he,onInput:ee},{suffix:ve(()=>[y(N)?(I(),ke(y(tt),{key:"clear",class:B([y(c).e("icon"),"icon-circle-close"]),onClick:ot(X,["stop"])},{default:ve(()=>[ue(y(lo))]),_:1},8,["class","onClick"])):(I(),ke(y(tt),{key:"arrow-down",class:B(y(Z)),onClick:J[0]||(J[0]=ot(ce=>ie(),["stop"]))},{default:ve(()=>[ue(y(ao))]),_:1},8,["class"]))]),_:1},8,["modelValue","placeholder","readonly","disabled","size","class","tabindex"]),y(F)?(I(),ne("div",{key:0,ref_key:"tagWrapper",ref:g,class:B(y(o).e("tags"))},[(I(!0),ne(Qe,null,wt(M.value,ce=>(I(),ke(y(hu),{key:ce.key,type:oe.tagType,size:y(k),hit:ce.hitState,closable:ce.closable,"disable-transitions":"",onClose:ye=>K(ce)},{default:ve(()=>[ce.isCollapseTag===!1?(I(),ne("span",fY,$e(ce.text),1)):(I(),ke(y(mi),{key:1,disabled:b.value||!oe.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],placement:"bottom",effect:"light"},{default:ve(()=>[ae("span",null,$e(ce.text),1)]),content:ve(()=>[ae("div",{class:B(y(o).e("collapse-tags"))},[(I(!0),ne(Qe,null,wt(E.value.slice(1),(ye,Oe)=>(I(),ne("div",{key:Oe,class:B(y(o).e("collapse-tag"))},[(I(),ke(y(hu),{key:ye.key,class:"in-tooltip",type:oe.tagType,size:y(k),hit:ye.hitState,closable:ye.closable,"disable-transitions":"",onClose:ze=>K(ye)},{default:ve(()=>[ae("span",null,$e(ye.text),1)]),_:2},1032,["type","size","hit","closable","onClose"]))],2))),128))],2)]),_:2},1032,["disabled"]))]),_:2},1032,["type","size","hit","closable","onClose"]))),128)),oe.filterable&&!y(L)?pt((I(),ne("input",{key:0,"onUpdate:modelValue":J[2]||(J[2]=ce=>x.value=ce),type:"text",class:B(y(o).e("search-input")),placeholder:y(G)?"":y(U),onInput:J[3]||(J[3]=ce=>ee(x.value,ce)),onClick:J[4]||(J[4]=ot(ce=>ie(!0),["stop"])),onKeydown:Rt(Re,["delete"]),onCompositionstart:Me,onCompositionupdate:Me,onCompositionend:Me,onFocus:Ne,onBlur:he},null,42,hY)),[[sv,x.value]]):Te("v-if",!0)],2)):Te("v-if",!0)],38)),[[y(ro),()=>ie(!1),y(te)]])]),content:ve(()=>[pt(ue(y(hM),{ref_key:"cascaderPanelRef",ref:p,modelValue:y($),"onUpdate:modelValue":J[8]||(J[8]=ce=>en($)?$.value=ce:null),options:oe.options,props:i.props,border:!1,"render-label":oe.$slots.default,onExpandChange:be,onClose:J[9]||(J[9]=ce=>oe.$nextTick(()=>ie(!1)))},null,8,["modelValue","options","props","render-label"]),[[Dt,!S.value]]),oe.filterable?pt((I(),ke(y(Cs),{key:0,ref_key:"suggestionPanel",ref:v,tag:"ul",class:B(y(o).e("suggestion-panel")),"view-class":y(o).e("suggestion-list"),onKeydown:Ce},{default:ve(()=>[A.value.length?(I(!0),ne(Qe,{key:0},wt(A.value,ce=>(I(),ne("li",{key:ce.uid,class:B([y(o).e("suggestion-item"),y(o).is("checked",ce.checked)]),tabindex:-1,onClick:ye=>le(ce)},[ae("span",null,$e(ce.text),1),ce.checked?(I(),ke(y(tt),{key:0},{default:ve(()=>[ue(y(Du))]),_:1})):Te("v-if",!0)],10,pY))),128)):Le(oe.$slots,"empty",{key:1},()=>[ae("li",{class:B(y(o).e("empty-text"))},$e(y(h)("el.cascader.noMatch")),3)])]),_:3},8,["class","view-class"])),[[Dt,S.value]]):Te("v-if",!0)]),_:3},8,["visible","teleported","popper-class","transition"]))}});var rf=je(vY,[["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader/src/cascader.vue"]]);rf.install=t=>{t.component(rf.name,rf)};const yY=rf,bY=yY,_Y=Xe({checked:{type:Boolean,default:!1}}),SY={"update:checked":t=>xn(t),[tn]:t=>xn(t)},wY=de({name:"ElCheckTag"}),CY=de({...wY,props:_Y,emits:SY,setup(t,{emit:e}){const n=t,i=Ue("check-tag"),r=R(()=>[i.b(),i.is("checked",n.checked)]),a=()=>{const d=!n.checked;e(tn,d),e("update:checked",d)};return(d,s)=>(I(),ne("span",{class:B(y(r)),onClick:a},[Le(d.$slots,"default")],2))}});var xY=je(CY,[["__file","/home/runner/work/element-plus/element-plus/packages/components/check-tag/src/check-tag.vue"]]);const TY=yt(xY),pM=Symbol("rowContextKey"),EY=["start","center","end","space-around","space-between","space-evenly"],MY=["top","middle","bottom"],AY=Xe({tag:{type:String,default:"div"},gutter:{type:Number,default:0},justify:{type:String,values:EY,default:"start"},align:{type:String,values:MY,default:"top"}}),kY=de({name:"ElRow"}),RY=de({...kY,props:AY,setup(t){const e=t,n=Ue("row"),i=R(()=>e.gutter);xt(pM,{gutter:i});const r=R(()=>{const d={};return e.gutter&&(d.marginRight=d.marginLeft=`-${e.gutter/2}px`),d}),a=R(()=>[n.b(),n.is(`justify-${e.justify}`,e.justify!=="start"),n.is(`align-${e.align}`,e.align!=="top")]);return(d,s)=>(I(),ke(Ct(d.tag),{class:B(y(a)),style:nt(y(r))},{default:ve(()=>[Le(d.$slots,"default")]),_:3},8,["class","style"]))}});var PY=je(RY,[["__file","/home/runner/work/element-plus/element-plus/packages/components/row/src/row.vue"]]);const OY=yt(PY),LY=Xe({tag:{type:String,default:"div"},span:{type:Number,default:24},offset:{type:Number,default:0},pull:{type:Number,default:0},push:{type:Number,default:0},xs:{type:Ae([Number,Object]),default:()=>an({})},sm:{type:Ae([Number,Object]),default:()=>an({})},md:{type:Ae([Number,Object]),default:()=>an({})},lg:{type:Ae([Number,Object]),default:()=>an({})},xl:{type:Ae([Number,Object]),default:()=>an({})}}),IY=de({name:"ElCol"}),DY=de({...IY,props:LY,setup(t){const e=t,{gutter:n}=Je(pM,{gutter:R(()=>0)}),i=Ue("col"),r=R(()=>{const d={};return n.value&&(d.paddingLeft=d.paddingRight=`${n.value/2}px`),d}),a=R(()=>{const d=[];return["span","offset","pull","push"].forEach(c=>{const h=e[c];at(h)&&(c==="span"?d.push(i.b(`${e[c]}`)):h>0&&d.push(i.b(`${c}-${e[c]}`)))}),["xs","sm","md","lg","xl"].forEach(c=>{at(e[c])?d.push(i.b(`${c}-${e[c]}`)):_t(e[c])&&Object.entries(e[c]).forEach(([h,l])=>{d.push(h!=="span"?i.b(`${c}-${h}-${l}`):i.b(`${c}-${l}`))})}),n.value&&d.push(i.is("guttered")),[i.b(),d]});return(d,s)=>(I(),ke(Ct(d.tag),{class:B(y(a)),style:nt(y(r))},{default:ve(()=>[Le(d.$slots,"default")]),_:3},8,["class","style"]))}});var NY=je(DY,[["__file","/home/runner/work/element-plus/element-plus/packages/components/col/src/col.vue"]]);const FY=yt(NY),Mw=t=>typeof at(t),BY=Xe({accordion:Boolean,modelValue:{type:Ae([Array,String,Number]),default:()=>an([])}}),UY={[bt]:Mw,[tn]:Mw},mM=Symbol("collapseContextKey"),VY=(t,e)=>{const n=q(El(t.modelValue)),i=a=>{n.value=a;const d=t.accordion?n.value[0]:n.value;e(bt,d),e(tn,d)},r=a=>{if(t.accordion)i([n.value[0]===a?"":a]);else{const d=[...n.value],s=d.indexOf(a);s>-1?d.splice(s,1):d.push(a),i(d)}};return Be(()=>t.modelValue,()=>n.value=El(t.modelValue),{deep:!0}),xt(mM,{activeNames:n,handleItemClick:r}),{activeNames:n,setActiveNames:i}},HY=()=>{const t=Ue("collapse");return{rootKls:R(()=>t.b())}},zY=de({name:"ElCollapse"}),$Y=de({...zY,props:BY,emits:UY,setup(t,{expose:e,emit:n}){const i=t,{activeNames:r,setActiveNames:a}=VY(i,n),{rootKls:d}=HY();return e({activeNames:r,setActiveNames:a}),(s,o)=>(I(),ne("div",{class:B(y(d)),role:"tablist","aria-multiselectable":"true"},[Le(s.$slots,"default")],2))}});var WY=je($Y,[["__file","/home/runner/work/element-plus/element-plus/packages/components/collapse/src/collapse.vue"]]);const GY=de({name:"ElCollapseTransition"}),jY=de({...GY,setup(t){const e=Ue("collapse-transition"),n={beforeEnter(i){i.dataset||(i.dataset={}),i.dataset.oldPaddingTop=i.style.paddingTop,i.dataset.oldPaddingBottom=i.style.paddingBottom,i.style.maxHeight=0,i.style.paddingTop=0,i.style.paddingBottom=0},enter(i){i.dataset.oldOverflow=i.style.overflow,i.scrollHeight!==0?(i.style.maxHeight=`${i.scrollHeight}px`,i.style.paddingTop=i.dataset.oldPaddingTop,i.style.paddingBottom=i.dataset.oldPaddingBottom):(i.style.maxHeight=0,i.style.paddingTop=i.dataset.oldPaddingTop,i.style.paddingBottom=i.dataset.oldPaddingBottom),i.style.overflow="hidden"},afterEnter(i){i.style.maxHeight="",i.style.overflow=i.dataset.oldOverflow},beforeLeave(i){i.dataset||(i.dataset={}),i.dataset.oldPaddingTop=i.style.paddingTop,i.dataset.oldPaddingBottom=i.style.paddingBottom,i.dataset.oldOverflow=i.style.overflow,i.style.maxHeight=`${i.scrollHeight}px`,i.style.overflow="hidden"},leave(i){i.scrollHeight!==0&&(i.style.maxHeight=0,i.style.paddingTop=0,i.style.paddingBottom=0)},afterLeave(i){i.style.maxHeight="",i.style.overflow=i.dataset.oldOverflow,i.style.paddingTop=i.dataset.oldPaddingTop,i.style.paddingBottom=i.dataset.oldPaddingBottom}};return(i,r)=>(I(),ke(wn,St({name:y(e).b()},Ok(n)),{default:ve(()=>[Le(i.$slots,"default")]),_:3},16,["name"]))}});var sf=je(jY,[["__file","/home/runner/work/element-plus/element-plus/packages/components/collapse-transition/src/collapse-transition.vue"]]);sf.install=t=>{t.component(sf.name,sf)};const Dh=sf,XY=Dh,KY=Xe({title:{type:String,default:""},name:{type:Ae([String,Number]),default:()=>Eh()},disabled:Boolean}),YY=t=>{const e=Je(mM),n=q(!1),i=q(!1),r=q(Eh()),a=R(()=>e==null?void 0:e.activeNames.value.includes(t.name));return{focusing:n,id:r,isActive:a,handleFocus:()=>{setTimeout(()=>{i.value?i.value=!1:n.value=!0},50)},handleHeaderClick:()=>{t.disabled||(e==null||e.handleItemClick(t.name),n.value=!1,i.value=!0)},handleEnterClick:()=>{e==null||e.handleItemClick(t.name)}}},qY=(t,{focusing:e,isActive:n,id:i})=>{const r=Ue("collapse"),a=R(()=>[r.b("item"),r.is("active",y(n)),r.is("disabled",t.disabled)]),d=R(()=>[r.be("item","header"),r.is("active",y(n)),{focusing:y(e)&&!t.disabled}]),s=R(()=>[r.be("item","arrow"),r.is("active",y(n))]),o=R(()=>r.be("item","wrap")),c=R(()=>r.be("item","content")),h=R(()=>r.b(`content-${y(i)}`)),l=R(()=>r.b(`head-${y(i)}`));return{arrowKls:s,headKls:d,rootKls:a,itemWrapperKls:o,itemContentKls:c,scopedContentId:h,scopedHeadId:l}},ZY=["aria-expanded","aria-controls","aria-describedby"],JY=["id","tabindex"],QY=["id","aria-hidden","aria-labelledby"],e7=de({name:"ElCollapseItem"}),t7=de({...e7,props:KY,setup(t,{expose:e}){const n=t,{focusing:i,id:r,isActive:a,handleFocus:d,handleHeaderClick:s,handleEnterClick:o}=YY(n),{arrowKls:c,headKls:h,rootKls:l,itemWrapperKls:u,itemContentKls:f,scopedContentId:m,scopedHeadId:g}=qY(n,{focusing:i,isActive:a,id:r});return e({isActive:a}),(p,v)=>(I(),ne("div",{class:B(y(l))},[ae("div",{role:"tab","aria-expanded":y(a),"aria-controls":y(m),"aria-describedby":y(m)},[ae("div",{id:y(g),class:B(y(h)),role:"button",tabindex:p.disabled?-1:0,onClick:v[0]||(v[0]=(...b)=>y(s)&&y(s)(...b)),onKeypress:v[1]||(v[1]=Rt(ot((...b)=>y(o)&&y(o)(...b),["stop","prevent"]),["space","enter"])),onFocus:v[2]||(v[2]=(...b)=>y(d)&&y(d)(...b)),onBlur:v[3]||(v[3]=b=>i.value=!1)},[Le(p.$slots,"title",{},()=>[Tt($e(p.title),1)]),ue(y(tt),{class:B(y(c))},{default:ve(()=>[ue(y(ui))]),_:1},8,["class"])],42,JY)],8,ZY),ue(y(Dh),null,{default:ve(()=>[pt(ae("div",{id:y(m),class:B(y(u)),role:"tabpanel","aria-hidden":!y(a),"aria-labelledby":y(g)},[ae("div",{class:B(y(f))},[Le(p.$slots,"default")],2)],10,QY),[[Dt,y(a)]])]),_:3})],2))}});var gM=je(t7,[["__file","/home/runner/work/element-plus/element-plus/packages/components/collapse/src/collapse-item.vue"]]);const n7=yt(WY,{CollapseItem:gM}),i7=mn(gM),r7=Xe({color:{type:Ae(Object),required:!0},vertical:{type:Boolean,default:!1}});let Yp=!1;function pu(t,e){if(!kt)return;const n=function(a){var d;(d=e.drag)==null||d.call(e,a)},i=function(a){var d;document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",i),document.removeEventListener("touchmove",n),document.removeEventListener("touchend",i),document.onselectstart=null,document.ondragstart=null,Yp=!1,(d=e.end)==null||d.call(e,a)},r=function(a){var d;Yp||(a.preventDefault(),document.onselectstart=()=>!1,document.ondragstart=()=>!1,document.addEventListener("mousemove",n),document.addEventListener("mouseup",i),document.addEventListener("touchmove",n),document.addEventListener("touchend",i),Yp=!0,(d=e.start)==null||d.call(e,a))};t.addEventListener("mousedown",r),t.addEventListener("touchstart",r)}const s7=t=>{const e=vt(),n=Jt(),i=Jt();function r(d){d.target!==n.value&&a(d)}function a(d){if(!i.value||!n.value)return;const o=e.vnode.el.getBoundingClientRect(),{clientX:c,clientY:h}=xv(d);if(t.vertical){let l=h-o.top;l=Math.max(n.value.offsetHeight/2,l),l=Math.min(l,o.height-n.value.offsetHeight/2),t.color.set("alpha",Math.round((l-n.value.offsetHeight/2)/(o.height-n.value.offsetHeight)*100))}else{let l=c-o.left;l=Math.max(n.value.offsetWidth/2,l),l=Math.min(l,o.width-n.value.offsetWidth/2),t.color.set("alpha",Math.round((l-n.value.offsetWidth/2)/(o.width-n.value.offsetWidth)*100))}}return{thumb:n,bar:i,handleDrag:a,handleClick:r}},o7=(t,{bar:e,thumb:n,handleDrag:i})=>{const r=vt(),a=Ue("color-alpha-slider"),d=q(0),s=q(0),o=q();function c(){if(!n.value||t.vertical)return 0;const b=r.vnode.el,_=t.color.get("alpha");return b?Math.round(_*(b.offsetWidth-n.value.offsetWidth/2)/100):0}function h(){if(!n.value)return 0;const b=r.vnode.el;if(!t.vertical)return 0;const _=t.color.get("alpha");return b?Math.round(_*(b.offsetHeight-n.value.offsetHeight/2)/100):0}function l(){if(t.color&&t.color.value){const{r:b,g:_,b:S}=t.color.toRgb();return`linear-gradient(to right, rgba(${b}, ${_}, ${S}, 0) 0%, rgba(${b}, ${_}, ${S}, 1) 100%)`}return""}function u(){d.value=c(),s.value=h(),o.value=l()}mt(()=>{if(!e.value||!n.value)return;const b={drag:_=>{i(_)},end:_=>{i(_)}};pu(e.value,b),pu(n.value,b),u()}),Be(()=>t.color.get("alpha"),()=>u()),Be(()=>t.color.value,()=>u());const f=R(()=>[a.b(),a.is("vertical",t.vertical)]),m=R(()=>a.e("bar")),g=R(()=>a.e("thumb")),p=R(()=>({background:o.value})),v=R(()=>({left:bn(d.value),top:bn(s.value)}));return{rootKls:f,barKls:m,barStyle:p,thumbKls:g,thumbStyle:v,update:u}},a7="ElColorAlphaSlider",l7=de({name:a7}),c7=de({...l7,props:r7,setup(t,{expose:e}){const n=t,{bar:i,thumb:r,handleDrag:a,handleClick:d}=s7(n),{rootKls:s,barKls:o,barStyle:c,thumbKls:h,thumbStyle:l,update:u}=o7(n,{bar:i,thumb:r,handleDrag:a});return e({update:u,bar:i,thumb:r}),(f,m)=>(I(),ne("div",{class:B(y(s))},[ae("div",{ref_key:"bar",ref:i,class:B(y(o)),style:nt(y(c)),onClick:m[0]||(m[0]=(...g)=>y(d)&&y(d)(...g))},null,6),ae("div",{ref_key:"thumb",ref:r,class:B(y(h)),style:nt(y(l))},null,6)],2))}});var u7=je(c7,[["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/components/alpha-slider.vue"]]);const d7=de({name:"ElColorHueSlider",props:{color:{type:Object,required:!0},vertical:Boolean},setup(t){const e=Ue("color-hue-slider"),n=vt(),i=q(),r=q(),a=q(0),d=q(0),s=R(()=>t.color.get("hue"));Be(()=>s.value,()=>{u()});function o(f){f.target!==i.value&&c(f)}function c(f){if(!r.value||!i.value)return;const g=n.vnode.el.getBoundingClientRect(),{clientX:p,clientY:v}=xv(f);let b;if(t.vertical){let _=v-g.top;_=Math.min(_,g.height-i.value.offsetHeight/2),_=Math.max(i.value.offsetHeight/2,_),b=Math.round((_-i.value.offsetHeight/2)/(g.height-i.value.offsetHeight)*360)}else{let _=p-g.left;_=Math.min(_,g.width-i.value.offsetWidth/2),_=Math.max(i.value.offsetWidth/2,_),b=Math.round((_-i.value.offsetWidth/2)/(g.width-i.value.offsetWidth)*360)}t.color.set("hue",b)}function h(){if(!i.value)return 0;const f=n.vnode.el;if(t.vertical)return 0;const m=t.color.get("hue");return f?Math.round(m*(f.offsetWidth-i.value.offsetWidth/2)/360):0}function l(){if(!i.value)return 0;const f=n.vnode.el;if(!t.vertical)return 0;const m=t.color.get("hue");return f?Math.round(m*(f.offsetHeight-i.value.offsetHeight/2)/360):0}function u(){a.value=h(),d.value=l()}return mt(()=>{if(!r.value||!i.value)return;const f={drag:m=>{c(m)},end:m=>{c(m)}};pu(r.value,f),pu(i.value,f),u()}),{bar:r,thumb:i,thumbLeft:a,thumbTop:d,hueValue:s,handleClick:o,update:u,ns:e}}});function f7(t,e,n,i,r,a){return I(),ne("div",{class:B([t.ns.b(),t.ns.is("vertical",t.vertical)])},[ae("div",{ref:"bar",class:B(t.ns.e("bar")),onClick:e[0]||(e[0]=(...d)=>t.handleClick&&t.handleClick(...d))},null,2),ae("div",{ref:"thumb",class:B(t.ns.e("thumb")),style:nt({left:t.thumbLeft+"px",top:t.thumbTop+"px"})},null,6)],2)}var h7=je(d7,[["render",f7],["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/components/hue-slider.vue"]]);const p7=Xe({modelValue:String,id:String,showAlpha:Boolean,colorFormat:String,disabled:Boolean,size:Xn,popperClass:{type:String,default:""},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},predefine:{type:Ae(Array)},validateEvent:{type:Boolean,default:!0}}),m7={[bt]:t=>ct(t)||Cn(t),[tn]:t=>ct(t)||Cn(t),activeChange:t=>ct(t)||Cn(t)},vM=Symbol("colorPickerContextKey"),Aw=function(t,e,n){return[t,e*n/((t=(2-e)*n)<1?t:2-t)||0,t/2]},g7=function(t){return typeof t=="string"&&t.includes(".")&&Number.parseFloat(t)===1},v7=function(t){return typeof t=="string"&&t.includes("%")},al=function(t,e){g7(t)&&(t="100%");const n=v7(t);return t=Math.min(e,Math.max(0,Number.parseFloat(`${t}`))),n&&(t=Number.parseInt(`${t*e}`,10)/100),Math.abs(t-e)<1e-6?1:t%e/Number.parseFloat(e)},kw={10:"A",11:"B",12:"C",13:"D",14:"E",15:"F"},of=t=>{t=Math.min(Math.round(t),255);const e=Math.floor(t/16),n=t%16;return`${kw[e]||e}${kw[n]||n}`},Rw=function({r:t,g:e,b:n}){return Number.isNaN(+t)||Number.isNaN(+e)||Number.isNaN(+n)?"":`#${of(t)}${of(e)}${of(n)}`},qp={A:10,B:11,C:12,D:13,E:14,F:15},xo=function(t){return t.length===2?(qp[t[0].toUpperCase()]||+t[0])*16+(qp[t[1].toUpperCase()]||+t[1]):qp[t[1].toUpperCase()]||+t[1]},y7=function(t,e,n){e=e/100,n=n/100;let i=e;const r=Math.max(n,.01);n*=2,e*=n<=1?n:2-n,i*=r<=1?r:2-r;const a=(n+e)/2,d=n===0?2*i/(r+i):2*e/(n+e);return{h:t,s:d*100,v:a*100}},Pw=(t,e,n)=>{t=al(t,255),e=al(e,255),n=al(n,255);const i=Math.max(t,e,n),r=Math.min(t,e,n);let a;const d=i,s=i-r,o=i===0?0:s/i;if(i===r)a=0;else{switch(i){case t:{a=(e-n)/s+(e<n?6:0);break}case e:{a=(n-t)/s+2;break}case n:{a=(t-e)/s+4;break}}a/=6}return{h:a*360,s:o*100,v:d*100}},pc=function(t,e,n){t=al(t,360)*6,e=al(e,100),n=al(n,100);const i=Math.floor(t),r=t-i,a=n*(1-e),d=n*(1-r*e),s=n*(1-(1-r)*e),o=i%6,c=[n,d,a,a,s,n][o],h=[s,n,n,d,a,a][o],l=[a,a,s,n,n,d][o];return{r:Math.round(c*255),g:Math.round(h*255),b:Math.round(l*255)}};class Fc{constructor(e={}){this._hue=0,this._saturation=100,this._value=100,this._alpha=100,this.enableAlpha=!1,this.format="hex",this.value="";for(const n in e)Mt(e,n)&&(this[n]=e[n]);e.value?this.fromString(e.value):this.doOnChange()}set(e,n){if(arguments.length===1&&typeof e=="object"){for(const i in e)Mt(e,i)&&this.set(i,e[i]);return}this[`_${e}`]=n,this.doOnChange()}get(e){return e==="alpha"?Math.floor(this[`_${e}`]):this[`_${e}`]}toRgb(){return pc(this._hue,this._saturation,this._value)}fromString(e){if(!e){this._hue=0,this._saturation=100,this._value=100,this.doOnChange();return}const n=(i,r,a)=>{this._hue=Math.max(0,Math.min(360,i)),this._saturation=Math.max(0,Math.min(100,r)),this._value=Math.max(0,Math.min(100,a)),this.doOnChange()};if(e.includes("hsl")){const i=e.replace(/hsla|hsl|\(|\)/gm,"").split(/\s|,/g).filter(r=>r!=="").map((r,a)=>a>2?Number.parseFloat(r):Number.parseInt(r,10));if(i.length===4?this._alpha=Number.parseFloat(i[3])*100:i.length===3&&(this._alpha=100),i.length>=3){const{h:r,s:a,v:d}=y7(i[0],i[1],i[2]);n(r,a,d)}}else if(e.includes("hsv")){const i=e.replace(/hsva|hsv|\(|\)/gm,"").split(/\s|,/g).filter(r=>r!=="").map((r,a)=>a>2?Number.parseFloat(r):Number.parseInt(r,10));i.length===4?this._alpha=Number.parseFloat(i[3])*100:i.length===3&&(this._alpha=100),i.length>=3&&n(i[0],i[1],i[2])}else if(e.includes("rgb")){const i=e.replace(/rgba|rgb|\(|\)/gm,"").split(/\s|,/g).filter(r=>r!=="").map((r,a)=>a>2?Number.parseFloat(r):Number.parseInt(r,10));if(i.length===4?this._alpha=Number.parseFloat(i[3])*100:i.length===3&&(this._alpha=100),i.length>=3){const{h:r,s:a,v:d}=Pw(i[0],i[1],i[2]);n(r,a,d)}}else if(e.includes("#")){const i=e.replace("#","").trim();if(!/^[0-9a-fA-F]{3}$|^[0-9a-fA-F]{6}$|^[0-9a-fA-F]{8}$/.test(i))return;let r,a,d;i.length===3?(r=xo(i[0]+i[0]),a=xo(i[1]+i[1]),d=xo(i[2]+i[2])):(i.length===6||i.length===8)&&(r=xo(i.slice(0,2)),a=xo(i.slice(2,4)),d=xo(i.slice(4,6))),i.length===8?this._alpha=xo(i.slice(6))/255*100:(i.length===3||i.length===6)&&(this._alpha=100);const{h:s,s:o,v:c}=Pw(r,a,d);n(s,o,c)}}compare(e){return Math.abs(e._hue-this._hue)<2&&Math.abs(e._saturation-this._saturation)<1&&Math.abs(e._value-this._value)<1&&Math.abs(e._alpha-this._alpha)<1}doOnChange(){const{_hue:e,_saturation:n,_value:i,_alpha:r,format:a}=this;if(this.enableAlpha)switch(a){case"hsl":{const d=Aw(e,n/100,i/100);this.value=`hsla(${e}, ${Math.round(d[1]*100)}%, ${Math.round(d[2]*100)}%, ${this.get("alpha")/100})`;break}case"hsv":{this.value=`hsva(${e}, ${Math.round(n)}%, ${Math.round(i)}%, ${this.get("alpha")/100})`;break}case"hex":{this.value=`${Rw(pc(e,n,i))}${of(r*255/100)}`;break}default:{const{r:d,g:s,b:o}=pc(e,n,i);this.value=`rgba(${d}, ${s}, ${o}, ${this.get("alpha")/100})`}}else switch(a){case"hsl":{const d=Aw(e,n/100,i/100);this.value=`hsl(${e}, ${Math.round(d[1]*100)}%, ${Math.round(d[2]*100)}%)`;break}case"hsv":{this.value=`hsv(${e}, ${Math.round(n)}%, ${Math.round(i)}%)`;break}case"rgb":{const{r:d,g:s,b:o}=pc(e,n,i);this.value=`rgb(${d}, ${s}, ${o})`;break}default:this.value=Rw(pc(e,n,i))}}}const b7=de({props:{colors:{type:Array,required:!0},color:{type:Object,required:!0}},setup(t){const e=Ue("color-predefine"),{currentColor:n}=Je(vM),i=q(a(t.colors,t.color));Be(()=>n.value,d=>{const s=new Fc;s.fromString(d),i.value.forEach(o=>{o.selected=s.compare(o)})}),Di(()=>{i.value=a(t.colors,t.color)});function r(d){t.color.fromString(t.colors[d])}function a(d,s){return d.map(o=>{const c=new Fc;return c.enableAlpha=!0,c.format="rgba",c.fromString(o),c.selected=c.value===s.value,c})}return{rgbaColors:i,handleSelect:r,ns:e}}}),_7=["onClick"];function S7(t,e,n,i,r,a){return I(),ne("div",{class:B(t.ns.b())},[ae("div",{class:B(t.ns.e("colors"))},[(I(!0),ne(Qe,null,wt(t.rgbaColors,(d,s)=>(I(),ne("div",{key:t.colors[s],class:B([t.ns.e("color-selector"),t.ns.is("alpha",d._alpha<100),{selected:d.selected}]),onClick:o=>t.handleSelect(s)},[ae("div",{style:nt({backgroundColor:d.value})},null,4)],10,_7))),128))],2)],2)}var w7=je(b7,[["render",S7],["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/components/predefine.vue"]]);const C7=de({name:"ElSlPanel",props:{color:{type:Object,required:!0}},setup(t){const e=Ue("color-svpanel"),n=vt(),i=q(0),r=q(0),a=q("hsl(0, 100%, 50%)"),d=R(()=>{const c=t.color.get("hue"),h=t.color.get("value");return{hue:c,value:h}});function s(){const c=t.color.get("saturation"),h=t.color.get("value"),l=n.vnode.el,{clientWidth:u,clientHeight:f}=l;r.value=c*u/100,i.value=(100-h)*f/100,a.value=`hsl(${t.color.get("hue")}, 100%, 50%)`}function o(c){const l=n.vnode.el.getBoundingClientRect(),{clientX:u,clientY:f}=xv(c);let m=u-l.left,g=f-l.top;m=Math.max(0,m),m=Math.min(m,l.width),g=Math.max(0,g),g=Math.min(g,l.height),r.value=m,i.value=g,t.color.set({saturation:m/l.width*100,value:100-g/l.height*100})}return Be(()=>d.value,()=>{s()}),mt(()=>{pu(n.vnode.el,{drag:c=>{o(c)},end:c=>{o(c)}}),s()}),{cursorTop:i,cursorLeft:r,background:a,colorValue:d,handleDrag:o,update:s,ns:e}}}),x7=ae("div",null,null,-1),T7=[x7];function E7(t,e,n,i,r,a){return I(),ne("div",{class:B(t.ns.b()),style:nt({backgroundColor:t.background})},[ae("div",{class:B(t.ns.e("white"))},null,2),ae("div",{class:B(t.ns.e("black"))},null,2),ae("div",{class:B(t.ns.e("cursor")),style:nt({top:t.cursorTop+"px",left:t.cursorLeft+"px"})},T7,6)],6)}var M7=je(C7,[["render",E7],["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/components/sv-panel.vue"]]);const A7=["id","aria-label","aria-labelledby","aria-description","tabindex","onKeydown"],k7=de({name:"ElColorPicker"}),R7=de({...k7,props:p7,emits:m7,setup(t,{expose:e,emit:n}){const i=t,{t:r}=Pt(),a=Ue("color"),{formItem:d}=gi(),s=En(),o=Mi(),{inputId:c,isLabeledByFormItem:h}=ho(i,{formItemContext:d}),l=q(),u=q(),f=q(),m=q();let g=!0;const p=Ft(new Fc({enableAlpha:i.showAlpha,format:i.colorFormat||"",value:i.modelValue})),v=q(!1),b=q(!1),_=q(""),S=R(()=>!i.modelValue&&!b.value?"transparent":E(p,i.showAlpha)),w=R(()=>!i.modelValue&&!b.value?"":p.value),C=R(()=>h.value?void 0:i.label||r("el.colorpicker.defaultLabel")),x=R(()=>h.value?d==null?void 0:d.labelId:void 0),M=R(()=>[a.b("picker"),a.is("disabled",o.value),a.bm("picker",s.value)]);function E(T,P){if(!(T instanceof Fc))throw new TypeError("color should be instance of _color Class");const{r:H,g:N,b:G}=T.toRgb();return P?`rgba(${H}, ${N}, ${G}, ${T.get("alpha")/100})`:`rgb(${H}, ${N}, ${G})`}function A(T){v.value=T}const O=pi(A,100);function D(){o.value||A(!0)}function L(){O(!1),U()}function U(){et(()=>{i.modelValue?p.fromString(i.modelValue):(p.value="",et(()=>{b.value=!1}))})}function j(){o.value||O(!v.value)}function V(){p.fromString(_.value)}function k(){const T=p.value;n(bt,T),n("change",T),i.validateEvent&&(d==null||d.validate("change").catch(P=>void 0)),O(!1),et(()=>{const P=new Fc({enableAlpha:i.showAlpha,format:i.colorFormat||"",value:i.modelValue});p.compare(P)||U()})}function F(){O(!1),n(bt,null),n("change",null),i.modelValue!==null&&i.validateEvent&&(d==null||d.validate("change").catch(T=>void 0)),U()}return mt(()=>{i.modelValue&&(_.value=w.value)}),Be(()=>i.modelValue,T=>{T?T&&T!==p.value&&(g=!1,p.fromString(T)):b.value=!1}),Be(()=>w.value,T=>{_.value=T,g&&n("activeChange",T),g=!0}),Be(()=>p.value,()=>{!i.modelValue&&!b.value&&(b.value=!0)}),Be(()=>v.value,()=>{et(()=>{var T,P,H;(T=l.value)==null||T.update(),(P=u.value)==null||P.update(),(H=f.value)==null||H.update()})}),xt(vM,{currentColor:w}),e({color:p,show:D,hide:L}),(T,P)=>(I(),ke(y(mi),{ref_key:"popper",ref:m,visible:v.value,"show-arrow":!1,"fallback-placements":["bottom","top","right","left"],offset:0,"gpu-acceleration":!1,"popper-class":[y(a).be("picker","panel"),y(a).b("dropdown"),T.popperClass],"stop-popper-mouse-event":!1,effect:"light",trigger:"click",transition:`${y(a).namespace.value}-zoom-in-top`,persistent:""},{content:ve(()=>[pt((I(),ne("div",null,[ae("div",{class:B(y(a).be("dropdown","main-wrapper"))},[ue(h7,{ref_key:"hue",ref:l,class:"hue-slider",color:y(p),vertical:""},null,8,["color"]),ue(M7,{ref:"svPanel",color:y(p)},null,8,["color"])],2),T.showAlpha?(I(),ke(u7,{key:0,ref_key:"alpha",ref:f,color:y(p)},null,8,["color"])):Te("v-if",!0),T.predefine?(I(),ke(w7,{key:1,ref:"predefine",color:y(p),colors:T.predefine},null,8,["color","colors"])):Te("v-if",!0),ae("div",{class:B(y(a).be("dropdown","btns"))},[ae("span",{class:B(y(a).be("dropdown","value"))},[ue(y(Jn),{modelValue:_.value,"onUpdate:modelValue":P[0]||(P[0]=H=>_.value=H),"validate-event":!1,size:"small",onKeyup:Rt(V,["enter"]),onBlur:V},null,8,["modelValue","onKeyup"])],2),ue(y(jn),{class:B(y(a).be("dropdown","link-btn")),text:"",size:"small",onClick:F},{default:ve(()=>[Tt($e(y(r)("el.colorpicker.clear")),1)]),_:1},8,["class"]),ue(y(jn),{plain:"",size:"small",class:B(y(a).be("dropdown","btn")),onClick:k},{default:ve(()=>[Tt($e(y(r)("el.colorpicker.confirm")),1)]),_:1},8,["class"])],2)])),[[y(ro),L]])]),default:ve(()=>[ae("div",{id:y(c),class:B(y(M)),role:"button","aria-label":y(C),"aria-labelledby":y(x),"aria-description":y(r)("el.colorpicker.description",{color:T.modelValue||""}),tabindex:T.tabindex,onKeydown:Rt(j,["enter"])},[y(o)?(I(),ne("div",{key:0,class:B(y(a).be("picker","mask"))},null,2)):Te("v-if",!0),ae("div",{class:B(y(a).be("picker","trigger")),onClick:j},[ae("span",{class:B([y(a).be("picker","color"),y(a).is("alpha",T.showAlpha)])},[ae("span",{class:B(y(a).be("picker","color-inner")),style:nt({backgroundColor:y(S)})},[pt(ue(y(tt),{class:B([y(a).be("picker","icon"),y(a).is("icon-arrow-down")])},{default:ve(()=>[ue(y(ao))]),_:1},8,["class"]),[[Dt,T.modelValue||b.value]]),!T.modelValue&&!b.value?(I(),ke(y(tt),{key:0,class:B([y(a).be("picker","empty"),y(a).is("icon-close")])},{default:ve(()=>[ue(y(yr))]),_:1},8,["class"])):Te("v-if",!0)],6)],2)],2)],42,A7)]),_:1},8,["visible","popper-class","transition"]))}});var P7=je(R7,[["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/color-picker.vue"]]);const O7=yt(P7),L7=de({name:"ElContainer"}),I7=de({...L7,props:{direction:{type:String}},setup(t){const e=t,n=Vn(),i=Ue("container"),r=R(()=>e.direction==="vertical"?!0:e.direction==="horizontal"?!1:n&&n.default?n.default().some(d=>{const s=d.type.name;return s==="ElHeader"||s==="ElFooter"}):!1);return(a,d)=>(I(),ne("section",{class:B([y(i).b(),y(i).is("vertical",y(r))])},[Le(a.$slots,"default")],2))}});var D7=je(I7,[["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/container.vue"]]);const N7=de({name:"ElAside"}),F7=de({...N7,props:{width:{type:String,default:null}},setup(t){const e=t,n=Ue("aside"),i=R(()=>e.width?n.cssVarBlock({width:e.width}):{});return(r,a)=>(I(),ne("aside",{class:B(y(n).b()),style:nt(y(i))},[Le(r.$slots,"default")],6))}});var yM=je(F7,[["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/aside.vue"]]);const B7=de({name:"ElFooter"}),U7=de({...B7,props:{height:{type:String,default:null}},setup(t){const e=t,n=Ue("footer"),i=R(()=>e.height?n.cssVarBlock({height:e.height}):{});return(r,a)=>(I(),ne("footer",{class:B(y(n).b()),style:nt(y(i))},[Le(r.$slots,"default")],6))}});var bM=je(U7,[["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/footer.vue"]]);const V7=de({name:"ElHeader"}),H7=de({...V7,props:{height:{type:String,default:null}},setup(t){const e=t,n=Ue("header"),i=R(()=>e.height?n.cssVarBlock({height:e.height}):{});return(r,a)=>(I(),ne("header",{class:B(y(n).b()),style:nt(y(i))},[Le(r.$slots,"default")],6))}});var _M=je(H7,[["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/header.vue"]]);const z7=de({name:"ElMain"}),$7=de({...z7,setup(t){const e=Ue("main");return(n,i)=>(I(),ne("main",{class:B(y(e).b())},[Le(n.$slots,"default")],2))}});var SM=je($7,[["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/main.vue"]]);const W7=yt(D7,{Aside:yM,Footer:bM,Header:_M,Main:SM}),G7=mn(yM),j7=mn(bM),X7=mn(_M),K7=mn(SM);var wM={exports:{}};(function(t,e){(function(n,i){t.exports=i()})(_s,function(){return function(n,i){var r=i.prototype,a=r.format;r.format=function(d){var s=this,o=this.$locale();if(!this.isValid())return a.bind(this)(d);var c=this.$utils(),h=(d||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,function(l){switch(l){case"Q":return Math.ceil((s.$M+1)/3);case"Do":return o.ordinal(s.$D);case"gggg":return s.weekYear();case"GGGG":return s.isoWeekYear();case"wo":return o.ordinal(s.week(),"W");case"w":case"ww":return c.s(s.week(),l==="w"?1:2,"0");case"W":case"WW":return c.s(s.isoWeek(),l==="W"?1:2,"0");case"k":case"kk":return c.s(String(s.$H===0?24:s.$H),l==="k"?1:2,"0");case"X":return Math.floor(s.$d.getTime()/1e3);case"x":return s.$d.getTime();case"z":return"["+s.offsetName()+"]";case"zzz":return"["+s.offsetName("long")+"]";default:return l}});return a.bind(this)(h)}}})})(wM);var Y7=wM.exports;const q7=Vr(Y7);var CM={exports:{}};(function(t,e){(function(n,i){t.exports=i()})(_s,function(){var n="week",i="year";return function(r,a,d){var s=a.prototype;s.week=function(o){if(o===void 0&&(o=null),o!==null)return this.add(7*(o-this.week()),"day");var c=this.$locale().yearStart||1;if(this.month()===11&&this.date()>25){var h=d(this).startOf(i).add(1,i).date(c),l=d(this).endOf(n);if(h.isBefore(l))return 1}var u=d(this).startOf(i).date(c).startOf(n).subtract(1,"millisecond"),f=this.diff(u,n,!0);return f<0?d(this).startOf("week").week():Math.ceil(f)},s.weeks=function(o){return o===void 0&&(o=null),this.week(o)}}})})(CM);var Z7=CM.exports;const J7=Vr(Z7);var xM={exports:{}};(function(t,e){(function(n,i){t.exports=i()})(_s,function(){return function(n,i){i.prototype.weekYear=function(){var r=this.month(),a=this.week(),d=this.year();return a===1&&r===11?d+1:r===0&&a>=52?d-1:d}}})})(xM);var Q7=xM.exports;const eq=Vr(Q7);var TM={exports:{}};(function(t,e){(function(n,i){t.exports=i()})(_s,function(){return function(n,i,r){i.prototype.dayOfYear=function(a){var d=Math.round((r(this).startOf("day")-r(this).startOf("year"))/864e5)+1;return a==null?d:this.add(a-d,"day")}}})})(TM);var tq=TM.exports;const nq=Vr(tq);var EM={exports:{}};(function(t,e){(function(n,i){t.exports=i()})(_s,function(){return function(n,i){i.prototype.isSameOrAfter=function(r,a){return this.isSame(r,a)||this.isAfter(r,a)}}})})(EM);var iq=EM.exports;const rq=Vr(iq);var MM={exports:{}};(function(t,e){(function(n,i){t.exports=i()})(_s,function(){return function(n,i){i.prototype.isSameOrBefore=function(r,a){return this.isSame(r,a)||this.isBefore(r,a)}}})})(MM);var sq=MM.exports;const oq=Vr(sq),v0=Symbol(),aq=Xe({...p0,type:{type:Ae(String),default:"date"}}),lq=["date","dates","year","month","week","range"],y0=Xe({disabledDate:{type:Ae(Function)},date:{type:Ae(Object),required:!0},minDate:{type:Ae(Object)},maxDate:{type:Ae(Object)},parsedValue:{type:Ae([Object,Array])},rangeState:{type:Ae(Object),default:()=>({endDate:null,selecting:!1})}}),AM=Xe({type:{type:Ae(String),required:!0,values:G5}}),kM=Xe({unlinkPanels:Boolean,parsedValue:{type:Ae(Array)}}),RM=t=>({type:String,values:lq,default:t}),cq=Xe({...AM,parsedValue:{type:Ae([Object,Array])},visible:{type:Boolean},format:{type:String,default:""}}),uq=Xe({...y0,cellClassName:{type:Ae(Function)},showWeekNumber:Boolean,selectionMode:RM("date")}),ug=t=>{if(!Ze(t))return!1;const[e,n]=t;return gt.isDayjs(e)&&gt.isDayjs(n)&&e.isSameOrBefore(n)},PM=(t,{lang:e,unit:n,unlinkPanels:i})=>{let r;if(Ze(t)){let[a,d]=t.map(s=>gt(s).locale(e));return i||(d=a.add(1,n)),[a,d]}else t?r=gt(t):r=gt();return r=r.locale(e),[r,r.add(1,n)]},dq=(t,e,{columnIndexOffset:n,startDate:i,nextEndDate:r,now:a,unit:d,relativeDateGetter:s,setCellMetadata:o,setRowMetadata:c})=>{for(let h=0;h<t.row;h++){const l=e[h];for(let u=0;u<t.column;u++){let f=l[u+n];f||(f={row:h,column:u,type:"normal",inRange:!1,start:!1,end:!1});const m=h*t.column+u,g=s(m);f.dayjs=g,f.date=g.toDate(),f.timestamp=g.valueOf(),f.type="normal",f.inRange=!!(i&&g.isSameOrAfter(i,d)&&r&&g.isSameOrBefore(r,d))||!!(i&&g.isSameOrBefore(i,d)&&r&&g.isSameOrAfter(r,d)),i!=null&&i.isSameOrAfter(r)?(f.start=!!r&&g.isSame(r,d),f.end=i&&g.isSame(i,d)):(f.start=!!i&&g.isSame(i,d),f.end=!!r&&g.isSame(r,d)),g.isSame(a,d)&&(f.type="today"),o==null||o(f,{rowIndex:h,columnIndex:u}),l[u+n]=f}c==null||c(l)}},fq=Xe({cell:{type:Ae(Object)}});var hq=de({name:"ElDatePickerCell",props:fq,setup(t){const e=Ue("date-table-cell"),{slots:n}=Je(v0);return()=>{const{cell:i}=t;if(n.default){const r=n.default(i).filter(a=>a.patchFlag!==-2&&a.type.toString()!=="Symbol(Comment)");if(r.length)return r}return ue("div",{class:e.b()},[ue("span",{class:e.e("text")},[i==null?void 0:i.text])])}}});const pq=["aria-label","onMousedown"],mq={key:0,scope:"col"},gq=["aria-label"],vq=["aria-current","aria-selected","tabindex"],yq=de({__name:"basic-date-table",props:uq,emits:["changerange","pick","select"],setup(t,{expose:e,emit:n}){const i=t,r=Ue("date-table"),{t:a,lang:d}=Pt(),s=q(),o=q(),c=q(),h=q(),l=q([[],[],[],[],[],[]]);let u=!1;const f=i.date.$locale().weekStart||7,m=i.date.locale("en").localeData().weekdaysShort().map(N=>N.toLowerCase()),g=R(()=>f>3?7-f:-f),p=R(()=>{const N=i.date.startOf("month");return N.subtract(N.day()||7,"day")}),v=R(()=>m.concat(m).slice(f,f+7)),b=R(()=>Hx(M.value).some(N=>N.isCurrent)),_=R(()=>{const N=i.date.startOf("month"),G=N.day()||7,$=N.daysInMonth(),z=N.subtract(1,"month").daysInMonth();return{startOfMonthDay:G,dateCountOfMonth:$,dateCountOfLastMonth:z}}),S=R(()=>i.selectionMode==="dates"?us(i.parsedValue):[]),w=(N,{count:G,rowIndex:$,columnIndex:z})=>{const{startOfMonthDay:Z,dateCountOfMonth:W,dateCountOfLastMonth:te}=y(_),ie=y(g);if($>=0&&$<=1){const re=Z+ie<0?7+Z+ie:Z+ie;if(z+$*7>=re)return N.text=G,!0;N.text=te-(re-z%7)+1+$*7,N.type="prev-month"}else return G<=W?N.text=G:(N.text=G-W,N.type="next-month"),!0;return!1},C=(N,{columnIndex:G,rowIndex:$},z)=>{const{disabledDate:Z,cellClassName:W}=i,te=y(S),ie=w(N,{count:z,rowIndex:$,columnIndex:G}),re=N.dayjs.toDate();return N.selected=te.find(_e=>_e.valueOf()===N.dayjs.valueOf()),N.isSelected=!!N.selected,N.isCurrent=O(N),N.disabled=Z==null?void 0:Z(re),N.customClass=W==null?void 0:W(re),ie},x=N=>{if(i.selectionMode==="week"){const[G,$]=i.showWeekNumber?[1,7]:[0,6],z=H(N[G+1]);N[G].inRange=z,N[G].start=z,N[$].inRange=z,N[$].end=z}},M=R(()=>{const{minDate:N,maxDate:G,rangeState:$,showWeekNumber:z}=i,Z=g.value,W=l.value,te="day";let ie=1;if(z)for(let re=0;re<6;re++)W[re][0]||(W[re][0]={type:"week",text:p.value.add(re*7+1,te).week()});return dq({row:6,column:7},W,{startDate:N,columnIndexOffset:z?1:0,nextEndDate:$.endDate||G||$.selecting&&N||null,now:gt().locale(y(d)).startOf(te),unit:te,relativeDateGetter:re=>p.value.add(re-Z,te),setCellMetadata:(...re)=>{C(...re,ie)&&(ie+=1)},setRowMetadata:x}),W});Be(()=>i.date,async()=>{var N,G;(N=s.value)!=null&&N.contains(document.activeElement)&&(await et(),(G=o.value)==null||G.focus())});const E=async()=>{var N;(N=o.value)==null||N.focus()},A=(N="")=>["normal","today"].includes(N),O=N=>i.selectionMode==="date"&&A(N.type)&&D(N,i.parsedValue),D=(N,G)=>G?gt(G).locale(d.value).isSame(i.date.date(Number(N.text)),"day"):!1,L=N=>{const G=[];return A(N.type)&&!N.disabled?(G.push("available"),N.type==="today"&&G.push("today")):G.push(N.type),O(N)&&G.push("current"),N.inRange&&(A(N.type)||i.selectionMode==="week")&&(G.push("in-range"),N.start&&G.push("start-date"),N.end&&G.push("end-date")),N.disabled&&G.push("disabled"),N.selected&&G.push("selected"),N.customClass&&G.push(N.customClass),G.join(" ")},U=(N,G)=>{const $=N*7+(G-(i.showWeekNumber?1:0))-g.value;return p.value.add($,"day")},j=N=>{var G;if(!i.rangeState.selecting)return;let $=N.target;if($.tagName==="SPAN"&&($=(G=$.parentNode)==null?void 0:G.parentNode),$.tagName==="DIV"&&($=$.parentNode),$.tagName!=="TD")return;const z=$.parentNode.rowIndex-1,Z=$.cellIndex;M.value[z][Z].disabled||(z!==c.value||Z!==h.value)&&(c.value=z,h.value=Z,n("changerange",{selecting:!0,endDate:U(z,Z)}))},V=N=>!b.value&&(N==null?void 0:N.text)===1&&N.type==="normal"||N.isCurrent,k=N=>{u||b.value||i.selectionMode!=="date"||P(N,!0)},F=N=>{N.target.closest("td")&&(u=!0)},T=N=>{N.target.closest("td")&&(u=!1)},P=(N,G=!1)=>{const $=N.target.closest("td");if(!$)return;const z=$.parentNode.rowIndex-1,Z=$.cellIndex,W=M.value[z][Z];if(W.disabled||W.type==="week")return;const te=U(z,Z);if(i.selectionMode==="range")!i.rangeState.selecting||!i.minDate?(n("pick",{minDate:te,maxDate:null}),n("select",!0)):(te>=i.minDate?n("pick",{minDate:i.minDate,maxDate:te}):n("pick",{minDate:te,maxDate:i.minDate}),n("select",!1));else if(i.selectionMode==="date")n("pick",te,G);else if(i.selectionMode==="week"){const ie=te.week(),re=`${te.year()}w${ie}`;n("pick",{year:te.year(),week:ie,value:re,date:te.startOf("week")})}else if(i.selectionMode==="dates"){const ie=W.selected?us(i.parsedValue).filter(re=>(re==null?void 0:re.valueOf())!==te.valueOf()):us(i.parsedValue).concat([te]);n("pick",ie)}},H=N=>{if(i.selectionMode!=="week")return!1;let G=i.date.startOf("day");if(N.type==="prev-month"&&(G=G.subtract(1,"month")),N.type==="next-month"&&(G=G.add(1,"month")),G=G.date(Number.parseInt(N.text,10)),i.parsedValue&&!Array.isArray(i.parsedValue)){const $=(i.parsedValue.day()-f+7)%7-1;return i.parsedValue.subtract($,"day").isSame(G,"day")}return!1};return e({focus:E}),(N,G)=>(I(),ne("table",{role:"grid","aria-label":y(a)("el.datepicker.dateTablePrompt"),cellspacing:"0",cellpadding:"0",class:B([y(r).b(),{"is-week-mode":N.selectionMode==="week"}]),onClick:P,onMousemove:j,onMousedown:ot(F,["prevent"]),onMouseup:T},[ae("tbody",{ref_key:"tbodyRef",ref:s},[ae("tr",null,[N.showWeekNumber?(I(),ne("th",mq,$e(y(a)("el.datepicker.week")),1)):Te("v-if",!0),(I(!0),ne(Qe,null,wt(y(v),($,z)=>(I(),ne("th",{key:z,scope:"col","aria-label":y(a)("el.datepicker.weeksFull."+$)},$e(y(a)("el.datepicker.weeks."+$)),9,gq))),128))]),(I(!0),ne(Qe,null,wt(y(M),($,z)=>(I(),ne("tr",{key:z,class:B([y(r).e("row"),{current:H($[1])}])},[(I(!0),ne(Qe,null,wt($,(Z,W)=>(I(),ne("td",{key:`${z}.${W}`,ref_for:!0,ref:te=>V(Z)&&(o.value=te),class:B(L(Z)),"aria-current":Z.isCurrent?"date":void 0,"aria-selected":Z.isCurrent,tabindex:V(Z)?0:-1,onFocus:k},[ue(y(hq),{cell:Z},null,8,["cell"])],42,vq))),128))],2))),128))],512)],42,pq))}});var dg=je(yq,[["__file","/home/runner/work/element-plus/element-plus/packages/components/date-picker/src/date-picker-com/basic-date-table.vue"]]);const bq=Xe({...y0,selectionMode:RM("month")}),_q=["aria-label"],Sq=["aria-selected","aria-label","tabindex","onKeydown"],wq={class:"cell"},Cq=de({__name:"basic-month-table",props:bq,emits:["changerange","pick","select"],setup(t,{expose:e,emit:n}){const i=t,r=(S,w,C)=>{const x=gt().locale(C).startOf("month").month(w).year(S),M=x.daysInMonth();return qs(M).map(E=>x.add(E,"day").toDate())},a=Ue("month-table"),{t:d,lang:s}=Pt(),o=q(),c=q(),h=q(i.date.locale("en").localeData().monthsShort().map(S=>S.toLowerCase())),l=q([[],[],[]]),u=q(),f=q(),m=R(()=>{var S,w;const C=l.value,x=gt().locale(s.value).startOf("month");for(let M=0;M<3;M++){const E=C[M];for(let A=0;A<4;A++){const O=E[A]||(E[A]={row:M,column:A,type:"normal",inRange:!1,start:!1,end:!1,text:-1,disabled:!1});O.type="normal";const D=M*4+A,L=i.date.startOf("year").month(D),U=i.rangeState.endDate||i.maxDate||i.rangeState.selecting&&i.minDate||null;O.inRange=!!(i.minDate&&L.isSameOrAfter(i.minDate,"month")&&U&&L.isSameOrBefore(U,"month"))||!!(i.minDate&&L.isSameOrBefore(i.minDate,"month")&&U&&L.isSameOrAfter(U,"month")),(S=i.minDate)!=null&&S.isSameOrAfter(U)?(O.start=!!(U&&L.isSame(U,"month")),O.end=i.minDate&&L.isSame(i.minDate,"month")):(O.start=!!(i.minDate&&L.isSame(i.minDate,"month")),O.end=!!(U&&L.isSame(U,"month"))),x.isSame(L)&&(O.type="today"),O.text=D,O.disabled=((w=i.disabledDate)==null?void 0:w.call(i,L.toDate()))||!1}}return C}),g=()=>{var S;(S=c.value)==null||S.focus()},p=S=>{const w={},C=i.date.year(),x=new Date,M=S.text;return w.disabled=i.disabledDate?r(C,M,s.value).every(i.disabledDate):!1,w.current=us(i.parsedValue).findIndex(E=>gt.isDayjs(E)&&E.year()===C&&E.month()===M)>=0,w.today=x.getFullYear()===C&&x.getMonth()===M,S.inRange&&(w["in-range"]=!0,S.start&&(w["start-date"]=!0),S.end&&(w["end-date"]=!0)),w},v=S=>{const w=i.date.year(),C=S.text;return us(i.date).findIndex(x=>x.year()===w&&x.month()===C)>=0},b=S=>{var w;if(!i.rangeState.selecting)return;let C=S.target;if(C.tagName==="A"&&(C=(w=C.parentNode)==null?void 0:w.parentNode),C.tagName==="DIV"&&(C=C.parentNode),C.tagName!=="TD")return;const x=C.parentNode.rowIndex,M=C.cellIndex;m.value[x][M].disabled||(x!==u.value||M!==f.value)&&(u.value=x,f.value=M,n("changerange",{selecting:!0,endDate:i.date.startOf("year").month(x*4+M)}))},_=S=>{var w;const C=(w=S.target)==null?void 0:w.closest("td");if((C==null?void 0:C.tagName)!=="TD"||vr(C,"disabled"))return;const x=C.cellIndex,E=C.parentNode.rowIndex*4+x,A=i.date.startOf("year").month(E);i.selectionMode==="range"?i.rangeState.selecting?(i.minDate&&A>=i.minDate?n("pick",{minDate:i.minDate,maxDate:A}):n("pick",{minDate:A,maxDate:i.minDate}),n("select",!1)):(n("pick",{minDate:A,maxDate:null}),n("select",!0)):n("pick",E)};return Be(()=>i.date,async()=>{var S,w;(S=o.value)!=null&&S.contains(document.activeElement)&&(await et(),(w=c.value)==null||w.focus())}),e({focus:g}),(S,w)=>(I(),ne("table",{role:"grid","aria-label":y(d)("el.datepicker.monthTablePrompt"),class:B(y(a).b()),onClick:_,onMousemove:b},[ae("tbody",{ref_key:"tbodyRef",ref:o},[(I(!0),ne(Qe,null,wt(y(m),(C,x)=>(I(),ne("tr",{key:x},[(I(!0),ne(Qe,null,wt(C,(M,E)=>(I(),ne("td",{key:E,ref_for:!0,ref:A=>v(M)&&(c.value=A),class:B(p(M)),"aria-selected":`${v(M)}`,"aria-label":y(d)(`el.datepicker.month${+M.text+1}`),tabindex:v(M)?0:-1,onKeydown:[Rt(ot(_,["prevent","stop"]),["space"]),Rt(ot(_,["prevent","stop"]),["enter"])]},[ae("div",null,[ae("span",wq,$e(y(d)("el.datepicker.months."+h.value[M.text])),1)])],42,Sq))),128))]))),128))],512)],42,_q))}});var fg=je(Cq,[["__file","/home/runner/work/element-plus/element-plus/packages/components/date-picker/src/date-picker-com/basic-month-table.vue"]]);const{date:xq,disabledDate:Tq,parsedValue:Eq}=y0,Mq=Xe({date:xq,disabledDate:Tq,parsedValue:Eq}),Aq=["aria-label"],kq=["aria-selected","tabindex","onKeydown"],Rq={class:"cell"},Pq={key:1},Oq=de({__name:"basic-year-table",props:Mq,emits:["pick"],setup(t,{expose:e,emit:n}){const i=t,r=(g,p)=>{const v=gt(String(g)).locale(p).startOf("year"),_=v.endOf("year").dayOfYear();return qs(_).map(S=>v.add(S,"day").toDate())},a=Ue("year-table"),{t:d,lang:s}=Pt(),o=q(),c=q(),h=R(()=>Math.floor(i.date.year()/10)*10),l=()=>{var g;(g=c.value)==null||g.focus()},u=g=>{const p={},v=gt().locale(s.value);return p.disabled=i.disabledDate?r(g,s.value).every(i.disabledDate):!1,p.current=us(i.parsedValue).findIndex(b=>b.year()===g)>=0,p.today=v.year()===g,p},f=g=>g===h.value&&i.date.year()<h.value&&i.date.year()>h.value+9||us(i.date).findIndex(p=>p.year()===g)>=0,m=g=>{const v=g.target.closest("td");if(v&&v.textContent){if(vr(v,"disabled"))return;const b=v.textContent||v.innerText;n("pick",Number(b))}};return Be(()=>i.date,async()=>{var g,p;(g=o.value)!=null&&g.contains(document.activeElement)&&(await et(),(p=c.value)==null||p.focus())}),e({focus:l}),(g,p)=>(I(),ne("table",{role:"grid","aria-label":y(d)("el.datepicker.yearTablePrompt"),class:B(y(a).b()),onClick:m},[ae("tbody",{ref_key:"tbodyRef",ref:o},[(I(),ne(Qe,null,wt(3,(v,b)=>ae("tr",{key:b},[(I(),ne(Qe,null,wt(4,(_,S)=>(I(),ne(Qe,{key:b+"_"+S},[b*4+S<10?(I(),ne("td",{key:0,ref_for:!0,ref:w=>f(y(h)+b*4+S)&&(c.value=w),class:B(["available",u(y(h)+b*4+S)]),"aria-selected":`${f(y(h)+b*4+S)}`,tabindex:f(y(h)+b*4+S)?0:-1,onKeydown:[Rt(ot(m,["prevent","stop"]),["space"]),Rt(ot(m,["prevent","stop"]),["enter"])]},[ae("span",Rq,$e(y(h)+b*4+S),1)],42,kq)):(I(),ne("td",Pq))],64))),64))])),64))],512)],10,Aq))}});var Lq=je(Oq,[["__file","/home/runner/work/element-plus/element-plus/packages/components/date-picker/src/date-picker-com/basic-year-table.vue"]]);const Iq=["onClick"],Dq=["aria-label"],Nq=["aria-label"],Fq=["aria-label"],Bq=["aria-label"],Uq=de({__name:"panel-date-pick",props:cq,emits:["pick","set-picker-option","panel-change"],setup(t,{emit:e}){const n=t,i=(pe,ee,oe)=>!0,r=Ue("picker-panel"),a=Ue("date-picker"),d=Vl(),s=Vn(),{t:o,lang:c}=Pt(),h=Je("EP_PICKER_BASE"),l=Je(Ih),{shortcuts:u,disabledDate:f,cellClassName:m,defaultTime:g,arrowControl:p}=h.props,v=ln(h.props,"defaultValue"),b=q(),_=q(gt().locale(c.value)),S=q(!1),w=R(()=>gt(g).locale(c.value)),C=R(()=>_.value.month()),x=R(()=>_.value.year()),M=q([]),E=q(null),A=q(null),O=pe=>M.value.length>0?i(pe,M.value,n.format||"HH:mm:ss"):!0,D=pe=>g&&!Pe.value&&!S.value?w.value.year(pe.year()).month(pe.month()).date(pe.date()):Z.value?pe.millisecond(0):pe.startOf("day"),L=(pe,...ee)=>{if(!pe)e("pick",pe,...ee);else if(Ze(pe)){const oe=pe.map(D);e("pick",oe,...ee)}else e("pick",D(pe),...ee);E.value=null,A.value=null,S.value=!1},U=(pe,ee)=>{if(P.value==="date"){pe=pe;let oe=n.parsedValue?n.parsedValue.year(pe.year()).month(pe.month()).date(pe.date()):pe;O(oe)||(oe=M.value[0][0].year(pe.year()).month(pe.month()).date(pe.date())),_.value=oe,L(oe,Z.value||ee)}else P.value==="week"?L(pe.date):P.value==="dates"&&L(pe,!0)},j=pe=>{const ee=pe?"add":"subtract";_.value=_.value[ee](1,"month"),he("month")},V=pe=>{const ee=_.value,oe=pe?"add":"subtract";_.value=k.value==="year"?ee[oe](10,"year"):ee[oe](1,"year"),he("year")},k=q("date"),F=R(()=>{const pe=o("el.datepicker.year");if(k.value==="year"){const ee=Math.floor(x.value/10)*10;return pe?`${ee} ${pe} - ${ee+9} ${pe}`:`${ee} - ${ee+9}`}return`${x.value} ${pe}`}),T=pe=>{const ee=lt(pe.value)?pe.value():pe.value;if(ee){L(gt(ee).locale(c.value));return}pe.onClick&&pe.onClick({attrs:d,slots:s,emit:e})},P=R(()=>{const{type:pe}=n;return["week","month","year","dates"].includes(pe)?pe:"date"}),H=R(()=>P.value==="date"?k.value:P.value),N=R(()=>!!u.length),G=async pe=>{_.value=_.value.startOf("month").month(pe),P.value==="month"?L(_.value,!1):(k.value="date",["month","year","date","week"].includes(P.value)&&(L(_.value,!0),await et(),Ce())),he("month")},$=async pe=>{P.value==="year"?(_.value=_.value.startOf("year").year(pe),L(_.value,!1)):(_.value=_.value.year(pe),k.value="month",["month","year","date","week"].includes(P.value)&&(L(_.value,!0),await et(),Ce())),he("year")},z=async pe=>{k.value=pe,await et(),Ce()},Z=R(()=>n.type==="datetime"||n.type==="datetimerange"),W=R(()=>Z.value||P.value==="dates"),te=()=>{if(P.value==="dates")L(n.parsedValue);else{let pe=n.parsedValue;if(!pe){const ee=gt(g).locale(c.value),oe=le();pe=ee.year(oe.year()).month(oe.month()).date(oe.date())}_.value=pe,L(pe)}},ie=()=>{const ee=gt().locale(c.value).toDate();S.value=!0,(!f||!f(ee))&&O(ee)&&(_.value=gt().locale(c.value),L(_.value))},re=R(()=>IE(n.format)),_e=R(()=>LE(n.format)),Pe=R(()=>{if(A.value)return A.value;if(!(!n.parsedValue&&!v.value))return(n.parsedValue||_.value).format(re.value)}),K=R(()=>{if(E.value)return E.value;if(!(!n.parsedValue&&!v.value))return(n.parsedValue||_.value).format(_e.value)}),Q=q(!1),fe=()=>{Q.value=!0},ge=()=>{Q.value=!1},se=pe=>({hour:pe.hour(),minute:pe.minute(),second:pe.second(),year:pe.year(),month:pe.month(),date:pe.date()}),me=(pe,ee,oe)=>{const{hour:J,minute:ce,second:ye}=se(pe),Oe=n.parsedValue?n.parsedValue.hour(J).minute(ce).second(ye):pe;_.value=Oe,L(_.value,!0),oe||(Q.value=ee)},be=pe=>{const ee=gt(pe,re.value).locale(c.value);if(ee.isValid()&&O(ee)){const{year:oe,month:J,date:ce}=se(_.value);_.value=ee.year(oe).month(J).date(ce),A.value=null,Q.value=!1,L(_.value,!0)}},Me=pe=>{const ee=gt(pe,_e.value).locale(c.value);if(ee.isValid()){if(f&&f(ee.toDate()))return;const{hour:oe,minute:J,second:ce}=se(_.value);_.value=ee.hour(oe).minute(J).second(ce),E.value=null,L(_.value,!0)}},Ee=pe=>gt.isDayjs(pe)&&pe.isValid()&&(f?!f(pe.toDate()):!0),X=pe=>P.value==="dates"?pe.map(ee=>ee.format(n.format)):pe.format(n.format),Y=pe=>gt(pe,n.format).locale(c.value),le=()=>{const pe=gt(v.value).locale(c.value);if(!v.value){const ee=w.value;return gt().hour(ee.hour()).minute(ee.minute()).second(ee.second()).locale(c.value)}return pe},Ce=async()=>{var pe;["week","month","year","date"].includes(P.value)&&((pe=b.value)==null||pe.focus(),P.value==="week"&&Ne(rt.down))},Re=pe=>{const{code:ee}=pe;[rt.up,rt.down,rt.left,rt.right,rt.home,rt.end,rt.pageUp,rt.pageDown].includes(ee)&&(Ne(ee),pe.stopPropagation(),pe.preventDefault()),[rt.enter,rt.space,rt.numpadEnter].includes(ee)&&E.value===null&&A.value===null&&(pe.preventDefault(),L(_.value,!1))},Ne=pe=>{var ee;const{up:oe,down:J,left:ce,right:ye,home:Oe,end:ze,pageUp:xe,pageDown:Ve}=rt,we={year:{[oe]:-4,[J]:4,[ce]:-1,[ye]:1,offset:(Ge,it)=>Ge.setFullYear(Ge.getFullYear()+it)},month:{[oe]:-4,[J]:4,[ce]:-1,[ye]:1,offset:(Ge,it)=>Ge.setMonth(Ge.getMonth()+it)},week:{[oe]:-1,[J]:1,[ce]:-1,[ye]:1,offset:(Ge,it)=>Ge.setDate(Ge.getDate()+it*7)},date:{[oe]:-7,[J]:7,[ce]:-1,[ye]:1,[Oe]:Ge=>-Ge.getDay(),[ze]:Ge=>-Ge.getDay()+6,[xe]:Ge=>-new Date(Ge.getFullYear(),Ge.getMonth(),0).getDate(),[Ve]:Ge=>new Date(Ge.getFullYear(),Ge.getMonth()+1,0).getDate(),offset:(Ge,it)=>Ge.setDate(Ge.getDate()+it)}},Ie=_.value.toDate();for(;Math.abs(_.value.diff(Ie,"year",!0))<1;){const Ge=we[H.value];if(!Ge)return;if(Ge.offset(Ie,lt(Ge[pe])?Ge[pe](Ie):(ee=Ge[pe])!=null?ee:0),f&&f(Ie))break;const it=gt(Ie).locale(c.value);_.value=it,e("pick",it,!0);break}},he=pe=>{e("panel-change",_.value.toDate(),pe,k.value)};return Be(()=>P.value,pe=>{if(["month","year"].includes(pe)){k.value=pe;return}k.value="date"},{immediate:!0}),Be(()=>k.value,()=>{l==null||l.updatePopper()}),Be(()=>v.value,pe=>{pe&&(_.value=le())},{immediate:!0}),Be(()=>n.parsedValue,pe=>{if(pe){if(P.value==="dates"||Array.isArray(pe))return;_.value=pe}else _.value=le()},{immediate:!0}),e("set-picker-option",["isValidValue",Ee]),e("set-picker-option",["formatToString",X]),e("set-picker-option",["parseUserInput",Y]),e("set-picker-option",["handleFocusPicker",Ce]),(pe,ee)=>(I(),ne("div",{class:B([y(r).b(),y(a).b(),{"has-sidebar":pe.$slots.sidebar||y(N),"has-time":y(Z)}])},[ae("div",{class:B(y(r).e("body-wrapper"))},[Le(pe.$slots,"sidebar",{class:B(y(r).e("sidebar"))}),y(N)?(I(),ne("div",{key:0,class:B(y(r).e("sidebar"))},[(I(!0),ne(Qe,null,wt(y(u),(oe,J)=>(I(),ne("button",{key:J,type:"button",class:B(y(r).e("shortcut")),onClick:ce=>T(oe)},$e(oe.text),11,Iq))),128))],2)):Te("v-if",!0),ae("div",{class:B(y(r).e("body"))},[y(Z)?(I(),ne("div",{key:0,class:B(y(a).e("time-header"))},[ae("span",{class:B(y(a).e("editor-wrap"))},[ue(y(Jn),{placeholder:y(o)("el.datepicker.selectDate"),"model-value":y(K),size:"small","validate-event":!1,onInput:ee[0]||(ee[0]=oe=>E.value=oe),onChange:Me},null,8,["placeholder","model-value"])],2),pt((I(),ne("span",{class:B(y(a).e("editor-wrap"))},[ue(y(Jn),{placeholder:y(o)("el.datepicker.selectTime"),"model-value":y(Pe),size:"small","validate-event":!1,onFocus:fe,onInput:ee[1]||(ee[1]=oe=>A.value=oe),onChange:be},null,8,["placeholder","model-value"]),ue(y(Ff),{visible:Q.value,format:y(re),"time-arrow-control":y(p),"parsed-value":_.value,onPick:me},null,8,["visible","format","time-arrow-control","parsed-value"])],2)),[[y(ro),ge]])],2)):Te("v-if",!0),pt(ae("div",{class:B([y(a).e("header"),(k.value==="year"||k.value==="month")&&y(a).e("header--bordered")])},[ae("span",{class:B(y(a).e("prev-btn"))},[ae("button",{type:"button","aria-label":y(o)("el.datepicker.prevYear"),class:B(["d-arrow-left",y(r).e("icon-btn")]),onClick:ee[2]||(ee[2]=oe=>V(!1))},[ue(y(tt),null,{default:ve(()=>[ue(y(Ml))]),_:1})],10,Dq),pt(ae("button",{type:"button","aria-label":y(o)("el.datepicker.prevMonth"),class:B([y(r).e("icon-btn"),"arrow-left"]),onClick:ee[3]||(ee[3]=oe=>j(!1))},[ue(y(tt),null,{default:ve(()=>[ue(y(eo))]),_:1})],10,Nq),[[Dt,k.value==="date"]])],2),ae("span",{role:"button",class:B(y(a).e("header-label")),"aria-live":"polite",tabindex:"0",onKeydown:ee[4]||(ee[4]=Rt(oe=>z("year"),["enter"])),onClick:ee[5]||(ee[5]=oe=>z("year"))},$e(y(F)),35),pt(ae("span",{role:"button","aria-live":"polite",tabindex:"0",class:B([y(a).e("header-label"),{active:k.value==="month"}]),onKeydown:ee[6]||(ee[6]=Rt(oe=>z("month"),["enter"])),onClick:ee[7]||(ee[7]=oe=>z("month"))},$e(y(o)(`el.datepicker.month${y(C)+1}`)),35),[[Dt,k.value==="date"]]),ae("span",{class:B(y(a).e("next-btn"))},[pt(ae("button",{type:"button","aria-label":y(o)("el.datepicker.nextMonth"),class:B([y(r).e("icon-btn"),"arrow-right"]),onClick:ee[8]||(ee[8]=oe=>j(!0))},[ue(y(tt),null,{default:ve(()=>[ue(y(ui))]),_:1})],10,Fq),[[Dt,k.value==="date"]]),ae("button",{type:"button","aria-label":y(o)("el.datepicker.nextYear"),class:B([y(r).e("icon-btn"),"d-arrow-right"]),onClick:ee[9]||(ee[9]=oe=>V(!0))},[ue(y(tt),null,{default:ve(()=>[ue(y(Al))]),_:1})],10,Bq)],2)],2),[[Dt,k.value!=="time"]]),ae("div",{class:B(y(r).e("content")),onKeydown:Re},[k.value==="date"?(I(),ke(dg,{key:0,ref_key:"currentViewRef",ref:b,"selection-mode":y(P),date:_.value,"parsed-value":pe.parsedValue,"disabled-date":y(f),"cell-class-name":y(m),onPick:U},null,8,["selection-mode","date","parsed-value","disabled-date","cell-class-name"])):Te("v-if",!0),k.value==="year"?(I(),ke(Lq,{key:1,ref_key:"currentViewRef",ref:b,date:_.value,"disabled-date":y(f),"parsed-value":pe.parsedValue,onPick:$},null,8,["date","disabled-date","parsed-value"])):Te("v-if",!0),k.value==="month"?(I(),ke(fg,{key:2,ref_key:"currentViewRef",ref:b,date:_.value,"parsed-value":pe.parsedValue,"disabled-date":y(f),onPick:G},null,8,["date","parsed-value","disabled-date"])):Te("v-if",!0)],34)],2)],2),pt(ae("div",{class:B(y(r).e("footer"))},[pt(ue(y(jn),{text:"",size:"small",class:B(y(r).e("link-btn")),onClick:ie},{default:ve(()=>[Tt($e(y(o)("el.datepicker.now")),1)]),_:1},8,["class"]),[[Dt,y(P)!=="dates"]]),ue(y(jn),{plain:"",size:"small",class:B(y(r).e("link-btn")),onClick:te},{default:ve(()=>[Tt($e(y(o)("el.datepicker.confirm")),1)]),_:1},8,["class"])],2),[[Dt,y(W)&&k.value==="date"]])],2))}});var Vq=je(Uq,[["__file","/home/runner/work/element-plus/element-plus/packages/components/date-picker/src/date-picker-com/panel-date-pick.vue"]]);const Hq=Xe({...AM,...kM}),zq=t=>{const{emit:e}=vt(),n=Vl(),i=Vn();return a=>{const d=lt(a.value)?a.value():a.value;if(d){e("pick",[gt(d[0]).locale(t.value),gt(d[1]).locale(t.value)]);return}a.onClick&&a.onClick({attrs:n,slots:i,emit:e})}},OM=(t,{defaultValue:e,leftDate:n,rightDate:i,unit:r,onParsedValueChanged:a})=>{const{emit:d}=vt(),{pickerNs:s}=Je(v0),o=Ue("date-range-picker"),{t:c,lang:h}=Pt(),l=zq(h),u=q(),f=q(),m=q({endDate:null,selecting:!1}),g=_=>{m.value=_},p=(_=!1)=>{const S=y(u),w=y(f);ug([S,w])&&d("pick",[S,w],_)},v=_=>{m.value.selecting=_,_||(m.value.endDate=null)},b=()=>{const[_,S]=PM(y(e),{lang:y(h),unit:r,unlinkPanels:t.unlinkPanels});u.value=void 0,f.value=void 0,n.value=_,i.value=S};return Be(e,_=>{_&&b()},{immediate:!0}),Be(()=>t.parsedValue,_=>{if(Ze(_)&&_.length===2){const[S,w]=_;u.value=S,n.value=S,f.value=w,a(y(u),y(f))}else b()},{immediate:!0}),{minDate:u,maxDate:f,rangeState:m,lang:h,ppNs:s,drpNs:o,handleChangeRange:g,handleRangeConfirm:p,handleShortcutClick:l,onSelect:v,t:c}},$q=["onClick"],Wq=["disabled"],Gq=["disabled"],jq=["disabled"],Xq=["disabled"],Dd="month",Kq=de({__name:"panel-date-range",props:Hq,emits:["pick","set-picker-option","calendar-change","panel-change"],setup(t,{emit:e}){const n=t,i=Je("EP_PICKER_BASE"),{disabledDate:r,cellClassName:a,format:d,defaultTime:s,arrowControl:o,clearable:c}=i.props,h=ln(i.props,"shortcuts"),l=ln(i.props,"defaultValue"),{lang:u}=Pt(),f=q(gt().locale(u.value)),m=q(gt().locale(u.value).add(1,Dd)),{minDate:g,maxDate:p,rangeState:v,ppNs:b,drpNs:_,handleChangeRange:S,handleRangeConfirm:w,handleShortcutClick:C,onSelect:x,t:M}=OM(n,{defaultValue:l,leftDate:f,rightDate:m,unit:Dd,onParsedValueChanged:J}),E=q({min:null,max:null}),A=q({min:null,max:null}),O=R(()=>`${f.value.year()} ${M("el.datepicker.year")} ${M(`el.datepicker.month${f.value.month()+1}`)}`),D=R(()=>`${m.value.year()} ${M("el.datepicker.year")} ${M(`el.datepicker.month${m.value.month()+1}`)}`),L=R(()=>f.value.year()),U=R(()=>f.value.month()),j=R(()=>m.value.year()),V=R(()=>m.value.month()),k=R(()=>!!h.value.length),F=R(()=>E.value.min!==null?E.value.min:g.value?g.value.format(G.value):""),T=R(()=>E.value.max!==null?E.value.max:p.value||g.value?(p.value||g.value).format(G.value):""),P=R(()=>A.value.min!==null?A.value.min:g.value?g.value.format(N.value):""),H=R(()=>A.value.max!==null?A.value.max:p.value||g.value?(p.value||g.value).format(N.value):""),N=R(()=>IE(d)),G=R(()=>LE(d)),$=()=>{f.value=f.value.subtract(1,"year"),n.unlinkPanels||(m.value=f.value.add(1,"month")),Pe("year")},z=()=>{f.value=f.value.subtract(1,"month"),n.unlinkPanels||(m.value=f.value.add(1,"month")),Pe("month")},Z=()=>{n.unlinkPanels?m.value=m.value.add(1,"year"):(f.value=f.value.add(1,"year"),m.value=f.value.add(1,"month")),Pe("year")},W=()=>{n.unlinkPanels?m.value=m.value.add(1,"month"):(f.value=f.value.add(1,"month"),m.value=f.value.add(1,"month")),Pe("month")},te=()=>{f.value=f.value.add(1,"year"),Pe("year")},ie=()=>{f.value=f.value.add(1,"month"),Pe("month")},re=()=>{m.value=m.value.subtract(1,"year"),Pe("year")},_e=()=>{m.value=m.value.subtract(1,"month"),Pe("month")},Pe=ce=>{e("panel-change",[f.value.toDate(),m.value.toDate()],ce)},K=R(()=>{const ce=(U.value+1)%12,ye=U.value+1>=12?1:0;return n.unlinkPanels&&new Date(L.value+ye,ce)<new Date(j.value,V.value)}),Q=R(()=>n.unlinkPanels&&j.value*12+V.value-(L.value*12+U.value+1)>=12),fe=R(()=>!(g.value&&p.value&&!v.value.selecting&&ug([g.value,p.value]))),ge=R(()=>n.type==="datetime"||n.type==="datetimerange"),se=(ce,ye)=>{if(ce)return s?gt(s[ye]||s).locale(u.value).year(ce.year()).month(ce.month()).date(ce.date()):ce},me=(ce,ye=!0)=>{const Oe=ce.minDate,ze=ce.maxDate,xe=se(Oe,0),Ve=se(ze,1);p.value===Ve&&g.value===xe||(e("calendar-change",[Oe.toDate(),ze&&ze.toDate()]),p.value=Ve,g.value=xe,!(!ye||ge.value)&&w())},be=q(!1),Me=q(!1),Ee=()=>{be.value=!1},X=()=>{Me.value=!1},Y=(ce,ye)=>{E.value[ye]=ce;const Oe=gt(ce,G.value).locale(u.value);if(Oe.isValid()){if(r&&r(Oe.toDate()))return;ye==="min"?(f.value=Oe,g.value=(g.value||f.value).year(Oe.year()).month(Oe.month()).date(Oe.date()),n.unlinkPanels||(m.value=Oe.add(1,"month"),p.value=g.value.add(1,"month"))):(m.value=Oe,p.value=(p.value||m.value).year(Oe.year()).month(Oe.month()).date(Oe.date()),n.unlinkPanels||(f.value=Oe.subtract(1,"month"),g.value=p.value.subtract(1,"month")))}},le=(ce,ye)=>{E.value[ye]=null},Ce=(ce,ye)=>{A.value[ye]=ce;const Oe=gt(ce,N.value).locale(u.value);Oe.isValid()&&(ye==="min"?(be.value=!0,g.value=(g.value||f.value).hour(Oe.hour()).minute(Oe.minute()).second(Oe.second()),(!p.value||p.value.isBefore(g.value))&&(p.value=g.value)):(Me.value=!0,p.value=(p.value||m.value).hour(Oe.hour()).minute(Oe.minute()).second(Oe.second()),m.value=p.value,p.value&&p.value.isBefore(g.value)&&(g.value=p.value)))},Re=(ce,ye)=>{A.value[ye]=null,ye==="min"?(f.value=g.value,be.value=!1):(m.value=p.value,Me.value=!1)},Ne=(ce,ye,Oe)=>{A.value.min||(ce&&(f.value=ce,g.value=(g.value||f.value).hour(ce.hour()).minute(ce.minute()).second(ce.second())),Oe||(be.value=ye),(!p.value||p.value.isBefore(g.value))&&(p.value=g.value,m.value=ce))},he=(ce,ye,Oe)=>{A.value.max||(ce&&(m.value=ce,p.value=(p.value||m.value).hour(ce.hour()).minute(ce.minute()).second(ce.second())),Oe||(Me.value=ye),p.value&&p.value.isBefore(g.value)&&(g.value=p.value))},pe=()=>{f.value=PM(y(l),{lang:y(u),unit:"month",unlinkPanels:n.unlinkPanels})[0],m.value=f.value.add(1,"month"),e("pick",null)},ee=ce=>Ze(ce)?ce.map(ye=>ye.format(d)):ce.format(d),oe=ce=>Ze(ce)?ce.map(ye=>gt(ye,d).locale(u.value)):gt(ce,d).locale(u.value);function J(ce,ye){if(n.unlinkPanels&&ye){const Oe=(ce==null?void 0:ce.year())||0,ze=(ce==null?void 0:ce.month())||0,xe=ye.year(),Ve=ye.month();m.value=Oe===xe&&ze===Ve?ye.add(1,Dd):ye}else m.value=f.value.add(1,Dd),ye&&(m.value=m.value.hour(ye.hour()).minute(ye.minute()).second(ye.second()))}return e("set-picker-option",["isValidValue",ug]),e("set-picker-option",["parseUserInput",oe]),e("set-picker-option",["formatToString",ee]),e("set-picker-option",["handleClear",pe]),(ce,ye)=>(I(),ne("div",{class:B([y(b).b(),y(_).b(),{"has-sidebar":ce.$slots.sidebar||y(k),"has-time":y(ge)}])},[ae("div",{class:B(y(b).e("body-wrapper"))},[Le(ce.$slots,"sidebar",{class:B(y(b).e("sidebar"))}),y(k)?(I(),ne("div",{key:0,class:B(y(b).e("sidebar"))},[(I(!0),ne(Qe,null,wt(y(h),(Oe,ze)=>(I(),ne("button",{key:ze,type:"button",class:B(y(b).e("shortcut")),onClick:xe=>y(C)(Oe)},$e(Oe.text),11,$q))),128))],2)):Te("v-if",!0),ae("div",{class:B(y(b).e("body"))},[y(ge)?(I(),ne("div",{key:0,class:B(y(_).e("time-header"))},[ae("span",{class:B(y(_).e("editors-wrap"))},[ae("span",{class:B(y(_).e("time-picker-wrap"))},[ue(y(Jn),{size:"small",disabled:y(v).selecting,placeholder:y(M)("el.datepicker.startDate"),class:B(y(_).e("editor")),"model-value":y(F),"validate-event":!1,onInput:ye[0]||(ye[0]=Oe=>Y(Oe,"min")),onChange:ye[1]||(ye[1]=Oe=>le(Oe,"min"))},null,8,["disabled","placeholder","class","model-value"])],2),pt((I(),ne("span",{class:B(y(_).e("time-picker-wrap"))},[ue(y(Jn),{size:"small",class:B(y(_).e("editor")),disabled:y(v).selecting,placeholder:y(M)("el.datepicker.startTime"),"model-value":y(P),"validate-event":!1,onFocus:ye[2]||(ye[2]=Oe=>be.value=!0),onInput:ye[3]||(ye[3]=Oe=>Ce(Oe,"min")),onChange:ye[4]||(ye[4]=Oe=>Re(Oe,"min"))},null,8,["class","disabled","placeholder","model-value"]),ue(y(Ff),{visible:be.value,format:y(N),"datetime-role":"start","time-arrow-control":y(o),"parsed-value":f.value,onPick:Ne},null,8,["visible","format","time-arrow-control","parsed-value"])],2)),[[y(ro),Ee]])],2),ae("span",null,[ue(y(tt),null,{default:ve(()=>[ue(y(ui))]),_:1})]),ae("span",{class:B([y(_).e("editors-wrap"),"is-right"])},[ae("span",{class:B(y(_).e("time-picker-wrap"))},[ue(y(Jn),{size:"small",class:B(y(_).e("editor")),disabled:y(v).selecting,placeholder:y(M)("el.datepicker.endDate"),"model-value":y(T),readonly:!y(g),"validate-event":!1,onInput:ye[5]||(ye[5]=Oe=>Y(Oe,"max")),onChange:ye[6]||(ye[6]=Oe=>le(Oe,"max"))},null,8,["class","disabled","placeholder","model-value","readonly"])],2),pt((I(),ne("span",{class:B(y(_).e("time-picker-wrap"))},[ue(y(Jn),{size:"small",class:B(y(_).e("editor")),disabled:y(v).selecting,placeholder:y(M)("el.datepicker.endTime"),"model-value":y(H),readonly:!y(g),"validate-event":!1,onFocus:ye[7]||(ye[7]=Oe=>y(g)&&(Me.value=!0)),onInput:ye[8]||(ye[8]=Oe=>Ce(Oe,"max")),onChange:ye[9]||(ye[9]=Oe=>Re(Oe,"max"))},null,8,["class","disabled","placeholder","model-value","readonly"]),ue(y(Ff),{"datetime-role":"end",visible:Me.value,format:y(N),"time-arrow-control":y(o),"parsed-value":m.value,onPick:he},null,8,["visible","format","time-arrow-control","parsed-value"])],2)),[[y(ro),X]])],2)],2)):Te("v-if",!0),ae("div",{class:B([[y(b).e("content"),y(_).e("content")],"is-left"])},[ae("div",{class:B(y(_).e("header"))},[ae("button",{type:"button",class:B([y(b).e("icon-btn"),"d-arrow-left"]),onClick:$},[ue(y(tt),null,{default:ve(()=>[ue(y(Ml))]),_:1})],2),ae("button",{type:"button",class:B([y(b).e("icon-btn"),"arrow-left"]),onClick:z},[ue(y(tt),null,{default:ve(()=>[ue(y(eo))]),_:1})],2),ce.unlinkPanels?(I(),ne("button",{key:0,type:"button",disabled:!y(Q),class:B([[y(b).e("icon-btn"),{"is-disabled":!y(Q)}],"d-arrow-right"]),onClick:te},[ue(y(tt),null,{default:ve(()=>[ue(y(Al))]),_:1})],10,Wq)):Te("v-if",!0),ce.unlinkPanels?(I(),ne("button",{key:1,type:"button",disabled:!y(K),class:B([[y(b).e("icon-btn"),{"is-disabled":!y(K)}],"arrow-right"]),onClick:ie},[ue(y(tt),null,{default:ve(()=>[ue(y(ui))]),_:1})],10,Gq)):Te("v-if",!0),ae("div",null,$e(y(O)),1)],2),ue(dg,{"selection-mode":"range",date:f.value,"min-date":y(g),"max-date":y(p),"range-state":y(v),"disabled-date":y(r),"cell-class-name":y(a),onChangerange:y(S),onPick:me,onSelect:y(x)},null,8,["date","min-date","max-date","range-state","disabled-date","cell-class-name","onChangerange","onSelect"])],2),ae("div",{class:B([[y(b).e("content"),y(_).e("content")],"is-right"])},[ae("div",{class:B(y(_).e("header"))},[ce.unlinkPanels?(I(),ne("button",{key:0,type:"button",disabled:!y(Q),class:B([[y(b).e("icon-btn"),{"is-disabled":!y(Q)}],"d-arrow-left"]),onClick:re},[ue(y(tt),null,{default:ve(()=>[ue(y(Ml))]),_:1})],10,jq)):Te("v-if",!0),ce.unlinkPanels?(I(),ne("button",{key:1,type:"button",disabled:!y(K),class:B([[y(b).e("icon-btn"),{"is-disabled":!y(K)}],"arrow-left"]),onClick:_e},[ue(y(tt),null,{default:ve(()=>[ue(y(eo))]),_:1})],10,Xq)):Te("v-if",!0),ae("button",{type:"button",class:B([y(b).e("icon-btn"),"d-arrow-right"]),onClick:Z},[ue(y(tt),null,{default:ve(()=>[ue(y(Al))]),_:1})],2),ae("button",{type:"button",class:B([y(b).e("icon-btn"),"arrow-right"]),onClick:W},[ue(y(tt),null,{default:ve(()=>[ue(y(ui))]),_:1})],2),ae("div",null,$e(y(D)),1)],2),ue(dg,{"selection-mode":"range",date:m.value,"min-date":y(g),"max-date":y(p),"range-state":y(v),"disabled-date":y(r),"cell-class-name":y(a),onChangerange:y(S),onPick:me,onSelect:y(x)},null,8,["date","min-date","max-date","range-state","disabled-date","cell-class-name","onChangerange","onSelect"])],2)],2)],2),y(ge)?(I(),ne("div",{key:0,class:B(y(b).e("footer"))},[y(c)?(I(),ke(y(jn),{key:0,text:"",size:"small",class:B(y(b).e("link-btn")),onClick:pe},{default:ve(()=>[Tt($e(y(M)("el.datepicker.clear")),1)]),_:1},8,["class"])):Te("v-if",!0),ue(y(jn),{plain:"",size:"small",class:B(y(b).e("link-btn")),disabled:y(fe),onClick:ye[10]||(ye[10]=Oe=>y(w)(!1))},{default:ve(()=>[Tt($e(y(M)("el.datepicker.confirm")),1)]),_:1},8,["class","disabled"])],2)):Te("v-if",!0)],2))}});var Yq=je(Kq,[["__file","/home/runner/work/element-plus/element-plus/packages/components/date-picker/src/date-picker-com/panel-date-range.vue"]]);const qq=Xe({...kM}),Zq=["pick","set-picker-option"],Jq=({unlinkPanels:t,leftDate:e,rightDate:n})=>{const{t:i}=Pt(),r=()=>{e.value=e.value.subtract(1,"year"),t.value||(n.value=n.value.subtract(1,"year"))},a=()=>{t.value||(e.value=e.value.add(1,"year")),n.value=n.value.add(1,"year")},d=()=>{e.value=e.value.add(1,"year")},s=()=>{n.value=n.value.subtract(1,"year")},o=R(()=>`${e.value.year()} ${i("el.datepicker.year")}`),c=R(()=>`${n.value.year()} ${i("el.datepicker.year")}`),h=R(()=>e.value.year()),l=R(()=>n.value.year()===e.value.year()?e.value.year()+1:n.value.year());return{leftPrevYear:r,rightNextYear:a,leftNextYear:d,rightPrevYear:s,leftLabel:o,rightLabel:c,leftYear:h,rightYear:l}},Qq=["onClick"],eZ=["disabled"],tZ=["disabled"],Nd="year",nZ=de({name:"DatePickerMonthRange"}),iZ=de({...nZ,props:qq,emits:Zq,setup(t,{emit:e}){const n=t,{lang:i}=Pt(),r=Je("EP_PICKER_BASE"),{shortcuts:a,disabledDate:d,format:s}=r.props,o=ln(r.props,"defaultValue"),c=q(gt().locale(i.value)),h=q(gt().locale(i.value).add(1,Nd)),{minDate:l,maxDate:u,rangeState:f,ppNs:m,drpNs:g,handleChangeRange:p,handleRangeConfirm:v,handleShortcutClick:b,onSelect:_}=OM(n,{defaultValue:o,leftDate:c,rightDate:h,unit:Nd,onParsedValueChanged:V}),S=R(()=>!!a.length),{leftPrevYear:w,rightNextYear:C,leftNextYear:x,rightPrevYear:M,leftLabel:E,rightLabel:A,leftYear:O,rightYear:D}=Jq({unlinkPanels:ln(n,"unlinkPanels"),leftDate:c,rightDate:h}),L=R(()=>n.unlinkPanels&&D.value>O.value+1),U=(k,F=!0)=>{const T=k.minDate,P=k.maxDate;u.value===P&&l.value===T||(u.value=P,l.value=T,F&&v())},j=k=>k.map(F=>F.format(s));function V(k,F){if(n.unlinkPanels&&F){const T=(k==null?void 0:k.year())||0,P=F.year();h.value=T===P?F.add(1,Nd):F}else h.value=c.value.add(1,Nd)}return e("set-picker-option",["formatToString",j]),(k,F)=>(I(),ne("div",{class:B([y(m).b(),y(g).b(),{"has-sidebar":!!k.$slots.sidebar||y(S)}])},[ae("div",{class:B(y(m).e("body-wrapper"))},[Le(k.$slots,"sidebar",{class:B(y(m).e("sidebar"))}),y(S)?(I(),ne("div",{key:0,class:B(y(m).e("sidebar"))},[(I(!0),ne(Qe,null,wt(y(a),(T,P)=>(I(),ne("button",{key:P,type:"button",class:B(y(m).e("shortcut")),onClick:H=>y(b)(T)},$e(T.text),11,Qq))),128))],2)):Te("v-if",!0),ae("div",{class:B(y(m).e("body"))},[ae("div",{class:B([[y(m).e("content"),y(g).e("content")],"is-left"])},[ae("div",{class:B(y(g).e("header"))},[ae("button",{type:"button",class:B([y(m).e("icon-btn"),"d-arrow-left"]),onClick:F[0]||(F[0]=(...T)=>y(w)&&y(w)(...T))},[ue(y(tt),null,{default:ve(()=>[ue(y(Ml))]),_:1})],2),k.unlinkPanels?(I(),ne("button",{key:0,type:"button",disabled:!y(L),class:B([[y(m).e("icon-btn"),{[y(m).is("disabled")]:!y(L)}],"d-arrow-right"]),onClick:F[1]||(F[1]=(...T)=>y(x)&&y(x)(...T))},[ue(y(tt),null,{default:ve(()=>[ue(y(Al))]),_:1})],10,eZ)):Te("v-if",!0),ae("div",null,$e(y(E)),1)],2),ue(fg,{"selection-mode":"range",date:c.value,"min-date":y(l),"max-date":y(u),"range-state":y(f),"disabled-date":y(d),onChangerange:y(p),onPick:U,onSelect:y(_)},null,8,["date","min-date","max-date","range-state","disabled-date","onChangerange","onSelect"])],2),ae("div",{class:B([[y(m).e("content"),y(g).e("content")],"is-right"])},[ae("div",{class:B(y(g).e("header"))},[k.unlinkPanels?(I(),ne("button",{key:0,type:"button",disabled:!y(L),class:B([[y(m).e("icon-btn"),{"is-disabled":!y(L)}],"d-arrow-left"]),onClick:F[2]||(F[2]=(...T)=>y(M)&&y(M)(...T))},[ue(y(tt),null,{default:ve(()=>[ue(y(Ml))]),_:1})],10,tZ)):Te("v-if",!0),ae("button",{type:"button",class:B([y(m).e("icon-btn"),"d-arrow-right"]),onClick:F[3]||(F[3]=(...T)=>y(C)&&y(C)(...T))},[ue(y(tt),null,{default:ve(()=>[ue(y(Al))]),_:1})],2),ae("div",null,$e(y(A)),1)],2),ue(fg,{"selection-mode":"range",date:h.value,"min-date":y(l),"max-date":y(u),"range-state":y(f),"disabled-date":y(d),onChangerange:y(p),onPick:U,onSelect:y(_)},null,8,["date","min-date","max-date","range-state","disabled-date","onChangerange","onSelect"])],2)],2)],2)],2))}});var rZ=je(iZ,[["__file","/home/runner/work/element-plus/element-plus/packages/components/date-picker/src/date-picker-com/panel-month-range.vue"]]);const sZ=function(t){switch(t){case"daterange":case"datetimerange":return Yq;case"monthrange":return rZ;default:return Vq}};gt.extend(qE);gt.extend(q7);gt.extend(h0);gt.extend(J7);gt.extend(eq);gt.extend(nq);gt.extend(rq);gt.extend(oq);var oZ=de({name:"ElDatePicker",install:null,props:aq,emits:["update:modelValue"],setup(t,{expose:e,emit:n,slots:i}){const r=Ue("picker-panel");xt("ElPopperOptions",Ft(ln(t,"popperOptions"))),xt(v0,{slots:i,pickerNs:r});const a=q();e({focus:(o=!0)=>{var c;(c=a.value)==null||c.focus(o)},handleOpen:()=>{var o;(o=a.value)==null||o.handleOpen()},handleClose:()=>{var o;(o=a.value)==null||o.handleClose()}});const s=o=>{n("update:modelValue",o)};return()=>{var o;const c=(o=t.format)!=null?o:G9[t.type]||Ha,h=sZ(t.type);return ue(FE,St(t,{format:c,type:t.type,ref:a,"onUpdate:modelValue":s}),{default:l=>ue(h,l,null),"range-separator":i["range-separator"]})}}});const af=oZ;af.install=t=>{t.component(af.name,af)};const aZ=af,b0=Symbol("elDescriptions");var mc=de({name:"ElDescriptionsCell",props:{cell:{type:Object},tag:{type:String},type:{type:String}},setup(){return{descriptions:Je(b0,{})}},render(){var t,e,n,i,r,a;const d=q5(this.cell),{border:s,direction:o}=this.descriptions,c=o==="vertical",h=((n=(e=(t=this.cell)==null?void 0:t.children)==null?void 0:e.label)==null?void 0:n.call(e))||d.label,l=(a=(r=(i=this.cell)==null?void 0:i.children)==null?void 0:r.default)==null?void 0:a.call(r),u=d.span,f=d.align?`is-${d.align}`:"",m=d.labelAlign?`is-${d.labelAlign}`:f,g=d.className,p=d.labelClassName,v={width:bn(d.width),minWidth:bn(d.minWidth)},b=Ue("descriptions");switch(this.type){case"label":return st(this.tag,{style:v,class:[b.e("cell"),b.e("label"),b.is("bordered-label",s),b.is("vertical-label",c),m,p],colSpan:c?u:1},h);case"content":return st(this.tag,{style:v,class:[b.e("cell"),b.e("content"),b.is("bordered-content",s),b.is("vertical-content",c),f,g],colSpan:c?u:u*2-1},l);default:return st("td",{style:v,class:[b.e("cell"),f],colSpan:u},[Cn(h)?void 0:st("span",{class:[b.e("label"),p]},h),st("span",{class:[b.e("content"),g]},l)])}}});const lZ=Xe({row:{type:Array,default:()=>[]}}),cZ={key:1},uZ=de({name:"ElDescriptionsRow"}),dZ=de({...uZ,props:lZ,setup(t){const e=Je(b0,{});return(n,i)=>y(e).direction==="vertical"?(I(),ne(Qe,{key:0},[ae("tr",null,[(I(!0),ne(Qe,null,wt(n.row,(r,a)=>(I(),ke(y(mc),{key:`tr1-${a}`,cell:r,tag:"th",type:"label"},null,8,["cell"]))),128))]),ae("tr",null,[(I(!0),ne(Qe,null,wt(n.row,(r,a)=>(I(),ke(y(mc),{key:`tr2-${a}`,cell:r,tag:"td",type:"content"},null,8,["cell"]))),128))])],64)):(I(),ne("tr",cZ,[(I(!0),ne(Qe,null,wt(n.row,(r,a)=>(I(),ne(Qe,{key:`tr3-${a}`},[y(e).border?(I(),ne(Qe,{key:0},[ue(y(mc),{cell:r,tag:"td",type:"label"},null,8,["cell"]),ue(y(mc),{cell:r,tag:"td",type:"content"},null,8,["cell"])],64)):(I(),ke(y(mc),{key:1,cell:r,tag:"td",type:"both"},null,8,["cell"]))],64))),128))]))}});var fZ=je(dZ,[["__file","/home/runner/work/element-plus/element-plus/packages/components/descriptions/src/descriptions-row.vue"]]);const hZ=Xe({border:{type:Boolean,default:!1},column:{type:Number,default:3},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},size:Xn,title:{type:String,default:""},extra:{type:String,default:""}}),pZ=de({name:"ElDescriptions"}),mZ=de({...pZ,props:hZ,setup(t){const e=t,n=Ue("descriptions"),i=En(),r=Vn();xt(b0,e);const a=R(()=>[n.b(),n.m(i.value)]),d=(o,c,h,l=!1)=>(o.props||(o.props={}),c>h&&(o.props.span=h),l&&(o.props.span=c),o),s=()=>{var o;const c=rl((o=r.default)==null?void 0:o.call(r)).filter(m=>{var g;return((g=m==null?void 0:m.type)==null?void 0:g.name)==="ElDescriptionsItem"}),h=[];let l=[],u=e.column,f=0;return c.forEach((m,g)=>{var p;const v=((p=m.props)==null?void 0:p.span)||1;if(g<c.length-1&&(f+=v>u?u:v),g===c.length-1){const b=e.column-f%e.column;l.push(d(m,b,u,!0)),h.push(l);return}v<u?(u-=v,l.push(m)):(l.push(d(m,v,u)),h.push(l),u=e.column,l=[])}),h};return(o,c)=>(I(),ne("div",{class:B(y(a))},[o.title||o.extra||o.$slots.title||o.$slots.extra?(I(),ne("div",{key:0,class:B(y(n).e("header"))},[ae("div",{class:B(y(n).e("title"))},[Le(o.$slots,"title",{},()=>[Tt($e(o.title),1)])],2),ae("div",{class:B(y(n).e("extra"))},[Le(o.$slots,"extra",{},()=>[Tt($e(o.extra),1)])],2)],2)):Te("v-if",!0),ae("div",{class:B(y(n).e("body"))},[ae("table",{class:B([y(n).e("table"),y(n).is("bordered",o.border)])},[ae("tbody",null,[(I(!0),ne(Qe,null,wt(s(),(h,l)=>(I(),ke(fZ,{key:l,row:h},null,8,["row"]))),128))])],2)],2)],2))}});var gZ=je(mZ,[["__file","/home/runner/work/element-plus/element-plus/packages/components/descriptions/src/description.vue"]]),LM=de({name:"ElDescriptionsItem",props:{label:{type:String,default:""},span:{type:Number,default:1},width:{type:[String,Number],default:""},minWidth:{type:[String,Number],default:""},align:{type:String,default:"left"},labelAlign:{type:String,default:""},className:{type:String,default:""},labelClassName:{type:String,default:""}}});const vZ=yt(gZ,{DescriptionsItem:LM}),yZ=mn(LM),bZ=Xe({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:Ae([String,Array,Object])},zIndex:{type:Ae([String,Number])}}),_Z={click:t=>t instanceof MouseEvent},SZ="overlay";var wZ=de({name:"ElOverlay",props:bZ,emits:_Z,setup(t,{slots:e,emit:n}){const i=Ue(SZ),r=o=>{n("click",o)},{onClick:a,onMousedown:d,onMouseup:s}=t0(t.customMaskEvent?void 0:r);return()=>t.mask?ue("div",{class:[i.b(),t.overlayClass],style:{zIndex:t.zIndex},onClick:a,onMousedown:d,onMouseup:s},[Le(e,"default")],Vi.STYLE|Vi.CLASS|Vi.PROPS,["onClick","onMouseup","onMousedown"]):st("div",{class:t.overlayClass,style:{zIndex:t.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[Le(e,"default")])}});const _0=wZ,IM=Symbol("dialogInjectionKey"),DM=Xe({center:{type:Boolean,default:!1},alignCenter:{type:Boolean,default:!1},closeIcon:{type:Qt},customClass:{type:String,default:""},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),CZ={close:()=>!0},xZ=["aria-label"],TZ=["id"],EZ=de({name:"ElDialogContent"}),MZ=de({...EZ,props:DM,emits:CZ,setup(t){const e=t,{t:n}=Pt(),{Close:i}=bT,{dialogRef:r,headerRef:a,bodyId:d,ns:s,style:o}=Je(IM),{focusTrapRef:c}=Je(u0),h=wh(c,r),l=R(()=>e.draggable);return wT(r,a,l),(u,f)=>(I(),ne("div",{ref:y(h),class:B([y(s).b(),y(s).is("fullscreen",u.fullscreen),y(s).is("draggable",y(l)),y(s).is("align-center",u.alignCenter),{[y(s).m("center")]:u.center},u.customClass]),style:nt(y(o)),tabindex:"-1"},[ae("header",{ref_key:"headerRef",ref:a,class:B(y(s).e("header"))},[Le(u.$slots,"header",{},()=>[ae("span",{role:"heading",class:B(y(s).e("title"))},$e(u.title),3)]),u.showClose?(I(),ne("button",{key:0,"aria-label":y(n)("el.dialog.close"),class:B(y(s).e("headerbtn")),type:"button",onClick:f[0]||(f[0]=m=>u.$emit("close"))},[ue(y(tt),{class:B(y(s).e("close"))},{default:ve(()=>[(I(),ke(Ct(u.closeIcon||y(i))))]),_:1},8,["class"])],10,xZ)):Te("v-if",!0)],2),ae("div",{id:y(d),class:B(y(s).e("body"))},[Le(u.$slots,"default")],10,TZ),u.$slots.footer?(I(),ne("footer",{key:0,class:B(y(s).e("footer"))},[Le(u.$slots,"footer")],2)):Te("v-if",!0)],6))}});var AZ=je(MZ,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const NM=Xe({...DM,appendToBody:{type:Boolean,default:!1},beforeClose:{type:Ae(Function)},destroyOnClose:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,default:!1},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}}),FM={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[bt]:t=>xn(t),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},BM=(t,e)=>{const i=vt().emit,{nextZIndex:r}=Kl();let a="";const d=Ji(),s=Ji(),o=q(!1),c=q(!1),h=q(!1),l=q(t.zIndex||r());let u,f;const m=Rh("namespace",Of),g=R(()=>{const U={},j=`--${m.value}-dialog`;return t.fullscreen||(t.top&&(U[`${j}-margin-top`]=t.top),t.width&&(U[`${j}-width`]=bn(t.width))),U}),p=R(()=>t.alignCenter?{display:"flex"}:{});function v(){i("opened")}function b(){i("closed"),i(bt,!1),t.destroyOnClose&&(h.value=!1)}function _(){i("close")}function S(){f==null||f(),u==null||u(),t.openDelay&&t.openDelay>0?{stop:u}=na(()=>M(),t.openDelay):M()}function w(){u==null||u(),f==null||f(),t.closeDelay&&t.closeDelay>0?{stop:f}=na(()=>E(),t.closeDelay):E()}function C(){function U(j){j||(c.value=!0,o.value=!1)}t.beforeClose?t.beforeClose(U):w()}function x(){t.closeOnClickModal&&C()}function M(){kt&&(o.value=!0)}function E(){o.value=!1}function A(){i("openAutoFocus")}function O(){i("closeAutoFocus")}function D(U){var j;((j=U.detail)==null?void 0:j.focusReason)==="pointer"&&U.preventDefault()}t.lockScroll&&TT(o);function L(){t.closeOnPressEscape&&C()}return Be(()=>t.modelValue,U=>{U?(c.value=!1,S(),h.value=!0,l.value=t.zIndex?l.value++:r(),et(()=>{i("open"),e.value&&(e.value.scrollTop=0)})):o.value&&w()}),Be(()=>t.fullscreen,U=>{e.value&&(U?(a=e.value.style.transform,e.value.style.transform=""):e.value.style.transform=a)}),mt(()=>{t.modelValue&&(o.value=!0,h.value=!0,S())}),{afterEnter:v,afterLeave:b,beforeLeave:_,handleClose:C,onModalClick:x,close:w,doClose:E,onOpenAutoFocus:A,onCloseAutoFocus:O,onCloseRequested:L,onFocusoutPrevented:D,titleId:d,bodyId:s,closed:c,style:g,overlayDialogStyle:p,rendered:h,visible:o,zIndex:l}},kZ=["aria-label","aria-labelledby","aria-describedby"],RZ=de({name:"ElDialog",inheritAttrs:!1}),PZ=de({...RZ,props:NM,emits:FM,setup(t,{expose:e}){const n=t,i=Vn();Ir({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},R(()=>!!i.title)),Ir({scope:"el-dialog",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/dialog.html#attributes",type:"Attribute"},R(()=>!!n.customClass));const r=Ue("dialog"),a=q(),d=q(),s=q(),{visible:o,titleId:c,bodyId:h,style:l,overlayDialogStyle:u,rendered:f,zIndex:m,afterEnter:g,afterLeave:p,beforeLeave:v,handleClose:b,onModalClick:_,onOpenAutoFocus:S,onCloseAutoFocus:w,onCloseRequested:C,onFocusoutPrevented:x}=BM(n,a);xt(IM,{dialogRef:a,headerRef:d,bodyId:h,ns:r,rendered:f,style:l});const M=t0(_),E=R(()=>n.draggable&&!n.fullscreen);return e({visible:o,dialogContentRef:s}),(A,O)=>(I(),ke(Tu,{to:"body",disabled:!A.appendToBody},[ue(wn,{name:"dialog-fade",onAfterEnter:y(g),onAfterLeave:y(p),onBeforeLeave:y(v),persisted:""},{default:ve(()=>[pt(ue(y(_0),{"custom-mask-event":"",mask:A.modal,"overlay-class":A.modalClass,"z-index":y(m)},{default:ve(()=>[ae("div",{role:"dialog","aria-modal":"true","aria-label":A.title||void 0,"aria-labelledby":A.title?void 0:y(c),"aria-describedby":y(h),class:B(`${y(r).namespace.value}-overlay-dialog`),style:nt(y(u)),onClick:O[0]||(O[0]=(...D)=>y(M).onClick&&y(M).onClick(...D)),onMousedown:O[1]||(O[1]=(...D)=>y(M).onMousedown&&y(M).onMousedown(...D)),onMouseup:O[2]||(O[2]=(...D)=>y(M).onMouseup&&y(M).onMouseup(...D))},[ue(y(Lh),{loop:"",trapped:y(o),"focus-start-el":"container",onFocusAfterTrapped:y(S),onFocusAfterReleased:y(w),onFocusoutPrevented:y(x),onReleaseRequested:y(C)},{default:ve(()=>[y(f)?(I(),ke(AZ,St({key:0,ref_key:"dialogContentRef",ref:s},A.$attrs,{"custom-class":A.customClass,center:A.center,"align-center":A.alignCenter,"close-icon":A.closeIcon,draggable:y(E),fullscreen:A.fullscreen,"show-close":A.showClose,title:A.title,onClose:y(b)}),ds({header:ve(()=>[A.$slots.title?Le(A.$slots,"title",{key:1}):Le(A.$slots,"header",{key:0,close:y(b),titleId:y(c),titleClass:y(r).e("title")})]),default:ve(()=>[Le(A.$slots,"default")]),_:2},[A.$slots.footer?{name:"footer",fn:ve(()=>[Le(A.$slots,"footer")])}:void 0]),1040,["custom-class","center","align-center","close-icon","draggable","fullscreen","show-close","title","onClose"])):Te("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,kZ)]),_:3},8,["mask","overlay-class","z-index"]),[[Dt,y(o)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var OZ=je(PZ,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const LZ=yt(OZ),IZ=Xe({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},contentPosition:{type:String,values:["left","center","right"],default:"center"},borderStyle:{type:Ae(String),default:"solid"}}),DZ=de({name:"ElDivider"}),NZ=de({...DZ,props:IZ,setup(t){const e=t,n=Ue("divider"),i=R(()=>n.cssVar({"border-style":e.borderStyle}));return(r,a)=>(I(),ne("div",{class:B([y(n).b(),y(n).m(r.direction)]),style:nt(y(i)),role:"separator"},[r.$slots.default&&r.direction!=="vertical"?(I(),ne("div",{key:0,class:B([y(n).e("text"),y(n).is(r.contentPosition)])},[Le(r.$slots,"default")],2)):Te("v-if",!0)],6))}});var FZ=je(NZ,[["__file","/home/runner/work/element-plus/element-plus/packages/components/divider/src/divider.vue"]]);const UM=yt(FZ),BZ=Xe({...NM,direction:{type:String,default:"rtl",values:["ltr","rtl","ttb","btt"]},size:{type:[String,Number],default:"30%"},withHeader:{type:Boolean,default:!0},modalFade:{type:Boolean,default:!0}}),UZ=FM,VZ=de({name:"ElDrawer",components:{ElOverlay:_0,ElFocusTrap:Lh,ElIcon:tt,Close:yr},inheritAttrs:!1,props:BZ,emits:UZ,setup(t,{slots:e}){Ir({scope:"el-drawer",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/drawer.html#slots"},R(()=>!!e.title)),Ir({scope:"el-drawer",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/drawer.html#attributes",type:"Attribute"},R(()=>!!t.customClass));const n=q(),i=q(),r=Ue("drawer"),{t:a}=Pt(),d=R(()=>t.direction==="rtl"||t.direction==="ltr"),s=R(()=>bn(t.size));return{...BM(t,n),drawerRef:n,focusStartRef:i,isHorizontal:d,drawerSize:s,ns:r,t:a}}}),HZ=["aria-label","aria-labelledby","aria-describedby"],zZ=["id"],$Z=["aria-label"],WZ=["id"];function GZ(t,e,n,i,r,a){const d=ft("close"),s=ft("el-icon"),o=ft("el-focus-trap"),c=ft("el-overlay");return I(),ke(Tu,{to:"body",disabled:!t.appendToBody},[ue(wn,{name:t.ns.b("fade"),onAfterEnter:t.afterEnter,onAfterLeave:t.afterLeave,onBeforeLeave:t.beforeLeave,persisted:""},{default:ve(()=>[pt(ue(c,{mask:t.modal,"overlay-class":t.modalClass,"z-index":t.zIndex,onClick:t.onModalClick},{default:ve(()=>[ue(o,{loop:"",trapped:t.visible,"focus-trap-el":t.drawerRef,"focus-start-el":t.focusStartRef,onReleaseRequested:t.onCloseRequested},{default:ve(()=>[ae("div",St({ref:"drawerRef","aria-modal":"true","aria-label":t.title||void 0,"aria-labelledby":t.title?void 0:t.titleId,"aria-describedby":t.bodyId},t.$attrs,{class:[t.ns.b(),t.direction,t.visible&&"open",t.customClass],style:t.isHorizontal?"width: "+t.drawerSize:"height: "+t.drawerSize,role:"dialog",onClick:e[1]||(e[1]=ot(()=>{},["stop"]))}),[ae("span",{ref:"focusStartRef",class:B(t.ns.e("sr-focus")),tabindex:"-1"},null,2),t.withHeader?(I(),ne("header",{key:0,class:B(t.ns.e("header"))},[t.$slots.title?Le(t.$slots,"title",{key:1},()=>[Te(" DEPRECATED SLOT ")]):Le(t.$slots,"header",{key:0,close:t.handleClose,titleId:t.titleId,titleClass:t.ns.e("title")},()=>[t.$slots.title?Te("v-if",!0):(I(),ne("span",{key:0,id:t.titleId,role:"heading",class:B(t.ns.e("title"))},$e(t.title),11,zZ))]),t.showClose?(I(),ne("button",{key:2,"aria-label":t.t("el.drawer.close"),class:B(t.ns.e("close-btn")),type:"button",onClick:e[0]||(e[0]=(...h)=>t.handleClose&&t.handleClose(...h))},[ue(s,{class:B(t.ns.e("close"))},{default:ve(()=>[ue(d)]),_:1},8,["class"])],10,$Z)):Te("v-if",!0)],2)):Te("v-if",!0),t.rendered?(I(),ne("div",{key:1,id:t.bodyId,class:B(t.ns.e("body"))},[Le(t.$slots,"default")],10,WZ)):Te("v-if",!0),t.$slots.footer?(I(),ne("div",{key:2,class:B(t.ns.e("footer"))},[Le(t.$slots,"footer")],2)):Te("v-if",!0)],16,HZ)]),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])]),_:3},8,["mask","overlay-class","z-index","onClick"]),[[Dt,t.visible]])]),_:3},8,["name","onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"])}var jZ=je(VZ,[["render",GZ],["__file","/home/runner/work/element-plus/element-plus/packages/components/drawer/src/drawer.vue"]]);const XZ=yt(jZ),KZ=de({inheritAttrs:!1});function YZ(t,e,n,i,r,a){return Le(t.$slots,"default")}var qZ=je(KZ,[["render",YZ],["__file","/home/runner/work/element-plus/element-plus/packages/components/collection/src/collection.vue"]]);const ZZ=de({name:"ElCollectionItem",inheritAttrs:!1});function JZ(t,e,n,i,r,a){return Le(t.$slots,"default")}var QZ=je(ZZ,[["render",JZ],["__file","/home/runner/work/element-plus/element-plus/packages/components/collection/src/collection-item.vue"]]);const VM="data-el-collection-item",HM=t=>{const e=`El${t}Collection`,n=`${e}Item`,i=Symbol(e),r=Symbol(n),a={...qZ,name:e,setup(){const s=q(null),o=new Map;xt(i,{itemMap:o,getItems:()=>{const h=y(s);if(!h)return[];const l=Array.from(h.querySelectorAll(`[${VM}]`));return[...o.values()].sort((f,m)=>l.indexOf(f.ref)-l.indexOf(m.ref))},collectionRef:s})}},d={...QZ,name:n,setup(s,{attrs:o}){const c=q(null),h=Je(i,void 0);xt(r,{collectionItemRef:c}),mt(()=>{const l=y(c);l&&h.itemMap.set(l,{ref:l,...o})}),rn(()=>{const l=y(c);h.itemMap.delete(l)})}};return{COLLECTION_INJECTION_KEY:i,COLLECTION_ITEM_INJECTION_KEY:r,ElCollection:a,ElCollectionItem:d}},eJ=Xe({style:{type:Ae([String,Array,Object])},currentTabId:{type:Ae(String)},defaultCurrentTabId:String,loop:Boolean,dir:{type:String,values:["ltr","rtl"],default:"ltr"},orientation:{type:Ae(String)},onBlur:Function,onFocus:Function,onMousedown:Function}),{ElCollection:tJ,ElCollectionItem:nJ,COLLECTION_INJECTION_KEY:S0,COLLECTION_ITEM_INJECTION_KEY:iJ}=HM("RovingFocusGroup"),w0=Symbol("elRovingFocusGroup"),zM=Symbol("elRovingFocusGroupItem"),rJ={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},sJ=(t,e)=>{if(e!=="rtl")return t;switch(t){case rt.right:return rt.left;case rt.left:return rt.right;default:return t}},oJ=(t,e,n)=>{const i=sJ(t.key,n);if(!(e==="vertical"&&[rt.left,rt.right].includes(i))&&!(e==="horizontal"&&[rt.up,rt.down].includes(i)))return rJ[i]},aJ=(t,e)=>t.map((n,i)=>t[(i+e)%t.length]),C0=t=>{const{activeElement:e}=document;for(const n of t)if(n===e||(n.focus(),e!==document.activeElement))return},Ow="currentTabIdChange",Lw="rovingFocusGroup.entryFocus",lJ={bubbles:!1,cancelable:!0},cJ=de({name:"ElRovingFocusGroupImpl",inheritAttrs:!1,props:eJ,emits:[Ow,"entryFocus"],setup(t,{emit:e}){var n;const i=q((n=t.currentTabId||t.defaultCurrentTabId)!=null?n:null),r=q(!1),a=q(!1),d=q(null),{getItems:s}=Je(S0,void 0),o=R(()=>[{outline:"none"},t.style]),c=g=>{e(Ow,g)},h=()=>{r.value=!0},l=pn(g=>{var p;(p=t.onMousedown)==null||p.call(t,g)},()=>{a.value=!0}),u=pn(g=>{var p;(p=t.onFocus)==null||p.call(t,g)},g=>{const p=!y(a),{target:v,currentTarget:b}=g;if(v===b&&p&&!y(r)){const _=new Event(Lw,lJ);if(b==null||b.dispatchEvent(_),!_.defaultPrevented){const S=s().filter(E=>E.focusable),w=S.find(E=>E.active),C=S.find(E=>E.id===y(i)),M=[w,C,...S].filter(Boolean).map(E=>E.ref);C0(M)}}a.value=!1}),f=pn(g=>{var p;(p=t.onBlur)==null||p.call(t,g)},()=>{r.value=!1}),m=(...g)=>{e("entryFocus",...g)};xt(w0,{currentTabbedId:Ul(i),loop:ln(t,"loop"),tabIndex:R(()=>y(r)?-1:0),rovingFocusGroupRef:d,rovingFocusGroupRootStyle:o,orientation:ln(t,"orientation"),dir:ln(t,"dir"),onItemFocus:c,onItemShiftTab:h,onBlur:f,onFocus:u,onMousedown:l}),Be(()=>t.currentTabId,g=>{i.value=g??null}),cn(d,Lw,m)}});function uJ(t,e,n,i,r,a){return Le(t.$slots,"default")}var dJ=je(cJ,[["render",uJ],["__file","/home/runner/work/element-plus/element-plus/packages/components/roving-focus-group/src/roving-focus-group-impl.vue"]]);const fJ=de({name:"ElRovingFocusGroup",components:{ElFocusGroupCollection:tJ,ElRovingFocusGroupImpl:dJ}});function hJ(t,e,n,i,r,a){const d=ft("el-roving-focus-group-impl"),s=ft("el-focus-group-collection");return I(),ke(s,null,{default:ve(()=>[ue(d,dr(sh(t.$attrs)),{default:ve(()=>[Le(t.$slots,"default")]),_:3},16)]),_:3})}var pJ=je(fJ,[["render",hJ],["__file","/home/runner/work/element-plus/element-plus/packages/components/roving-focus-group/src/roving-focus-group.vue"]]);const mJ=de({components:{ElRovingFocusCollectionItem:nJ},props:{focusable:{type:Boolean,default:!0},active:{type:Boolean,default:!1}},emits:["mousedown","focus","keydown"],setup(t,{emit:e}){const{currentTabbedId:n,loop:i,onItemFocus:r,onItemShiftTab:a}=Je(w0,void 0),{getItems:d}=Je(S0,void 0),s=Ji(),o=q(null),c=pn(f=>{e("mousedown",f)},f=>{t.focusable?r(y(s)):f.preventDefault()}),h=pn(f=>{e("focus",f)},()=>{r(y(s))}),l=pn(f=>{e("keydown",f)},f=>{const{key:m,shiftKey:g,target:p,currentTarget:v}=f;if(m===rt.tab&&g){a();return}if(p!==v)return;const b=oJ(f);if(b){f.preventDefault();let S=d().filter(w=>w.focusable).map(w=>w.ref);switch(b){case"last":{S.reverse();break}case"prev":case"next":{b==="prev"&&S.reverse();const w=S.indexOf(v);S=i.value?aJ(S,w+1):S.slice(w+1);break}}et(()=>{C0(S)})}}),u=R(()=>n.value===y(s));return xt(zM,{rovingFocusGroupItemRef:o,tabIndex:R(()=>y(u)?0:-1),handleMousedown:c,handleFocus:h,handleKeydown:l}),{id:s,handleKeydown:l,handleFocus:h,handleMousedown:c}}});function gJ(t,e,n,i,r,a){const d=ft("el-roving-focus-collection-item");return I(),ke(d,{id:t.id,focusable:t.focusable,active:t.active},{default:ve(()=>[Le(t.$slots,"default")]),_:3},8,["id","focusable","active"])}var vJ=je(mJ,[["render",gJ],["__file","/home/runner/work/element-plus/element-plus/packages/components/roving-focus-group/src/roving-focus-item.vue"]]);const lf=Xe({trigger:fu.trigger,effect:{...Fn.effect,default:"light"},type:{type:Ae(String)},placement:{type:Ae(String),default:"bottom"},popperOptions:{type:Ae(Object),default:()=>({})},id:String,size:{type:String,default:""},splitButton:Boolean,hideOnClick:{type:Boolean,default:!0},loop:{type:Boolean,default:!0},showTimeout:{type:Number,default:150},hideTimeout:{type:Number,default:150},tabindex:{type:Ae([Number,String]),default:0},maxHeight:{type:Ae([Number,String]),default:""},popperClass:{type:String,default:""},disabled:{type:Boolean,default:!1},role:{type:String,default:"menu"},buttonProps:{type:Ae(Object)},teleported:Fn.teleported}),$M=Xe({command:{type:[Object,String,Number],default:()=>({})},disabled:Boolean,divided:Boolean,textValue:String,icon:{type:Qt}}),yJ=Xe({onKeydown:{type:Ae(Function)}}),bJ=[rt.down,rt.pageDown,rt.home],WM=[rt.up,rt.pageUp,rt.end],_J=[...bJ,...WM],{ElCollection:SJ,ElCollectionItem:wJ,COLLECTION_INJECTION_KEY:CJ,COLLECTION_ITEM_INJECTION_KEY:xJ}=HM("Dropdown"),Nh=Symbol("elDropdown"),{ButtonGroup:TJ}=jn,EJ=de({name:"ElDropdown",components:{ElButton:jn,ElButtonGroup:TJ,ElScrollbar:Cs,ElDropdownCollection:SJ,ElTooltip:mi,ElRovingFocusGroup:pJ,ElOnlyChild:mE,ElIcon:tt,ArrowDown:ao},props:lf,emits:["visible-change","click","command"],setup(t,{emit:e}){const n=vt(),i=Ue("dropdown"),{t:r}=Pt(),a=q(),d=q(),s=q(null),o=q(null),c=q(null),h=q(null),l=q(!1),u=[rt.enter,rt.space,rt.down],f=R(()=>({maxHeight:bn(t.maxHeight)})),m=R(()=>[i.m(S.value)]),g=Ji().value,p=R(()=>t.id||g);Be([a,ln(t,"trigger")],([V,k],[F])=>{var T,P,H;const N=Ze(k)?k:[k];(T=F==null?void 0:F.$el)!=null&&T.removeEventListener&&F.$el.removeEventListener("pointerenter",C),(P=V==null?void 0:V.$el)!=null&&P.removeEventListener&&V.$el.removeEventListener("pointerenter",C),(H=V==null?void 0:V.$el)!=null&&H.addEventListener&&N.includes("hover")&&V.$el.addEventListener("pointerenter",C)},{immediate:!0}),rn(()=>{var V,k;(k=(V=a.value)==null?void 0:V.$el)!=null&&k.removeEventListener&&a.value.$el.removeEventListener("pointerenter",C)});function v(){b()}function b(){var V;(V=s.value)==null||V.onClose()}function _(){var V;(V=s.value)==null||V.onOpen()}const S=En();function w(...V){e("command",...V)}function C(){var V,k;(k=(V=a.value)==null?void 0:V.$el)==null||k.focus()}function x(){}function M(){const V=y(o);V==null||V.focus(),h.value=null}function E(V){h.value=V}function A(V){l.value||(V.preventDefault(),V.stopImmediatePropagation())}function O(){e("visible-change",!0)}function D(V){(V==null?void 0:V.type)==="keydown"&&o.value.focus()}function L(){e("visible-change",!1)}return xt(Nh,{contentRef:o,role:R(()=>t.role),triggerId:p,isUsingKeyboard:l,onItemEnter:x,onItemLeave:M}),xt("elDropdown",{instance:n,dropdownSize:S,handleClick:v,commandHandler:w,trigger:ln(t,"trigger"),hideOnClick:ln(t,"hideOnClick")}),{t:r,ns:i,scrollbar:c,wrapStyle:f,dropdownTriggerKls:m,dropdownSize:S,triggerId:p,triggerKeys:u,currentTabId:h,handleCurrentTabIdChange:E,handlerMainButtonClick:V=>{e("click",V)},handleEntryFocus:A,handleClose:b,handleOpen:_,handleBeforeShowTooltip:O,handleShowTooltip:D,handleBeforeHideTooltip:L,onFocusAfterTrapped:V=>{var k,F;V.preventDefault(),(F=(k=o.value)==null?void 0:k.focus)==null||F.call(k,{preventScroll:!0})},popperRef:s,contentRef:o,triggeringElementRef:a,referenceElementRef:d}}});function MJ(t,e,n,i,r,a){var d;const s=ft("el-dropdown-collection"),o=ft("el-roving-focus-group"),c=ft("el-scrollbar"),h=ft("el-only-child"),l=ft("el-tooltip"),u=ft("el-button"),f=ft("arrow-down"),m=ft("el-icon"),g=ft("el-button-group");return I(),ne("div",{class:B([t.ns.b(),t.ns.is("disabled",t.disabled)])},[ue(l,{ref:"popperRef",role:t.role,effect:t.effect,"fallback-placements":["bottom","top"],"popper-options":t.popperOptions,"gpu-acceleration":!1,"hide-after":t.trigger==="hover"?t.hideTimeout:0,"manual-mode":!0,placement:t.placement,"popper-class":[t.ns.e("popper"),t.popperClass],"reference-element":(d=t.referenceElementRef)==null?void 0:d.$el,trigger:t.trigger,"trigger-keys":t.triggerKeys,"trigger-target-el":t.contentRef,"show-after":t.trigger==="hover"?t.showTimeout:0,"stop-popper-mouse-event":!1,"virtual-ref":t.triggeringElementRef,"virtual-triggering":t.splitButton,disabled:t.disabled,transition:`${t.ns.namespace.value}-zoom-in-top`,teleported:t.teleported,pure:"",persistent:"",onBeforeShow:t.handleBeforeShowTooltip,onShow:t.handleShowTooltip,onBeforeHide:t.handleBeforeHideTooltip},ds({content:ve(()=>[ue(c,{ref:"scrollbar","wrap-style":t.wrapStyle,tag:"div","view-class":t.ns.e("list")},{default:ve(()=>[ue(o,{loop:t.loop,"current-tab-id":t.currentTabId,orientation:"horizontal",onCurrentTabIdChange:t.handleCurrentTabIdChange,onEntryFocus:t.handleEntryFocus},{default:ve(()=>[ue(s,null,{default:ve(()=>[Le(t.$slots,"dropdown")]),_:3})]),_:3},8,["loop","current-tab-id","onCurrentTabIdChange","onEntryFocus"])]),_:3},8,["wrap-style","view-class"])]),_:2},[t.splitButton?void 0:{name:"default",fn:ve(()=>[ue(h,{id:t.triggerId,ref:"triggeringElementRef",role:"button",tabindex:t.tabindex},{default:ve(()=>[Le(t.$slots,"default")]),_:3},8,["id","tabindex"])])}]),1032,["role","effect","popper-options","hide-after","placement","popper-class","reference-element","trigger","trigger-keys","trigger-target-el","show-after","virtual-ref","virtual-triggering","disabled","transition","teleported","onBeforeShow","onShow","onBeforeHide"]),t.splitButton?(I(),ke(g,{key:0},{default:ve(()=>[ue(u,St({ref:"referenceElementRef"},t.buttonProps,{size:t.dropdownSize,type:t.type,disabled:t.disabled,tabindex:t.tabindex,onClick:t.handlerMainButtonClick}),{default:ve(()=>[Le(t.$slots,"default")]),_:3},16,["size","type","disabled","tabindex","onClick"]),ue(u,St({id:t.triggerId,ref:"triggeringElementRef"},t.buttonProps,{role:"button",size:t.dropdownSize,type:t.type,class:t.ns.e("caret-button"),disabled:t.disabled,tabindex:t.tabindex,"aria-label":t.t("el.dropdown.toggleDropdown")}),{default:ve(()=>[ue(m,{class:B(t.ns.e("icon"))},{default:ve(()=>[ue(f)]),_:1},8,["class"])]),_:1},16,["id","size","type","class","disabled","tabindex","aria-label"])]),_:3})):Te("v-if",!0)],2)}var AJ=je(EJ,[["render",MJ],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown.vue"]]);const kJ=de({name:"DropdownItemImpl",components:{ElIcon:tt},props:$M,emits:["pointermove","pointerleave","click","clickimpl"],setup(t,{emit:e}){const n=Ue("dropdown"),{role:i}=Je(Nh,void 0),{collectionItemRef:r}=Je(xJ,void 0),{collectionItemRef:a}=Je(iJ,void 0),{rovingFocusGroupItemRef:d,tabIndex:s,handleFocus:o,handleKeydown:c,handleMousedown:h}=Je(zM,void 0),l=wh(r,a,d),u=R(()=>i.value==="menu"?"menuitem":i.value==="navigation"?"link":"button"),f=pn(m=>{const{code:g}=m;if(g===rt.enter||g===rt.space)return m.preventDefault(),m.stopImmediatePropagation(),e("clickimpl",m),!0},c);return{ns:n,itemRef:l,dataset:{[VM]:""},role:u,tabIndex:s,handleFocus:o,handleKeydown:f,handleMousedown:h}}}),RJ=["aria-disabled","tabindex","role"];function PJ(t,e,n,i,r,a){const d=ft("el-icon");return I(),ne(Qe,null,[t.divided?(I(),ne("li",St({key:0,role:"separator",class:t.ns.bem("menu","item","divided")},t.$attrs),null,16)):Te("v-if",!0),ae("li",St({ref:t.itemRef},{...t.dataset,...t.$attrs},{"aria-disabled":t.disabled,class:[t.ns.be("menu","item"),t.ns.is("disabled",t.disabled)],tabindex:t.tabIndex,role:t.role,onClick:e[0]||(e[0]=s=>t.$emit("clickimpl",s)),onFocus:e[1]||(e[1]=(...s)=>t.handleFocus&&t.handleFocus(...s)),onKeydown:e[2]||(e[2]=ot((...s)=>t.handleKeydown&&t.handleKeydown(...s),["self"])),onMousedown:e[3]||(e[3]=(...s)=>t.handleMousedown&&t.handleMousedown(...s)),onPointermove:e[4]||(e[4]=s=>t.$emit("pointermove",s)),onPointerleave:e[5]||(e[5]=s=>t.$emit("pointerleave",s))}),[t.icon?(I(),ke(d,{key:0},{default:ve(()=>[(I(),ke(Ct(t.icon)))]),_:1})):Te("v-if",!0),Le(t.$slots,"default")],16,RJ)],64)}var OJ=je(kJ,[["render",PJ],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown-item-impl.vue"]]);const GM=()=>{const t=Je("elDropdown",{}),e=R(()=>t==null?void 0:t.dropdownSize);return{elDropdown:t,_elDropdownSize:e}},LJ=de({name:"ElDropdownItem",components:{ElDropdownCollectionItem:wJ,ElRovingFocusItem:vJ,ElDropdownItemImpl:OJ},inheritAttrs:!1,props:$M,emits:["pointermove","pointerleave","click"],setup(t,{emit:e,attrs:n}){const{elDropdown:i}=GM(),r=vt(),a=q(null),d=R(()=>{var f,m;return(m=(f=y(a))==null?void 0:f.textContent)!=null?m:""}),{onItemEnter:s,onItemLeave:o}=Je(Nh,void 0),c=pn(f=>(e("pointermove",f),f.defaultPrevented),L_(f=>{if(t.disabled){o(f);return}const m=f.currentTarget;m===document.activeElement||m.contains(document.activeElement)||(s(f),f.defaultPrevented||m==null||m.focus())})),h=pn(f=>(e("pointerleave",f),f.defaultPrevented),L_(f=>{o(f)})),l=pn(f=>{if(!t.disabled)return e("click",f),f.type!=="keydown"&&f.defaultPrevented},f=>{var m,g,p;if(t.disabled){f.stopImmediatePropagation();return}(m=i==null?void 0:i.hideOnClick)!=null&&m.value&&((g=i.handleClick)==null||g.call(i)),(p=i.commandHandler)==null||p.call(i,t.command,r,f)}),u=R(()=>({...t,...n}));return{handleClick:l,handlePointerMove:c,handlePointerLeave:h,textContent:d,propsAndAttrs:u}}});function IJ(t,e,n,i,r,a){var d;const s=ft("el-dropdown-item-impl"),o=ft("el-roving-focus-item"),c=ft("el-dropdown-collection-item");return I(),ke(c,{disabled:t.disabled,"text-value":(d=t.textValue)!=null?d:t.textContent},{default:ve(()=>[ue(o,{focusable:!t.disabled},{default:ve(()=>[ue(s,St(t.propsAndAttrs,{onPointerleave:t.handlePointerLeave,onPointermove:t.handlePointerMove,onClickimpl:t.handleClick}),{default:ve(()=>[Le(t.$slots,"default")]),_:3},16,["onPointerleave","onPointermove","onClickimpl"])]),_:3},8,["focusable"])]),_:3},8,["disabled","text-value"])}var jM=je(LJ,[["render",IJ],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown-item.vue"]]);const DJ=de({name:"ElDropdownMenu",props:yJ,setup(t){const e=Ue("dropdown"),{_elDropdownSize:n}=GM(),i=n.value,{focusTrapRef:r,onKeydown:a}=Je(u0,void 0),{contentRef:d,role:s,triggerId:o}=Je(Nh,void 0),{collectionRef:c,getItems:h}=Je(CJ,void 0),{rovingFocusGroupRef:l,rovingFocusGroupRootStyle:u,tabIndex:f,onBlur:m,onFocus:g,onMousedown:p}=Je(w0,void 0),{collectionRef:v}=Je(S0,void 0),b=R(()=>[e.b("menu"),e.bm("menu",i==null?void 0:i.value)]),_=wh(d,c,r,l,v),S=pn(C=>{var x;(x=t.onKeydown)==null||x.call(t,C)},C=>{const{currentTarget:x,code:M,target:E}=C;if(x.contains(E),rt.tab===M&&C.stopImmediatePropagation(),C.preventDefault(),E!==y(d)||!_J.includes(M))return;const O=h().filter(D=>!D.disabled).map(D=>D.ref);WM.includes(M)&&O.reverse(),C0(O)});return{size:i,rovingFocusGroupRootStyle:u,tabIndex:f,dropdownKls:b,role:s,triggerId:o,dropdownListWrapperRef:_,handleKeydown:C=>{S(C),a(C)},onBlur:m,onFocus:g,onMousedown:p}}}),NJ=["role","aria-labelledby"];function FJ(t,e,n,i,r,a){return I(),ne("ul",{ref:t.dropdownListWrapperRef,class:B(t.dropdownKls),style:nt(t.rovingFocusGroupRootStyle),tabindex:-1,role:t.role,"aria-labelledby":t.triggerId,onBlur:e[0]||(e[0]=(...d)=>t.onBlur&&t.onBlur(...d)),onFocus:e[1]||(e[1]=(...d)=>t.onFocus&&t.onFocus(...d)),onKeydown:e[2]||(e[2]=ot((...d)=>t.handleKeydown&&t.handleKeydown(...d),["self"])),onMousedown:e[3]||(e[3]=ot((...d)=>t.onMousedown&&t.onMousedown(...d),["self"]))},[Le(t.$slots,"default")],46,NJ)}var XM=je(DJ,[["render",FJ],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown-menu.vue"]]);const BJ=yt(AJ,{DropdownItem:jM,DropdownMenu:XM}),UJ=mn(jM),VJ=mn(XM),HJ={viewBox:"0 0 79 86",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},zJ=["id"],$J=["stop-color"],WJ=["stop-color"],GJ=["id"],jJ=["stop-color"],XJ=["stop-color"],KJ=["id"],YJ={id:"Illustrations",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},qJ={id:"B-type",transform:"translate(-1268.000000, -535.000000)"},ZJ={id:"Group-2",transform:"translate(1268.000000, 535.000000)"},JJ=["fill"],QJ=["fill"],eQ={id:"Group-Copy",transform:"translate(34.500000, 31.500000) scale(-1, 1) rotate(-25.000000) translate(-34.500000, -31.500000) translate(7.000000, 10.000000)"},tQ=["fill"],nQ=["fill"],iQ=["fill"],rQ=["fill"],sQ=["fill"],oQ={id:"Rectangle-Copy-17",transform:"translate(53.000000, 45.000000)"},aQ=["fill","xlink:href"],lQ=["fill","mask"],cQ=["fill"],uQ=de({name:"ImgEmpty"}),dQ=de({...uQ,setup(t){const e=Ue("empty"),n=Ji();return(i,r)=>(I(),ne("svg",HJ,[ae("defs",null,[ae("linearGradient",{id:`linearGradient-1-${y(n)}`,x1:"38.8503086%",y1:"0%",x2:"61.1496914%",y2:"100%"},[ae("stop",{"stop-color":`var(${y(e).cssVarBlockName("fill-color-1")})`,offset:"0%"},null,8,$J),ae("stop",{"stop-color":`var(${y(e).cssVarBlockName("fill-color-4")})`,offset:"100%"},null,8,WJ)],8,zJ),ae("linearGradient",{id:`linearGradient-2-${y(n)}`,x1:"0%",y1:"9.5%",x2:"100%",y2:"90.5%"},[ae("stop",{"stop-color":`var(${y(e).cssVarBlockName("fill-color-1")})`,offset:"0%"},null,8,jJ),ae("stop",{"stop-color":`var(${y(e).cssVarBlockName("fill-color-6")})`,offset:"100%"},null,8,XJ)],8,GJ),ae("rect",{id:`path-3-${y(n)}`,x:"0",y:"0",width:"17",height:"36"},null,8,KJ)]),ae("g",YJ,[ae("g",qJ,[ae("g",ZJ,[ae("path",{id:"Oval-Copy-2",d:"M39.5,86 C61.3152476,86 79,83.9106622 79,81.3333333 C79,78.7560045 57.3152476,78 35.5,78 C13.6847524,78 0,78.7560045 0,81.3333333 C0,83.9106622 17.6847524,86 39.5,86 Z",fill:`var(${y(e).cssVarBlockName("fill-color-3")})`},null,8,JJ),ae("polygon",{id:"Rectangle-Copy-14",fill:`var(${y(e).cssVarBlockName("fill-color-7")})`,transform:"translate(27.500000, 51.500000) scale(1, -1) translate(-27.500000, -51.500000) ",points:"13 58 53 58 42 45 2 45"},null,8,QJ),ae("g",eQ,[ae("polygon",{id:"Rectangle-Copy-10",fill:`var(${y(e).cssVarBlockName("fill-color-7")})`,transform:"translate(11.500000, 5.000000) scale(1, -1) translate(-11.500000, -5.000000) ",points:"2.84078316e-14 3 18 3 23 7 5 7"},null,8,tQ),ae("polygon",{id:"Rectangle-Copy-11",fill:`var(${y(e).cssVarBlockName("fill-color-5")})`,points:"-3.69149156e-15 7 38 7 38 43 -3.69149156e-15 43"},null,8,nQ),ae("rect",{id:"Rectangle-Copy-12",fill:`url(#linearGradient-1-${y(n)})`,transform:"translate(46.500000, 25.000000) scale(-1, 1) translate(-46.500000, -25.000000) ",x:"38",y:"7",width:"17",height:"36"},null,8,iQ),ae("polygon",{id:"Rectangle-Copy-13",fill:`var(${y(e).cssVarBlockName("fill-color-2")})`,transform:"translate(39.500000, 3.500000) scale(-1, 1) translate(-39.500000, -3.500000) ",points:"24 7 41 7 55 -3.63806207e-12 38 -3.63806207e-12"},null,8,rQ)]),ae("rect",{id:"Rectangle-Copy-15",fill:`url(#linearGradient-2-${y(n)})`,x:"13",y:"45",width:"40",height:"36"},null,8,sQ),ae("g",oQ,[ae("use",{id:"Mask",fill:`var(${y(e).cssVarBlockName("fill-color-8")})`,transform:"translate(8.500000, 18.000000) scale(-1, 1) translate(-8.500000, -18.000000) ","xlink:href":`#path-3-${y(n)}`},null,8,aQ),ae("polygon",{id:"Rectangle-Copy",fill:`var(${y(e).cssVarBlockName("fill-color-9")})`,mask:`url(#mask-4-${y(n)})`,transform:"translate(12.000000, 9.000000) scale(-1, 1) translate(-12.000000, -9.000000) ",points:"7 0 24 0 20 18 7 16.5"},null,8,lQ)]),ae("polygon",{id:"Rectangle-Copy-18",fill:`var(${y(e).cssVarBlockName("fill-color-2")})`,transform:"translate(66.000000, 51.500000) scale(-1, 1) translate(-66.000000, -51.500000) ",points:"62 45 79 45 70 58 53 58"},null,8,cQ)])])])]))}});var fQ=je(dQ,[["__file","/home/runner/work/element-plus/element-plus/packages/components/empty/src/img-empty.vue"]]);const hQ=Xe({image:{type:String,default:""},imageSize:Number,description:{type:String,default:""}}),pQ=["src"],mQ={key:1},gQ=de({name:"ElEmpty"}),vQ=de({...gQ,props:hQ,setup(t){const e=t,{t:n}=Pt(),i=Ue("empty"),r=R(()=>e.description||n("el.table.emptyText")),a=R(()=>({width:bn(e.imageSize)}));return(d,s)=>(I(),ne("div",{class:B(y(i).b())},[ae("div",{class:B(y(i).e("image")),style:nt(y(a))},[d.image?(I(),ne("img",{key:0,src:d.image,ondragstart:"return false"},null,8,pQ)):Le(d.$slots,"image",{key:1},()=>[ue(fQ)])],6),ae("div",{class:B(y(i).e("description"))},[d.$slots.description?Le(d.$slots,"description",{key:0}):(I(),ne("p",mQ,$e(y(r)),1))],2),d.$slots.default?(I(),ne("div",{key:0,class:B(y(i).e("bottom"))},[Le(d.$slots,"default")],2)):Te("v-if",!0)],2))}});var yQ=je(vQ,[["__file","/home/runner/work/element-plus/element-plus/packages/components/empty/src/empty.vue"]]);const KM=yt(yQ),bQ=Xe({urlList:{type:Ae(Array),default:()=>an([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:{type:Boolean,default:!1},teleported:{type:Boolean,default:!1},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2}}),_Q={close:()=>!0,switch:t=>at(t)},SQ=["src"],wQ=de({name:"ElImageViewer"}),CQ=de({...wQ,props:bQ,emits:_Q,setup(t,{expose:e,emit:n}){const i=t,r={CONTAIN:{name:"contain",icon:Wo(o5)},ORIGINAL:{name:"original",icon:Wo(E5)}},{t:a}=Pt(),d=Ue("image-viewer"),{nextZIndex:s}=Kl(),o=q(),c=q([]),h=IA(),l=q(!0),u=q(i.initialIndex),f=Jt(r.CONTAIN),m=q({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),g=R(()=>{const{urlList:k}=i;return k.length<=1}),p=R(()=>u.value===0),v=R(()=>u.value===i.urlList.length-1),b=R(()=>i.urlList[u.value]),_=R(()=>{const{scale:k,deg:F,offsetX:T,offsetY:P,enableTransition:H}=m.value;let N=T/k,G=P/k;switch(F%360){case 90:case-270:[N,G]=[G,-N];break;case 180:case-180:[N,G]=[-N,-G];break;case 270:case-90:[N,G]=[-G,N];break}const $={transform:`scale(${k}) rotate(${F}deg) translate(${N}px, ${G}px)`,transition:H?"transform .3s":""};return f.value.name===r.CONTAIN.name&&($.maxWidth=$.maxHeight="100%"),$}),S=R(()=>at(i.zIndex)?i.zIndex:s());function w(){x(),n("close")}function C(){const k=Xo(T=>{switch(T.code){case rt.esc:i.closeOnPressEscape&&w();break;case rt.space:D();break;case rt.left:U();break;case rt.up:V("zoomIn");break;case rt.right:j();break;case rt.down:V("zoomOut");break}}),F=Xo(T=>{const P=T.deltaY||T.deltaX;V(P<0?"zoomIn":"zoomOut",{zoomRate:i.zoomRate,enableTransition:!1})});h.run(()=>{cn(document,"keydown",k),cn(document,"wheel",F)})}function x(){h.stop()}function M(){l.value=!1}function E(k){l.value=!1,k.target.alt=a("el.image.error")}function A(k){if(l.value||k.button!==0||!o.value)return;m.value.enableTransition=!1;const{offsetX:F,offsetY:T}=m.value,P=k.pageX,H=k.pageY,N=Xo($=>{m.value={...m.value,offsetX:F+$.pageX-P,offsetY:T+$.pageY-H}}),G=cn(document,"mousemove",N);cn(document,"mouseup",()=>{G()}),k.preventDefault()}function O(){m.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function D(){if(l.value)return;const k=su(r),F=Object.values(r),T=f.value.name,H=(F.findIndex(N=>N.name===T)+1)%k.length;f.value=r[k[H]],O()}function L(k){const F=i.urlList.length;u.value=(k+F)%F}function U(){p.value&&!i.infinite||L(u.value-1)}function j(){v.value&&!i.infinite||L(u.value+1)}function V(k,F={}){if(l.value)return;const{zoomRate:T,rotateDeg:P,enableTransition:H}={zoomRate:i.zoomRate,rotateDeg:90,enableTransition:!0,...F};switch(k){case"zoomOut":m.value.scale>.2&&(m.value.scale=Number.parseFloat((m.value.scale/T).toFixed(3)));break;case"zoomIn":m.value.scale<7&&(m.value.scale=Number.parseFloat((m.value.scale*T).toFixed(3)));break;case"clockwise":m.value.deg+=P;break;case"anticlockwise":m.value.deg-=P;break}m.value.enableTransition=H}return Be(b,()=>{et(()=>{const k=c.value[0];k!=null&&k.complete||(l.value=!0)})}),Be(u,k=>{O(),n("switch",k)}),mt(()=>{var k,F;C(),(F=(k=o.value)==null?void 0:k.focus)==null||F.call(k)}),e({setActiveItem:L}),(k,F)=>(I(),ke(Tu,{to:"body",disabled:!k.teleported},[ue(wn,{name:"viewer-fade",appear:""},{default:ve(()=>[ae("div",{ref_key:"wrapper",ref:o,tabindex:-1,class:B(y(d).e("wrapper")),style:nt({zIndex:y(S)})},[ae("div",{class:B(y(d).e("mask")),onClick:F[0]||(F[0]=ot(T=>k.hideOnClickModal&&w(),["self"]))},null,2),Te(" CLOSE "),ae("span",{class:B([y(d).e("btn"),y(d).e("close")]),onClick:w},[ue(y(tt),null,{default:ve(()=>[ue(y(yr))]),_:1})],2),Te(" ARROW "),y(g)?Te("v-if",!0):(I(),ne(Qe,{key:0},[ae("span",{class:B([y(d).e("btn"),y(d).e("prev"),y(d).is("disabled",!k.infinite&&y(p))]),onClick:U},[ue(y(tt),null,{default:ve(()=>[ue(y(eo))]),_:1})],2),ae("span",{class:B([y(d).e("btn"),y(d).e("next"),y(d).is("disabled",!k.infinite&&y(v))]),onClick:j},[ue(y(tt),null,{default:ve(()=>[ue(y(ui))]),_:1})],2)],64)),Te(" ACTIONS "),ae("div",{class:B([y(d).e("btn"),y(d).e("actions")])},[ae("div",{class:B(y(d).e("actions__inner"))},[ue(y(tt),{onClick:F[1]||(F[1]=T=>V("zoomOut"))},{default:ve(()=>[ue(y(z5))]),_:1}),ue(y(tt),{onClick:F[2]||(F[2]=T=>V("zoomIn"))},{default:ve(()=>[ue(y(vT))]),_:1}),ae("i",{class:B(y(d).e("actions__divider"))},null,2),ue(y(tt),{onClick:D},{default:ve(()=>[(I(),ke(Ct(y(f).icon)))]),_:1}),ae("i",{class:B(y(d).e("actions__divider"))},null,2),ue(y(tt),{onClick:F[3]||(F[3]=T=>V("anticlockwise"))},{default:ve(()=>[ue(y(w5))]),_:1}),ue(y(tt),{onClick:F[4]||(F[4]=T=>V("clockwise"))},{default:ve(()=>[ue(y(x5))]),_:1})],2)],2),Te(" CANVAS "),ae("div",{class:B(y(d).e("canvas"))},[(I(!0),ne(Qe,null,wt(k.urlList,(T,P)=>pt((I(),ne("img",{ref_for:!0,ref:H=>c.value[P]=H,key:T,src:T,style:nt(y(_)),class:B(y(d).e("img")),onLoad:M,onError:E,onMousedown:A},null,46,SQ)),[[Dt,P===u.value]])),128))],2),Le(k.$slots,"default")],6)]),_:3})],8,["disabled"]))}});var xQ=je(CQ,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image-viewer/src/image-viewer.vue"]]);const YM=yt(xQ),TQ=Xe({hideOnClickModal:{type:Boolean,default:!1},src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:{type:Boolean,default:!1},scrollContainer:{type:Ae([String,Object])},previewSrcList:{type:Ae(Array),default:()=>an([])},previewTeleported:{type:Boolean,default:!1},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2}}),EQ={load:t=>t instanceof Event,error:t=>t instanceof Event,switch:t=>at(t),close:()=>!0,show:()=>!0},MQ=["src","loading"],AQ={key:0},kQ=de({name:"ElImage",inheritAttrs:!1}),RQ=de({...kQ,props:TQ,emits:EQ,setup(t,{emit:e}){const n=t;let i="";const{t:r}=Pt(),a=Ue("image"),d=Vl(),s=Gv(),o=q(),c=q(!1),h=q(!0),l=q(!1),u=q(),f=q(),m=kt&&"loading"in HTMLImageElement.prototype;let g,p;const v=R(()=>d.style),b=R(()=>{const{fit:k}=n;return kt&&k?{objectFit:k}:{}}),_=R(()=>{const{previewSrcList:k}=n;return Array.isArray(k)&&k.length>0}),S=R(()=>{const{previewSrcList:k,initialIndex:F}=n;let T=F;return F>k.length-1&&(T=0),T}),w=R(()=>n.loading==="eager"?!1:!m&&n.loading==="lazy"||n.lazy),C=()=>{kt&&(h.value=!0,c.value=!1,o.value=n.src)};function x(k){h.value=!1,c.value=!1,e("load",k)}function M(k){h.value=!1,c.value=!0,e("error",k)}function E(){t4(u.value,f.value)&&(C(),D())}const A=Ex(E,200,!0);async function O(){var k;if(!kt)return;await et();const{scrollContainer:F}=n;Yi(F)?f.value=F:ct(F)&&F!==""?f.value=(k=document.querySelector(F))!=null?k:void 0:u.value&&(f.value=Vv(u.value)),f.value&&(g=cn(f,"scroll",A),setTimeout(()=>E(),100))}function D(){!kt||!f.value||!A||(g==null||g(),f.value=void 0)}function L(k){if(k.ctrlKey){if(k.deltaY<0)return k.preventDefault(),!1;if(k.deltaY>0)return k.preventDefault(),!1}}function U(){_.value&&(p=cn("wheel",L,{passive:!1}),i=document.body.style.overflow,document.body.style.overflow="hidden",l.value=!0,e("show"))}function j(){p==null||p(),document.body.style.overflow=i,l.value=!1,e("close")}function V(k){e("switch",k)}return Be(()=>n.src,()=>{w.value?(h.value=!0,c.value=!1,D(),O()):C()}),mt(()=>{w.value?O():C()}),(k,F)=>(I(),ne("div",{ref_key:"container",ref:u,class:B([y(a).b(),k.$attrs.class]),style:nt(y(v))},[c.value?Le(k.$slots,"error",{key:0},()=>[ae("div",{class:B(y(a).e("error"))},$e(y(r)("el.image.error")),3)]):(I(),ne(Qe,{key:1},[o.value!==void 0?(I(),ne("img",St({key:0},y(s),{src:o.value,loading:k.loading,style:y(b),class:[y(a).e("inner"),y(_)&&y(a).e("preview"),h.value&&y(a).is("loading")],onClick:U,onLoad:x,onError:M}),null,16,MQ)):Te("v-if",!0),h.value?(I(),ne("div",{key:1,class:B(y(a).e("wrapper"))},[Le(k.$slots,"placeholder",{},()=>[ae("div",{class:B(y(a).e("placeholder"))},null,2)])],2)):Te("v-if",!0)],64)),y(_)?(I(),ne(Qe,{key:2},[l.value?(I(),ke(y(YM),{key:0,"z-index":k.zIndex,"initial-index":y(S),infinite:k.infinite,"zoom-rate":k.zoomRate,"url-list":k.previewSrcList,"hide-on-click-modal":k.hideOnClickModal,teleported:k.previewTeleported,"close-on-press-escape":k.closeOnPressEscape,onClose:j,onSwitch:V},{default:ve(()=>[k.$slots.viewer?(I(),ne("div",AQ,[Le(k.$slots,"viewer")])):Te("v-if",!0)]),_:3},8,["z-index","initial-index","infinite","zoom-rate","url-list","hide-on-click-modal","teleported","close-on-press-escape"])):Te("v-if",!0)],64)):Te("v-if",!0)],6))}});var PQ=je(RQ,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image/src/image.vue"]]);const OQ=yt(PQ),LQ=Xe({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,readonly:Boolean,disabled:Boolean,size:Xn,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:t=>t===null||at(t)||["min","max"].includes(t),default:null},name:String,label:String,placeholder:String,precision:{type:Number,validator:t=>t>=0&&t===Number.parseInt(`${t}`,10)},validateEvent:{type:Boolean,default:!0}}),IQ={[tn]:(t,e)=>e!==t,blur:t=>t instanceof FocusEvent,focus:t=>t instanceof FocusEvent,[di]:t=>at(t)||Cn(t),[bt]:t=>at(t)||Cn(t)},DQ=["aria-label","onKeydown"],NQ=["aria-label","onKeydown"],FQ=de({name:"ElInputNumber"}),BQ=de({...FQ,props:LQ,emits:IQ,setup(t,{expose:e,emit:n}){const i=t,{t:r}=Pt(),a=Ue("input-number"),d=q(),s=Ft({currentValue:i.modelValue,userInput:null}),{formItem:o}=gi(),c=R(()=>at(i.modelValue)&&i.modelValue<=i.min),h=R(()=>at(i.modelValue)&&i.modelValue>=i.max),l=R(()=>{const L=v(i.step);return Un(i.precision)?Math.max(v(i.modelValue),L):(L>i.precision,i.precision)}),u=R(()=>i.controls&&i.controlsPosition==="right"),f=En(),m=Mi(),g=R(()=>{if(s.userInput!==null)return s.userInput;let L=s.currentValue;if(Cn(L))return"";if(at(L)){if(Number.isNaN(L))return"";Un(i.precision)||(L=L.toFixed(i.precision))}return L}),p=(L,U)=>{if(Un(U)&&(U=l.value),U===0)return Math.round(L);let j=String(L);const V=j.indexOf(".");if(V===-1||!j.replace(".","").split("")[V+U])return L;const T=j.length;return j.charAt(T-1)==="5"&&(j=`${j.slice(0,Math.max(0,T-1))}6`),Number.parseFloat(Number(j).toFixed(U))},v=L=>{if(Cn(L))return 0;const U=L.toString(),j=U.indexOf(".");let V=0;return j!==-1&&(V=U.length-j-1),V},b=(L,U=1)=>at(L)?p(L+i.step*U):s.currentValue,_=()=>{if(i.readonly||m.value||h.value)return;const L=Number(g.value)||0,U=b(L);C(U),n(di,s.currentValue)},S=()=>{if(i.readonly||m.value||c.value)return;const L=Number(g.value)||0,U=b(L,-1);C(U),n(di,s.currentValue)},w=(L,U)=>{const{max:j,min:V,step:k,precision:F,stepStrictly:T,valueOnClear:P}=i;j<V&&Tn("InputNumber","min should not be greater than max.");let H=Number(L);if(Cn(L)||Number.isNaN(H))return null;if(L===""){if(P===null)return null;H=ct(P)?{min:V,max:j}[P]:P}return T&&(H=p(Math.round(H/k)*k,F)),Un(F)||(H=p(H,F)),(H>j||H<V)&&(H=H>j?j:V,U&&n(bt,H)),H},C=(L,U=!0)=>{var j;const V=s.currentValue,k=w(L);if(!U){n(bt,k);return}V!==k&&(s.userInput=null,n(bt,k),n(tn,k,V),i.validateEvent&&((j=o==null?void 0:o.validate)==null||j.call(o,"change").catch(F=>void 0)),s.currentValue=k)},x=L=>{s.userInput=L;const U=L===""?null:Number(L);n(di,U),C(U,!1)},M=L=>{const U=L!==""?Number(L):"";(at(U)&&!Number.isNaN(U)||L==="")&&C(U),s.userInput=null},E=()=>{var L,U;(U=(L=d.value)==null?void 0:L.focus)==null||U.call(L)},A=()=>{var L,U;(U=(L=d.value)==null?void 0:L.blur)==null||U.call(L)},O=L=>{n("focus",L)},D=L=>{var U;n("blur",L),i.validateEvent&&((U=o==null?void 0:o.validate)==null||U.call(o,"blur").catch(j=>void 0))};return Be(()=>i.modelValue,L=>{const U=w(s.userInput),j=w(L,!0);!at(U)&&(!U||U!==j)&&(s.currentValue=j,s.userInput=null)},{immediate:!0}),mt(()=>{var L;const{min:U,max:j,modelValue:V}=i,k=(L=d.value)==null?void 0:L.input;if(k.setAttribute("role","spinbutton"),Number.isFinite(j)?k.setAttribute("aria-valuemax",String(j)):k.removeAttribute("aria-valuemax"),Number.isFinite(U)?k.setAttribute("aria-valuemin",String(U)):k.removeAttribute("aria-valuemin"),k.setAttribute("aria-valuenow",String(s.currentValue)),k.setAttribute("aria-disabled",String(m.value)),!at(V)&&V!=null){let F=Number(V);Number.isNaN(F)&&(F=null),n(bt,F)}}),vs(()=>{var L;const U=(L=d.value)==null?void 0:L.input;U==null||U.setAttribute("aria-valuenow",`${s.currentValue}`)}),e({focus:E,blur:A}),(L,U)=>(I(),ne("div",{class:B([y(a).b(),y(a).m(y(f)),y(a).is("disabled",y(m)),y(a).is("without-controls",!L.controls),y(a).is("controls-right",y(u))]),onDragstart:U[1]||(U[1]=ot(()=>{},["prevent"]))},[L.controls?pt((I(),ne("span",{key:0,role:"button","aria-label":y(r)("el.inputNumber.decrease"),class:B([y(a).e("decrease"),y(a).is("disabled",y(c))]),onKeydown:Rt(S,["enter"])},[ue(y(tt),null,{default:ve(()=>[y(u)?(I(),ke(y(ao),{key:0})):(I(),ke(y(f5),{key:1}))]),_:1})],42,DQ)),[[y(Nf),S]]):Te("v-if",!0),L.controls?pt((I(),ne("span",{key:1,role:"button","aria-label":y(r)("el.inputNumber.increase"),class:B([y(a).e("increase"),y(a).is("disabled",y(h))]),onKeydown:Rt(_,["enter"])},[ue(y(tt),null,{default:ve(()=>[y(u)?(I(),ke(y(_h),{key:0})):(I(),ke(y(mT),{key:1}))]),_:1})],42,NQ)),[[y(Nf),_]]):Te("v-if",!0),ue(y(Jn),{id:L.id,ref_key:"input",ref:d,type:"number",step:L.step,"model-value":y(g),placeholder:L.placeholder,readonly:L.readonly,disabled:y(m),size:y(f),max:L.max,min:L.min,name:L.name,label:L.label,"validate-event":!1,onWheel:U[0]||(U[0]=ot(()=>{},["prevent"])),onKeydown:[Rt(ot(_,["prevent"]),["up"]),Rt(ot(S,["prevent"]),["down"])],onBlur:D,onFocus:O,onInput:x,onChange:M},null,8,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","label","onKeydown"])],34))}});var UQ=je(BQ,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input-number/src/input-number.vue"]]);const qM=yt(UQ),VQ=Xe({type:{type:String,values:["primary","success","warning","info","danger","default"],default:"default"},underline:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},href:{type:String,default:""},icon:{type:Qt}}),HQ={click:t=>t instanceof MouseEvent},zQ=["href"],$Q=de({name:"ElLink"}),WQ=de({...$Q,props:VQ,emits:HQ,setup(t,{emit:e}){const n=t,i=Ue("link"),r=R(()=>[i.b(),i.m(n.type),i.is("disabled",n.disabled),i.is("underline",n.underline&&!n.disabled)]);function a(d){n.disabled||e("click",d)}return(d,s)=>(I(),ne("a",{class:B(y(r)),href:d.disabled||!d.href?void 0:d.href,onClick:a},[d.icon?(I(),ke(y(tt),{key:0},{default:ve(()=>[(I(),ke(Ct(d.icon)))]),_:1})):Te("v-if",!0),d.$slots.default?(I(),ne("span",{key:1,class:B(y(i).e("inner"))},[Le(d.$slots,"default")],2)):Te("v-if",!0),d.$slots.icon?Le(d.$slots,"icon",{key:2}):Te("v-if",!0)],10,zQ))}});var GQ=je(WQ,[["__file","/home/runner/work/element-plus/element-plus/packages/components/link/src/link.vue"]]);const jQ=yt(GQ);let XQ=class{constructor(e,n){this.parent=e,this.domNode=n,this.subIndex=0,this.subIndex=0,this.init()}init(){this.subMenuItems=this.domNode.querySelectorAll("li"),this.addListeners()}gotoSubIndex(e){e===this.subMenuItems.length?e=0:e<0&&(e=this.subMenuItems.length-1),this.subMenuItems[e].focus(),this.subIndex=e}addListeners(){const e=this.parent.domNode;Array.prototype.forEach.call(this.subMenuItems,n=>{n.addEventListener("keydown",i=>{let r=!1;switch(i.code){case rt.down:{this.gotoSubIndex(this.subIndex+1),r=!0;break}case rt.up:{this.gotoSubIndex(this.subIndex-1),r=!0;break}case rt.tab:{Xd(e,"mouseleave");break}case rt.enter:case rt.space:{r=!0,i.currentTarget.click();break}}return r&&(i.preventDefault(),i.stopPropagation()),!1})})}},KQ=class{constructor(e,n){this.domNode=e,this.submenu=null,this.submenu=null,this.init(n)}init(e){this.domNode.setAttribute("tabindex","0");const n=this.domNode.querySelector(`.${e}-menu`);n&&(this.submenu=new XQ(this,n)),this.addListeners()}addListeners(){this.domNode.addEventListener("keydown",e=>{let n=!1;switch(e.code){case rt.down:{Xd(e.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(0),n=!0;break}case rt.up:{Xd(e.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(this.submenu.subMenuItems.length-1),n=!0;break}case rt.tab:{Xd(e.currentTarget,"mouseleave");break}case rt.enter:case rt.space:{n=!0,e.currentTarget.click();break}}n&&e.preventDefault()})}},YQ=class{constructor(e,n){this.domNode=e,this.init(n)}init(e){const n=this.domNode.childNodes;Array.from(n).forEach(i=>{i.nodeType===1&&new KQ(i,e)})}};const qQ=de({name:"ElMenuCollapseTransition",setup(){const t=Ue("menu");return{listeners:{onBeforeEnter:n=>n.style.opacity="0.2",onEnter(n,i){Ar(n,`${t.namespace.value}-opacity-transition`),n.style.opacity="1",i()},onAfterEnter(n){Ci(n,`${t.namespace.value}-opacity-transition`),n.style.opacity=""},onBeforeLeave(n){n.dataset||(n.dataset={}),vr(n,t.m("collapse"))?(Ci(n,t.m("collapse")),n.dataset.oldOverflow=n.style.overflow,n.dataset.scrollWidth=n.clientWidth.toString(),Ar(n,t.m("collapse"))):(Ar(n,t.m("collapse")),n.dataset.oldOverflow=n.style.overflow,n.dataset.scrollWidth=n.clientWidth.toString(),Ci(n,t.m("collapse"))),n.style.width=`${n.scrollWidth}px`,n.style.overflow="hidden"},onLeave(n){Ar(n,"horizontal-collapse-transition"),n.style.width=`${n.dataset.scrollWidth}px`}}}}});function ZQ(t,e,n,i,r,a){return I(),ke(wn,St({mode:"out-in"},t.listeners),{default:ve(()=>[Le(t.$slots,"default")]),_:3},16)}var JQ=je(qQ,[["render",ZQ],["__file","/home/runner/work/element-plus/element-plus/packages/components/menu/src/menu-collapse-transition.vue"]]);function ZM(t,e){const n=R(()=>{let r=t.parent;const a=[e.value];for(;r.type.name!=="ElMenu";)r.props.index&&a.unshift(r.props.index),r=r.parent;return a});return{parentMenu:R(()=>{let r=t.parent;for(;r&&!["ElMenu","ElSubMenu"].includes(r.type.name);)r=r.parent;return r}),indexPath:n}}function QQ(t){return R(()=>{const n=t.backgroundColor;return n?new AE(n).shade(20).toString():""})}const JM=(t,e)=>{const n=Ue("menu");return R(()=>n.cssVarBlock({"text-color":t.textColor||"","hover-text-color":t.textColor||"","bg-color":t.backgroundColor||"","hover-bg-color":QQ(t).value||"","active-color":t.activeTextColor||"",level:`${e}`}))},eee=Xe({index:{type:String,required:!0},showTimeout:{type:Number,default:300},hideTimeout:{type:Number,default:300},popperClass:String,disabled:Boolean,popperAppendToBody:{type:Boolean,default:void 0},teleported:{type:Boolean,default:void 0},popperOffset:{type:Number,default:6},expandCloseIcon:{type:Qt},expandOpenIcon:{type:Qt},collapseCloseIcon:{type:Qt},collapseOpenIcon:{type:Qt}}),Fd="ElSubMenu";var x0=de({name:Fd,props:eee,setup(t,{slots:e,expose:n}){Ir({from:"popper-append-to-body",replacement:"teleported",scope:Fd,version:"2.3.0",ref:"https://element-plus.org/en-US/component/menu.html#submenu-attributes"},R(()=>t.popperAppendToBody!==void 0));const i=vt(),{indexPath:r,parentMenu:a}=ZM(i,R(()=>t.index)),d=Ue("menu"),s=Ue("sub-menu"),o=Je("rootMenu");o||Tn(Fd,"can not inject root menu");const c=Je(`subMenu:${a.value.uid}`);c||Tn(Fd,"can not inject sub menu");const h=q({}),l=q({});let u;const f=q(!1),m=q(),g=q(null),p=R(()=>O.value==="horizontal"&&b.value?"bottom-start":"right-start"),v=R(()=>O.value==="horizontal"&&b.value||O.value==="vertical"&&!o.props.collapse?t.expandCloseIcon&&t.expandOpenIcon?C.value?t.expandOpenIcon:t.expandCloseIcon:ao:t.collapseCloseIcon&&t.collapseOpenIcon?C.value?t.collapseOpenIcon:t.collapseCloseIcon:ui),b=R(()=>c.level===0),_=R(()=>{var P;const H=(P=t.teleported)!=null?P:t.popperAppendToBody;return H===void 0?b.value:H}),S=R(()=>o.props.collapse?`${d.namespace.value}-zoom-in-left`:`${d.namespace.value}-zoom-in-top`),w=R(()=>O.value==="horizontal"&&b.value?["bottom-start","bottom-end","top-start","top-end","right-start","left-start"]:["right-start","left-start","bottom-start","bottom-end","top-start","top-end"]),C=R(()=>o.openedMenus.includes(t.index)),x=R(()=>{let P=!1;return Object.values(h.value).forEach(H=>{H.active&&(P=!0)}),Object.values(l.value).forEach(H=>{H.active&&(P=!0)}),P}),M=R(()=>o.props.backgroundColor||""),E=R(()=>o.props.activeTextColor||""),A=R(()=>o.props.textColor||""),O=R(()=>o.props.mode),D=Ft({index:t.index,indexPath:r,active:x}),L=JM(o.props,c.level+1),U=R(()=>O.value!=="horizontal"?{color:A.value}:{borderBottomColor:x.value?o.props.activeTextColor?E.value:"":"transparent",color:x.value?E.value:A.value}),j=()=>{var P,H,N;return(N=(H=(P=g.value)==null?void 0:P.popperRef)==null?void 0:H.popperInstanceRef)==null?void 0:N.destroy()},V=P=>{P||j()},k=()=>{o.props.menuTrigger==="hover"&&o.props.mode==="horizontal"||o.props.collapse&&o.props.mode==="vertical"||t.disabled||o.handleSubMenuClick({index:t.index,indexPath:r.value,active:x.value})},F=(P,H=t.showTimeout)=>{var N;P.type!=="focus"&&(o.props.menuTrigger==="click"&&o.props.mode==="horizontal"||!o.props.collapse&&o.props.mode==="vertical"||t.disabled||(c.mouseInChild.value=!0,u==null||u(),{stop:u}=na(()=>{o.openMenu(t.index,r.value)},H),_.value&&((N=a.value.vnode.el)==null||N.dispatchEvent(new MouseEvent("mouseenter")))))},T=(P=!1)=>{var H,N;o.props.menuTrigger==="click"&&o.props.mode==="horizontal"||!o.props.collapse&&o.props.mode==="vertical"||(u==null||u(),c.mouseInChild.value=!1,{stop:u}=na(()=>!f.value&&o.closeMenu(t.index,r.value),t.hideTimeout),_.value&&P&&((H=i.parent)==null?void 0:H.type.name)==="ElSubMenu"&&((N=c.handleMouseleave)==null||N.call(c,!0)))};Be(()=>o.props.collapse,P=>V(!!P));{const P=N=>{l.value[N.index]=N},H=N=>{delete l.value[N.index]};xt(`subMenu:${i.uid}`,{addSubMenu:P,removeSubMenu:H,handleMouseleave:T,mouseInChild:f,level:c.level+1})}return n({opened:C}),mt(()=>{o.addSubMenu(D),c.addSubMenu(D)}),rn(()=>{c.removeSubMenu(D),o.removeSubMenu(D)}),()=>{var P;const H=[(P=e.title)==null?void 0:P.call(e),st(tt,{class:s.e("icon-arrow"),style:{transform:C.value?t.expandCloseIcon&&t.expandOpenIcon||t.collapseCloseIcon&&t.collapseOpenIcon&&o.props.collapse?"none":"rotateZ(180deg)":"none"}},{default:()=>ct(v.value)?st(i.appContext.components[v.value]):st(v.value)})],N=o.isMenuPopup?st(mi,{ref:g,visible:C.value,effect:"light",pure:!0,offset:t.popperOffset,showArrow:!1,persistent:!0,popperClass:t.popperClass,placement:p.value,teleported:_.value,fallbackPlacements:w.value,transition:S.value,gpuAcceleration:!1},{content:()=>{var G;return st("div",{class:[d.m(O.value),d.m("popup-container"),t.popperClass],onMouseenter:$=>F($,100),onMouseleave:()=>T(!0),onFocus:$=>F($,100)},[st("ul",{class:[d.b(),d.m("popup"),d.m(`popup-${p.value}`)],style:L.value},[(G=e.default)==null?void 0:G.call(e)])])},default:()=>st("div",{class:s.e("title"),style:[U.value,{backgroundColor:M.value}],onClick:k},H)}):st(Qe,{},[st("div",{class:s.e("title"),style:[U.value,{backgroundColor:M.value}],ref:m,onClick:k},H),st(Dh,{},{default:()=>{var G;return pt(st("ul",{role:"menu",class:[d.b(),d.m("inline")],style:L.value},[(G=e.default)==null?void 0:G.call(e)]),[[Dt,C.value]])}})]);return st("li",{class:[s.b(),s.is("active",x.value),s.is("opened",C.value),s.is("disabled",t.disabled)],role:"menuitem",ariaHaspopup:!0,ariaExpanded:C.value,onMouseenter:F,onMouseleave:()=>T(!0),onFocus:F},[N])}}});const tee=Xe({mode:{type:String,values:["horizontal","vertical"],default:"vertical"},defaultActive:{type:String,default:""},defaultOpeneds:{type:Ae(Array),default:()=>an([])},uniqueOpened:Boolean,router:Boolean,menuTrigger:{type:String,values:["hover","click"],default:"hover"},collapse:Boolean,backgroundColor:String,textColor:String,activeTextColor:String,collapseTransition:{type:Boolean,default:!0},ellipsis:{type:Boolean,default:!0},popperEffect:{type:String,values:["dark","light"],default:"dark"}}),Zp=t=>Array.isArray(t)&&t.every(e=>ct(e)),nee={close:(t,e)=>ct(t)&&Zp(e),open:(t,e)=>ct(t)&&Zp(e),select:(t,e,n,i)=>ct(t)&&Zp(e)&&_t(n)&&(i===void 0||i instanceof Promise)};var iee=de({name:"ElMenu",props:tee,emits:nee,setup(t,{emit:e,slots:n,expose:i}){const r=vt(),a=r.appContext.config.globalProperties.$router,d=q(),s=Ue("menu"),o=Ue("sub-menu"),c=q(-1),h=q(t.defaultOpeneds&&!t.collapse?t.defaultOpeneds.slice(0):[]),l=q(t.defaultActive),u=q({}),f=q({}),m=R(()=>t.mode==="horizontal"||t.mode==="vertical"&&t.collapse),g=()=>{const O=l.value&&u.value[l.value];if(!O||t.mode==="horizontal"||t.collapse)return;O.indexPath.forEach(L=>{const U=f.value[L];U&&p(L,U.indexPath)})},p=(O,D)=>{h.value.includes(O)||(t.uniqueOpened&&(h.value=h.value.filter(L=>D.includes(L))),h.value.push(O),e("open",O,D))},v=O=>{const D=h.value.indexOf(O);D!==-1&&h.value.splice(D,1)},b=(O,D)=>{v(O),e("close",O,D)},_=({index:O,indexPath:D})=>{h.value.includes(O)?b(O,D):p(O,D)},S=O=>{(t.mode==="horizontal"||t.collapse)&&(h.value=[]);const{index:D,indexPath:L}=O;if(!(Cn(D)||Cn(L)))if(t.router&&a){const U=O.route||D,j=a.push(U).then(V=>(V||(l.value=D),V));e("select",D,L,{index:D,indexPath:L,route:U},j)}else l.value=D,e("select",D,L,{index:D,indexPath:L})},w=O=>{const D=u.value,L=D[O]||l.value&&D[l.value]||D[t.defaultActive];L?l.value=L.index:l.value=O},C=()=>{var O,D;if(!d.value)return-1;const L=Array.from((D=(O=d.value)==null?void 0:O.childNodes)!=null?D:[]).filter(P=>P.nodeName!=="#comment"&&(P.nodeName!=="#text"||P.nodeValue)),U=64,j=Number.parseInt(getComputedStyle(d.value).paddingLeft,10),V=Number.parseInt(getComputedStyle(d.value).paddingRight,10),k=d.value.clientWidth-j-V;let F=0,T=0;return L.forEach((P,H)=>{F+=P.offsetWidth||0,F<=k-U&&(T=H+1)}),T===L.length?-1:T},x=(O,D=33.34)=>{let L;return()=>{L&&clearTimeout(L),L=setTimeout(()=>{O()},D)}};let M=!0;const E=()=>{const O=()=>{c.value=-1,et(()=>{c.value=C()})};M?O():x(O)(),M=!1};Be(()=>t.defaultActive,O=>{u.value[O]||(l.value=""),w(O)}),Be(()=>t.collapse,O=>{O&&(h.value=[])}),Be(u.value,g);let A;Di(()=>{t.mode==="horizontal"&&t.ellipsis?A=Qn(d,E).stop:A==null||A()});{const O=j=>{f.value[j.index]=j},D=j=>{delete f.value[j.index]};xt("rootMenu",Ft({props:t,openedMenus:h,items:u,subMenus:f,activeIndex:l,isMenuPopup:m,addMenuItem:j=>{u.value[j.index]=j},removeMenuItem:j=>{delete u.value[j.index]},addSubMenu:O,removeSubMenu:D,openMenu:p,closeMenu:b,handleMenuItemClick:S,handleSubMenuClick:_})),xt(`subMenu:${r.uid}`,{addSubMenu:O,removeSubMenu:D,mouseInChild:q(!1),level:0})}return mt(()=>{t.mode==="horizontal"&&new YQ(r.vnode.el,s.namespace.value)}),i({open:D=>{const{indexPath:L}=f.value[D];L.forEach(U=>p(U,L))},close:v,handleResize:E}),()=>{var O,D;let L=(D=(O=n.default)==null?void 0:O.call(n))!=null?D:[];const U=[];if(t.mode==="horizontal"&&d.value){const k=rl(L),F=c.value===-1?k:k.slice(0,c.value),T=c.value===-1?[]:k.slice(c.value);T!=null&&T.length&&t.ellipsis&&(L=F,U.push(st(x0,{index:"sub-menu-more",class:o.e("hide-arrow")},{title:()=>st(tt,{class:o.e("icon-more")},{default:()=>st(m5)}),default:()=>T})))}const j=JM(t,0),V=st("ul",{key:String(t.collapse),role:"menubar",ref:d,style:j.value,class:{[s.b()]:!0,[s.m(t.mode)]:!0,[s.m("collapse")]:t.collapse}},[...L,...U]);return t.collapseTransition&&t.mode==="vertical"?st(JQ,()=>V):V}}});const ree=Xe({index:{type:Ae([String,null]),default:null},route:{type:Ae([String,Object])},disabled:Boolean}),see={click:t=>ct(t.index)&&Array.isArray(t.indexPath)},Jp="ElMenuItem",oee=de({name:Jp,components:{ElTooltip:mi},props:ree,emits:see,setup(t,{emit:e}){const n=vt(),i=Je("rootMenu"),r=Ue("menu"),a=Ue("menu-item");i||Tn(Jp,"can not inject root menu");const{parentMenu:d,indexPath:s}=ZM(n,ln(t,"index")),o=Je(`subMenu:${d.value.uid}`);o||Tn(Jp,"can not inject sub menu");const c=R(()=>t.index===i.activeIndex),h=Ft({index:t.index,indexPath:s,active:c}),l=()=>{t.disabled||(i.handleMenuItemClick({index:t.index,indexPath:s.value,route:t.route}),e("click",h))};return mt(()=>{o.addSubMenu(h),i.addMenuItem(h)}),rn(()=>{o.removeSubMenu(h),i.removeMenuItem(h)}),{parentMenu:d,rootMenu:i,active:c,nsMenu:r,nsMenuItem:a,handleClick:l}}});function aee(t,e,n,i,r,a){const d=ft("el-tooltip");return I(),ne("li",{class:B([t.nsMenuItem.b(),t.nsMenuItem.is("active",t.active),t.nsMenuItem.is("disabled",t.disabled)]),role:"menuitem",tabindex:"-1",onClick:e[0]||(e[0]=(...s)=>t.handleClick&&t.handleClick(...s))},[t.parentMenu.type.name==="ElMenu"&&t.rootMenu.props.collapse&&t.$slots.title?(I(),ke(d,{key:0,effect:t.rootMenu.props.popperEffect,placement:"right","fallback-placements":["left"],persistent:""},{content:ve(()=>[Le(t.$slots,"title")]),default:ve(()=>[ae("div",{class:B(t.nsMenu.be("tooltip","trigger"))},[Le(t.$slots,"default")],2)]),_:3},8,["effect"])):(I(),ne(Qe,{key:1},[Le(t.$slots,"default"),Le(t.$slots,"title")],64))],2)}var QM=je(oee,[["render",aee],["__file","/home/runner/work/element-plus/element-plus/packages/components/menu/src/menu-item.vue"]]);const lee={title:String},cee="ElMenuItemGroup",uee=de({name:cee,props:lee,setup(){return{ns:Ue("menu-item-group")}}});function dee(t,e,n,i,r,a){return I(),ne("li",{class:B(t.ns.b())},[ae("div",{class:B(t.ns.e("title"))},[t.$slots.title?Le(t.$slots,"title",{key:1}):(I(),ne(Qe,{key:0},[Tt($e(t.title),1)],64))],2),ae("ul",null,[Le(t.$slots,"default")])],2)}var e2=je(uee,[["render",dee],["__file","/home/runner/work/element-plus/element-plus/packages/components/menu/src/menu-item-group.vue"]]);const fee=yt(iee,{MenuItem:QM,MenuItemGroup:e2,SubMenu:x0}),hee=mn(QM),pee=mn(e2),mee=mn(x0),gee=Xe({icon:{type:Qt,default:()=>U$},title:String,content:{type:String,default:""}}),vee={back:()=>!0},yee=["aria-label"],bee=de({name:"ElPageHeader"}),_ee=de({...bee,props:gee,emits:vee,setup(t,{emit:e}){const n=Vn(),{t:i}=Pt(),r=Ue("page-header"),a=R(()=>[r.b(),{[r.m("has-breadcrumb")]:!!n.breadcrumb,[r.m("has-extra")]:!!n.extra,[r.is("contentful")]:!!n.default}]);function d(){e("back")}return(s,o)=>(I(),ne("div",{class:B(y(a))},[s.$slots.breadcrumb?(I(),ne("div",{key:0,class:B(y(r).e("breadcrumb"))},[Le(s.$slots,"breadcrumb")],2)):Te("v-if",!0),ae("div",{class:B(y(r).e("header"))},[ae("div",{class:B(y(r).e("left"))},[ae("div",{class:B(y(r).e("back")),role:"button",tabindex:"0",onClick:d},[s.icon||s.$slots.icon?(I(),ne("div",{key:0,"aria-label":s.title||y(i)("el.pageHeader.title"),class:B(y(r).e("icon"))},[Le(s.$slots,"icon",{},()=>[s.icon?(I(),ke(y(tt),{key:0},{default:ve(()=>[(I(),ke(Ct(s.icon)))]),_:1})):Te("v-if",!0)])],10,yee)):Te("v-if",!0),ae("div",{class:B(y(r).e("title"))},[Le(s.$slots,"title",{},()=>[Tt($e(s.title||y(i)("el.pageHeader.title")),1)])],2)],2),ue(y(UM),{direction:"vertical"}),ae("div",{class:B(y(r).e("content"))},[Le(s.$slots,"content",{},()=>[Tt($e(s.content),1)])],2)],2),s.$slots.extra?(I(),ne("div",{key:0,class:B(y(r).e("extra"))},[Le(s.$slots,"extra")],2)):Te("v-if",!0)],2),s.$slots.default?(I(),ne("div",{key:1,class:B(y(r).e("main"))},[Le(s.$slots,"default")],2)):Te("v-if",!0)],2))}});var See=je(_ee,[["__file","/home/runner/work/element-plus/element-plus/packages/components/page-header/src/page-header.vue"]]);const wee=yt(See),t2=Symbol("elPaginationKey"),Cee=Xe({disabled:Boolean,currentPage:{type:Number,default:1},prevText:{type:String},prevIcon:{type:Qt}}),xee={click:t=>t instanceof MouseEvent},Tee=["disabled","aria-label","aria-disabled"],Eee={key:0},Mee=de({name:"ElPaginationPrev"}),Aee=de({...Mee,props:Cee,emits:xee,setup(t){const e=t,{t:n}=Pt(),i=R(()=>e.disabled||e.currentPage<=1);return(r,a)=>(I(),ne("button",{type:"button",class:"btn-prev",disabled:y(i),"aria-label":r.prevText||y(n)("el.pagination.prev"),"aria-disabled":y(i),onClick:a[0]||(a[0]=d=>r.$emit("click",d))},[r.prevText?(I(),ne("span",Eee,$e(r.prevText),1)):(I(),ke(y(tt),{key:1},{default:ve(()=>[(I(),ke(Ct(r.prevIcon)))]),_:1}))],8,Tee))}});var kee=je(Aee,[["__file","/home/runner/work/element-plus/element-plus/packages/components/pagination/src/components/prev.vue"]]);const Ree=Xe({disabled:Boolean,currentPage:{type:Number,default:1},pageCount:{type:Number,default:50},nextText:{type:String},nextIcon:{type:Qt}}),Pee=["disabled","aria-label","aria-disabled"],Oee={key:0},Lee=de({name:"ElPaginationNext"}),Iee=de({...Lee,props:Ree,emits:["click"],setup(t){const e=t,{t:n}=Pt(),i=R(()=>e.disabled||e.currentPage===e.pageCount||e.pageCount===0);return(r,a)=>(I(),ne("button",{type:"button",class:"btn-next",disabled:y(i),"aria-label":r.nextText||y(n)("el.pagination.next"),"aria-disabled":y(i),onClick:a[0]||(a[0]=d=>r.$emit("click",d))},[r.nextText?(I(),ne("span",Oee,$e(r.nextText),1)):(I(),ke(y(tt),{key:1},{default:ve(()=>[(I(),ke(Ct(r.nextIcon)))]),_:1}))],8,Pee))}});var Dee=je(Iee,[["__file","/home/runner/work/element-plus/element-plus/packages/components/pagination/src/components/next.vue"]]);const n2=Symbol("ElSelectGroup"),Vu=Symbol("ElSelect");function Nee(t,e){const n=Je(Vu),i=Je(n2,{disabled:!1}),r=R(()=>Object.prototype.toString.call(t.value).toLowerCase()==="[object object]"),a=R(()=>n.props.multiple?l(n.props.modelValue,t.value):u(t.value,n.props.modelValue)),d=R(()=>{if(n.props.multiple){const g=n.props.modelValue||[];return!a.value&&g.length>=n.props.multipleLimit&&n.props.multipleLimit>0}else return!1}),s=R(()=>t.label||(r.value?"":t.value)),o=R(()=>t.value||t.label||""),c=R(()=>t.disabled||e.groupDisabled||d.value),h=vt(),l=(g=[],p)=>{if(r.value){const v=n.props.valueKey;return g&&g.some(b=>Bt(on(b,v))===on(p,v))}else return g&&g.includes(p)},u=(g,p)=>{if(r.value){const{valueKey:v}=n.props;return on(g,v)===on(p,v)}else return g===p},f=()=>{!t.disabled&&!i.disabled&&(n.hoverIndex=n.optionsArray.indexOf(h.proxy))};Be(()=>s.value,()=>{!t.created&&!n.props.remote&&n.setSelected()}),Be(()=>t.value,(g,p)=>{const{remote:v,valueKey:b}=n.props;if(Object.is(g,p)||(n.onOptionDestroy(p,h.proxy),n.onOptionCreate(h.proxy)),!t.created&&!v){if(b&&typeof g=="object"&&typeof p=="object"&&g[b]===p[b])return;n.setSelected()}}),Be(()=>i.disabled,()=>{e.groupDisabled=i.disabled},{immediate:!0});const{queryChange:m}=Bt(n);return Be(m,g=>{const{query:p}=y(g),v=new RegExp(cT(p),"i");e.visible=v.test(s.value)||t.created,e.visible||n.filteredOptionsCount--},{immediate:!0}),{select:n,currentLabel:s,currentValue:o,itemSelected:a,isDisabled:c,hoverItem:f}}const Fee=de({name:"ElOption",componentName:"ElOption",props:{value:{required:!0,type:[String,Number,Boolean,Object]},label:[String,Number],created:Boolean,disabled:{type:Boolean,default:!1}},setup(t){const e=Ue("select"),n=Ft({index:-1,groupDisabled:!1,visible:!0,hitState:!1,hover:!1}),{currentLabel:i,itemSelected:r,isDisabled:a,select:d,hoverItem:s}=Nee(t,n),{visible:o,hover:c}=Rn(n),h=vt().proxy;d.onOptionCreate(h),rn(()=>{const u=h.value,{selected:f}=d,g=(d.props.multiple?f:[f]).some(p=>p.value===h.value);et(()=>{d.cachedOptions.get(u)===h&&!g&&d.cachedOptions.delete(u)}),d.onOptionDestroy(u,h)});function l(){t.disabled!==!0&&n.groupDisabled!==!0&&d.handleOptionSelect(h)}return{ns:e,currentLabel:i,itemSelected:r,isDisabled:a,select:d,hoverItem:s,visible:o,hover:c,selectOptionClick:l,states:n}}});function Bee(t,e,n,i,r,a){return pt((I(),ne("li",{class:B([t.ns.be("dropdown","item"),t.ns.is("disabled",t.isDisabled),{selected:t.itemSelected,hover:t.hover}]),onMouseenter:e[0]||(e[0]=(...d)=>t.hoverItem&&t.hoverItem(...d)),onClick:e[1]||(e[1]=ot((...d)=>t.selectOptionClick&&t.selectOptionClick(...d),["stop"]))},[Le(t.$slots,"default",{},()=>[ae("span",null,$e(t.currentLabel),1)])],34)),[[Dt,t.visible]])}var T0=je(Fee,[["render",Bee],["__file","/home/runner/work/element-plus/element-plus/packages/components/select/src/option.vue"]]);const Uee=de({name:"ElSelectDropdown",componentName:"ElSelectDropdown",setup(){const t=Je(Vu),e=Ue("select"),n=R(()=>t.props.popperClass),i=R(()=>t.props.multiple),r=R(()=>t.props.fitInputWidth),a=q("");function d(){var s;a.value=`${(s=t.selectWrapper)==null?void 0:s.offsetWidth}px`}return mt(()=>{d(),Qn(t.selectWrapper,d)}),{ns:e,minWidth:a,popperClass:n,isMultiple:i,isFitInputWidth:r}}});function Vee(t,e,n,i,r,a){return I(),ne("div",{class:B([t.ns.b("dropdown"),t.ns.is("multiple",t.isMultiple),t.popperClass]),style:nt({[t.isFitInputWidth?"width":"minWidth"]:t.minWidth})},[Le(t.$slots,"default")],6)}var Hee=je(Uee,[["render",Vee],["__file","/home/runner/work/element-plus/element-plus/packages/components/select/src/select-dropdown.vue"]]);function zee(t){const{t:e}=Pt();return Ft({options:new Map,cachedOptions:new Map,createdLabel:null,createdSelected:!1,selected:t.multiple?[]:{},inputLength:20,inputWidth:0,optionsCount:0,filteredOptionsCount:0,visible:!1,selectedLabel:"",hoverIndex:-1,query:"",previousQuery:null,inputHovering:!1,cachedPlaceHolder:"",currentPlaceholder:e("el.select.placeholder"),menuVisibleOnFocus:!1,isOnComposition:!1,prefixWidth:11,tagInMultiLine:!1,mouseEnter:!1})}let Qp=!1;const $ee=(t,e,n)=>{const{t:i}=Pt(),r=Ue("select");Ir({from:"suffixTransition",replacement:"override style scheme",version:"2.3.0",scope:"props",ref:"https://element-plus.org/en-US/component/select.html#select-attributes"},R(()=>t.suffixTransition===!1));const a=q(null),d=q(null),s=q(null),o=q(null),c=q(null),h=q(null),l=q(null),u=q(-1),f=Jt({query:""}),m=Jt(""),g=q([]);let p=0;const{form:v,formItem:b}=gi(),_=R(()=>!t.filterable||t.multiple||!e.visible),S=R(()=>t.disabled||(v==null?void 0:v.disabled)),w=R(()=>{const xe=t.multiple?Array.isArray(t.modelValue)&&t.modelValue.length>0:t.modelValue!==void 0&&t.modelValue!==null&&t.modelValue!=="";return t.clearable&&!S.value&&e.inputHovering&&xe}),C=R(()=>t.remote&&t.filterable&&!t.remoteShowSuffix?"":t.suffixIcon),x=R(()=>r.is("reverse",C.value&&e.visible&&t.suffixTransition)),M=R(()=>t.remote?300:0),E=R(()=>t.loading?t.loadingText||i("el.select.loading"):t.remote&&e.query===""&&e.options.size===0?!1:t.filterable&&e.query&&e.options.size>0&&e.filteredOptionsCount===0?t.noMatchText||i("el.select.noMatch"):e.options.size===0?t.noDataText||i("el.select.noData"):null),A=R(()=>{const xe=Array.from(e.options.values()),Ve=[];return g.value.forEach(we=>{const Ie=xe.findIndex(Ge=>Ge.currentLabel===we);Ie>-1&&Ve.push(xe[Ie])}),Ve.length?Ve:xe}),O=R(()=>Array.from(e.cachedOptions.values())),D=R(()=>{const xe=A.value.filter(Ve=>!Ve.created).some(Ve=>Ve.currentLabel===e.query);return t.filterable&&t.allowCreate&&e.query!==""&&!xe}),L=En(),U=R(()=>["small"].includes(L.value)?"small":"default"),j=R({get(){return e.visible&&E.value!==!1},set(xe){e.visible=xe}});Be([()=>S.value,()=>L.value,()=>v==null?void 0:v.size],()=>{et(()=>{V()})}),Be(()=>t.placeholder,xe=>{e.cachedPlaceHolder=e.currentPlaceholder=xe,t.multiple&&Array.isArray(t.modelValue)&&t.modelValue.length>0&&(e.currentPlaceholder="")}),Be(()=>t.modelValue,(xe,Ve)=>{t.multiple&&(V(),xe&&xe.length>0||d.value&&e.query!==""?e.currentPlaceholder="":e.currentPlaceholder=e.cachedPlaceHolder,t.filterable&&!t.reserveKeyword&&(e.query="",k(e.query))),P(),t.filterable&&!t.multiple&&(e.inputLength=20),!wi(xe,Ve)&&t.validateEvent&&(b==null||b.validate("change").catch(we=>void 0))},{flush:"post",deep:!0}),Be(()=>e.visible,xe=>{var Ve,we,Ie,Ge,it;xe?((we=(Ve=o.value)==null?void 0:Ve.updatePopper)==null||we.call(Ve),t.filterable&&(e.filteredOptionsCount=e.optionsCount,e.query=t.remote?"":e.selectedLabel,(Ge=(Ie=s.value)==null?void 0:Ie.focus)==null||Ge.call(Ie),t.multiple?(it=d.value)==null||it.focus():e.selectedLabel&&(e.currentPlaceholder=`${e.selectedLabel}`,e.selectedLabel=""),k(e.query),!t.multiple&&!t.remote&&(f.value.query="",Jl(f),Jl(m)))):(t.filterable&&(lt(t.filterMethod)&&t.filterMethod(""),lt(t.remoteMethod)&&t.remoteMethod("")),d.value&&d.value.blur(),e.query="",e.previousQuery=null,e.selectedLabel="",e.inputLength=20,e.menuVisibleOnFocus=!1,N(),et(()=>{d.value&&d.value.value===""&&e.selected.length===0&&(e.currentPlaceholder=e.cachedPlaceHolder)}),t.multiple||(e.selected&&(t.filterable&&t.allowCreate&&e.createdSelected&&e.createdLabel?e.selectedLabel=e.createdLabel:e.selectedLabel=e.selected.currentLabel,t.filterable&&(e.query=e.selectedLabel)),t.filterable&&(e.currentPlaceholder=e.cachedPlaceHolder))),n.emit("visible-change",xe)}),Be(()=>e.options.entries(),()=>{var xe,Ve,we;if(!kt)return;(Ve=(xe=o.value)==null?void 0:xe.updatePopper)==null||Ve.call(xe),t.multiple&&V();const Ie=((we=h.value)==null?void 0:we.querySelectorAll("input"))||[];Array.from(Ie).includes(document.activeElement)||P(),t.defaultFirstOption&&(t.filterable||t.remote)&&e.filteredOptionsCount&&T()},{flush:"post"}),Be(()=>e.hoverIndex,xe=>{at(xe)&&xe>-1?u.value=A.value[xe]||{}:u.value={},A.value.forEach(Ve=>{Ve.hover=u.value===Ve})});const V=()=>{et(()=>{var xe,Ve;if(!a.value)return;const we=a.value.$el.querySelector("input");p=p||(we.clientHeight>0?we.clientHeight+2:0);const Ie=c.value,Ge=X5(L.value||(v==null?void 0:v.size)),it=L.value||Ge===p||p<=0?Ge:p;!(we.offsetParent===null)&&(we.style.height=`${(e.selected.length===0?it:Math.max(Ie?Ie.clientHeight+(Ie.clientHeight>it?6:0):0,it))-2}px`),e.tagInMultiLine=Number.parseFloat(we.style.height)>=it,e.visible&&E.value!==!1&&((Ve=(xe=o.value)==null?void 0:xe.updatePopper)==null||Ve.call(xe))})},k=async xe=>{if(!(e.previousQuery===xe||e.isOnComposition)){if(e.previousQuery===null&&(lt(t.filterMethod)||lt(t.remoteMethod))){e.previousQuery=xe;return}e.previousQuery=xe,et(()=>{var Ve,we;e.visible&&((we=(Ve=o.value)==null?void 0:Ve.updatePopper)==null||we.call(Ve))}),e.hoverIndex=-1,t.multiple&&t.filterable&&et(()=>{const Ve=d.value.value.length*15+20;e.inputLength=t.collapseTags?Math.min(50,Ve):Ve,F(),V()}),t.remote&&lt(t.remoteMethod)?(e.hoverIndex=-1,t.remoteMethod(xe)):lt(t.filterMethod)?(t.filterMethod(xe),Jl(m)):(e.filteredOptionsCount=e.optionsCount,f.value.query=xe,Jl(f),Jl(m)),t.defaultFirstOption&&(t.filterable||t.remote)&&e.filteredOptionsCount&&(await et(),T())}},F=()=>{e.currentPlaceholder!==""&&(e.currentPlaceholder=d.value.value?"":e.cachedPlaceHolder)},T=()=>{const xe=A.value.filter(Ie=>Ie.visible&&!Ie.disabled&&!Ie.states.groupDisabled),Ve=xe.find(Ie=>Ie.created),we=xe[0];e.hoverIndex=K(A.value,Ve||we)},P=()=>{var xe;if(t.multiple)e.selectedLabel="";else{const we=H(t.modelValue);(xe=we.props)!=null&&xe.created?(e.createdLabel=we.props.value,e.createdSelected=!0):e.createdSelected=!1,e.selectedLabel=we.currentLabel,e.selected=we,t.filterable&&(e.query=e.selectedLabel);return}const Ve=[];Array.isArray(t.modelValue)&&t.modelValue.forEach(we=>{Ve.push(H(we))}),e.selected=Ve,et(()=>{V()})},H=xe=>{let Ve;const we=Vd(xe).toLowerCase()==="object",Ie=Vd(xe).toLowerCase()==="null",Ge=Vd(xe).toLowerCase()==="undefined";for(let De=e.cachedOptions.size-1;De>=0;De--){const Ke=O.value[De];if(we?on(Ke.value,t.valueKey)===on(xe,t.valueKey):Ke.value===xe){Ve={value:xe,currentLabel:Ke.currentLabel,isDisabled:Ke.isDisabled};break}}if(Ve)return Ve;const it=we?xe.label:!Ie&&!Ge?xe:"",dt={value:xe,currentLabel:it};return t.multiple&&(dt.hitState=!1),dt},N=()=>{setTimeout(()=>{const xe=t.valueKey;t.multiple?e.selected.length>0?e.hoverIndex=Math.min.apply(null,e.selected.map(Ve=>A.value.findIndex(we=>on(we,xe)===on(Ve,xe)))):e.hoverIndex=-1:e.hoverIndex=A.value.findIndex(Ve=>ee(Ve)===ee(e.selected))},300)},G=()=>{var xe,Ve;$(),(Ve=(xe=o.value)==null?void 0:xe.updatePopper)==null||Ve.call(xe),t.multiple&&V()},$=()=>{var xe;e.inputWidth=(xe=a.value)==null?void 0:xe.$el.offsetWidth},z=()=>{t.filterable&&e.query!==e.selectedLabel&&(e.query=e.selectedLabel,k(e.query))},Z=pi(()=>{z()},M.value),W=pi(xe=>{k(xe.target.value)},M.value),te=xe=>{wi(t.modelValue,xe)||n.emit(tn,xe)},ie=xe=>{if(xe.code!==rt.delete){if(xe.target.value.length<=0&&!be()){const Ve=t.modelValue.slice();Ve.pop(),n.emit(bt,Ve),te(Ve)}xe.target.value.length===1&&t.modelValue.length===0&&(e.currentPlaceholder=e.cachedPlaceHolder)}},re=(xe,Ve)=>{const we=e.selected.indexOf(Ve);if(we>-1&&!S.value){const Ie=t.modelValue.slice();Ie.splice(we,1),n.emit(bt,Ie),te(Ie),n.emit("remove-tag",Ve.value)}xe.stopPropagation()},_e=xe=>{xe.stopPropagation();const Ve=t.multiple?[]:"";if(!ct(Ve))for(const we of e.selected)we.isDisabled&&Ve.push(we.value);n.emit(bt,Ve),te(Ve),e.hoverIndex=-1,e.visible=!1,n.emit("clear")},Pe=xe=>{var Ve;if(t.multiple){const we=(t.modelValue||[]).slice(),Ie=K(we,xe.value);Ie>-1?we.splice(Ie,1):(t.multipleLimit<=0||we.length<t.multipleLimit)&&we.push(xe.value),n.emit(bt,we),te(we),xe.created&&(e.query="",k(""),e.inputLength=20),t.filterable&&((Ve=d.value)==null||Ve.focus())}else n.emit(bt,xe.value),te(xe.value),e.visible=!1;Q(),!e.visible&&et(()=>{fe(xe)})},K=(xe=[],Ve)=>{if(!_t(Ve))return xe.indexOf(Ve);const we=t.valueKey;let Ie=-1;return xe.some((Ge,it)=>Bt(on(Ge,we))===on(Ve,we)?(Ie=it,!0):!1),Ie},Q=()=>{const xe=d.value||a.value;xe&&(xe==null||xe.focus())},fe=xe=>{var Ve,we,Ie,Ge,it;const dt=Array.isArray(xe)?xe[0]:xe;let De=null;if(dt!=null&&dt.value){const Ke=A.value.filter(ht=>ht.value===dt.value);Ke.length>0&&(De=Ke[0].$el)}if(o.value&&De){const Ke=(Ge=(Ie=(we=(Ve=o.value)==null?void 0:Ve.popperRef)==null?void 0:we.contentRef)==null?void 0:Ie.querySelector)==null?void 0:Ge.call(Ie,`.${r.be("dropdown","wrap")}`);Ke&&fT(Ke,De)}(it=l.value)==null||it.handleScroll()},ge=xe=>{e.optionsCount++,e.filteredOptionsCount++,e.options.set(xe.value,xe),e.cachedOptions.set(xe.value,xe)},se=(xe,Ve)=>{e.options.get(xe)===Ve&&(e.optionsCount--,e.filteredOptionsCount--,e.options.delete(xe))},me=xe=>{xe.code!==rt.backspace&&be(!1),e.inputLength=d.value.value.length*15+20,V()},be=xe=>{if(!Array.isArray(e.selected))return;const Ve=e.selected[e.selected.length-1];if(Ve)return xe===!0||xe===!1?(Ve.hitState=xe,xe):(Ve.hitState=!Ve.hitState,Ve.hitState)},Me=xe=>{const Ve=xe.target.value;if(xe.type==="compositionend")e.isOnComposition=!1,et(()=>k(Ve));else{const we=Ve[Ve.length-1]||"";e.isOnComposition=!xh(we)}},Ee=()=>{et(()=>fe(e.selected))},X=xe=>{Qp?Qp=!1:((t.automaticDropdown||t.filterable)&&(t.filterable&&!e.visible&&(e.menuVisibleOnFocus=!0),e.visible=!0),n.emit("focus",xe))},Y=()=>{var xe,Ve,we;e.visible=!1,(xe=a.value)==null||xe.blur(),(we=(Ve=s.value)==null?void 0:Ve.blur)==null||we.call(Ve)},le=xe=>{setTimeout(()=>{var Ve;if((Ve=o.value)!=null&&Ve.isFocusInsideContent()){Qp=!0;return}e.visible&&Re(),n.emit("blur",xe)})},Ce=xe=>{_e(xe)},Re=()=>{e.visible=!1},Ne=xe=>{e.visible&&(xe.preventDefault(),xe.stopPropagation(),e.visible=!1)},he=xe=>{var Ve;xe&&!e.mouseEnter||S.value||(e.menuVisibleOnFocus?e.menuVisibleOnFocus=!1:(!o.value||!o.value.isFocusInsideContent())&&(e.visible=!e.visible),e.visible&&((Ve=d.value||a.value)==null||Ve.focus()))},pe=()=>{e.visible?A.value[e.hoverIndex]&&Pe(A.value[e.hoverIndex]):he()},ee=xe=>_t(xe.value)?on(xe.value,t.valueKey):xe.value,oe=R(()=>A.value.filter(xe=>xe.visible).every(xe=>xe.disabled)),J=R(()=>e.selected.slice(0,t.maxCollapseTags)),ce=R(()=>e.selected.slice(t.maxCollapseTags)),ye=xe=>{if(!e.visible){e.visible=!0;return}if(!(e.options.size===0||e.filteredOptionsCount===0)&&!e.isOnComposition&&!oe.value){xe==="next"?(e.hoverIndex++,e.hoverIndex===e.options.size&&(e.hoverIndex=0)):xe==="prev"&&(e.hoverIndex--,e.hoverIndex<0&&(e.hoverIndex=e.options.size-1));const Ve=A.value[e.hoverIndex];(Ve.disabled===!0||Ve.states.groupDisabled===!0||!Ve.visible)&&ye(xe),et(()=>fe(u.value))}};return{optionList:g,optionsArray:A,selectSize:L,handleResize:G,debouncedOnInputChange:Z,debouncedQueryChange:W,deletePrevTag:ie,deleteTag:re,deleteSelected:_e,handleOptionSelect:Pe,scrollToOption:fe,readonly:_,resetInputHeight:V,showClose:w,iconComponent:C,iconReverse:x,showNewOption:D,collapseTagSize:U,setSelected:P,managePlaceholder:F,selectDisabled:S,emptyText:E,toggleLastOptionHitState:be,resetInputState:me,handleComposition:Me,onOptionCreate:ge,onOptionDestroy:se,handleMenuEnter:Ee,handleFocus:X,blur:Y,handleBlur:le,handleClearClick:Ce,handleClose:Re,handleKeydownEscape:Ne,toggleMenu:he,selectOption:pe,getValueKey:ee,navigateOptions:ye,dropMenuVisible:j,queryChange:f,groupQueryChange:m,showTagList:J,collapseTagList:ce,reference:a,input:d,iOSInput:s,tooltipRef:o,tags:c,selectWrapper:h,scrollbar:l,handleMouseEnter:()=>{e.mouseEnter=!0},handleMouseLeave:()=>{e.mouseEnter=!1}}};var Wee=de({name:"ElOptions",emits:["update-options"],setup(t,{slots:e,emit:n}){let i=[];function r(a,d){if(a.length!==d.length)return!1;for(const[s]of a.entries())if(a[s]!=d[s])return!1;return!0}return()=>{var a,d;const s=(a=e.default)==null?void 0:a.call(e),o=[];function c(h){Array.isArray(h)&&h.forEach(l=>{var u,f,m,g;const p=(u=(l==null?void 0:l.type)||{})==null?void 0:u.name;p==="ElOptionGroup"?c(!ct(l.children)&&!Array.isArray(l.children)&&lt((f=l.children)==null?void 0:f.default)?(m=l.children)==null?void 0:m.default():l.children):p==="ElOption"?o.push((g=l.props)==null?void 0:g.label):Array.isArray(l.children)&&c(l.children)})}return s.length&&c((d=s[0])==null?void 0:d.children),r(o,i)||(i=o,n("update-options",o)),s}}});const Iw="ElSelect",Gee=de({name:Iw,componentName:Iw,components:{ElInput:Jn,ElSelectMenu:Hee,ElOption:T0,ElOptions:Wee,ElTag:hu,ElScrollbar:Cs,ElTooltip:mi,ElIcon:tt},directives:{ClickOutside:ro},props:{name:String,id:String,modelValue:{type:[Array,String,Number,Boolean,Object],default:void 0},autocomplete:{type:String,default:"off"},automaticDropdown:Boolean,size:{type:String,validator:Ch},effect:{type:String,default:"light"},disabled:Boolean,clearable:Boolean,filterable:Boolean,allowCreate:Boolean,loading:Boolean,popperClass:{type:String,default:""},popperOptions:{type:Object,default:()=>({})},remote:Boolean,loadingText:String,noMatchText:String,noDataText:String,remoteMethod:Function,filterMethod:Function,multiple:Boolean,multipleLimit:{type:Number,default:0},placeholder:{type:String},defaultFirstOption:Boolean,reserveKeyword:{type:Boolean,default:!0},valueKey:{type:String,default:"value"},collapseTags:Boolean,collapseTagsTooltip:{type:Boolean,default:!1},maxCollapseTags:{type:Number,default:1},teleported:Fn.teleported,persistent:{type:Boolean,default:!0},clearIcon:{type:Qt,default:lo},fitInputWidth:{type:Boolean,default:!1},suffixIcon:{type:Qt,default:ao},tagType:{...g0.type,default:"info"},validateEvent:{type:Boolean,default:!0},remoteShowSuffix:{type:Boolean,default:!1},suffixTransition:{type:Boolean,default:!0},placement:{type:String,values:ha,default:"bottom-start"}},emits:[bt,tn,"remove-tag","clear","visible-change","focus","blur"],setup(t,e){const n=Ue("select"),i=Ue("input"),{t:r}=Pt(),a=zee(t),{optionList:d,optionsArray:s,selectSize:o,readonly:c,handleResize:h,collapseTagSize:l,debouncedOnInputChange:u,debouncedQueryChange:f,deletePrevTag:m,deleteTag:g,deleteSelected:p,handleOptionSelect:v,scrollToOption:b,setSelected:_,resetInputHeight:S,managePlaceholder:w,showClose:C,selectDisabled:x,iconComponent:M,iconReverse:E,showNewOption:A,emptyText:O,toggleLastOptionHitState:D,resetInputState:L,handleComposition:U,onOptionCreate:j,onOptionDestroy:V,handleMenuEnter:k,handleFocus:F,blur:T,handleBlur:P,handleClearClick:H,handleClose:N,handleKeydownEscape:G,toggleMenu:$,selectOption:z,getValueKey:Z,navigateOptions:W,dropMenuVisible:te,reference:ie,input:re,iOSInput:_e,tooltipRef:Pe,tags:K,selectWrapper:Q,scrollbar:fe,queryChange:ge,groupQueryChange:se,handleMouseEnter:me,handleMouseLeave:be,showTagList:Me,collapseTagList:Ee}=$ee(t,a,e),{focus:X}=e8(ie),{inputWidth:Y,selected:le,inputLength:Ce,filteredOptionsCount:Re,visible:Ne,selectedLabel:he,hoverIndex:pe,query:ee,inputHovering:oe,currentPlaceholder:J,menuVisibleOnFocus:ce,isOnComposition:ye,options:Oe,cachedOptions:ze,optionsCount:xe,prefixWidth:Ve,tagInMultiLine:we}=Rn(a),Ie=R(()=>{const Ke=[n.b()],ht=y(o);return ht&&Ke.push(n.m(ht)),t.disabled&&Ke.push(n.m("disabled")),Ke}),Ge=R(()=>({maxWidth:`${y(Y)-32}px`,width:"100%"})),it=R(()=>({maxWidth:`${y(Y)>123?y(Y)-123:y(Y)-75}px`}));xt(Vu,Ft({props:t,options:Oe,optionsArray:s,cachedOptions:ze,optionsCount:xe,filteredOptionsCount:Re,hoverIndex:pe,handleOptionSelect:v,onOptionCreate:j,onOptionDestroy:V,selectWrapper:Q,selected:le,setSelected:_,queryChange:ge,groupQueryChange:se})),mt(()=>{a.cachedPlaceHolder=J.value=t.placeholder||(()=>r("el.select.placeholder")),t.multiple&&Array.isArray(t.modelValue)&&t.modelValue.length>0&&(J.value=""),Qn(Q,h),t.remote&&t.multiple&&S(),et(()=>{const Ke=ie.value&&ie.value.$el;if(Ke&&(Y.value=Ke.getBoundingClientRect().width,e.slots.prefix)){const ht=Ke.querySelector(`.${i.e("prefix")}`);Ve.value=Math.max(ht.getBoundingClientRect().width+5,30)}}),_()}),t.multiple&&!Array.isArray(t.modelValue)&&e.emit(bt,[]),!t.multiple&&Array.isArray(t.modelValue)&&e.emit(bt,"");const dt=R(()=>{var Ke,ht;return(ht=(Ke=Pe.value)==null?void 0:Ke.popperRef)==null?void 0:ht.contentRef});return{isIOS:xx,onOptionsRendered:Ke=>{d.value=Ke},tagInMultiLine:we,prefixWidth:Ve,selectSize:o,readonly:c,handleResize:h,collapseTagSize:l,debouncedOnInputChange:u,debouncedQueryChange:f,deletePrevTag:m,deleteTag:g,deleteSelected:p,handleOptionSelect:v,scrollToOption:b,inputWidth:Y,selected:le,inputLength:Ce,filteredOptionsCount:Re,visible:Ne,selectedLabel:he,hoverIndex:pe,query:ee,inputHovering:oe,currentPlaceholder:J,menuVisibleOnFocus:ce,isOnComposition:ye,options:Oe,resetInputHeight:S,managePlaceholder:w,showClose:C,selectDisabled:x,iconComponent:M,iconReverse:E,showNewOption:A,emptyText:O,toggleLastOptionHitState:D,resetInputState:L,handleComposition:U,handleMenuEnter:k,handleFocus:F,blur:T,handleBlur:P,handleClearClick:H,handleClose:N,handleKeydownEscape:G,toggleMenu:$,selectOption:z,getValueKey:Z,navigateOptions:W,dropMenuVisible:te,focus:X,reference:ie,input:re,iOSInput:_e,tooltipRef:Pe,popperPaneRef:dt,tags:K,selectWrapper:Q,scrollbar:fe,wrapperKls:Ie,selectTagsStyle:Ge,nsSelect:n,tagTextStyle:it,handleMouseEnter:me,handleMouseLeave:be,showTagList:Me,collapseTagList:Ee}}}),jee=["disabled","autocomplete"],Xee=["disabled"],Kee={style:{height:"100%",display:"flex","justify-content":"center","align-items":"center"}};function Yee(t,e,n,i,r,a){const d=ft("el-tag"),s=ft("el-tooltip"),o=ft("el-icon"),c=ft("el-input"),h=ft("el-option"),l=ft("el-options"),u=ft("el-scrollbar"),f=ft("el-select-menu"),m=Wc("click-outside");return pt((I(),ne("div",{ref:"selectWrapper",class:B(t.wrapperKls),onMouseenter:e[21]||(e[21]=(...g)=>t.handleMouseEnter&&t.handleMouseEnter(...g)),onMouseleave:e[22]||(e[22]=(...g)=>t.handleMouseLeave&&t.handleMouseLeave(...g)),onClick:e[23]||(e[23]=ot((...g)=>t.toggleMenu&&t.toggleMenu(...g),["stop"]))},[ue(s,{ref:"tooltipRef",visible:t.dropMenuVisible,placement:t.placement,teleported:t.teleported,"popper-class":[t.nsSelect.e("popper"),t.popperClass],"popper-options":t.popperOptions,"fallback-placements":["bottom-start","top-start","right","left"],effect:t.effect,pure:"",trigger:"click",transition:`${t.nsSelect.namespace.value}-zoom-in-top`,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,persistent:t.persistent,onShow:t.handleMenuEnter},{default:ve(()=>[ae("div",{class:"select-trigger",onMouseenter:e[19]||(e[19]=g=>t.inputHovering=!0),onMouseleave:e[20]||(e[20]=g=>t.inputHovering=!1)},[t.multiple?(I(),ne("div",{key:0,ref:"tags",class:B([t.nsSelect.e("tags"),t.nsSelect.is("disabled",t.selectDisabled)]),style:nt(t.selectTagsStyle)},[t.collapseTags&&t.selected.length?(I(),ke(wn,{key:0,onAfterLeave:t.resetInputHeight},{default:ve(()=>[ae("span",{class:B([t.nsSelect.b("tags-wrapper"),{"has-prefix":t.prefixWidth&&t.selected.length}])},[(I(!0),ne(Qe,null,wt(t.showTagList,g=>(I(),ke(d,{key:t.getValueKey(g),closable:!t.selectDisabled&&!g.isDisabled,size:t.collapseTagSize,hit:g.hitState,type:t.tagType,"disable-transitions":"",onClose:p=>t.deleteTag(p,g)},{default:ve(()=>[ae("span",{class:B(t.nsSelect.e("tags-text")),style:nt(t.tagTextStyle)},$e(g.currentLabel),7)]),_:2},1032,["closable","size","hit","type","onClose"]))),128)),t.selected.length>t.maxCollapseTags?(I(),ke(d,{key:0,closable:!1,size:t.collapseTagSize,type:t.tagType,"disable-transitions":""},{default:ve(()=>[t.collapseTagsTooltip?(I(),ke(s,{key:0,disabled:t.dropMenuVisible,"fallback-placements":["bottom","top","right","left"],effect:t.effect,placement:"bottom",teleported:t.teleported},{default:ve(()=>[ae("span",{class:B(t.nsSelect.e("tags-text"))},"+ "+$e(t.selected.length-t.maxCollapseTags),3)]),content:ve(()=>[ae("div",{class:B(t.nsSelect.e("collapse-tags"))},[(I(!0),ne(Qe,null,wt(t.collapseTagList,g=>(I(),ne("div",{key:t.getValueKey(g),class:B(t.nsSelect.e("collapse-tag"))},[ue(d,{class:"in-tooltip",closable:!t.selectDisabled&&!g.isDisabled,size:t.collapseTagSize,hit:g.hitState,type:t.tagType,"disable-transitions":"",style:{margin:"2px"},onClose:p=>t.deleteTag(p,g)},{default:ve(()=>[ae("span",{class:B(t.nsSelect.e("tags-text")),style:nt({maxWidth:t.inputWidth-75+"px"})},$e(g.currentLabel),7)]),_:2},1032,["closable","size","hit","type","onClose"])],2))),128))],2)]),_:1},8,["disabled","effect","teleported"])):(I(),ne("span",{key:1,class:B(t.nsSelect.e("tags-text"))},"+ "+$e(t.selected.length-t.maxCollapseTags),3))]),_:1},8,["size","type"])):Te("v-if",!0)],2)]),_:1},8,["onAfterLeave"])):Te("v-if",!0),t.collapseTags?Te("v-if",!0):(I(),ke(wn,{key:1,onAfterLeave:t.resetInputHeight},{default:ve(()=>[ae("span",{class:B([t.nsSelect.b("tags-wrapper"),{"has-prefix":t.prefixWidth&&t.selected.length}])},[(I(!0),ne(Qe,null,wt(t.selected,g=>(I(),ke(d,{key:t.getValueKey(g),closable:!t.selectDisabled&&!g.isDisabled,size:t.collapseTagSize,hit:g.hitState,type:t.tagType,"disable-transitions":"",onClose:p=>t.deleteTag(p,g)},{default:ve(()=>[ae("span",{class:B(t.nsSelect.e("tags-text")),style:nt({maxWidth:t.inputWidth-75+"px"})},$e(g.currentLabel),7)]),_:2},1032,["closable","size","hit","type","onClose"]))),128))],2)]),_:1},8,["onAfterLeave"])),t.filterable?pt((I(),ne("input",{key:2,ref:"input","onUpdate:modelValue":e[0]||(e[0]=g=>t.query=g),type:"text",class:B([t.nsSelect.e("input"),t.nsSelect.is(t.selectSize),t.nsSelect.is("disabled",t.selectDisabled)]),disabled:t.selectDisabled,autocomplete:t.autocomplete,style:nt({marginLeft:t.prefixWidth&&!t.selected.length||t.tagInMultiLine?`${t.prefixWidth}px`:"",flexGrow:1,width:`${t.inputLength/(t.inputWidth-32)}%`,maxWidth:`${t.inputWidth-42}px`}),onFocus:e[1]||(e[1]=(...g)=>t.handleFocus&&t.handleFocus(...g)),onBlur:e[2]||(e[2]=(...g)=>t.handleBlur&&t.handleBlur(...g)),onKeyup:e[3]||(e[3]=(...g)=>t.managePlaceholder&&t.managePlaceholder(...g)),onKeydown:[e[4]||(e[4]=(...g)=>t.resetInputState&&t.resetInputState(...g)),e[5]||(e[5]=Rt(ot(g=>t.navigateOptions("next"),["prevent"]),["down"])),e[6]||(e[6]=Rt(ot(g=>t.navigateOptions("prev"),["prevent"]),["up"])),e[7]||(e[7]=Rt((...g)=>t.handleKeydownEscape&&t.handleKeydownEscape(...g),["esc"])),e[8]||(e[8]=Rt(ot((...g)=>t.selectOption&&t.selectOption(...g),["stop","prevent"]),["enter"])),e[9]||(e[9]=Rt((...g)=>t.deletePrevTag&&t.deletePrevTag(...g),["delete"])),e[10]||(e[10]=Rt(g=>t.visible=!1,["tab"]))],onCompositionstart:e[11]||(e[11]=(...g)=>t.handleComposition&&t.handleComposition(...g)),onCompositionupdate:e[12]||(e[12]=(...g)=>t.handleComposition&&t.handleComposition(...g)),onCompositionend:e[13]||(e[13]=(...g)=>t.handleComposition&&t.handleComposition(...g)),onInput:e[14]||(e[14]=(...g)=>t.debouncedQueryChange&&t.debouncedQueryChange(...g))},null,46,jee)),[[sv,t.query]]):Te("v-if",!0)],6)):Te("v-if",!0),Te(" fix: https://github.com/element-plus/element-plus/issues/11415 "),t.isIOS&&!t.multiple&&t.filterable&&t.readonly?(I(),ne("input",{key:1,ref:"iOSInput",class:B([t.nsSelect.e("input"),t.nsSelect.is(t.selectSize),t.nsSelect.em("input","iOS")]),disabled:t.selectDisabled,type:"text"},null,10,Xee)):Te("v-if",!0),ue(c,{id:t.id,ref:"reference",modelValue:t.selectedLabel,"onUpdate:modelValue":e[15]||(e[15]=g=>t.selectedLabel=g),type:"text",placeholder:typeof t.currentPlaceholder=="function"?t.currentPlaceholder():t.currentPlaceholder,name:t.name,autocomplete:t.autocomplete,size:t.selectSize,disabled:t.selectDisabled,readonly:t.readonly,"validate-event":!1,class:B([t.nsSelect.is("focus",t.visible)]),tabindex:t.multiple&&t.filterable?-1:void 0,onFocus:t.handleFocus,onBlur:t.handleBlur,onInput:t.debouncedOnInputChange,onPaste:t.debouncedOnInputChange,onCompositionstart:t.handleComposition,onCompositionupdate:t.handleComposition,onCompositionend:t.handleComposition,onKeydown:[e[16]||(e[16]=Rt(ot(g=>t.navigateOptions("next"),["stop","prevent"]),["down"])),e[17]||(e[17]=Rt(ot(g=>t.navigateOptions("prev"),["stop","prevent"]),["up"])),Rt(ot(t.selectOption,["stop","prevent"]),["enter"]),Rt(t.handleKeydownEscape,["esc"]),e[18]||(e[18]=Rt(g=>t.visible=!1,["tab"]))]},ds({suffix:ve(()=>[t.iconComponent&&!t.showClose?(I(),ke(o,{key:0,class:B([t.nsSelect.e("caret"),t.nsSelect.e("icon"),t.iconReverse])},{default:ve(()=>[(I(),ke(Ct(t.iconComponent)))]),_:1},8,["class"])):Te("v-if",!0),t.showClose&&t.clearIcon?(I(),ke(o,{key:1,class:B([t.nsSelect.e("caret"),t.nsSelect.e("icon")]),onClick:t.handleClearClick},{default:ve(()=>[(I(),ke(Ct(t.clearIcon)))]),_:1},8,["class","onClick"])):Te("v-if",!0)]),_:2},[t.$slots.prefix?{name:"prefix",fn:ve(()=>[ae("div",Kee,[Le(t.$slots,"prefix")])])}:void 0]),1032,["id","modelValue","placeholder","name","autocomplete","size","disabled","readonly","class","tabindex","onFocus","onBlur","onInput","onPaste","onCompositionstart","onCompositionupdate","onCompositionend","onKeydown"])],32)]),content:ve(()=>[ue(f,null,{default:ve(()=>[pt(ue(u,{ref:"scrollbar",tag:"ul","wrap-class":t.nsSelect.be("dropdown","wrap"),"view-class":t.nsSelect.be("dropdown","list"),class:B([t.nsSelect.is("empty",!t.allowCreate&&!!t.query&&t.filteredOptionsCount===0)])},{default:ve(()=>[t.showNewOption?(I(),ke(h,{key:0,value:t.query,created:!0},null,8,["value"])):Te("v-if",!0),ue(l,{onUpdateOptions:t.onOptionsRendered},{default:ve(()=>[Le(t.$slots,"default")]),_:3},8,["onUpdateOptions"])]),_:3},8,["wrap-class","view-class","class"]),[[Dt,t.options.size>0&&!t.loading]]),t.emptyText&&(!t.allowCreate||t.loading||t.allowCreate&&t.options.size===0)?(I(),ne(Qe,{key:0},[t.$slots.empty?Le(t.$slots,"empty",{key:0}):(I(),ne("p",{key:1,class:B(t.nsSelect.be("dropdown","empty"))},$e(t.emptyText),3))],64)):Te("v-if",!0)]),_:3})]),_:3},8,["visible","placement","teleported","popper-class","popper-options","effect","transition","persistent","onShow"])],34)),[[m,t.handleClose,t.popperPaneRef]])}var qee=je(Gee,[["render",Yee],["__file","/home/runner/work/element-plus/element-plus/packages/components/select/src/select.vue"]]);const Zee=de({name:"ElOptionGroup",componentName:"ElOptionGroup",props:{label:String,disabled:{type:Boolean,default:!1}},setup(t){const e=Ue("select"),n=q(!0),i=vt(),r=q([]);xt(n2,Ft({...Rn(t)}));const a=Je(Vu);mt(()=>{r.value=d(i.subTree)});const d=o=>{const c=[];return Array.isArray(o.children)&&o.children.forEach(h=>{var l;h.type&&h.type.name==="ElOption"&&h.component&&h.component.proxy?c.push(h.component.proxy):(l=h.children)!=null&&l.length&&c.push(...d(h))}),c},{groupQueryChange:s}=Bt(a);return Be(s,()=>{n.value=r.value.some(o=>o.visible===!0)},{flush:"post"}),{visible:n,ns:e}}});function Jee(t,e,n,i,r,a){return pt((I(),ne("ul",{class:B(t.ns.be("group","wrap"))},[ae("li",{class:B(t.ns.be("group","title"))},$e(t.label),3),ae("li",null,[ae("ul",{class:B(t.ns.b("group"))},[Le(t.$slots,"default")],2)])],2)),[[Dt,t.visible]])}var i2=je(Zee,[["render",Jee],["__file","/home/runner/work/element-plus/element-plus/packages/components/select/src/option-group.vue"]]);const ra=yt(qee,{Option:T0,OptionGroup:i2}),Bf=mn(T0),Qee=mn(i2),E0=()=>Je(t2,{}),ete=Xe({pageSize:{type:Number,required:!0},pageSizes:{type:Ae(Array),default:()=>an([10,20,30,40,50,100])},popperClass:{type:String},disabled:Boolean,size:{type:String,values:Hr}}),tte=de({name:"ElPaginationSizes"}),nte=de({...tte,props:ete,emits:["page-size-change"],setup(t,{emit:e}){const n=t,{t:i}=Pt(),r=Ue("pagination"),a=E0(),d=q(n.pageSize);Be(()=>n.pageSizes,(c,h)=>{if(!wi(c,h)&&Array.isArray(c)){const l=c.includes(n.pageSize)?n.pageSize:n.pageSizes[0];e("page-size-change",l)}}),Be(()=>n.pageSize,c=>{d.value=c});const s=R(()=>n.pageSizes);function o(c){var h;c!==d.value&&(d.value=c,(h=a.handleSizeChange)==null||h.call(a,Number(c)))}return(c,h)=>(I(),ne("span",{class:B(y(r).e("sizes"))},[ue(y(ra),{"model-value":d.value,disabled:c.disabled,"popper-class":c.popperClass,size:c.size,"validate-event":!1,onChange:o},{default:ve(()=>[(I(!0),ne(Qe,null,wt(y(s),l=>(I(),ke(y(Bf),{key:l,value:l,label:l+y(i)("el.pagination.pagesize")},null,8,["value","label"]))),128))]),_:1},8,["model-value","disabled","popper-class","size"])],2))}});var ite=je(nte,[["__file","/home/runner/work/element-plus/element-plus/packages/components/pagination/src/components/sizes.vue"]]);const rte=Xe({size:{type:String,values:Hr}}),ste=["disabled"],ote=de({name:"ElPaginationJumper"}),ate=de({...ote,props:rte,setup(t){const{t:e}=Pt(),n=Ue("pagination"),{pageCount:i,disabled:r,currentPage:a,changeEvent:d}=E0(),s=q(),o=R(()=>{var l;return(l=s.value)!=null?l:a==null?void 0:a.value});function c(l){s.value=l?+l:""}function h(l){l=Math.trunc(+l),d==null||d(l),s.value=void 0}return(l,u)=>(I(),ne("span",{class:B(y(n).e("jump")),disabled:y(r)},[ae("span",{class:B([y(n).e("goto")])},$e(y(e)("el.pagination.goto")),3),ue(y(Jn),{size:l.size,class:B([y(n).e("editor"),y(n).is("in-pagination")]),min:1,max:y(i),disabled:y(r),"model-value":y(o),"validate-event":!1,label:y(e)("el.pagination.page"),type:"number","onUpdate:modelValue":c,onChange:h},null,8,["size","class","max","disabled","model-value","label"]),ae("span",{class:B([y(n).e("classifier")])},$e(y(e)("el.pagination.pageClassifier")),3)],10,ste))}});var lte=je(ate,[["__file","/home/runner/work/element-plus/element-plus/packages/components/pagination/src/components/jumper.vue"]]);const cte=Xe({total:{type:Number,default:1e3}}),ute=["disabled"],dte=de({name:"ElPaginationTotal"}),fte=de({...dte,props:cte,setup(t){const{t:e}=Pt(),n=Ue("pagination"),{disabled:i}=E0();return(r,a)=>(I(),ne("span",{class:B(y(n).e("total")),disabled:y(i)},$e(y(e)("el.pagination.total",{total:r.total})),11,ute))}});var hte=je(fte,[["__file","/home/runner/work/element-plus/element-plus/packages/components/pagination/src/components/total.vue"]]);const pte=Xe({currentPage:{type:Number,default:1},pageCount:{type:Number,required:!0},pagerCount:{type:Number,default:7},disabled:Boolean}),mte=["onKeyup"],gte=["aria-current","aria-label","tabindex"],vte=["tabindex","aria-label"],yte=["aria-current","aria-label","tabindex"],bte=["tabindex","aria-label"],_te=["aria-current","aria-label","tabindex"],Ste=de({name:"ElPaginationPager"}),wte=de({...Ste,props:pte,emits:["change"],setup(t,{emit:e}){const n=t,i=Ue("pager"),r=Ue("icon"),{t:a}=Pt(),d=q(!1),s=q(!1),o=q(!1),c=q(!1),h=q(!1),l=q(!1),u=R(()=>{const S=n.pagerCount,w=(S-1)/2,C=Number(n.currentPage),x=Number(n.pageCount);let M=!1,E=!1;x>S&&(C>S-w&&(M=!0),C<x-w&&(E=!0));const A=[];if(M&&!E){const O=x-(S-2);for(let D=O;D<x;D++)A.push(D)}else if(!M&&E)for(let O=2;O<S;O++)A.push(O);else if(M&&E){const O=Math.floor(S/2)-1;for(let D=C-O;D<=C+O;D++)A.push(D)}else for(let O=2;O<x;O++)A.push(O);return A}),f=R(()=>["more","btn-quickprev",r.b(),i.is("disabled",n.disabled)]),m=R(()=>["more","btn-quicknext",r.b(),i.is("disabled",n.disabled)]),g=R(()=>n.disabled?-1:0);Di(()=>{const S=(n.pagerCount-1)/2;d.value=!1,s.value=!1,n.pageCount>n.pagerCount&&(n.currentPage>n.pagerCount-S&&(d.value=!0),n.currentPage<n.pageCount-S&&(s.value=!0))});function p(S=!1){n.disabled||(S?o.value=!0:c.value=!0)}function v(S=!1){S?h.value=!0:l.value=!0}function b(S){const w=S.target;if(w.tagName.toLowerCase()==="li"&&Array.from(w.classList).includes("number")){const C=Number(w.textContent);C!==n.currentPage&&e("change",C)}else w.tagName.toLowerCase()==="li"&&Array.from(w.classList).includes("more")&&_(S)}function _(S){const w=S.target;if(w.tagName.toLowerCase()==="ul"||n.disabled)return;let C=Number(w.textContent);const x=n.pageCount,M=n.currentPage,E=n.pagerCount-2;w.className.includes("more")&&(w.className.includes("quickprev")?C=M-E:w.className.includes("quicknext")&&(C=M+E)),Number.isNaN(+C)||(C<1&&(C=1),C>x&&(C=x)),C!==M&&e("change",C)}return(S,w)=>(I(),ne("ul",{class:B(y(i).b()),onClick:_,onKeyup:Rt(b,["enter"])},[S.pageCount>0?(I(),ne("li",{key:0,class:B([[y(i).is("active",S.currentPage===1),y(i).is("disabled",S.disabled)],"number"]),"aria-current":S.currentPage===1,"aria-label":y(a)("el.pagination.currentPage",{pager:1}),tabindex:y(g)}," 1 ",10,gte)):Te("v-if",!0),d.value?(I(),ne("li",{key:1,class:B(y(f)),tabindex:y(g),"aria-label":y(a)("el.pagination.prevPages",{pager:S.pagerCount-2}),onMouseenter:w[0]||(w[0]=C=>p(!0)),onMouseleave:w[1]||(w[1]=C=>o.value=!1),onFocus:w[2]||(w[2]=C=>v(!0)),onBlur:w[3]||(w[3]=C=>h.value=!1)},[(o.value||h.value)&&!S.disabled?(I(),ke(y(Ml),{key:0})):(I(),ke(y(xS),{key:1}))],42,vte)):Te("v-if",!0),(I(!0),ne(Qe,null,wt(y(u),C=>(I(),ne("li",{key:C,class:B([[y(i).is("active",S.currentPage===C),y(i).is("disabled",S.disabled)],"number"]),"aria-current":S.currentPage===C,"aria-label":y(a)("el.pagination.currentPage",{pager:C}),tabindex:y(g)},$e(C),11,yte))),128)),s.value?(I(),ne("li",{key:2,class:B(y(m)),tabindex:y(g),"aria-label":y(a)("el.pagination.nextPages",{pager:S.pagerCount-2}),onMouseenter:w[4]||(w[4]=C=>p()),onMouseleave:w[5]||(w[5]=C=>c.value=!1),onFocus:w[6]||(w[6]=C=>v()),onBlur:w[7]||(w[7]=C=>l.value=!1)},[(c.value||l.value)&&!S.disabled?(I(),ke(y(Al),{key:0})):(I(),ke(y(xS),{key:1}))],42,bte)):Te("v-if",!0),S.pageCount>1?(I(),ne("li",{key:3,class:B([[y(i).is("active",S.currentPage===S.pageCount),y(i).is("disabled",S.disabled)],"number"]),"aria-current":S.currentPage===S.pageCount,"aria-label":y(a)("el.pagination.currentPage",{pager:S.pageCount}),tabindex:y(g)},$e(S.pageCount),11,_te)):Te("v-if",!0)],42,mte))}});var Cte=je(wte,[["__file","/home/runner/work/element-plus/element-plus/packages/components/pagination/src/components/pager.vue"]]);const ri=t=>typeof t!="number",xte=Xe({pageSize:Number,defaultPageSize:Number,total:Number,pageCount:Number,pagerCount:{type:Number,validator:t=>at(t)&&Math.trunc(t)===t&&t>4&&t<22&&t%2===1,default:7},currentPage:Number,defaultCurrentPage:Number,layout:{type:String,default:["prev","pager","next","jumper","->","total"].join(", ")},pageSizes:{type:Ae(Array),default:()=>an([10,20,30,40,50,100])},popperClass:{type:String,default:""},prevText:{type:String,default:""},prevIcon:{type:Qt,default:()=>eo},nextText:{type:String,default:""},nextIcon:{type:Qt,default:()=>ui},small:Boolean,background:Boolean,disabled:Boolean,hideOnSinglePage:Boolean}),Tte={"update:current-page":t=>at(t),"update:page-size":t=>at(t),"size-change":t=>at(t),"current-change":t=>at(t),"prev-click":t=>at(t),"next-click":t=>at(t)},Dw="ElPagination";var Ete=de({name:Dw,props:xte,emits:Tte,setup(t,{emit:e,slots:n}){const{t:i}=Pt(),r=Ue("pagination"),a=vt().vnode.props||{},d="onUpdate:currentPage"in a||"onUpdate:current-page"in a||"onCurrentChange"in a,s="onUpdate:pageSize"in a||"onUpdate:page-size"in a||"onSizeChange"in a,o=R(()=>{if(ri(t.total)&&ri(t.pageCount)||!ri(t.currentPage)&&!d)return!1;if(t.layout.includes("sizes")){if(ri(t.pageCount)){if(!ri(t.total)&&!ri(t.pageSize)&&!s)return!1}else if(!s)return!1}return!0}),c=q(ri(t.defaultPageSize)?10:t.defaultPageSize),h=q(ri(t.defaultCurrentPage)?1:t.defaultCurrentPage),l=R({get(){return ri(t.pageSize)?c.value:t.pageSize},set(_){ri(t.pageSize)&&(c.value=_),s&&(e("update:page-size",_),e("size-change",_))}}),u=R(()=>{let _=0;return ri(t.pageCount)?ri(t.total)||(_=Math.max(1,Math.ceil(t.total/l.value))):_=t.pageCount,_}),f=R({get(){return ri(t.currentPage)?h.value:t.currentPage},set(_){let S=_;_<1?S=1:_>u.value&&(S=u.value),ri(t.currentPage)&&(h.value=S),d&&(e("update:current-page",S),e("current-change",S))}});Be(u,_=>{f.value>_&&(f.value=_)});function m(_){f.value=_}function g(_){l.value=_;const S=u.value;f.value>S&&(f.value=S)}function p(){t.disabled||(f.value-=1,e("prev-click",f.value))}function v(){t.disabled||(f.value+=1,e("next-click",f.value))}function b(_,S){_&&(_.props||(_.props={}),_.props.class=[_.props.class,S].join(" "))}return xt(t2,{pageCount:u,disabled:R(()=>t.disabled),currentPage:f,changeEvent:m,handleSizeChange:g}),()=>{var _,S;if(!o.value)return i("el.pagination.deprecationWarning"),null;if(!t.layout||t.hideOnSinglePage&&u.value<=1)return null;const w=[],C=[],x=st("div",{class:r.e("rightwrapper")},C),M={prev:st(kee,{disabled:t.disabled,currentPage:f.value,prevText:t.prevText,prevIcon:t.prevIcon,onClick:p}),jumper:st(lte,{size:t.small?"small":"default"}),pager:st(Cte,{currentPage:f.value,pageCount:u.value,pagerCount:t.pagerCount,onChange:m,disabled:t.disabled}),next:st(Dee,{disabled:t.disabled,currentPage:f.value,pageCount:u.value,nextText:t.nextText,nextIcon:t.nextIcon,onClick:v}),sizes:st(ite,{pageSize:l.value,pageSizes:t.pageSizes,popperClass:t.popperClass,disabled:t.disabled,size:t.small?"small":"default"}),slot:(S=(_=n==null?void 0:n.default)==null?void 0:_.call(n))!=null?S:null,total:st(hte,{total:ri(t.total)?0:t.total})},E=t.layout.split(",").map(O=>O.trim());let A=!1;return E.forEach(O=>{if(O==="->"){A=!0;return}A?C.push(M[O]):w.push(M[O])}),b(w[0],r.is("first")),b(w[w.length-1],r.is("last")),A&&C.length>0&&(b(C[0],r.is("first")),b(C[C.length-1],r.is("last")),w.push(x)),st("div",{class:[r.b(),r.is("background",t.background),{[r.m("small")]:t.small}]},w)}}});const Mte=yt(Ete),Ate=Xe({title:String,confirmButtonText:String,cancelButtonText:String,confirmButtonType:{type:String,values:Xm,default:"primary"},cancelButtonType:{type:String,values:Xm,default:"text"},icon:{type:Qt,default:()=>_5},iconColor:{type:String,default:"#f90"},hideIcon:{type:Boolean,default:!1},hideAfter:{type:Number,default:200},teleported:Fn.teleported,persistent:Fn.persistent,width:{type:[String,Number],default:150}}),kte={confirm:t=>t instanceof MouseEvent,cancel:t=>t instanceof MouseEvent},Rte=de({name:"ElPopconfirm"}),Pte=de({...Rte,props:Ate,emits:kte,setup(t,{emit:e}){const n=t,{t:i}=Pt(),r=Ue("popconfirm"),a=q(),d=()=>{var u,f;(f=(u=a.value)==null?void 0:u.onClose)==null||f.call(u)},s=R(()=>({width:bn(n.width)})),o=u=>{e("confirm",u),d()},c=u=>{e("cancel",u),d()},h=R(()=>n.confirmButtonText||i("el.popconfirm.confirmButtonText")),l=R(()=>n.cancelButtonText||i("el.popconfirm.cancelButtonText"));return(u,f)=>(I(),ke(y(mi),St({ref_key:"tooltipRef",ref:a,trigger:"click",effect:"light"},u.$attrs,{"popper-class":`${y(r).namespace.value}-popover`,"popper-style":y(s),teleported:u.teleported,"fallback-placements":["bottom","top","right","left"],"hide-after":u.hideAfter,persistent:u.persistent}),{content:ve(()=>[ae("div",{class:B(y(r).b())},[ae("div",{class:B(y(r).e("main"))},[!u.hideIcon&&u.icon?(I(),ke(y(tt),{key:0,class:B(y(r).e("icon")),style:nt({color:u.iconColor})},{default:ve(()=>[(I(),ke(Ct(u.icon)))]),_:1},8,["class","style"])):Te("v-if",!0),Tt(" "+$e(u.title),1)],2),ae("div",{class:B(y(r).e("action"))},[ue(y(jn),{size:"small",type:u.cancelButtonType==="text"?"":u.cancelButtonType,text:u.cancelButtonType==="text",onClick:c},{default:ve(()=>[Tt($e(y(l)),1)]),_:1},8,["type","text"]),ue(y(jn),{size:"small",type:u.confirmButtonType==="text"?"":u.confirmButtonType,text:u.confirmButtonType==="text",onClick:o},{default:ve(()=>[Tt($e(y(h)),1)]),_:1},8,["type","text"])],2)],2)]),default:ve(()=>[u.$slots.reference?Le(u.$slots,"reference",{key:0}):Te("v-if",!0)]),_:3},16,["popper-class","popper-style","teleported","hide-after","persistent"]))}});var Ote=je(Pte,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popconfirm/src/popconfirm.vue"]]);const Lte=yt(Ote),Ite=Xe({trigger:fu.trigger,placement:lf.placement,disabled:fu.disabled,visible:Fn.visible,transition:Fn.transition,popperOptions:lf.popperOptions,tabindex:lf.tabindex,content:Fn.content,popperStyle:Fn.popperStyle,popperClass:Fn.popperClass,enterable:{...Fn.enterable,default:!0},effect:{...Fn.effect,default:"light"},teleported:Fn.teleported,title:String,width:{type:[String,Number],default:150},offset:{type:Number,default:void 0},showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0},showArrow:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},"onUpdate:visible":{type:Function}}),Dte={"update:visible":t=>xn(t),"before-enter":()=>!0,"before-leave":()=>!0,"after-enter":()=>!0,"after-leave":()=>!0},Nte="onUpdate:visible",Fte=de({name:"ElPopover"}),Bte=de({...Fte,props:Ite,emits:Dte,setup(t,{expose:e,emit:n}){const i=t,r=R(()=>i[Nte]),a=Ue("popover"),d=q(),s=R(()=>{var p;return(p=y(d))==null?void 0:p.popperRef}),o=R(()=>[{width:bn(i.width)},i.popperStyle]),c=R(()=>[a.b(),i.popperClass,{[a.m("plain")]:!!i.content}]),h=R(()=>i.transition===`${a.namespace.value}-fade-in-linear`),l=()=>{var p;(p=d.value)==null||p.hide()},u=()=>{n("before-enter")},f=()=>{n("before-leave")},m=()=>{n("after-enter")},g=()=>{n("update:visible",!1),n("after-leave")};return e({popperRef:s,hide:l}),(p,v)=>(I(),ke(y(mi),St({ref_key:"tooltipRef",ref:d},p.$attrs,{trigger:p.trigger,placement:p.placement,disabled:p.disabled,visible:p.visible,transition:p.transition,"popper-options":p.popperOptions,tabindex:p.tabindex,content:p.content,offset:p.offset,"show-after":p.showAfter,"hide-after":p.hideAfter,"auto-close":p.autoClose,"show-arrow":p.showArrow,"aria-label":p.title,effect:p.effect,enterable:p.enterable,"popper-class":y(c),"popper-style":y(o),teleported:p.teleported,persistent:p.persistent,"gpu-acceleration":y(h),"onUpdate:visible":y(r),onBeforeShow:u,onBeforeHide:f,onShow:m,onHide:g}),{content:ve(()=>[p.title?(I(),ne("div",{key:0,class:B(y(a).e("title")),role:"title"},$e(p.title),3)):Te("v-if",!0),Le(p.$slots,"default",{},()=>[Tt($e(p.content),1)])]),default:ve(()=>[p.$slots.reference?Le(p.$slots,"reference",{key:0}):Te("v-if",!0)]),_:3},16,["trigger","placement","disabled","visible","transition","popper-options","tabindex","content","offset","show-after","hide-after","auto-close","show-arrow","aria-label","effect","enterable","popper-class","popper-style","teleported","persistent","gpu-acceleration","onUpdate:visible"]))}});var Ute=je(Bte,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popover/src/popover.vue"]]);const Nw=(t,e)=>{const n=e.arg||e.value,i=n==null?void 0:n.popperRef;i&&(i.triggerRef=t)};var Vte={mounted(t,e){Nw(t,e)},updated(t,e){Nw(t,e)}};const Hte="popover",r2=W5(Vte,Hte),zte=yt(Ute,{directive:r2}),$te=Xe({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:t=>t>=0&&t<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:{type:Boolean,default:!1},duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:Ae(String),default:"round"},textInside:{type:Boolean,default:!1},width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:Ae([String,Array,Function]),default:""},striped:Boolean,stripedFlow:Boolean,format:{type:Ae(Function),default:t=>`${t}%`}}),Wte=["aria-valuenow"],Gte={viewBox:"0 0 100 100"},jte=["d","stroke","stroke-width"],Xte=["d","stroke","opacity","stroke-linecap","stroke-width"],Kte={key:0},Yte=de({name:"ElProgress"}),qte=de({...Yte,props:$te,setup(t){const e=t,n={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},i=Ue("progress"),r=R(()=>({width:`${e.percentage}%`,animationDuration:`${e.duration}s`,backgroundColor:b(e.percentage)})),a=R(()=>(e.strokeWidth/e.width*100).toFixed(1)),d=R(()=>["circle","dashboard"].includes(e.type)?Number.parseInt(`${50-Number.parseFloat(a.value)/2}`,10):0),s=R(()=>{const _=d.value,S=e.type==="dashboard";return`
          M 50 50
          m 0 ${S?"":"-"}${_}
          a ${_} ${_} 0 1 1 0 ${S?"-":""}${_*2}
          a ${_} ${_} 0 1 1 0 ${S?"":"-"}${_*2}
          `}),o=R(()=>2*Math.PI*d.value),c=R(()=>e.type==="dashboard"?.75:1),h=R(()=>`${-1*o.value*(1-c.value)/2}px`),l=R(()=>({strokeDasharray:`${o.value*c.value}px, ${o.value}px`,strokeDashoffset:h.value})),u=R(()=>({strokeDasharray:`${o.value*c.value*(e.percentage/100)}px, ${o.value}px`,strokeDashoffset:h.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"})),f=R(()=>{let _;return e.color?_=b(e.percentage):_=n[e.status]||n.default,_}),m=R(()=>e.status==="warning"?Sh:e.type==="line"?e.status==="success"?Hv:lo:e.status==="success"?Du:yr),g=R(()=>e.type==="line"?12+e.strokeWidth*.4:e.width*.111111+2),p=R(()=>e.format(e.percentage));function v(_){const S=100/_.length;return _.map((C,x)=>ct(C)?{color:C,percentage:(x+1)*S}:C).sort((C,x)=>C.percentage-x.percentage)}const b=_=>{var S;const{color:w}=e;if(lt(w))return w(_);if(ct(w))return w;{const C=v(w);for(const x of C)if(x.percentage>_)return x.color;return(S=C[C.length-1])==null?void 0:S.color}};return(_,S)=>(I(),ne("div",{class:B([y(i).b(),y(i).m(_.type),y(i).is(_.status),{[y(i).m("without-text")]:!_.showText,[y(i).m("text-inside")]:_.textInside}]),role:"progressbar","aria-valuenow":_.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[_.type==="line"?(I(),ne("div",{key:0,class:B(y(i).b("bar"))},[ae("div",{class:B(y(i).be("bar","outer")),style:nt({height:`${_.strokeWidth}px`})},[ae("div",{class:B([y(i).be("bar","inner"),{[y(i).bem("bar","inner","indeterminate")]:_.indeterminate},{[y(i).bem("bar","inner","striped")]:_.striped},{[y(i).bem("bar","inner","striped-flow")]:_.stripedFlow}]),style:nt(y(r))},[(_.showText||_.$slots.default)&&_.textInside?(I(),ne("div",{key:0,class:B(y(i).be("bar","innerText"))},[Le(_.$slots,"default",{percentage:_.percentage},()=>[ae("span",null,$e(y(p)),1)])],2)):Te("v-if",!0)],6)],6)],2)):(I(),ne("div",{key:1,class:B(y(i).b("circle")),style:nt({height:`${_.width}px`,width:`${_.width}px`})},[(I(),ne("svg",Gte,[ae("path",{class:B(y(i).be("circle","track")),d:y(s),stroke:`var(${y(i).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-width":y(a),fill:"none",style:nt(y(l))},null,14,jte),ae("path",{class:B(y(i).be("circle","path")),d:y(s),stroke:y(f),fill:"none",opacity:_.percentage?1:0,"stroke-linecap":_.strokeLinecap,"stroke-width":y(a),style:nt(y(u))},null,14,Xte)]))],6)),(_.showText||_.$slots.default)&&!_.textInside?(I(),ne("div",{key:2,class:B(y(i).e("text")),style:nt({fontSize:`${y(g)}px`})},[Le(_.$slots,"default",{percentage:_.percentage},()=>[_.status?(I(),ke(y(tt),{key:1},{default:ve(()=>[(I(),ke(Ct(y(m))))]),_:1})):(I(),ne("span",Kte,$e(y(p)),1))])],6)):Te("v-if",!0)],10,Wte))}});var Zte=je(qte,[["__file","/home/runner/work/element-plus/element-plus/packages/components/progress/src/progress.vue"]]);const s2=yt(Zte),Jte=Xe({modelValue:{type:Number,default:0},id:{type:String,default:void 0},lowThreshold:{type:Number,default:2},highThreshold:{type:Number,default:4},max:{type:Number,default:5},colors:{type:Ae([Array,Object]),default:()=>an(["","",""])},voidColor:{type:String,default:""},disabledVoidColor:{type:String,default:""},icons:{type:Ae([Array,Object]),default:()=>[Td,Td,Td]},voidIcon:{type:Qt,default:()=>D5},disabledVoidIcon:{type:Qt,default:()=>Td},disabled:Boolean,allowHalf:Boolean,showText:Boolean,showScore:Boolean,textColor:{type:String,default:""},texts:{type:Ae(Array),default:()=>an(["Extremely bad","Disappointed","Fair","Satisfied","Surprise"])},scoreTemplate:{type:String,default:"{value}"},size:Xn,label:{type:String,default:void 0},clearable:{type:Boolean,default:!1}}),Qte={[tn]:t=>at(t),[bt]:t=>at(t)},ene=["id","aria-label","aria-labelledby","aria-valuenow","aria-valuetext","aria-valuemax"],tne=["onMousemove","onClick"],nne=de({name:"ElRate"}),ine=de({...nne,props:Jte,emits:Qte,setup(t,{expose:e,emit:n}){const i=t;function r(V,k){const F=H=>_t(H),T=Object.keys(k).map(H=>+H).filter(H=>{const N=k[H];return(F(N)?N.excluded:!1)?V<H:V<=H}).sort((H,N)=>H-N),P=k[T[0]];return F(P)&&P.value||P}const a=Je(pa,void 0),d=Je(Fr,void 0),s=En(),o=Ue("rate"),{inputId:c,isLabeledByFormItem:h}=ho(i,{formItemContext:d}),l=q(i.modelValue),u=q(-1),f=q(!0),m=R(()=>[o.b(),o.m(s.value)]),g=R(()=>i.disabled||(a==null?void 0:a.disabled)),p=R(()=>o.cssVarBlock({"void-color":i.voidColor,"disabled-void-color":i.disabledVoidColor,"fill-color":S.value})),v=R(()=>{let V="";return i.showScore?V=i.scoreTemplate.replace(/\{\s*value\s*\}/,g.value?`${i.modelValue}`:`${l.value}`):i.showText&&(V=i.texts[Math.ceil(l.value)-1]),V}),b=R(()=>i.modelValue*100-Math.floor(i.modelValue)*100),_=R(()=>Ze(i.colors)?{[i.lowThreshold]:i.colors[0],[i.highThreshold]:{value:i.colors[1],excluded:!0},[i.max]:i.colors[2]}:i.colors),S=R(()=>{const V=r(l.value,_.value);return _t(V)?"":V}),w=R(()=>{let V="";return g.value?V=`${b.value}%`:i.allowHalf&&(V="50%"),{color:S.value,width:V}}),C=R(()=>{let V=Ze(i.icons)?[...i.icons]:{...i.icons};return V=Wo(V),Ze(V)?{[i.lowThreshold]:V[0],[i.highThreshold]:{value:V[1],excluded:!0},[i.max]:V[2]}:V}),x=R(()=>r(i.modelValue,C.value)),M=R(()=>g.value?ct(i.disabledVoidIcon)?i.disabledVoidIcon:Wo(i.disabledVoidIcon):ct(i.voidIcon)?i.voidIcon:Wo(i.voidIcon)),E=R(()=>r(l.value,C.value));function A(V){const k=g.value&&b.value>0&&V-1<i.modelValue&&V>i.modelValue,F=i.allowHalf&&f.value&&V-.5<=l.value&&V>l.value;return k||F}function O(V){i.clearable&&V===i.modelValue&&(V=0),n(bt,V),i.modelValue!==V&&n("change",V)}function D(V){g.value||(i.allowHalf&&f.value?O(l.value):O(V))}function L(V){if(g.value)return;let k=l.value;const F=V.code;return F===rt.up||F===rt.right?(i.allowHalf?k+=.5:k+=1,V.stopPropagation(),V.preventDefault()):(F===rt.left||F===rt.down)&&(i.allowHalf?k-=.5:k-=1,V.stopPropagation(),V.preventDefault()),k=k<0?0:k,k=k>i.max?i.max:k,n(bt,k),n("change",k),k}function U(V,k){if(!g.value){if(i.allowHalf&&k){let F=k.target;vr(F,o.e("item"))&&(F=F.querySelector(`.${o.e("icon")}`)),(F.clientWidth===0||vr(F,o.e("decimal")))&&(F=F.parentNode),f.value=k.offsetX*2<=F.clientWidth,l.value=f.value?V-.5:V}else l.value=V;u.value=V}}function j(){g.value||(i.allowHalf&&(f.value=i.modelValue!==Math.floor(i.modelValue)),l.value=i.modelValue,u.value=-1)}return Be(()=>i.modelValue,V=>{l.value=V,f.value=i.modelValue!==Math.floor(i.modelValue)}),i.modelValue||n(bt,0),e({setCurrentValue:U,resetCurrentValue:j}),(V,k)=>{var F;return I(),ne("div",{id:y(c),class:B([y(m),y(o).is("disabled",y(g))]),role:"slider","aria-label":y(h)?void 0:V.label||"rating","aria-labelledby":y(h)?(F=y(d))==null?void 0:F.labelId:void 0,"aria-valuenow":l.value,"aria-valuetext":y(v)||void 0,"aria-valuemin":"0","aria-valuemax":V.max,tabindex:"0",style:nt(y(p)),onKeydown:L},[(I(!0),ne(Qe,null,wt(V.max,(T,P)=>(I(),ne("span",{key:P,class:B(y(o).e("item")),onMousemove:H=>U(T,H),onMouseleave:j,onClick:H=>D(T)},[ue(y(tt),{class:B([y(o).e("icon"),{hover:u.value===T},y(o).is("active",T<=l.value)])},{default:ve(()=>[A(T)?Te("v-if",!0):(I(),ne(Qe,{key:0},[pt((I(),ke(Ct(y(E)),null,null,512)),[[Dt,T<=l.value]]),pt((I(),ke(Ct(y(M)),null,null,512)),[[Dt,!(T<=l.value)]])],64)),A(T)?(I(),ke(y(tt),{key:1,style:nt(y(w)),class:B([y(o).e("icon"),y(o).e("decimal")])},{default:ve(()=>[(I(),ke(Ct(y(x))))]),_:1},8,["style","class"])):Te("v-if",!0)]),_:2},1032,["class"])],42,tne))),128)),V.showText||V.showScore?(I(),ne("span",{key:0,class:B(y(o).e("text"))},$e(y(v)),3)):Te("v-if",!0)],46,ene)}}});var rne=je(ine,[["__file","/home/runner/work/element-plus/element-plus/packages/components/rate/src/rate.vue"]]);const sne=yt(rne),ja={success:"icon-success",warning:"icon-warning",error:"icon-error",info:"icon-info"},Fw={[ja.success]:X$,[ja.warning]:Sh,[ja.error]:zv,[ja.info]:$v},one=Xe({title:{type:String,default:""},subTitle:{type:String,default:""},icon:{type:String,values:["success","warning","info","error"],default:"info"}}),ane=de({name:"ElResult"}),lne=de({...ane,props:one,setup(t){const e=t,n=Ue("result"),i=R(()=>{const r=e.icon,a=r&&ja[r]?ja[r]:"icon-info",d=Fw[a]||Fw["icon-info"];return{class:a,component:d}});return(r,a)=>(I(),ne("div",{class:B(y(n).b())},[ae("div",{class:B(y(n).e("icon"))},[Le(r.$slots,"icon",{},()=>[y(i).component?(I(),ke(Ct(y(i).component),{key:0,class:B(y(i).class)},null,8,["class"])):Te("v-if",!0)])],2),r.title||r.$slots.title?(I(),ne("div",{key:0,class:B(y(n).e("title"))},[Le(r.$slots,"title",{},()=>[ae("p",null,$e(r.title),1)])],2)):Te("v-if",!0),r.subTitle||r.$slots["sub-title"]?(I(),ne("div",{key:1,class:B(y(n).e("subtitle"))},[Le(r.$slots,"sub-title",{},()=>[ae("p",null,$e(r.subTitle),1)])],2)):Te("v-if",!0),r.$slots.extra?(I(),ne("div",{key:2,class:B(y(n).e("extra"))},[Le(r.$slots,"extra")],2)):Te("v-if",!0)],2))}});var cne=je(lne,[["__file","/home/runner/work/element-plus/element-plus/packages/components/result/src/result.vue"]]);const une=yt(cne);var Bw=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function dne(t,e){return!!(t===e||Bw(t)&&Bw(e))}function fne(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!dne(t[n],e[n]))return!1;return!0}function hne(t,e){e===void 0&&(e=fne);var n=null;function i(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];if(n&&n.lastThis===this&&e(r,n.lastArgs))return n.lastResult;var d=t.apply(this,r);return n={lastResult:d,lastArgs:r,lastThis:this},d}return i.clear=function(){n=null},i}const o2=()=>{const e=vt().proxy.$props;return R(()=>{const n=(i,r,a)=>({});return e.perfMode?vh(n):hne(n)})},hg=50,Uf="itemRendered",Vf="scroll",Xa="forward",Hf="backward",Wi="auto",Fh="smart",mu="start",kr="center",gu="end",Dl="horizontal",M0="vertical",pne="ltr",ll="rtl",vu="negative",A0="positive-ascending",k0="positive-descending",mne={[Dl]:"left",[M0]:"top"},gne=20,vne={[Dl]:"deltaX",[M0]:"deltaY"},yne=({atEndEdge:t,atStartEdge:e,layout:n},i)=>{let r,a=0;const d=o=>o<0&&e.value||o>0&&t.value;return{hasReachedEdge:d,onWheel:o=>{Th(r);const c=o[vne[n.value]];d(a)&&d(a+c)||(a+=c,Mx()||o.preventDefault(),r=ou(()=>{i(a),a=0}))}}},pg=_r({type:Ae([Number,Function]),required:!0}),mg=_r({type:Number}),gg=_r({type:Number,default:2}),bne=_r({type:String,values:["ltr","rtl"],default:"ltr"}),vg=_r({type:Number,default:0}),zf=_r({type:Number,required:!0}),a2=_r({type:String,values:["horizontal","vertical"],default:M0}),l2=Xe({className:{type:String,default:""},containerElement:{type:Ae([String,Object]),default:"div"},data:{type:Ae(Array),default:()=>an([])},direction:bne,height:{type:[String,Number],required:!0},innerElement:{type:[String,Object],default:"div"},style:{type:Ae([Object,String,Array])},useIsScrolling:{type:Boolean,default:!1},width:{type:[Number,String],required:!1},perfMode:{type:Boolean,default:!0},scrollbarAlwaysOn:{type:Boolean,default:!1}}),c2=Xe({cache:gg,estimatedItemSize:mg,layout:a2,initScrollOffset:vg,total:zf,itemSize:pg,...l2}),yg={type:Number,default:6},u2={type:Number,default:0},d2={type:Number,default:2},Yo=Xe({columnCache:gg,columnWidth:pg,estimatedColumnWidth:mg,estimatedRowHeight:mg,initScrollLeft:vg,initScrollTop:vg,itemKey:{type:Ae(Function),default:({columnIndex:t,rowIndex:e})=>`${e}:${t}`},rowCache:gg,rowHeight:pg,totalColumn:zf,totalRow:zf,hScrollbarSize:yg,vScrollbarSize:yg,scrollbarStartGap:u2,scrollbarEndGap:d2,role:String,...l2}),f2=Xe({alwaysOn:Boolean,class:String,layout:a2,total:zf,ratio:{type:Number,required:!0},clientSize:{type:Number,required:!0},scrollFrom:{type:Number,required:!0},scrollbarSize:yg,startGap:u2,endGap:d2,visible:Boolean}),Uo=(t,e)=>t<e?Xa:Hf,yu=t=>t===pne||t===ll||t===Dl,Uw=t=>t===ll;let Fa=null;function $f(t=!1){if(Fa===null||t){const e=document.createElement("div"),n=e.style;n.width="50px",n.height="50px",n.overflow="scroll",n.direction="rtl";const i=document.createElement("div"),r=i.style;return r.width="100px",r.height="100px",e.appendChild(i),document.body.appendChild(e),e.scrollLeft>0?Fa=k0:(e.scrollLeft=1,e.scrollLeft===0?Fa=vu:Fa=A0),document.body.removeChild(e),Fa}return Fa}function _ne({move:t,size:e,bar:n},i){const r={},a=`translate${n.axis}(${t}px)`;return r[n.size]=e,r.transform=a,r.msTransform=a,r.webkitTransform=a,i==="horizontal"?r.height="100%":r.width="100%",r}const bg=de({name:"ElVirtualScrollBar",props:f2,emits:["scroll","start-move","stop-move"],setup(t,{emit:e}){const n=R(()=>t.startGap+t.endGap),i=Ue("virtual-scrollbar"),r=Ue("scrollbar"),a=q(),d=q();let s=null,o=null;const c=Ft({isDragging:!1,traveled:0}),h=R(()=>uE[t.layout]),l=R(()=>t.clientSize-y(n)),u=R(()=>({position:"absolute",width:`${Dl===t.layout?l.value:t.scrollbarSize}px`,height:`${Dl===t.layout?t.scrollbarSize:l.value}px`,[mne[t.layout]]:"2px",right:"2px",bottom:"2px",borderRadius:"4px"})),f=R(()=>{const C=t.ratio,x=t.clientSize;if(C>=100)return Number.POSITIVE_INFINITY;if(C>=50)return C*x/100;const M=x/3;return Math.floor(Math.min(Math.max(C*x,gne),M))}),m=R(()=>{if(!Number.isFinite(f.value))return{display:"none"};const C=`${f.value}px`;return _ne({bar:h.value,size:C,move:c.traveled},t.layout)}),g=R(()=>Math.floor(t.clientSize-f.value-y(n))),p=()=>{window.addEventListener("mousemove",S),window.addEventListener("mouseup",_);const C=y(d);C&&(o=document.onselectstart,document.onselectstart=()=>!1,C.addEventListener("touchmove",S),C.addEventListener("touchend",_))},v=()=>{window.removeEventListener("mousemove",S),window.removeEventListener("mouseup",_),document.onselectstart=o,o=null;const C=y(d);C&&(C.removeEventListener("touchmove",S),C.removeEventListener("touchend",_))},b=C=>{C.stopImmediatePropagation(),!(C.ctrlKey||[1,2].includes(C.button))&&(c.isDragging=!0,c[h.value.axis]=C.currentTarget[h.value.offset]-(C[h.value.client]-C.currentTarget.getBoundingClientRect()[h.value.direction]),e("start-move"),p())},_=()=>{c.isDragging=!1,c[h.value.axis]=0,e("stop-move"),v()},S=C=>{const{isDragging:x}=c;if(!x||!d.value||!a.value)return;const M=c[h.value.axis];if(!M)return;Th(s);const E=(a.value.getBoundingClientRect()[h.value.direction]-C[h.value.client])*-1,A=d.value[h.value.offset]-M,O=E-A;s=ou(()=>{c.traveled=Math.max(t.startGap,Math.min(O,g.value)),e("scroll",O,g.value)})},w=C=>{const x=Math.abs(C.target.getBoundingClientRect()[h.value.direction]-C[h.value.client]),M=d.value[h.value.offset]/2,E=x-M;c.traveled=Math.max(0,Math.min(E,g.value)),e("scroll",E,g.value)};return Be(()=>t.scrollFrom,C=>{c.isDragging||(c.traveled=Math.ceil(C*g.value))}),rn(()=>{v()}),()=>st("div",{role:"presentation",ref:a,class:[i.b(),t.class,(t.alwaysOn||c.isDragging)&&"always-on"],style:u.value,onMousedown:ot(w,["stop","prevent"]),onTouchstartPrevent:b},st("div",{ref:d,class:r.e("thumb"),style:m.value,onMousedown:b},[]))}}),h2=({name:t,getOffset:e,getItemSize:n,getItemOffset:i,getEstimatedTotalSize:r,getStartIndexForOffset:a,getStopIndexForStartIndex:d,initCache:s,clearCache:o,validateProps:c})=>de({name:t??"ElVirtualList",props:c2,emits:[Uf,Vf],setup(h,{emit:l,expose:u}){c(h);const f=vt(),m=Ue("vl"),g=q(s(h,f)),p=o2(),v=q(),b=q(),_=q(),S=q({isScrolling:!1,scrollDir:"forward",scrollOffset:at(h.initScrollOffset)?h.initScrollOffset:0,updateRequested:!1,isScrollbarDragging:!1,scrollbarAlwaysOn:h.scrollbarAlwaysOn}),w=R(()=>{const{total:G,cache:$}=h,{isScrolling:z,scrollDir:Z,scrollOffset:W}=y(S);if(G===0)return[0,0,0,0];const te=a(h,W,y(g)),ie=d(h,te,W,y(g)),re=!z||Z===Hf?Math.max(1,$):1,_e=!z||Z===Xa?Math.max(1,$):1;return[Math.max(0,te-re),Math.max(0,Math.min(G-1,ie+_e)),te,ie]}),C=R(()=>r(h,y(g))),x=R(()=>yu(h.layout)),M=R(()=>[{position:"relative",[`overflow-${x.value?"x":"y"}`]:"scroll",WebkitOverflowScrolling:"touch",willChange:"transform"},{direction:h.direction,height:at(h.height)?`${h.height}px`:h.height,width:at(h.width)?`${h.width}px`:h.width},h.style]),E=R(()=>{const G=y(C),$=y(x);return{height:$?"100%":`${G}px`,pointerEvents:y(S).isScrolling?"none":void 0,width:$?`${G}px`:"100%"}}),A=R(()=>x.value?h.width:h.height),{onWheel:O}=yne({atStartEdge:R(()=>S.value.scrollOffset<=0),atEndEdge:R(()=>S.value.scrollOffset>=C.value),layout:R(()=>h.layout)},G=>{var $,z;(z=($=_.value).onMouseUp)==null||z.call($),k(Math.min(S.value.scrollOffset+G,C.value-A.value))}),D=()=>{const{total:G}=h;if(G>0){const[W,te,ie,re]=y(w);l(Uf,W,te,ie,re)}const{scrollDir:$,scrollOffset:z,updateRequested:Z}=y(S);l(Vf,$,z,Z)},L=G=>{const{clientHeight:$,scrollHeight:z,scrollTop:Z}=G.currentTarget,W=y(S);if(W.scrollOffset===Z)return;const te=Math.max(0,Math.min(Z,z-$));S.value={...W,isScrolling:!0,scrollDir:Uo(W.scrollOffset,te),scrollOffset:te,updateRequested:!1},et(P)},U=G=>{const{clientWidth:$,scrollLeft:z,scrollWidth:Z}=G.currentTarget,W=y(S);if(W.scrollOffset===z)return;const{direction:te}=h;let ie=z;if(te===ll)switch($f()){case vu:{ie=-z;break}case k0:{ie=Z-$-z;break}}ie=Math.max(0,Math.min(ie,Z-$)),S.value={...W,isScrolling:!0,scrollDir:Uo(W.scrollOffset,ie),scrollOffset:ie,updateRequested:!1},et(P)},j=G=>{y(x)?U(G):L(G),D()},V=(G,$)=>{const z=(C.value-A.value)/$*G;k(Math.min(C.value-A.value,z))},k=G=>{G=Math.max(G,0),G!==y(S).scrollOffset&&(S.value={...y(S),scrollOffset:G,scrollDir:Uo(y(S).scrollOffset,G),updateRequested:!0},et(P))},F=(G,$=Wi)=>{const{scrollOffset:z}=y(S);G=Math.max(0,Math.min(G,h.total-1)),k(e(h,G,$,z,y(g)))},T=G=>{const{direction:$,itemSize:z,layout:Z}=h,W=p.value(o&&z,o&&Z,o&&$);let te;if(Mt(W,String(G)))te=W[G];else{const ie=i(h,G,y(g)),re=n(h,G,y(g)),_e=y(x),Pe=$===ll,K=_e?ie:0;W[G]=te={position:"absolute",left:Pe?void 0:`${K}px`,right:Pe?`${K}px`:void 0,top:_e?0:`${ie}px`,height:_e?"100%":`${re}px`,width:_e?`${re}px`:"100%"}}return te},P=()=>{S.value.isScrolling=!1,et(()=>{p.value(-1,null,null)})},H=()=>{const G=v.value;G&&(G.scrollTop=0)};mt(()=>{if(!kt)return;const{initScrollOffset:G}=h,$=y(v);at(G)&&$&&(y(x)?$.scrollLeft=G:$.scrollTop=G),D()}),vs(()=>{const{direction:G,layout:$}=h,{scrollOffset:z,updateRequested:Z}=y(S),W=y(v);if(Z&&W)if($===Dl)if(G===ll)switch($f()){case vu:{W.scrollLeft=-z;break}case A0:{W.scrollLeft=z;break}default:{const{clientWidth:te,scrollWidth:ie}=W;W.scrollLeft=ie-te-z;break}}else W.scrollLeft=z;else W.scrollTop=z});const N={ns:m,clientSize:A,estimatedTotalSize:C,windowStyle:M,windowRef:v,innerRef:b,innerStyle:E,itemsToRender:w,scrollbarRef:_,states:S,getItemStyle:T,onScroll:j,onScrollbarScroll:V,onWheel:O,scrollTo:k,scrollToItem:F,resetScrollTop:H};return u({windowRef:v,innerRef:b,getItemStyleCache:p,scrollTo:k,scrollToItem:F,resetScrollTop:H,states:S}),N},render(h){var l;const{$slots:u,className:f,clientSize:m,containerElement:g,data:p,getItemStyle:v,innerElement:b,itemsToRender:_,innerStyle:S,layout:w,total:C,onScroll:x,onScrollbarScroll:M,onWheel:E,states:A,useIsScrolling:O,windowStyle:D,ns:L}=h,[U,j]=_,V=Ct(g),k=Ct(b),F=[];if(C>0)for(let N=U;N<=j;N++)F.push((l=u.default)==null?void 0:l.call(u,{data:p,key:N,index:N,isScrolling:O?A.isScrolling:void 0,style:v(N)}));const T=[st(k,{style:S,ref:"innerRef"},ct(k)?F:{default:()=>F})],P=st(bg,{ref:"scrollbarRef",clientSize:m,layout:w,onScroll:M,ratio:m*100/this.estimatedTotalSize,scrollFrom:A.scrollOffset/(this.estimatedTotalSize-m),total:C}),H=st(V,{class:[L.e("window"),f],style:D,onScroll:x,onWheel:E,ref:"windowRef",key:0},ct(V)?[T]:{default:()=>[T]});return st("div",{key:0,class:[L.e("wrapper"),A.scrollbarAlwaysOn?"always-on":""]},[H,P])}}),p2=h2({name:"ElFixedSizeList",getItemOffset:({itemSize:t},e)=>e*t,getItemSize:({itemSize:t})=>t,getEstimatedTotalSize:({total:t,itemSize:e})=>e*t,getOffset:({height:t,total:e,itemSize:n,layout:i,width:r},a,d,s)=>{const o=yu(i)?r:t,c=Math.max(0,e*n-o),h=Math.min(c,a*n),l=Math.max(0,(a+1)*n-o);switch(d===Fh&&(s>=l-o&&s<=h+o?d=Wi:d=kr),d){case mu:return h;case gu:return l;case kr:{const u=Math.round(l+(h-l)/2);return u<Math.ceil(o/2)?0:u>c+Math.floor(o/2)?c:u}case Wi:default:return s>=l&&s<=h?s:s<l?l:h}},getStartIndexForOffset:({total:t,itemSize:e},n)=>Math.max(0,Math.min(t-1,Math.floor(n/e))),getStopIndexForStartIndex:({height:t,total:e,itemSize:n,layout:i,width:r},a,d)=>{const s=a*n,o=yu(i)?r:t,c=Math.ceil((o+d-s)/n);return Math.max(0,Math.min(e-1,a+c-1))},initCache(){},clearCache:!0,validateProps(){}}),Ka=(t,e,n)=>{const{itemSize:i}=t,{items:r,lastVisitedIndex:a}=n;if(e>a){let d=0;if(a>=0){const s=r[a];d=s.offset+s.size}for(let s=a+1;s<=e;s++){const o=i(s);r[s]={offset:d,size:o},d+=o}n.lastVisitedIndex=e}return r[e]},Sne=(t,e,n)=>{const{items:i,lastVisitedIndex:r}=e;return(r>0?i[r].offset:0)>=n?m2(t,e,0,r,n):wne(t,e,Math.max(0,r),n)},m2=(t,e,n,i,r)=>{for(;n<=i;){const a=n+Math.floor((i-n)/2),d=Ka(t,a,e).offset;if(d===r)return a;d<r?n=a+1:d>r&&(i=a-1)}return Math.max(0,n-1)},wne=(t,e,n,i)=>{const{total:r}=t;let a=1;for(;n<r&&Ka(t,n,e).offset<i;)n+=a,a*=2;return m2(t,e,Math.floor(n/2),Math.min(n,r-1),i)},Vw=({total:t},{items:e,estimatedItemSize:n,lastVisitedIndex:i})=>{let r=0;if(i>=t&&(i=t-1),i>=0){const s=e[i];r=s.offset+s.size}const d=(t-i-1)*n;return r+d},Cne=h2({name:"ElDynamicSizeList",getItemOffset:(t,e,n)=>Ka(t,e,n).offset,getItemSize:(t,e,{items:n})=>n[e].size,getEstimatedTotalSize:Vw,getOffset:(t,e,n,i,r)=>{const{height:a,layout:d,width:s}=t,o=yu(d)?s:a,c=Ka(t,e,r),h=Vw(t,r),l=Math.max(0,Math.min(h-o,c.offset)),u=Math.max(0,c.offset-o+c.size);switch(n===Fh&&(i>=u-o&&i<=l+o?n=Wi:n=kr),n){case mu:return l;case gu:return u;case kr:return Math.round(u+(l-u)/2);case Wi:default:return i>=u&&i<=l?i:i<u?u:l}},getStartIndexForOffset:(t,e,n)=>Sne(t,n,e),getStopIndexForStartIndex:(t,e,n,i)=>{const{height:r,total:a,layout:d,width:s}=t,o=yu(d)?s:r,c=Ka(t,e,i),h=n+o;let l=c.offset+c.size,u=e;for(;u<a-1&&l<h;)u++,l+=Ka(t,u,i).size;return u},initCache({estimatedItemSize:t=hg},e){const n={items:{},estimatedItemSize:t,lastVisitedIndex:-1};return n.clearCacheAfterIndex=(i,r=!0)=>{var a,d;n.lastVisitedIndex=Math.min(n.lastVisitedIndex,i-1),(a=e.exposed)==null||a.getItemStyleCache(-1),r&&((d=e.proxy)==null||d.$forceUpdate())},n},clearCache:!1,validateProps:({itemSize:t})=>{}}),xne=({atXEndEdge:t,atXStartEdge:e,atYEndEdge:n,atYStartEdge:i},r)=>{let a=null,d=0,s=0;const o=(h,l)=>{const u=h<=0&&e.value||h>=0&&t.value,f=l<=0&&i.value||l>=0&&n.value;return u&&f};return{hasReachedEdge:o,onWheel:h=>{Th(a);let l=h.deltaX,u=h.deltaY;Math.abs(l)>Math.abs(u)?u=0:l=0,h.shiftKey&&u!==0&&(l=u,u=0),!(o(d,s)&&o(d+l,s+u))&&(d+=l,s+=u,h.preventDefault(),a=ou(()=>{r(d,s),d=0,s=0}))}}},g2=({name:t,clearCache:e,getColumnPosition:n,getColumnStartIndexForOffset:i,getColumnStopIndexForStartIndex:r,getEstimatedTotalHeight:a,getEstimatedTotalWidth:d,getColumnOffset:s,getRowOffset:o,getRowPosition:c,getRowStartIndexForOffset:h,getRowStopIndexForStartIndex:l,initCache:u,injectToInstance:f,validateProps:m})=>de({name:t??"ElVirtualList",props:Yo,emits:[Uf,Vf],setup(g,{emit:p,expose:v,slots:b}){const _=Ue("vl");m(g);const S=vt(),w=q(u(g,S));f==null||f(S,w);const C=q(),x=q(),M=q(),E=q(null),A=q({isScrolling:!1,scrollLeft:at(g.initScrollLeft)?g.initScrollLeft:0,scrollTop:at(g.initScrollTop)?g.initScrollTop:0,updateRequested:!1,xAxisScrollDir:Xa,yAxisScrollDir:Xa}),O=o2(),D=R(()=>Number.parseInt(`${g.height}`,10)),L=R(()=>Number.parseInt(`${g.width}`,10)),U=R(()=>{const{totalColumn:se,totalRow:me,columnCache:be}=g,{isScrolling:Me,xAxisScrollDir:Ee,scrollLeft:X}=y(A);if(se===0||me===0)return[0,0,0,0];const Y=i(g,X,y(w)),le=r(g,Y,X,y(w)),Ce=!Me||Ee===Hf?Math.max(1,be):1,Re=!Me||Ee===Xa?Math.max(1,be):1;return[Math.max(0,Y-Ce),Math.max(0,Math.min(se-1,le+Re)),Y,le]}),j=R(()=>{const{totalColumn:se,totalRow:me,rowCache:be}=g,{isScrolling:Me,yAxisScrollDir:Ee,scrollTop:X}=y(A);if(se===0||me===0)return[0,0,0,0];const Y=h(g,X,y(w)),le=l(g,Y,X,y(w)),Ce=!Me||Ee===Hf?Math.max(1,be):1,Re=!Me||Ee===Xa?Math.max(1,be):1;return[Math.max(0,Y-Ce),Math.max(0,Math.min(me-1,le+Re)),Y,le]}),V=R(()=>a(g,y(w))),k=R(()=>d(g,y(w))),F=R(()=>{var se;return[{position:"relative",overflow:"hidden",WebkitOverflowScrolling:"touch",willChange:"transform"},{direction:g.direction,height:at(g.height)?`${g.height}px`:g.height,width:at(g.width)?`${g.width}px`:g.width},(se=g.style)!=null?se:{}]}),T=R(()=>{const se=`${y(k)}px`;return{height:`${y(V)}px`,pointerEvents:y(A).isScrolling?"none":void 0,width:se}}),P=()=>{const{totalColumn:se,totalRow:me}=g;if(se>0&&me>0){const[le,Ce,Re,Ne]=y(U),[he,pe,ee,oe]=y(j);p(Uf,{columnCacheStart:le,columnCacheEnd:Ce,rowCacheStart:he,rowCacheEnd:pe,columnVisibleStart:Re,columnVisibleEnd:Ne,rowVisibleStart:ee,rowVisibleEnd:oe})}const{scrollLeft:be,scrollTop:Me,updateRequested:Ee,xAxisScrollDir:X,yAxisScrollDir:Y}=y(A);p(Vf,{xAxisScrollDir:X,scrollLeft:be,yAxisScrollDir:Y,scrollTop:Me,updateRequested:Ee})},H=se=>{const{clientHeight:me,clientWidth:be,scrollHeight:Me,scrollLeft:Ee,scrollTop:X,scrollWidth:Y}=se.currentTarget,le=y(A);if(le.scrollTop===X&&le.scrollLeft===Ee)return;let Ce=Ee;if(Uw(g.direction))switch($f()){case vu:Ce=-Ee;break;case k0:Ce=Y-be-Ee;break}A.value={...le,isScrolling:!0,scrollLeft:Ce,scrollTop:Math.max(0,Math.min(X,Me-me)),updateRequested:!0,xAxisScrollDir:Uo(le.scrollLeft,Ce),yAxisScrollDir:Uo(le.scrollTop,X)},et(()=>te()),ie(),P()},N=(se,me)=>{const be=y(D),Me=(V.value-be)/me*se;z({scrollTop:Math.min(V.value-be,Me)})},G=(se,me)=>{const be=y(L),Me=(k.value-be)/me*se;z({scrollLeft:Math.min(k.value-be,Me)})},{onWheel:$}=xne({atXStartEdge:R(()=>A.value.scrollLeft<=0),atXEndEdge:R(()=>A.value.scrollLeft>=k.value-y(L)),atYStartEdge:R(()=>A.value.scrollTop<=0),atYEndEdge:R(()=>A.value.scrollTop>=V.value-y(D))},(se,me)=>{var be,Me,Ee,X;(Me=(be=x.value)==null?void 0:be.onMouseUp)==null||Me.call(be),(X=(Ee=x.value)==null?void 0:Ee.onMouseUp)==null||X.call(Ee);const Y=y(L),le=y(D);z({scrollLeft:Math.min(A.value.scrollLeft+se,k.value-Y),scrollTop:Math.min(A.value.scrollTop+me,V.value-le)})}),z=({scrollLeft:se=A.value.scrollLeft,scrollTop:me=A.value.scrollTop})=>{se=Math.max(se,0),me=Math.max(me,0);const be=y(A);me===be.scrollTop&&se===be.scrollLeft||(A.value={...be,xAxisScrollDir:Uo(be.scrollLeft,se),yAxisScrollDir:Uo(be.scrollTop,me),scrollLeft:se,scrollTop:me,updateRequested:!0},et(()=>te()),ie(),P())},Z=(se=0,me=0,be=Wi)=>{const Me=y(A);me=Math.max(0,Math.min(me,g.totalColumn-1)),se=Math.max(0,Math.min(se,g.totalRow-1));const Ee=dT(_.namespace.value),X=y(w),Y=a(g,X),le=d(g,X);z({scrollLeft:s(g,me,be,Me.scrollLeft,X,le>g.width?Ee:0),scrollTop:o(g,se,be,Me.scrollTop,X,Y>g.height?Ee:0)})},W=(se,me)=>{const{columnWidth:be,direction:Me,rowHeight:Ee}=g,X=O.value(e&&be,e&&Ee,e&&Me),Y=`${se},${me}`;if(Mt(X,Y))return X[Y];{const[,le]=n(g,me,y(w)),Ce=y(w),Re=Uw(Me),[Ne,he]=c(g,se,Ce),[pe]=n(g,me,Ce);return X[Y]={position:"absolute",left:Re?void 0:`${le}px`,right:Re?`${le}px`:void 0,top:`${he}px`,height:`${Ne}px`,width:`${pe}px`},X[Y]}},te=()=>{A.value.isScrolling=!1,et(()=>{O.value(-1,null,null)})};mt(()=>{if(!kt)return;const{initScrollLeft:se,initScrollTop:me}=g,be=y(C);be&&(at(se)&&(be.scrollLeft=se),at(me)&&(be.scrollTop=me)),P()});const ie=()=>{const{direction:se}=g,{scrollLeft:me,scrollTop:be,updateRequested:Me}=y(A),Ee=y(C);if(Me&&Ee){if(se===ll)switch($f()){case vu:{Ee.scrollLeft=-me;break}case A0:{Ee.scrollLeft=me;break}default:{const{clientWidth:X,scrollWidth:Y}=Ee;Ee.scrollLeft=Y-X-me;break}}else Ee.scrollLeft=Math.max(0,me);Ee.scrollTop=Math.max(0,be)}},{resetAfterColumnIndex:re,resetAfterRowIndex:_e,resetAfter:Pe}=S.proxy;v({windowRef:C,innerRef:E,getItemStyleCache:O,scrollTo:z,scrollToItem:Z,states:A,resetAfterColumnIndex:re,resetAfterRowIndex:_e,resetAfter:Pe});const K=()=>{const{scrollbarAlwaysOn:se,scrollbarStartGap:me,scrollbarEndGap:be,totalColumn:Me,totalRow:Ee}=g,X=y(L),Y=y(D),le=y(k),Ce=y(V),{scrollLeft:Re,scrollTop:Ne}=y(A),he=st(bg,{ref:x,alwaysOn:se,startGap:me,endGap:be,class:_.e("horizontal"),clientSize:X,layout:"horizontal",onScroll:G,ratio:X*100/le,scrollFrom:Re/(le-X),total:Ee,visible:!0}),pe=st(bg,{ref:M,alwaysOn:se,startGap:me,endGap:be,class:_.e("vertical"),clientSize:Y,layout:"vertical",onScroll:N,ratio:Y*100/Ce,scrollFrom:Ne/(Ce-Y),total:Me,visible:!0});return{horizontalScrollbar:he,verticalScrollbar:pe}},Q=()=>{var se;const[me,be]=y(U),[Me,Ee]=y(j),{data:X,totalColumn:Y,totalRow:le,useIsScrolling:Ce,itemKey:Re}=g,Ne=[];if(le>0&&Y>0)for(let he=Me;he<=Ee;he++)for(let pe=me;pe<=be;pe++)Ne.push((se=b.default)==null?void 0:se.call(b,{columnIndex:pe,data:X,key:Re({columnIndex:pe,data:X,rowIndex:he}),isScrolling:Ce?y(A).isScrolling:void 0,style:W(he,pe),rowIndex:he}));return Ne},fe=()=>{const se=Ct(g.innerElement),me=Q();return[st(se,{style:y(T),ref:E},ct(se)?me:{default:()=>me})]};return()=>{const se=Ct(g.containerElement),{horizontalScrollbar:me,verticalScrollbar:be}=K(),Me=fe();return st("div",{key:0,class:_.e("wrapper"),role:g.role},[st(se,{class:g.className,style:y(F),onScroll:H,onWheel:$,ref:C},ct(se)?Me:{default:()=>Me}),me,be])}}}),Tne=g2({name:"ElFixedSizeGrid",getColumnPosition:({columnWidth:t},e)=>[t,e*t],getRowPosition:({rowHeight:t},e)=>[t,e*t],getEstimatedTotalHeight:({totalRow:t,rowHeight:e})=>e*t,getEstimatedTotalWidth:({totalColumn:t,columnWidth:e})=>e*t,getColumnOffset:({totalColumn:t,columnWidth:e,width:n},i,r,a,d,s)=>{n=Number(n);const o=Math.max(0,t*e-n),c=Math.min(o,i*e),h=Math.max(0,i*e-n+s+e);switch(r==="smart"&&(a>=h-n&&a<=c+n?r=Wi:r=kr),r){case mu:return c;case gu:return h;case kr:{const l=Math.round(h+(c-h)/2);return l<Math.ceil(n/2)?0:l>o+Math.floor(n/2)?o:l}case Wi:default:return a>=h&&a<=c?a:h>c||a<h?h:c}},getRowOffset:({rowHeight:t,height:e,totalRow:n},i,r,a,d,s)=>{e=Number(e);const o=Math.max(0,n*t-e),c=Math.min(o,i*t),h=Math.max(0,i*t-e+s+t);switch(r===Fh&&(a>=h-e&&a<=c+e?r=Wi:r=kr),r){case mu:return c;case gu:return h;case kr:{const l=Math.round(h+(c-h)/2);return l<Math.ceil(e/2)?0:l>o+Math.floor(e/2)?o:l}case Wi:default:return a>=h&&a<=c?a:h>c||a<h?h:c}},getColumnStartIndexForOffset:({columnWidth:t,totalColumn:e},n)=>Math.max(0,Math.min(e-1,Math.floor(n/t))),getColumnStopIndexForStartIndex:({columnWidth:t,totalColumn:e,width:n},i,r)=>{const a=i*t,d=Math.ceil((n+r-a)/t);return Math.max(0,Math.min(e-1,i+d-1))},getRowStartIndexForOffset:({rowHeight:t,totalRow:e},n)=>Math.max(0,Math.min(e-1,Math.floor(n/t))),getRowStopIndexForStartIndex:({rowHeight:t,totalRow:e,height:n},i,r)=>{const a=i*t,d=Math.ceil((n+r-a)/t);return Math.max(0,Math.min(e-1,i+d-1))},initCache:()=>{},clearCache:!0,validateProps:({columnWidth:t,rowHeight:e})=>{}}),{max:Wf,min:v2,floor:y2}=Math,Ene={column:"columnWidth",row:"rowHeight"},_g={column:"lastVisitedColumnIndex",row:"lastVisitedRowIndex"},es=(t,e,n,i)=>{const[r,a,d]=[n[i],t[Ene[i]],n[_g[i]]];if(e>d){let s=0;if(d>=0){const o=r[d];s=o.offset+o.size}for(let o=d+1;o<=e;o++){const c=a(o);r[o]={offset:s,size:c},s+=c}n[_g[i]]=e}return r[e]},b2=(t,e,n,i,r,a)=>{for(;n<=i;){const d=n+y2((i-n)/2),s=es(t,d,e,a).offset;if(s===r)return d;s<r?n=d+1:i=d-1}return Wf(0,n-1)},Mne=(t,e,n,i,r)=>{const a=r==="column"?t.totalColumn:t.totalRow;let d=1;for(;n<a&&es(t,n,e,r).offset<i;)n+=d,d*=2;return b2(t,e,y2(n/2),v2(n,a-1),i,r)},Hw=(t,e,n,i)=>{const[r,a]=[e[i],e[_g[i]]];return(a>0?r[a].offset:0)>=n?b2(t,e,0,a,n,i):Mne(t,e,Wf(0,a),n,i)},_2=({totalRow:t},{estimatedRowHeight:e,lastVisitedRowIndex:n,row:i})=>{let r=0;if(n>=t&&(n=t-1),n>=0){const s=i[n];r=s.offset+s.size}const d=(t-n-1)*e;return r+d},S2=({totalColumn:t},{column:e,estimatedColumnWidth:n,lastVisitedColumnIndex:i})=>{let r=0;if(i>t&&(i=t-1),i>=0){const s=e[i];r=s.offset+s.size}const d=(t-i-1)*n;return r+d},Ane={column:S2,row:_2},zw=(t,e,n,i,r,a,d)=>{const[s,o]=[a==="row"?t.height:t.width,Ane[a]],c=es(t,e,r,a),h=o(t,r),l=Wf(0,v2(h-s,c.offset)),u=Wf(0,c.offset-s+d+c.size);switch(n===Fh&&(i>=u-s&&i<=l+s?n=Wi:n=kr),n){case mu:return l;case gu:return u;case kr:return Math.round(u+(l-u)/2);case Wi:default:return i>=u&&i<=l?i:u>l||i<u?u:l}},kne=g2({name:"ElDynamicSizeGrid",getColumnPosition:(t,e,n)=>{const i=es(t,e,n,"column");return[i.size,i.offset]},getRowPosition:(t,e,n)=>{const i=es(t,e,n,"row");return[i.size,i.offset]},getColumnOffset:(t,e,n,i,r,a)=>zw(t,e,n,i,r,"column",a),getRowOffset:(t,e,n,i,r,a)=>zw(t,e,n,i,r,"row",a),getColumnStartIndexForOffset:(t,e,n)=>Hw(t,n,e,"column"),getColumnStopIndexForStartIndex:(t,e,n,i)=>{const r=es(t,e,i,"column"),a=n+t.width;let d=r.offset+r.size,s=e;for(;s<t.totalColumn-1&&d<a;)s++,d+=es(t,e,i,"column").size;return s},getEstimatedTotalHeight:_2,getEstimatedTotalWidth:S2,getRowStartIndexForOffset:(t,e,n)=>Hw(t,n,e,"row"),getRowStopIndexForStartIndex:(t,e,n,i)=>{const{totalRow:r,height:a}=t,d=es(t,e,i,"row"),s=n+a;let o=d.size+d.offset,c=e;for(;c<r-1&&o<s;)c++,o+=es(t,c,i,"row").size;return c},injectToInstance:(t,e)=>{const n=({columnIndex:a,rowIndex:d},s)=>{var o,c;s=Un(s)?!0:s,at(a)&&(e.value.lastVisitedColumnIndex=Math.min(e.value.lastVisitedColumnIndex,a-1)),at(d)&&(e.value.lastVisitedRowIndex=Math.min(e.value.lastVisitedRowIndex,d-1)),(o=t.exposed)==null||o.getItemStyleCache.value(-1,null,null),s&&((c=t.proxy)==null||c.$forceUpdate())},i=(a,d)=>{n({columnIndex:a},d)},r=(a,d)=>{n({rowIndex:a},d)};Object.assign(t.proxy,{resetAfterColumnIndex:i,resetAfterRowIndex:r,resetAfter:n})},initCache:({estimatedColumnWidth:t=hg,estimatedRowHeight:e=hg})=>({column:{},estimatedColumnWidth:t,estimatedRowHeight:e,lastVisitedColumnIndex:-1,lastVisitedRowIndex:-1,row:{}}),clearCache:!1,validateProps:({columnWidth:t,rowHeight:e})=>{}}),Rne=de({props:{item:{type:Object,required:!0},style:Object,height:Number},setup(){return{ns:Ue("select")}}});function Pne(t,e,n,i,r,a){return t.item.isTitle?(I(),ne("div",{key:0,class:B(t.ns.be("group","title")),style:nt([t.style,{lineHeight:`${t.height}px`}])},$e(t.item.label),7)):(I(),ne("div",{key:1,class:B(t.ns.be("group","split")),style:nt(t.style)},[ae("span",{class:B(t.ns.be("group","split-dash")),style:nt({top:`${t.height/2}px`})},null,6)],6))}var One=je(Rne,[["render",Pne],["__file","/home/runner/work/element-plus/element-plus/packages/components/select-v2/src/group-item.vue"]]);function Lne(t,{emit:e}){return{hoverItem:()=>{t.disabled||e("hover",t.index)},selectOptionClick:()=>{t.disabled||e("select",t.item,t.index)}}}const Ine={allowCreate:Boolean,autocomplete:{type:String,default:"none"},automaticDropdown:Boolean,clearable:Boolean,clearIcon:{type:[String,Object],default:lo},effect:{type:String,default:"light"},collapseTags:Boolean,collapseTagsTooltip:{type:Boolean,default:!1},maxCollapseTags:{type:Number,default:1},defaultFirstOption:Boolean,disabled:Boolean,estimatedOptionHeight:{type:Number,default:void 0},filterable:Boolean,filterMethod:Function,height:{type:Number,default:170},itemHeight:{type:Number,default:34},id:String,loading:Boolean,loadingText:String,label:String,modelValue:[Array,String,Number,Boolean,Object],multiple:Boolean,multipleLimit:{type:Number,default:0},name:String,noDataText:String,noMatchText:String,remoteMethod:Function,reserveKeyword:{type:Boolean,default:!0},options:{type:Array,required:!0},placeholder:{type:String},teleported:Fn.teleported,persistent:{type:Boolean,default:!0},popperClass:{type:String,default:""},popperOptions:{type:Object,default:()=>({})},remote:Boolean,size:{type:String,validator:Ch},valueKey:{type:String,default:"value"},scrollbarAlwaysOn:{type:Boolean,default:!1},validateEvent:{type:Boolean,default:!0},placement:{type:Ae(String),values:ha,default:"bottom-start"}},Dne={data:Array,disabled:Boolean,hovering:Boolean,item:Object,index:Number,style:Object,selected:Boolean,created:Boolean},Nne=de({props:Dne,emits:["select","hover"],setup(t,{emit:e}){const n=Ue("select"),{hoverItem:i,selectOptionClick:r}=Lne(t,{emit:e});return{ns:n,hoverItem:i,selectOptionClick:r}}}),Fne=["aria-selected"];function Bne(t,e,n,i,r,a){return I(),ne("li",{"aria-selected":t.selected,style:nt(t.style),class:B([t.ns.be("dropdown","option-item"),t.ns.is("selected",t.selected),t.ns.is("disabled",t.disabled),t.ns.is("created",t.created),{hover:t.hovering}]),onMouseenter:e[0]||(e[0]=(...d)=>t.hoverItem&&t.hoverItem(...d)),onClick:e[1]||(e[1]=ot((...d)=>t.selectOptionClick&&t.selectOptionClick(...d),["stop"]))},[Le(t.$slots,"default",{item:t.item,index:t.index,disabled:t.disabled},()=>[ae("span",null,$e(t.item.label),1)])],46,Fne)}var Une=je(Nne,[["render",Bne],["__file","/home/runner/work/element-plus/element-plus/packages/components/select-v2/src/option-item.vue"]]);const w2=Symbol("ElSelectV2Injection");var Vne=de({name:"ElSelectDropdown",props:{data:{type:Array,required:!0},hoveringIndex:Number,width:Number},setup(t,{slots:e,expose:n}){const i=Je(w2),r=Ue("select"),a=q([]),d=q(),s=R(()=>t.data.length);Be(()=>s.value,()=>{var M,E;(E=(M=i.popper.value).updatePopper)==null||E.call(M)});const o=R(()=>Un(i.props.estimatedOptionHeight)),c=R(()=>o.value?{itemSize:i.props.itemHeight}:{estimatedSize:i.props.estimatedOptionHeight,itemSize:M=>a.value[M]}),h=(M=[],E)=>{const{props:{valueKey:A}}=i;return _t(E)?M&&M.some(O=>on(O,A)===on(E,A)):M.includes(E)},l=(M,E)=>{if(_t(E)){const{valueKey:A}=i.props;return on(M,A)===on(E,A)}else return M===E},u=(M,E)=>{const{valueKey:A}=i.props;return i.props.multiple?h(M,on(E,A)):l(M,on(E,A))},f=(M,E)=>{const{disabled:A,multiple:O,multipleLimit:D}=i.props;return A||!E&&(O?D>0&&M.length>=D:!1)},m=M=>t.hoveringIndex===M;n({listRef:d,isSized:o,isItemDisabled:f,isItemHovering:m,isItemSelected:u,scrollToItem:M=>{const E=d.value;E&&E.scrollToItem(M)},resetScrollTop:()=>{const M=d.value;M&&M.resetScrollTop()}});const v=M=>{const{index:E,data:A,style:O}=M,D=y(o),{itemSize:L,estimatedSize:U}=y(c),{modelValue:j}=i.props,{onSelect:V,onHover:k}=i,F=A[E];if(F.type==="Group")return ue(One,{item:F,style:O,height:D?L:U},null);const T=u(j,F),P=f(j,T),H=m(E);return ue(Une,St(M,{selected:T,disabled:F.disabled||P,created:!!F.created,hovering:H,item:F,onSelect:V,onHover:k}),{default:N=>{var G;return((G=e.default)==null?void 0:G.call(e,N))||ue("span",null,[F.label])}})},{onKeyboardNavigate:b,onKeyboardSelect:_}=i,S=()=>{b("forward")},w=()=>{b("backward")},C=()=>{i.expanded=!1},x=M=>{const{code:E}=M,{tab:A,esc:O,down:D,up:L,enter:U}=rt;switch(E!==A&&(M.preventDefault(),M.stopPropagation()),E){case A:case O:{C();break}case D:{S();break}case L:{w();break}case U:{_();break}}};return()=>{var M;const{data:E,width:A}=t,{height:O,multiple:D,scrollbarAlwaysOn:L}=i.props;if(E.length===0)return ue("div",{class:r.b("dropdown"),style:{width:`${A}px`}},[(M=e.empty)==null?void 0:M.call(e)]);const U=y(o)?p2:Cne;return ue("div",{class:[r.b("dropdown"),r.is("multiple",D)]},[ue(U,St({ref:d},y(c),{className:r.be("dropdown","list"),scrollbarAlwaysOn:L,data:E,height:O,width:A,total:E.length,onKeydown:x}),{default:j=>ue(v,j,null)})])}}});function Hne(t,e){const n=q(0),i=q(null),r=R(()=>t.allowCreate&&t.filterable);function a(h){const l=u=>u.value===h;return t.options&&t.options.some(l)||e.createdOptions.some(l)}function d(h){r.value&&(t.multiple&&h.created?n.value++:i.value=h)}function s(h){if(r.value)if(h&&h.length>0&&!a(h)){const l={value:h,label:h,created:!0,disabled:!1};e.createdOptions.length>=n.value?e.createdOptions[n.value]=l:e.createdOptions.push(l)}else if(t.multiple)e.createdOptions.length=n.value;else{const l=i.value;e.createdOptions.length=0,l&&l.created&&e.createdOptions.push(l)}}function o(h){if(!r.value||!h||!h.created||h.created&&t.reserveKeyword&&e.inputValue===h.label)return;const l=e.createdOptions.findIndex(u=>u.value===h.value);~l&&(e.createdOptions.splice(l,1),n.value--)}function c(){r.value&&(e.createdOptions.length=0,n.value=0)}return{createNewOption:s,removeNewOption:o,selectNewOption:d,clearAllNewOption:c}}const zne=t=>{const e=[];return t.forEach(n=>{Ze(n.options)?(e.push({label:n.label,isTitle:!0,type:"Group"}),n.options.forEach(i=>{e.push(i)}),e.push({type:"Group"})):e.push(n)}),e};function $ne(t){const e=q(!1);return{handleCompositionStart:()=>{e.value=!0},handleCompositionUpdate:a=>{const d=a.target.value,s=d[d.length-1]||"";e.value=!xh(s)},handleCompositionEnd:a=>{e.value&&(e.value=!1,lt(t)&&t(a))}}}const $w="",Ww=11,Wne={larget:51,default:42,small:33},Gne=(t,e)=>{const{t:n}=Pt(),i=Ue("select-v2"),r=Ue("input"),{form:a,formItem:d}=gi(),s=Ft({inputValue:$w,displayInputValue:$w,calculatedWidth:0,cachedPlaceholder:"",cachedOptions:[],createdOptions:[],createdLabel:"",createdSelected:!1,currentPlaceholder:"",hoveringIndex:-1,comboBoxHovering:!1,isOnComposition:!1,isSilentBlur:!1,isComposing:!1,inputLength:20,selectWidth:200,initialInputHeight:0,previousQuery:null,previousValue:void 0,query:"",selectedLabel:"",softFocus:!1,tagInMultiLine:!1}),o=q(-1),c=q(-1),h=q(null),l=q(null),u=q(null),f=q(null),m=q(null),g=q(null),p=q(null),v=q(!1),b=R(()=>t.disabled||(a==null?void 0:a.disabled)),_=R(()=>{const De=D.value.length*34;return De>t.height?t.height:De}),S=R(()=>!Cn(t.modelValue)),w=R(()=>{const De=t.multiple?Array.isArray(t.modelValue)&&t.modelValue.length>0:S.value;return t.clearable&&!b.value&&s.comboBoxHovering&&De}),C=R(()=>t.remote&&t.filterable?"":_h),x=R(()=>C.value&&i.is("reverse",v.value)),M=R(()=>(d==null?void 0:d.validateState)||""),E=R(()=>_T[M.value]),A=R(()=>t.remote?300:0),O=R(()=>{const De=D.value;return t.loading?t.loadingText||n("el.select.loading"):t.remote&&s.inputValue===""&&De.length===0?!1:t.filterable&&s.inputValue&&De.length>0?t.noMatchText||n("el.select.noMatch"):De.length===0?t.noDataText||n("el.select.noData"):null}),D=R(()=>{const De=Ke=>{const ht=s.inputValue,zt=new RegExp(cT(ht),"i");return ht?zt.test(Ke.label||""):!0};return t.loading?[]:zne(t.options.concat(s.createdOptions).map(Ke=>{if(Ze(Ke.options)){const ht=Ke.options.filter(De);if(ht.length>0)return{...Ke,options:ht}}else if(t.remote||De(Ke))return Ke;return null}).filter(Ke=>Ke!==null))}),L=R(()=>D.value.every(De=>De.disabled)),U=En(),j=R(()=>U.value==="small"?"small":"default"),V=R(()=>{const De=g.value,Ke=j.value||"default",ht=De?Number.parseInt(getComputedStyle(De).paddingLeft):0,zt=De?Number.parseInt(getComputedStyle(De).paddingRight):0;return s.selectWidth-zt-ht-Wne[Ke]}),k=()=>{var De;c.value=((De=m.value)==null?void 0:De.offsetWidth)||200},F=R(()=>({width:`${s.calculatedWidth===0?Ww:Math.ceil(s.calculatedWidth)+Ww}px`})),T=R(()=>Ze(t.modelValue)?t.modelValue.length===0&&!s.displayInputValue:t.filterable?s.displayInputValue.length===0:!0),P=R(()=>{const De=t.placeholder||n("el.select.placeholder");return t.multiple||Cn(t.modelValue)?De:s.selectedLabel}),H=R(()=>{var De,Ke;return(Ke=(De=f.value)==null?void 0:De.popperRef)==null?void 0:Ke.contentRef}),N=R(()=>{if(t.multiple){const De=t.modelValue.length;if(t.modelValue.length>0)return D.value.findIndex(Ke=>Ke.value===t.modelValue[De-1])}else if(t.modelValue)return D.value.findIndex(De=>De.value===t.modelValue);return-1}),G=R({get(){return v.value&&O.value!==!1},set(De){v.value=De}}),$=R(()=>s.cachedOptions.slice(0,t.maxCollapseTags)),z=R(()=>s.cachedOptions.slice(t.maxCollapseTags)),{createNewOption:Z,removeNewOption:W,selectNewOption:te,clearAllNewOption:ie}=Hne(t,s),{handleCompositionStart:re,handleCompositionUpdate:_e,handleCompositionEnd:Pe}=$ne(De=>we(De)),K=()=>{var De,Ke,ht;(Ke=(De=l.value)==null?void 0:De.focus)==null||Ke.call(De),(ht=f.value)==null||ht.updatePopper()},Q=()=>{if(!t.automaticDropdown&&!b.value)return s.isComposing&&(s.softFocus=!0),et(()=>{var De,Ke;v.value=!v.value,(Ke=(De=l.value)==null?void 0:De.focus)==null||Ke.call(De)})},fe=()=>(t.filterable&&s.inputValue!==s.selectedLabel&&(s.query=s.selectedLabel),se(s.inputValue),et(()=>{Z(s.inputValue)})),ge=pi(fe,A.value),se=De=>{s.previousQuery!==De&&(s.previousQuery=De,t.filterable&&lt(t.filterMethod)?t.filterMethod(De):t.filterable&&t.remote&&lt(t.remoteMethod)&&t.remoteMethod(De))},me=De=>{wi(t.modelValue,De)||e(tn,De)},be=De=>{e(bt,De),me(De),s.previousValue=De==null?void 0:De.toString()},Me=(De=[],Ke)=>{if(!_t(Ke))return De.indexOf(Ke);const ht=t.valueKey;let zt=-1;return De.some((Zt,_n)=>on(Zt,ht)===on(Ke,ht)?(zt=_n,!0):!1),zt},Ee=De=>_t(De)?on(De,t.valueKey):De,X=De=>_t(De)?De.label:De,Y=()=>et(()=>{var De,Ke;if(!l.value)return;const ht=g.value;m.value.height=ht.offsetHeight,v.value&&O.value!==!1&&((Ke=(De=f.value)==null?void 0:De.updatePopper)==null||Ke.call(De))}),le=()=>{var De,Ke;if(Ce(),k(),(Ke=(De=f.value)==null?void 0:De.updatePopper)==null||Ke.call(De),t.multiple)return Y()},Ce=()=>{const De=g.value;De&&(s.selectWidth=De.getBoundingClientRect().width)},Re=(De,Ke,ht=!0)=>{var zt,Zt;if(t.multiple){let _n=t.modelValue.slice();const ei=Me(_n,Ee(De));ei>-1?(_n=[..._n.slice(0,ei),..._n.slice(ei+1)],s.cachedOptions.splice(ei,1),W(De)):(t.multipleLimit<=0||_n.length<t.multipleLimit)&&(_n=[..._n,Ee(De)],s.cachedOptions.push(De),te(De),ze(Ke)),be(_n),De.created&&(s.query="",se(""),s.inputLength=20),t.filterable&&!t.reserveKeyword&&((Zt=(zt=l.value).focus)==null||Zt.call(zt),ce("")),t.filterable&&(s.calculatedWidth=p.value.getBoundingClientRect().width),Y(),Ve()}else o.value=Ke,s.selectedLabel=De.label,be(Ee(De)),v.value=!1,s.isComposing=!1,s.isSilentBlur=ht,te(De),De.created||ie(),ze(Ke)},Ne=(De,Ke)=>{const{valueKey:ht}=t,zt=t.modelValue.indexOf(on(Ke,ht));if(zt>-1&&!b.value){const Zt=[...t.modelValue.slice(0,zt),...t.modelValue.slice(zt+1)];return s.cachedOptions.splice(zt,1),be(Zt),e("remove-tag",on(Ke,ht)),s.softFocus=!0,W(Ke),et(K)}De.stopPropagation()},he=De=>{const Ke=s.isComposing;s.isComposing=!0,s.softFocus?s.softFocus=!1:Ke||e("focus",De)},pe=De=>(s.softFocus=!1,et(()=>{var Ke,ht;(ht=(Ke=l.value)==null?void 0:Ke.blur)==null||ht.call(Ke),p.value&&(s.calculatedWidth=p.value.getBoundingClientRect().width),s.isSilentBlur?s.isSilentBlur=!1:s.isComposing&&e("blur",De),s.isComposing=!1})),ee=()=>{s.displayInputValue.length>0?ce(""):v.value=!1},oe=De=>{if(s.displayInputValue.length===0){De.preventDefault();const Ke=t.modelValue.slice();Ke.pop(),W(s.cachedOptions.pop()),be(Ke)}},J=()=>{let De;return Ze(t.modelValue)?De=[]:De=void 0,s.softFocus=!0,t.multiple?s.cachedOptions=[]:s.selectedLabel="",v.value=!1,be(De),e("clear"),ie(),et(K)},ce=De=>{s.displayInputValue=De,s.inputValue=De},ye=(De,Ke=void 0)=>{const ht=D.value;if(!["forward","backward"].includes(De)||b.value||ht.length<=0||L.value)return;if(!v.value)return Q();Ke===void 0&&(Ke=s.hoveringIndex);let zt=-1;De==="forward"?(zt=Ke+1,zt>=ht.length&&(zt=0)):De==="backward"&&(zt=Ke-1,(zt<0||zt>=ht.length)&&(zt=ht.length-1));const Zt=ht[zt];if(Zt.disabled||Zt.type==="Group")return ye(De,zt);ze(zt),it(zt)},Oe=()=>{if(v.value)~s.hoveringIndex&&D.value[s.hoveringIndex]&&Re(D.value[s.hoveringIndex],s.hoveringIndex,!1);else return Q()},ze=De=>{s.hoveringIndex=De},xe=()=>{s.hoveringIndex=-1},Ve=()=>{var De;const Ke=l.value;Ke&&((De=Ke.focus)==null||De.call(Ke))},we=De=>{const Ke=De.target.value;if(ce(Ke),s.displayInputValue.length>0&&!v.value&&(v.value=!0),s.calculatedWidth=p.value.getBoundingClientRect().width,t.multiple&&Y(),t.remote)ge();else return fe()},Ie=()=>(v.value=!1,pe()),Ge=()=>(s.inputValue=s.displayInputValue,et(()=>{~N.value&&(ze(N.value),it(s.hoveringIndex))})),it=De=>{u.value.scrollToItem(De)},dt=()=>{if(xe(),t.multiple)if(t.modelValue.length>0){let De=!1;s.cachedOptions.length=0,s.previousValue=t.modelValue.toString(),t.modelValue.forEach(Ke=>{const ht=D.value.findIndex(zt=>Ee(zt)===Ke);~ht&&(s.cachedOptions.push(D.value[ht]),De||ze(ht),De=!0)})}else s.cachedOptions=[],s.previousValue=void 0;else if(S.value){s.previousValue=t.modelValue;const De=D.value,Ke=De.findIndex(ht=>Ee(ht)===Ee(t.modelValue));~Ke?(s.selectedLabel=De[Ke].label,ze(Ke)):s.selectedLabel=`${t.modelValue}`}else s.selectedLabel="",s.previousValue=void 0;ie(),k()};return Be(v,De=>{var Ke,ht;e("visible-change",De),De?(ht=(Ke=f.value).update)==null||ht.call(Ke):(s.displayInputValue="",s.previousQuery=null,Z(""))}),Be(()=>t.modelValue,(De,Ke)=>{var ht;(!De||De.toString()!==s.previousValue)&&dt(),!wi(De,Ke)&&t.validateEvent&&((ht=d==null?void 0:d.validate)==null||ht.call(d,"change").catch(zt=>void 0))},{deep:!0}),Be(()=>t.options,()=>{const De=l.value;(!De||De&&document.activeElement!==De)&&dt()},{deep:!0}),Be(D,()=>et(u.value.resetScrollTop)),Be(()=>G.value,De=>{De||xe()}),mt(()=>{dt()}),Qn(m,le),{collapseTagSize:j,currentPlaceholder:P,expanded:v,emptyText:O,popupHeight:_,debounce:A,filteredOptions:D,iconComponent:C,iconReverse:x,inputWrapperStyle:F,popperSize:c,dropdownMenuVisible:G,hasModelValue:S,shouldShowPlaceholder:T,selectDisabled:b,selectSize:U,showClearBtn:w,states:s,tagMaxWidth:V,nsSelectV2:i,nsInput:r,calculatorRef:p,controlRef:h,inputRef:l,menuRef:u,popper:f,selectRef:m,selectionRef:g,popperRef:H,validateState:M,validateIcon:E,showTagList:$,collapseTagList:z,debouncedOnInputChange:ge,deleteTag:Ne,getLabel:X,getValueKey:Ee,handleBlur:pe,handleClear:J,handleClickOutside:Ie,handleDel:oe,handleEsc:ee,handleFocus:he,handleMenuEnter:Ge,handleResize:le,toggleMenu:Q,scrollTo:it,onInput:we,onKeyboardNavigate:ye,onKeyboardSelect:Oe,onSelect:Re,onHover:ze,onUpdateInputValue:ce,handleCompositionStart:re,handleCompositionEnd:Pe,handleCompositionUpdate:_e}},jne=de({name:"ElSelectV2",components:{ElSelectMenu:Vne,ElTag:hu,ElTooltip:mi,ElIcon:tt},directives:{ClickOutside:ro,ModelText:sv},props:Ine,emits:[bt,tn,"remove-tag","clear","visible-change","focus","blur"],setup(t,{emit:e}){const n=R(()=>{const{modelValue:r,multiple:a}=t,d=a?[]:void 0;return Ze(r)?a?r:d:a?d:r}),i=Gne(Ft({...Rn(t),modelValue:n}),e);return xt(w2,{props:Ft({...Rn(t),height:i.popupHeight,modelValue:n}),popper:i.popper,onSelect:i.onSelect,onHover:i.onHover,onKeyboardNavigate:i.onKeyboardNavigate,onKeyboardSelect:i.onKeyboardSelect}),{...i,modelValue:n}}}),Xne={key:0},Kne=["id","autocomplete","aria-expanded","aria-labelledby","disabled","readonly","name","unselectable"],Yne=["textContent"],qne=["id","aria-labelledby","aria-expanded","autocomplete","disabled","name","readonly","unselectable"],Zne=["textContent"];function Jne(t,e,n,i,r,a){const d=ft("el-tag"),s=ft("el-tooltip"),o=ft("el-icon"),c=ft("el-select-menu"),h=Wc("model-text"),l=Wc("click-outside");return pt((I(),ne("div",{ref:"selectRef",class:B([t.nsSelectV2.b(),t.nsSelectV2.m(t.selectSize)]),onClick:e[24]||(e[24]=ot((...u)=>t.toggleMenu&&t.toggleMenu(...u),["stop"])),onMouseenter:e[25]||(e[25]=u=>t.states.comboBoxHovering=!0),onMouseleave:e[26]||(e[26]=u=>t.states.comboBoxHovering=!1)},[ue(s,{ref:"popper",visible:t.dropdownMenuVisible,teleported:t.teleported,"popper-class":[t.nsSelectV2.e("popper"),t.popperClass],"gpu-acceleration":!1,"stop-popper-mouse-event":!1,"popper-options":t.popperOptions,"fallback-placements":["bottom-start","top-start","right","left"],effect:t.effect,placement:t.placement,pure:"",transition:`${t.nsSelectV2.namespace.value}-zoom-in-top`,trigger:"click",persistent:t.persistent,onBeforeShow:t.handleMenuEnter,onHide:e[23]||(e[23]=u=>t.states.inputValue=t.states.displayInputValue)},{default:ve(()=>[ae("div",{ref:"selectionRef",class:B([t.nsSelectV2.e("wrapper"),t.nsSelectV2.is("focused",t.states.isComposing||t.expanded),t.nsSelectV2.is("hovering",t.states.comboBoxHovering),t.nsSelectV2.is("filterable",t.filterable),t.nsSelectV2.is("disabled",t.selectDisabled)])},[t.$slots.prefix?(I(),ne("div",Xne,[Le(t.$slots,"prefix")])):Te("v-if",!0),t.multiple?(I(),ne("div",{key:1,class:B(t.nsSelectV2.e("selection"))},[t.collapseTags&&t.modelValue.length>0?(I(),ne(Qe,{key:0},[(I(!0),ne(Qe,null,wt(t.showTagList,u=>(I(),ne("div",{key:t.getValueKey(u),class:B(t.nsSelectV2.e("selected-item"))},[ue(d,{closable:!t.selectDisabled&&!(u!=null&&u.disable),size:t.collapseTagSize,type:"info","disable-transitions":"",onClose:f=>t.deleteTag(f,u)},{default:ve(()=>[ae("span",{class:B(t.nsSelectV2.e("tags-text")),style:nt({maxWidth:`${t.tagMaxWidth}px`})},$e(u==null?void 0:u.label),7)]),_:2},1032,["closable","size","onClose"])],2))),128)),ae("div",{class:B(t.nsSelectV2.e("selected-item"))},[t.modelValue.length>t.maxCollapseTags?(I(),ke(d,{key:0,closable:!1,size:t.collapseTagSize,type:"info","disable-transitions":""},{default:ve(()=>[t.collapseTagsTooltip?(I(),ke(s,{key:0,disabled:t.dropdownMenuVisible,"fallback-placements":["bottom","top","right","left"],effect:t.effect,placement:"bottom",teleported:!1},{default:ve(()=>[ae("span",{class:B(t.nsSelectV2.e("tags-text")),style:nt({maxWidth:`${t.tagMaxWidth}px`})},"+ "+$e(t.modelValue.length-t.maxCollapseTags),7)]),content:ve(()=>[ae("div",{class:B(t.nsSelectV2.e("selection"))},[(I(!0),ne(Qe,null,wt(t.collapseTagList,u=>(I(),ne("div",{key:t.getValueKey(u),class:B(t.nsSelectV2.e("selected-item"))},[ue(d,{closable:!t.selectDisabled&&!u.disabled,size:t.collapseTagSize,class:"in-tooltip",type:"info","disable-transitions":"",onClose:f=>t.deleteTag(f,u)},{default:ve(()=>[ae("span",{class:B(t.nsSelectV2.e("tags-text")),style:nt({maxWidth:`${t.tagMaxWidth}px`})},$e(t.getLabel(u)),7)]),_:2},1032,["closable","size","onClose"])],2))),128))],2)]),_:1},8,["disabled","effect"])):(I(),ne("span",{key:1,class:B(t.nsSelectV2.e("tags-text")),style:nt({maxWidth:`${t.tagMaxWidth}px`})},"+ "+$e(t.modelValue.length-t.maxCollapseTags),7))]),_:1},8,["size"])):Te("v-if",!0)],2)],64)):(I(!0),ne(Qe,{key:1},wt(t.states.cachedOptions,u=>(I(),ne("div",{key:t.getValueKey(u),class:B(t.nsSelectV2.e("selected-item"))},[ue(d,{closable:!t.selectDisabled&&!u.disabled,size:t.collapseTagSize,type:"info","disable-transitions":"",onClose:f=>t.deleteTag(f,u)},{default:ve(()=>[ae("span",{class:B(t.nsSelectV2.e("tags-text")),style:nt({maxWidth:`${t.tagMaxWidth}px`})},$e(t.getLabel(u)),7)]),_:2},1032,["closable","size","onClose"])],2))),128)),ae("div",{class:B([t.nsSelectV2.e("selected-item"),t.nsSelectV2.e("input-wrapper")]),style:nt(t.inputWrapperStyle)},[pt(ae("input",{id:t.id,ref:"inputRef",autocomplete:t.autocomplete,"aria-autocomplete":"list","aria-haspopup":"listbox",autocapitalize:"off","aria-expanded":t.expanded,"aria-labelledby":t.label,class:B([t.nsSelectV2.is(t.selectSize),t.nsSelectV2.e("combobox-input")]),disabled:t.disabled,role:"combobox",readonly:!t.filterable,spellcheck:"false",type:"text",name:t.name,unselectable:t.expanded?"on":void 0,"onUpdate:modelValue":e[0]||(e[0]=(...u)=>t.onUpdateInputValue&&t.onUpdateInputValue(...u)),onFocus:e[1]||(e[1]=(...u)=>t.handleFocus&&t.handleFocus(...u)),onBlur:e[2]||(e[2]=(...u)=>t.handleBlur&&t.handleBlur(...u)),onInput:e[3]||(e[3]=(...u)=>t.onInput&&t.onInput(...u)),onCompositionstart:e[4]||(e[4]=(...u)=>t.handleCompositionStart&&t.handleCompositionStart(...u)),onCompositionupdate:e[5]||(e[5]=(...u)=>t.handleCompositionUpdate&&t.handleCompositionUpdate(...u)),onCompositionend:e[6]||(e[6]=(...u)=>t.handleCompositionEnd&&t.handleCompositionEnd(...u)),onKeydown:[e[7]||(e[7]=Rt(ot(u=>t.onKeyboardNavigate("backward"),["stop","prevent"]),["up"])),e[8]||(e[8]=Rt(ot(u=>t.onKeyboardNavigate("forward"),["stop","prevent"]),["down"])),e[9]||(e[9]=Rt(ot((...u)=>t.onKeyboardSelect&&t.onKeyboardSelect(...u),["stop","prevent"]),["enter"])),e[10]||(e[10]=Rt(ot((...u)=>t.handleEsc&&t.handleEsc(...u),["stop","prevent"]),["esc"])),e[11]||(e[11]=Rt(ot((...u)=>t.handleDel&&t.handleDel(...u),["stop"]),["delete"]))]},null,42,Kne),[[h,t.states.displayInputValue]]),t.filterable?(I(),ne("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:B(t.nsSelectV2.e("input-calculator")),textContent:$e(t.states.displayInputValue)},null,10,Yne)):Te("v-if",!0)],6)],2)):(I(),ne(Qe,{key:2},[ae("div",{class:B([t.nsSelectV2.e("selected-item"),t.nsSelectV2.e("input-wrapper")])},[pt(ae("input",{id:t.id,ref:"inputRef","aria-autocomplete":"list","aria-haspopup":"listbox","aria-labelledby":t.label,"aria-expanded":t.expanded,autocapitalize:"off",autocomplete:t.autocomplete,class:B(t.nsSelectV2.e("combobox-input")),disabled:t.disabled,name:t.name,role:"combobox",readonly:!t.filterable,spellcheck:"false",type:"text",unselectable:t.expanded?"on":void 0,onCompositionstart:e[12]||(e[12]=(...u)=>t.handleCompositionStart&&t.handleCompositionStart(...u)),onCompositionupdate:e[13]||(e[13]=(...u)=>t.handleCompositionUpdate&&t.handleCompositionUpdate(...u)),onCompositionend:e[14]||(e[14]=(...u)=>t.handleCompositionEnd&&t.handleCompositionEnd(...u)),onFocus:e[15]||(e[15]=(...u)=>t.handleFocus&&t.handleFocus(...u)),onBlur:e[16]||(e[16]=(...u)=>t.handleBlur&&t.handleBlur(...u)),onInput:e[17]||(e[17]=(...u)=>t.onInput&&t.onInput(...u)),onKeydown:[e[18]||(e[18]=Rt(ot(u=>t.onKeyboardNavigate("backward"),["stop","prevent"]),["up"])),e[19]||(e[19]=Rt(ot(u=>t.onKeyboardNavigate("forward"),["stop","prevent"]),["down"])),e[20]||(e[20]=Rt(ot((...u)=>t.onKeyboardSelect&&t.onKeyboardSelect(...u),["stop","prevent"]),["enter"])),e[21]||(e[21]=Rt(ot((...u)=>t.handleEsc&&t.handleEsc(...u),["stop","prevent"]),["esc"]))],"onUpdate:modelValue":e[22]||(e[22]=(...u)=>t.onUpdateInputValue&&t.onUpdateInputValue(...u))},null,42,qne),[[h,t.states.displayInputValue]])],2),t.filterable?(I(),ne("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:B([t.nsSelectV2.e("selected-item"),t.nsSelectV2.e("input-calculator")]),textContent:$e(t.states.displayInputValue)},null,10,Zne)):Te("v-if",!0)],64)),t.shouldShowPlaceholder?(I(),ne("span",{key:3,class:B([t.nsSelectV2.e("placeholder"),t.nsSelectV2.is("transparent",t.multiple?t.modelValue.length===0:!t.hasModelValue)])},$e(t.currentPlaceholder),3)):Te("v-if",!0),ae("span",{class:B(t.nsSelectV2.e("suffix"))},[t.iconComponent?pt((I(),ke(o,{key:0,class:B([t.nsSelectV2.e("caret"),t.nsInput.e("icon"),t.iconReverse])},{default:ve(()=>[(I(),ke(Ct(t.iconComponent)))]),_:1},8,["class"])),[[Dt,!t.showClearBtn]]):Te("v-if",!0),t.showClearBtn&&t.clearIcon?(I(),ke(o,{key:1,class:B([t.nsSelectV2.e("caret"),t.nsInput.e("icon")]),onClick:ot(t.handleClear,["prevent","stop"])},{default:ve(()=>[(I(),ke(Ct(t.clearIcon)))]),_:1},8,["class","onClick"])):Te("v-if",!0),t.validateState&&t.validateIcon?(I(),ke(o,{key:2,class:B([t.nsInput.e("icon"),t.nsInput.e("validateIcon")])},{default:ve(()=>[(I(),ke(Ct(t.validateIcon)))]),_:1},8,["class"])):Te("v-if",!0)],2)],2)]),content:ve(()=>[ue(c,{ref:"menuRef",data:t.filteredOptions,width:t.popperSize,"hovering-index":t.states.hoveringIndex,"scrollbar-always-on":t.scrollbarAlwaysOn},{default:ve(u=>[Le(t.$slots,"default",dr(sh(u)))]),empty:ve(()=>[Le(t.$slots,"empty",{},()=>[ae("p",{class:B(t.nsSelectV2.e("empty"))},$e(t.emptyText?t.emptyText:""),3)])]),_:3},8,["data","width","hovering-index","scrollbar-always-on"])]),_:3},8,["visible","teleported","popper-class","popper-options","effect","placement","transition","persistent","onBeforeShow"])],34)),[[l,t.handleClickOutside,t.popperRef]])}var cf=je(jne,[["render",Jne],["__file","/home/runner/work/element-plus/element-plus/packages/components/select-v2/src/select.vue"]]);cf.install=t=>{t.component(cf.name,cf)};const Qne=cf,eie=Qne,tie=Xe({animated:{type:Boolean,default:!1},count:{type:Number,default:1},rows:{type:Number,default:3},loading:{type:Boolean,default:!0},throttle:{type:Number}}),nie=Xe({variant:{type:String,values:["circle","rect","h1","h3","text","caption","p","image","button"],default:"text"}}),iie=de({name:"ElSkeletonItem"}),rie=de({...iie,props:nie,setup(t){const e=Ue("skeleton");return(n,i)=>(I(),ne("div",{class:B([y(e).e("item"),y(e).e(n.variant)])},[n.variant==="image"?(I(),ke(y(v5),{key:0})):Te("v-if",!0)],2))}});var Gf=je(rie,[["__file","/home/runner/work/element-plus/element-plus/packages/components/skeleton/src/skeleton-item.vue"]]);const sie=de({name:"ElSkeleton"}),oie=de({...sie,props:tie,setup(t,{expose:e}){const n=t,i=Ue("skeleton"),r=d6(ln(n,"loading"),n.throttle);return e({uiLoading:r}),(a,d)=>y(r)?(I(),ne("div",St({key:0,class:[y(i).b(),y(i).is("animated",a.animated)]},a.$attrs),[(I(!0),ne(Qe,null,wt(a.count,s=>(I(),ne(Qe,{key:s},[a.loading?Le(a.$slots,"template",{key:s},()=>[ue(Gf,{class:B(y(i).is("first")),variant:"p"},null,8,["class"]),(I(!0),ne(Qe,null,wt(a.rows,o=>(I(),ke(Gf,{key:o,class:B([y(i).e("paragraph"),y(i).is("last",o===a.rows&&a.rows>1)]),variant:"p"},null,8,["class"]))),128))]):Te("v-if",!0)],64))),128))],16)):Le(a.$slots,"default",dr(St({key:1},a.$attrs)))}});var aie=je(oie,[["__file","/home/runner/work/element-plus/element-plus/packages/components/skeleton/src/skeleton.vue"]]);const lie=yt(aie,{SkeletonItem:Gf}),cie=mn(Gf),C2=Symbol("sliderContextKey"),uie=Xe({modelValue:{type:Ae([Number,Array]),default:0},id:{type:String,default:void 0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},showInput:Boolean,showInputControls:{type:Boolean,default:!0},size:Xn,inputSize:Xn,showStops:Boolean,showTooltip:{type:Boolean,default:!0},formatTooltip:{type:Ae(Function),default:void 0},disabled:Boolean,range:Boolean,vertical:Boolean,height:String,debounce:{type:Number,default:300},label:{type:String,default:void 0},rangeStartLabel:{type:String,default:void 0},rangeEndLabel:{type:String,default:void 0},formatValueText:{type:Ae(Function),default:void 0},tooltipClass:{type:String,default:void 0},placement:{type:String,values:ha,default:"top"},marks:{type:Ae(Object)},validateEvent:{type:Boolean,default:!0}}),em=t=>at(t)||Ze(t)&&t.every(at),die={[bt]:em,[di]:em,[tn]:em},fie=(t,e,n)=>{const i=q();return mt(async()=>{t.range?(Array.isArray(t.modelValue)?(e.firstValue=Math.max(t.min,t.modelValue[0]),e.secondValue=Math.min(t.max,t.modelValue[1])):(e.firstValue=t.min,e.secondValue=t.max),e.oldValue=[e.firstValue,e.secondValue]):(typeof t.modelValue!="number"||Number.isNaN(t.modelValue)?e.firstValue=t.min:e.firstValue=Math.min(t.max,Math.max(t.min,t.modelValue)),e.oldValue=e.firstValue),cn(window,"resize",n),await et(),n()}),{sliderWrapper:i}},hie=t=>R(()=>t.marks?Object.keys(t.marks).map(Number.parseFloat).sort((n,i)=>n-i).filter(n=>n<=t.max&&n>=t.min).map(n=>({point:n,position:(n-t.min)*100/(t.max-t.min),mark:t.marks[n]})):[]),pie=(t,e,n)=>{const{form:i,formItem:r}=gi(),a=Jt(),d=q(),s=q(),o={firstButton:d,secondButton:s},c=R(()=>t.disabled||(i==null?void 0:i.disabled)||!1),h=R(()=>Math.min(e.firstValue,e.secondValue)),l=R(()=>Math.max(e.firstValue,e.secondValue)),u=R(()=>t.range?`${100*(l.value-h.value)/(t.max-t.min)}%`:`${100*(e.firstValue-t.min)/(t.max-t.min)}%`),f=R(()=>t.range?`${100*(h.value-t.min)/(t.max-t.min)}%`:"0%"),m=R(()=>t.vertical?{height:t.height}:{}),g=R(()=>t.vertical?{height:u.value,bottom:f.value}:{width:u.value,left:f.value}),p=()=>{a.value&&(e.sliderSize=a.value[`client${t.vertical?"Height":"Width"}`])},v=O=>{const D=t.min+O*(t.max-t.min)/100;if(!t.range)return d;let L;return Math.abs(h.value-D)<Math.abs(l.value-D)?L=e.firstValue<e.secondValue?"firstButton":"secondButton":L=e.firstValue>e.secondValue?"firstButton":"secondButton",o[L]},b=O=>{const D=v(O);return D.value.setPosition(O),D},_=O=>{e.firstValue=O,w(t.range?[h.value,l.value]:O)},S=O=>{e.secondValue=O,t.range&&w([h.value,l.value])},w=O=>{n(bt,O),n(di,O)},C=async()=>{await et(),n(tn,t.range?[h.value,l.value]:t.modelValue)},x=O=>{var D,L,U,j,V,k;if(c.value||e.dragging)return;p();let F=0;if(t.vertical){const T=(U=(L=(D=O.touches)==null?void 0:D.item(0))==null?void 0:L.clientY)!=null?U:O.clientY;F=(a.value.getBoundingClientRect().bottom-T)/e.sliderSize*100}else{const T=(k=(V=(j=O.touches)==null?void 0:j.item(0))==null?void 0:V.clientX)!=null?k:O.clientX,P=a.value.getBoundingClientRect().left;F=(T-P)/e.sliderSize*100}if(!(F<0||F>100))return b(F)};return{elFormItem:r,slider:a,firstButton:d,secondButton:s,sliderDisabled:c,minValue:h,maxValue:l,runwayStyle:m,barStyle:g,resetSize:p,setPosition:b,emitChange:C,onSliderWrapperPrevent:O=>{var D,L;((D=o.firstButton.value)!=null&&D.dragging||(L=o.secondButton.value)!=null&&L.dragging)&&O.preventDefault()},onSliderClick:O=>{x(O)&&C()},onSliderDown:async O=>{const D=x(O);D&&(await et(),D.value.onButtonDown(O))},setFirstValue:_,setSecondValue:S}},{left:mie,down:gie,right:vie,up:yie,home:bie,end:_ie,pageUp:Sie,pageDown:wie}=rt,Cie=(t,e,n)=>{const i=q(),r=q(!1),a=R(()=>e.value instanceof Function),d=R(()=>a.value&&e.value(t.modelValue)||t.modelValue),s=pi(()=>{n.value&&(r.value=!0)},50),o=pi(()=>{n.value&&(r.value=!1)},50);return{tooltip:i,tooltipVisible:r,formatValue:d,displayTooltip:s,hideTooltip:o}},xie=(t,e,n)=>{const{disabled:i,min:r,max:a,step:d,showTooltip:s,precision:o,sliderSize:c,formatTooltip:h,emitChange:l,resetSize:u,updateDragging:f}=Je(C2),{tooltip:m,tooltipVisible:g,formatValue:p,displayTooltip:v,hideTooltip:b}=Cie(t,h,s),_=q(),S=R(()=>`${(t.modelValue-r.value)/(a.value-r.value)*100}%`),w=R(()=>t.vertical?{bottom:S.value}:{left:S.value}),C=()=>{e.hovering=!0,v()},x=()=>{e.hovering=!1,e.dragging||b()},M=N=>{i.value||(N.preventDefault(),F(N),window.addEventListener("mousemove",T),window.addEventListener("touchmove",T),window.addEventListener("mouseup",P),window.addEventListener("touchend",P),window.addEventListener("contextmenu",P),_.value.focus())},E=N=>{i.value||(e.newPosition=Number.parseFloat(S.value)+N/(a.value-r.value)*100,H(e.newPosition),l())},A=()=>{E(-d.value)},O=()=>{E(d.value)},D=()=>{E(-d.value*4)},L=()=>{E(d.value*4)},U=()=>{i.value||(H(0),l())},j=()=>{i.value||(H(100),l())},V=N=>{let G=!0;[mie,gie].includes(N.key)?A():[vie,yie].includes(N.key)?O():N.key===bie?U():N.key===_ie?j():N.key===wie?D():N.key===Sie?L():G=!1,G&&N.preventDefault()},k=N=>{let G,$;return N.type.startsWith("touch")?($=N.touches[0].clientY,G=N.touches[0].clientX):($=N.clientY,G=N.clientX),{clientX:G,clientY:$}},F=N=>{e.dragging=!0,e.isClick=!0;const{clientX:G,clientY:$}=k(N);t.vertical?e.startY=$:e.startX=G,e.startPosition=Number.parseFloat(S.value),e.newPosition=e.startPosition},T=N=>{if(e.dragging){e.isClick=!1,v(),u();let G;const{clientX:$,clientY:z}=k(N);t.vertical?(e.currentY=z,G=(e.startY-e.currentY)/c.value*100):(e.currentX=$,G=(e.currentX-e.startX)/c.value*100),e.newPosition=e.startPosition+G,H(e.newPosition)}},P=()=>{e.dragging&&(setTimeout(()=>{e.dragging=!1,e.hovering||b(),e.isClick||H(e.newPosition),l()},0),window.removeEventListener("mousemove",T),window.removeEventListener("touchmove",T),window.removeEventListener("mouseup",P),window.removeEventListener("touchend",P),window.removeEventListener("contextmenu",P))},H=async N=>{if(N===null||Number.isNaN(+N))return;N<0?N=0:N>100&&(N=100);const G=100/((a.value-r.value)/d.value);let z=Math.round(N/G)*G*(a.value-r.value)*.01+r.value;z=Number.parseFloat(z.toFixed(o.value)),z!==t.modelValue&&n(bt,z),!e.dragging&&t.modelValue!==e.oldValue&&(e.oldValue=t.modelValue),await et(),e.dragging&&v(),m.value.updatePopper()};return Be(()=>e.dragging,N=>{f(N)}),{disabled:i,button:_,tooltip:m,tooltipVisible:g,showTooltip:s,wrapperStyle:w,formatValue:p,handleMouseEnter:C,handleMouseLeave:x,onButtonDown:M,onKeyDown:V,setPosition:H}},Tie=(t,e,n,i)=>({stops:R(()=>{if(!t.showStops||t.min>t.max)return[];if(t.step===0)return[];const d=(t.max-t.min)/t.step,s=100*t.step/(t.max-t.min),o=Array.from({length:d-1}).map((c,h)=>(h+1)*s);return t.range?o.filter(c=>c<100*(n.value-t.min)/(t.max-t.min)||c>100*(i.value-t.min)/(t.max-t.min)):o.filter(c=>c>100*(e.firstValue-t.min)/(t.max-t.min))}),getStopStyle:d=>t.vertical?{bottom:`${d}%`}:{left:`${d}%`}}),Eie=(t,e,n,i,r,a)=>{const d=c=>{r(bt,c),r(di,c)},s=()=>t.range?![n.value,i.value].every((c,h)=>c===e.oldValue[h]):t.modelValue!==e.oldValue,o=()=>{var c,h;t.min>t.max&&Tn("Slider","min should not be greater than max.");const l=t.modelValue;t.range&&Array.isArray(l)?l[1]<t.min?d([t.min,t.min]):l[0]>t.max?d([t.max,t.max]):l[0]<t.min?d([t.min,l[1]]):l[1]>t.max?d([l[0],t.max]):(e.firstValue=l[0],e.secondValue=l[1],s()&&(t.validateEvent&&((c=a==null?void 0:a.validate)==null||c.call(a,"change").catch(u=>void 0)),e.oldValue=l.slice())):!t.range&&typeof l=="number"&&!Number.isNaN(l)&&(l<t.min?d(t.min):l>t.max?d(t.max):(e.firstValue=l,s()&&(t.validateEvent&&((h=a==null?void 0:a.validate)==null||h.call(a,"change").catch(u=>void 0)),e.oldValue=l)))};o(),Be(()=>e.dragging,c=>{c||o()}),Be(()=>t.modelValue,(c,h)=>{e.dragging||Array.isArray(c)&&Array.isArray(h)&&c.every((l,u)=>l===h[u])&&e.firstValue===c[0]&&e.secondValue===c[1]||o()},{deep:!0}),Be(()=>[t.min,t.max],()=>{o()})},Mie=Xe({modelValue:{type:Number,default:0},vertical:Boolean,tooltipClass:String,placement:{type:String,values:ha,default:"top"}}),Aie={[bt]:t=>at(t)},kie=["tabindex"],Rie=de({name:"ElSliderButton"}),Pie=de({...Rie,props:Mie,emits:Aie,setup(t,{expose:e,emit:n}){const i=t,r=Ue("slider"),a=Ft({hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:0,oldValue:i.modelValue}),{disabled:d,button:s,tooltip:o,showTooltip:c,tooltipVisible:h,wrapperStyle:l,formatValue:u,handleMouseEnter:f,handleMouseLeave:m,onButtonDown:g,onKeyDown:p,setPosition:v}=xie(i,a,n),{hovering:b,dragging:_}=Rn(a);return e({onButtonDown:g,onKeyDown:p,setPosition:v,hovering:b,dragging:_}),(S,w)=>(I(),ne("div",{ref_key:"button",ref:s,class:B([y(r).e("button-wrapper"),{hover:y(b),dragging:y(_)}]),style:nt(y(l)),tabindex:y(d)?-1:0,onMouseenter:w[0]||(w[0]=(...C)=>y(f)&&y(f)(...C)),onMouseleave:w[1]||(w[1]=(...C)=>y(m)&&y(m)(...C)),onMousedown:w[2]||(w[2]=(...C)=>y(g)&&y(g)(...C)),onTouchstart:w[3]||(w[3]=(...C)=>y(g)&&y(g)(...C)),onFocus:w[4]||(w[4]=(...C)=>y(f)&&y(f)(...C)),onBlur:w[5]||(w[5]=(...C)=>y(m)&&y(m)(...C)),onKeydown:w[6]||(w[6]=(...C)=>y(p)&&y(p)(...C))},[ue(y(mi),{ref_key:"tooltip",ref:o,visible:y(h),placement:S.placement,"fallback-placements":["top","bottom","right","left"],"stop-popper-mouse-event":!1,"popper-class":S.tooltipClass,disabled:!y(c),persistent:""},{content:ve(()=>[ae("span",null,$e(y(u)),1)]),default:ve(()=>[ae("div",{class:B([y(r).e("button"),{hover:y(b),dragging:y(_)}])},null,2)]),_:1},8,["visible","placement","popper-class","disabled"])],46,kie))}});var Gw=je(Pie,[["__file","/home/runner/work/element-plus/element-plus/packages/components/slider/src/button.vue"]]);const Oie=Xe({mark:{type:Ae([String,Object]),default:void 0}});var Lie=de({name:"ElSliderMarker",props:Oie,setup(t){const e=Ue("slider"),n=R(()=>ct(t.mark)?t.mark:t.mark.label),i=R(()=>ct(t.mark)?void 0:t.mark.style);return()=>st("div",{class:e.e("marks-text"),style:i.value},n.value)}});const Iie=["id","role","aria-label","aria-labelledby"],Die={key:1},Nie=de({name:"ElSlider"}),Fie=de({...Nie,props:uie,emits:die,setup(t,{expose:e,emit:n}){const i=t,r=Ue("slider"),{t:a}=Pt(),d=Ft({firstValue:0,secondValue:0,oldValue:0,dragging:!1,sliderSize:1}),{elFormItem:s,slider:o,firstButton:c,secondButton:h,sliderDisabled:l,minValue:u,maxValue:f,runwayStyle:m,barStyle:g,resetSize:p,emitChange:v,onSliderWrapperPrevent:b,onSliderClick:_,onSliderDown:S,setFirstValue:w,setSecondValue:C}=pie(i,d,n),{stops:x,getStopStyle:M}=Tie(i,d,u,f),{inputId:E,isLabeledByFormItem:A}=ho(i,{formItemContext:s}),O=En(),D=R(()=>i.inputSize||O.value),L=R(()=>i.label||a("el.slider.defaultLabel",{min:i.min,max:i.max})),U=R(()=>i.range?i.rangeStartLabel||a("el.slider.defaultRangeStartLabel"):L.value),j=R(()=>i.formatValueText?i.formatValueText(N.value):`${N.value}`),V=R(()=>i.rangeEndLabel||a("el.slider.defaultRangeEndLabel")),k=R(()=>i.formatValueText?i.formatValueText(G.value):`${G.value}`),F=R(()=>[r.b(),r.m(O.value),r.is("vertical",i.vertical),{[r.m("with-input")]:i.showInput}]),T=hie(i);Eie(i,d,u,f,n,s);const P=R(()=>{const Z=[i.min,i.max,i.step].map(W=>{const te=`${W}`.split(".")[1];return te?te.length:0});return Math.max.apply(null,Z)}),{sliderWrapper:H}=fie(i,d,p),{firstValue:N,secondValue:G,sliderSize:$}=Rn(d),z=Z=>{d.dragging=Z};return xt(C2,{...Rn(i),sliderSize:$,disabled:l,precision:P,emitChange:v,resetSize:p,updateDragging:z}),e({onSliderClick:_}),(Z,W)=>{var te,ie;return I(),ne("div",{id:Z.range?y(E):void 0,ref_key:"sliderWrapper",ref:H,class:B(y(F)),role:Z.range?"group":void 0,"aria-label":Z.range&&!y(A)?y(L):void 0,"aria-labelledby":Z.range&&y(A)?(te=y(s))==null?void 0:te.labelId:void 0,onTouchstart:W[2]||(W[2]=(...re)=>y(b)&&y(b)(...re)),onTouchmove:W[3]||(W[3]=(...re)=>y(b)&&y(b)(...re))},[ae("div",{ref_key:"slider",ref:o,class:B([y(r).e("runway"),{"show-input":Z.showInput&&!Z.range},y(r).is("disabled",y(l))]),style:nt(y(m)),onMousedown:W[0]||(W[0]=(...re)=>y(S)&&y(S)(...re)),onTouchstart:W[1]||(W[1]=(...re)=>y(S)&&y(S)(...re))},[ae("div",{class:B(y(r).e("bar")),style:nt(y(g))},null,6),ue(Gw,{id:Z.range?void 0:y(E),ref_key:"firstButton",ref:c,"model-value":y(N),vertical:Z.vertical,"tooltip-class":Z.tooltipClass,placement:Z.placement,role:"slider","aria-label":Z.range||!y(A)?y(U):void 0,"aria-labelledby":!Z.range&&y(A)?(ie=y(s))==null?void 0:ie.labelId:void 0,"aria-valuemin":Z.min,"aria-valuemax":Z.range?y(G):Z.max,"aria-valuenow":y(N),"aria-valuetext":y(j),"aria-orientation":Z.vertical?"vertical":"horizontal","aria-disabled":y(l),"onUpdate:modelValue":y(w)},null,8,["id","model-value","vertical","tooltip-class","placement","aria-label","aria-labelledby","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"]),Z.range?(I(),ke(Gw,{key:0,ref_key:"secondButton",ref:h,"model-value":y(G),vertical:Z.vertical,"tooltip-class":Z.tooltipClass,placement:Z.placement,role:"slider","aria-label":y(V),"aria-valuemin":y(N),"aria-valuemax":Z.max,"aria-valuenow":y(G),"aria-valuetext":y(k),"aria-orientation":Z.vertical?"vertical":"horizontal","aria-disabled":y(l),"onUpdate:modelValue":y(C)},null,8,["model-value","vertical","tooltip-class","placement","aria-label","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"])):Te("v-if",!0),Z.showStops?(I(),ne("div",Die,[(I(!0),ne(Qe,null,wt(y(x),(re,_e)=>(I(),ne("div",{key:_e,class:B(y(r).e("stop")),style:nt(y(M)(re))},null,6))),128))])):Te("v-if",!0),y(T).length>0?(I(),ne(Qe,{key:2},[ae("div",null,[(I(!0),ne(Qe,null,wt(y(T),(re,_e)=>(I(),ne("div",{key:_e,style:nt(y(M)(re.position)),class:B([y(r).e("stop"),y(r).e("marks-stop")])},null,6))),128))]),ae("div",{class:B(y(r).e("marks"))},[(I(!0),ne(Qe,null,wt(y(T),(re,_e)=>(I(),ke(y(Lie),{key:_e,mark:re.mark,style:nt(y(M)(re.position))},null,8,["mark","style"]))),128))],2)],64)):Te("v-if",!0)],38),Z.showInput&&!Z.range?(I(),ke(y(qM),{key:0,ref:"input","model-value":y(N),class:B(y(r).e("input")),step:Z.step,disabled:y(l),controls:Z.showInputControls,min:Z.min,max:Z.max,debounce:Z.debounce,size:y(D),"onUpdate:modelValue":y(w),onChange:y(v)},null,8,["model-value","class","step","disabled","controls","min","max","debounce","size","onUpdate:modelValue","onChange"])):Te("v-if",!0)],42,Iie)}}});var Bie=je(Fie,[["__file","/home/runner/work/element-plus/element-plus/packages/components/slider/src/slider.vue"]]);const Uie=yt(Bie),Vie=Xe({prefixCls:{type:String}}),jw=de({name:"ElSpaceItem",props:Vie,setup(t,{slots:e}){const n=Ue("space"),i=R(()=>`${t.prefixCls||n.b()}__item`);return()=>st("div",{class:i.value},Le(e,"default"))}}),Xw={small:8,default:12,large:16};function Hie(t){const e=Ue("space"),n=R(()=>[e.b(),e.m(t.direction),t.class]),i=q(0),r=q(0),a=R(()=>{const s=t.wrap||t.fill?{flexWrap:"wrap",marginBottom:`-${r.value}px`}:{},o={alignItems:t.alignment};return[s,o,t.style]}),d=R(()=>{const s={paddingBottom:`${r.value}px`,marginRight:`${i.value}px`},o=t.fill?{flexGrow:1,minWidth:`${t.fillRatio}%`}:{};return[s,o]});return Di(()=>{const{size:s="small",wrap:o,direction:c,fill:h}=t;if(Ze(s)){const[l=0,u=0]=s;i.value=l,r.value=u}else{let l;at(s)?l=s:l=Xw[s||"small"]||Xw.small,(o||h)&&c==="horizontal"?i.value=r.value=l:c==="horizontal"?(i.value=l,r.value=0):(r.value=l,i.value=0)}}),{classes:n,containerStyle:a,itemStyle:d}}const zie=Xe({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},class:{type:Ae([String,Object,Array]),default:""},style:{type:Ae([String,Array,Object]),default:""},alignment:{type:Ae(String),default:"center"},prefixCls:{type:String},spacer:{type:Ae([Object,String,Number,Array]),default:null,validator:t=>un(t)||at(t)||ct(t)},wrap:Boolean,fill:Boolean,fillRatio:{type:Number,default:100},size:{type:[String,Array,Number],values:Hr,validator:t=>at(t)||Ze(t)&&t.length===2&&t.every(at)}}),$ie=de({name:"ElSpace",props:zie,setup(t,{slots:e}){const{classes:n,containerStyle:i,itemStyle:r}=Hie(t);function a(d,s="",o=[]){const{prefixCls:c}=t;return d.forEach((h,l)=>{Bm(h)?Ze(h.children)&&h.children.forEach((u,f)=>{Bm(u)&&Ze(u.children)?a(u.children,`${s+f}-`,o):o.push(ue(jw,{style:r.value,prefixCls:c,key:`nested-${s+f}`},{default:()=>[u]},Vi.PROPS|Vi.STYLE,["style","prefixCls"]))}):Y5(h)&&o.push(ue(jw,{style:r.value,prefixCls:c,key:`LoopKey${s+l}`},{default:()=>[h]},Vi.PROPS|Vi.STYLE,["style","prefixCls"]))}),o}return()=>{var d;const{spacer:s,direction:o}=t,c=Le(e,"default",{key:0},()=>[]);if(((d=c.children)!=null?d:[]).length===0)return null;if(Ze(c.children)){let h=a(c.children);if(s){const l=h.length-1;h=h.reduce((u,f,m)=>{const g=[...u,f];return m!==l&&g.push(ue("span",{style:[r.value,o==="vertical"?"width: 100%":null],key:m},[un(s)?s:Tt(s,Vi.TEXT)],Vi.STYLE)),g},[])}return ue("div",{class:n.value,style:i.value},h,Vi.STYLE|Vi.CLASS)}return c.children}}}),Wie=yt($ie),Gie=Xe({decimalSeparator:{type:String,default:"."},groupSeparator:{type:String,default:","},precision:{type:Number,default:0},formatter:Function,value:{type:Ae([Number,Object]),default:0},prefix:String,suffix:String,title:String,valueStyle:{type:Ae([String,Object,Array])}}),jie=de({name:"ElStatistic"}),Xie=de({...jie,props:Gie,setup(t,{expose:e}){const n=t,i=Ue("statistic"),r=R(()=>{const{value:a,formatter:d,precision:s,decimalSeparator:o,groupSeparator:c}=n;if(lt(d))return d(a);if(!at(a))return a;let[h,l=""]=String(a).split(".");return l=l.padEnd(s,"0").slice(0,s>0?s:0),h=h.replace(/\B(?=(\d{3})+(?!\d))/g,c),[h,l].join(l?o:"")});return e({displayValue:r}),(a,d)=>(I(),ne("div",{class:B(y(i).b())},[a.$slots.title||a.title?(I(),ne("div",{key:0,class:B(y(i).e("head"))},[Le(a.$slots,"title",{},()=>[Tt($e(a.title),1)])],2)):Te("v-if",!0),ae("div",{class:B(y(i).e("content"))},[a.$slots.prefix||a.prefix?(I(),ne("div",{key:0,class:B(y(i).e("prefix"))},[Le(a.$slots,"prefix",{},()=>[ae("span",null,$e(a.prefix),1)])],2)):Te("v-if",!0),ae("span",{class:B(y(i).e("number")),style:nt(a.valueStyle)},$e(y(r)),7),a.$slots.suffix||a.suffix?(I(),ne("div",{key:1,class:B(y(i).e("suffix"))},[Le(a.$slots,"suffix",{},()=>[ae("span",null,$e(a.suffix),1)])],2)):Te("v-if",!0)],2)],2))}});var Kie=je(Xie,[["__file","/home/runner/work/element-plus/element-plus/packages/components/statistic/src/statistic.vue"]]);const x2=yt(Kie),Yie=Xe({format:{type:String,default:"HH:mm:ss"},prefix:String,suffix:String,title:String,value:{type:Ae([Number,Object]),default:0},valueStyle:{type:Ae([String,Object,Array])}}),qie={finish:()=>!0,[tn]:t=>at(t)},Zie=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]],Kw=t=>at(t)?new Date(t).getTime():t.valueOf(),Yw=(t,e)=>{let n=t;const i=/\[([^\]]*)]/g;return Zie.reduce((a,[d,s])=>{const o=new RegExp(`${d}+(?![^\\[\\]]*\\])`,"g");if(o.test(a)){const c=Math.floor(n/s);return n-=c*s,a.replace(o,h=>String(c).padStart(h.length,"0"))}return a},e).replace(i,"$1")},Jie=de({name:"ElCountdown"}),Qie=de({...Jie,props:Yie,emits:qie,setup(t,{expose:e,emit:n}){const i=t;let r;const a=q(Kw(i.value)-Date.now()),d=R(()=>Yw(a.value,i.format)),s=h=>Yw(h,i.format),o=()=>{r&&(Th(r),r=void 0)},c=()=>{const h=Kw(i.value),l=()=>{let u=h-Date.now();n("change",u),u<=0?(u=0,o(),n("finish")):r=ou(l),a.value=u};r=ou(l)};return Be(()=>[i.value,i.format],()=>{o(),c()},{immediate:!0}),rn(()=>{o()}),e({displayValue:d}),(h,l)=>(I(),ke(y(x2),{value:a.value,title:h.title,prefix:h.prefix,suffix:h.suffix,"value-style":h.valueStyle,formatter:s},ds({_:2},[wt(h.$slots,(u,f)=>({name:f,fn:ve(()=>[Le(h.$slots,f)])}))]),1032,["value","title","prefix","suffix","value-style"]))}});var ere=je(Qie,[["__file","/home/runner/work/element-plus/element-plus/packages/components/countdown/src/countdown.vue"]]);const tre=yt(ere),nre=Xe({space:{type:[Number,String],default:""},active:{type:Number,default:0},direction:{type:String,default:"horizontal",values:["horizontal","vertical"]},alignCenter:{type:Boolean},simple:{type:Boolean},finishStatus:{type:String,values:["wait","process","finish","error","success"],default:"finish"},processStatus:{type:String,values:["wait","process","finish","error","success"],default:"process"}}),ire={[tn]:(t,e)=>[t,e].every(at)},rre=de({name:"ElSteps"}),sre=de({...rre,props:nre,emits:ire,setup(t,{emit:e}){const n=t,i=Ue("steps"),{children:r,addChild:a,removeChild:d}=a0(vt(),"ElStep");return Be(r,()=>{r.value.forEach((s,o)=>{s.setIndex(o)})}),xt("ElSteps",{props:n,steps:r,addStep:a,removeStep:d}),Be(()=>n.active,(s,o)=>{e(tn,s,o)}),(s,o)=>(I(),ne("div",{class:B([y(i).b(),y(i).m(s.simple?"simple":s.direction)])},[Le(s.$slots,"default")],2))}});var ore=je(sre,[["__file","/home/runner/work/element-plus/element-plus/packages/components/steps/src/steps.vue"]]);const are=Xe({title:{type:String,default:""},icon:{type:Qt},description:{type:String,default:""},status:{type:String,values:["","wait","process","finish","error","success"],default:""}}),lre=de({name:"ElStep"}),cre=de({...lre,props:are,setup(t){const e=t,n=Ue("step"),i=q(-1),r=q({}),a=q(""),d=Je("ElSteps"),s=vt();mt(()=>{Be([()=>d.props.active,()=>d.props.processStatus,()=>d.props.finishStatus],([C])=>{S(C)},{immediate:!0})}),rn(()=>{d.removeStep(w.uid)});const o=R(()=>e.status||a.value),c=R(()=>{const C=d.steps.value[i.value-1];return C?C.currentStatus:"wait"}),h=R(()=>d.props.alignCenter),l=R(()=>d.props.direction==="vertical"),u=R(()=>d.props.simple),f=R(()=>d.steps.value.length),m=R(()=>{var C;return((C=d.steps.value[f.value-1])==null?void 0:C.uid)===(s==null?void 0:s.uid)}),g=R(()=>u.value?"":d.props.space),p=R(()=>[n.b(),n.is(u.value?"simple":d.props.direction),n.is("flex",m.value&&!g.value&&!h.value),n.is("center",h.value&&!l.value&&!u.value)]),v=R(()=>{const C={flexBasis:at(g.value)?`${g.value}px`:g.value?g.value:`${100/(f.value-(h.value?0:1))}%`};return l.value||m.value&&(C.maxWidth=`${100/f.value}%`),C}),b=C=>{i.value=C},_=C=>{const x=C==="wait",M={transitionDelay:`${x?"-":""}${150*i.value}ms`},E=C===d.props.processStatus||x?0:100;M.borderWidth=E&&!u.value?"1px":0,M[d.props.direction==="vertical"?"height":"width"]=`${E}%`,r.value=M},S=C=>{C>i.value?a.value=d.props.finishStatus:C===i.value&&c.value!=="error"?a.value=d.props.processStatus:a.value="wait";const x=d.steps.value[i.value-1];x&&x.calcProgress(a.value)},w=Ft({uid:s.uid,currentStatus:o,setIndex:b,calcProgress:_});return d.addStep(w),(C,x)=>(I(),ne("div",{style:nt(y(v)),class:B(y(p))},[Te(" icon & line "),ae("div",{class:B([y(n).e("head"),y(n).is(y(o))])},[y(u)?Te("v-if",!0):(I(),ne("div",{key:0,class:B(y(n).e("line"))},[ae("i",{class:B(y(n).e("line-inner")),style:nt(r.value)},null,6)],2)),ae("div",{class:B([y(n).e("icon"),y(n).is(C.icon||C.$slots.icon?"icon":"text")])},[Le(C.$slots,"icon",{},()=>[C.icon?(I(),ke(y(tt),{key:0,class:B(y(n).e("icon-inner"))},{default:ve(()=>[(I(),ke(Ct(C.icon)))]),_:1},8,["class"])):y(o)==="success"?(I(),ke(y(tt),{key:1,class:B([y(n).e("icon-inner"),y(n).is("status")])},{default:ve(()=>[ue(y(Du))]),_:1},8,["class"])):y(o)==="error"?(I(),ke(y(tt),{key:2,class:B([y(n).e("icon-inner"),y(n).is("status")])},{default:ve(()=>[ue(y(yr))]),_:1},8,["class"])):y(u)?Te("v-if",!0):(I(),ne("div",{key:3,class:B(y(n).e("icon-inner"))},$e(i.value+1),3))])],2)],2),Te(" title & description "),ae("div",{class:B(y(n).e("main"))},[ae("div",{class:B([y(n).e("title"),y(n).is(y(o))])},[Le(C.$slots,"title",{},()=>[Tt($e(C.title),1)])],2),y(u)?(I(),ne("div",{key:0,class:B(y(n).e("arrow"))},null,2)):(I(),ne("div",{key:1,class:B([y(n).e("description"),y(n).is(y(o))])},[Le(C.$slots,"description",{},()=>[Tt($e(C.description),1)])],2))],2)],6))}});var T2=je(cre,[["__file","/home/runner/work/element-plus/element-plus/packages/components/steps/src/item.vue"]]);const ure=yt(ore,{Step:T2}),dre=mn(T2),fre=Xe({modelValue:{type:[Boolean,String,Number],default:!1},value:{type:[Boolean,String,Number],default:!1},disabled:{type:Boolean,default:!1},width:{type:[String,Number],default:""},inlinePrompt:{type:Boolean,default:!1},activeIcon:{type:Qt},inactiveIcon:{type:Qt},activeText:{type:String,default:""},inactiveText:{type:String,default:""},activeColor:{type:String,default:""},inactiveColor:{type:String,default:""},borderColor:{type:String,default:""},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},name:{type:String,default:""},validateEvent:{type:Boolean,default:!0},id:String,loading:{type:Boolean,default:!1},beforeChange:{type:Ae(Function)},size:{type:String,validator:Ch},tabindex:{type:[String,Number]}}),hre={[bt]:t=>xn(t)||ct(t)||at(t),[tn]:t=>xn(t)||ct(t)||at(t),[di]:t=>xn(t)||ct(t)||at(t)},pre=["onClick"],mre=["id","aria-checked","aria-disabled","name","true-value","false-value","disabled","tabindex","onKeydown"],gre=["aria-hidden"],vre=["aria-hidden"],yre=["aria-hidden"],Sg="ElSwitch",bre=de({name:Sg}),_re=de({...bre,props:fre,emits:hre,setup(t,{expose:e,emit:n}){const i=t,r=vt(),{formItem:a}=gi(),d=En(),s=Ue("switch");Ir({from:'"value"',replacement:'"model-value" or "v-model"',scope:Sg,version:"2.3.0",ref:"https://element-plus.org/en-US/component/switch.html#attributes",type:"Attribute"},R(()=>{var w;return!!((w=r.vnode.props)!=null&&w.value)}));const{inputId:o}=ho(i,{formItemContext:a}),c=Mi(R(()=>i.loading)),h=q(i.modelValue!==!1),l=q(),u=q(),f=R(()=>[s.b(),s.m(d.value),s.is("disabled",c.value),s.is("checked",p.value)]),m=R(()=>({width:bn(i.width)}));Be(()=>i.modelValue,()=>{h.value=!0}),Be(()=>i.value,()=>{h.value=!1});const g=R(()=>h.value?i.modelValue:i.value),p=R(()=>g.value===i.activeValue);[i.activeValue,i.inactiveValue].includes(g.value)||(n(bt,i.inactiveValue),n(tn,i.inactiveValue),n(di,i.inactiveValue)),Be(p,w=>{var C;l.value.checked=w,i.validateEvent&&((C=a==null?void 0:a.validate)==null||C.call(a,"change").catch(x=>void 0))});const v=()=>{const w=p.value?i.inactiveValue:i.activeValue;n(bt,w),n(tn,w),n(di,w),et(()=>{l.value.checked=p.value})},b=()=>{if(c.value)return;const{beforeChange:w}=i;if(!w){v();return}const C=w();[Vc(C),xn(C)].includes(!0)||Tn(Sg,"beforeChange must return type `Promise<boolean>` or `boolean`"),Vc(C)?C.then(M=>{M&&v()}).catch(M=>{}):C&&v()},_=R(()=>s.cssVarBlock({...i.activeColor?{"on-color":i.activeColor}:null,...i.inactiveColor?{"off-color":i.inactiveColor}:null,...i.borderColor?{"border-color":i.borderColor}:null})),S=()=>{var w,C;(C=(w=l.value)==null?void 0:w.focus)==null||C.call(w)};return mt(()=>{l.value.checked=p.value}),e({focus:S,checked:p}),(w,C)=>(I(),ne("div",{class:B(y(f)),style:nt(y(_)),onClick:ot(b,["prevent"])},[ae("input",{id:y(o),ref_key:"input",ref:l,class:B(y(s).e("input")),type:"checkbox",role:"switch","aria-checked":y(p),"aria-disabled":y(c),name:w.name,"true-value":w.activeValue,"false-value":w.inactiveValue,disabled:y(c),tabindex:w.tabindex,onChange:v,onKeydown:Rt(b,["enter"])},null,42,mre),!w.inlinePrompt&&(w.inactiveIcon||w.inactiveText)?(I(),ne("span",{key:0,class:B([y(s).e("label"),y(s).em("label","left"),y(s).is("active",!y(p))])},[w.inactiveIcon?(I(),ke(y(tt),{key:0},{default:ve(()=>[(I(),ke(Ct(w.inactiveIcon)))]),_:1})):Te("v-if",!0),!w.inactiveIcon&&w.inactiveText?(I(),ne("span",{key:1,"aria-hidden":y(p)},$e(w.inactiveText),9,gre)):Te("v-if",!0)],2)):Te("v-if",!0),ae("span",{ref_key:"core",ref:u,class:B(y(s).e("core")),style:nt(y(m))},[w.inlinePrompt?(I(),ne("div",{key:0,class:B(y(s).e("inner"))},[w.activeIcon||w.inactiveIcon?(I(),ke(y(tt),{key:0,class:B(y(s).is("icon"))},{default:ve(()=>[(I(),ke(Ct(y(p)?w.activeIcon:w.inactiveIcon)))]),_:1},8,["class"])):w.activeText||w.inactiveText?(I(),ne("span",{key:1,class:B(y(s).is("text")),"aria-hidden":!y(p)},$e(y(p)?w.activeText:w.inactiveText),11,vre)):Te("v-if",!0)],2)):Te("v-if",!0),ae("div",{class:B(y(s).e("action"))},[w.loading?(I(),ke(y(tt),{key:0,class:B(y(s).is("loading"))},{default:ve(()=>[ue(y(co))]),_:1},8,["class"])):Te("v-if",!0)],2)],6),!w.inlinePrompt&&(w.activeIcon||w.activeText)?(I(),ne("span",{key:1,class:B([y(s).e("label"),y(s).em("label","right"),y(s).is("active",y(p))])},[w.activeIcon?(I(),ke(y(tt),{key:0},{default:ve(()=>[(I(),ke(Ct(w.activeIcon)))]),_:1})):Te("v-if",!0),!w.activeIcon&&w.activeText?(I(),ne("span",{key:1,"aria-hidden":!y(p)},$e(w.activeText),9,yre)):Te("v-if",!0)],2)):Te("v-if",!0)],14,pre))}});var Sre=je(_re,[["__file","/home/runner/work/element-plus/element-plus/packages/components/switch/src/switch.vue"]]);const wre=yt(Sre);/*!
 * escape-html
 * Copyright(c) 2012-2013 TJ Holowaychuk
 * Copyright(c) 2015 Andreas Lubbe
 * Copyright(c) 2015 Tiancheng "Timothy" Gu
 * MIT Licensed
 */var Cre=/["'&<>]/,xre=Tre;function Tre(t){var e=""+t,n=Cre.exec(e);if(!n)return e;var i,r="",a=0,d=0;for(a=n.index;a<e.length;a++){switch(e.charCodeAt(a)){case 34:i="&quot;";break;case 38:i="&amp;";break;case 39:i="&#39;";break;case 60:i="&lt;";break;case 62:i="&gt;";break;default:continue}d!==a&&(r+=e.substring(d,a)),d=a+1,r+=i}return d!==a?r+e.substring(d,a):r}const Ere=Vr(xre),tm=function(t){var e;return(e=t.target)==null?void 0:e.closest("td")},Mre=function(t,e,n,i,r){if(!e&&!i&&(!r||Array.isArray(r)&&!r.length))return t;typeof n=="string"?n=n==="descending"?-1:1:n=n&&n<0?-1:1;const a=i?null:function(s,o){return r?(Array.isArray(r)||(r=[r]),r.map(c=>typeof c=="string"?on(s,c):c(s,o,t))):(e!=="$key"&&_t(s)&&"$value"in s&&(s=s.$value),[_t(s)?on(s,e):s])},d=function(s,o){if(i)return i(s.value,o.value);for(let c=0,h=s.key.length;c<h;c++){if(s.key[c]<o.key[c])return-1;if(s.key[c]>o.key[c])return 1}return 0};return t.map((s,o)=>({value:s,index:o,key:a?a(s,o):null})).sort((s,o)=>{let c=d(s,o);return c||(c=s.index-o.index),c*+n}).map(s=>s.value)},E2=function(t,e){let n=null;return t.columns.forEach(i=>{i.id===e&&(n=i)}),n},Are=function(t,e){let n=null;for(let i=0;i<t.columns.length;i++){const r=t.columns[i];if(r.columnKey===e){n=r;break}}return n||Tn("ElTable",`No column matching with column-key: ${e}`),n},qw=function(t,e,n){const i=(e.className||"").match(new RegExp(`${n}-table_[^\\s]+`,"gm"));return i?E2(t,i[0]):null},$n=(t,e)=>{if(!t)throw new Error("Row is required when get row identity");if(typeof e=="string"){if(!e.includes("."))return`${t[e]}`;const n=e.split(".");let i=t;for(const r of n)i=i[r];return`${i}`}else if(typeof e=="function")return e.call(null,t)},Vo=function(t,e){const n={};return(t||[]).forEach((i,r)=>{n[$n(i,e)]={row:i,index:r}}),n};function kre(t,e){const n={};let i;for(i in t)n[i]=t[i];for(i in e)if(Mt(e,i)){const r=e[i];typeof r<"u"&&(n[i]=r)}return n}function R0(t){return t===""||t!==void 0&&(t=Number.parseInt(t,10),Number.isNaN(t)&&(t="")),t}function M2(t){return t===""||t!==void 0&&(t=R0(t),Number.isNaN(t)&&(t=80)),t}function Rre(t){return typeof t=="number"?t:typeof t=="string"?/^\d+(?:px)?$/.test(t)?Number.parseInt(t,10):t:null}function Pre(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...i)=>e(n(...i)))}function Bc(t,e,n){let i=!1;const r=t.indexOf(e),a=r!==-1,d=s=>{s==="add"?t.push(e):t.splice(r,1),i=!0,Ze(e.children)&&e.children.forEach(o=>{Bc(t,o,n??!a)})};return xn(n)?n&&!a?d("add"):!n&&a&&d("remove"):d(a?"remove":"add"),i}function Ore(t,e,n="children",i="hasChildren"){const r=d=>!(Array.isArray(d)&&d.length);function a(d,s,o){e(d,s,o),s.forEach(c=>{if(c[i]){e(c,null,o+1);return}const h=c[n];r(h)||a(c,h,o+1)})}t.forEach(d=>{if(d[i]){e(d,null,0);return}const s=d[n];r(s)||a(d,s,0)})}let Qr;function Lre(t,e,n,i,r){r=aT({enterable:!0,showArrow:!0},r);const a=t==null?void 0:t.dataset.prefix,d=t==null?void 0:t.querySelector(`.${a}-scrollbar__wrap`);function s(){const p=r.effect==="light",v=document.createElement("div");return v.className=[`${a}-popper`,p?"is-light":"is-dark",r.popperClass||""].join(" "),n=Ere(n),v.innerHTML=n,v.style.zIndex=String(i()),t==null||t.appendChild(v),v}function o(){const p=document.createElement("div");return p.className=`${a}-popper__arrow`,p}function c(){h&&h.update()}Qr==null||Qr(),Qr=()=>{try{h&&h.destroy(),f&&(t==null||t.removeChild(f)),e.removeEventListener("mouseenter",l),e.removeEventListener("mouseleave",u),d==null||d.removeEventListener("scroll",Qr),Qr=void 0}catch{}};let h=null,l=c,u=Qr;r.enterable&&({onOpen:l,onClose:u}=zT({showAfter:r.showAfter,hideAfter:r.hideAfter,open:c,close:Qr}));const f=s();f.onmouseenter=l,f.onmouseleave=u;const m=[];if(r.offset&&m.push({name:"offset",options:{offset:[0,r.offset]}}),r.showArrow){const p=f.appendChild(o());m.push({name:"arrow",options:{element:p,padding:10}})}const g=r.popperOptions||{};return h=UT(e,f,{placement:r.placement||"top",strategy:"fixed",...g,modifiers:g.modifiers?m.concat(g.modifiers):m}),e.addEventListener("mouseenter",l),e.addEventListener("mouseleave",u),d==null||d.addEventListener("scroll",Qr),h}function A2(t){return t.children?g$(t.children,A2):[t]}function Zw(t,e){return t+e.colSpan}const k2=(t,e,n,i)=>{let r=0,a=t;const d=n.states.columns.value;if(i){const o=A2(i[t]);r=d.slice(0,d.indexOf(o[0])).reduce(Zw,0),a=r+o.reduce(Zw,0)-1}else r=t;let s;switch(e){case"left":a<n.states.fixedLeafColumnsLength.value&&(s="left");break;case"right":r>=d.length-n.states.rightFixedLeafColumnsLength.value&&(s="right");break;default:a<n.states.fixedLeafColumnsLength.value?s="left":r>=d.length-n.states.rightFixedLeafColumnsLength.value&&(s="right")}return s?{direction:s,start:r,after:a}:{}},P0=(t,e,n,i,r,a=0)=>{const d=[],{direction:s,start:o,after:c}=k2(e,n,i,r);if(s){const h=s==="left";d.push(`${t}-fixed-column--${s}`),h&&c+a===i.states.fixedLeafColumnsLength.value-1?d.push("is-last-column"):!h&&o-a===i.states.columns.value.length-i.states.rightFixedLeafColumnsLength.value&&d.push("is-first-column")}return d};function Jw(t,e){return t+(e.realWidth===null||Number.isNaN(e.realWidth)?Number(e.width):e.realWidth)}const O0=(t,e,n,i)=>{const{direction:r,start:a=0,after:d=0}=k2(t,e,n,i);if(!r)return;const s={},o=r==="left",c=n.states.columns.value;return o?s.left=c.slice(0,a).reduce(Jw,0):s.right=c.slice(d+1).reverse().reduce(Jw,0),s},Nl=(t,e)=>{t&&(Number.isNaN(t[e])||(t[e]=`${t[e]}px`))};function Ire(t){const e=vt(),n=q(!1),i=q([]);return{updateExpandRows:()=>{const o=t.data.value||[],c=t.rowKey.value;if(n.value)i.value=o.slice();else if(c){const h=Vo(i.value,c);i.value=o.reduce((l,u)=>{const f=$n(u,c);return h[f]&&l.push(u),l},[])}else i.value=[]},toggleRowExpansion:(o,c)=>{Bc(i.value,o,c)&&e.emit("expand-change",o,i.value.slice())},setExpandRowKeys:o=>{e.store.assertRowKey();const c=t.data.value||[],h=t.rowKey.value,l=Vo(c,h);i.value=o.reduce((u,f)=>{const m=l[f];return m&&u.push(m.row),u},[])},isRowExpanded:o=>{const c=t.rowKey.value;return c?!!Vo(i.value,c)[$n(o,c)]:i.value.includes(o)},states:{expandRows:i,defaultExpandAll:n}}}function Dre(t){const e=vt(),n=q(null),i=q(null),r=c=>{e.store.assertRowKey(),n.value=c,d(c)},a=()=>{n.value=null},d=c=>{const{data:h,rowKey:l}=t;let u=null;l.value&&(u=(y(h)||[]).find(f=>$n(f,l.value)===c)),i.value=u,e.emit("current-change",i.value,null)};return{setCurrentRowKey:r,restoreCurrentRowKey:a,setCurrentRowByKey:d,updateCurrentRow:c=>{const h=i.value;if(c&&c!==h){i.value=c,e.emit("current-change",i.value,h);return}!c&&h&&(i.value=null,e.emit("current-change",null,h))},updateCurrentRowData:()=>{const c=t.rowKey.value,h=t.data.value||[],l=i.value;if(!h.includes(l)&&l){if(c){const u=$n(l,c);d(u)}else i.value=null;i.value===null&&e.emit("current-change",null,l)}else n.value&&(d(n.value),a())},states:{_currentRowKey:n,currentRow:i}}}function Nre(t){const e=q([]),n=q({}),i=q(16),r=q(!1),a=q({}),d=q("hasChildren"),s=q("children"),o=vt(),c=R(()=>{if(!t.rowKey.value)return{};const v=t.data.value||[];return l(v)}),h=R(()=>{const v=t.rowKey.value,b=Object.keys(a.value),_={};return b.length&&b.forEach(S=>{if(a.value[S].length){const w={children:[]};a.value[S].forEach(C=>{const x=$n(C,v);w.children.push(x),C[d.value]&&!_[x]&&(_[x]={children:[]})}),_[S]=w}}),_}),l=v=>{const b=t.rowKey.value,_={};return Ore(v,(S,w,C)=>{const x=$n(S,b);Array.isArray(w)?_[x]={children:w.map(M=>$n(M,b)),level:C}:r.value&&(_[x]={children:[],lazy:!0,level:C})},s.value,d.value),_},u=(v=!1,b=(_=>(_=o.store)==null?void 0:_.states.defaultExpandAll.value)())=>{var _;const S=c.value,w=h.value,C=Object.keys(S),x={};if(C.length){const M=y(n),E=[],A=(D,L)=>{if(v)return e.value?b||e.value.includes(L):!!(b||D!=null&&D.expanded);{const U=b||e.value&&e.value.includes(L);return!!(D!=null&&D.expanded||U)}};C.forEach(D=>{const L=M[D],U={...S[D]};if(U.expanded=A(L,D),U.lazy){const{loaded:j=!1,loading:V=!1}=L||{};U.loaded=!!j,U.loading=!!V,E.push(D)}x[D]=U});const O=Object.keys(w);r.value&&O.length&&E.length&&O.forEach(D=>{const L=M[D],U=w[D].children;if(E.includes(D)){if(x[D].children.length!==0)throw new Error("[ElTable]children must be an empty array.");x[D].children=U}else{const{loaded:j=!1,loading:V=!1}=L||{};x[D]={lazy:!0,loaded:!!j,loading:!!V,expanded:A(L,D),children:U,level:""}}})}n.value=x,(_=o.store)==null||_.updateTableScrollY()};Be(()=>e.value,()=>{u(!0)}),Be(()=>c.value,()=>{u()}),Be(()=>h.value,()=>{u()});const f=v=>{e.value=v,u()},m=(v,b)=>{o.store.assertRowKey();const _=t.rowKey.value,S=$n(v,_),w=S&&n.value[S];if(S&&w&&"expanded"in w){const C=w.expanded;b=typeof b>"u"?!w.expanded:b,n.value[S].expanded=b,C!==b&&o.emit("expand-change",v,b),o.store.updateTableScrollY()}},g=v=>{o.store.assertRowKey();const b=t.rowKey.value,_=$n(v,b),S=n.value[_];r.value&&S&&"loaded"in S&&!S.loaded?p(v,_,S):m(v,void 0)},p=(v,b,_)=>{const{load:S}=o.props;S&&!n.value[b].loaded&&(n.value[b].loading=!0,S(v,_,w=>{if(!Array.isArray(w))throw new TypeError("[ElTable] data must be an array");n.value[b].loading=!1,n.value[b].loaded=!0,n.value[b].expanded=!0,w.length&&(a.value[b]=w),o.emit("expand-change",v,!0)}))};return{loadData:p,loadOrToggle:g,toggleTreeExpansion:m,updateTreeExpandKeys:f,updateTreeData:u,normalize:l,states:{expandRowKeys:e,treeData:n,indent:i,lazy:r,lazyTreeNodeMap:a,lazyColumnIdentifier:d,childrenColumnName:s}}}const Fre=(t,e)=>{const n=e.sortingColumn;return!n||typeof n.sortable=="string"?t:Mre(t,e.sortProp,e.sortOrder,n.sortMethod,n.sortBy)},uf=t=>{const e=[];return t.forEach(n=>{n.children?e.push.apply(e,uf(n.children)):e.push(n)}),e};function Bre(){var t;const e=vt(),{size:n}=Rn((t=e.proxy)==null?void 0:t.$props),i=q(null),r=q([]),a=q([]),d=q(!1),s=q([]),o=q([]),c=q([]),h=q([]),l=q([]),u=q([]),f=q([]),m=q([]),g=[],p=q(0),v=q(0),b=q(0),_=q(!1),S=q([]),w=q(!1),C=q(!1),x=q(null),M=q({}),E=q(null),A=q(null),O=q(null),D=q(null),L=q(null);Be(r,()=>e.state&&k(!1),{deep:!0});const U=()=>{if(!i.value)throw new Error("[ElTable] prop row-key is required")},j=ee=>{var oe;(oe=ee.children)==null||oe.forEach(J=>{J.fixed=ee.fixed,j(J)})},V=()=>{s.value.forEach(ye=>{j(ye)}),h.value=s.value.filter(ye=>ye.fixed===!0||ye.fixed==="left"),l.value=s.value.filter(ye=>ye.fixed==="right"),h.value.length>0&&s.value[0]&&s.value[0].type==="selection"&&!s.value[0].fixed&&(s.value[0].fixed=!0,h.value.unshift(s.value[0]));const ee=s.value.filter(ye=>!ye.fixed);o.value=[].concat(h.value).concat(ee).concat(l.value);const oe=uf(ee),J=uf(h.value),ce=uf(l.value);p.value=oe.length,v.value=J.length,b.value=ce.length,c.value=[].concat(J).concat(oe).concat(ce),d.value=h.value.length>0||l.value.length>0},k=(ee,oe=!1)=>{ee&&V(),oe?e.state.doLayout():e.state.debouncedUpdateLayout()},F=ee=>S.value.includes(ee),T=()=>{_.value=!1,S.value.length&&(S.value=[],e.emit("selection-change",[]))},P=()=>{let ee;if(i.value){ee=[];const oe=Vo(S.value,i.value),J=Vo(r.value,i.value);for(const ce in oe)Mt(oe,ce)&&!J[ce]&&ee.push(oe[ce].row)}else ee=S.value.filter(oe=>!r.value.includes(oe));if(ee.length){const oe=S.value.filter(J=>!ee.includes(J));S.value=oe,e.emit("selection-change",oe.slice())}},H=()=>(S.value||[]).slice(),N=(ee,oe=void 0,J=!0)=>{if(Bc(S.value,ee,oe)){const ye=(S.value||[]).slice();J&&e.emit("select",ye,ee),e.emit("selection-change",ye)}},G=()=>{var ee,oe;const J=C.value?!_.value:!(_.value||S.value.length);_.value=J;let ce=!1,ye=0;const Oe=(oe=(ee=e==null?void 0:e.store)==null?void 0:ee.states)==null?void 0:oe.rowKey.value;r.value.forEach((ze,xe)=>{const Ve=xe+ye;x.value?x.value.call(null,ze,Ve)&&Bc(S.value,ze,J)&&(ce=!0):Bc(S.value,ze,J)&&(ce=!0),ye+=Z($n(ze,Oe))}),ce&&e.emit("selection-change",S.value?S.value.slice():[]),e.emit("select-all",S.value)},$=()=>{const ee=Vo(S.value,i.value);r.value.forEach(oe=>{const J=$n(oe,i.value),ce=ee[J];ce&&(S.value[ce.index]=oe)})},z=()=>{var ee,oe,J;if(((ee=r.value)==null?void 0:ee.length)===0){_.value=!1;return}let ce;i.value&&(ce=Vo(S.value,i.value));const ye=function(Ve){return ce?!!ce[$n(Ve,i.value)]:S.value.includes(Ve)};let Oe=!0,ze=0,xe=0;for(let Ve=0,we=(r.value||[]).length;Ve<we;Ve++){const Ie=(J=(oe=e==null?void 0:e.store)==null?void 0:oe.states)==null?void 0:J.rowKey.value,Ge=Ve+xe,it=r.value[Ve],dt=x.value&&x.value.call(null,it,Ge);if(ye(it))ze++;else if(!x.value||dt){Oe=!1;break}xe+=Z($n(it,Ie))}ze===0&&(Oe=!1),_.value=Oe},Z=ee=>{var oe;if(!e||!e.store)return 0;const{treeData:J}=e.store.states;let ce=0;const ye=(oe=J.value[ee])==null?void 0:oe.children;return ye&&(ce+=ye.length,ye.forEach(Oe=>{ce+=Z(Oe)})),ce},W=(ee,oe)=>{Array.isArray(ee)||(ee=[ee]);const J={};return ee.forEach(ce=>{M.value[ce.id]=oe,J[ce.columnKey||ce.id]=oe}),J},te=(ee,oe,J)=>{A.value&&A.value!==ee&&(A.value.order=null),A.value=ee,O.value=oe,D.value=J},ie=()=>{let ee=y(a);Object.keys(M.value).forEach(oe=>{const J=M.value[oe];if(!J||J.length===0)return;const ce=E2({columns:c.value},oe);ce&&ce.filterMethod&&(ee=ee.filter(ye=>J.some(Oe=>ce.filterMethod.call(null,Oe,ye,ce))))}),E.value=ee},re=()=>{r.value=Fre(E.value,{sortingColumn:A.value,sortProp:O.value,sortOrder:D.value})},_e=(ee=void 0)=>{ee&&ee.filter||ie(),re()},Pe=ee=>{const{tableHeaderRef:oe}=e.refs;if(!oe)return;const J=Object.assign({},oe.filterPanels),ce=Object.keys(J);if(ce.length)if(typeof ee=="string"&&(ee=[ee]),Array.isArray(ee)){const ye=ee.map(Oe=>Are({columns:c.value},Oe));ce.forEach(Oe=>{const ze=ye.find(xe=>xe.id===Oe);ze&&(ze.filteredValue=[])}),e.store.commit("filterChange",{column:ye,values:[],silent:!0,multi:!0})}else ce.forEach(ye=>{const Oe=c.value.find(ze=>ze.id===ye);Oe&&(Oe.filteredValue=[])}),M.value={},e.store.commit("filterChange",{column:{},values:[],silent:!0})},K=()=>{A.value&&(te(null,null,null),e.store.commit("changeSortCondition",{silent:!0}))},{setExpandRowKeys:Q,toggleRowExpansion:fe,updateExpandRows:ge,states:se,isRowExpanded:me}=Ire({data:r,rowKey:i}),{updateTreeExpandKeys:be,toggleTreeExpansion:Me,updateTreeData:Ee,loadOrToggle:X,states:Y}=Nre({data:r,rowKey:i}),{updateCurrentRowData:le,updateCurrentRow:Ce,setCurrentRowKey:Re,states:Ne}=Dre({data:r,rowKey:i});return{assertRowKey:U,updateColumns:V,scheduleLayout:k,isSelected:F,clearSelection:T,cleanSelection:P,getSelectionRows:H,toggleRowSelection:N,_toggleAllSelection:G,toggleAllSelection:null,updateSelectionByRowKey:$,updateAllSelected:z,updateFilters:W,updateCurrentRow:Ce,updateSort:te,execFilter:ie,execSort:re,execQuery:_e,clearFilter:Pe,clearSort:K,toggleRowExpansion:fe,setExpandRowKeysAdapter:ee=>{Q(ee),be(ee)},setCurrentRowKey:Re,toggleRowExpansionAdapter:(ee,oe)=>{c.value.some(({type:ce})=>ce==="expand")?fe(ee,oe):Me(ee,oe)},isRowExpanded:me,updateExpandRows:ge,updateCurrentRowData:le,loadOrToggle:X,updateTreeData:Ee,states:{tableSize:n,rowKey:i,data:r,_data:a,isComplex:d,_columns:s,originColumns:o,columns:c,fixedColumns:h,rightFixedColumns:l,leafColumns:u,fixedLeafColumns:f,rightFixedLeafColumns:m,updateOrderFns:g,leafColumnsLength:p,fixedLeafColumnsLength:v,rightFixedLeafColumnsLength:b,isAllSelected:_,selection:S,reserveSelection:w,selectOnIndeterminate:C,selectable:x,filters:M,filteredData:E,sortingColumn:A,sortProp:O,sortOrder:D,hoverRow:L,...se,...Y,...Ne}}}function wg(t,e){return t.map(n=>{var i;return n.id===e.id?e:((i=n.children)!=null&&i.length&&(n.children=wg(n.children,e)),n)})}function Cg(t){t.forEach(e=>{var n,i;e.no=(n=e.getColumnIndex)==null?void 0:n.call(e),(i=e.children)!=null&&i.length&&Cg(e.children)}),t.sort((e,n)=>e.no-n.no)}function Ure(){const t=vt(),e=Bre();return{ns:Ue("table"),...e,mutations:{setData(d,s){const o=y(d._data)!==s;d.data.value=s,d._data.value=s,t.store.execQuery(),t.store.updateCurrentRowData(),t.store.updateExpandRows(),t.store.updateTreeData(t.store.states.defaultExpandAll.value),y(d.reserveSelection)?(t.store.assertRowKey(),t.store.updateSelectionByRowKey()):o?t.store.clearSelection():t.store.cleanSelection(),t.store.updateAllSelected(),t.$ready&&t.store.scheduleLayout()},insertColumn(d,s,o,c){const h=y(d._columns);let l=[];o?(o&&!o.children&&(o.children=[]),o.children.push(s),l=wg(h,o)):(h.push(s),l=h),Cg(l),d._columns.value=l,d.updateOrderFns.push(c),s.type==="selection"&&(d.selectable.value=s.selectable,d.reserveSelection.value=s.reserveSelection),t.$ready&&(t.store.updateColumns(),t.store.scheduleLayout())},updateColumnOrder(d,s){var o;((o=s.getColumnIndex)==null?void 0:o.call(s))!==s.no&&(Cg(d._columns.value),t.$ready&&t.store.updateColumns())},removeColumn(d,s,o,c){const h=y(d._columns)||[];if(o)o.children.splice(o.children.findIndex(u=>u.id===s.id),1),et(()=>{var u;((u=o.children)==null?void 0:u.length)===0&&delete o.children}),d._columns.value=wg(h,o);else{const u=h.indexOf(s);u>-1&&(h.splice(u,1),d._columns.value=h)}const l=d.updateOrderFns.indexOf(c);l>-1&&d.updateOrderFns.splice(l,1),t.$ready&&(t.store.updateColumns(),t.store.scheduleLayout())},sort(d,s){const{prop:o,order:c,init:h}=s;if(o){const l=y(d.columns).find(u=>u.property===o);l&&(l.order=c,t.store.updateSort(l,o,c),t.store.commit("changeSortCondition",{init:h}))}},changeSortCondition(d,s){const{sortingColumn:o,sortProp:c,sortOrder:h}=d,l=y(o),u=y(c),f=y(h);f===null&&(d.sortingColumn.value=null,d.sortProp.value=null);const m={filter:!0};t.store.execQuery(m),(!s||!(s.silent||s.init))&&t.emit("sort-change",{column:l,prop:u,order:f}),t.store.updateTableScrollY()},filterChange(d,s){const{column:o,values:c,silent:h}=s,l=t.store.updateFilters(o,c);t.store.execQuery(),h||t.emit("filter-change",l),t.store.updateTableScrollY()},toggleAllSelection(){t.store.toggleAllSelection()},rowSelectedChanged(d,s){t.store.toggleRowSelection(s),t.store.updateAllSelected()},setHoverRow(d,s){d.hoverRow.value=s},setCurrentRow(d,s){t.store.updateCurrentRow(s)}},commit:function(d,...s){const o=t.store.mutations;if(o[d])o[d].apply(t,[t.store.states].concat(s));else throw new Error(`Action not found: ${d}`)},updateTableScrollY:function(){et(()=>t.layout.updateScrollY.apply(t.layout))}}}const Uc={rowKey:"rowKey",defaultExpandAll:"defaultExpandAll",selectOnIndeterminate:"selectOnIndeterminate",indent:"indent",lazy:"lazy",data:"data","treeProps.hasChildren":{key:"lazyColumnIdentifier",default:"hasChildren"},"treeProps.children":{key:"childrenColumnName",default:"children"}};function Vre(t,e){if(!t)throw new Error("Table is required.");const n=Ure();return n.toggleAllSelection=pi(n._toggleAllSelection,10),Object.keys(Uc).forEach(i=>{R2(P2(e,i),i,n)}),Hre(n,e),n}function Hre(t,e){Object.keys(Uc).forEach(n=>{Be(()=>P2(e,n),i=>{R2(i,n,t)})})}function R2(t,e,n){let i=t,r=Uc[e];typeof Uc[e]=="object"&&(r=r.key,i=i||Uc[e].default),n.states[r].value=i}function P2(t,e){if(e.includes(".")){const n=e.split(".");let i=t;return n.forEach(r=>{i=i[r]}),i}else return t[e]}class zre{constructor(e){this.observers=[],this.table=null,this.store=null,this.columns=[],this.fit=!0,this.showHeader=!0,this.height=q(null),this.scrollX=q(!1),this.scrollY=q(!1),this.bodyWidth=q(null),this.fixedWidth=q(null),this.rightFixedWidth=q(null),this.gutterWidth=0;for(const n in e)Mt(e,n)&&(en(this[n])?this[n].value=e[n]:this[n]=e[n]);if(!this.table)throw new Error("Table is required for Table Layout");if(!this.store)throw new Error("Store is required for Table Layout")}updateScrollY(){if(this.height.value===null)return!1;const n=this.table.refs.scrollBarRef;if(this.table.vnode.el&&(n!=null&&n.wrapRef)){let i=!0;const r=this.scrollY.value;return i=n.wrapRef.scrollHeight>n.wrapRef.clientHeight,this.scrollY.value=i,r!==i}return!1}setHeight(e,n="height"){if(!kt)return;const i=this.table.vnode.el;if(e=Rre(e),this.height.value=Number(e),!i&&(e||e===0))return et(()=>this.setHeight(e,n));typeof e=="number"?(i.style[n]=`${e}px`,this.updateElsHeight()):typeof e=="string"&&(i.style[n]=e,this.updateElsHeight())}setMaxHeight(e){this.setHeight(e,"max-height")}getFlattenColumns(){const e=[];return this.table.store.states.columns.value.forEach(i=>{i.isColumnGroup?e.push.apply(e,i.columns):e.push(i)}),e}updateElsHeight(){this.updateScrollY(),this.notifyObservers("scrollable")}headerDisplayNone(e){if(!e)return!0;let n=e;for(;n.tagName!=="DIV";){if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}updateColumnsWidth(){if(!kt)return;const e=this.fit,n=this.table.vnode.el.clientWidth;let i=0;const r=this.getFlattenColumns(),a=r.filter(o=>typeof o.width!="number");if(r.forEach(o=>{typeof o.width=="number"&&o.realWidth&&(o.realWidth=null)}),a.length>0&&e){if(r.forEach(o=>{i+=Number(o.width||o.minWidth||80)}),i<=n){this.scrollX.value=!1;const o=n-i;if(a.length===1)a[0].realWidth=Number(a[0].minWidth||80)+o;else{const c=a.reduce((u,f)=>u+Number(f.minWidth||80),0),h=o/c;let l=0;a.forEach((u,f)=>{if(f===0)return;const m=Math.floor(Number(u.minWidth||80)*h);l+=m,u.realWidth=Number(u.minWidth||80)+m}),a[0].realWidth=Number(a[0].minWidth||80)+o-l}}else this.scrollX.value=!0,a.forEach(o=>{o.realWidth=Number(o.minWidth)});this.bodyWidth.value=Math.max(i,n),this.table.state.resizeState.value.width=this.bodyWidth.value}else r.forEach(o=>{!o.width&&!o.minWidth?o.realWidth=80:o.realWidth=Number(o.width||o.minWidth),i+=o.realWidth}),this.scrollX.value=i>n,this.bodyWidth.value=i;const d=this.store.states.fixedColumns.value;if(d.length>0){let o=0;d.forEach(c=>{o+=Number(c.realWidth||c.width)}),this.fixedWidth.value=o}const s=this.store.states.rightFixedColumns.value;if(s.length>0){let o=0;s.forEach(c=>{o+=Number(c.realWidth||c.width)}),this.rightFixedWidth.value=o}this.notifyObservers("columns")}addObserver(e){this.observers.push(e)}removeObserver(e){const n=this.observers.indexOf(e);n!==-1&&this.observers.splice(n,1)}notifyObservers(e){this.observers.forEach(i=>{var r,a;switch(e){case"columns":(r=i.state)==null||r.onColumnsChange(this);break;case"scrollable":(a=i.state)==null||a.onScrollableChange(this);break;default:throw new Error(`Table Layout don't have event ${e}.`)}})}}const{CheckboxGroup:$re}=er,Wre=de({name:"ElTableFilterPanel",components:{ElCheckbox:er,ElCheckboxGroup:$re,ElScrollbar:Cs,ElTooltip:mi,ElIcon:tt,ArrowDown:ao,ArrowUp:_h},directives:{ClickOutside:ro},props:{placement:{type:String,default:"bottom-start"},store:{type:Object},column:{type:Object},upDataColumn:{type:Function}},setup(t){const e=vt(),{t:n}=Pt(),i=Ue("table-filter"),r=e==null?void 0:e.parent;r.filterPanels.value[t.column.id]||(r.filterPanels.value[t.column.id]=e);const a=q(!1),d=q(null),s=R(()=>t.column&&t.column.filters),o=R({get:()=>{var S;return(((S=t.column)==null?void 0:S.filteredValue)||[])[0]},set:S=>{c.value&&(typeof S<"u"&&S!==null?c.value.splice(0,1,S):c.value.splice(0,1))}}),c=R({get(){return t.column?t.column.filteredValue||[]:[]},set(S){t.column&&t.upDataColumn("filteredValue",S)}}),h=R(()=>t.column?t.column.filterMultiple:!0),l=S=>S.value===o.value,u=()=>{a.value=!1},f=S=>{S.stopPropagation(),a.value=!a.value},m=()=>{a.value=!1},g=()=>{b(c.value),u()},p=()=>{c.value=[],b(c.value),u()},v=S=>{o.value=S,b(typeof S<"u"&&S!==null?c.value:[]),u()},b=S=>{t.store.commit("filterChange",{column:t.column,values:S}),t.store.updateAllSelected()};Be(a,S=>{t.column&&t.upDataColumn("filterOpened",S)},{immediate:!0});const _=R(()=>{var S,w;return(w=(S=d.value)==null?void 0:S.popperRef)==null?void 0:w.contentRef});return{tooltipVisible:a,multiple:h,filteredValue:c,filterValue:o,filters:s,handleConfirm:g,handleReset:p,handleSelect:v,isActive:l,t:n,ns:i,showFilterPanel:f,hideFilterPanel:m,popperPaneRef:_,tooltip:d}}}),Gre={key:0},jre=["disabled"],Xre=["label","onClick"];function Kre(t,e,n,i,r,a){const d=ft("el-checkbox"),s=ft("el-checkbox-group"),o=ft("el-scrollbar"),c=ft("arrow-up"),h=ft("arrow-down"),l=ft("el-icon"),u=ft("el-tooltip"),f=Wc("click-outside");return I(),ke(u,{ref:"tooltip",visible:t.tooltipVisible,offset:0,placement:t.placement,"show-arrow":!1,"stop-popper-mouse-event":!1,teleported:"",effect:"light",pure:"","popper-class":t.ns.b(),persistent:""},{content:ve(()=>[t.multiple?(I(),ne("div",Gre,[ae("div",{class:B(t.ns.e("content"))},[ue(o,{"wrap-class":t.ns.e("wrap")},{default:ve(()=>[ue(s,{modelValue:t.filteredValue,"onUpdate:modelValue":e[0]||(e[0]=m=>t.filteredValue=m),class:B(t.ns.e("checkbox-group"))},{default:ve(()=>[(I(!0),ne(Qe,null,wt(t.filters,m=>(I(),ke(d,{key:m.value,label:m.value},{default:ve(()=>[Tt($e(m.text),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue","class"])]),_:1},8,["wrap-class"])],2),ae("div",{class:B(t.ns.e("bottom"))},[ae("button",{class:B({[t.ns.is("disabled")]:t.filteredValue.length===0}),disabled:t.filteredValue.length===0,type:"button",onClick:e[1]||(e[1]=(...m)=>t.handleConfirm&&t.handleConfirm(...m))},$e(t.t("el.table.confirmFilter")),11,jre),ae("button",{type:"button",onClick:e[2]||(e[2]=(...m)=>t.handleReset&&t.handleReset(...m))},$e(t.t("el.table.resetFilter")),1)],2)])):(I(),ne("ul",{key:1,class:B(t.ns.e("list"))},[ae("li",{class:B([t.ns.e("list-item"),{[t.ns.is("active")]:t.filterValue===void 0||t.filterValue===null}]),onClick:e[3]||(e[3]=m=>t.handleSelect(null))},$e(t.t("el.table.clearFilter")),3),(I(!0),ne(Qe,null,wt(t.filters,m=>(I(),ne("li",{key:m.value,class:B([t.ns.e("list-item"),t.ns.is("active",t.isActive(m))]),label:m.value,onClick:g=>t.handleSelect(m.value)},$e(m.text),11,Xre))),128))],2))]),default:ve(()=>[pt((I(),ne("span",{class:B([`${t.ns.namespace.value}-table__column-filter-trigger`,`${t.ns.namespace.value}-none-outline`]),onClick:e[4]||(e[4]=(...m)=>t.showFilterPanel&&t.showFilterPanel(...m))},[ue(l,null,{default:ve(()=>[t.column.filterOpened?(I(),ke(c,{key:0})):(I(),ke(h,{key:1}))]),_:1})],2)),[[f,t.hideFilterPanel,t.popperPaneRef]])]),_:1},8,["visible","placement","popper-class"])}var Yre=je(Wre,[["render",Kre],["__file","/home/runner/work/element-plus/element-plus/packages/components/table/src/filter-panel.vue"]]);function O2(t){const e=vt();ih(()=>{n.value.addObserver(e)}),mt(()=>{i(n.value),r(n.value)}),vs(()=>{i(n.value),r(n.value)}),oo(()=>{n.value.removeObserver(e)});const n=R(()=>{const a=t.layout;if(!a)throw new Error("Can not find table layout.");return a}),i=a=>{var d;const s=((d=t.vnode.el)==null?void 0:d.querySelectorAll("colgroup > col"))||[];if(!s.length)return;const o=a.getFlattenColumns(),c={};o.forEach(h=>{c[h.id]=h});for(let h=0,l=s.length;h<l;h++){const u=s[h],f=u.getAttribute("name"),m=c[f];m&&u.setAttribute("width",m.realWidth||m.width)}},r=a=>{var d,s;const o=((d=t.vnode.el)==null?void 0:d.querySelectorAll("colgroup > col[name=gutter]"))||[];for(let h=0,l=o.length;h<l;h++)o[h].setAttribute("width",a.scrollY.value?a.gutterWidth:"0");const c=((s=t.vnode.el)==null?void 0:s.querySelectorAll("th.gutter"))||[];for(let h=0,l=c.length;h<l;h++){const u=c[h];u.style.width=a.scrollY.value?`${a.gutterWidth}px`:"0",u.style.display=a.scrollY.value?"":"none"}};return{tableLayout:n.value,onColumnsChange:i,onScrollableChange:r}}const zr=Symbol("ElTable");function qre(t,e){const n=vt(),i=Je(zr),r=g=>{g.stopPropagation()},a=(g,p)=>{!p.filters&&p.sortable?m(g,p,!1):p.filterable&&!p.sortable&&r(g),i==null||i.emit("header-click",p,g)},d=(g,p)=>{i==null||i.emit("header-contextmenu",p,g)},s=q(null),o=q(!1),c=q({}),h=(g,p)=>{if(kt&&!(p.children&&p.children.length>0)&&s.value&&t.border){o.value=!0;const v=i;e("set-drag-visible",!0);const _=(v==null?void 0:v.vnode.el).getBoundingClientRect().left,S=n.vnode.el.querySelector(`th.${p.id}`),w=S.getBoundingClientRect(),C=w.left-_+30;Ar(S,"noclick"),c.value={startMouseLeft:g.clientX,startLeft:w.right-_,startColumnLeft:w.left-_,tableLeft:_};const x=v==null?void 0:v.refs.resizeProxy;x.style.left=`${c.value.startLeft}px`,document.onselectstart=function(){return!1},document.ondragstart=function(){return!1};const M=A=>{const O=A.clientX-c.value.startMouseLeft,D=c.value.startLeft+O;x.style.left=`${Math.max(C,D)}px`},E=()=>{if(o.value){const{startColumnLeft:A,startLeft:O}=c.value,L=Number.parseInt(x.style.left,10)-A;p.width=p.realWidth=L,v==null||v.emit("header-dragend",p.width,O-A,p,g),requestAnimationFrame(()=>{t.store.scheduleLayout(!1,!0)}),document.body.style.cursor="",o.value=!1,s.value=null,c.value={},e("set-drag-visible",!1)}document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",E),document.onselectstart=null,document.ondragstart=null,setTimeout(()=>{Ci(S,"noclick")},0)};document.addEventListener("mousemove",M),document.addEventListener("mouseup",E)}},l=(g,p)=>{if(p.children&&p.children.length>0)return;const v=g.target;if(!Yi(v))return;const b=v==null?void 0:v.closest("th");if(!(!p||!p.resizable)&&!o.value&&t.border){const _=b.getBoundingClientRect(),S=document.body.style;_.width>12&&_.right-g.pageX<8?(S.cursor="col-resize",vr(b,"is-sortable")&&(b.style.cursor="col-resize"),s.value=p):o.value||(S.cursor="",vr(b,"is-sortable")&&(b.style.cursor="pointer"),s.value=null)}},u=()=>{kt&&(document.body.style.cursor="")},f=({order:g,sortOrders:p})=>{if(g==="")return p[0];const v=p.indexOf(g||null);return p[v>p.length-2?0:v+1]},m=(g,p,v)=>{var b;g.stopPropagation();const _=p.order===v?null:v||f(p),S=(b=g.target)==null?void 0:b.closest("th");if(S&&vr(S,"noclick")){Ci(S,"noclick");return}if(!p.sortable)return;const w=t.store.states;let C=w.sortProp.value,x;const M=w.sortingColumn.value;(M!==p||M===p&&M.order===null)&&(M&&(M.order=null),w.sortingColumn.value=p,C=p.property),_?x=p.order=_:x=p.order=null,w.sortProp.value=C,w.sortOrder.value=x,i==null||i.store.commit("changeSortCondition")};return{handleHeaderClick:a,handleHeaderContextMenu:d,handleMouseDown:h,handleMouseMove:l,handleMouseOut:u,handleSortClick:m,handleFilterClick:r}}function Zre(t){const e=Je(zr),n=Ue("table");return{getHeaderRowStyle:s=>{const o=e==null?void 0:e.props.headerRowStyle;return typeof o=="function"?o.call(null,{rowIndex:s}):o},getHeaderRowClass:s=>{const o=[],c=e==null?void 0:e.props.headerRowClassName;return typeof c=="string"?o.push(c):typeof c=="function"&&o.push(c.call(null,{rowIndex:s})),o.join(" ")},getHeaderCellStyle:(s,o,c,h)=>{var l;let u=(l=e==null?void 0:e.props.headerCellStyle)!=null?l:{};typeof u=="function"&&(u=u.call(null,{rowIndex:s,columnIndex:o,row:c,column:h}));const f=O0(o,h.fixed,t.store,c);return Nl(f,"left"),Nl(f,"right"),Object.assign({},u,f)},getHeaderCellClass:(s,o,c,h)=>{const l=P0(n.b(),o,h.fixed,t.store,c),u=[h.id,h.order,h.headerAlign,h.className,h.labelClassName,...l];h.children||u.push("is-leaf"),h.sortable&&u.push("is-sortable");const f=e==null?void 0:e.props.headerCellClassName;return typeof f=="string"?u.push(f):typeof f=="function"&&u.push(f.call(null,{rowIndex:s,columnIndex:o,row:c,column:h})),u.push(n.e("cell")),u.filter(m=>!!m).join(" ")}}}const L2=t=>{const e=[];return t.forEach(n=>{n.children?(e.push(n),e.push.apply(e,L2(n.children))):e.push(n)}),e},Jre=t=>{let e=1;const n=(a,d)=>{if(d&&(a.level=d.level+1,e<a.level&&(e=a.level)),a.children){let s=0;a.children.forEach(o=>{n(o,a),s+=o.colSpan}),a.colSpan=s}else a.colSpan=1};t.forEach(a=>{a.level=1,n(a,void 0)});const i=[];for(let a=0;a<e;a++)i.push([]);return L2(t).forEach(a=>{a.children?(a.rowSpan=1,a.children.forEach(d=>d.isSubColumn=!0)):a.rowSpan=e-a.level+1,i[a.level-1].push(a)}),i};function Qre(t){const e=Je(zr),n=R(()=>Jre(t.store.states.originColumns.value));return{isGroup:R(()=>{const a=n.value.length>1;return a&&e&&(e.state.isGroup.value=!0),a}),toggleAllSelection:a=>{a.stopPropagation(),e==null||e.store.commit("toggleAllSelection")},columnRows:n}}var ese=de({name:"ElTableHeader",components:{ElCheckbox:er},props:{fixed:{type:String,default:""},store:{required:!0,type:Object},border:Boolean,defaultSort:{type:Object,default:()=>({prop:"",order:""})}},setup(t,{emit:e}){const n=vt(),i=Je(zr),r=Ue("table"),a=q({}),{onColumnsChange:d,onScrollableChange:s}=O2(i);mt(async()=>{await et(),await et();const{prop:C,order:x}=t.defaultSort;i==null||i.store.commit("sort",{prop:C,order:x,init:!0})});const{handleHeaderClick:o,handleHeaderContextMenu:c,handleMouseDown:h,handleMouseMove:l,handleMouseOut:u,handleSortClick:f,handleFilterClick:m}=qre(t,e),{getHeaderRowStyle:g,getHeaderRowClass:p,getHeaderCellStyle:v,getHeaderCellClass:b}=Zre(t),{isGroup:_,toggleAllSelection:S,columnRows:w}=Qre(t);return n.state={onColumnsChange:d,onScrollableChange:s},n.filterPanels=a,{ns:r,filterPanels:a,onColumnsChange:d,onScrollableChange:s,columnRows:w,getHeaderRowClass:p,getHeaderRowStyle:g,getHeaderCellClass:b,getHeaderCellStyle:v,handleHeaderClick:o,handleHeaderContextMenu:c,handleMouseDown:h,handleMouseMove:l,handleMouseOut:u,handleSortClick:f,handleFilterClick:m,isGroup:_,toggleAllSelection:S}},render(){const{ns:t,isGroup:e,columnRows:n,getHeaderCellStyle:i,getHeaderCellClass:r,getHeaderRowClass:a,getHeaderRowStyle:d,handleHeaderClick:s,handleHeaderContextMenu:o,handleMouseDown:c,handleMouseMove:h,handleSortClick:l,handleMouseOut:u,store:f,$parent:m}=this;let g=1;return st("thead",{class:{[t.is("group")]:e}},n.map((p,v)=>st("tr",{class:a(v),key:v,style:d(v)},p.map((b,_)=>(b.rowSpan>g&&(g=b.rowSpan),st("th",{class:r(v,_,p,b),colspan:b.colSpan,key:`${b.id}-thead`,rowspan:b.rowSpan,style:i(v,_,p,b),onClick:S=>s(S,b),onContextmenu:S=>o(S,b),onMousedown:S=>c(S,b),onMousemove:S=>h(S,b),onMouseout:u},[st("div",{class:["cell",b.filteredValue&&b.filteredValue.length>0?"highlight":""]},[b.renderHeader?b.renderHeader({column:b,$index:_,store:f,_self:m}):b.label,b.sortable&&st("span",{onClick:S=>l(S,b),class:"caret-wrapper"},[st("i",{onClick:S=>l(S,b,"ascending"),class:"sort-caret ascending"}),st("i",{onClick:S=>l(S,b,"descending"),class:"sort-caret descending"})]),b.filterable&&st(Yre,{store:f,placement:b.filterPlacement||"bottom-start",column:b,upDataColumn:(S,w)=>{b[S]=w}})])]))))))}});function tse(t){const e=Je(zr),n=q(""),i=q(st("div")),{nextZIndex:r}=Kl(),a=(f,m,g)=>{var p;const v=e,b=tm(f);let _;const S=(p=v==null?void 0:v.vnode.el)==null?void 0:p.dataset.prefix;b&&(_=qw({columns:t.store.states.columns.value},b,S),_&&(v==null||v.emit(`cell-${g}`,m,_,b,f))),v==null||v.emit(`row-${g}`,m,_,f)},d=(f,m)=>{a(f,m,"dblclick")},s=(f,m)=>{t.store.commit("setCurrentRow",m),a(f,m,"click")},o=(f,m)=>{a(f,m,"contextmenu")},c=pi(f=>{t.store.commit("setHoverRow",f)},30),h=pi(()=>{t.store.commit("setHoverRow",null)},30);return{handleDoubleClick:d,handleClick:s,handleContextMenu:o,handleMouseEnter:c,handleMouseLeave:h,handleCellMouseEnter:(f,m,g)=>{var p;const v=e,b=tm(f),_=(p=v==null?void 0:v.vnode.el)==null?void 0:p.dataset.prefix;if(b){const M=qw({columns:t.store.states.columns.value},b,_),E=v.hoverState={cell:b,column:M,row:m};v==null||v.emit("cell-mouse-enter",E.row,E.column,E.cell,f)}if(!g)return;const S=f.target.querySelector(".cell");if(!(vr(S,`${_}-tooltip`)&&S.childNodes.length))return;const w=document.createRange();w.setStart(S,0),w.setEnd(S,S.childNodes.length);const C=Math.round(w.getBoundingClientRect().width),x=(Number.parseInt(ts(S,"paddingLeft"),10)||0)+(Number.parseInt(ts(S,"paddingRight"),10)||0);(C+x>S.offsetWidth||S.scrollWidth>S.offsetWidth)&&Lre(e==null?void 0:e.refs.tableWrapper,b,b.innerText||b.textContent,r,g)},handleCellMouseLeave:f=>{if(!tm(f))return;const g=e==null?void 0:e.hoverState;e==null||e.emit("cell-mouse-leave",g==null?void 0:g.row,g==null?void 0:g.column,g==null?void 0:g.cell,f)},tooltipContent:n,tooltipTrigger:i}}function nse(t){const e=Je(zr),n=Ue("table");return{getRowStyle:(c,h)=>{const l=e==null?void 0:e.props.rowStyle;return typeof l=="function"?l.call(null,{row:c,rowIndex:h}):l||null},getRowClass:(c,h)=>{const l=[n.e("row")];e!=null&&e.props.highlightCurrentRow&&c===t.store.states.currentRow.value&&l.push("current-row"),t.stripe&&h%2===1&&l.push(n.em("row","striped"));const u=e==null?void 0:e.props.rowClassName;return typeof u=="string"?l.push(u):typeof u=="function"&&l.push(u.call(null,{row:c,rowIndex:h})),l},getCellStyle:(c,h,l,u)=>{const f=e==null?void 0:e.props.cellStyle;let m=f??{};typeof f=="function"&&(m=f.call(null,{rowIndex:c,columnIndex:h,row:l,column:u}));const g=O0(h,t==null?void 0:t.fixed,t.store);return Nl(g,"left"),Nl(g,"right"),Object.assign({},m,g)},getCellClass:(c,h,l,u,f)=>{const m=P0(n.b(),h,t==null?void 0:t.fixed,t.store,void 0,f),g=[u.id,u.align,u.className,...m],p=e==null?void 0:e.props.cellClassName;return typeof p=="string"?g.push(p):typeof p=="function"&&g.push(p.call(null,{rowIndex:c,columnIndex:h,row:l,column:u})),g.push(n.e("cell")),g.filter(v=>!!v).join(" ")},getSpan:(c,h,l,u)=>{let f=1,m=1;const g=e==null?void 0:e.props.spanMethod;if(typeof g=="function"){const p=g({row:c,column:h,rowIndex:l,columnIndex:u});Array.isArray(p)?(f=p[0],m=p[1]):typeof p=="object"&&(f=p.rowspan,m=p.colspan)}return{rowspan:f,colspan:m}},getColspanRealWidth:(c,h,l)=>{if(h<1)return c[l].realWidth;const u=c.map(({realWidth:f,width:m})=>f||m).slice(l,l+h);return Number(u.reduce((f,m)=>Number(f)+Number(m),-1))}}}function ise(t){const e=Je(zr),n=Ue("table"),{handleDoubleClick:i,handleClick:r,handleContextMenu:a,handleMouseEnter:d,handleMouseLeave:s,handleCellMouseEnter:o,handleCellMouseLeave:c,tooltipContent:h,tooltipTrigger:l}=tse(t),{getRowStyle:u,getRowClass:f,getCellStyle:m,getCellClass:g,getSpan:p,getColspanRealWidth:v}=nse(t),b=R(()=>t.store.states.columns.value.findIndex(({type:x})=>x==="default")),_=(x,M)=>{const E=e.props.rowKey;return E?$n(x,E):M},S=(x,M,E,A=!1)=>{const{tooltipEffect:O,tooltipOptions:D,store:L}=t,{indent:U,columns:j}=L.states,V=f(x,M);let k=!0;return E&&(V.push(n.em("row",`level-${E.level}`)),k=E.display),st("tr",{style:[k?null:{display:"none"},u(x,M)],class:V,key:_(x,M),onDblclick:T=>i(T,x),onClick:T=>r(T,x),onContextmenu:T=>a(T,x),onMouseenter:()=>d(M),onMouseleave:s},j.value.map((T,P)=>{const{rowspan:H,colspan:N}=p(x,T,M,P);if(!H||!N)return null;const G={...T};G.realWidth=v(j.value,N,P);const $={store:t.store,_self:t.context||e,column:G,row:x,$index:M,cellIndex:P,expanded:A};P===b.value&&E&&($.treeNode={indent:E.level*U.value,level:E.level},typeof E.expanded=="boolean"&&($.treeNode.expanded=E.expanded,"loading"in E&&($.treeNode.loading=E.loading),"noLazyChildren"in E&&($.treeNode.noLazyChildren=E.noLazyChildren)));const z=`${M},${P}`,Z=G.columnKey||G.rawColumnKey||"",W=w(P,T,$),te=T.showOverflowTooltip&&aT({effect:O},D,T.showOverflowTooltip);return st("td",{style:m(M,P,x,T),class:g(M,P,x,T,N-1),key:`${Z}${z}`,rowspan:H,colspan:N,onMouseenter:ie=>o(ie,x,te),onMouseleave:c},[W])}))},w=(x,M,E)=>M.renderCell(E);return{wrappedRowRender:(x,M)=>{const E=t.store,{isRowExpanded:A,assertRowKey:O}=E,{treeData:D,lazyTreeNodeMap:L,childrenColumnName:U,rowKey:j}=E.states,V=E.states.columns.value;if(V.some(({type:F})=>F==="expand")){const F=A(x),T=S(x,M,void 0,F),P=e.renderExpanded;return F?P?[[T,st("tr",{key:`expanded-row__${T.key}`},[st("td",{colspan:V.length,class:`${n.e("cell")} ${n.e("expanded-cell")}`},[P({row:x,$index:M,store:E,expanded:F})])])]]:(console.error("[Element Error]renderExpanded is required."),T):[[T]]}else if(Object.keys(D.value).length){O();const F=$n(x,j.value);let T=D.value[F],P=null;T&&(P={expanded:T.expanded,level:T.level,display:!0},typeof T.lazy=="boolean"&&(typeof T.loaded=="boolean"&&T.loaded&&(P.noLazyChildren=!(T.children&&T.children.length)),P.loading=T.loading));const H=[S(x,M,P)];if(T){let N=0;const G=(z,Z)=>{z&&z.length&&Z&&z.forEach(W=>{const te={display:Z.display&&Z.expanded,level:Z.level+1,expanded:!1,noLazyChildren:!1,loading:!1},ie=$n(W,j.value);if(ie==null)throw new Error("For nested data item, row-key is required.");if(T={...D.value[ie]},T&&(te.expanded=T.expanded,T.level=T.level||te.level,T.display=!!(T.expanded&&te.display),typeof T.lazy=="boolean"&&(typeof T.loaded=="boolean"&&T.loaded&&(te.noLazyChildren=!(T.children&&T.children.length)),te.loading=T.loading)),N++,H.push(S(W,M+N,te)),T){const re=L.value[ie]||W[U.value];G(re,T)}})};T.display=!0;const $=L.value[F]||x[U.value];G($,T)}return H}else return S(x,M,void 0)},tooltipContent:h,tooltipTrigger:l}}const rse={store:{required:!0,type:Object},stripe:Boolean,tooltipEffect:String,tooltipOptions:{type:Object},context:{default:()=>({}),type:Object},rowClassName:[String,Function],rowStyle:[Object,Function],fixed:{type:String,default:""},highlight:Boolean};var sse=de({name:"ElTableBody",props:rse,setup(t){const e=vt(),n=Je(zr),i=Ue("table"),{wrappedRowRender:r,tooltipContent:a,tooltipTrigger:d}=ise(t),{onColumnsChange:s,onScrollableChange:o}=O2(n);return Be(t.store.states.hoverRow,(c,h)=>{if(!t.store.states.isComplex.value||!kt)return;let l=window.requestAnimationFrame;l||(l=u=>window.setTimeout(u,16)),l(()=>{const u=e==null?void 0:e.vnode.el,f=Array.from((u==null?void 0:u.children)||[]).filter(p=>p==null?void 0:p.classList.contains(`${i.e("row")}`)),m=f[h],g=f[c];m&&Ci(m,"hover-row"),g&&Ar(g,"hover-row")})}),oo(()=>{var c;(c=Qr)==null||c()}),{ns:i,onColumnsChange:s,onScrollableChange:o,wrappedRowRender:r,tooltipContent:a,tooltipTrigger:d}},render(){const{wrappedRowRender:t,store:e}=this,n=e.states.data.value||[];return st("tbody",{},[n.reduce((i,r)=>i.concat(t(r,i.length)),[])])}});function L0(t){const e=t.tableLayout==="auto";let n=t.columns||[];e&&n.every(r=>r.width===void 0)&&(n=[]);const i=r=>{const a={key:`${t.tableLayout}_${r.id}`,style:{},name:void 0};return e?a.style={width:`${r.width}px`}:a.name=r.id,a};return st("colgroup",{},n.map(r=>st("col",i(r))))}L0.props=["columns","tableLayout"];function ose(){const t=Je(zr),e=t==null?void 0:t.store,n=R(()=>e.states.fixedLeafColumnsLength.value),i=R(()=>e.states.rightFixedColumns.value.length),r=R(()=>e.states.columns.value.length),a=R(()=>e.states.fixedColumns.value.length),d=R(()=>e.states.rightFixedColumns.value.length);return{leftFixedLeafCount:n,rightFixedLeafCount:i,columnsCount:r,leftFixedCount:a,rightFixedCount:d,columns:e.states.columns}}function ase(t){const{columns:e}=ose(),n=Ue("table");return{getCellClasses:(a,d)=>{const s=a[d],o=[n.e("cell"),s.id,s.align,s.labelClassName,...P0(n.b(),d,s.fixed,t.store)];return s.className&&o.push(s.className),s.children||o.push(n.is("leaf")),o},getCellStyles:(a,d)=>{const s=O0(d,a.fixed,t.store);return Nl(s,"left"),Nl(s,"right"),s},columns:e}}var lse=de({name:"ElTableFooter",props:{fixed:{type:String,default:""},store:{required:!0,type:Object},summaryMethod:Function,sumText:String,border:Boolean,defaultSort:{type:Object,default:()=>({prop:"",order:""})}},setup(t){const{getCellClasses:e,getCellStyles:n,columns:i}=ase(t);return{ns:Ue("table"),getCellClasses:e,getCellStyles:n,columns:i}},render(){const{columns:t,getCellStyles:e,getCellClasses:n,summaryMethod:i,sumText:r,ns:a}=this,d=this.store.states.data.value;let s=[];return i?s=i({columns:t,data:d}):t.forEach((o,c)=>{if(c===0){s[c]=r;return}const h=d.map(m=>Number(m[o.property])),l=[];let u=!0;h.forEach(m=>{if(!Number.isNaN(+m)){u=!1;const g=`${m}`.split(".")[1];l.push(g?g.length:0)}});const f=Math.max.apply(null,l);u?s[c]="":s[c]=h.reduce((m,g)=>{const p=Number(g);return Number.isNaN(+p)?m:Number.parseFloat((m+g).toFixed(Math.min(f,20)))},0)}),st("table",{class:a.e("footer"),cellspacing:"0",cellpadding:"0",border:"0"},[L0({columns:t}),st("tbody",[st("tr",{},[...t.map((o,c)=>st("td",{key:c,colspan:o.colSpan,rowspan:o.rowSpan,class:n(t,c),style:e(o,c)},[st("div",{class:["cell",o.labelClassName]},[s[c]])]))])])])}});function cse(t){return{setCurrentRow:h=>{t.commit("setCurrentRow",h)},getSelectionRows:()=>t.getSelectionRows(),toggleRowSelection:(h,l)=>{t.toggleRowSelection(h,l,!1),t.updateAllSelected()},clearSelection:()=>{t.clearSelection()},clearFilter:h=>{t.clearFilter(h)},toggleAllSelection:()=>{t.commit("toggleAllSelection")},toggleRowExpansion:(h,l)=>{t.toggleRowExpansionAdapter(h,l)},clearSort:()=>{t.clearSort()},sort:(h,l)=>{t.commit("sort",{prop:h,order:l})}}}function use(t,e,n,i){const r=q(!1),a=q(null),d=q(!1),s=F=>{d.value=F},o=q({width:null,height:null,headerHeight:null}),c=q(!1),h={display:"inline-block",verticalAlign:"middle"},l=q(),u=q(0),f=q(0),m=q(0),g=q(0);Di(()=>{e.setHeight(t.height)}),Di(()=>{e.setMaxHeight(t.maxHeight)}),Be(()=>[t.currentRowKey,n.states.rowKey],([F,T])=>{!y(T)||!y(F)||n.setCurrentRowKey(`${F}`)},{immediate:!0}),Be(()=>t.data,F=>{i.store.commit("setData",F)},{immediate:!0,deep:!0}),Di(()=>{t.expandRowKeys&&n.setExpandRowKeysAdapter(t.expandRowKeys)});const p=()=>{i.store.commit("setHoverRow",null),i.hoverState&&(i.hoverState=null)},v=(F,T)=>{const{pixelX:P,pixelY:H}=T;Math.abs(P)>=Math.abs(H)&&(i.refs.bodyWrapper.scrollLeft+=T.pixelX/5)},b=R(()=>t.height||t.maxHeight||n.states.fixedColumns.value.length>0||n.states.rightFixedColumns.value.length>0),_=R(()=>({width:e.bodyWidth.value?`${e.bodyWidth.value}px`:""})),S=()=>{b.value&&e.updateElsHeight(),e.updateColumnsWidth(),requestAnimationFrame(M)};mt(async()=>{await et(),n.updateColumns(),E(),requestAnimationFrame(S);const F=i.vnode.el,T=i.refs.headerWrapper;t.flexible&&F&&F.parentElement&&(F.parentElement.style.minWidth="0"),o.value={width:l.value=F.offsetWidth,height:F.offsetHeight,headerHeight:t.showHeader&&T?T.offsetHeight:null},n.states.columns.value.forEach(P=>{P.filteredValue&&P.filteredValue.length&&i.store.commit("filterChange",{column:P,values:P.filteredValue,silent:!0})}),i.$ready=!0});const w=(F,T)=>{if(!F)return;const P=Array.from(F.classList).filter(H=>!H.startsWith("is-scrolling-"));P.push(e.scrollX.value?T:"is-scrolling-none"),F.className=P.join(" ")},C=F=>{const{tableWrapper:T}=i.refs;w(T,F)},x=F=>{const{tableWrapper:T}=i.refs;return!!(T&&T.classList.contains(F))},M=function(){if(!i.refs.scrollBarRef)return;if(!e.scrollX.value){const z="is-scrolling-none";x(z)||C(z);return}const F=i.refs.scrollBarRef.wrapRef;if(!F)return;const{scrollLeft:T,offsetWidth:P,scrollWidth:H}=F,{headerWrapper:N,footerWrapper:G}=i.refs;N&&(N.scrollLeft=T),G&&(G.scrollLeft=T);const $=H-P-1;T>=$?C("is-scrolling-right"):C(T===0?"is-scrolling-left":"is-scrolling-middle")},E=()=>{i.refs.scrollBarRef&&(i.refs.scrollBarRef.wrapRef&&cn(i.refs.scrollBarRef.wrapRef,"scroll",M,{passive:!0}),t.fit?Qn(i.vnode.el,A):cn(window,"resize",A),Qn(i.refs.bodyWrapper,()=>{var F,T;A(),(T=(F=i.refs)==null?void 0:F.scrollBarRef)==null||T.update()}))},A=()=>{var F,T,P;const H=i.vnode.el;if(!i.$ready||!H)return;let N=!1;const{width:G,height:$,headerHeight:z}=o.value,Z=l.value=H.offsetWidth;G!==Z&&(N=!0);const W=H.offsetHeight;(t.height||b.value)&&$!==W&&(N=!0);const te=t.tableLayout==="fixed"?i.refs.headerWrapper:(F=i.refs.tableHeaderRef)==null?void 0:F.$el;t.showHeader&&(te==null?void 0:te.offsetHeight)!==z&&(N=!0),u.value=((T=i.refs.tableWrapper)==null?void 0:T.scrollHeight)||0,m.value=(te==null?void 0:te.scrollHeight)||0,g.value=((P=i.refs.footerWrapper)==null?void 0:P.offsetHeight)||0,f.value=u.value-m.value-g.value,N&&(o.value={width:Z,height:W,headerHeight:t.showHeader&&(te==null?void 0:te.offsetHeight)||0},S())},O=En(),D=R(()=>{const{bodyWidth:F,scrollY:T,gutterWidth:P}=e;return F.value?`${F.value-(T.value?P:0)}px`:""}),L=R(()=>t.maxHeight?"fixed":t.tableLayout),U=R(()=>{if(t.data&&t.data.length)return null;let F="100%";t.height&&f.value&&(F=`${f.value}px`);const T=l.value;return{width:T?`${T}px`:"",height:F}}),j=R(()=>t.height?{height:Number.isNaN(Number(t.height))?t.height:`${t.height}px`}:t.maxHeight?{maxHeight:Number.isNaN(Number(t.maxHeight))?t.maxHeight:`${t.maxHeight}px`}:{}),V=R(()=>t.height?{height:"100%"}:t.maxHeight?Number.isNaN(Number(t.maxHeight))?{maxHeight:`calc(${t.maxHeight} - ${m.value+g.value}px)`}:{maxHeight:`${t.maxHeight-m.value-g.value}px`}:{});return{isHidden:r,renderExpanded:a,setDragVisible:s,isGroup:c,handleMouseLeave:p,handleHeaderFooterMousewheel:v,tableSize:O,emptyBlockStyle:U,handleFixedMousewheel:(F,T)=>{const P=i.refs.bodyWrapper;if(Math.abs(T.spinY)>0){const H=P.scrollTop;T.pixelY<0&&H!==0&&F.preventDefault(),T.pixelY>0&&P.scrollHeight-P.clientHeight>H&&F.preventDefault(),P.scrollTop+=Math.ceil(T.pixelY/5)}else P.scrollLeft+=Math.ceil(T.pixelX/5)},resizeProxyVisible:d,bodyWidth:D,resizeState:o,doLayout:S,tableBodyStyles:_,tableLayout:L,scrollbarViewStyle:h,tableInnerStyle:j,scrollbarStyle:V}}function dse(t){const e=q(),n=()=>{const r=t.vnode.el.querySelector(".hidden-columns"),a={childList:!0,subtree:!0},d=t.store.states.updateOrderFns;e.value=new MutationObserver(()=>{d.forEach(s=>s())}),e.value.observe(r,a)};mt(()=>{n()}),oo(()=>{var i;(i=e.value)==null||i.disconnect()})}var fse={data:{type:Array,default:()=>[]},size:Xn,width:[String,Number],height:[String,Number],maxHeight:[String,Number],fit:{type:Boolean,default:!0},stripe:Boolean,border:Boolean,rowKey:[String,Function],showHeader:{type:Boolean,default:!0},showSummary:Boolean,sumText:String,summaryMethod:Function,rowClassName:[String,Function],rowStyle:[Object,Function],cellClassName:[String,Function],cellStyle:[Object,Function],headerRowClassName:[String,Function],headerRowStyle:[Object,Function],headerCellClassName:[String,Function],headerCellStyle:[Object,Function],highlightCurrentRow:Boolean,currentRowKey:[String,Number],emptyText:String,expandRowKeys:Array,defaultExpandAll:Boolean,defaultSort:Object,tooltipEffect:String,tooltipOptions:Object,spanMethod:Function,selectOnIndeterminate:{type:Boolean,default:!0},indent:{type:Number,default:16},treeProps:{type:Object,default:()=>({hasChildren:"hasChildren",children:"children"})},lazy:Boolean,load:Function,style:{type:Object,default:()=>({})},className:{type:String,default:""},tableLayout:{type:String,default:"fixed"},scrollbarAlwaysOn:{type:Boolean,default:!1},flexible:Boolean};const hse=()=>{const t=q(),e=(a,d)=>{const s=t.value;s&&s.scrollTo(a,d)},n=(a,d)=>{const s=t.value;s&&at(d)&&["Top","Left"].includes(a)&&s[`setScroll${a}`](d)};return{scrollBarRef:t,scrollTo:e,setScrollTop:a=>n("Top",a),setScrollLeft:a=>n("Left",a)}};let pse=1;const mse=de({name:"ElTable",directives:{Mousewheel:oX},components:{TableHeader:ese,TableBody:sse,TableFooter:lse,ElScrollbar:Cs,hColgroup:L0},props:fse,emits:["select","select-all","selection-change","cell-mouse-enter","cell-mouse-leave","cell-contextmenu","cell-click","cell-dblclick","row-click","row-contextmenu","row-dblclick","header-click","header-contextmenu","sort-change","filter-change","current-change","header-dragend","expand-change"],setup(t){const{t:e}=Pt(),n=Ue("table"),i=vt();xt(zr,i);const r=Vre(i,t);i.store=r;const a=new zre({store:i.store,table:i,fit:t.fit,showHeader:t.showHeader});i.layout=a;const d=R(()=>(r.states.data.value||[]).length===0),{setCurrentRow:s,getSelectionRows:o,toggleRowSelection:c,clearSelection:h,clearFilter:l,toggleAllSelection:u,toggleRowExpansion:f,clearSort:m,sort:g}=cse(r),{isHidden:p,renderExpanded:v,setDragVisible:b,isGroup:_,handleMouseLeave:S,handleHeaderFooterMousewheel:w,tableSize:C,emptyBlockStyle:x,handleFixedMousewheel:M,resizeProxyVisible:E,bodyWidth:A,resizeState:O,doLayout:D,tableBodyStyles:L,tableLayout:U,scrollbarViewStyle:j,tableInnerStyle:V,scrollbarStyle:k}=use(t,a,r,i),{scrollBarRef:F,scrollTo:T,setScrollLeft:P,setScrollTop:H}=hse(),N=pi(D,50),G=`${n.namespace.value}-table_${pse++}`;i.tableId=G,i.state={isGroup:_,resizeState:O,doLayout:D,debouncedUpdateLayout:N};const $=R(()=>t.sumText||e("el.table.sumText")),z=R(()=>t.emptyText||e("el.table.emptyText"));return dse(i),{ns:n,layout:a,store:r,handleHeaderFooterMousewheel:w,handleMouseLeave:S,tableId:G,tableSize:C,isHidden:p,isEmpty:d,renderExpanded:v,resizeProxyVisible:E,resizeState:O,isGroup:_,bodyWidth:A,tableBodyStyles:L,emptyBlockStyle:x,debouncedUpdateLayout:N,handleFixedMousewheel:M,setCurrentRow:s,getSelectionRows:o,toggleRowSelection:c,clearSelection:h,clearFilter:l,toggleAllSelection:u,toggleRowExpansion:f,clearSort:m,doLayout:D,sort:g,t:e,setDragVisible:b,context:i,computedSumText:$,computedEmptyText:z,tableLayout:U,scrollbarViewStyle:j,tableInnerStyle:V,scrollbarStyle:k,scrollBarRef:F,scrollTo:T,setScrollLeft:P,setScrollTop:H}}}),gse=["data-prefix"],vse={ref:"hiddenColumns",class:"hidden-columns"};function yse(t,e,n,i,r,a){const d=ft("hColgroup"),s=ft("table-header"),o=ft("table-body"),c=ft("el-scrollbar"),h=ft("table-footer"),l=Wc("mousewheel");return I(),ne("div",{ref:"tableWrapper",class:B([{[t.ns.m("fit")]:t.fit,[t.ns.m("striped")]:t.stripe,[t.ns.m("border")]:t.border||t.isGroup,[t.ns.m("hidden")]:t.isHidden,[t.ns.m("group")]:t.isGroup,[t.ns.m("fluid-height")]:t.maxHeight,[t.ns.m("scrollable-x")]:t.layout.scrollX.value,[t.ns.m("scrollable-y")]:t.layout.scrollY.value,[t.ns.m("enable-row-hover")]:!t.store.states.isComplex.value,[t.ns.m("enable-row-transition")]:(t.store.states.data.value||[]).length!==0&&(t.store.states.data.value||[]).length<100,"has-footer":t.showSummary},t.ns.m(t.tableSize),t.className,t.ns.b(),t.ns.m(`layout-${t.tableLayout}`)]),style:nt(t.style),"data-prefix":t.ns.namespace.value,onMouseleave:e[0]||(e[0]=(...u)=>t.handleMouseLeave&&t.handleMouseLeave(...u))},[ae("div",{class:B(t.ns.e("inner-wrapper")),style:nt(t.tableInnerStyle)},[ae("div",vse,[Le(t.$slots,"default")],512),t.showHeader&&t.tableLayout==="fixed"?pt((I(),ne("div",{key:0,ref:"headerWrapper",class:B(t.ns.e("header-wrapper"))},[ae("table",{ref:"tableHeader",class:B(t.ns.e("header")),style:nt(t.tableBodyStyles),border:"0",cellpadding:"0",cellspacing:"0"},[ue(d,{columns:t.store.states.columns.value,"table-layout":t.tableLayout},null,8,["columns","table-layout"]),ue(s,{ref:"tableHeaderRef",border:t.border,"default-sort":t.defaultSort,store:t.store,onSetDragVisible:t.setDragVisible},null,8,["border","default-sort","store","onSetDragVisible"])],6)],2)),[[l,t.handleHeaderFooterMousewheel]]):Te("v-if",!0),ae("div",{ref:"bodyWrapper",class:B(t.ns.e("body-wrapper"))},[ue(c,{ref:"scrollBarRef","view-style":t.scrollbarViewStyle,"wrap-style":t.scrollbarStyle,always:t.scrollbarAlwaysOn},{default:ve(()=>[ae("table",{ref:"tableBody",class:B(t.ns.e("body")),cellspacing:"0",cellpadding:"0",border:"0",style:nt({width:t.bodyWidth,tableLayout:t.tableLayout})},[ue(d,{columns:t.store.states.columns.value,"table-layout":t.tableLayout},null,8,["columns","table-layout"]),t.showHeader&&t.tableLayout==="auto"?(I(),ke(s,{key:0,ref:"tableHeaderRef",border:t.border,"default-sort":t.defaultSort,store:t.store,onSetDragVisible:t.setDragVisible},null,8,["border","default-sort","store","onSetDragVisible"])):Te("v-if",!0),ue(o,{context:t.context,highlight:t.highlightCurrentRow,"row-class-name":t.rowClassName,"tooltip-effect":t.tooltipEffect,"tooltip-options":t.tooltipOptions,"row-style":t.rowStyle,store:t.store,stripe:t.stripe},null,8,["context","highlight","row-class-name","tooltip-effect","tooltip-options","row-style","store","stripe"])],6),t.isEmpty?(I(),ne("div",{key:0,ref:"emptyBlock",style:nt(t.emptyBlockStyle),class:B(t.ns.e("empty-block"))},[ae("span",{class:B(t.ns.e("empty-text"))},[Le(t.$slots,"empty",{},()=>[Tt($e(t.computedEmptyText),1)])],2)],6)):Te("v-if",!0),t.$slots.append?(I(),ne("div",{key:1,ref:"appendWrapper",class:B(t.ns.e("append-wrapper"))},[Le(t.$slots,"append")],2)):Te("v-if",!0)]),_:3},8,["view-style","wrap-style","always"])],2),t.showSummary?pt((I(),ne("div",{key:1,ref:"footerWrapper",class:B(t.ns.e("footer-wrapper"))},[ue(h,{border:t.border,"default-sort":t.defaultSort,store:t.store,style:nt(t.tableBodyStyles),"sum-text":t.computedSumText,"summary-method":t.summaryMethod},null,8,["border","default-sort","store","style","sum-text","summary-method"])],2)),[[Dt,!t.isEmpty],[l,t.handleHeaderFooterMousewheel]]):Te("v-if",!0),t.border||t.isGroup?(I(),ne("div",{key:2,class:B(t.ns.e("border-left-patch"))},null,2)):Te("v-if",!0)],6),pt(ae("div",{ref:"resizeProxy",class:B(t.ns.e("column-resize-proxy"))},null,2),[[Dt,t.resizeProxyVisible]])],46,gse)}var bse=je(mse,[["render",yse],["__file","/home/runner/work/element-plus/element-plus/packages/components/table/src/table.vue"]]);const _se={selection:"table-column--selection",expand:"table__expand-column"},Sse={default:{order:""},selection:{width:48,minWidth:48,realWidth:48,order:""},expand:{width:48,minWidth:48,realWidth:48,order:""},index:{width:48,minWidth:48,realWidth:48,order:""}},wse=t=>_se[t]||"",Cse={selection:{renderHeader({store:t}){function e(){return t.states.data.value&&t.states.data.value.length===0}return st(er,{disabled:e(),size:t.states.tableSize.value,indeterminate:t.states.selection.value.length>0&&!t.states.isAllSelected.value,"onUpdate:modelValue":t.toggleAllSelection,modelValue:t.states.isAllSelected.value})},renderCell({row:t,column:e,store:n,$index:i}){return st(er,{disabled:e.selectable?!e.selectable.call(null,t,i):!1,size:n.states.tableSize.value,onChange:()=>{n.commit("rowSelectedChanged",t)},onClick:r=>r.stopPropagation(),modelValue:n.isSelected(t)})},sortable:!1,resizable:!1},index:{renderHeader({column:t}){return t.label||"#"},renderCell({column:t,$index:e}){let n=e+1;const i=t.index;return typeof i=="number"?n=e+i:typeof i=="function"&&(n=i(e)),st("div",{},[n])},sortable:!1},expand:{renderHeader({column:t}){return t.label||""},renderCell({row:t,store:e,expanded:n}){const{ns:i}=e,r=[i.e("expand-icon")];return n&&r.push(i.em("expand-icon","expanded")),st("div",{class:r,onClick:function(d){d.stopPropagation(),e.toggleRowExpansion(t)}},{default:()=>[st(tt,null,{default:()=>[st(ui)]})]})},sortable:!1,resizable:!1}};function xse({row:t,column:e,$index:n}){var i;const r=e.property,a=r&&Yd(t,r).value;return e&&e.formatter?e.formatter(t,e,a,n):((i=a==null?void 0:a.toString)==null?void 0:i.call(a))||""}function Tse({row:t,treeNode:e,store:n},i=!1){const{ns:r}=n;if(!e)return i?[st("span",{class:r.e("placeholder")})]:null;const a=[],d=function(s){s.stopPropagation(),!e.loading&&n.loadOrToggle(t)};if(e.indent&&a.push(st("span",{class:r.e("indent"),style:{"padding-left":`${e.indent}px`}})),typeof e.expanded=="boolean"&&!e.noLazyChildren){const s=[r.e("expand-icon"),e.expanded?r.em("expand-icon","expanded"):""];let o=ui;e.loading&&(o=co),a.push(st("div",{class:s,onClick:d},{default:()=>[st(tt,{class:{[r.is("loading")]:e.loading}},{default:()=>[st(o)]})]}))}else a.push(st("span",{class:r.e("placeholder")}));return a}function Qw(t,e){return t.reduce((n,i)=>(n[i]=i,n),e)}function Ese(t,e){const n=vt();return{registerComplexWatchers:()=>{const a=["fixed"],d={realWidth:"width",realMinWidth:"minWidth"},s=Qw(a,d);Object.keys(s).forEach(o=>{const c=d[o];Mt(e,c)&&Be(()=>e[c],h=>{let l=h;c==="width"&&o==="realWidth"&&(l=R0(h)),c==="minWidth"&&o==="realMinWidth"&&(l=M2(h)),n.columnConfig.value[c]=l,n.columnConfig.value[o]=l;const u=c==="fixed";t.value.store.scheduleLayout(u)})})},registerNormalWatchers:()=>{const a=["label","filters","filterMultiple","sortable","index","formatter","className","labelClassName","showOverflowTooltip"],d={property:"prop",align:"realAlign",headerAlign:"realHeaderAlign"},s=Qw(a,d);Object.keys(s).forEach(o=>{const c=d[o];Mt(e,c)&&Be(()=>e[c],h=>{n.columnConfig.value[o]=h})})}}}function Mse(t,e,n){const i=vt(),r=q(""),a=q(!1),d=q(),s=q(),o=Ue("table");Di(()=>{d.value=t.align?`is-${t.align}`:null,d.value}),Di(()=>{s.value=t.headerAlign?`is-${t.headerAlign}`:d.value,s.value});const c=R(()=>{let S=i.vnode.vParent||i.parent;for(;S&&!S.tableId&&!S.columnId;)S=S.vnode.vParent||S.parent;return S}),h=R(()=>{const{store:S}=i.parent;if(!S)return!1;const{treeData:w}=S.states,C=w.value;return C&&Object.keys(C).length>0}),l=q(R0(t.width)),u=q(M2(t.minWidth)),f=S=>(l.value&&(S.width=l.value),u.value&&(S.minWidth=u.value),!l.value&&u.value&&(S.width=void 0),S.minWidth||(S.minWidth=80),S.realWidth=Number(S.width===void 0?S.minWidth:S.width),S),m=S=>{const w=S.type,C=Cse[w]||{};Object.keys(C).forEach(M=>{const E=C[M];M!=="className"&&E!==void 0&&(S[M]=E)});const x=wse(w);if(x){const M=`${y(o.namespace)}-${x}`;S.className=S.className?`${S.className} ${M}`:M}return S},g=S=>{Array.isArray(S)?S.forEach(C=>w(C)):w(S);function w(C){var x;((x=C==null?void 0:C.type)==null?void 0:x.name)==="ElTableColumn"&&(C.vParent=i)}};return{columnId:r,realAlign:d,isSubColumn:a,realHeaderAlign:s,columnOrTableParent:c,setColumnWidth:f,setColumnForcedProps:m,setColumnRenders:S=>{t.renderHeader||S.type!=="selection"&&(S.renderHeader=C=>{i.columnConfig.value.label;const x=e.header;return x?x(C):S.label});let w=S.renderCell;return S.type==="expand"?(S.renderCell=C=>st("div",{class:"cell"},[w(C)]),n.value.renderExpanded=C=>e.default?e.default(C):e.default):(w=w||xse,S.renderCell=C=>{let x=null;if(e.default){const L=e.default(C);x=L.some(U=>U.type!==li)?L:w(C)}else x=w(C);const{columns:M}=n.value.store.states,E=M.value.findIndex(L=>L.type==="default"),A=h.value&&C.cellIndex===E,O=Tse(C,A),D={class:"cell",style:{}};return S.showOverflowTooltip&&(D.class=`${D.class} ${y(o.namespace)}-tooltip`,D.style={width:`${(C.column.realWidth||Number(C.column.width))-1}px`}),g(x),st("div",D,[O,x])}),S},getPropsData:(...S)=>S.reduce((w,C)=>(Array.isArray(C)&&C.forEach(x=>{w[x]=t[x]}),w),{}),getColumnElIndex:(S,w)=>Array.prototype.indexOf.call(S,w),updateColumnOrder:()=>{n.value.store.commit("updateColumnOrder",i.columnConfig.value)}}}var Ase={type:{type:String,default:"default"},label:String,className:String,labelClassName:String,property:String,prop:String,width:{type:[String,Number],default:""},minWidth:{type:[String,Number],default:""},renderHeader:Function,sortable:{type:[Boolean,String],default:!1},sortMethod:Function,sortBy:[String,Function,Array],resizable:{type:Boolean,default:!0},columnKey:String,align:String,headerAlign:String,showOverflowTooltip:[Boolean,Object],fixed:[Boolean,String],formatter:Function,selectable:Function,reserveSelection:Boolean,filterMethod:Function,filteredValue:Array,filters:Array,filterPlacement:String,filterMultiple:{type:Boolean,default:!0},index:[Number,Function],sortOrders:{type:Array,default:()=>["ascending","descending",null],validator:t=>t.every(e=>["ascending","descending",null].includes(e))}};let kse=1;var I2=de({name:"ElTableColumn",components:{ElCheckbox:er},props:Ase,setup(t,{slots:e}){const n=vt(),i=q({}),r=R(()=>{let _=n.parent;for(;_&&!_.tableId;)_=_.parent;return _}),{registerNormalWatchers:a,registerComplexWatchers:d}=Ese(r,t),{columnId:s,isSubColumn:o,realHeaderAlign:c,columnOrTableParent:h,setColumnWidth:l,setColumnForcedProps:u,setColumnRenders:f,getPropsData:m,getColumnElIndex:g,realAlign:p,updateColumnOrder:v}=Mse(t,e,r),b=h.value;s.value=`${b.tableId||b.columnId}_column_${kse++}`,ih(()=>{o.value=r.value!==b;const _=t.type||"default",S=t.sortable===""?!0:t.sortable,w={...Sse[_],id:s.value,type:_,property:t.prop||t.property,align:p,headerAlign:c,showOverflowTooltip:t.showOverflowTooltip,filterable:t.filters||t.filterMethod,filteredValue:[],filterPlacement:"",isColumnGroup:!1,isSubColumn:!1,filterOpened:!1,sortable:S,index:t.index,rawColumnKey:n.vnode.key};let A=m(["columnKey","label","className","labelClassName","type","renderHeader","formatter","fixed","resizable"],["sortMethod","sortBy","sortOrders"],["selectable","reserveSelection"],["filterMethod","filters","filterMultiple","filterOpened","filteredValue","filterPlacement"]);A=kre(w,A),A=Pre(f,l,u)(A),i.value=A,a(),d()}),mt(()=>{var _;const S=h.value,w=o.value?S.vnode.el.children:(_=S.refs.hiddenColumns)==null?void 0:_.children,C=()=>g(w||[],n.vnode.el);i.value.getColumnIndex=C,C()>-1&&r.value.store.commit("insertColumn",i.value,o.value?S.columnConfig.value:null,v)}),rn(()=>{r.value.store.commit("removeColumn",i.value,o.value?b.columnConfig.value:null,v)}),n.columnId=s.value,n.columnConfig=i},render(){var t,e,n;try{const i=(e=(t=this.$slots).default)==null?void 0:e.call(t,{row:{},column:{},$index:-1}),r=[];if(Array.isArray(i))for(const d of i)((n=d.type)==null?void 0:n.name)==="ElTableColumn"||d.shapeFlag&2?r.push(d):d.type===Qe&&Array.isArray(d.children)&&d.children.forEach(s=>{(s==null?void 0:s.patchFlag)!==1024&&!ct(s==null?void 0:s.children)&&r.push(s)});return st("div",r)}catch{return st("div",[])}}});const Rse=yt(bse,{TableColumn:I2}),Pse=mn(I2);var bu=(t=>(t.ASC="asc",t.DESC="desc",t))(bu||{}),_u=(t=>(t.CENTER="center",t.RIGHT="right",t))(_u||{}),D2=(t=>(t.LEFT="left",t.RIGHT="right",t))(D2||{});const xg={asc:"desc",desc:"asc"},Su=Symbol("placeholder"),Ose=(t,e,n)=>{var i;const r={flexGrow:0,flexShrink:0,...n?{}:{flexGrow:t.flexGrow||0,flexShrink:t.flexShrink||1}};n||(r.flexShrink=1);const a={...(i=t.style)!=null?i:{},...r,flexBasis:"auto",width:t.width};return e||(t.maxWidth&&(a.maxWidth=t.maxWidth),t.minWidth&&(a.minWidth=t.minWidth)),a};function Lse(t,e,n){const i=R(()=>y(e).filter(g=>!g.hidden)),r=R(()=>y(i).filter(g=>g.fixed==="left"||g.fixed===!0)),a=R(()=>y(i).filter(g=>g.fixed==="right")),d=R(()=>y(i).filter(g=>!g.fixed)),s=R(()=>{const g=[];return y(r).forEach(p=>{g.push({...p,placeholderSign:Su})}),y(d).forEach(p=>{g.push(p)}),y(a).forEach(p=>{g.push({...p,placeholderSign:Su})}),g}),o=R(()=>y(r).length||y(a).length),c=R(()=>y(e).reduce((p,v)=>(p[v.key]=Ose(v,y(n),t.fixed),p),{})),h=R(()=>y(i).reduce((g,p)=>g+p.width,0)),l=g=>y(e).find(p=>p.key===g),u=g=>y(c)[g],f=(g,p)=>{g.width=p};function m(g){var p;const{key:v}=g.currentTarget.dataset;if(!v)return;const{sortState:b,sortBy:_}=t;let S=bu.ASC;_t(b)?S=xg[b[v]]:S=xg[_.order],(p=t.onColumnSort)==null||p.call(t,{column:l(v),key:v,order:S})}return{columns:e,columnsStyles:c,columnsTotalWidth:h,fixedColumnsOnLeft:r,fixedColumnsOnRight:a,hasFixedColumns:o,mainColumns:s,normalColumns:d,visibleColumns:i,getColumn:l,getColumnStyle:u,updateColumnWidth:f,onColumnSorted:m}}const Ise=(t,{mainTableRef:e,leftTableRef:n,rightTableRef:i,onMaybeEndReached:r})=>{const a=q({scrollLeft:0,scrollTop:0});function d(f){var m,g,p;const{scrollTop:v}=f;(m=e.value)==null||m.scrollTo(f),(g=n.value)==null||g.scrollToTop(v),(p=i.value)==null||p.scrollToTop(v)}function s(f){a.value=f,d(f)}function o(f){a.value.scrollTop=f,d(y(a))}function c(f){var m,g;a.value.scrollLeft=f,(g=(m=e.value)==null?void 0:m.scrollTo)==null||g.call(m,y(a))}function h(f){var m;s(f),(m=t.onScroll)==null||m.call(t,f)}function l({scrollTop:f}){const{scrollTop:m}=y(a);f!==m&&o(f)}function u(f,m="auto"){var g;(g=e.value)==null||g.scrollToRow(f,m)}return Be(()=>y(a).scrollTop,(f,m)=>{f>m&&r()}),{scrollPos:a,scrollTo:s,scrollToLeft:c,scrollToTop:o,scrollToRow:u,onScroll:h,onVerticalScroll:l}},Dse=(t,{mainTableRef:e,leftTableRef:n,rightTableRef:i})=>{const r=vt(),{emit:a}=r,d=Jt(!1),s=Jt(null),o=q(t.defaultExpandedRowKeys||[]),c=q(-1),h=Jt(null),l=q({}),u=q({}),f=Jt({}),m=Jt({}),g=Jt({}),p=R(()=>at(t.estimatedRowHeight));function v(M){var E;(E=t.onRowsRendered)==null||E.call(t,M),M.rowCacheEnd>y(c)&&(c.value=M.rowCacheEnd)}function b({hovered:M,rowKey:E}){s.value=M?E:null}function _({expanded:M,rowData:E,rowIndex:A,rowKey:O}){var D,L;const U=[...y(o)],j=U.indexOf(O);M?j===-1&&U.push(O):j>-1&&U.splice(j,1),o.value=U,a("update:expandedRowKeys",U),(D=t.onRowExpand)==null||D.call(t,{expanded:M,rowData:E,rowIndex:A,rowKey:O}),(L=t.onExpandedRowsChange)==null||L.call(t,U)}const S=pi(()=>{var M,E,A,O;d.value=!0,l.value={...y(l),...y(u)},w(y(h),!1),u.value={},h.value=null,(M=e.value)==null||M.forceUpdate(),(E=n.value)==null||E.forceUpdate(),(A=i.value)==null||A.forceUpdate(),(O=r.proxy)==null||O.$forceUpdate(),d.value=!1},0);function w(M,E=!1){y(p)&&[e,n,i].forEach(A=>{const O=y(A);O&&O.resetAfterRowIndex(M,E)})}function C(M,E,A){const O=y(h);(O===null||O>A)&&(h.value=A),u.value[M]=E}function x({rowKey:M,height:E,rowIndex:A},O){O?O===D2.RIGHT?g.value[M]=E:f.value[M]=E:m.value[M]=E;const D=Math.max(...[f,g,m].map(L=>L.value[M]||0));y(l)[M]!==D&&(C(M,D,A),S())}return{hoveringRowKey:s,expandedRowKeys:o,lastRenderedRowIndex:c,isDynamic:p,isResetting:d,rowHeights:l,resetAfterIndex:w,onRowExpanded:_,onRowHovered:b,onRowsRendered:v,onRowHeightChange:x}},Nse=(t,{expandedRowKeys:e,lastRenderedRowIndex:n,resetAfterIndex:i})=>{const r=q({}),a=R(()=>{const s={},{data:o,rowKey:c}=t,h=y(e);if(!h||!h.length)return o;const l=[],u=new Set;h.forEach(m=>u.add(m));let f=o.slice();for(f.forEach(m=>s[m[c]]=0);f.length>0;){const m=f.shift();l.push(m),u.has(m[c])&&Array.isArray(m.children)&&m.children.length>0&&(f=[...m.children,...f],m.children.forEach(g=>s[g[c]]=s[m[c]]+1))}return r.value=s,l}),d=R(()=>{const{data:s,expandColumnKey:o}=t;return o?y(a):s});return Be(d,(s,o)=>{s!==o&&(n.value=-1,i(0,!0))}),{data:d,depthMap:r}},Fse=(t,e)=>t+e,df=t=>Ze(t)?t.reduce(Fse,0):t,sa=(t,e,n={})=>lt(t)?t(e):t??n,js=t=>(["width","maxWidth","minWidth","height"].forEach(e=>{t[e]=bn(t[e])}),t),N2=t=>un(t)?e=>st(t,e):t,Bse=(t,{columnsTotalWidth:e,data:n,fixedColumnsOnLeft:i,fixedColumnsOnRight:r})=>{const a=R(()=>{const{fixed:_,width:S,vScrollbarSize:w}=t,C=S-w;return _?Math.max(Math.round(y(e)),C):C}),d=R(()=>y(a)+(t.fixed?t.vScrollbarSize:0)),s=R(()=>{const{height:_=0,maxHeight:S=0,footerHeight:w,hScrollbarSize:C}=t;if(S>0){const x=y(m),M=y(o),A=y(f)+x+M+C;return Math.min(A,S-w)}return _-w}),o=R(()=>{const{rowHeight:_,estimatedRowHeight:S}=t,w=y(n);return at(S)?w.length*S:w.length*_}),c=R(()=>{const{maxHeight:_}=t,S=y(s);if(at(_)&&_>0)return S;const w=y(o)+y(f)+y(m);return Math.min(S,w)}),h=_=>_.width,l=R(()=>df(y(i).map(h))),u=R(()=>df(y(r).map(h))),f=R(()=>df(t.headerHeight)),m=R(()=>{var _;return(((_=t.fixedData)==null?void 0:_.length)||0)*t.rowHeight}),g=R(()=>y(s)-y(f)-y(m)),p=R(()=>{const{style:_={},height:S,width:w}=t;return js({..._,height:S,width:w})}),v=R(()=>js({height:t.footerHeight})),b=R(()=>({top:bn(y(f)),bottom:bn(t.footerHeight),width:bn(t.width)}));return{bodyWidth:a,fixedTableHeight:c,mainTableHeight:s,leftTableWidth:l,rightTableWidth:u,headerWidth:d,rowsHeight:o,windowHeight:g,footerHeight:v,emptyStyle:b,rootStyle:p,headerHeight:f}},Use=t=>{const e=q(),n=q(0),i=q(0);let r;return mt(()=>{r=Qn(e,([a])=>{const{width:d,height:s}=a.contentRect,{paddingLeft:o,paddingRight:c,paddingTop:h,paddingBottom:l}=getComputedStyle(a.target),u=Number.parseInt(o)||0,f=Number.parseInt(c)||0,m=Number.parseInt(h)||0,g=Number.parseInt(l)||0;n.value=d-u-f,i.value=s-m-g}).stop}),rn(()=>{r==null||r()}),Be([n,i],([a,d])=>{var s;(s=t.onResize)==null||s.call(t,{width:a,height:d})}),{sizer:e,width:n,height:i}};function Vse(t){const e=q(),n=q(),i=q(),{columns:r,columnsStyles:a,columnsTotalWidth:d,fixedColumnsOnLeft:s,fixedColumnsOnRight:o,hasFixedColumns:c,mainColumns:h,onColumnSorted:l}=Lse(t,ln(t,"columns"),ln(t,"fixed")),{scrollTo:u,scrollToLeft:f,scrollToTop:m,scrollToRow:g,onScroll:p,onVerticalScroll:v,scrollPos:b}=Ise(t,{mainTableRef:e,leftTableRef:n,rightTableRef:i,onMaybeEndReached:Pe}),{expandedRowKeys:_,hoveringRowKey:S,lastRenderedRowIndex:w,isDynamic:C,isResetting:x,rowHeights:M,resetAfterIndex:E,onRowExpanded:A,onRowHeightChange:O,onRowHovered:D,onRowsRendered:L}=Dse(t,{mainTableRef:e,leftTableRef:n,rightTableRef:i}),{data:U,depthMap:j}=Nse(t,{expandedRowKeys:_,lastRenderedRowIndex:w,resetAfterIndex:E}),{bodyWidth:V,fixedTableHeight:k,mainTableHeight:F,leftTableWidth:T,rightTableWidth:P,headerWidth:H,rowsHeight:N,windowHeight:G,footerHeight:$,emptyStyle:z,rootStyle:Z,headerHeight:W}=Bse(t,{columnsTotalWidth:d,data:U,fixedColumnsOnLeft:s,fixedColumnsOnRight:o}),te=Jt(!1),ie=q(),re=R(()=>{const K=y(U).length===0;return Ze(t.fixedData)?t.fixedData.length===0&&K:K});function _e(K){const{estimatedRowHeight:Q,rowHeight:fe,rowKey:ge}=t;return Q?y(M)[y(U)[K][ge]]||Q:fe}function Pe(){const{onEndReached:K}=t;if(!K)return;const{scrollTop:Q}=y(b),fe=y(N),ge=y(G),se=fe-(Q+ge)+t.hScrollbarSize;y(w)>=0&&fe===Q+y(F)-y(W)&&K(se)}return Be(()=>t.expandedRowKeys,K=>_.value=K,{deep:!0}),{columns:r,containerRef:ie,mainTableRef:e,leftTableRef:n,rightTableRef:i,isDynamic:C,isResetting:x,isScrolling:te,hoveringRowKey:S,hasFixedColumns:c,columnsStyles:a,columnsTotalWidth:d,data:U,expandedRowKeys:_,depthMap:j,fixedColumnsOnLeft:s,fixedColumnsOnRight:o,mainColumns:h,bodyWidth:V,emptyStyle:z,rootStyle:Z,headerWidth:H,footerHeight:$,mainTableHeight:F,fixedTableHeight:k,leftTableWidth:T,rightTableWidth:P,showEmpty:re,getRowHeight:_e,onColumnSorted:l,onRowHovered:D,onRowExpanded:A,onRowsRendered:L,onRowHeightChange:O,scrollTo:u,scrollToLeft:f,scrollToTop:m,scrollToRow:g,onScroll:p,onVerticalScroll:v}}const I0=Symbol("tableV2"),F2=String,Hu={type:Ae(Array),required:!0},D0={type:Ae(Array)},B2={...D0,required:!0},Hse=String,eC={type:Ae(Array),default:()=>an([])},Oo={type:Number,required:!0},U2={type:Ae([String,Number,Symbol]),default:"id"},tC={type:Ae(Object)},Ho=Xe({class:String,columns:Hu,columnsStyles:{type:Ae(Object),required:!0},depth:Number,expandColumnKey:Hse,estimatedRowHeight:{...Yo.estimatedRowHeight,default:void 0},isScrolling:Boolean,onRowExpand:{type:Ae(Function)},onRowHover:{type:Ae(Function)},onRowHeightChange:{type:Ae(Function)},rowData:{type:Ae(Object),required:!0},rowEventHandlers:{type:Ae(Object)},rowIndex:{type:Number,required:!0},rowKey:U2,style:{type:Ae(Object)}}),nm={type:Number,required:!0},N0=Xe({class:String,columns:Hu,fixedHeaderData:{type:Ae(Array)},headerData:{type:Ae(Array),required:!0},headerHeight:{type:Ae([Number,Array]),default:50},rowWidth:nm,rowHeight:{type:Number,default:50},height:nm,width:nm}),ff=Xe({columns:Hu,data:B2,fixedData:D0,estimatedRowHeight:Ho.estimatedRowHeight,width:Oo,height:Oo,headerWidth:Oo,headerHeight:N0.headerHeight,bodyWidth:Oo,rowHeight:Oo,cache:c2.cache,useIsScrolling:Boolean,scrollbarAlwaysOn:Yo.scrollbarAlwaysOn,scrollbarStartGap:Yo.scrollbarStartGap,scrollbarEndGap:Yo.scrollbarEndGap,class:F2,style:tC,containerStyle:tC,getRowHeight:{type:Ae(Function),required:!0},rowKey:Ho.rowKey,onRowsRendered:{type:Ae(Function)},onScroll:{type:Ae(Function)}}),zse=Xe({cache:ff.cache,estimatedRowHeight:Ho.estimatedRowHeight,rowKey:U2,headerClass:{type:Ae([String,Function])},headerProps:{type:Ae([Object,Function])},headerCellProps:{type:Ae([Object,Function])},headerHeight:N0.headerHeight,footerHeight:{type:Number,default:0},rowClass:{type:Ae([String,Function])},rowProps:{type:Ae([Object,Function])},rowHeight:{type:Number,default:50},cellProps:{type:Ae([Object,Function])},columns:Hu,data:B2,dataGetter:{type:Ae(Function)},fixedData:D0,expandColumnKey:Ho.expandColumnKey,expandedRowKeys:eC,defaultExpandedRowKeys:eC,class:F2,fixed:Boolean,style:{type:Ae(Object)},width:Oo,height:Oo,maxHeight:Number,useIsScrolling:Boolean,indentSize:{type:Number,default:12},iconSize:{type:Number,default:12},hScrollbarSize:Yo.hScrollbarSize,vScrollbarSize:Yo.vScrollbarSize,scrollbarAlwaysOn:f2.alwaysOn,sortBy:{type:Ae(Object),default:()=>({})},sortState:{type:Ae(Object),default:void 0},onColumnSort:{type:Ae(Function)},onExpandedRowsChange:{type:Ae(Function)},onEndReached:{type:Ae(Function)},onRowExpand:Ho.onRowExpand,onScroll:ff.onScroll,onRowsRendered:ff.onRowsRendered,rowEventHandlers:Ho.rowEventHandlers}),F0=(t,{slots:e})=>{var n;const{cellData:i,style:r}=t,a=((n=i==null?void 0:i.toString)==null?void 0:n.call(i))||"";return ue("div",{class:t.class,title:a,style:r},[e.default?e.default(t):a])};F0.displayName="ElTableV2Cell";F0.inheritAttrs=!1;const B0=(t,{slots:e})=>{var n,i;return e.default?e.default(t):ue("div",{class:t.class,title:(n=t.column)==null?void 0:n.title},[(i=t.column)==null?void 0:i.title])};B0.displayName="ElTableV2HeaderCell";B0.inheritAttrs=!1;const $se=Xe({class:String,columns:Hu,columnsStyles:{type:Ae(Object),required:!0},headerIndex:Number,style:{type:Ae(Object)}}),Wse=de({name:"ElTableV2HeaderRow",props:$se,setup(t,{slots:e}){return()=>{const{columns:n,columnsStyles:i,headerIndex:r,style:a}=t;let d=n.map((s,o)=>e.cell({columns:n,column:s,columnIndex:o,headerIndex:r,style:i[s.key]}));return e.header&&(d=e.header({cells:d.map(s=>Ze(s)&&s.length===1?s[0]:s),columns:n,headerIndex:r})),ue("div",{class:t.class,style:a,role:"row"},[d])}}}),Gse="ElTableV2Header",jse=de({name:Gse,props:N0,setup(t,{slots:e,expose:n}){const i=Ue("table-v2"),r=q(),a=R(()=>js({width:t.width,height:t.height})),d=R(()=>js({width:t.rowWidth,height:t.height})),s=R(()=>El(y(t.headerHeight))),o=l=>{const u=y(r);et(()=>{u!=null&&u.scroll&&u.scroll({left:l})})},c=()=>{const l=i.e("fixed-header-row"),{columns:u,fixedHeaderData:f,rowHeight:m}=t;return f==null?void 0:f.map((g,p)=>{var v;const b=js({height:m,width:"100%"});return(v=e.fixed)==null?void 0:v.call(e,{class:l,columns:u,rowData:g,rowIndex:-(p+1),style:b})})},h=()=>{const l=i.e("dynamic-header-row"),{columns:u}=t;return y(s).map((f,m)=>{var g;const p=js({width:"100%",height:f});return(g=e.dynamic)==null?void 0:g.call(e,{class:l,columns:u,headerIndex:m,style:p})})};return n({scrollToLeft:o}),()=>{if(!(t.height<=0))return ue("div",{ref:r,class:t.class,style:y(a),role:"rowgroup"},[ue("div",{style:y(d),class:i.e("header")},[h(),c()])])}}}),Xse=t=>{const{isScrolling:e}=Je(I0),n=q(!1),i=q(),r=R(()=>at(t.estimatedRowHeight)&&t.rowIndex>=0),a=(o=!1)=>{const c=y(i);if(!c)return;const{columns:h,onRowHeightChange:l,rowKey:u,rowIndex:f,style:m}=t,{height:g}=c.getBoundingClientRect();n.value=!0,et(()=>{if(o||g!==Number.parseInt(m.height)){const p=h[0],v=(p==null?void 0:p.placeholderSign)===Su;l==null||l({rowKey:u,height:g,rowIndex:f},p&&!v&&p.fixed)}})},d=R(()=>{const{rowData:o,rowIndex:c,rowKey:h,onRowHover:l}=t,u=t.rowEventHandlers||{},f={};return Object.entries(u).forEach(([m,g])=>{lt(g)&&(f[m]=p=>{g({event:p,rowData:o,rowIndex:c,rowKey:h})})}),l&&[{name:"onMouseleave",hovered:!1},{name:"onMouseenter",hovered:!0}].forEach(({name:m,hovered:g})=>{const p=f[m];f[m]=v=>{l({event:v,hovered:g,rowData:o,rowIndex:c,rowKey:h}),p==null||p(v)}}),f}),s=o=>{const{onRowExpand:c,rowData:h,rowIndex:l,rowKey:u}=t;c==null||c({expanded:o,rowData:h,rowIndex:l,rowKey:u})};return mt(()=>{y(r)&&a(!0)}),{isScrolling:e,measurable:r,measured:n,rowRef:i,eventHandlers:d,onExpand:s}},Kse="ElTableV2TableRow",Yse=de({name:Kse,props:Ho,setup(t,{expose:e,slots:n,attrs:i}){const{eventHandlers:r,isScrolling:a,measurable:d,measured:s,rowRef:o,onExpand:c}=Xse(t);return e({onExpand:c}),()=>{const{columns:h,columnsStyles:l,expandColumnKey:u,depth:f,rowData:m,rowIndex:g,style:p}=t;let v=h.map((b,_)=>{const S=Ze(m.children)&&m.children.length>0&&b.key===u;return n.cell({column:b,columns:h,columnIndex:_,depth:f,style:l[b.key],rowData:m,rowIndex:g,isScrolling:y(a),expandIconProps:S?{rowData:m,rowIndex:g,onExpand:c}:void 0})});if(n.row&&(v=n.row({cells:v.map(b=>Ze(b)&&b.length===1?b[0]:b),style:p,columns:h,depth:f,rowData:m,rowIndex:g,isScrolling:y(a)})),y(d)){const{height:b,..._}=p||{},S=y(s);return ue("div",St({ref:o,class:t.class,style:S?p:_,role:"row"},i,y(r)),[v])}return ue("div",St(i,{ref:o,class:t.class,style:p,role:"row"},y(r)),[v])}}}),qse=t=>{const{sortOrder:e}=t;return ue(tt,{size:14,class:t.class},{default:()=>[e===bu.ASC?ue(O5,null,null):ue(R5,null,null)]})},Zse=t=>{const{expanded:e,expandable:n,onExpand:i,style:r,size:a}=t,d={onClick:n?()=>i(!e):void 0,class:t.class};return ue(tt,St(d,{size:a,style:r}),{default:()=>[ue(ui,null,null)]})},Jse="ElTableV2Grid",Qse=t=>{const e=q(),n=q(),i=R(()=>{const{data:g,rowHeight:p,estimatedRowHeight:v}=t;if(!v)return g.length*p}),r=R(()=>{const{fixedData:g,rowHeight:p}=t;return((g==null?void 0:g.length)||0)*p}),a=R(()=>df(t.headerHeight)),d=R(()=>{const{height:g}=t;return Math.max(0,g-y(a)-y(r))}),s=R(()=>y(a)+y(r)>0),o=({data:g,rowIndex:p})=>g[p][t.rowKey];function c({rowCacheStart:g,rowCacheEnd:p,rowVisibleStart:v,rowVisibleEnd:b}){var _;(_=t.onRowsRendered)==null||_.call(t,{rowCacheStart:g,rowCacheEnd:p,rowVisibleStart:v,rowVisibleEnd:b})}function h(g,p){var v;(v=n.value)==null||v.resetAfterRowIndex(g,p)}function l(g,p){const v=y(e),b=y(n);!v||!b||(_t(g)?(v.scrollToLeft(g.scrollLeft),b.scrollTo(g)):(v.scrollToLeft(g),b.scrollTo({scrollLeft:g,scrollTop:p})))}function u(g){var p;(p=y(n))==null||p.scrollTo({scrollTop:g})}function f(g,p){var v;(v=y(n))==null||v.scrollToItem(g,1,p)}function m(){var g,p;(g=y(n))==null||g.$forceUpdate(),(p=y(e))==null||p.$forceUpdate()}return{bodyRef:n,forceUpdate:m,fixedRowHeight:r,gridHeight:d,hasHeader:s,headerHeight:a,headerRef:e,totalHeight:i,itemKey:o,onItemRendered:c,resetAfterRowIndex:h,scrollTo:l,scrollToTop:u,scrollToRow:f}},U0=de({name:Jse,props:ff,setup(t,{slots:e,expose:n}){const{ns:i}=Je(I0),{bodyRef:r,fixedRowHeight:a,gridHeight:d,hasHeader:s,headerRef:o,headerHeight:c,totalHeight:h,forceUpdate:l,itemKey:u,onItemRendered:f,resetAfterRowIndex:m,scrollTo:g,scrollToTop:p,scrollToRow:v}=Qse(t);n({forceUpdate:l,totalHeight:h,scrollTo:g,scrollToTop:p,scrollToRow:v,resetAfterRowIndex:m});const b=()=>t.bodyWidth;return()=>{const{cache:_,columns:S,data:w,fixedData:C,useIsScrolling:x,scrollbarAlwaysOn:M,scrollbarEndGap:E,scrollbarStartGap:A,style:O,rowHeight:D,bodyWidth:L,estimatedRowHeight:U,headerWidth:j,height:V,width:k,getRowHeight:F,onScroll:T}=t,P=at(U),H=P?kne:Tne,N=y(c);return ue("div",{role:"table",class:[i.e("table"),t.class],style:O},[ue(H,{ref:r,data:w,useIsScrolling:x,itemKey:u,columnCache:0,columnWidth:P?b:L,totalColumn:1,totalRow:w.length,rowCache:_,rowHeight:P?F:D,width:k,height:y(d),class:i.e("body"),role:"rowgroup",scrollbarStartGap:A,scrollbarEndGap:E,scrollbarAlwaysOn:M,onScroll:T,onItemRendered:f,perfMode:!1},{default:G=>{var $;const z=w[G.rowIndex];return($=e.row)==null?void 0:$.call(e,{...G,columns:S,rowData:z})}}),y(s)&&ue(jse,{ref:o,class:i.e("header-wrapper"),columns:S,headerData:w,headerHeight:t.headerHeight,fixedHeaderData:C,rowWidth:j,rowHeight:D,width:k,height:Math.min(N+y(a),V)},{dynamic:e.header,fixed:e.row})])}}});function eoe(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!un(t)}const toe=(t,{slots:e})=>{const{mainTableRef:n,...i}=t;return ue(U0,St({ref:n},i),eoe(e)?e:{default:()=>[e]})};function noe(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!un(t)}const ioe=(t,{slots:e})=>{if(!t.columns.length)return;const{leftTableRef:n,...i}=t;return ue(U0,St({ref:n},i),noe(e)?e:{default:()=>[e]})};function roe(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!un(t)}const soe=(t,{slots:e})=>{if(!t.columns.length)return;const{rightTableRef:n,...i}=t;return ue(U0,St({ref:n},i),roe(e)?e:{default:()=>[e]})};function ooe(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!un(t)}const aoe=(t,{slots:e})=>{const{columns:n,columnsStyles:i,depthMap:r,expandColumnKey:a,expandedRowKeys:d,estimatedRowHeight:s,hasFixedColumns:o,hoveringRowKey:c,rowData:h,rowIndex:l,style:u,isScrolling:f,rowProps:m,rowClass:g,rowKey:p,rowEventHandlers:v,ns:b,onRowHovered:_,onRowExpanded:S}=t,w=sa(g,{columns:n,rowData:h,rowIndex:l},""),C=sa(m,{columns:n,rowData:h,rowIndex:l}),x=h[p],M=r[x]||0,E=!!a,A=l<0,O=[b.e("row"),w,{[b.e(`row-depth-${M}`)]:E&&l>=0,[b.is("expanded")]:E&&d.includes(x),[b.is("hovered")]:!f&&x===c,[b.is("fixed")]:!M&&A,[b.is("customized")]:!!e.row}],D=o?_:void 0,L={...C,columns:n,columnsStyles:i,class:O,depth:M,expandColumnKey:a,estimatedRowHeight:A?void 0:s,isScrolling:f,rowIndex:l,rowData:h,rowKey:x,rowEventHandlers:v,style:u};return ue(Yse,St(L,{onRowHover:D,onRowExpand:S}),ooe(e)?e:{default:()=>[e]})},Tg=({columns:t,column:e,columnIndex:n,depth:i,expandIconProps:r,isScrolling:a,rowData:d,rowIndex:s,style:o,expandedRowKeys:c,ns:h,cellProps:l,expandColumnKey:u,indentSize:f,iconSize:m,rowKey:g},{slots:p})=>{const v=js(o);if(e.placeholderSign===Su)return ue("div",{class:h.em("row-cell","placeholder"),style:v},null);const{cellRenderer:b,dataKey:_,dataGetter:S}=e,C=N2(b)||p.default||(V=>ue(F0,V,null)),x=lt(S)?S({columns:t,column:e,columnIndex:n,rowData:d,rowIndex:s}):on(d,_??""),M=sa(l,{cellData:x,columns:t,column:e,columnIndex:n,rowIndex:s,rowData:d}),E={class:h.e("cell-text"),columns:t,column:e,columnIndex:n,cellData:x,isScrolling:a,rowData:d,rowIndex:s},A=C(E),O=[h.e("row-cell"),e.class,e.align===_u.CENTER&&h.is("align-center"),e.align===_u.RIGHT&&h.is("align-right")],D=s>=0&&u&&e.key===u,L=s>=0&&c.includes(d[g]);let U;const j=`margin-inline-start: ${i*f}px;`;return D&&(_t(r)?U=ue(Zse,St(r,{class:[h.e("expand-icon"),h.is("expanded",L)],size:m,expanded:L,style:j,expandable:!0}),null):U=ue("div",{style:[j,`width: ${m}px; height: ${m}px;`].join(" ")},null)),ue("div",St({class:O,style:v},M,{role:"cell"}),[U,A])};Tg.inheritAttrs=!1;function loe(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!un(t)}const coe=({columns:t,columnsStyles:e,headerIndex:n,style:i,headerClass:r,headerProps:a,ns:d},{slots:s})=>{const o={columns:t,headerIndex:n},c=[d.e("header-row"),sa(r,o,""),{[d.is("customized")]:!!s.header}],h={...sa(a,o),columnsStyles:e,class:c,columns:t,headerIndex:n,style:i};return ue(Wse,h,loe(s)?s:{default:()=>[s]})},nC=(t,{slots:e})=>{const{column:n,ns:i,style:r,onColumnSorted:a}=t,d=js(r);if(n.placeholderSign===Su)return ue("div",{class:i.em("header-row-cell","placeholder"),style:d},null);const{headerCellRenderer:s,headerClass:o,sortable:c}=n,h={...t,class:i.e("header-cell-text")},u=(N2(s)||e.default||(S=>ue(B0,S,null)))(h),{sortBy:f,sortState:m,headerCellProps:g}=t;let p,v;if(m){const S=m[n.key];p=!!xg[S],v=p?S:bu.ASC}else p=n.key===f.key,v=p?f.order:bu.ASC;const b=[i.e("header-cell"),sa(o,t,""),n.align===_u.CENTER&&i.is("align-center"),n.align===_u.RIGHT&&i.is("align-right"),c&&i.is("sortable")],_={...sa(g,t),onClick:n.sortable?a:void 0,class:b,style:d,"data-key":n.key};return ue("div",St(_,{role:"columnheader"}),[u,c&&ue(qse,{class:[i.e("sort-icon"),p&&i.is("sorting")],sortOrder:v},null)])},V2=(t,{slots:e})=>{var n;return ue("div",{class:t.class,style:t.style},[(n=e.default)==null?void 0:n.call(e)])};V2.displayName="ElTableV2Footer";const H2=(t,{slots:e})=>ue("div",{class:t.class,style:t.style},[e.default?e.default():ue(KM,null,null)]);H2.displayName="ElTableV2Empty";const z2=(t,{slots:e})=>{var n;return ue("div",{class:t.class,style:t.style},[(n=e.default)==null?void 0:n.call(e)])};z2.displayName="ElTableV2Overlay";function gc(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!un(t)}const uoe="ElTableV2",doe=de({name:uoe,props:zse,setup(t,{slots:e,expose:n}){const i=Ue("table-v2"),{columnsStyles:r,fixedColumnsOnLeft:a,fixedColumnsOnRight:d,mainColumns:s,mainTableHeight:o,fixedTableHeight:c,leftTableWidth:h,rightTableWidth:l,data:u,depthMap:f,expandedRowKeys:m,hasFixedColumns:g,hoveringRowKey:p,mainTableRef:v,leftTableRef:b,rightTableRef:_,isDynamic:S,isResetting:w,isScrolling:C,bodyWidth:x,emptyStyle:M,rootStyle:E,headerWidth:A,footerHeight:O,showEmpty:D,scrollTo:L,scrollToLeft:U,scrollToTop:j,scrollToRow:V,getRowHeight:k,onColumnSorted:F,onRowHeightChange:T,onRowHovered:P,onRowExpanded:H,onRowsRendered:N,onScroll:G,onVerticalScroll:$}=Vse(t);return n({scrollTo:L,scrollToLeft:U,scrollToTop:j,scrollToRow:V}),xt(I0,{ns:i,isResetting:w,hoveringRowKey:p,isScrolling:C}),()=>{const{cache:z,cellProps:Z,estimatedRowHeight:W,expandColumnKey:te,fixedData:ie,headerHeight:re,headerClass:_e,headerProps:Pe,headerCellProps:K,sortBy:Q,sortState:fe,rowHeight:ge,rowClass:se,rowEventHandlers:me,rowKey:be,rowProps:Me,scrollbarAlwaysOn:Ee,indentSize:X,iconSize:Y,useIsScrolling:le,vScrollbarSize:Ce,width:Re}=t,Ne=y(u),he={cache:z,class:i.e("main"),columns:y(s),data:Ne,fixedData:ie,estimatedRowHeight:W,bodyWidth:y(x),headerHeight:re,headerWidth:y(A),height:y(o),mainTableRef:v,rowKey:be,rowHeight:ge,scrollbarAlwaysOn:Ee,scrollbarStartGap:2,scrollbarEndGap:Ce,useIsScrolling:le,width:Re,getRowHeight:k,onRowsRendered:N,onScroll:G},pe=y(h),ee=y(c),oe={cache:z,class:i.e("left"),columns:y(a),data:Ne,estimatedRowHeight:W,leftTableRef:b,rowHeight:ge,bodyWidth:pe,headerWidth:pe,headerHeight:re,height:ee,rowKey:be,scrollbarAlwaysOn:Ee,scrollbarStartGap:2,scrollbarEndGap:Ce,useIsScrolling:le,width:pe,getRowHeight:k,onScroll:$},ce=y(l)+Ce,ye={cache:z,class:i.e("right"),columns:y(d),data:Ne,estimatedRowHeight:W,rightTableRef:_,rowHeight:ge,bodyWidth:ce,headerWidth:ce,headerHeight:re,height:ee,rowKey:be,scrollbarAlwaysOn:Ee,scrollbarStartGap:2,scrollbarEndGap:Ce,width:ce,style:`--${y(i.namespace)}-table-scrollbar-size: ${Ce}px`,useIsScrolling:le,getRowHeight:k,onScroll:$},Oe=y(r),ze={ns:i,depthMap:y(f),columnsStyles:Oe,expandColumnKey:te,expandedRowKeys:y(m),estimatedRowHeight:W,hasFixedColumns:y(g),hoveringRowKey:y(p),rowProps:Me,rowClass:se,rowKey:be,rowEventHandlers:me,onRowHovered:P,onRowExpanded:H,onRowHeightChange:T},xe={cellProps:Z,expandColumnKey:te,indentSize:X,iconSize:Y,rowKey:be,expandedRowKeys:y(m),ns:i},Ve={ns:i,headerClass:_e,headerProps:Pe,columnsStyles:Oe},we={ns:i,sortBy:Q,sortState:fe,headerCellProps:K,onColumnSorted:F},Ie={row:dt=>ue(aoe,St(dt,ze),{row:e.row,cell:De=>{let Ke;return e.cell?ue(Tg,St(De,xe,{style:Oe[De.column.key]}),gc(Ke=e.cell(De))?Ke:{default:()=>[Ke]}):ue(Tg,St(De,xe,{style:Oe[De.column.key]}),null)}}),header:dt=>ue(coe,St(dt,Ve),{header:e.header,cell:De=>{let Ke;return e["header-cell"]?ue(nC,St(De,we,{style:Oe[De.column.key]}),gc(Ke=e["header-cell"](De))?Ke:{default:()=>[Ke]}):ue(nC,St(De,we,{style:Oe[De.column.key]}),null)}})},Ge=[t.class,i.b(),i.e("root"),{[i.is("dynamic")]:y(S)}],it={class:i.e("footer"),style:y(O)};return ue("div",{class:Ge,style:y(E)},[ue(toe,he,gc(Ie)?Ie:{default:()=>[Ie]}),ue(ioe,oe,gc(Ie)?Ie:{default:()=>[Ie]}),ue(soe,ye,gc(Ie)?Ie:{default:()=>[Ie]}),e.footer&&ue(V2,it,{default:e.footer}),y(D)&&ue(H2,{class:i.e("empty"),style:y(M)},{default:e.empty}),e.overlay&&ue(z2,{class:i.e("overlay")},{default:e.overlay})])}}}),foe=Xe({disableWidth:Boolean,disableHeight:Boolean,onResize:{type:Ae(Function)}}),hoe=de({name:"ElAutoResizer",props:foe,setup(t,{slots:e}){const n=Ue("auto-resizer"),{height:i,width:r,sizer:a}=Use(t),d={width:"100%",height:"100%"};return()=>{var s;return ue("div",{ref:a,class:n.b(),style:d},[(s=e.default)==null?void 0:s.call(e,{height:i.value,width:r.value})])}}}),poe=yt(doe),moe=yt(hoe),Bh=Symbol("tabsRootContextKey"),goe=Xe({tabs:{type:Ae(Array),default:()=>an([])}}),$2="ElTabBar",voe=de({name:$2}),yoe=de({...voe,props:goe,setup(t,{expose:e}){const n=t,i=vt(),r=Je(Bh);r||Tn($2,"<el-tabs><el-tab-bar /></el-tabs>");const a=Ue("tabs"),d=q(),s=q(),o=()=>{let h=0,l=0;const u=["top","bottom"].includes(r.props.tabPosition)?"width":"height",f=u==="width"?"x":"y",m=f==="x"?"left":"top";return n.tabs.every(g=>{var p,v;const b=(v=(p=i.parent)==null?void 0:p.refs)==null?void 0:v[`tab-${g.uid}`];if(!b)return!1;if(!g.active)return!0;h=b[`offset${Mr(m)}`],l=b[`client${Mr(u)}`];const _=window.getComputedStyle(b);return u==="width"&&(n.tabs.length>1&&(l-=Number.parseFloat(_.paddingLeft)+Number.parseFloat(_.paddingRight)),h+=Number.parseFloat(_.paddingLeft)),!1}),{[u]:`${l}px`,transform:`translate${Mr(f)}(${h}px)`}},c=()=>s.value=o();return Be(()=>n.tabs,async()=>{await et(),c()},{immediate:!0}),Qn(d,()=>c()),e({ref:d,update:c}),(h,l)=>(I(),ne("div",{ref_key:"barRef",ref:d,class:B([y(a).e("active-bar"),y(a).is(y(r).props.tabPosition)]),style:nt(s.value)},null,6))}});var boe=je(yoe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tabs/src/tab-bar.vue"]]);const _oe=Xe({panes:{type:Ae(Array),default:()=>an([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),Soe={tabClick:(t,e,n)=>n instanceof Event,tabRemove:(t,e)=>e instanceof Event},iC="ElTabNav",woe=de({name:iC,props:_oe,emits:Soe,setup(t,{expose:e,emit:n}){const i=vt(),r=Je(Bh);r||Tn(iC,"<el-tabs><tab-nav /></el-tabs>");const a=Ue("tabs"),d=$B(),s=QB(),o=q(),c=q(),h=q(),l=q(),u=q(!1),f=q(0),m=q(!1),g=q(!0),p=R(()=>["top","bottom"].includes(r.props.tabPosition)?"width":"height"),v=R(()=>({transform:`translate${p.value==="width"?"X":"Y"}(-${f.value}px)`})),b=()=>{if(!o.value)return;const E=o.value[`offset${Mr(p.value)}`],A=f.value;if(!A)return;const O=A>E?A-E:0;f.value=O},_=()=>{if(!o.value||!c.value)return;const E=c.value[`offset${Mr(p.value)}`],A=o.value[`offset${Mr(p.value)}`],O=f.value;if(E-O<=A)return;const D=E-O>A*2?O+A:E-A;f.value=D},S=async()=>{const E=c.value;if(!u.value||!h.value||!o.value||!E)return;await et();const A=h.value.querySelector(".is-active");if(!A)return;const O=o.value,D=["top","bottom"].includes(r.props.tabPosition),L=A.getBoundingClientRect(),U=O.getBoundingClientRect(),j=D?E.offsetWidth-U.width:E.offsetHeight-U.height,V=f.value;let k=V;D?(L.left<U.left&&(k=V-(U.left-L.left)),L.right>U.right&&(k=V+L.right-U.right)):(L.top<U.top&&(k=V-(U.top-L.top)),L.bottom>U.bottom&&(k=V+(L.bottom-U.bottom))),k=Math.max(k,0),f.value=Math.min(k,j)},w=()=>{var E;if(!c.value||!o.value)return;t.stretch&&((E=l.value)==null||E.update());const A=c.value[`offset${Mr(p.value)}`],O=o.value[`offset${Mr(p.value)}`],D=f.value;O<A?(u.value=u.value||{},u.value.prev=D,u.value.next=D+O<A,A-D<O&&(f.value=A-O)):(u.value=!1,D>0&&(f.value=0))},C=E=>{const A=E.code,{up:O,down:D,left:L,right:U}=rt;if(![O,D,L,U].includes(A))return;const j=Array.from(E.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)")),V=j.indexOf(E.target);let k;A===L||A===O?V===0?k=j.length-1:k=V-1:V<j.length-1?k=V+1:k=0,j[k].focus({preventScroll:!0}),j[k].click(),x()},x=()=>{g.value&&(m.value=!0)},M=()=>m.value=!1;return Be(d,E=>{E==="hidden"?g.value=!1:E==="visible"&&setTimeout(()=>g.value=!0,50)}),Be(s,E=>{E?setTimeout(()=>g.value=!0,50):g.value=!1}),Qn(h,w),mt(()=>setTimeout(()=>S(),0)),vs(()=>w()),e({scrollToActiveTab:S,removeFocus:M}),Be(()=>t.panes,()=>i.update(),{flush:"post",deep:!0}),()=>{const E=u.value?[ue("span",{class:[a.e("nav-prev"),a.is("disabled",!u.value.prev)],onClick:b},[ue(tt,null,{default:()=>[ue(eo,null,null)]})]),ue("span",{class:[a.e("nav-next"),a.is("disabled",!u.value.next)],onClick:_},[ue(tt,null,{default:()=>[ue(ui,null,null)]})])]:null,A=t.panes.map((O,D)=>{var L,U,j,V;const k=O.uid,F=O.props.disabled,T=(U=(L=O.props.name)!=null?L:O.index)!=null?U:`${D}`,P=!F&&(O.isClosable||t.editable);O.index=`${D}`;const H=P?ue(tt,{class:"is-icon-close",onClick:$=>n("tabRemove",O,$)},{default:()=>[ue(yr,null,null)]}):null,N=((V=(j=O.slots).label)==null?void 0:V.call(j))||O.props.label,G=!F&&O.active?0:-1;return ue("div",{ref:`tab-${k}`,class:[a.e("item"),a.is(r.props.tabPosition),a.is("active",O.active),a.is("disabled",F),a.is("closable",P),a.is("focus",m.value)],id:`tab-${T}`,key:`tab-${k}`,"aria-controls":`pane-${T}`,role:"tab","aria-selected":O.active,tabindex:G,onFocus:()=>x(),onBlur:()=>M(),onClick:$=>{M(),n("tabClick",O,T,$)},onKeydown:$=>{P&&($.code===rt.delete||$.code===rt.backspace)&&n("tabRemove",O,$)}},[N,H])});return ue("div",{ref:h,class:[a.e("nav-wrap"),a.is("scrollable",!!u.value),a.is(r.props.tabPosition)]},[E,ue("div",{class:a.e("nav-scroll"),ref:o},[ue("div",{class:[a.e("nav"),a.is(r.props.tabPosition),a.is("stretch",t.stretch&&["top","bottom"].includes(r.props.tabPosition))],ref:c,style:v.value,role:"tablist",onKeydown:C},[t.type?null:ue(boe,{ref:l,tabs:[...t.panes]},null),A])])])}}}),Coe=Xe({type:{type:String,values:["card","border-card",""],default:""},activeName:{type:[String,Number]},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:Ae(Function),default:()=>!0},stretch:Boolean}),im=t=>ct(t)||at(t),xoe={[bt]:t=>im(t),tabClick:(t,e)=>e instanceof Event,tabChange:t=>im(t),edit:(t,e)=>["remove","add"].includes(e),tabRemove:t=>im(t),tabAdd:()=>!0};var Toe=de({name:"ElTabs",props:Coe,emits:xoe,setup(t,{emit:e,slots:n,expose:i}){var r,a;const d=Ue("tabs"),{children:s,addChild:o,removeChild:c}=a0(vt(),"ElTabPane"),h=q(),l=q((a=(r=t.modelValue)!=null?r:t.activeName)!=null?a:"0"),u=v=>{l.value=v,e(bt,v),e("tabChange",v)},f=async v=>{var b,_,S;if(!(l.value===v||Un(v)))try{await((b=t.beforeLeave)==null?void 0:b.call(t,v,l.value))!==!1&&(u(v),(S=(_=h.value)==null?void 0:_.removeFocus)==null||S.call(_))}catch{}},m=(v,b,_)=>{v.props.disabled||(f(b),e("tabClick",v,_))},g=(v,b)=>{v.props.disabled||Un(v.props.name)||(b.stopPropagation(),e("edit",v.props.name,"remove"),e("tabRemove",v.props.name))},p=()=>{e("edit",void 0,"add"),e("tabAdd")};return Ir({from:'"activeName"',replacement:'"model-value" or "v-model"',scope:"ElTabs",version:"2.3.0",ref:"https://element-plus.org/en-US/component/tabs.html#attributes",type:"Attribute"},R(()=>!!t.activeName)),Be(()=>t.activeName,v=>f(v)),Be(()=>t.modelValue,v=>f(v)),Be(l,async()=>{var v;await et(),(v=h.value)==null||v.scrollToActiveTab()}),xt(Bh,{props:t,currentName:l,registerPane:o,unregisterPane:c}),i({currentName:l}),()=>{const v=t.editable||t.addable?ue("span",{class:d.e("new-tab"),tabindex:"0",onClick:p,onKeydown:S=>{S.code===rt.enter&&p()}},[ue(tt,{class:d.is("icon-plus")},{default:()=>[ue(mT,null,null)]})]):null,b=ue("div",{class:[d.e("header"),d.is(t.tabPosition)]},[v,ue(woe,{ref:h,currentName:l.value,editable:t.editable,type:t.type,panes:s.value,stretch:t.stretch,onTabClick:m,onTabRemove:g},null)]),_=ue("div",{class:d.e("content")},[Le(n,"default")]);return ue("div",{class:[d.b(),d.m(t.tabPosition),{[d.m("card")]:t.type==="card",[d.m("border-card")]:t.type==="border-card"}]},[...t.tabPosition!=="bottom"?[b,_]:[_,b]])}}});const Eoe=Xe({label:{type:String,default:""},name:{type:[String,Number]},closable:Boolean,disabled:Boolean,lazy:Boolean}),Moe=["id","aria-hidden","aria-labelledby"],W2="ElTabPane",Aoe=de({name:W2}),koe=de({...Aoe,props:Eoe,setup(t){const e=t,n=vt(),i=Vn(),r=Je(Bh);r||Tn(W2,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const a=Ue("tab-pane"),d=q(),s=R(()=>e.closable||r.props.closable),o=N_(()=>{var f;return r.currentName.value===((f=e.name)!=null?f:d.value)}),c=q(o.value),h=R(()=>{var f;return(f=e.name)!=null?f:d.value}),l=N_(()=>!e.lazy||c.value||o.value);Be(o,f=>{f&&(c.value=!0)});const u=Ft({uid:n.uid,slots:i,props:e,paneName:h,active:o,index:d,isClosable:s});return mt(()=>{r.registerPane(u)}),oo(()=>{r.unregisterPane(u.uid)}),(f,m)=>y(l)?pt((I(),ne("div",{key:0,id:`pane-${y(h)}`,class:B(y(a).b()),role:"tabpanel","aria-hidden":!y(o),"aria-labelledby":`tab-${y(h)}`},[Le(f.$slots,"default")],10,Moe)),[[Dt,y(o)]]):Te("v-if",!0)}});var G2=je(koe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tabs/src/tab-pane.vue"]]);const Roe=yt(Toe,{TabPane:G2}),Poe=mn(G2),Ooe=Xe({type:{type:String,values:["primary","success","info","warning","danger",""],default:""},size:{type:String,values:Hr,default:""},truncated:{type:Boolean},tag:{type:String,default:"span"}}),Loe=de({name:"ElText"}),Ioe=de({...Loe,props:Ooe,setup(t){const e=t,n=En(),i=Ue("text"),r=R(()=>[i.b(),i.m(e.type),i.m(n.value),i.is("truncated",e.truncated)]);return(a,d)=>(I(),ke(Ct(a.tag),{class:B(y(r))},{default:ve(()=>[Le(a.$slots,"default")]),_:3},8,["class"]))}});var Doe=je(Ioe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/text/src/text.vue"]]);const Noe=yt(Doe),Foe=Xe({format:{type:String,default:"HH:mm"},modelValue:String,disabled:Boolean,editable:{type:Boolean,default:!0},effect:{type:String,default:"light"},clearable:{type:Boolean,default:!0},size:Xn,placeholder:String,start:{type:String,default:"09:00"},end:{type:String,default:"18:00"},step:{type:String,default:"00:30"},minTime:String,maxTime:String,name:String,prefixIcon:{type:Ae([String,Object]),default:()=>pT},clearIcon:{type:Ae([String,Object]),default:()=>lo}}),ns=t=>{const e=(t||"").split(":");if(e.length>=2){let n=Number.parseInt(e[0],10);const i=Number.parseInt(e[1],10),r=t.toUpperCase();return r.includes("AM")&&n===12?n=0:r.includes("PM")&&n!==12&&(n+=12),{hours:n,minutes:i}}return null},rm=(t,e)=>{const n=ns(t);if(!n)return-1;const i=ns(e);if(!i)return-1;const r=n.minutes+n.hours*60,a=i.minutes+i.hours*60;return r===a?0:r>a?1:-1},rC=t=>`${t}`.padStart(2,"0"),za=t=>`${rC(t.hours)}:${rC(t.minutes)}`,Boe=(t,e)=>{const n=ns(t);if(!n)return"";const i=ns(e);if(!i)return"";const r={hours:n.hours,minutes:n.minutes};return r.minutes+=i.minutes,r.hours+=i.hours,r.hours+=Math.floor(r.minutes/60),r.minutes=r.minutes%60,za(r)},Uoe=de({name:"ElTimeSelect"}),Voe=de({...Uoe,props:Foe,emits:["change","blur","focus","update:modelValue"],setup(t,{expose:e}){const n=t;gt.extend(h0);const{Option:i}=ra,r=Ue("input"),a=q(),d=Mi(),s=R(()=>n.modelValue),o=R(()=>{const p=ns(n.start);return p?za(p):null}),c=R(()=>{const p=ns(n.end);return p?za(p):null}),h=R(()=>{const p=ns(n.step);return p?za(p):null}),l=R(()=>{const p=ns(n.minTime||"");return p?za(p):null}),u=R(()=>{const p=ns(n.maxTime||"");return p?za(p):null}),f=R(()=>{const p=[];if(n.start&&n.end&&n.step){let v=o.value,b;for(;v&&c.value&&rm(v,c.value)<=0;)b=gt(v,"HH:mm").format(n.format),p.push({value:b,disabled:rm(v,l.value||"-1:-1")<=0||rm(v,u.value||"100:100")>=0}),v=Boe(v,h.value)}return p});return e({blur:()=>{var p,v;(v=(p=a.value)==null?void 0:p.blur)==null||v.call(p)},focus:()=>{var p,v;(v=(p=a.value)==null?void 0:p.focus)==null||v.call(p)}}),(p,v)=>(I(),ke(y(ra),{ref_key:"select",ref:a,"model-value":y(s),disabled:y(d),clearable:p.clearable,"clear-icon":p.clearIcon,size:p.size,effect:p.effect,placeholder:p.placeholder,"default-first-option":"",filterable:p.editable,"onUpdate:modelValue":v[0]||(v[0]=b=>p.$emit("update:modelValue",b)),onChange:v[1]||(v[1]=b=>p.$emit("change",b)),onBlur:v[2]||(v[2]=b=>p.$emit("blur",b)),onFocus:v[3]||(v[3]=b=>p.$emit("focus",b))},{prefix:ve(()=>[p.prefixIcon?(I(),ke(y(tt),{key:0,class:B(y(r).e("prefix-icon"))},{default:ve(()=>[(I(),ke(Ct(p.prefixIcon)))]),_:1},8,["class"])):Te("v-if",!0)]),default:ve(()=>[(I(!0),ne(Qe,null,wt(y(f),b=>(I(),ke(y(i),{key:b.value,label:b.value,value:b.value,disabled:b.disabled},null,8,["label","value","disabled"]))),128))]),_:1},8,["model-value","disabled","clearable","clear-icon","size","effect","placeholder","filterable"]))}});var hf=je(Voe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/time-select/src/time-select.vue"]]);hf.install=t=>{t.component(hf.name,hf)};const Hoe=hf,zoe=Hoe,$oe=de({name:"ElTimeline",setup(t,{slots:e}){const n=Ue("timeline");return xt("timeline",e),()=>st("ul",{class:[n.b()]},[Le(e,"default")])}}),Woe=Xe({timestamp:{type:String,default:""},hideTimestamp:{type:Boolean,default:!1},center:{type:Boolean,default:!1},placement:{type:String,values:["top","bottom"],default:"bottom"},type:{type:String,values:["primary","success","warning","danger","info"],default:""},color:{type:String,default:""},size:{type:String,values:["normal","large"],default:"normal"},icon:{type:Qt},hollow:{type:Boolean,default:!1}}),Goe=de({name:"ElTimelineItem"}),joe=de({...Goe,props:Woe,setup(t){const e=t,n=Ue("timeline-item"),i=R(()=>[n.e("node"),n.em("node",e.size||""),n.em("node",e.type||""),n.is("hollow",e.hollow)]);return(r,a)=>(I(),ne("li",{class:B([y(n).b(),{[y(n).e("center")]:r.center}])},[ae("div",{class:B(y(n).e("tail"))},null,2),r.$slots.dot?Te("v-if",!0):(I(),ne("div",{key:0,class:B(y(i)),style:nt({backgroundColor:r.color})},[r.icon?(I(),ke(y(tt),{key:0,class:B(y(n).e("icon"))},{default:ve(()=>[(I(),ke(Ct(r.icon)))]),_:1},8,["class"])):Te("v-if",!0)],6)),r.$slots.dot?(I(),ne("div",{key:1,class:B(y(n).e("dot"))},[Le(r.$slots,"dot")],2)):Te("v-if",!0),ae("div",{class:B(y(n).e("wrapper"))},[!r.hideTimestamp&&r.placement==="top"?(I(),ne("div",{key:0,class:B([y(n).e("timestamp"),y(n).is("top")])},$e(r.timestamp),3)):Te("v-if",!0),ae("div",{class:B(y(n).e("content"))},[Le(r.$slots,"default")],2),!r.hideTimestamp&&r.placement==="bottom"?(I(),ne("div",{key:1,class:B([y(n).e("timestamp"),y(n).is("bottom")])},$e(r.timestamp),3)):Te("v-if",!0)],2)],2))}});var j2=je(joe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/timeline/src/timeline-item.vue"]]);const Xoe=yt($oe,{TimelineItem:j2}),Koe=mn(j2),X2=Xe({nowrap:Boolean});var K2=(t=>(t.top="top",t.bottom="bottom",t.left="left",t.right="right",t))(K2||{});const Yoe=Object.values(K2),V0=Xe({width:{type:Number,default:10},height:{type:Number,default:10},style:{type:Ae(Object),default:null}}),qoe=Xe({side:{type:Ae(String),values:Yoe,required:!0}}),Zoe=["absolute","fixed"],Joe=["top-start","top-end","top","bottom-start","bottom-end","bottom","left-start","left-end","left","right-start","right-end","right"],H0=Xe({ariaLabel:String,arrowPadding:{type:Ae(Number),default:5},effect:{type:String,default:""},contentClass:String,placement:{type:Ae(String),values:Joe,default:"bottom"},reference:{type:Ae(Object),default:null},offset:{type:Number,default:8},strategy:{type:Ae(String),values:Zoe,default:"absolute"},showArrow:{type:Boolean,default:!1}}),z0=Xe({delayDuration:{type:Number,default:300},defaultOpen:Boolean,open:{type:Boolean,default:void 0},onOpenChange:{type:Ae(Function)},"onUpdate:open":{type:Ae(Function)}}),Ba={type:Ae(Function)},$0=Xe({onBlur:Ba,onClick:Ba,onFocus:Ba,onMouseDown:Ba,onMouseEnter:Ba,onMouseLeave:Ba}),Qoe=Xe({...z0,...V0,...$0,...H0,alwaysOn:Boolean,fullTransition:Boolean,transitionProps:{type:Ae(Object),default:null},teleported:Boolean,to:{type:Ae(String),default:"body"}}),Uh=Symbol("tooltipV2"),Y2=Symbol("tooltipV2Content"),sm="tooltip_v2.open",eae=de({name:"ElTooltipV2Root"}),tae=de({...eae,props:z0,setup(t,{expose:e}){const n=t,i=q(n.defaultOpen),r=q(null),a=R({get:()=>k$(n.open)?i.value:n.open,set:p=>{var v;i.value=p,(v=n["onUpdate:open"])==null||v.call(n,p)}}),d=R(()=>at(n.delayDuration)&&n.delayDuration>0),{start:s,stop:o}=na(()=>{a.value=!0},R(()=>n.delayDuration),{immediate:!1}),c=Ue("tooltip-v2"),h=Ji(),l=()=>{o(),a.value=!0},u=()=>{y(d)?s():l()},f=l,m=()=>{o(),a.value=!1};return Be(a,p=>{var v;p&&(document.dispatchEvent(new CustomEvent(sm)),f()),(v=n.onOpenChange)==null||v.call(n,p)}),mt(()=>{document.addEventListener(sm,m)}),rn(()=>{o(),document.removeEventListener(sm,m)}),xt(Uh,{contentId:h,triggerRef:r,ns:c,onClose:m,onDelayOpen:u,onOpen:f}),e({onOpen:f,onClose:m}),(p,v)=>Le(p.$slots,"default",{open:y(a)})}});var nae=je(tae,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip-v2/src/root.vue"]]);const iae=de({name:"ElTooltipV2Arrow"}),rae=de({...iae,props:{...V0,...qoe},setup(t){const e=t,{ns:n}=Je(Uh),{arrowRef:i}=Je(Y2),r=R(()=>{const{style:a,width:d,height:s}=e,o=n.namespace.value;return{[`--${o}-tooltip-v2-arrow-width`]:`${d}px`,[`--${o}-tooltip-v2-arrow-height`]:`${s}px`,[`--${o}-tooltip-v2-arrow-border-width`]:`${d/2}px`,[`--${o}-tooltip-v2-arrow-cover-width`]:d/2-1,...a||{}}});return(a,d)=>(I(),ne("span",{ref_key:"arrowRef",ref:i,style:nt(y(r)),class:B(y(n).e("arrow"))},null,6))}});var sC=je(rae,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip-v2/src/arrow.vue"]]);const sae=Xe({style:{type:Ae([String,Object,Array]),default:()=>({})}}),oae=de({name:"ElVisuallyHidden"}),aae=de({...oae,props:sae,setup(t){const e=t,n=R(()=>[e.style,{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}]);return(i,r)=>(I(),ne("span",St(i.$attrs,{style:y(n)}),[Le(i.$slots,"default")],16))}});var lae=je(aae,[["__file","/home/runner/work/element-plus/element-plus/packages/components/visual-hidden/src/visual-hidden.vue"]]);const cae=["data-side"],uae=de({name:"ElTooltipV2Content"}),dae=de({...uae,props:{...H0,...X2},setup(t){const e=t,{triggerRef:n,contentId:i}=Je(Uh),r=q(e.placement),a=q(e.strategy),d=q(null),{referenceRef:s,contentRef:o,middlewareData:c,x:h,y:l,update:u}=X6({placement:r,strategy:a,middleware:R(()=>{const _=[E6(e.offset)];return e.showArrow&&_.push(K6({arrowRef:d})),_})}),f=Kl().nextZIndex(),m=Ue("tooltip-v2"),g=R(()=>r.value.split("-")[0]),p=R(()=>({position:y(a),top:`${y(l)||0}px`,left:`${y(h)||0}px`,zIndex:f})),v=R(()=>{if(!e.showArrow)return{};const{arrow:_}=y(c);return{[`--${m.namespace.value}-tooltip-v2-arrow-x`]:`${_==null?void 0:_.x}px`||"",[`--${m.namespace.value}-tooltip-v2-arrow-y`]:`${_==null?void 0:_.y}px`||""}}),b=R(()=>[m.e("content"),m.is("dark",e.effect==="dark"),m.is(y(a)),e.contentClass]);return Be(d,()=>u()),Be(()=>e.placement,_=>r.value=_),mt(()=>{Be(()=>e.reference||n.value,_=>{s.value=_||void 0},{immediate:!0})}),xt(Y2,{arrowRef:d}),(_,S)=>(I(),ne("div",{ref_key:"contentRef",ref:o,style:nt(y(p)),"data-tooltip-v2-root":""},[_.nowrap?Te("v-if",!0):(I(),ne("div",{key:0,"data-side":y(g),class:B(y(b))},[Le(_.$slots,"default",{contentStyle:y(p),contentClass:y(b)}),ue(y(lae),{id:y(i),role:"tooltip"},{default:ve(()=>[_.ariaLabel?(I(),ne(Qe,{key:0},[Tt($e(_.ariaLabel),1)],64)):Le(_.$slots,"default",{key:1})]),_:3},8,["id"]),Le(_.$slots,"arrow",{style:nt(y(v)),side:y(g)})],10,cae))],4))}});var oC=je(dae,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip-v2/src/content.vue"]]);const fae=Xe({setRef:{type:Ae(Function),required:!0},onlyChild:Boolean});var hae=de({props:fae,setup(t,{slots:e}){const n=q(),i=wh(n,r=>{r?t.setRef(r.nextElementSibling):t.setRef(null)});return()=>{var r;const[a]=((r=e.default)==null?void 0:r.call(e))||[],d=t.onlyChild?Z5(a.children):a.children;return ue(Qe,{ref:i},[d])}}});const pae=de({name:"ElTooltipV2Trigger"}),mae=de({...pae,props:{...X2,...$0},setup(t){const e=t,{onClose:n,onOpen:i,onDelayOpen:r,triggerRef:a,contentId:d}=Je(Uh);let s=!1;const o=b=>{a.value=b},c=()=>{s=!1},h=pn(e.onMouseEnter,r),l=pn(e.onMouseLeave,n),u=pn(e.onMouseDown,()=>{n(),s=!0,document.addEventListener("mouseup",c,{once:!0})}),f=pn(e.onFocus,()=>{s||i()}),m=pn(e.onBlur,n),g=pn(e.onClick,b=>{b.detail===0&&n()}),p={blur:m,click:g,focus:f,mousedown:u,mouseenter:h,mouseleave:l},v=(b,_,S)=>{b&&Object.entries(_).forEach(([w,C])=>{b[S](w,C)})};return Be(a,(b,_)=>{v(b,p,"addEventListener"),v(_,p,"removeEventListener"),b&&b.setAttribute("aria-describedby",d.value)}),rn(()=>{v(a.value,p,"removeEventListener"),document.removeEventListener("mouseup",c)}),(b,_)=>b.nowrap?(I(),ke(y(hae),{key:0,"set-ref":o,"only-child":""},{default:ve(()=>[Le(b.$slots,"default")]),_:3})):(I(),ne("button",St({key:1,ref_key:"triggerRef",ref:a},b.$attrs),[Le(b.$slots,"default")],16))}});var gae=je(mae,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip-v2/src/trigger.vue"]]);const vae=de({name:"ElTooltipV2"}),yae=de({...vae,props:Qoe,setup(t){const n=Rn(t),i=Ft(rs(n,Object.keys(V0))),r=Ft(rs(n,Object.keys(H0))),a=Ft(rs(n,Object.keys(z0))),d=Ft(rs(n,Object.keys($0)));return(s,o)=>(I(),ke(nae,dr(sh(a)),{default:ve(({open:c})=>[ue(gae,St(d,{nowrap:""}),{default:ve(()=>[Le(s.$slots,"trigger")]),_:3},16),(I(),ke(Tu,{to:s.to,disabled:!s.teleported},[s.fullTransition?(I(),ke(wn,dr(St({key:0},s.transitionProps)),{default:ve(()=>[s.alwaysOn||c?(I(),ke(oC,dr(St({key:0},r)),{arrow:ve(({style:h,side:l})=>[s.showArrow?(I(),ke(sC,St({key:0},i,{style:h,side:l}),null,16,["style","side"])):Te("v-if",!0)]),default:ve(()=>[Le(s.$slots,"default")]),_:3},16)):Te("v-if",!0)]),_:2},1040)):(I(),ne(Qe,{key:1},[s.alwaysOn||c?(I(),ke(oC,dr(St({key:0},r)),{arrow:ve(({style:h,side:l})=>[s.showArrow?(I(),ke(sC,St({key:0},i,{style:h,side:l}),null,16,["style","side"])):Te("v-if",!0)]),default:ve(()=>[Le(s.$slots,"default")]),_:3},16)):Te("v-if",!0)],64))],8,["to","disabled"]))]),_:3},16))}});var bae=je(yae,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip-v2/src/tooltip.vue"]]);const _ae=yt(bae),q2="left-check-change",Z2="right-check-change",$a=Xe({data:{type:Ae(Array),default:()=>[]},titles:{type:Ae(Array),default:()=>[]},buttonTexts:{type:Ae(Array),default:()=>[]},filterPlaceholder:String,filterMethod:{type:Ae(Function)},leftDefaultChecked:{type:Ae(Array),default:()=>[]},rightDefaultChecked:{type:Ae(Array),default:()=>[]},renderContent:{type:Ae(Function)},modelValue:{type:Ae(Array),default:()=>[]},format:{type:Ae(Object),default:()=>({})},filterable:Boolean,props:{type:Ae(Object),default:()=>an({label:"label",key:"key",disabled:"disabled"})},targetOrder:{type:String,values:["original","push","unshift"],default:"original"},validateEvent:{type:Boolean,default:!0}}),Eg=(t,e)=>[t,e].every(Ze)||Ze(t)&&Cn(e),Sae={[tn]:(t,e,n)=>[t,n].every(Ze)&&["left","right"].includes(e),[bt]:t=>Ze(t),[q2]:Eg,[Z2]:Eg},Mg="checked-change",wae=Xe({data:$a.data,optionRender:{type:Ae(Function)},placeholder:String,title:String,filterable:Boolean,format:$a.format,filterMethod:$a.filterMethod,defaultChecked:$a.leftDefaultChecked,props:$a.props}),Cae={[Mg]:Eg},zu=t=>{const e={label:"label",key:"key",disabled:"disabled"};return R(()=>({...e,...t.props}))},xae=(t,e,n)=>{const i=zu(t),r=R(()=>t.data.filter(h=>lt(t.filterMethod)?t.filterMethod(e.query,h):String(h[i.value.label]||h[i.value.key]).toLowerCase().includes(e.query.toLowerCase()))),a=R(()=>r.value.filter(h=>!h[i.value.disabled])),d=R(()=>{const h=e.checked.length,l=t.data.length,{noChecked:u,hasChecked:f}=t.format;return u&&f?h>0?f.replace(/\${checked}/g,h.toString()).replace(/\${total}/g,l.toString()):u.replace(/\${total}/g,l.toString()):`${h}/${l}`}),s=R(()=>{const h=e.checked.length;return h>0&&h<a.value.length}),o=()=>{const h=a.value.map(l=>l[i.value.key]);e.allChecked=h.length>0&&h.every(l=>e.checked.includes(l))},c=h=>{e.checked=h?a.value.map(l=>l[i.value.key]):[]};return Be(()=>e.checked,(h,l)=>{if(o(),e.checkChangeByUser){const u=h.concat(l).filter(f=>!h.includes(f)||!l.includes(f));n(Mg,h,u)}else n(Mg,h),e.checkChangeByUser=!0}),Be(a,()=>{o()}),Be(()=>t.data,()=>{const h=[],l=r.value.map(u=>u[i.value.key]);e.checked.forEach(u=>{l.includes(u)&&h.push(u)}),e.checkChangeByUser=!1,e.checked=h}),Be(()=>t.defaultChecked,(h,l)=>{if(l&&h.length===l.length&&h.every(m=>l.includes(m)))return;const u=[],f=a.value.map(m=>m[i.value.key]);h.forEach(m=>{f.includes(m)&&u.push(m)}),e.checkChangeByUser=!1,e.checked=u},{immediate:!0}),{filteredData:r,checkableData:a,checkedSummary:d,isIndeterminate:s,updateAllChecked:o,handleAllCheckedChange:c}},Tae=(t,e)=>({onSourceCheckedChange:(r,a)=>{t.leftChecked=r,a&&e(q2,r,a)},onTargetCheckedChange:(r,a)=>{t.rightChecked=r,a&&e(Z2,r,a)}}),Eae=t=>{const e=zu(t),n=R(()=>t.data.reduce((a,d)=>(a[d[e.value.key]]=d)&&a,{})),i=R(()=>t.data.filter(a=>!t.modelValue.includes(a[e.value.key]))),r=R(()=>t.targetOrder==="original"?t.data.filter(a=>t.modelValue.includes(a[e.value.key])):t.modelValue.reduce((a,d)=>{const s=n.value[d];return s&&a.push(s),a},[]));return{sourceData:i,targetData:r}},Mae=(t,e,n)=>{const i=zu(t),r=(s,o,c)=>{n(bt,s),n(tn,s,o,c)};return{addToLeft:()=>{const s=t.modelValue.slice();e.rightChecked.forEach(o=>{const c=s.indexOf(o);c>-1&&s.splice(c,1)}),r(s,"left",e.rightChecked)},addToRight:()=>{let s=t.modelValue.slice();const o=t.data.filter(c=>{const h=c[i.value.key];return e.leftChecked.includes(h)&&!t.modelValue.includes(h)}).map(c=>c[i.value.key]);s=t.targetOrder==="unshift"?o.concat(s):s.concat(o),t.targetOrder==="original"&&(s=t.data.filter(c=>s.includes(c[i.value.key])).map(c=>c[i.value.key])),r(s,"right",e.leftChecked)}}},Aae=de({name:"ElTransferPanel"}),kae=de({...Aae,props:wae,emits:Cae,setup(t,{expose:e,emit:n}){const i=t,r=Vn(),a=({option:_})=>_,{t:d}=Pt(),s=Ue("transfer"),o=Ft({checked:[],allChecked:!1,query:"",checkChangeByUser:!0}),c=zu(i),{filteredData:h,checkedSummary:l,isIndeterminate:u,handleAllCheckedChange:f}=xae(i,o,n),m=R(()=>!$i(o.query)&&$i(h.value)),g=R(()=>!$i(r.default()[0].children)),{checked:p,allChecked:v,query:b}=Rn(o);return e({query:b}),(_,S)=>(I(),ne("div",{class:B(y(s).b("panel"))},[ae("p",{class:B(y(s).be("panel","header"))},[ue(y(er),{modelValue:y(v),"onUpdate:modelValue":S[0]||(S[0]=w=>en(v)?v.value=w:null),indeterminate:y(u),"validate-event":!1,onChange:y(f)},{default:ve(()=>[Tt($e(_.title)+" ",1),ae("span",null,$e(y(l)),1)]),_:1},8,["modelValue","indeterminate","onChange"])],2),ae("div",{class:B([y(s).be("panel","body"),y(s).is("with-footer",y(g))])},[_.filterable?(I(),ke(y(Jn),{key:0,modelValue:y(b),"onUpdate:modelValue":S[1]||(S[1]=w=>en(b)?b.value=w:null),class:B(y(s).be("panel","filter")),size:"default",placeholder:_.placeholder,"prefix-icon":y(A5),clearable:"","validate-event":!1},null,8,["modelValue","class","placeholder","prefix-icon"])):Te("v-if",!0),pt(ue(y(rM),{modelValue:y(p),"onUpdate:modelValue":S[2]||(S[2]=w=>en(p)?p.value=w:null),"validate-event":!1,class:B([y(s).is("filterable",_.filterable),y(s).be("panel","list")])},{default:ve(()=>[(I(!0),ne(Qe,null,wt(y(h),w=>(I(),ke(y(er),{key:w[y(c).key],class:B(y(s).be("panel","item")),label:w[y(c).key],disabled:w[y(c).disabled],"validate-event":!1},{default:ve(()=>{var C;return[ue(a,{option:(C=_.optionRender)==null?void 0:C.call(_,w)},null,8,["option"])]}),_:2},1032,["class","label","disabled"]))),128))]),_:1},8,["modelValue","class"]),[[Dt,!y(m)&&!y($i)(_.data)]]),pt(ae("p",{class:B(y(s).be("panel","empty"))},$e(y(m)?y(d)("el.transfer.noMatch"):y(d)("el.transfer.noData")),3),[[Dt,y(m)||y($i)(_.data)]])],2),y(g)?(I(),ne("p",{key:0,class:B(y(s).be("panel","footer"))},[Le(_.$slots,"default")],2)):Te("v-if",!0)],2))}});var aC=je(kae,[["__file","/home/runner/work/element-plus/element-plus/packages/components/transfer/src/transfer-panel.vue"]]);const Rae={key:0},Pae={key:0},Oae=de({name:"ElTransfer"}),Lae=de({...Oae,props:$a,emits:Sae,setup(t,{expose:e,emit:n}){const i=t,r=Vn(),{t:a}=Pt(),d=Ue("transfer"),{formItem:s}=gi(),o=Ft({leftChecked:[],rightChecked:[]}),c=zu(i),{sourceData:h,targetData:l}=Eae(i),{onSourceCheckedChange:u,onTargetCheckedChange:f}=Tae(o,n),{addToLeft:m,addToRight:g}=Mae(i,o,n),p=q(),v=q(),b=M=>{switch(M){case"left":p.value.query="";break;case"right":v.value.query="";break}},_=R(()=>i.buttonTexts.length===2),S=R(()=>i.titles[0]||a("el.transfer.titles.0")),w=R(()=>i.titles[1]||a("el.transfer.titles.1")),C=R(()=>i.filterPlaceholder||a("el.transfer.filterPlaceholder"));Be(()=>i.modelValue,()=>{var M;i.validateEvent&&((M=s==null?void 0:s.validate)==null||M.call(s,"change").catch(E=>void 0))});const x=R(()=>M=>i.renderContent?i.renderContent(st,M):r.default?r.default({option:M}):st("span",M[c.value.label]||M[c.value.key]));return e({clearQuery:b,leftPanel:p,rightPanel:v}),(M,E)=>(I(),ne("div",{class:B(y(d).b())},[ue(aC,{ref_key:"leftPanel",ref:p,data:y(h),"option-render":y(x),placeholder:y(C),title:y(S),filterable:M.filterable,format:M.format,"filter-method":M.filterMethod,"default-checked":M.leftDefaultChecked,props:i.props,onCheckedChange:y(u)},{default:ve(()=>[Le(M.$slots,"left-footer")]),_:3},8,["data","option-render","placeholder","title","filterable","format","filter-method","default-checked","props","onCheckedChange"]),ae("div",{class:B(y(d).e("buttons"))},[ue(y(jn),{type:"primary",class:B([y(d).e("button"),y(d).is("with-texts",y(_))]),disabled:y($i)(o.rightChecked),onClick:y(m)},{default:ve(()=>[ue(y(tt),null,{default:ve(()=>[ue(y(eo))]),_:1}),y(Un)(M.buttonTexts[0])?Te("v-if",!0):(I(),ne("span",Rae,$e(M.buttonTexts[0]),1))]),_:1},8,["class","disabled","onClick"]),ue(y(jn),{type:"primary",class:B([y(d).e("button"),y(d).is("with-texts",y(_))]),disabled:y($i)(o.leftChecked),onClick:y(g)},{default:ve(()=>[y(Un)(M.buttonTexts[1])?Te("v-if",!0):(I(),ne("span",Pae,$e(M.buttonTexts[1]),1)),ue(y(tt),null,{default:ve(()=>[ue(y(ui))]),_:1})]),_:1},8,["class","disabled","onClick"])],2),ue(aC,{ref_key:"rightPanel",ref:v,data:y(l),"option-render":y(x),placeholder:y(C),filterable:M.filterable,format:M.format,"filter-method":M.filterMethod,title:y(w),"default-checked":M.rightDefaultChecked,props:i.props,onCheckedChange:y(f)},{default:ve(()=>[Le(M.$slots,"right-footer")]),_:3},8,["data","option-render","placeholder","filterable","format","filter-method","title","default-checked","props","onCheckedChange"])],2))}});var Iae=je(Lae,[["__file","/home/runner/work/element-plus/element-plus/packages/components/transfer/src/transfer.vue"]]);const Dae=yt(Iae),cl="$treeNodeId",lC=function(t,e){!e||e[cl]||Object.defineProperty(e,cl,{value:t.id,enumerable:!1,configurable:!1,writable:!1})},W0=function(t,e){return t?e[t]:e[cl]},Ag=(t,e,n)=>{const i=t.value.currentNode;n();const r=t.value.currentNode;i!==r&&e("current-change",r?r.data:null,r)},kg=t=>{let e=!0,n=!0,i=!0;for(let r=0,a=t.length;r<a;r++){const d=t[r];(d.checked!==!0||d.indeterminate)&&(e=!1,d.disabled||(i=!1)),(d.checked!==!1||d.indeterminate)&&(n=!1)}return{all:e,none:n,allWithoutDisable:i,half:!e&&!n}},pf=function(t){if(t.childNodes.length===0||t.loading)return;const{all:e,none:n,half:i}=kg(t.childNodes);e?(t.checked=!0,t.indeterminate=!1):i?(t.checked=!1,t.indeterminate=!0):n&&(t.checked=!1,t.indeterminate=!1);const r=t.parent;!r||r.level===0||t.store.checkStrictly||pf(r)},Bd=function(t,e){const n=t.store.props,i=t.data||{},r=n[e];if(typeof r=="function")return r(i,t);if(typeof r=="string")return i[r];if(typeof r>"u"){const a=i[e];return a===void 0?"":a}};let Nae=0,Rg=class mf{constructor(e){this.id=Nae++,this.text=null,this.checked=!1,this.indeterminate=!1,this.data=null,this.expanded=!1,this.parent=null,this.visible=!0,this.isCurrent=!1,this.canFocus=!1;for(const n in e)Mt(e,n)&&(this[n]=e[n]);this.level=0,this.loaded=!1,this.childNodes=[],this.loading=!1,this.parent&&(this.level=this.parent.level+1)}initialize(){const e=this.store;if(!e)throw new Error("[Node]store is required!");e.registerNode(this);const n=e.props;if(n&&typeof n.isLeaf<"u"){const a=Bd(this,"isLeaf");typeof a=="boolean"&&(this.isLeafByUser=a)}if(e.lazy!==!0&&this.data?(this.setData(this.data),e.defaultExpandAll&&(this.expanded=!0,this.canFocus=!0)):this.level>0&&e.lazy&&e.defaultExpandAll&&this.expand(),Array.isArray(this.data)||lC(this,this.data),!this.data)return;const i=e.defaultExpandedKeys,r=e.key;r&&i&&i.includes(this.key)&&this.expand(null,e.autoExpandParent),r&&e.currentNodeKey!==void 0&&this.key===e.currentNodeKey&&(e.currentNode=this,e.currentNode.isCurrent=!0),e.lazy&&e._initDefaultCheckedNode(this),this.updateLeafState(),this.parent&&(this.level===1||this.parent.expanded===!0)&&(this.canFocus=!0)}setData(e){Array.isArray(e)||lC(this,e),this.data=e,this.childNodes=[];let n;this.level===0&&Array.isArray(this.data)?n=this.data:n=Bd(this,"children")||[];for(let i=0,r=n.length;i<r;i++)this.insertChild({data:n[i]})}get label(){return Bd(this,"label")}get key(){const e=this.store.key;return this.data?this.data[e]:null}get disabled(){return Bd(this,"disabled")}get nextSibling(){const e=this.parent;if(e){const n=e.childNodes.indexOf(this);if(n>-1)return e.childNodes[n+1]}return null}get previousSibling(){const e=this.parent;if(e){const n=e.childNodes.indexOf(this);if(n>-1)return n>0?e.childNodes[n-1]:null}return null}contains(e,n=!0){return(this.childNodes||[]).some(i=>i===e||n&&i.contains(e))}remove(){const e=this.parent;e&&e.removeChild(this)}insertChild(e,n,i){if(!e)throw new Error("InsertChild error: child is required.");if(!(e instanceof mf)){if(!i){const r=this.getChildren(!0);r.includes(e.data)||(typeof n>"u"||n<0?r.push(e.data):r.splice(n,0,e.data))}Object.assign(e,{parent:this,store:this.store}),e=Ft(new mf(e)),e instanceof mf&&e.initialize()}e.level=this.level+1,typeof n>"u"||n<0?this.childNodes.push(e):this.childNodes.splice(n,0,e),this.updateLeafState()}insertBefore(e,n){let i;n&&(i=this.childNodes.indexOf(n)),this.insertChild(e,i)}insertAfter(e,n){let i;n&&(i=this.childNodes.indexOf(n),i!==-1&&(i+=1)),this.insertChild(e,i)}removeChild(e){const n=this.getChildren()||[],i=n.indexOf(e.data);i>-1&&n.splice(i,1);const r=this.childNodes.indexOf(e);r>-1&&(this.store&&this.store.deregisterNode(e),e.parent=null,this.childNodes.splice(r,1)),this.updateLeafState()}removeChildByData(e){let n=null;for(let i=0;i<this.childNodes.length;i++)if(this.childNodes[i].data===e){n=this.childNodes[i];break}n&&this.removeChild(n)}expand(e,n){const i=()=>{if(n){let r=this.parent;for(;r.level>0;)r.expanded=!0,r=r.parent}this.expanded=!0,e&&e(),this.childNodes.forEach(r=>{r.canFocus=!0})};this.shouldLoadData()?this.loadData(r=>{Array.isArray(r)&&(this.checked?this.setChecked(!0,!0):this.store.checkStrictly||pf(this),i())}):i()}doCreateChildren(e,n={}){e.forEach(i=>{this.insertChild(Object.assign({data:i},n),void 0,!0)})}collapse(){this.expanded=!1,this.childNodes.forEach(e=>{e.canFocus=!1})}shouldLoadData(){return this.store.lazy===!0&&this.store.load&&!this.loaded}updateLeafState(){if(this.store.lazy===!0&&this.loaded!==!0&&typeof this.isLeafByUser<"u"){this.isLeaf=this.isLeafByUser;return}const e=this.childNodes;if(!this.store.lazy||this.store.lazy===!0&&this.loaded===!0){this.isLeaf=!e||e.length===0;return}this.isLeaf=!1}setChecked(e,n,i,r){if(this.indeterminate=e==="half",this.checked=e===!0,this.store.checkStrictly)return;if(!(this.shouldLoadData()&&!this.store.checkDescendants)){const{all:d,allWithoutDisable:s}=kg(this.childNodes);!this.isLeaf&&!d&&s&&(this.checked=!1,e=!1);const o=()=>{if(n){const c=this.childNodes;for(let u=0,f=c.length;u<f;u++){const m=c[u];r=r||e!==!1;const g=m.disabled?m.checked:r;m.setChecked(g,n,!0,r)}const{half:h,all:l}=kg(c);l||(this.checked=l,this.indeterminate=h)}};if(this.shouldLoadData()){this.loadData(()=>{o(),pf(this)},{checked:e!==!1});return}else o()}const a=this.parent;!a||a.level===0||i||pf(a)}getChildren(e=!1){if(this.level===0)return this.data;const n=this.data;if(!n)return null;const i=this.store.props;let r="children";return i&&(r=i.children||"children"),n[r]===void 0&&(n[r]=null),e&&!n[r]&&(n[r]=[]),n[r]}updateChildren(){const e=this.getChildren()||[],n=this.childNodes.map(a=>a.data),i={},r=[];e.forEach((a,d)=>{const s=a[cl];!!s&&n.findIndex(c=>c[cl]===s)>=0?i[s]={index:d,data:a}:r.push({index:d,data:a})}),this.store.lazy||n.forEach(a=>{i[a[cl]]||this.removeChildByData(a)}),r.forEach(({index:a,data:d})=>{this.insertChild({data:d},a)}),this.updateLeafState()}loadData(e,n={}){if(this.store.lazy===!0&&this.store.load&&!this.loaded&&(!this.loading||Object.keys(n).length)){this.loading=!0;const i=r=>{this.childNodes=[],this.doCreateChildren(r,n),this.loaded=!0,this.loading=!1,this.updateLeafState(),e&&e.call(this,r)};this.store.load(this,i)}else e&&e.call(this)}};class Fae{constructor(e){this.currentNode=null,this.currentNodeKey=null;for(const n in e)Mt(e,n)&&(this[n]=e[n]);this.nodesMap={}}initialize(){if(this.root=new Rg({data:this.data,store:this}),this.root.initialize(),this.lazy&&this.load){const e=this.load;e(this.root,n=>{this.root.doCreateChildren(n),this._initDefaultCheckedNodes()})}else this._initDefaultCheckedNodes()}filter(e){const n=this.filterNodeMethod,i=this.lazy,r=function(a){const d=a.root?a.root.childNodes:a.childNodes;if(d.forEach(s=>{s.visible=n.call(s,e,s.data,s),r(s)}),!a.visible&&d.length){let s=!0;s=!d.some(o=>o.visible),a.root?a.root.visible=s===!1:a.visible=s===!1}e&&a.visible&&!a.isLeaf&&!i&&a.expand()};r(this)}setData(e){e!==this.root.data?(this.root.setData(e),this._initDefaultCheckedNodes()):this.root.updateChildren()}getNode(e){if(e instanceof Rg)return e;const n=_t(e)?W0(this.key,e):e;return this.nodesMap[n]||null}insertBefore(e,n){const i=this.getNode(n);i.parent.insertBefore({data:e},i)}insertAfter(e,n){const i=this.getNode(n);i.parent.insertAfter({data:e},i)}remove(e){const n=this.getNode(e);n&&n.parent&&(n===this.currentNode&&(this.currentNode=null),n.parent.removeChild(n))}append(e,n){const i=n?this.getNode(n):this.root;i&&i.insertChild({data:e})}_initDefaultCheckedNodes(){const e=this.defaultCheckedKeys||[],n=this.nodesMap;e.forEach(i=>{const r=n[i];r&&r.setChecked(!0,!this.checkStrictly)})}_initDefaultCheckedNode(e){(this.defaultCheckedKeys||[]).includes(e.key)&&e.setChecked(!0,!this.checkStrictly)}setDefaultCheckedKey(e){e!==this.defaultCheckedKeys&&(this.defaultCheckedKeys=e,this._initDefaultCheckedNodes())}registerNode(e){const n=this.key;!e||!e.data||(n?e.key!==void 0&&(this.nodesMap[e.key]=e):this.nodesMap[e.id]=e)}deregisterNode(e){!this.key||!e||!e.data||(e.childNodes.forEach(i=>{this.deregisterNode(i)}),delete this.nodesMap[e.key])}getCheckedNodes(e=!1,n=!1){const i=[],r=function(a){(a.root?a.root.childNodes:a.childNodes).forEach(s=>{(s.checked||n&&s.indeterminate)&&(!e||e&&s.isLeaf)&&i.push(s.data),r(s)})};return r(this),i}getCheckedKeys(e=!1){return this.getCheckedNodes(e).map(n=>(n||{})[this.key])}getHalfCheckedNodes(){const e=[],n=function(i){(i.root?i.root.childNodes:i.childNodes).forEach(a=>{a.indeterminate&&e.push(a.data),n(a)})};return n(this),e}getHalfCheckedKeys(){return this.getHalfCheckedNodes().map(e=>(e||{})[this.key])}_getAllNodes(){const e=[],n=this.nodesMap;for(const i in n)Mt(n,i)&&e.push(n[i]);return e}updateChildren(e,n){const i=this.nodesMap[e];if(!i)return;const r=i.childNodes;for(let a=r.length-1;a>=0;a--){const d=r[a];this.remove(d.data)}for(let a=0,d=n.length;a<d;a++){const s=n[a];this.append(s,i.data)}}_setCheckedKeys(e,n=!1,i){const r=this._getAllNodes().sort((s,o)=>o.level-s.level),a=Object.create(null),d=Object.keys(i);r.forEach(s=>s.setChecked(!1,!1));for(let s=0,o=r.length;s<o;s++){const c=r[s],h=c.data[e].toString();if(!d.includes(h)){c.checked&&!a[h]&&c.setChecked(!1,!1);continue}let u=c.parent;for(;u&&u.level>0;)a[u.data[e]]=!0,u=u.parent;if(c.isLeaf||this.checkStrictly){c.setChecked(!0,!1);continue}if(c.setChecked(!0,!0),n){c.setChecked(!1,!1);const f=function(m){m.childNodes.forEach(p=>{p.isLeaf||p.setChecked(!1,!1),f(p)})};f(c)}}}setCheckedNodes(e,n=!1){const i=this.key,r={};e.forEach(a=>{r[(a||{})[i]]=!0}),this._setCheckedKeys(i,n,r)}setCheckedKeys(e,n=!1){this.defaultCheckedKeys=e;const i=this.key,r={};e.forEach(a=>{r[a]=!0}),this._setCheckedKeys(i,n,r)}setDefaultExpandedKeys(e){e=e||[],this.defaultExpandedKeys=e,e.forEach(n=>{const i=this.getNode(n);i&&i.expand(null,this.autoExpandParent)})}setChecked(e,n,i){const r=this.getNode(e);r&&r.setChecked(!!n,i)}getCurrentNode(){return this.currentNode}setCurrentNode(e){const n=this.currentNode;n&&(n.isCurrent=!1),this.currentNode=e,this.currentNode.isCurrent=!0}setUserCurrentNode(e,n=!0){const i=e[this.key],r=this.nodesMap[i];this.setCurrentNode(r),n&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0)}setCurrentNodeKey(e,n=!0){if(e==null){this.currentNode&&(this.currentNode.isCurrent=!1),this.currentNode=null;return}const i=this.getNode(e);i&&(this.setCurrentNode(i),n&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0))}}const Bae=de({name:"ElTreeNodeContent",props:{node:{type:Object,required:!0},renderContent:Function},setup(t){const e=Ue("tree"),n=Je("NodeInstance"),i=Je("RootTree");return()=>{const r=t.node,{data:a,store:d}=r;return t.renderContent?t.renderContent(st,{_self:n,node:r,data:a,store:d}):i.ctx.slots.default?i.ctx.slots.default({node:r,data:a}):st("span",{class:e.be("node","label")},[r.label])}}});var Uae=je(Bae,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tree/src/tree-node-content.vue"]]);function J2(t){const e=Je("TreeNodeMap",null),n={treeNodeExpand:i=>{t.node!==i&&t.node.collapse()},children:[]};return e&&e.children.push(n),xt("TreeNodeMap",n),{broadcastExpanded:i=>{if(t.accordion)for(const r of n.children)r.treeNodeExpand(i)}}}const Q2=Symbol("dragEvents");function Vae({props:t,ctx:e,el$:n,dropIndicator$:i,store:r}){const a=Ue("tree"),d=q({showDropIndicator:!1,draggingNode:null,dropNode:null,allowDrop:!0,dropType:null});return xt(Q2,{treeNodeDragStart:({event:h,treeNode:l})=>{if(typeof t.allowDrag=="function"&&!t.allowDrag(l.node))return h.preventDefault(),!1;h.dataTransfer.effectAllowed="move";try{h.dataTransfer.setData("text/plain","")}catch{}d.value.draggingNode=l,e.emit("node-drag-start",l.node,h)},treeNodeDragOver:({event:h,treeNode:l})=>{const u=l,f=d.value.dropNode;f&&f.node.id!==u.node.id&&Ci(f.$el,a.is("drop-inner"));const m=d.value.draggingNode;if(!m||!u)return;let g=!0,p=!0,v=!0,b=!0;typeof t.allowDrop=="function"&&(g=t.allowDrop(m.node,u.node,"prev"),b=p=t.allowDrop(m.node,u.node,"inner"),v=t.allowDrop(m.node,u.node,"next")),h.dataTransfer.dropEffect=p||g||v?"move":"none",(g||p||v)&&(f==null?void 0:f.node.id)!==u.node.id&&(f&&e.emit("node-drag-leave",m.node,f.node,h),e.emit("node-drag-enter",m.node,u.node,h)),(g||p||v)&&(d.value.dropNode=u),u.node.nextSibling===m.node&&(v=!1),u.node.previousSibling===m.node&&(g=!1),u.node.contains(m.node,!1)&&(p=!1),(m.node===u.node||m.node.contains(u.node))&&(g=!1,p=!1,v=!1);const _=u.$el.getBoundingClientRect(),S=n.value.getBoundingClientRect();let w;const C=g?p?.25:v?.45:1:-1,x=v?p?.75:g?.55:0:1;let M=-9999;const E=h.clientY-_.top;E<_.height*C?w="before":E>_.height*x?w="after":p?w="inner":w="none";const A=u.$el.querySelector(`.${a.be("node","expand-icon")}`).getBoundingClientRect(),O=i.value;w==="before"?M=A.top-S.top:w==="after"&&(M=A.bottom-S.top),O.style.top=`${M}px`,O.style.left=`${A.right-S.left}px`,w==="inner"?Ar(u.$el,a.is("drop-inner")):Ci(u.$el,a.is("drop-inner")),d.value.showDropIndicator=w==="before"||w==="after",d.value.allowDrop=d.value.showDropIndicator||b,d.value.dropType=w,e.emit("node-drag-over",m.node,u.node,h)},treeNodeDragEnd:h=>{const{draggingNode:l,dropType:u,dropNode:f}=d.value;if(h.preventDefault(),h.dataTransfer.dropEffect="move",l&&f){const m={data:l.node.data};u!=="none"&&l.node.remove(),u==="before"?f.node.parent.insertBefore(m,f.node):u==="after"?f.node.parent.insertAfter(m,f.node):u==="inner"&&f.node.insertChild(m),u!=="none"&&r.value.registerNode(m),Ci(f.$el,a.is("drop-inner")),e.emit("node-drag-end",l.node,f.node,u,h),u!=="none"&&e.emit("node-drop",l.node,f.node,u,h)}l&&!f&&e.emit("node-drag-end",l.node,null,u,h),d.value.showDropIndicator=!1,d.value.draggingNode=null,d.value.dropNode=null,d.value.allowDrop=!0}}),{dragState:d}}const Hae=de({name:"ElTreeNode",components:{ElCollapseTransition:Dh,ElCheckbox:er,NodeContent:Uae,ElIcon:tt,Loading:co},props:{node:{type:Rg,default:()=>({})},props:{type:Object,default:()=>({})},accordion:Boolean,renderContent:Function,renderAfterExpand:Boolean,showCheckbox:{type:Boolean,default:!1}},emits:["node-expand"],setup(t,e){const n=Ue("tree"),{broadcastExpanded:i}=J2(t),r=Je("RootTree"),a=q(!1),d=q(!1),s=q(null),o=q(null),c=q(null),h=Je(Q2),l=vt();xt("NodeInstance",l),t.node.expanded&&(a.value=!0,d.value=!0);const u=r.props.children||"children";Be(()=>{const E=t.node.data[u];return E&&[...E]},()=>{t.node.updateChildren()}),Be(()=>t.node.indeterminate,E=>{g(t.node.checked,E)}),Be(()=>t.node.checked,E=>{g(E,t.node.indeterminate)}),Be(()=>t.node.expanded,E=>{et(()=>a.value=E),E&&(d.value=!0)});const f=E=>W0(r.props.nodeKey,E.data),m=E=>{const A=t.props.class;if(!A)return{};let O;if(lt(A)){const{data:D}=E;O=A(D,E)}else O=A;return ct(O)?{[O]:!0}:O},g=(E,A)=>{(s.value!==E||o.value!==A)&&r.ctx.emit("check-change",t.node.data,E,A),s.value=E,o.value=A},p=E=>{Ag(r.store,r.ctx.emit,()=>r.store.value.setCurrentNode(t.node)),r.currentNode.value=t.node,r.props.expandOnClickNode&&b(),r.props.checkOnClickNode&&!t.node.disabled&&_(null,{target:{checked:!t.node.checked}}),r.ctx.emit("node-click",t.node.data,t.node,l,E)},v=E=>{r.instance.vnode.props.onNodeContextmenu&&(E.stopPropagation(),E.preventDefault()),r.ctx.emit("node-contextmenu",E,t.node.data,t.node,l)},b=()=>{t.node.isLeaf||(a.value?(r.ctx.emit("node-collapse",t.node.data,t.node,l),t.node.collapse()):(t.node.expand(),e.emit("node-expand",t.node.data,t.node,l)))},_=(E,A)=>{t.node.setChecked(A.target.checked,!r.props.checkStrictly),et(()=>{const O=r.store.value;r.ctx.emit("check",t.node.data,{checkedNodes:O.getCheckedNodes(),checkedKeys:O.getCheckedKeys(),halfCheckedNodes:O.getHalfCheckedNodes(),halfCheckedKeys:O.getHalfCheckedKeys()})})};return{ns:n,node$:c,tree:r,expanded:a,childNodeRendered:d,oldChecked:s,oldIndeterminate:o,getNodeKey:f,getNodeClass:m,handleSelectChange:g,handleClick:p,handleContextMenu:v,handleExpandIconClick:b,handleCheckChange:_,handleChildNodeExpand:(E,A,O)=>{i(A),r.ctx.emit("node-expand",E,A,O)},handleDragStart:E=>{r.props.draggable&&h.treeNodeDragStart({event:E,treeNode:t})},handleDragOver:E=>{E.preventDefault(),r.props.draggable&&h.treeNodeDragOver({event:E,treeNode:{$el:c.value,node:t.node}})},handleDrop:E=>{E.preventDefault()},handleDragEnd:E=>{r.props.draggable&&h.treeNodeDragEnd(E)},CaretRight:hT}}}),zae=["aria-expanded","aria-disabled","aria-checked","draggable","data-key"],$ae=["aria-expanded"];function Wae(t,e,n,i,r,a){const d=ft("el-icon"),s=ft("el-checkbox"),o=ft("loading"),c=ft("node-content"),h=ft("el-tree-node"),l=ft("el-collapse-transition");return pt((I(),ne("div",{ref:"node$",class:B([t.ns.b("node"),t.ns.is("expanded",t.expanded),t.ns.is("current",t.node.isCurrent),t.ns.is("hidden",!t.node.visible),t.ns.is("focusable",!t.node.disabled),t.ns.is("checked",!t.node.disabled&&t.node.checked),t.getNodeClass(t.node)]),role:"treeitem",tabindex:"-1","aria-expanded":t.expanded,"aria-disabled":t.node.disabled,"aria-checked":t.node.checked,draggable:t.tree.props.draggable,"data-key":t.getNodeKey(t.node),onClick:e[1]||(e[1]=ot((...u)=>t.handleClick&&t.handleClick(...u),["stop"])),onContextmenu:e[2]||(e[2]=(...u)=>t.handleContextMenu&&t.handleContextMenu(...u)),onDragstart:e[3]||(e[3]=ot((...u)=>t.handleDragStart&&t.handleDragStart(...u),["stop"])),onDragover:e[4]||(e[4]=ot((...u)=>t.handleDragOver&&t.handleDragOver(...u),["stop"])),onDragend:e[5]||(e[5]=ot((...u)=>t.handleDragEnd&&t.handleDragEnd(...u),["stop"])),onDrop:e[6]||(e[6]=ot((...u)=>t.handleDrop&&t.handleDrop(...u),["stop"]))},[ae("div",{class:B(t.ns.be("node","content")),style:nt({paddingLeft:(t.node.level-1)*t.tree.props.indent+"px"})},[t.tree.props.icon||t.CaretRight?(I(),ke(d,{key:0,class:B([t.ns.be("node","expand-icon"),t.ns.is("leaf",t.node.isLeaf),{expanded:!t.node.isLeaf&&t.expanded}]),onClick:ot(t.handleExpandIconClick,["stop"])},{default:ve(()=>[(I(),ke(Ct(t.tree.props.icon||t.CaretRight)))]),_:1},8,["class","onClick"])):Te("v-if",!0),t.showCheckbox?(I(),ke(s,{key:1,"model-value":t.node.checked,indeterminate:t.node.indeterminate,disabled:!!t.node.disabled,onClick:e[0]||(e[0]=ot(()=>{},["stop"])),onChange:t.handleCheckChange},null,8,["model-value","indeterminate","disabled","onChange"])):Te("v-if",!0),t.node.loading?(I(),ke(d,{key:2,class:B([t.ns.be("node","loading-icon"),t.ns.is("loading")])},{default:ve(()=>[ue(o)]),_:1},8,["class"])):Te("v-if",!0),ue(c,{node:t.node,"render-content":t.renderContent},null,8,["node","render-content"])],6),ue(l,null,{default:ve(()=>[!t.renderAfterExpand||t.childNodeRendered?pt((I(),ne("div",{key:0,class:B(t.ns.be("node","children")),role:"group","aria-expanded":t.expanded},[(I(!0),ne(Qe,null,wt(t.node.childNodes,u=>(I(),ke(h,{key:t.getNodeKey(u),"render-content":t.renderContent,"render-after-expand":t.renderAfterExpand,"show-checkbox":t.showCheckbox,node:u,accordion:t.accordion,props:t.props,onNodeExpand:t.handleChildNodeExpand},null,8,["render-content","render-after-expand","show-checkbox","node","accordion","props","onNodeExpand"]))),128))],10,$ae)),[[Dt,t.expanded]]):Te("v-if",!0)]),_:1})],42,zae)),[[Dt,t.node.visible]])}var Gae=je(Hae,[["render",Wae],["__file","/home/runner/work/element-plus/element-plus/packages/components/tree/src/tree-node.vue"]]);function jae({el$:t},e){const n=Ue("tree"),i=Jt([]),r=Jt([]);mt(()=>{d()}),vs(()=>{i.value=Array.from(t.value.querySelectorAll("[role=treeitem]")),r.value=Array.from(t.value.querySelectorAll("input[type=checkbox]"))}),Be(r,s=>{s.forEach(o=>{o.setAttribute("tabindex","-1")})}),cn(t,"keydown",s=>{const o=s.target;if(!o.className.includes(n.b("node")))return;const c=s.code;i.value=Array.from(t.value.querySelectorAll(`.${n.is("focusable")}[role=treeitem]`));const h=i.value.indexOf(o);let l;if([rt.up,rt.down].includes(c)){if(s.preventDefault(),c===rt.up){l=h===-1?0:h!==0?h-1:i.value.length-1;const f=l;for(;!e.value.getNode(i.value[l].dataset.key).canFocus;){if(l--,l===f){l=-1;break}l<0&&(l=i.value.length-1)}}else{l=h===-1?0:h<i.value.length-1?h+1:0;const f=l;for(;!e.value.getNode(i.value[l].dataset.key).canFocus;){if(l++,l===f){l=-1;break}l>=i.value.length&&(l=0)}}l!==-1&&i.value[l].focus()}[rt.left,rt.right].includes(c)&&(s.preventDefault(),o.click());const u=o.querySelector('[type="checkbox"]');[rt.enter,rt.space].includes(c)&&u&&(s.preventDefault(),u.click())});const d=()=>{var s;i.value=Array.from(t.value.querySelectorAll(`.${n.is("focusable")}[role=treeitem]`)),r.value=Array.from(t.value.querySelectorAll("input[type=checkbox]"));const o=t.value.querySelectorAll(`.${n.is("checked")}[role=treeitem]`);if(o.length){o[0].setAttribute("tabindex","0");return}(s=i.value[0])==null||s.setAttribute("tabindex","0")}}const Xae=de({name:"ElTree",components:{ElTreeNode:Gae},props:{data:{type:Array,default:()=>[]},emptyText:{type:String},renderAfterExpand:{type:Boolean,default:!0},nodeKey:String,checkStrictly:Boolean,defaultExpandAll:Boolean,expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:Boolean,checkDescendants:{type:Boolean,default:!1},autoExpandParent:{type:Boolean,default:!0},defaultCheckedKeys:Array,defaultExpandedKeys:Array,currentNodeKey:[String,Number],renderContent:Function,showCheckbox:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},allowDrag:Function,allowDrop:Function,props:{type:Object,default:()=>({children:"children",label:"label",disabled:"disabled"})},lazy:{type:Boolean,default:!1},highlightCurrent:Boolean,load:Function,filterNodeMethod:Function,accordion:Boolean,indent:{type:Number,default:18},icon:{type:Qt}},emits:["check-change","current-change","node-click","node-contextmenu","node-collapse","node-expand","check","node-drag-start","node-drag-end","node-drop","node-drag-leave","node-drag-enter","node-drag-over"],setup(t,e){const{t:n}=Pt(),i=Ue("tree"),r=q(new Fae({key:t.nodeKey,data:t.data,lazy:t.lazy,props:t.props,load:t.load,currentNodeKey:t.currentNodeKey,checkStrictly:t.checkStrictly,checkDescendants:t.checkDescendants,defaultCheckedKeys:t.defaultCheckedKeys,defaultExpandedKeys:t.defaultExpandedKeys,autoExpandParent:t.autoExpandParent,defaultExpandAll:t.defaultExpandAll,filterNodeMethod:t.filterNodeMethod}));r.value.initialize();const a=q(r.value.root),d=q(null),s=q(null),o=q(null),{broadcastExpanded:c}=J2(t),{dragState:h}=Vae({props:t,ctx:e,el$:s,dropIndicator$:o,store:r});jae({el$:s},r);const l=R(()=>{const{childNodes:k}=a.value;return!k||k.length===0||k.every(({visible:F})=>!F)});Be(()=>t.currentNodeKey,k=>{r.value.setCurrentNodeKey(k)}),Be(()=>t.defaultCheckedKeys,k=>{r.value.setDefaultCheckedKey(k)}),Be(()=>t.defaultExpandedKeys,k=>{r.value.setDefaultExpandedKeys(k)}),Be(()=>t.data,k=>{r.value.setData(k)},{deep:!0}),Be(()=>t.checkStrictly,k=>{r.value.checkStrictly=k});const u=k=>{if(!t.filterNodeMethod)throw new Error("[Tree] filterNodeMethod is required when filter");r.value.filter(k)},f=k=>W0(t.nodeKey,k.data),m=k=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in getNodePath");const F=r.value.getNode(k);if(!F)return[];const T=[F.data];let P=F.parent;for(;P&&P!==a.value;)T.push(P.data),P=P.parent;return T.reverse()},g=(k,F)=>r.value.getCheckedNodes(k,F),p=k=>r.value.getCheckedKeys(k),v=()=>{const k=r.value.getCurrentNode();return k?k.data:null},b=()=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in getCurrentKey");const k=v();return k?k[t.nodeKey]:null},_=(k,F)=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedNodes");r.value.setCheckedNodes(k,F)},S=(k,F)=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedKeys");r.value.setCheckedKeys(k,F)},w=(k,F,T)=>{r.value.setChecked(k,F,T)},C=()=>r.value.getHalfCheckedNodes(),x=()=>r.value.getHalfCheckedKeys(),M=(k,F=!0)=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentNode");Ag(r,e.emit,()=>r.value.setUserCurrentNode(k,F))},E=(k,F=!0)=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentKey");Ag(r,e.emit,()=>r.value.setCurrentNodeKey(k,F))},A=k=>r.value.getNode(k),O=k=>{r.value.remove(k)},D=(k,F)=>{r.value.append(k,F)},L=(k,F)=>{r.value.insertBefore(k,F)},U=(k,F)=>{r.value.insertAfter(k,F)},j=(k,F,T)=>{c(F),e.emit("node-expand",k,F,T)},V=(k,F)=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in updateKeyChild");r.value.updateChildren(k,F)};return xt("RootTree",{ctx:e,props:t,store:r,root:a,currentNode:d,instance:vt()}),xt(Fr,void 0),{ns:i,store:r,root:a,currentNode:d,dragState:h,el$:s,dropIndicator$:o,isEmpty:l,filter:u,getNodeKey:f,getNodePath:m,getCheckedNodes:g,getCheckedKeys:p,getCurrentNode:v,getCurrentKey:b,setCheckedNodes:_,setCheckedKeys:S,setChecked:w,getHalfCheckedNodes:C,getHalfCheckedKeys:x,setCurrentNode:M,setCurrentKey:E,t:n,getNode:A,remove:O,append:D,insertBefore:L,insertAfter:U,handleNodeExpand:j,updateKeyChildren:V}}});function Kae(t,e,n,i,r,a){const d=ft("el-tree-node");return I(),ne("div",{ref:"el$",class:B([t.ns.b(),t.ns.is("dragging",!!t.dragState.draggingNode),t.ns.is("drop-not-allow",!t.dragState.allowDrop),t.ns.is("drop-inner",t.dragState.dropType==="inner"),{[t.ns.m("highlight-current")]:t.highlightCurrent}]),role:"tree"},[(I(!0),ne(Qe,null,wt(t.root.childNodes,s=>(I(),ke(d,{key:t.getNodeKey(s),node:s,props:t.props,accordion:t.accordion,"render-after-expand":t.renderAfterExpand,"show-checkbox":t.showCheckbox,"render-content":t.renderContent,onNodeExpand:t.handleNodeExpand},null,8,["node","props","accordion","render-after-expand","show-checkbox","render-content","onNodeExpand"]))),128)),t.isEmpty?(I(),ne("div",{key:0,class:B(t.ns.e("empty-block"))},[Le(t.$slots,"empty",{},()=>{var s;return[ae("span",{class:B(t.ns.e("empty-text"))},$e((s=t.emptyText)!=null?s:t.t("el.tree.emptyText")),3)]})],2)):Te("v-if",!0),pt(ae("div",{ref:"dropIndicator$",class:B(t.ns.e("drop-indicator"))},null,2),[[Dt,t.dragState.showDropIndicator]])],2)}var gf=je(Xae,[["render",Kae],["__file","/home/runner/work/element-plus/element-plus/packages/components/tree/src/tree.vue"]]);gf.install=t=>{t.component(gf.name,gf)};const jf=gf,Yae=jf,qae=(t,{attrs:e},{tree:n,key:i})=>{const r=Ue("tree-select"),a={...rs(Rn(t),Object.keys(ra.props)),...e,valueKey:i,popperClass:R(()=>{const d=[r.e("popper")];return t.popperClass&&d.push(t.popperClass),d.join(" ")}),filterMethod:(d="")=>{t.filterMethod&&t.filterMethod(d),et(()=>{var s;(s=n.value)==null||s.filter(d)})},onVisibleChange:d=>{var s;(s=e.onVisibleChange)==null||s.call(e,d),t.filterable&&d&&a.filterMethod()}};return a},Zae=de({extends:Bf,setup(t,e){const n=Bf.setup(t,e);delete n.selectOptionClick;const i=vt().proxy;return et(()=>{n.select.cachedOptions.get(i.value)||n.select.onOptionCreate(i)}),n},methods:{selectOptionClick(){this.$el.parentElement.click()}}});function Pg(t){return t||t===0}function G0(t){return Array.isArray(t)&&t.length}function vc(t){return Array.isArray(t)?t:Pg(t)?[t]:[]}function vf(t,e,n,i,r){for(let a=0;a<t.length;a++){const d=t[a];if(e(d,a,t,r))return i?i(d,a,t,r):d;{const s=n(d);if(G0(s)){const o=vf(s,e,n,i,d);if(o)return o}}}}function eA(t,e,n,i){for(let r=0;r<t.length;r++){const a=t[r];e(a,r,t,i);const d=n(a);G0(d)&&eA(d,e,n,a)}}const Jae=(t,{attrs:e,slots:n,emit:i},{select:r,tree:a,key:d})=>{Be(()=>t.modelValue,()=>{t.showCheckbox&&et(()=>{const u=a.value;u&&!wi(u.getCheckedKeys(),vc(t.modelValue))&&u.setCheckedKeys(vc(t.modelValue))})},{immediate:!0,deep:!0});const s=R(()=>({value:d.value,label:"label",children:"children",disabled:"disabled",isLeaf:"isLeaf",...t.props})),o=(u,f)=>{var m;const g=s.value[u];return lt(g)?g(f,(m=a.value)==null?void 0:m.getNode(o("value",f))):f[g]},c=vc(t.modelValue).map(u=>vf(t.data||[],f=>o("value",f)===u,f=>o("children",f),(f,m,g,p)=>p&&o("value",p))).filter(u=>Pg(u)),h=R(()=>{if(!t.renderAfterExpand&&!t.lazy)return[];const u=[];return eA(t.data.concat(t.cacheData),f=>{const m=o("value",f);u.push({value:m,currentLabel:o("label",f),isDisabled:o("disabled",f)})},f=>o("children",f)),u}),l=R(()=>h.value.reduce((u,f)=>({...u,[f.value]:f}),{}));return{...rs(Rn(t),Object.keys(jf.props)),...e,nodeKey:d,expandOnClickNode:R(()=>!t.checkStrictly&&t.expandOnClickNode),defaultExpandedKeys:R(()=>t.defaultExpandedKeys?t.defaultExpandedKeys.concat(c):c),renderContent:(u,{node:f,data:m,store:g})=>u(Zae,{value:o("value",m),label:o("label",m),disabled:o("disabled",m)},t.renderContent?()=>t.renderContent(u,{node:f,data:m,store:g}):n.default?()=>n.default({node:f,data:m,store:g}):void 0),filterNodeMethod:(u,f,m)=>{var g;return t.filterNodeMethod?t.filterNodeMethod(u,f,m):u?(g=o("label",f))==null?void 0:g.includes(u):!0},onNodeClick:(u,f,m)=>{var g,p,v;if((g=e.onNodeClick)==null||g.call(e,u,f,m),!(t.showCheckbox&&t.checkOnClickNode))if(!t.showCheckbox&&(t.checkStrictly||f.isLeaf)){if(!o("disabled",u)){const b=(p=r.value)==null?void 0:p.options.get(o("value",u));(v=r.value)==null||v.handleOptionSelect(b)}}else t.expandOnClickNode&&m.proxy.handleExpandIconClick()},onCheck:(u,f)=>{if(!t.showCheckbox)return;const m=o("value",u),g=f.checkedKeys,p=t.multiple?vc(t.modelValue).filter(b=>b in l.value&&!a.value.getNode(b)&&!g.includes(b)):[],v=g.concat(p);if(t.checkStrictly)i(bt,t.multiple?v:v.includes(m)?m:void 0);else if(t.multiple)i(bt,a.value.getCheckedKeys(!0));else{const b=vf([u],w=>!G0(o("children",w))&&!o("disabled",w),w=>o("children",w)),_=b?o("value",b):void 0,S=Pg(t.modelValue)&&!!vf([u],w=>o("value",w)===t.modelValue,w=>o("children",w));i(bt,_===t.modelValue||S?void 0:_)}et(()=>{var b;const _=vc(t.modelValue);a.value.setCheckedKeys(_),(b=e.onCheck)==null||b.call(e,u,{checkedKeys:a.value.getCheckedKeys(),checkedNodes:a.value.getCheckedNodes(),halfCheckedKeys:a.value.getHalfCheckedKeys(),halfCheckedNodes:a.value.getHalfCheckedNodes()})})},cacheOptions:h}};var Qae=de({props:{data:{type:Array,default:()=>[]}},setup(t){const e=Je(Vu);return Be(()=>t.data,()=>{var n;t.data.forEach(r=>{e.cachedOptions.has(r.value)||e.cachedOptions.set(r.value,r)});const i=((n=e.selectWrapper)==null?void 0:n.querySelectorAll("input"))||[];Array.from(i).includes(document.activeElement)||e.setSelected()},{flush:"post",immediate:!0}),()=>{}}});const ele=de({name:"ElTreeSelect",inheritAttrs:!1,props:{...ra.props,...jf.props,cacheData:{type:Array,default:()=>[]}},setup(t,e){const{slots:n,expose:i}=e,r=q(),a=q(),d=R(()=>t.nodeKey||t.valueKey||"value"),s=qae(t,e,{select:r,tree:a,key:d}),{cacheOptions:o,...c}=Jae(t,e,{select:r,tree:a,key:d}),h=Ft({});return i(h),mt(()=>{Object.assign(h,{...rs(a.value,["filter","updateKeyChildren","getCheckedNodes","setCheckedNodes","getCheckedKeys","setCheckedKeys","setChecked","getHalfCheckedNodes","getHalfCheckedKeys","getCurrentKey","getCurrentNode","setCurrentKey","setCurrentNode","getNode","remove","append","insertBefore","insertAfter"]),...rs(r.value,["focus","blur"])})}),()=>st(ra,Ft({...s,ref:l=>r.value=l}),{...n,default:()=>[st(Qae,{data:o.value}),st(jf,Ft({...c,ref:l=>a.value=l}))]})}});var yf=je(ele,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tree-select/src/tree-select.vue"]]);yf.install=t=>{t.component(yf.name,yf)};const tle=yf,nle=tle,j0=Symbol(),ile={key:-1,level:-1,data:{}};var Sc=(t=>(t.KEY="id",t.LABEL="label",t.CHILDREN="children",t.DISABLED="disabled",t))(Sc||{}),Og=(t=>(t.ADD="add",t.DELETE="delete",t))(Og||{});const tA={type:Number,default:26},rle=Xe({data:{type:Ae(Array),default:()=>an([])},emptyText:{type:String},height:{type:Number,default:200},props:{type:Ae(Object),default:()=>an({children:"children",label:"label",disabled:"disabled",value:"id"})},highlightCurrent:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},defaultCheckedKeys:{type:Ae(Array),default:()=>an([])},checkStrictly:{type:Boolean,default:!1},defaultExpandedKeys:{type:Ae(Array),default:()=>an([])},indent:{type:Number,default:16},itemSize:tA,icon:{type:Qt},expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:{type:Boolean,default:!1},currentNodeKey:{type:Ae([String,Number])},accordion:{type:Boolean,default:!1},filterMethod:{type:Ae(Function)},perfMode:{type:Boolean,default:!0}}),sle=Xe({node:{type:Ae(Object),default:()=>an(ile)},expanded:{type:Boolean,default:!1},checked:{type:Boolean,default:!1},indeterminate:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},current:{type:Boolean,default:!1},hiddenExpandIcon:{type:Boolean,default:!1},itemSize:tA}),ole=Xe({node:{type:Ae(Object),required:!0}}),nA="node-click",iA="node-expand",rA="node-collapse",sA="current-change",oA="check",aA="check-change",lA="node-contextmenu",ale={[nA]:(t,e,n)=>t&&e&&n,[iA]:(t,e)=>t&&e,[rA]:(t,e)=>t&&e,[sA]:(t,e)=>t&&e,[oA]:(t,e)=>t&&e,[aA]:(t,e)=>t&&typeof e=="boolean",[lA]:(t,e,n)=>t&&e&&n},lle={click:(t,e)=>!!(t&&e),toggle:t=>!!t,check:(t,e)=>t&&typeof e=="boolean"};function cle(t,e){const n=q(new Set),i=q(new Set),{emit:r}=vt();Be([()=>e.value,()=>t.defaultCheckedKeys],()=>et(()=>{b(t.defaultCheckedKeys)}),{immediate:!0});const a=()=>{if(!e.value||!t.showCheckbox||t.checkStrictly)return;const{levelTreeNodeMap:_,maxLevel:S}=e.value,w=n.value,C=new Set;for(let x=S-1;x>=1;--x){const M=_.get(x);M&&M.forEach(E=>{const A=E.children;if(A){let O=!0,D=!1;for(const L of A){const U=L.key;if(w.has(U))D=!0;else if(C.has(U)){O=!1,D=!0;break}else O=!1}O?w.add(E.key):D?(C.add(E.key),w.delete(E.key)):(w.delete(E.key),C.delete(E.key))}})}i.value=C},d=_=>n.value.has(_.key),s=_=>i.value.has(_.key),o=(_,S,w=!0)=>{const C=n.value,x=(M,E)=>{C[E?Og.ADD:Og.DELETE](M.key);const A=M.children;!t.checkStrictly&&A&&A.forEach(O=>{O.disabled||x(O,E)})};x(_,S),a(),w&&c(_,S)},c=(_,S)=>{const{checkedNodes:w,checkedKeys:C}=m(),{halfCheckedNodes:x,halfCheckedKeys:M}=g();r(oA,_.data,{checkedKeys:C,checkedNodes:w,halfCheckedKeys:M,halfCheckedNodes:x}),r(aA,_.data,S)};function h(_=!1){return m(_).checkedKeys}function l(_=!1){return m(_).checkedNodes}function u(){return g().halfCheckedKeys}function f(){return g().halfCheckedNodes}function m(_=!1){const S=[],w=[];if(e!=null&&e.value&&t.showCheckbox){const{treeNodeMap:C}=e.value;n.value.forEach(x=>{const M=C.get(x);M&&(!_||_&&M.isLeaf)&&(w.push(x),S.push(M.data))})}return{checkedKeys:w,checkedNodes:S}}function g(){const _=[],S=[];if(e!=null&&e.value&&t.showCheckbox){const{treeNodeMap:w}=e.value;i.value.forEach(C=>{const x=w.get(C);x&&(S.push(C),_.push(x.data))})}return{halfCheckedNodes:_,halfCheckedKeys:S}}function p(_){n.value.clear(),i.value.clear(),b(_)}function v(_,S){if(e!=null&&e.value&&t.showCheckbox){const w=e.value.treeNodeMap.get(_);w&&o(w,S,!1)}}function b(_){if(e!=null&&e.value){const{treeNodeMap:S}=e.value;if(t.showCheckbox&&S&&_)for(const w of _){const C=S.get(w);C&&!d(C)&&o(C,!0,!1)}}}return{updateCheckedKeys:a,toggleCheckbox:o,isChecked:d,isIndeterminate:s,getCheckedKeys:h,getCheckedNodes:l,getHalfCheckedKeys:u,getHalfCheckedNodes:f,setChecked:v,setCheckedKeys:p}}function ule(t,e){const n=q(new Set([])),i=q(new Set([])),r=R(()=>lt(t.filterMethod));function a(s){var o;if(!r.value)return;const c=new Set,h=i.value,l=n.value,u=[],f=((o=e.value)==null?void 0:o.treeNodes)||[],m=t.filterMethod;l.clear();function g(p){p.forEach(v=>{u.push(v),m!=null&&m(s,v.data)?u.forEach(_=>{c.add(_.key)}):v.isLeaf&&l.add(v.key);const b=v.children;if(b&&g(b),!v.isLeaf){if(!c.has(v.key))l.add(v.key);else if(b){let _=!0;for(const S of b)if(!l.has(S.key)){_=!1;break}_?h.add(v.key):h.delete(v.key)}}u.pop()})}return g(f),c}function d(s){return i.value.has(s.key)}return{hiddenExpandIconKeySet:i,hiddenNodeKeySet:n,doFilter:a,isForceHiddenExpandIcon:d}}function dle(t,e){const n=q(new Set(t.defaultExpandedKeys)),i=q(),r=Jt();Be(()=>t.currentNodeKey,te=>{i.value=te},{immediate:!0}),Be(()=>t.data,te=>{Z(te)},{immediate:!0});const{isIndeterminate:a,isChecked:d,toggleCheckbox:s,getCheckedKeys:o,getCheckedNodes:c,getHalfCheckedKeys:h,getHalfCheckedNodes:l,setChecked:u,setCheckedKeys:f}=cle(t,r),{doFilter:m,hiddenNodeKeySet:g,isForceHiddenExpandIcon:p}=ule(t,r),v=R(()=>{var te;return((te=t.props)==null?void 0:te.value)||Sc.KEY}),b=R(()=>{var te;return((te=t.props)==null?void 0:te.children)||Sc.CHILDREN}),_=R(()=>{var te;return((te=t.props)==null?void 0:te.disabled)||Sc.DISABLED}),S=R(()=>{var te;return((te=t.props)==null?void 0:te.label)||Sc.LABEL}),w=R(()=>{const te=n.value,ie=g.value,re=[],_e=r.value&&r.value.treeNodes||[];function Pe(){const K=[];for(let Q=_e.length-1;Q>=0;--Q)K.push(_e[Q]);for(;K.length;){const Q=K.pop();if(Q&&(ie.has(Q.key)||re.push(Q),te.has(Q.key))){const fe=Q.children;if(fe){const ge=fe.length;for(let se=ge-1;se>=0;--se)K.push(fe[se])}}}}return Pe(),re}),C=R(()=>w.value.length>0);function x(te){const ie=new Map,re=new Map;let _e=1;function Pe(Q,fe=1,ge=void 0){var se;const me=[];for(const be of Q){const Me=A(be),Ee={level:fe,key:Me,data:be};Ee.label=D(be),Ee.parent=ge;const X=E(be);Ee.disabled=O(be),Ee.isLeaf=!X||X.length===0,X&&X.length&&(Ee.children=Pe(X,fe+1,Ee)),me.push(Ee),ie.set(Me,Ee),re.has(fe)||re.set(fe,[]),(se=re.get(fe))==null||se.push(Ee)}return fe>_e&&(_e=fe),me}const K=Pe(te);return{treeNodeMap:ie,levelTreeNodeMap:re,maxLevel:_e,treeNodes:K}}function M(te){const ie=m(te);ie&&(n.value=ie)}function E(te){return te[b.value]}function A(te){return te?te[v.value]:""}function O(te){return te[_.value]}function D(te){return te[S.value]}function L(te){n.value.has(te.key)?T(te):F(te)}function U(te){n.value=new Set(te)}function j(te,ie){e(nA,te.data,te,ie),V(te),t.expandOnClickNode&&L(te),t.showCheckbox&&t.checkOnClickNode&&!te.disabled&&s(te,!d(te),!0)}function V(te){N(te)||(i.value=te.key,e(sA,te.data,te))}function k(te,ie){s(te,ie)}function F(te){const ie=n.value;if(r.value&&t.accordion){const{treeNodeMap:re}=r.value;ie.forEach(_e=>{const Pe=re.get(_e);te&&te.level===(Pe==null?void 0:Pe.level)&&ie.delete(_e)})}ie.add(te.key),e(iA,te.data,te)}function T(te){n.value.delete(te.key),e(rA,te.data,te)}function P(te){return n.value.has(te.key)}function H(te){return!!te.disabled}function N(te){const ie=i.value;return!!ie&&ie===te.key}function G(){var te,ie;if(i.value)return(ie=(te=r.value)==null?void 0:te.treeNodeMap.get(i.value))==null?void 0:ie.data}function $(){return i.value}function z(te){i.value=te}function Z(te){et(()=>r.value=x(te))}function W(te){var ie;const re=_t(te)?A(te):te;return(ie=r.value)==null?void 0:ie.treeNodeMap.get(re)}return{tree:r,flattenTree:w,isNotEmpty:C,getKey:A,getChildren:E,toggleExpand:L,toggleCheckbox:s,isExpanded:P,isChecked:d,isIndeterminate:a,isDisabled:H,isCurrent:N,isForceHiddenExpandIcon:p,handleNodeClick:j,handleNodeCheck:k,getCurrentNode:G,getCurrentKey:$,setCurrentKey:z,getCheckedKeys:o,getCheckedNodes:c,getHalfCheckedKeys:h,getHalfCheckedNodes:l,setChecked:u,setCheckedKeys:f,filter:M,setData:Z,getNode:W,expandNode:F,collapseNode:T,setExpandedKeys:U}}var fle=de({name:"ElTreeNodeContent",props:ole,setup(t){const e=Je(j0),n=Ue("tree");return()=>{const i=t.node,{data:r}=i;return e!=null&&e.ctx.slots.default?e.ctx.slots.default({node:i,data:r}):st("span",{class:n.be("node","label")},[i==null?void 0:i.label])}}});const hle=["aria-expanded","aria-disabled","aria-checked","data-key","onClick"],ple=de({name:"ElTreeNode"}),mle=de({...ple,props:sle,emits:lle,setup(t,{emit:e}){const n=t,i=Je(j0),r=Ue("tree"),a=R(()=>{var l;return(l=i==null?void 0:i.props.indent)!=null?l:16}),d=R(()=>{var l;return(l=i==null?void 0:i.props.icon)!=null?l:hT}),s=l=>{e("click",n.node,l)},o=()=>{e("toggle",n.node)},c=l=>{e("check",n.node,l)},h=l=>{var u,f,m,g;(m=(f=(u=i==null?void 0:i.instance)==null?void 0:u.vnode)==null?void 0:f.props)!=null&&m.onNodeContextmenu&&(l.stopPropagation(),l.preventDefault()),i==null||i.ctx.emit(lA,l,(g=n.node)==null?void 0:g.data,n.node)};return(l,u)=>{var f,m,g;return I(),ne("div",{ref:"node$",class:B([y(r).b("node"),y(r).is("expanded",l.expanded),y(r).is("current",l.current),y(r).is("focusable",!l.disabled),y(r).is("checked",!l.disabled&&l.checked)]),role:"treeitem",tabindex:"-1","aria-expanded":l.expanded,"aria-disabled":l.disabled,"aria-checked":l.checked,"data-key":(f=l.node)==null?void 0:f.key,onClick:ot(s,["stop"]),onContextmenu:h},[ae("div",{class:B(y(r).be("node","content")),style:nt({paddingLeft:`${(l.node.level-1)*y(a)}px`,height:l.itemSize+"px"})},[y(d)?(I(),ke(y(tt),{key:0,class:B([y(r).is("leaf",!!((m=l.node)!=null&&m.isLeaf)),y(r).is("hidden",l.hiddenExpandIcon),{expanded:!((g=l.node)!=null&&g.isLeaf)&&l.expanded},y(r).be("node","expand-icon")]),onClick:ot(o,["stop"])},{default:ve(()=>[(I(),ke(Ct(y(d))))]),_:1},8,["class","onClick"])):Te("v-if",!0),l.showCheckbox?(I(),ke(y(er),{key:1,"model-value":l.checked,indeterminate:l.indeterminate,disabled:l.disabled,onChange:c,onClick:u[0]||(u[0]=ot(()=>{},["stop"]))},null,8,["model-value","indeterminate","disabled"])):Te("v-if",!0),ue(y(fle),{node:l.node},null,8,["node"])],6)],42,hle)}}});var gle=je(mle,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tree-v2/src/tree-node.vue"]]);const vle=de({name:"ElTreeV2"}),yle=de({...vle,props:rle,emits:ale,setup(t,{expose:e,emit:n}){const i=t,r=Vn(),a=R(()=>i.itemSize);xt(j0,{ctx:{emit:n,slots:r},props:i,instance:vt()}),xt(Fr,void 0);const{t:d}=Pt(),s=Ue("tree"),{flattenTree:o,isNotEmpty:c,toggleExpand:h,isExpanded:l,isIndeterminate:u,isChecked:f,isDisabled:m,isCurrent:g,isForceHiddenExpandIcon:p,handleNodeClick:v,handleNodeCheck:b,toggleCheckbox:_,getCurrentNode:S,getCurrentKey:w,setCurrentKey:C,getCheckedKeys:x,getCheckedNodes:M,getHalfCheckedKeys:E,getHalfCheckedNodes:A,setChecked:O,setCheckedKeys:D,filter:L,setData:U,getNode:j,expandNode:V,collapseNode:k,setExpandedKeys:F}=dle(i,n);return e({toggleCheckbox:_,getCurrentNode:S,getCurrentKey:w,setCurrentKey:C,getCheckedKeys:x,getCheckedNodes:M,getHalfCheckedKeys:E,getHalfCheckedNodes:A,setChecked:O,setCheckedKeys:D,filter:L,setData:U,getNode:j,expandNode:V,collapseNode:k,setExpandedKeys:F}),(T,P)=>{var H;return I(),ne("div",{class:B([y(s).b(),{[y(s).m("highlight-current")]:T.highlightCurrent}]),role:"tree"},[y(c)?(I(),ke(y(p2),{key:0,"class-name":y(s).b("virtual-list"),data:y(o),total:y(o).length,height:T.height,"item-size":y(a),"perf-mode":T.perfMode},{default:ve(({data:N,index:G,style:$})=>[(I(),ke(gle,{key:N[G].key,style:nt($),node:N[G],expanded:y(l)(N[G]),"show-checkbox":T.showCheckbox,checked:y(f)(N[G]),indeterminate:y(u)(N[G]),"item-size":y(a),disabled:y(m)(N[G]),current:y(g)(N[G]),"hidden-expand-icon":y(p)(N[G]),onClick:y(v),onToggle:y(h),onCheck:y(b)},null,8,["style","node","expanded","show-checkbox","checked","indeterminate","item-size","disabled","current","hidden-expand-icon","onClick","onToggle","onCheck"]))]),_:1},8,["class-name","data","total","height","item-size","perf-mode"])):(I(),ne("div",{key:1,class:B(y(s).e("empty-block"))},[ae("span",{class:B(y(s).e("empty-text"))},$e((H=T.emptyText)!=null?H:y(d)("el.tree.emptyText")),3)],2))],2)}}});var ble=je(yle,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tree-v2/src/tree.vue"]]);const _le=yt(ble),cA=Symbol("uploadContextKey"),Sle="ElUpload";class wle extends Error{constructor(e,n,i,r){super(e),this.name="UploadAjaxError",this.status=n,this.method=i,this.url=r}}function cC(t,e,n){let i;return n.response?i=`${n.response.error||n.response}`:n.responseText?i=`${n.responseText}`:i=`fail to ${e.method} ${t} ${n.status}`,new wle(i,n.status,e.method,t)}function Cle(t){const e=t.responseText||t.response;if(!e)return e;try{return JSON.parse(e)}catch{return e}}const xle=t=>{typeof XMLHttpRequest>"u"&&Tn(Sle,"XMLHttpRequest is undefined");const e=new XMLHttpRequest,n=t.action;e.upload&&e.upload.addEventListener("progress",a=>{const d=a;d.percent=a.total>0?a.loaded/a.total*100:0,t.onProgress(d)});const i=new FormData;if(t.data)for(const[a,d]of Object.entries(t.data))Array.isArray(d)?i.append(a,...d):i.append(a,d);i.append(t.filename,t.file,t.file.name),e.addEventListener("error",()=>{t.onError(cC(n,t,e))}),e.addEventListener("load",()=>{if(e.status<200||e.status>=300)return t.onError(cC(n,t,e));t.onSuccess(Cle(e))}),e.open(t.method,n,!0),t.withCredentials&&"withCredentials"in e&&(e.withCredentials=!0);const r=t.headers||{};if(r instanceof Headers)r.forEach((a,d)=>e.setRequestHeader(d,a));else for(const[a,d]of Object.entries(r))Cn(d)||e.setRequestHeader(a,String(d));return e.send(i),e},uA=["text","picture","picture-card"];let Tle=1;const Lg=()=>Date.now()+Tle++,dA=Xe({action:{type:String,default:"#"},headers:{type:Ae(Object)},method:{type:String,default:"post"},data:{type:Object,default:()=>an({})},multiple:{type:Boolean,default:!1},name:{type:String,default:"file"},drag:{type:Boolean,default:!1},withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:{type:String,default:""},type:{type:String,default:"select"},fileList:{type:Ae(Array),default:()=>an([])},autoUpload:{type:Boolean,default:!0},listType:{type:String,values:uA,default:"text"},httpRequest:{type:Ae(Function),default:xle},disabled:Boolean,limit:Number}),Ele=Xe({...dA,beforeUpload:{type:Ae(Function),default:Ht},beforeRemove:{type:Ae(Function)},onRemove:{type:Ae(Function),default:Ht},onChange:{type:Ae(Function),default:Ht},onPreview:{type:Ae(Function),default:Ht},onSuccess:{type:Ae(Function),default:Ht},onProgress:{type:Ae(Function),default:Ht},onError:{type:Ae(Function),default:Ht},onExceed:{type:Ae(Function),default:Ht}}),Mle=Xe({files:{type:Ae(Array),default:()=>an([])},disabled:{type:Boolean,default:!1},handlePreview:{type:Ae(Function),default:Ht},listType:{type:String,values:uA,default:"text"}}),Ale={remove:t=>!!t},kle=["onKeydown"],Rle=["src"],Ple=["onClick"],Ole=["onClick"],Lle=["onClick"],Ile=de({name:"ElUploadList"}),Dle=de({...Ile,props:Mle,emits:Ale,setup(t,{emit:e}){const{t:n}=Pt(),i=Ue("upload"),r=Ue("icon"),a=Ue("list"),d=Mi(),s=q(!1),o=c=>{e("remove",c)};return(c,h)=>(I(),ke(M1,{tag:"ul",class:B([y(i).b("list"),y(i).bm("list",c.listType),y(i).is("disabled",y(d))]),name:y(a).b()},{default:ve(()=>[(I(!0),ne(Qe,null,wt(c.files,l=>(I(),ne("li",{key:l.uid||l.name,class:B([y(i).be("list","item"),y(i).is(l.status),{focusing:s.value}]),tabindex:"0",onKeydown:Rt(u=>!y(d)&&o(l),["delete"]),onFocus:h[0]||(h[0]=u=>s.value=!0),onBlur:h[1]||(h[1]=u=>s.value=!1),onClick:h[2]||(h[2]=u=>s.value=!1)},[Le(c.$slots,"default",{file:l},()=>[c.listType==="picture"||l.status!=="uploading"&&c.listType==="picture-card"?(I(),ne("img",{key:0,class:B(y(i).be("list","item-thumbnail")),src:l.url,alt:""},null,10,Rle)):Te("v-if",!0),l.status==="uploading"||c.listType!=="picture-card"?(I(),ne("div",{key:1,class:B(y(i).be("list","item-info"))},[ae("a",{class:B(y(i).be("list","item-name")),onClick:ot(u=>c.handlePreview(l),["prevent"])},[ue(y(tt),{class:B(y(r).m("document"))},{default:ve(()=>[ue(y(r5))]),_:1},8,["class"]),ae("span",{class:B(y(i).be("list","item-file-name"))},$e(l.name),3)],10,Ple),l.status==="uploading"?(I(),ke(y(s2),{key:0,type:c.listType==="picture-card"?"circle":"line","stroke-width":c.listType==="picture-card"?6:2,percentage:Number(l.percentage),style:nt(c.listType==="picture-card"?"":"margin-top: 0.5rem")},null,8,["type","stroke-width","percentage","style"])):Te("v-if",!0)],2)):Te("v-if",!0),ae("label",{class:B(y(i).be("list","item-status-label"))},[c.listType==="text"?(I(),ke(y(tt),{key:0,class:B([y(r).m("upload-success"),y(r).m("circle-check")])},{default:ve(()=>[ue(y(Hv))]),_:1},8,["class"])):["picture-card","picture"].includes(c.listType)?(I(),ke(y(tt),{key:1,class:B([y(r).m("upload-success"),y(r).m("check")])},{default:ve(()=>[ue(y(Du))]),_:1},8,["class"])):Te("v-if",!0)],2),y(d)?Te("v-if",!0):(I(),ke(y(tt),{key:2,class:B(y(r).m("close")),onClick:u=>o(l)},{default:ve(()=>[ue(y(yr))]),_:2},1032,["class","onClick"])),Te(" Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn"),Te(" This is a bug which needs to be fixed "),Te(" TODO: Fix the incorrect navigation interaction "),y(d)?Te("v-if",!0):(I(),ne("i",{key:3,class:B(y(r).m("close-tip"))},$e(y(n)("el.upload.deleteTip")),3)),c.listType==="picture-card"?(I(),ne("span",{key:4,class:B(y(i).be("list","item-actions"))},[ae("span",{class:B(y(i).be("list","item-preview")),onClick:u=>c.handlePreview(l)},[ue(y(tt),{class:B(y(r).m("zoom-in"))},{default:ve(()=>[ue(y(vT))]),_:1},8,["class"])],10,Ole),y(d)?Te("v-if",!0):(I(),ne("span",{key:0,class:B(y(i).be("list","item-delete")),onClick:u=>o(l)},[ue(y(tt),{class:B(y(r).m("delete"))},{default:ve(()=>[ue(y(n5))]),_:1},8,["class"])],10,Lle))],2)):Te("v-if",!0)])],42,kle))),128)),Le(c.$slots,"append")]),_:3},8,["class","name"]))}});var uC=je(Dle,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-list.vue"]]);const Nle=Xe({disabled:{type:Boolean,default:!1}}),Fle={file:t=>Ze(t)},Ble=["onDrop","onDragover"],fA="ElUploadDrag",Ule=de({name:fA}),Vle=de({...Ule,props:Nle,emits:Fle,setup(t,{emit:e}){const n=Je(cA);n||Tn(fA,"usage: <el-upload><el-upload-dragger /></el-upload>");const i=Ue("upload"),r=q(!1),a=Mi(),d=o=>{if(a.value)return;r.value=!1,o.stopPropagation();const c=Array.from(o.dataTransfer.files),h=n.accept.value;if(!h){e("file",c);return}const l=c.filter(u=>{const{type:f,name:m}=u,g=m.includes(".")?`.${m.split(".").pop()}`:"",p=f.replace(/\/.*$/,"");return h.split(",").map(v=>v.trim()).filter(v=>v).some(v=>v.startsWith(".")?g===v:/\/\*$/.test(v)?p===v.replace(/\/\*$/,""):/^[^/]+\/[^/]+$/.test(v)?f===v:!1)});e("file",l)},s=()=>{a.value||(r.value=!0)};return(o,c)=>(I(),ne("div",{class:B([y(i).b("dragger"),y(i).is("dragover",r.value)]),onDrop:ot(d,["prevent"]),onDragover:ot(s,["prevent"]),onDragleave:c[0]||(c[0]=ot(h=>r.value=!1,["prevent"]))},[Le(o.$slots,"default")],42,Ble))}});var Hle=je(Vle,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-dragger.vue"]]);const zle=Xe({...dA,beforeUpload:{type:Ae(Function),default:Ht},onRemove:{type:Ae(Function),default:Ht},onStart:{type:Ae(Function),default:Ht},onSuccess:{type:Ae(Function),default:Ht},onProgress:{type:Ae(Function),default:Ht},onError:{type:Ae(Function),default:Ht},onExceed:{type:Ae(Function),default:Ht}}),$le=["onKeydown"],Wle=["name","multiple","accept"],Gle=de({name:"ElUploadContent",inheritAttrs:!1}),jle=de({...Gle,props:zle,setup(t,{expose:e}){const n=t,i=Ue("upload"),r=Mi(),a=Jt({}),d=Jt(),s=m=>{if(m.length===0)return;const{autoUpload:g,limit:p,fileList:v,multiple:b,onStart:_,onExceed:S}=n;if(p&&v.length+m.length>p){S(m,v);return}b||(m=m.slice(0,1));for(const w of m){const C=w;C.uid=Lg(),_(C),g&&o(C)}},o=async m=>{if(d.value.value="",!n.beforeUpload)return c(m);let g,p={};try{const b=n.data,_=n.beforeUpload(m);p=_t(n.data)?Rf(n.data):n.data,g=await _,_t(n.data)&&wi(b,p)&&(p=Rf(n.data))}catch{g=!1}if(g===!1){n.onRemove(m);return}let v=m;g instanceof Blob&&(g instanceof File?v=g:v=new File([g],m.name,{type:m.type})),c(Object.assign(v,{uid:m.uid}),p)},c=(m,g)=>{const{headers:p,data:v,method:b,withCredentials:_,name:S,action:w,onProgress:C,onSuccess:x,onError:M,httpRequest:E}=n,{uid:A}=m,O={headers:p||{},withCredentials:_,file:m,data:g??v,method:b,filename:S,action:w,onProgress:L=>{C(L,m)},onSuccess:L=>{x(L,m),delete a.value[A]},onError:L=>{M(L,m),delete a.value[A]}},D=E(O);a.value[A]=D,D instanceof Promise&&D.then(O.onSuccess,O.onError)},h=m=>{const g=m.target.files;g&&s(Array.from(g))},l=()=>{r.value||(d.value.value="",d.value.click())},u=()=>{l()};return e({abort:m=>{P$(a.value).filter(m?([p])=>String(m.uid)===p:()=>!0).forEach(([p,v])=>{v instanceof XMLHttpRequest&&v.abort(),delete a.value[p]})},upload:o}),(m,g)=>(I(),ne("div",{class:B([y(i).b(),y(i).m(m.listType),y(i).is("drag",m.drag)]),tabindex:"0",onClick:l,onKeydown:Rt(ot(u,["self"]),["enter","space"])},[m.drag?(I(),ke(Hle,{key:0,disabled:y(r),onFile:s},{default:ve(()=>[Le(m.$slots,"default")]),_:3},8,["disabled"])):Le(m.$slots,"default",{key:1}),ae("input",{ref_key:"inputRef",ref:d,class:B(y(i).e("input")),name:m.name,multiple:m.multiple,accept:m.accept,type:"file",onChange:h,onClick:g[0]||(g[0]=ot(()=>{},["stop"]))},null,42,Wle)],42,$le))}});var dC=je(jle,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-content.vue"]]);const fC="ElUpload",Xle=t=>{var e;(e=t.url)!=null&&e.startsWith("blob:")&&URL.revokeObjectURL(t.url)},Kle=(t,e)=>{const n=JB(t,"fileList",void 0,{passive:!0}),i=u=>n.value.find(f=>f.uid===u.uid);function r(u){var f;(f=e.value)==null||f.abort(u)}function a(u=["ready","uploading","success","fail"]){n.value=n.value.filter(f=>!u.includes(f.status))}const d=(u,f)=>{const m=i(f);m&&(console.error(u),m.status="fail",n.value.splice(n.value.indexOf(m),1),t.onError(u,m,n.value),t.onChange(m,n.value))},s=(u,f)=>{const m=i(f);m&&(t.onProgress(u,m,n.value),m.status="uploading",m.percentage=Math.round(u.percent))},o=(u,f)=>{const m=i(f);m&&(m.status="success",m.response=u,t.onSuccess(u,m,n.value),t.onChange(m,n.value))},c=u=>{Cn(u.uid)&&(u.uid=Lg());const f={name:u.name,percentage:0,status:"ready",size:u.size,raw:u,uid:u.uid};if(t.listType==="picture-card"||t.listType==="picture")try{f.url=URL.createObjectURL(u)}catch(m){m.message,t.onError(m,f,n.value)}n.value=[...n.value,f],t.onChange(f,n.value)},h=async u=>{const f=u instanceof File?i(u):u;f||Tn(fC,"file to be removed not found");const m=g=>{r(g);const p=n.value;p.splice(p.indexOf(g),1),t.onRemove(g,p),Xle(g)};t.beforeRemove?await t.beforeRemove(f,n.value)!==!1&&m(f):m(f)};function l(){n.value.filter(({status:u})=>u==="ready").forEach(({raw:u})=>{var f;return u&&((f=e.value)==null?void 0:f.upload(u))})}return Be(()=>t.listType,u=>{u!=="picture-card"&&u!=="picture"||(n.value=n.value.map(f=>{const{raw:m,url:g}=f;if(!g&&m)try{f.url=URL.createObjectURL(m)}catch(p){t.onError(p,f,n.value)}return f}))}),Be(n,u=>{for(const f of u)f.uid||(f.uid=Lg()),f.status||(f.status="success")},{immediate:!0,deep:!0}),{uploadFiles:n,abort:r,clearFiles:a,handleError:d,handleProgress:s,handleStart:c,handleSuccess:o,handleRemove:h,submit:l}},Yle=de({name:"ElUpload"}),qle=de({...Yle,props:Ele,setup(t,{expose:e}){const n=t,i=Vn(),r=Mi(),a=Jt(),{abort:d,submit:s,clearFiles:o,uploadFiles:c,handleStart:h,handleError:l,handleRemove:u,handleSuccess:f,handleProgress:m}=Kle(n,a),g=R(()=>n.listType==="picture-card"),p=R(()=>({...n,fileList:c.value,onStart:h,onProgress:m,onSuccess:f,onError:l,onRemove:u}));return rn(()=>{c.value.forEach(({url:v})=>{v!=null&&v.startsWith("blob:")&&URL.revokeObjectURL(v)})}),xt(cA,{accept:ln(n,"accept")}),e({abort:d,submit:s,clearFiles:o,handleStart:h,handleRemove:u}),(v,b)=>(I(),ne("div",null,[y(g)&&v.showFileList?(I(),ke(uC,{key:0,disabled:y(r),"list-type":v.listType,files:y(c),"handle-preview":v.onPreview,onRemove:y(u)},ds({append:ve(()=>[ue(dC,St({ref_key:"uploadRef",ref:a},y(p)),{default:ve(()=>[y(i).trigger?Le(v.$slots,"trigger",{key:0}):Te("v-if",!0),!y(i).trigger&&y(i).default?Le(v.$slots,"default",{key:1}):Te("v-if",!0)]),_:3},16)]),_:2},[v.$slots.file?{name:"default",fn:ve(({file:_})=>[Le(v.$slots,"file",{file:_})])}:void 0]),1032,["disabled","list-type","files","handle-preview","onRemove"])):Te("v-if",!0),!y(g)||y(g)&&!v.showFileList?(I(),ke(dC,St({key:1,ref_key:"uploadRef",ref:a},y(p)),{default:ve(()=>[y(i).trigger?Le(v.$slots,"trigger",{key:0}):Te("v-if",!0),!y(i).trigger&&y(i).default?Le(v.$slots,"default",{key:1}):Te("v-if",!0)]),_:3},16)):Te("v-if",!0),v.$slots.trigger?Le(v.$slots,"default",{key:2}):Te("v-if",!0),Le(v.$slots,"tip"),!y(g)&&v.showFileList?(I(),ke(uC,{key:3,disabled:y(r),"list-type":v.listType,files:y(c),"handle-preview":v.onPreview,onRemove:y(u)},ds({_:2},[v.$slots.file?{name:"default",fn:ve(({file:_})=>[Le(v.$slots,"file",{file:_})])}:void 0]),1032,["disabled","list-type","files","handle-preview","onRemove"])):Te("v-if",!0)]))}});var Zle=je(qle,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload.vue"]]);const Jle=yt(Zle);var Qle=[cW,_W,jj,moe,Qj,o9,CE,b9,_9,jn,RE,UX,WX,rK,sK,bY,sY,TY,er,TK,rM,FY,n7,i7,XY,O7,tW,W7,G7,j7,X7,K7,aZ,vZ,yZ,LZ,UM,XZ,BJ,UJ,VJ,KM,hG,pG,tt,OQ,YM,Jn,qM,jQ,fee,hee,pee,mee,wee,Mte,Lte,zte,_E,s2,dM,HK,VK,sne,une,OY,Cs,ra,Bf,Qee,eie,lie,cie,Uie,Wie,x2,tre,ure,dre,wre,Rse,Pse,poe,Roe,Poe,hu,Noe,vX,zoe,Xoe,Koe,mi,_ae,Dae,Yae,nle,_le,Jle];const cr="ElInfiniteScroll",ece=50,tce=200,nce=0,ice={delay:{type:Number,default:tce},distance:{type:Number,default:nce},disabled:{type:Boolean,default:!1},immediate:{type:Boolean,default:!0}},X0=(t,e)=>Object.entries(ice).reduce((n,[i,r])=>{var a,d;const{type:s,default:o}=r,c=t.getAttribute(`infinite-scroll-${i}`);let h=(d=(a=e[c])!=null?a:c)!=null?d:o;return h=h==="false"?!1:h,h=s(h),n[i]=Number.isNaN(h)?o:h,n},{}),hA=t=>{const{observer:e}=t[cr];e&&(e.disconnect(),delete t[cr].observer)},rce=(t,e)=>{const{container:n,containerEl:i,instance:r,observer:a,lastScrollTop:d}=t[cr],{disabled:s,distance:o}=X0(t,r),{clientHeight:c,scrollHeight:h,scrollTop:l}=i,u=l-d;if(t[cr].lastScrollTop=l,a||s||u<0)return;let f=!1;if(n===t)f=h-(c+l)<=o;else{const{clientTop:m,scrollHeight:g}=t,p=n4(t,i);f=l+c>=p+m+g-o}f&&e.call(r)};function om(t,e){const{containerEl:n,instance:i}=t[cr],{disabled:r}=X0(t,i);r||n.clientHeight===0||(n.scrollHeight<=n.clientHeight?e.call(i):hA(t))}const sce={async mounted(t,e){const{instance:n,value:i}=e;lt(i)||Tn(cr,"'v-infinite-scroll' binding value must be a function"),await et();const{delay:r,immediate:a}=X0(t,n),d=Vv(t,!0),s=d===window?document.documentElement:d,o=Xo(rce.bind(null,t,i),r);if(d){if(t[cr]={instance:n,container:d,containerEl:s,delay:r,cb:i,onScroll:o,lastScrollTop:s.scrollTop},a){const c=new MutationObserver(Xo(om.bind(null,t,i),ece));t[cr].observer=c,c.observe(t,{childList:!0,subtree:!0}),om(t,i)}d.addEventListener("scroll",o)}},unmounted(t){const{container:e,onScroll:n}=t[cr];e==null||e.removeEventListener("scroll",n),hA(t)},async updated(t){if(!t[cr])await et();else{const{containerEl:e,cb:n,observer:i}=t[cr];e.clientHeight&&i&&om(t,n)}}},Ig=sce;Ig.install=t=>{t.directive("InfiniteScroll",Ig)};const oce=Ig;function ace(t){let e;const n=q(!1),i=Ft({...t,originalPosition:"",originalOverflow:"",visible:!1});function r(u){i.text=u}function a(){const u=i.parent,f=l.ns;if(!u.vLoadingAddClassList){let m=u.getAttribute("loading-number");m=Number.parseInt(m)-1,m?u.setAttribute("loading-number",m.toString()):(Ci(u,f.bm("parent","relative")),u.removeAttribute("loading-number")),Ci(u,f.bm("parent","hidden"))}d(),h.unmount()}function d(){var u,f;(f=(u=l.$el)==null?void 0:u.parentNode)==null||f.removeChild(l.$el)}function s(){var u;t.beforeClose&&!t.beforeClose()||(n.value=!0,clearTimeout(e),e=window.setTimeout(o,400),i.visible=!1,(u=t.closed)==null||u.call(t))}function o(){if(!n.value)return;const u=i.parent;n.value=!1,u.vLoadingAddClassList=void 0,a()}const h=O1(de({name:"ElLoading",setup(u,{expose:f}){const{ns:m,zIndex:g}=Ph("loading");return f({ns:m,zIndex:g}),()=>{const p=i.spinner||i.svg,v=st("svg",{class:"circular",viewBox:i.svgViewBox?i.svgViewBox:"0 0 50 50",...p?{innerHTML:p}:{}},[st("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})]),b=i.text?st("p",{class:m.b("text")},[i.text]):void 0;return st(wn,{name:m.b("fade"),onAfterLeave:o},{default:ve(()=>[pt(ue("div",{style:{backgroundColor:i.background||""},class:[m.b("mask"),i.customClass,i.fullscreen?"is-fullscreen":""]},[st("div",{class:m.b("spinner")},[v,b])]),[[Dt,i.visible]])])})}}})),l=h.mount(document.createElement("div"));return{...Rn(i),setText:r,removeElLoadingChild:d,close:s,handleAfterLeave:o,vm:l,get $el(){return l.$el}}}let Ud;const Dg=function(t={}){if(!kt)return;const e=lce(t);if(e.fullscreen&&Ud)return Ud;const n=ace({...e,closed:()=>{var r;(r=e.closed)==null||r.call(e),e.fullscreen&&(Ud=void 0)}});cce(e,e.parent,n),hC(e,e.parent,n),e.parent.vLoadingAddClassList=()=>hC(e,e.parent,n);let i=e.parent.getAttribute("loading-number");return i?i=`${Number.parseInt(i)+1}`:i="1",e.parent.setAttribute("loading-number",i),e.parent.appendChild(n.$el),et(()=>n.visible.value=e.visible),e.fullscreen&&(Ud=n),n},lce=t=>{var e,n,i,r;let a;return ct(t.target)?a=(e=document.querySelector(t.target))!=null?e:document.body:a=t.target||document.body,{parent:a===document.body||t.body?document.body:a,background:t.background||"",svg:t.svg||"",svgViewBox:t.svgViewBox||"",spinner:t.spinner||!1,text:t.text||"",fullscreen:a===document.body&&((n=t.fullscreen)!=null?n:!0),lock:(i=t.lock)!=null?i:!1,customClass:t.customClass||"",visible:(r=t.visible)!=null?r:!0,target:a}},cce=async(t,e,n)=>{const{nextZIndex:i}=n.vm.zIndex||n.vm._.exposed.zIndex,r={};if(t.fullscreen)n.originalPosition.value=ts(document.body,"position"),n.originalOverflow.value=ts(document.body,"overflow"),r.zIndex=i();else if(t.parent===document.body){n.originalPosition.value=ts(document.body,"position"),await et();for(const a of["top","left"]){const d=a==="top"?"scrollTop":"scrollLeft";r[a]=`${t.target.getBoundingClientRect()[a]+document.body[d]+document.documentElement[d]-Number.parseInt(ts(document.body,`margin-${a}`),10)}px`}for(const a of["height","width"])r[a]=`${t.target.getBoundingClientRect()[a]}px`}else n.originalPosition.value=ts(e,"position");for(const[a,d]of Object.entries(r))n.$el.style[a]=d},hC=(t,e,n)=>{const i=n.vm.ns||n.vm._.exposed.ns;["absolute","fixed","sticky"].includes(n.originalPosition.value)?Ci(e,i.bm("parent","relative")):Ar(e,i.bm("parent","relative")),t.fullscreen&&t.lock?Ar(e,i.bm("parent","hidden")):Ci(e,i.bm("parent","hidden"))},Ng=Symbol("ElLoading"),pC=(t,e)=>{var n,i,r,a;const d=e.instance,s=u=>_t(e.value)?e.value[u]:void 0,o=u=>{const f=ct(u)&&(d==null?void 0:d[u])||u;return f&&q(f)},c=u=>o(s(u)||t.getAttribute(`element-loading-${so(u)}`)),h=(n=s("fullscreen"))!=null?n:e.modifiers.fullscreen,l={text:c("text"),svg:c("svg"),svgViewBox:c("svgViewBox"),spinner:c("spinner"),background:c("background"),customClass:c("customClass"),fullscreen:h,target:(i=s("target"))!=null?i:h?void 0:t,body:(r=s("body"))!=null?r:e.modifiers.body,lock:(a=s("lock"))!=null?a:e.modifiers.lock};t[Ng]={options:l,instance:Dg(l)}},uce=(t,e)=>{for(const n of Object.keys(e))en(e[n])&&(e[n].value=t[n])},mC={mounted(t,e){e.value&&pC(t,e)},updated(t,e){const n=t[Ng];e.oldValue!==e.value&&(e.value&&!e.oldValue?pC(t,e):e.value&&e.oldValue?_t(e.value)&&uce(e.value,n.options):n==null||n.instance.close())},unmounted(t){var e;(e=t[Ng])==null||e.instance.close()}},dce={install(t){t.directive("loading",mC),t.config.globalProperties.$loading=Dg},directive:mC,service:Dg},pA=["success","info","warning","error"],yi=an({customClass:"",center:!1,dangerouslyUseHTMLString:!1,duration:3e3,icon:void 0,id:"",message:"",onClose:void 0,showClose:!1,type:"info",offset:16,zIndex:0,grouping:!1,repeatNum:1,appendTo:kt?document.body:void 0}),fce=Xe({customClass:{type:String,default:yi.customClass},center:{type:Boolean,default:yi.center},dangerouslyUseHTMLString:{type:Boolean,default:yi.dangerouslyUseHTMLString},duration:{type:Number,default:yi.duration},icon:{type:Qt,default:yi.icon},id:{type:String,default:yi.id},message:{type:Ae([String,Object,Function]),default:yi.message},onClose:{type:Ae(Function),required:!1},showClose:{type:Boolean,default:yi.showClose},type:{type:String,values:pA,default:yi.type},offset:{type:Number,default:yi.offset},zIndex:{type:Number,default:yi.zIndex},grouping:{type:Boolean,default:yi.grouping},repeatNum:{type:Number,default:yi.repeatNum}}),hce={destroy:()=>!0},hr=NC([]),pce=t=>{const e=hr.findIndex(r=>r.id===t),n=hr[e];let i;return e>0&&(i=hr[e-1]),{current:n,prev:i}},mce=t=>{const{prev:e}=pce(t);return e?e.vm.exposed.bottom.value:0},gce=(t,e)=>hr.findIndex(i=>i.id===t)>0?20:e,vce=["id"],yce=["innerHTML"],bce=de({name:"ElMessage"}),_ce=de({...bce,props:fce,emits:hce,setup(t,{expose:e}){const n=t,{Close:i}=Wv,{ns:r,zIndex:a}=Ph("message"),{currentZIndex:d,nextZIndex:s}=a,o=q(),c=q(!1),h=q(0);let l;const u=R(()=>n.type?n.type==="error"?"danger":n.type:"info"),f=R(()=>{const x=n.type;return{[r.bm("icon",x)]:x&&to[x]}}),m=R(()=>n.icon||to[n.type]||""),g=R(()=>mce(n.id)),p=R(()=>gce(n.id,n.offset)+g.value),v=R(()=>h.value+p.value),b=R(()=>({top:`${p.value}px`,zIndex:d.value}));function _(){n.duration!==0&&({stop:l}=na(()=>{w()},n.duration))}function S(){l==null||l()}function w(){c.value=!1}function C({code:x}){x===rt.esc&&w()}return mt(()=>{_(),s(),c.value=!0}),Be(()=>n.repeatNum,()=>{S(),_()}),cn(document,"keydown",C),Qn(o,()=>{h.value=o.value.getBoundingClientRect().height}),e({visible:c,bottom:v,close:w}),(x,M)=>(I(),ke(wn,{name:y(r).b("fade"),onBeforeLeave:x.onClose,onAfterLeave:M[0]||(M[0]=E=>x.$emit("destroy")),persisted:""},{default:ve(()=>[pt(ae("div",{id:x.id,ref_key:"messageRef",ref:o,class:B([y(r).b(),{[y(r).m(x.type)]:x.type&&!x.icon},y(r).is("center",x.center),y(r).is("closable",x.showClose),x.customClass]),style:nt(y(b)),role:"alert",onMouseenter:S,onMouseleave:_},[x.repeatNum>1?(I(),ke(y(CE),{key:0,value:x.repeatNum,type:y(u),class:B(y(r).e("badge"))},null,8,["value","type","class"])):Te("v-if",!0),y(m)?(I(),ke(y(tt),{key:1,class:B([y(r).e("icon"),y(f)])},{default:ve(()=>[(I(),ke(Ct(y(m))))]),_:1},8,["class"])):Te("v-if",!0),Le(x.$slots,"default",{},()=>[x.dangerouslyUseHTMLString?(I(),ne(Qe,{key:1},[Te(" Caution here, message could've been compromised, never use user's input as message "),ae("p",{class:B(y(r).e("content")),innerHTML:x.message},null,10,yce)],2112)):(I(),ne("p",{key:0,class:B(y(r).e("content"))},$e(x.message),3))]),x.showClose?(I(),ke(y(tt),{key:2,class:B(y(r).e("closeBtn")),onClick:ot(w,["stop"])},{default:ve(()=>[ue(y(i))]),_:1},8,["class","onClick"])):Te("v-if",!0)],46,vce),[[Dt,c.value]])]),_:3},8,["name","onBeforeLeave"]))}});var Sce=je(_ce,[["__file","/home/runner/work/element-plus/element-plus/packages/components/message/src/message.vue"]]);let wce=1;const mA=t=>{const e=!t||ct(t)||un(t)||lt(t)?{message:t}:t,n={...yi,...e};if(!n.appendTo)n.appendTo=document.body;else if(ct(n.appendTo)){let i=document.querySelector(n.appendTo);Yi(i)||(i=document.body),n.appendTo=i}return n},Cce=t=>{const e=hr.indexOf(t);if(e===-1)return;hr.splice(e,1);const{handler:n}=t;n.close()},xce=({appendTo:t,...e},n)=>{const i=`message_${wce++}`,r=e.onClose,a=document.createElement("div"),d={...e,id:i,onClose:()=>{r==null||r(),Cce(h)},onDestroy:()=>{pl(null,a)}},s=ue(Sce,d,lt(d.message)||un(d.message)?{default:lt(d.message)?d.message:()=>d.message}:null);s.appContext=n||Fl._context,pl(s,a),t.appendChild(a.firstElementChild);const o=s.component,h={id:i,vnode:s,vm:o,handler:{close:()=>{o.exposed.visible.value=!1}},props:s.component.props};return h},Fl=(t={},e)=>{if(!kt)return{close:()=>{}};if(at(Hm.max)&&hr.length>=Hm.max)return{close:()=>{}};const n=mA(t);if(n.grouping&&hr.length){const r=hr.find(({vnode:a})=>{var d;return((d=a.props)==null?void 0:d.message)===n.message});if(r)return r.props.repeatNum+=1,r.props.type=n.type,r.handler}const i=xce(n,e);return hr.push(i),i.handler};pA.forEach(t=>{Fl[t]=(e={},n)=>{const i=mA(e);return Fl({...i,type:t},n)}});function Tce(t){for(const e of hr)(!t||t===e.props.type)&&e.handler.close()}Fl.closeAll=Tce;Fl._context=null;const Ece=ST(Fl,"$message"),Mce=de({name:"ElMessageBox",directives:{TrapFocus:Q9},components:{ElButton:jn,ElFocusTrap:Lh,ElInput:Jn,ElOverlay:_0,ElIcon:tt,...Wv},inheritAttrs:!1,props:{buttonSize:{type:String,validator:Ch},modal:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},closeOnHashChange:{type:Boolean,default:!0},center:Boolean,draggable:Boolean,roundButton:{default:!1,type:Boolean},container:{type:String,default:"body"},boxType:{type:String,default:""}},emits:["vanish","action"],setup(t,{emit:e}){const{locale:n,zIndex:i,ns:r,size:a}=Ph("message-box",R(()=>t.buttonSize)),{t:d}=n,{nextZIndex:s}=i,o=q(!1),c=Ft({autofocus:!0,beforeClose:null,callback:null,cancelButtonText:"",cancelButtonClass:"",confirmButtonText:"",confirmButtonClass:"",customClass:"",customStyle:{},dangerouslyUseHTMLString:!1,distinguishCancelAndClose:!1,icon:"",inputPattern:null,inputPlaceholder:"",inputType:"text",inputValue:null,inputValidator:null,inputErrorMessage:"",message:null,modalFade:!0,modalClass:"",showCancelButton:!1,showConfirmButton:!0,type:"",title:void 0,showInput:!1,action:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonDisabled:!1,editorErrorMessage:"",validateError:!1,zIndex:s()}),h=R(()=>{const j=c.type;return{[r.bm("icon",j)]:j&&to[j]}}),l=Ji(),u=Ji(),f=R(()=>c.icon||to[c.type]||""),m=R(()=>!!c.message),g=q(),p=q(),v=q(),b=q(),_=q(),S=R(()=>c.confirmButtonClass);Be(()=>c.inputValue,async j=>{await et(),t.boxType==="prompt"&&j!==null&&O()},{immediate:!0}),Be(()=>o.value,j=>{var V,k;j&&(t.boxType!=="prompt"&&(c.autofocus?v.value=(k=(V=_.value)==null?void 0:V.$el)!=null?k:g.value:v.value=g.value),c.zIndex=s()),t.boxType==="prompt"&&(j?et().then(()=>{var F;b.value&&b.value.$el&&(c.autofocus?v.value=(F=D())!=null?F:g.value:v.value=g.value)}):(c.editorErrorMessage="",c.validateError=!1))});const w=R(()=>t.draggable);wT(g,p,w),mt(async()=>{await et(),t.closeOnHashChange&&window.addEventListener("hashchange",C)}),rn(()=>{t.closeOnHashChange&&window.removeEventListener("hashchange",C)});function C(){o.value&&(o.value=!1,et(()=>{c.action&&e("action",c.action)}))}const x=()=>{t.closeOnClickModal&&A(c.distinguishCancelAndClose?"close":"cancel")},M=t0(x),E=j=>{if(c.inputType!=="textarea")return j.preventDefault(),A("confirm")},A=j=>{var V;t.boxType==="prompt"&&j==="confirm"&&!O()||(c.action=j,c.beforeClose?(V=c.beforeClose)==null||V.call(c,j,c,C):C())},O=()=>{if(t.boxType==="prompt"){const j=c.inputPattern;if(j&&!j.test(c.inputValue||""))return c.editorErrorMessage=c.inputErrorMessage||d("el.messagebox.error"),c.validateError=!0,!1;const V=c.inputValidator;if(typeof V=="function"){const k=V(c.inputValue);if(k===!1)return c.editorErrorMessage=c.inputErrorMessage||d("el.messagebox.error"),c.validateError=!0,!1;if(typeof k=="string")return c.editorErrorMessage=k,c.validateError=!0,!1}}return c.editorErrorMessage="",c.validateError=!1,!0},D=()=>{const j=b.value.$refs;return j.input||j.textarea},L=()=>{A("close")},U=()=>{t.closeOnPressEscape&&L()};return t.lockScroll&&TT(o),{...Rn(c),ns:r,overlayEvent:M,visible:o,hasMessage:m,typeClass:h,contentId:l,inputId:u,btnSize:a,iconComponent:f,confirmButtonClasses:S,rootRef:g,focusStartRef:v,headerRef:p,inputRef:b,confirmRef:_,doClose:C,handleClose:L,onCloseRequested:U,handleWrapperClick:x,handleInputEnter:E,handleAction:A,t:d}}}),Ace=["aria-label","aria-describedby"],kce=["aria-label"],Rce=["id"];function Pce(t,e,n,i,r,a){const d=ft("el-icon"),s=ft("close"),o=ft("el-input"),c=ft("el-button"),h=ft("el-focus-trap"),l=ft("el-overlay");return I(),ke(wn,{name:"fade-in-linear",onAfterLeave:e[11]||(e[11]=u=>t.$emit("vanish")),persisted:""},{default:ve(()=>[pt(ue(l,{"z-index":t.zIndex,"overlay-class":[t.ns.is("message-box"),t.modalClass],mask:t.modal},{default:ve(()=>[ae("div",{role:"dialog","aria-label":t.title,"aria-modal":"true","aria-describedby":t.showInput?void 0:t.contentId,class:B(`${t.ns.namespace.value}-overlay-message-box`),onClick:e[8]||(e[8]=(...u)=>t.overlayEvent.onClick&&t.overlayEvent.onClick(...u)),onMousedown:e[9]||(e[9]=(...u)=>t.overlayEvent.onMousedown&&t.overlayEvent.onMousedown(...u)),onMouseup:e[10]||(e[10]=(...u)=>t.overlayEvent.onMouseup&&t.overlayEvent.onMouseup(...u))},[ue(h,{loop:"",trapped:t.visible,"focus-trap-el":t.rootRef,"focus-start-el":t.focusStartRef,onReleaseRequested:t.onCloseRequested},{default:ve(()=>[ae("div",{ref:"rootRef",class:B([t.ns.b(),t.customClass,t.ns.is("draggable",t.draggable),{[t.ns.m("center")]:t.center}]),style:nt(t.customStyle),tabindex:"-1",onClick:e[7]||(e[7]=ot(()=>{},["stop"]))},[t.title!==null&&t.title!==void 0?(I(),ne("div",{key:0,ref:"headerRef",class:B(t.ns.e("header"))},[ae("div",{class:B(t.ns.e("title"))},[t.iconComponent&&t.center?(I(),ke(d,{key:0,class:B([t.ns.e("status"),t.typeClass])},{default:ve(()=>[(I(),ke(Ct(t.iconComponent)))]),_:1},8,["class"])):Te("v-if",!0),ae("span",null,$e(t.title),1)],2),t.showClose?(I(),ne("button",{key:0,type:"button",class:B(t.ns.e("headerbtn")),"aria-label":t.t("el.messagebox.close"),onClick:e[0]||(e[0]=u=>t.handleAction(t.distinguishCancelAndClose?"close":"cancel")),onKeydown:e[1]||(e[1]=Rt(ot(u=>t.handleAction(t.distinguishCancelAndClose?"close":"cancel"),["prevent"]),["enter"]))},[ue(d,{class:B(t.ns.e("close"))},{default:ve(()=>[ue(s)]),_:1},8,["class"])],42,kce)):Te("v-if",!0)],2)):Te("v-if",!0),ae("div",{id:t.contentId,class:B(t.ns.e("content"))},[ae("div",{class:B(t.ns.e("container"))},[t.iconComponent&&!t.center&&t.hasMessage?(I(),ke(d,{key:0,class:B([t.ns.e("status"),t.typeClass])},{default:ve(()=>[(I(),ke(Ct(t.iconComponent)))]),_:1},8,["class"])):Te("v-if",!0),t.hasMessage?(I(),ne("div",{key:1,class:B(t.ns.e("message"))},[Le(t.$slots,"default",{},()=>[t.dangerouslyUseHTMLString?(I(),ke(Ct(t.showInput?"label":"p"),{key:1,for:t.showInput?t.inputId:void 0,innerHTML:t.message},null,8,["for","innerHTML"])):(I(),ke(Ct(t.showInput?"label":"p"),{key:0,for:t.showInput?t.inputId:void 0},{default:ve(()=>[Tt($e(t.dangerouslyUseHTMLString?"":t.message),1)]),_:1},8,["for"]))])],2)):Te("v-if",!0)],2),pt(ae("div",{class:B(t.ns.e("input"))},[ue(o,{id:t.inputId,ref:"inputRef",modelValue:t.inputValue,"onUpdate:modelValue":e[2]||(e[2]=u=>t.inputValue=u),type:t.inputType,placeholder:t.inputPlaceholder,"aria-invalid":t.validateError,class:B({invalid:t.validateError}),onKeydown:Rt(t.handleInputEnter,["enter"])},null,8,["id","modelValue","type","placeholder","aria-invalid","class","onKeydown"]),ae("div",{class:B(t.ns.e("errormsg")),style:nt({visibility:t.editorErrorMessage?"visible":"hidden"})},$e(t.editorErrorMessage),7)],2),[[Dt,t.showInput]])],10,Rce),ae("div",{class:B(t.ns.e("btns"))},[t.showCancelButton?(I(),ke(c,{key:0,loading:t.cancelButtonLoading,class:B([t.cancelButtonClass]),round:t.roundButton,size:t.btnSize,onClick:e[3]||(e[3]=u=>t.handleAction("cancel")),onKeydown:e[4]||(e[4]=Rt(ot(u=>t.handleAction("cancel"),["prevent"]),["enter"]))},{default:ve(()=>[Tt($e(t.cancelButtonText||t.t("el.messagebox.cancel")),1)]),_:1},8,["loading","class","round","size"])):Te("v-if",!0),pt(ue(c,{ref:"confirmRef",type:"primary",loading:t.confirmButtonLoading,class:B([t.confirmButtonClasses]),round:t.roundButton,disabled:t.confirmButtonDisabled,size:t.btnSize,onClick:e[5]||(e[5]=u=>t.handleAction("confirm")),onKeydown:e[6]||(e[6]=Rt(ot(u=>t.handleAction("confirm"),["prevent"]),["enter"]))},{default:ve(()=>[Tt($e(t.confirmButtonText||t.t("el.messagebox.confirm")),1)]),_:1},8,["loading","class","round","disabled","size"]),[[Dt,t.showConfirmButton]])],2)],6)]),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])],42,Ace)]),_:3},8,["z-index","overlay-class","mask"]),[[Dt,t.visible]])]),_:3})}var Oce=je(Mce,[["render",Pce],["__file","/home/runner/work/element-plus/element-plus/packages/components/message-box/src/index.vue"]]);const wu=new Map,Lce=t=>{let e=document.body;return t.appendTo&&(ct(t.appendTo)&&(e=document.querySelector(t.appendTo)),Yi(t.appendTo)&&(e=t.appendTo),Yi(e)||(e=document.body)),e},Ice=(t,e,n=null)=>{const i=ue(Oce,t,lt(t.message)||un(t.message)?{default:lt(t.message)?t.message:()=>t.message}:null);return i.appContext=n,pl(i,e),Lce(t).appendChild(e.firstElementChild),i.component},Dce=()=>document.createElement("div"),Nce=(t,e)=>{const n=Dce();t.onVanish=()=>{pl(null,n),wu.delete(r)},t.onAction=a=>{const d=wu.get(r);let s;t.showInput?s={value:r.inputValue,action:a}:s=a,t.callback?t.callback(s,i.proxy):a==="cancel"||a==="close"?t.distinguishCancelAndClose&&a!=="cancel"?d.reject("close"):d.reject("cancel"):d.resolve(s)};const i=Ice(t,n,e),r=i.proxy;for(const a in t)Mt(t,a)&&!Mt(r.$props,a)&&(r[a]=t[a]);return r.visible=!0,r};function ql(t,e=null){if(!kt)return Promise.reject();let n;return ct(t)||un(t)?t={message:t}:n=t.callback,new Promise((i,r)=>{const a=Nce(t,e??ql._context);wu.set(a,{options:t,callback:n,resolve:i,reject:r})})}const Fce=["alert","confirm","prompt"],Bce={alert:{closeOnPressEscape:!1,closeOnClickModal:!1},confirm:{showCancelButton:!0},prompt:{showCancelButton:!0,showInput:!0}};Fce.forEach(t=>{ql[t]=Uce(t)});function Uce(t){return(e,n,i,r)=>{let a="";return _t(n)?(i=n,a=""):Un(n)?a="":a=n,ql(Object.assign({title:a,message:e,type:"",...Bce[t]},i,{boxType:t}),r)}}ql.close=()=>{wu.forEach((t,e)=>{e.doClose()}),wu.clear()};ql._context=null;const Ns=ql;Ns.install=t=>{Ns._context=t._context,t.config.globalProperties.$msgbox=Ns,t.config.globalProperties.$messageBox=Ns,t.config.globalProperties.$alert=Ns.alert,t.config.globalProperties.$confirm=Ns.confirm,t.config.globalProperties.$prompt=Ns.prompt};const Vce=Ns,gA=["success","info","warning","error"],Hce=Xe({customClass:{type:String,default:""},dangerouslyUseHTMLString:{type:Boolean,default:!1},duration:{type:Number,default:4500},icon:{type:Qt},id:{type:String,default:""},message:{type:Ae([String,Object]),default:""},offset:{type:Number,default:0},onClick:{type:Ae(Function),default:()=>{}},onClose:{type:Ae(Function),required:!0},position:{type:String,values:["top-right","top-left","bottom-right","bottom-left"],default:"top-right"},showClose:{type:Boolean,default:!0},title:{type:String,default:""},type:{type:String,values:[...gA,""],default:""},zIndex:Number}),zce={destroy:()=>!0},$ce=["id"],Wce=["textContent"],Gce={key:0},jce=["innerHTML"],Xce=de({name:"ElNotification"}),Kce=de({...Xce,props:Hce,emits:zce,setup(t,{expose:e}){const n=t,{ns:i,zIndex:r}=Ph("notification"),{nextZIndex:a,currentZIndex:d}=r,{Close:s}=bT,o=q(!1);let c;const h=R(()=>{const _=n.type;return _&&to[n.type]?i.m(_):""}),l=R(()=>n.type&&to[n.type]||n.icon),u=R(()=>n.position.endsWith("right")?"right":"left"),f=R(()=>n.position.startsWith("top")?"top":"bottom"),m=R(()=>{var _;return{[f.value]:`${n.offset}px`,zIndex:(_=n.zIndex)!=null?_:d.value}});function g(){n.duration>0&&({stop:c}=na(()=>{o.value&&v()},n.duration))}function p(){c==null||c()}function v(){o.value=!1}function b({code:_}){_===rt.delete||_===rt.backspace?p():_===rt.esc?o.value&&v():g()}return mt(()=>{g(),a(),o.value=!0}),cn(document,"keydown",b),e({visible:o,close:v}),(_,S)=>(I(),ke(wn,{name:y(i).b("fade"),onBeforeLeave:_.onClose,onAfterLeave:S[1]||(S[1]=w=>_.$emit("destroy")),persisted:""},{default:ve(()=>[pt(ae("div",{id:_.id,class:B([y(i).b(),_.customClass,y(u)]),style:nt(y(m)),role:"alert",onMouseenter:p,onMouseleave:g,onClick:S[0]||(S[0]=(...w)=>_.onClick&&_.onClick(...w))},[y(l)?(I(),ke(y(tt),{key:0,class:B([y(i).e("icon"),y(h)])},{default:ve(()=>[(I(),ke(Ct(y(l))))]),_:1},8,["class"])):Te("v-if",!0),ae("div",{class:B(y(i).e("group"))},[ae("h2",{class:B(y(i).e("title")),textContent:$e(_.title)},null,10,Wce),pt(ae("div",{class:B(y(i).e("content")),style:nt(_.title?void 0:{margin:0})},[Le(_.$slots,"default",{},()=>[_.dangerouslyUseHTMLString?(I(),ne(Qe,{key:1},[Te(" Caution here, message could've been compromised, never use user's input as message "),ae("p",{innerHTML:_.message},null,8,jce)],2112)):(I(),ne("p",Gce,$e(_.message),1))])],6),[[Dt,_.message]]),_.showClose?(I(),ke(y(tt),{key:0,class:B(y(i).e("closeBtn")),onClick:ot(v,["stop"])},{default:ve(()=>[ue(y(s))]),_:1},8,["class","onClick"])):Te("v-if",!0)],2)],46,$ce),[[Dt,o.value]])]),_:3},8,["name","onBeforeLeave"]))}});var Yce=je(Kce,[["__file","/home/runner/work/element-plus/element-plus/packages/components/notification/src/notification.vue"]]);const Xf={"top-left":[],"top-right":[],"bottom-left":[],"bottom-right":[]},Fg=16;let qce=1;const Bl=function(t={},e=null){if(!kt)return{close:()=>{}};(typeof t=="string"||un(t))&&(t={message:t});const n=t.position||"top-right";let i=t.offset||0;Xf[n].forEach(({vm:h})=>{var l;i+=(((l=h.el)==null?void 0:l.offsetHeight)||0)+Fg}),i+=Fg;const r=`notification_${qce++}`,a=t.onClose,d={...t,offset:i,id:r,onClose:()=>{Zce(r,n,a)}};let s=document.body;Yi(t.appendTo)?s=t.appendTo:ct(t.appendTo)&&(s=document.querySelector(t.appendTo)),Yi(s)||(s=document.body);const o=document.createElement("div"),c=ue(Yce,d,un(d.message)?{default:()=>d.message}:null);return c.appContext=e??Bl._context,c.props.onDestroy=()=>{pl(null,o)},pl(c,o),Xf[n].push({vm:c}),s.appendChild(o.firstElementChild),{close:()=>{c.component.exposed.visible.value=!1}}};gA.forEach(t=>{Bl[t]=(e={})=>((typeof e=="string"||un(e))&&(e={message:e}),Bl({...e,type:t}))});function Zce(t,e,n){const i=Xf[e],r=i.findIndex(({vm:c})=>{var h;return((h=c.component)==null?void 0:h.props.id)===t});if(r===-1)return;const{vm:a}=i[r];if(!a)return;n==null||n(a);const d=a.el.offsetHeight,s=e.split("-")[0];i.splice(r,1);const o=i.length;if(!(o<1))for(let c=r;c<o;c++){const{el:h,component:l}=i[c].vm,u=Number.parseInt(h.style[s],10)-d-Fg;l.props.offset=u}}function Jce(){for(const t of Object.values(Xf))t.forEach(({vm:e})=>{e.component.exposed.visible.value=!1})}Bl.closeAll=Jce;Bl._context=null;const Qce=ST(Bl,"$notify");var eue=[oce,dce,Ece,Vce,Qce,r2],tue=iW([...Qle,...eue]);const vA=O1(_B);vA.use(tue);vA.mount("#app");
